(function e(t,i,r){function n(s,o){if(!i[s]){if(!t[s]){var l=typeof require=="function"&&require;if(!o&&l)return l(s,!0);if(a)return a(s,!0);var u=new Error("Cannot find module '"+s+"'");throw u.code="MODULE_NOT_FOUND",u}var h=i[s]={exports:{}};t[s][0].call(h.exports,function(e){var i=t[s][1][e];return n(i?i:e)},h,h.exports,e,t,i,r)}return i[s].exports}var a=typeof require=="function"&&require;for(var s=0;s<r.length;s++)n(r[s]);return n})({1:[function(e,t,i){"use strict";t.exports.Composer=e("./src/Composer");t.exports.CopyPass=e("./src/passes/copy/CopyPass");t.exports.BlendMode={Normal:1,Dissolve:2,Darken:3,Multiply:4,ColorBurn:5,LinearBurn:6,DarkerColor:7,Lighten:8,Screen:9,ColorDodge:10,LinearDodge:11,LighterColor:12,Overlay:13,SoftLight:14,HardLight:15,VividLight:16,LinearLight:17,PinLight:18,HardMix:19,Difference:20,Exclusion:21,Substract:22,Divide:23}},{"./src/Composer":2,"./src/passes/copy/CopyPass":10}],2:[function(e,t,i){"use strict";var r=e("three");var n=e("./passes/copy/CopyPass");var a=e("./Stack");var s=e("./Pass");function o(e,t){var i=e.getPixelRatio();this.width=Math.floor(e.context.canvas.width/i)||1;this.height=Math.floor(e.context.canvas.height/i)||1;this.output=null;this.input=null;this.read=null;this.write=null;this.settings=t||{};this.useRGBA=this.settings.useRGBA||false;this.renderer=e;this.copyPass=new n(this.settings);this.defaultMaterial=new r.MeshBasicMaterial({color:65280,wireframe:false});this.scene=new r.Scene;this.quad=new r.Mesh(new r.PlaneBufferGeometry(1,1),this.defaultMaterial);this.scene.add(this.quad);this.camera=new r.OrthographicCamera(1,1,1,1,-1e4,1e4);this.front=new r.WebGLRenderTarget(1,1,{minFilter:this.settings.minFilter!==undefined?this.settings.minFilter:r.LinearFilter,magFilter:this.settings.magFilter!==undefined?this.settings.magFilter:r.LinearFilter,wrapS:this.settings.wrapS!==undefined?this.settings.wrapS:r.ClampToEdgeWrapping,wrapT:this.settings.wrapT!==undefined?this.settings.wrapT:r.ClampToEdgeWrapping,format:this.useRGBA?r.RGBAFormat:r.RGBFormat,type:this.settings.type!==undefined?this.settings.type:r.UnsignedByteType,stencilBuffer:this.settings.stencilBuffer!==undefined?this.settings.stencilBuffer:true});this.back=this.front.clone();this.startTime=Date.now();this.passes={};this.setSize(this.width,this.height)}t.exports=o;o.prototype.swapBuffers=function(){this.output=this.write;this.input=this.read;var e=this.write;this.write=this.read;this.read=e};o.prototype.render=function(e,t,i,r){if(i)this.swapBuffers();this.renderer.render(e,t,r?r:this.write,true);if(!r)this.swapBuffers()};o.prototype.toScreen=function(e){this.quad.material=e?e.shader:this.copyPass.shader;this.quad.material.uniforms.tInput.value=this.read.texture;this.quad.material.uniforms.resolution.value.set(this.width,this.height);this.renderer.render(this.scene,this.camera)};o.prototype.toTexture=function(e,t){this.quad.material=t?t.shader:this.copyPass.shader;this.quad.material.uniforms.tInput.value=this.read.texture;this.renderer.render(this.scene,this.camera,e,false)};o.prototype.pass=function(e){if(e instanceof a){this.passStack(e)}else{if(e instanceof r.ShaderMaterial){this.quad.material=e}if(e instanceof s){e.run(this);return}if(!e.isSim){this.quad.material.uniforms.tInput.value=this.read.texture}this.quad.material.uniforms.resolution.value.set(this.width,this.height);this.quad.material.uniforms.time.value=.001*(Date.now()-this.startTime);this.renderer.render(this.scene,this.camera,this.write,false);this.swapBuffers()}};o.prototype.passStack=function(e){e.getPasses().forEach(function(e){this.pass(e)}.bind(this))};o.prototype.reset=function(){this.read=this.front;this.write=this.back;this.output=this.write;this.input=this.read};o.prototype.setSource=function(e){this.quad.material=this.copyPass.shader;this.quad.material.uniforms.tInput.value=e;this.renderer.render(this.scene,this.camera,this.write,true);this.swapBuffers()};o.prototype.setSize=function(e,t){this.width=e;this.height=t;this.camera.projectionMatrix.makeOrthographic(e/-2,e/2,t/2,t/-2,this.camera.near,this.camera.far);this.quad.scale.set(e,t,1);this.front.setSize(e,t);this.back.setSize(e,t)}},{"./Pass":3,"./Stack":4,"./passes/copy/CopyPass":10,three:32}],3:[function(e,t,i){"use strict";var r=e("three");var n=e("./utils/processShader");function a(){this.shader=null;this.loaded=null;this.params={};this.isSim=false}t.exports=a;a.prototype.setShader=function(e,t){this.shader=n(e,t)};a.prototype.run=function(e){e.pass(this.shader)};a.prototype.getOfflineTexture=function(e,t,i){return new r.WebGLRenderTarget(e,t,{minFilter:r.LinearFilter,magFilter:r.LinearFilter,format:i?r.RGBAFormat:r.RGBFormat})}},{"./utils/processShader":13,three:32}],4:[function(e,t,i){"use strict";function r(e){this.passItems=[];this.shadersPool=e;this.passes=[]}t.exports=r;r.prototype.addPass=function(e,t,i,r){var n=0;var a={shaderName:e,enabled:t||false};this.passItems.push(a);n=this.passItems.length;this.updatePasses();if(r){return this.movePassToIndex(this.passItems[n],r)}else{return n-1}};r.prototype.removePass=function(e){this.passItems.splice(e,1);this.updatePasses()};r.prototype.enablePass=function(e){this.passItems[e].enabled=true;this.updatePasses()};r.prototype.disablePass=function(e){this.passItems[e].enabled=false;this.updatePasses()};r.prototype.isPassEnabled=function(e){return this.passItems[e].enabled};r.prototype.movePassToIndex=function(e,t){this.passItems.splice(t,0,this.passItems.splice(e,1)[0]);this.updatePasses();return t};r.prototype.reverse=function(){this.passItems.reverse();this.updatePasses()};r.prototype.updatePasses=function(){this.passes=this.shadersPool.getPasses(this.passItems);this.passItems.forEach(function(e,t){if(e.params===undefined){e.params=JSON.parse(JSON.stringify(this.passes[t].params))}}.bind(this))};r.prototype.getPasses=function(){return this.passes}},{}],5:[function(e,t,i){"use strict";var r=e("three");var n=e("../../Pass");var a="#define GLSLIFY 1\nvarying vec2 vUv;\n\nvoid main() {\n\n  vUv = uv;\n  gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n}";var s="#define GLSLIFY 1\nvarying vec2 vUv;\nuniform sampler2D tInput;\nuniform sampler2D tInput2;\nuniform vec2 resolution;\nuniform vec2 resolution2;\nuniform float aspectRatio;\nuniform float aspectRatio2;\nuniform int mode;\nuniform int sizeMode;\nuniform float opacity;\n\nvec2 vUv2;\n\nfloat applyOverlayToChannel( float base, float blend ) {\n\n  return (base < 0.5 ? (2.0 * base * blend) : (1.0 - 2.0 * (1.0 - base) * (1.0 - blend)));\n\n}\n\nfloat applySoftLightToChannel( float base, float blend ) {\n\n  return ((blend < 0.5) ? (2.0 * base * blend + base * base * (1.0 - 2.0 * blend)) : (sqrt(base) * (2.0 * blend - 1.0) + 2.0 * base * (1.0 - blend)));\n\n}\n\nfloat applyColorBurnToChannel( float base, float blend ) {\n\n  return ((blend == 0.0) ? blend : max((1.0 - ((1.0 - base) / blend)), 0.0));\n\n}\n\nfloat applyColorDodgeToChannel( float base, float blend ) {\n\n  return ((blend == 1.0) ? blend : min(base / (1.0 - blend), 1.0));\n\n}\n\nfloat applyLinearBurnToChannel( float base, float blend ) {\n\n  return max(base + blend - 1., 0.0 );\n\n}\n\nfloat applyLinearDodgeToChannel( float base, float blend ) {\n\n  return min( base + blend, 1. );\n\n}\n\nfloat applyLinearLightToChannel( float base, float blend ) {\n\n  return ( blend < .5 ) ? applyLinearBurnToChannel( base, 2. * blend ) : applyLinearDodgeToChannel( base, 2. * ( blend - .5 ) );\n\n}\n\nvoid main() {\n\n  vUv2 = vUv;\n  \n  if( sizeMode == 1 ) {\n    \n    if( aspectRatio2 > aspectRatio ) {\n      vUv2.x = vUv.x * aspectRatio / aspectRatio2;\n      vUv2.x += .5 * ( 1. - aspectRatio / aspectRatio2 ); \n      vUv2.y = vUv.y;\n    }\n\n    if( aspectRatio2 < aspectRatio ) {\n      vUv2.x = vUv.x;\n      vUv2.y = vUv.y * aspectRatio2 / aspectRatio;\n      vUv2.y += .5 * ( 1. - aspectRatio2 / aspectRatio );\n    }\n\n  }\n\n  vec4 base = texture2D( tInput, vUv );\n  vec4 blend = texture2D( tInput2, vUv2 );\n\n  if( mode == 1 ) { // normal\n\n    gl_FragColor = base;\n    gl_FragColor.a *= opacity;\n    return;\n\n  }\n\n  if( mode == 2 ) { // dissolve\n\n  }\n\n  if( mode == 3 ) { // darken\n\n    gl_FragColor = min( base, blend );\n    return;\n\n  }\n\n  if( mode == 4 ) { // multiply\n\n    gl_FragColor = base * blend;\n    return;\n\n  }\n\n  if( mode == 5 ) { // color burn\n\n    gl_FragColor = vec4(\n      applyColorBurnToChannel( base.r, blend.r ),\n      applyColorBurnToChannel( base.g, blend.g ),\n      applyColorBurnToChannel( base.b, blend.b ),\n      applyColorBurnToChannel( base.a, blend.a )\n    );\n    return;\n\n  }\n\n  if( mode == 6 ) { // linear burn\n\n    gl_FragColor = max(base + blend - 1.0, 0.0);\n    return;\n\n  }\n\n  if( mode == 7 ) { // darker color\n\n  }\n\n  if( mode == 8 ) { // lighten\n\n    gl_FragColor = max( base, blend );\n    return;\n\n  }\n\n  if( mode == 9 ) { // screen\n\n    gl_FragColor = (1.0 - ((1.0 - base) * (1.0 - blend)));\n    gl_FragColor = gl_FragColor * opacity + base * ( 1. - opacity );\n    return;\n\n  }\n\n  if( mode == 10 ) { // color dodge\n\n    gl_FragColor = vec4(\n      applyColorDodgeToChannel( base.r, blend.r ),\n      applyColorDodgeToChannel( base.g, blend.g ),\n      applyColorDodgeToChannel( base.b, blend.b ),\n      applyColorDodgeToChannel( base.a, blend.a )\n    );\n    return;\n\n  }\n\n  if( mode == 11 ) { // linear dodge\n\n    gl_FragColor = min(base + blend, 1.0);\n    return;\n\n  }\n\n  if( mode == 12 ) { // lighter color\n\n  }\n\n  if( mode == 13 ) { // overlay\n\n    gl_FragColor = gl_FragColor = vec4( \n      applyOverlayToChannel( base.r, blend.r ),\n      applyOverlayToChannel( base.g, blend.g ),\n      applyOverlayToChannel( base.b, blend.b ),\n      applyOverlayToChannel( base.a, blend.a )\n    );\n    gl_FragColor = gl_FragColor * opacity + base * ( 1. - opacity );\n  \n    return;\n\n  }\n\n  if( mode == 14 ) { // soft light\n\n    gl_FragColor = vec4( \n      applySoftLightToChannel( base.r, blend.r ),\n      applySoftLightToChannel( base.g, blend.g ),\n      applySoftLightToChannel( base.b, blend.b ),\n      applySoftLightToChannel( base.a, blend.a )\n    );\n    return;\n\n  }\n\n  if( mode == 15 ) { // hard light\n\n    gl_FragColor = vec4( \n      applyOverlayToChannel( base.r, blend.r ),\n      applyOverlayToChannel( base.g, blend.g ),\n      applyOverlayToChannel( base.b, blend.b ),\n      applyOverlayToChannel( base.a, blend.a )\n    );\n    gl_FragColor = gl_FragColor * opacity + base * ( 1. - opacity );\n    return;\n\n  }\n\n  if( mode == 16 ) { // vivid light\n\n  }\n\n  if( mode == 17 ) { // linear light\n\n    gl_FragColor = vec4( \n      applyLinearLightToChannel( base.r, blend.r ),\n      applyLinearLightToChannel( base.g, blend.g ),\n      applyLinearLightToChannel( base.b, blend.b ),\n      applyLinearLightToChannel( base.a, blend.a )\n    );\n    return;\n\n  }\n\n  if( mode == 18 ) { // pin light\n\n  }\n\n  if( mode == 19 ) { // hard mix\n\n  }\n\n  if( mode == 20 ) { // difference\n\n    gl_FragColor = abs( base - blend );\n    gl_FragColor.a = base.a + blend.b;\n    return;\n\n  }\n\n  if( mode == 21 ) { // exclusion\n\n    gl_FragColor = base + blend - 2. * base * blend;\n    \n  }\n\n  if( mode == 22 ) { // substract\n\n  }\n\n  if( mode == 23 ) { // divide\n\n  }\n\n  gl_FragColor = vec4( 1., 0., 1., 1. );\n\n}";function o(e){n.call(this);e=e||{};this.setShader(a,s);this.params.mode=e.mode||1;this.params.opacity=e.opacity||1;this.params.tInput2=e.tInput2||null;this.params.resolution2=e.resolution2||new r.Vector2;this.params.sizeMode=e.sizeMode||1;this.params.aspectRatio=e.aspectRatio||1;this.params.aspectRatio2=e.aspectRatio2||1}t.exports=o;o.prototype=Object.create(n.prototype);o.prototype.constructor=o;o.prototype.run=function(e){this.shader.uniforms.mode.value=this.params.mode;this.shader.uniforms.opacity.value=this.params.opacity;this.shader.uniforms.tInput2.value=this.params.tInput2;this.shader.uniforms.sizeMode.value=this.params.sizeMode;this.shader.uniforms.aspectRatio.value=this.params.aspectRatio;this.shader.uniforms.aspectRatio2.value=this.params.aspectRatio2;e.pass(this.shader)}},{"../../Pass":3,three:32}],6:[function(e,t,i){"use strict";var r=e("three");var n=e("../../Pass");var a=e("../../Composer");var s=e("../../..").BlendMode;var o=e("../box-blur/FullBoxBlurPass");var l=e("../blend/BlendPass");var u=e("../zoom-blur/ZoomBlurPass");var h=e("../brightness-contrast/BrightnessContrastPass");function c(e){n.call(this);e=e||{};this.composer=null;this.tmpTexture=this.getOfflineTexture(e.width,e.height,true);this.blurPass=new o(2);this.blendPass=new l;this.zoomBlur=new u;this.brightnessContrastPass=new h;this.width=e.width||512;this.height=e.height||512;this.params.blurAmount=e.blurAmount||2;this.params.applyZoomBlur=e.applyZoomBlur||false;this.params.zoomBlurStrength=e.zoomBlurStrength||.2;this.params.useTexture=e.useTexture||false;this.params.zoomBlurCenter=e.zoomBlurCenter||new r.Vector2(.5,.5);this.params.blendMode=e.blendMode||s.Screen;this.params.glowTexture=null}t.exports=c;c.prototype=Object.create(n.prototype);c.prototype.constructor=c;c.prototype.run=function(e){if(!this.composer){this.composer=new a(e.renderer,{useRGBA:true});this.composer.setSize(this.width,this.height)}this.composer.reset();if(this.params.useTexture===true){this.composer.setSource(this.params.glowTexture.texture)}else{this.composer.setSource(e.output.texture)}this.blurPass.params.amount=this.params.blurAmount;this.composer.pass(this.blurPass);if(this.params.applyZoomBlur){this.zoomBlur.params.center.set(.5,.5);this.zoomBlur.params.strength=this.params.zoomBlurStrength;this.composer.pass(this.zoomBlur)}if(this.params.useTexture===true){this.blendPass.params.mode=s.Screen;this.blendPass.params.tInput=this.params.glowTexture.texture;e.pass(this.blendPass)}this.blendPass.params.mode=this.params.blendMode;this.blendPass.params.tInput2=this.composer.output.texture;e.pass(this.blendPass)}},{"../../..":1,"../../Composer":2,"../../Pass":3,"../blend/BlendPass":5,"../box-blur/FullBoxBlurPass":8,"../brightness-contrast/BrightnessContrastPass":9,"../zoom-blur/ZoomBlurPass":12,three:32}],7:[function(e,t,i){"use strict";var r=e("three");var n=e("../../Pass");var a="#define GLSLIFY 1\n// non-dependent texture read according to :\n// http://xissburg.com/faster-gaussian-blur-in-glsl/\n\nvarying vec2 blurTexCoords[9];\nuniform vec2 delta;\nuniform vec2 resolution;\n\nvoid main() {\n\n  vec2 inc = delta / resolution;\n\n  blurTexCoords[ 0 ] = uv - inc * 4.;\n  blurTexCoords[ 1 ] = uv - inc * 3.;\n  blurTexCoords[ 2 ] = uv - inc * 2.;\n  blurTexCoords[ 3 ] = uv - inc * 1.;\n  blurTexCoords[ 4 ] = uv;\n  blurTexCoords[ 5 ] = uv + inc * 1.;\n  blurTexCoords[ 6 ] = uv + inc * 2.;\n  blurTexCoords[ 7 ] = uv + inc * 3.;\n  blurTexCoords[ 8 ] = uv + inc * 4.;\n\n  gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n}";var s="#define GLSLIFY 1\n// non-dependent texture read according to :\n// http://xissburg.com/faster-gaussian-blur-in-glsl/\n\nuniform sampler2D tInput;\nuniform vec2 delta;\nuniform vec2 resolution;\nvarying vec2 blurTexCoords[9];\n\nvoid main() {\n\n  vec4 sum = vec4( 0. );\n\n  sum += texture2D( tInput, blurTexCoords[0] ) * 0.051;\n  sum += texture2D( tInput, blurTexCoords[1] ) * 0.0918;\n  sum += texture2D( tInput, blurTexCoords[2] ) * 0.12245;\n  sum += texture2D( tInput, blurTexCoords[3] ) * 0.1531;\n  sum += texture2D( tInput, blurTexCoords[4] ) * 0.1633;\n  sum += texture2D( tInput, blurTexCoords[5] ) * 0.1531;\n  sum += texture2D( tInput, blurTexCoords[6] ) * 0.12245;\n  sum += texture2D( tInput, blurTexCoords[7] ) * 0.0918;\n  sum += texture2D( tInput, blurTexCoords[8] ) * 0.051;\n\n  gl_FragColor = sum;\n\n}";function o(e,t){n.call(this);this.setShader(a,s);this.params.delta=new r.Vector2(e||0,t||0)}t.exports=o;o.prototype=Object.create(n.prototype);o.prototype.constructor=o;o.prototype.run=function(e){this.shader.uniforms.delta.value.copy(this.params.delta);e.pass(this.shader)}},{"../../Pass":3,three:32}],8:[function(e,t,i){"use strict";var r=e("../../Pass");var n=e("./BoxBlurPass");function a(e){r.call(this);e=e||2;this.boxPass=new n(e,e);this.params.amount=e}t.exports=a;a.prototype=Object.create(r.prototype);a.prototype.constructor=a;a.prototype.run=function(e){var t=this.params.amount;this.boxPass.params.delta.set(t,0);e.pass(this.boxPass);this.boxPass.params.delta.set(0,t);e.pass(this.boxPass)}},{"../../Pass":3,"./BoxBlurPass":7}],9:[function(e,t,i){"use strict";var r=e("../../Pass");var n="#define GLSLIFY 1\nvarying vec2 vUv;\n\nvoid main() {\n\n  vUv = uv;\n  gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n}";var a="#define GLSLIFY 1\nuniform float brightness;\nuniform float contrast;\nuniform sampler2D tInput;\n\nvarying vec2 vUv;\n\nvoid main() {\n\n  vec3 color = texture2D(tInput, vUv).rgb;\n  vec3 colorContrasted = (color) * contrast;\n  vec3 bright = colorContrasted + vec3(brightness,brightness,brightness);\n  gl_FragColor.rgb = bright;\n  gl_FragColor.a = 1.;\n\n}";function s(e,t){r.call(this);this.setShader(n,a);this.params.brightness=e||1;this.params.contrast=t||1}t.exports=s;s.prototype=Object.create(r.prototype);s.prototype.constructor=s;s.prototype.run=function(e){this.shader.uniforms.brightness.value=this.params.brightness;this.shader.uniforms.contrast.value=this.params.contrast;e.pass(this.shader)}},{"../../Pass":3}],10:[function(e,t,i){"use strict";var r=e("../../Pass");var n="#define GLSLIFY 1\nvarying vec2 vUv;\n\nvoid main() {\n\n  vUv = uv;\n  gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n}";var a="#define GLSLIFY 1\nvarying vec2 vUv;\nuniform sampler2D tInput;\n\nvoid main() {\n  gl_FragColor = texture2D( tInput, vUv );\n\n}";function s(){r.call(this);this.setShader(n,a)}t.exports=s;s.prototype=Object.create(r.prototype);s.prototype.constructor=s},{"../../Pass":3}],11:[function(e,t,i){"use strict";var r=e("../../Pass");var n="#define GLSLIFY 1\nvarying vec2 vUv;\n\nvoid main() {\n\n  vUv = uv;\n  gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n}";var a="#define GLSLIFY 1\nuniform sampler2D tInput;\nuniform vec2 resolution;\nvarying vec2 vUv;\n\n#define FXAA_REDUCE_MIN   (1.0/128.0)\n#define FXAA_REDUCE_MUL   (1.0/8.0)\n#define FXAA_SPAN_MAX     8.0\n\nvoid main() {\n\n    vec2 res = 1. / resolution;\n\n    vec3 rgbNW = texture2D( tInput, ( vUv.xy + vec2( -1.0, -1.0 ) * res ) ).xyz;\n    vec3 rgbNE = texture2D( tInput, ( vUv.xy + vec2( 1.0, -1.0 ) * res ) ).xyz;\n    vec3 rgbSW = texture2D( tInput, ( vUv.xy + vec2( -1.0, 1.0 ) * res ) ).xyz;\n    vec3 rgbSE = texture2D( tInput, ( vUv.xy + vec2( 1.0, 1.0 ) * res ) ).xyz;\n    vec4 rgbaM  = texture2D( tInput,  vUv.xy  * res );\n    vec3 rgbM  = rgbaM.xyz;\n    vec3 luma = vec3( 0.299, 0.587, 0.114 );\n\n    float lumaNW = dot( rgbNW, luma );\n    float lumaNE = dot( rgbNE, luma );\n    float lumaSW = dot( rgbSW, luma );\n    float lumaSE = dot( rgbSE, luma );\n    float lumaM  = dot( rgbM,  luma );\n    float lumaMin = min( lumaM, min( min( lumaNW, lumaNE ), min( lumaSW, lumaSE ) ) );\n    float lumaMax = max( lumaM, max( max( lumaNW, lumaNE) , max( lumaSW, lumaSE ) ) );\n\n    vec2 dir;\n    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));\n    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));\n\n    float dirReduce = max( ( lumaNW + lumaNE + lumaSW + lumaSE ) * ( 0.25 * FXAA_REDUCE_MUL ), FXAA_REDUCE_MIN );\n\n    float rcpDirMin = 1.0 / ( min( abs( dir.x ), abs( dir.y ) ) + dirReduce );\n    dir = min( vec2( FXAA_SPAN_MAX,  FXAA_SPAN_MAX),\n          max( vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),\n                dir * rcpDirMin)) * res;\n    vec4 rgbA = (1.0/2.0) * (\n    texture2D(tInput,  vUv.xy + dir * (1.0/3.0 - 0.5)) +\n    texture2D(tInput,  vUv.xy + dir * (2.0/3.0 - 0.5)));\n    vec4 rgbB = rgbA * (1.0/2.0) + (1.0/4.0) * (\n    texture2D(tInput,  vUv.xy + dir * (0.0/3.0 - 0.5)) +\n    texture2D(tInput,  vUv.xy + dir * (3.0/3.0 - 0.5)));\n    float lumaB = dot(rgbB, vec4(luma, 0.0));\n\n    if ( ( lumaB < lumaMin ) || ( lumaB > lumaMax ) ) {\n        gl_FragColor = rgbA;\n    } else {\n        gl_FragColor = rgbB;\n    }\n\n    //gl_FragColor = vec4( texture2D( tInput,vUv ).xyz, 1. );\n}";function s(){r.call(this);this.setShader(n,a)}t.exports=s;s.prototype=Object.create(r.prototype);s.prototype.constructor=s},{"../../Pass":3}],12:[function(e,t,i){"use strict";var r=e("three");var n=e("../../Pass");var a="#define GLSLIFY 1\nvarying vec2 vUv;\n\nvoid main() {\n\n  vUv = uv;\n  gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n}";var s="#define GLSLIFY 1\nuniform sampler2D tInput;\nuniform vec2 center;\nuniform float strength;\nuniform vec2 resolution;\nvarying vec2 vUv;\n\nfloat random(vec3 scale,float seed){return fract(sin(dot(gl_FragCoord.xyz+seed,scale))*43758.5453+seed);}\n\nvoid main(){\n  vec4 color=vec4(0.0);\n  float total=0.0;\n  vec2 toCenter=center-vUv*resolution;\n  float offset=random(vec3(12.9898,78.233,151.7182),0.0);\n  for(float t=0.0;t<=40.0;t++){\n    float percent=(t+offset)/40.0;\n    float weight=4.0*(percent-percent*percent);\n    vec4 sample=texture2D(tInput,vUv+toCenter*percent*strength/resolution);\n    sample.rgb*=sample.a;\n    color+=sample*weight;\n    total+=weight;\n  }\n  gl_FragColor=color/total;\n  gl_FragColor.rgb/=gl_FragColor.a+0.00001;\n}";function o(e){n.call(this);e=e||{};this.setShader(a,s);this.params.center=new r.Vector2(e.centerX||.5,e.centerY||.5);this.params.strength=e.strength||.1}t.exports=o;o.prototype=Object.create(n.prototype);o.prototype.constructor=o;o.prototype.run=function(e){this.shader.uniforms.center.value.set(e.width*this.params.center.x,e.height*this.params.center.y);this.shader.uniforms.strength.value=this.params.strength;e.pass(this.shader)}},{"../../Pass":3,three:32}],13:[function(e,t,i){"use strict";var r=e("three");t.exports=function e(t,i){var n=/uniform\s+(lowp|mediump|highp)?\s*([^\s]+)\s+([^\s]+)\s*;/gi;var a=/uniform\s+([^\s]+)\s+([^\s]+)\s*\[\s*(\w+)\s*\]*\s*;/gi;var s={sampler2D:{type:"t",value:function(){return new r.Texture}},samplerCube:{type:"t",value:function(){}},bool:{type:"b",value:function(){return 0}},int:{type:"i",value:function(){return 0}},float:{type:"f",value:function(){return 0}},vec2:{type:"v2",value:function(){return new r.Vector2}},vec3:{type:"v3",value:function(){return new r.Vector3}},vec4:{type:"v4",value:function(){return new r.Vector4}},bvec2:{type:"v2",value:function(){return new r.Vector2}},bvec3:{type:"v3",value:function(){return new r.Vector3}},bvec4:{type:"v4",value:function(){return new r.Vector4}},ivec2:{type:"v2",value:function(){return new r.Vector2}},ivec3:{type:"v3",value:function(){return new r.Vector3}},ivec4:{type:"v4",value:function(){return new r.Vector4}},mat2:{type:"v2",value:function(){return new r.Matrix2}},mat3:{type:"v3",value:function(){return new r.Matrix3}},mat4:{type:"v4",value:function(){return new r.Matrix4}}};var o={float:{type:"fv",value:function(){return[]}},vec3:{type:"v3v",value:function(){return[]}}};var l;var u={resolution:{type:"v2",value:new r.Vector2(1,1),default:true},time:{type:"f",value:Date.now(),default:true},tInput:{type:"t",value:new r.Texture,default:true}};var h,c,f;while((l=n.exec(i))!==null){if(l.index===n.lastIndex){n.lastIndex++}h=l[2];c=l[3];u[c]={type:s[h].type,value:s[h].value()}}while((l=a.exec(i))!==null){if(l.index===n.lastIndex){n.lastIndex++}h=l[1];c=l[2];f=l[3];u[c]={type:o[h].type,value:o[h].value()}}var d=new r.ShaderMaterial({uniforms:u,vertexShader:t,fragmentShader:i,depthWrite:false,depthTest:false,transparent:true});if(parseInt(r.REVISION)<87){d.shading=r.FlatShading}else{d.flatShading=true}return d}},{three:32}],14:[function(e,t,i){"use strict";var r=e("component-emitter");var n=e("debounce");var a=t.exports;r(a);a.debounceDelay=50;a.onGlobalResize=function(){this.width=window.innerWidth;this.height=window.innerHeight;this.halfWidth=.5*this.width;this.halfHeight=.5*this.height;this.applyResize();if(this.debounceDelay>0){this.debounceResize()}else{this.applyResizeDebounce()}};a.applyResizeDebounce=function(){this.emit("resizeDebounce")};a.applyResize=function(){this.emit("resize")};a.addListener=function(e,t){this.on(t?"resize":"resizeDebounce",e)};a.removeListener=function(e){if(e){this.off("resize",e);this.off("resizeDebounce",e)}};a.debounceResize=n(a.applyResizeDebounce.bind(a),a.debounceDelay);a.onGlobalResize();window.addEventListener("resize",a.onGlobalResize.bind(a))},{"component-emitter":16,debounce:17}],15:[function(e,t,i){t.exports=r;function r(e,t,i){return t<i?e<t?t:e>i?i:e:e<i?i:e>t?t:e}},{}],16:[function(e,t,i){if(typeof t!=="undefined"){t.exports=r}function r(e){if(e)return n(e)}function n(e){for(var t in r.prototype){e[t]=r.prototype[t]}return e}r.prototype.on=r.prototype.addEventListener=function(e,t){this._callbacks=this._callbacks||{};(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t);return this};r.prototype.once=function(e,t){function i(){this.off(e,i);t.apply(this,arguments)}i.fn=t;this.on(e,i);return this};r.prototype.off=r.prototype.removeListener=r.prototype.removeAllListeners=r.prototype.removeEventListener=function(e,t){this._callbacks=this._callbacks||{};if(0==arguments.length){this._callbacks={};return this}var i=this._callbacks["$"+e];if(!i)return this;if(1==arguments.length){delete this._callbacks["$"+e];return this}var r;for(var n=0;n<i.length;n++){r=i[n];if(r===t||r.fn===t){i.splice(n,1);break}}return this};r.prototype.emit=function(e){this._callbacks=this._callbacks||{};var t=[].slice.call(arguments,1),i=this._callbacks["$"+e];if(i){i=i.slice(0);for(var r=0,n=i.length;r<n;++r){i[r].apply(this,t)}}return this};r.prototype.listeners=function(e){this._callbacks=this._callbacks||{};return this._callbacks["$"+e]||[]};r.prototype.hasListeners=function(e){return!!this.listeners(e).length}},{}],17:[function(e,t,i){t.exports=function e(t,i,r){var n,a,s,o,l;if(null==i)i=100;function u(){var e=Date.now()-o;if(e<i&&e>=0){n=setTimeout(u,i-e)}else{n=null;if(!r){l=t.apply(s,a);s=a=null}}}var h=function(){s=this;a=arguments;o=Date.now();var e=r&&!n;if(!n)n=setTimeout(u,i);if(e){l=t.apply(s,a);s=a=null}return l};h.clear=function(){if(n){clearTimeout(n);n=null}};return h}},{}],18:[function(e,t,i){var r=e("indexof");var n=/\s+/;var a=Object.prototype.toString;t.exports=s;t.exports.add=o;t.exports.contains=l;t.exports.has=l;t.exports.toggle=c;t.exports.remove=u;t.exports.removeMatching=h;function s(e){if(e.classList){return e.classList}var t=e.className.replace(/^\s+|\s+$/g,"");var i=t.split(n);if(""===i[0])i.shift();return i}function o(e,t){if(e.classList){e.classList.add(t);return}var i=s(e);var n=r(i,t);if(!~n)i.push(t);e.className=i.join(" ")}function l(e,t){return e.classList?e.classList.contains(t):!!~r(s(e),t)}function u(e,t){if("[object RegExp]"==a.call(t)){return h(e,t)}if(e.classList){e.classList.remove(t);return}var i=s(e);var n=r(i,t);if(~n)i.splice(n,1);e.className=i.join(" ")}function h(e,t,i){var r=Array.prototype.slice.call(s(e));for(var n=0;n<r.length;n++){if(t.test(r[n])){u(e,r[n])}}}function c(e,t){if(e.classList){return e.classList.toggle(t)}if(l(e,t)){u(e,t)}else{o(e,t)}}},{indexof:22}],19:[function(e,t,i){function r(){this._events=this._events||{};this._maxListeners=this._maxListeners||undefined}t.exports=r;r.EventEmitter=r;r.prototype._events=undefined;r.prototype._maxListeners=undefined;r.defaultMaxListeners=10;r.prototype.setMaxListeners=function(e){if(!a(e)||e<0||isNaN(e))throw TypeError("n must be a positive number");this._maxListeners=e;return this};r.prototype.emit=function(e){var t,i,r,a,l,u;if(!this._events)this._events={};if(e==="error"){if(!this._events.error||s(this._events.error)&&!this._events.error.length){t=arguments[1];if(t instanceof Error){throw t}else{var h=new Error('Uncaught, unspecified "error" event. ('+t+")");h.context=t;throw h}}}i=this._events[e];if(o(i))return false;if(n(i)){switch(arguments.length){case 1:i.call(this);break;case 2:i.call(this,arguments[1]);break;case 3:i.call(this,arguments[1],arguments[2]);break;default:a=Array.prototype.slice.call(arguments,1);i.apply(this,a)}}else if(s(i)){a=Array.prototype.slice.call(arguments,1);u=i.slice();r=u.length;for(l=0;l<r;l++)u[l].apply(this,a)}return true};r.prototype.addListener=function(e,t){var i;if(!n(t))throw TypeError("listener must be a function");if(!this._events)this._events={};if(this._events.newListener)this.emit("newListener",e,n(t.listener)?t.listener:t);if(!this._events[e])this._events[e]=t;else if(s(this._events[e]))this._events[e].push(t);else this._events[e]=[this._events[e],t];if(s(this._events[e])&&!this._events[e].warned){if(!o(this._maxListeners)){i=this._maxListeners}else{i=r.defaultMaxListeners}if(i&&i>0&&this._events[e].length>i){this._events[e].warned=true;console.error("(node) warning: possible EventEmitter memory "+"leak detected. %d listeners added. "+"Use emitter.setMaxListeners() to increase limit.",this._events[e].length);if(typeof console.trace==="function"){console.trace()}}}return this};r.prototype.on=r.prototype.addListener;r.prototype.once=function(e,t){if(!n(t))throw TypeError("listener must be a function");var i=false;function r(){this.removeListener(e,r);if(!i){i=true;t.apply(this,arguments)}}r.listener=t;this.on(e,r);return this};r.prototype.removeListener=function(e,t){var i,r,a,o;if(!n(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;i=this._events[e];a=i.length;r=-1;if(i===t||n(i.listener)&&i.listener===t){delete this._events[e];if(this._events.removeListener)this.emit("removeListener",e,t)}else if(s(i)){for(o=a;o-- >0;){if(i[o]===t||i[o].listener&&i[o].listener===t){r=o;break}}if(r<0)return this;if(i.length===1){i.length=0;delete this._events[e]}else{i.splice(r,1)}if(this._events.removeListener)this.emit("removeListener",e,t)}return this};r.prototype.removeAllListeners=function(e){var t,i;if(!this._events)return this;if(!this._events.removeListener){if(arguments.length===0)this._events={};else if(this._events[e])delete this._events[e];return this}if(arguments.length===0){for(t in this._events){if(t==="removeListener")continue;this.removeAllListeners(t)}this.removeAllListeners("removeListener");this._events={};return this}i=this._events[e];if(n(i)){this.removeListener(e,i)}else if(i){while(i.length)this.removeListener(e,i[i.length-1])}delete this._events[e];return this};r.prototype.listeners=function(e){var t;if(!this._events||!this._events[e])t=[];else if(n(this._events[e]))t=[this._events[e]];else t=this._events[e].slice();return t};r.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(n(t))return 1;else if(t)return t.length}return 0};r.listenerCount=function(e,t){return e.listenerCount(t)};function n(e){return typeof e==="function"}function a(e){return typeof e==="number"}function s(e){return typeof e==="object"&&e!==null}function o(e){return e===void 0}},{}],20:[function(e,t,i){(function(e){var i=typeof t!=="undefined"&&t.exports&&typeof e!=="undefined"?e:this||window;(i._gsQueue||(i._gsQueue=[])).push(function(){"use strict";i._gsDefine("TweenMax",["core.Animation","core.SimpleTimeline","TweenLite"],function(e,t,i){var r=function(e){var t=[],i=e.length,r;for(r=0;r!==i;t.push(e[r++]));return t},n=function(e,t,i){var r=e.cycle,n,a;for(n in r){a=r[n];e[n]=typeof a==="function"?a(i,t[i]):a[i%a.length]}delete e.cycle},a=function(e,t,r){i.call(this,e,t,r);this._cycle=0;this._yoyo=this.vars.yoyo===true||!!this.vars.yoyoEase;this._repeat=this.vars.repeat||0;this._repeatDelay=this.vars.repeatDelay||0;if(this._repeat){this._uncache(true)}this.render=a.prototype.render},s=1e-10,o=i._internals,l=o.isSelector,u=o.isArray,h=a.prototype=i.to({},.1,{}),c=[];a.version="1.20.3";h.constructor=a;h.kill()._gc=false;a.killTweensOf=a.killDelayedCallsTo=i.killTweensOf;a.getTweensOf=i.getTweensOf;a.lagSmoothing=i.lagSmoothing;a.ticker=i.ticker
;a.render=i.render;h.invalidate=function(){this._yoyo=this.vars.yoyo===true||!!this.vars.yoyoEase;this._repeat=this.vars.repeat||0;this._repeatDelay=this.vars.repeatDelay||0;this._yoyoEase=null;this._uncache(true);return i.prototype.invalidate.call(this)};h.updateTo=function(e,t){var r=this.ratio,n=this.vars.immediateRender||e.immediateRender,a;if(t&&this._startTime<this._timeline._time){this._startTime=this._timeline._time;this._uncache(false);if(this._gc){this._enabled(true,false)}else{this._timeline.insert(this,this._startTime-this._delay)}}for(a in e){this.vars[a]=e[a]}if(this._initted||n){if(t){this._initted=false;if(n){this.render(0,true,true)}}else{if(this._gc){this._enabled(true,false)}if(this._notifyPluginsOfEnabled&&this._firstPT){i._onPluginEvent("_onDisable",this)}if(this._time/this._duration>.998){var s=this._totalTime;this.render(0,true,false);this._initted=false;this.render(s,true,false)}else{this._initted=false;this._init();if(this._time>0||n){var o=1/(1-r),l=this._firstPT,u;while(l){u=l.s+l.c;l.c*=o;l.s=u-l.c;l=l._next}}}}}return this};h.render=function(e,t,r){if(!this._initted)if(this._duration===0&&this.vars.repeat){this.invalidate()}var n=!this._dirty?this._totalDuration:this.totalDuration(),a=this._time,l=this._totalTime,u=this._cycle,h=this._duration,c=this._rawPrevTime,f,d,p,m,v,g,y,_,b;if(e>=n-1e-7&&e>=0){this._totalTime=n;this._cycle=this._repeat;if(this._yoyo&&(this._cycle&1)!==0){this._time=0;this.ratio=this._ease._calcEnd?this._ease.getRatio(0):0}else{this._time=h;this.ratio=this._ease._calcEnd?this._ease.getRatio(1):1}if(!this._reversed){f=true;d="onComplete";r=r||this._timeline.autoRemoveChildren}if(h===0)if(this._initted||!this.vars.lazy||r){if(this._startTime===this._timeline._duration){e=0}if(c<0||e<=0&&e>=-1e-7||c===s&&this.data!=="isPause")if(c!==e){r=true;if(c>s){d="onReverseComplete"}}this._rawPrevTime=_=!t||e||c===e?e:s}}else if(e<1e-7){this._totalTime=this._time=this._cycle=0;this.ratio=this._ease._calcEnd?this._ease.getRatio(0):0;if(l!==0||h===0&&c>0){d="onReverseComplete";f=this._reversed}if(e<0){this._active=false;if(h===0)if(this._initted||!this.vars.lazy||r){if(c>=0){r=true}this._rawPrevTime=_=!t||e||c===e?e:s}}if(!this._initted){r=true}}else{this._totalTime=this._time=e;if(this._repeat!==0){m=h+this._repeatDelay;this._cycle=this._totalTime/m>>0;if(this._cycle!==0)if(this._cycle===this._totalTime/m&&l<=e){this._cycle--}this._time=this._totalTime-this._cycle*m;if(this._yoyo)if((this._cycle&1)!==0){this._time=h-this._time;b=this._yoyoEase||this.vars.yoyoEase;if(b){if(!this._yoyoEase){if(b===true&&!this._initted){b=this.vars.ease;this._yoyoEase=b=!b?i.defaultEase:b instanceof Ease?b:typeof b==="function"?new Ease(b,this.vars.easeParams):Ease.map[b]||i.defaultEase}else{this._yoyoEase=b=b===true?this._ease:b instanceof Ease?b:Ease.map[b]}}this.ratio=b?1-b.getRatio((h-this._time)/h):0}}if(this._time>h){this._time=h}else if(this._time<0){this._time=0}}if(this._easeType&&!b){v=this._time/h;g=this._easeType;y=this._easePower;if(g===1||g===3&&v>=.5){v=1-v}if(g===3){v*=2}if(y===1){v*=v}else if(y===2){v*=v*v}else if(y===3){v*=v*v*v}else if(y===4){v*=v*v*v*v}if(g===1){this.ratio=1-v}else if(g===2){this.ratio=v}else if(this._time/h<.5){this.ratio=v/2}else{this.ratio=1-v/2}}else if(!b){this.ratio=this._ease.getRatio(this._time/h)}}if(a===this._time&&!r&&u===this._cycle){if(l!==this._totalTime)if(this._onUpdate)if(!t){this._callback("onUpdate")}return}else if(!this._initted){this._init();if(!this._initted||this._gc){return}else if(!r&&this._firstPT&&(this.vars.lazy!==false&&this._duration||this.vars.lazy&&!this._duration)){this._time=a;this._totalTime=l;this._rawPrevTime=c;this._cycle=u;o.lazyTweens.push(this);this._lazy=[e,t];return}if(this._time&&!f&&!b){this.ratio=this._ease.getRatio(this._time/h)}else if(f&&this._ease._calcEnd&&!b){this.ratio=this._ease.getRatio(this._time===0?0:1)}}if(this._lazy!==false){this._lazy=false}if(!this._active)if(!this._paused&&this._time!==a&&e>=0){this._active=true}if(l===0){if(this._initted===2&&e>0){this._init()}if(this._startAt){if(e>=0){this._startAt.render(e,true,r)}else if(!d){d="_dummyGS"}}if(this.vars.onStart)if(this._totalTime!==0||h===0)if(!t){this._callback("onStart")}}p=this._firstPT;while(p){if(p.f){p.t[p.p](p.c*this.ratio+p.s)}else{p.t[p.p]=p.c*this.ratio+p.s}p=p._next}if(this._onUpdate){if(e<0)if(this._startAt&&this._startTime){this._startAt.render(e,true,r)}if(!t)if(this._totalTime!==l||d){this._callback("onUpdate")}}if(this._cycle!==u)if(!t)if(!this._gc)if(this.vars.onRepeat){this._callback("onRepeat")}if(d)if(!this._gc||r){if(e<0&&this._startAt&&!this._onUpdate&&this._startTime){this._startAt.render(e,true,r)}if(f){if(this._timeline.autoRemoveChildren){this._enabled(false,false)}this._active=false}if(!t&&this.vars[d]){this._callback(d)}if(h===0&&this._rawPrevTime===s&&_!==s){this._rawPrevTime=0}}};a.to=function(e,t,i){return new a(e,t,i)};a.from=function(e,t,i){i.runBackwards=true;i.immediateRender=i.immediateRender!=false;return new a(e,t,i)};a.fromTo=function(e,t,i,r){r.startAt=i;r.immediateRender=r.immediateRender!=false&&i.immediateRender!=false;return new a(e,t,r)};a.staggerTo=a.allTo=function(e,t,s,o,h,f,d){o=o||0;var p=0,m=[],v=function(){if(s.onComplete){s.onComplete.apply(s.onCompleteScope||this,arguments)}h.apply(d||s.callbackScope||this,f||c)},g=s.cycle,y=s.startAt&&s.startAt.cycle,_,b,x,w;if(!u(e)){if(typeof e==="string"){e=i.selector(e)||e}if(l(e)){e=r(e)}}e=e||[];if(o<0){e=r(e);e.reverse();o*=-1}_=e.length-1;for(x=0;x<=_;x++){b={};for(w in s){b[w]=s[w]}if(g){n(b,e,x);if(b.duration!=null){t=b.duration;delete b.duration}}if(y){y=b.startAt={};for(w in s.startAt){y[w]=s.startAt[w]}n(b.startAt,e,x)}b.delay=p+(b.delay||0);if(x===_&&h){b.onComplete=v}m[x]=new a(e[x],t,b);p+=o}return m};a.staggerFrom=a.allFrom=function(e,t,i,r,n,s,o){i.runBackwards=true;i.immediateRender=i.immediateRender!=false;return a.staggerTo(e,t,i,r,n,s,o)};a.staggerFromTo=a.allFromTo=function(e,t,i,r,n,s,o,l){r.startAt=i;r.immediateRender=r.immediateRender!=false&&i.immediateRender!=false;return a.staggerTo(e,t,r,n,s,o,l)};a.delayedCall=function(e,t,i,r,n){return new a(t,0,{delay:e,onComplete:t,onCompleteParams:i,callbackScope:r,onReverseComplete:t,onReverseCompleteParams:i,immediateRender:false,useFrames:n,overwrite:0})};a.set=function(e,t){return new a(e,0,t)};a.isTweening=function(e){return i.getTweensOf(e,true).length>0};var f=function(e,t){var r=[],n=0,a=e._first;while(a){if(a instanceof i){r[n++]=a}else{if(t){r[n++]=a}r=r.concat(f(a,t));n=r.length}a=a._next}return r},d=a.getAllTweens=function(t){return f(e._rootTimeline,t).concat(f(e._rootFramesTimeline,t))};a.killAll=function(e,i,r,n){if(i==null){i=true}if(r==null){r=true}var a=d(n!=false),s=a.length,o=i&&r&&n,l,u,h;for(h=0;h<s;h++){u=a[h];if(o||u instanceof t||(l=u.target===u.vars.onComplete)&&r||i&&!l){if(e){u.totalTime(u._reversed?0:u.totalDuration())}else{u._enabled(false,false)}}}};a.killChildTweensOf=function(e,t){if(e==null){return}var n=o.tweenLookup,s,h,c,f,d;if(typeof e==="string"){e=i.selector(e)||e}if(l(e)){e=r(e)}if(u(e)){f=e.length;while(--f>-1){a.killChildTweensOf(e[f],t)}return}s=[];for(c in n){h=n[c].target.parentNode;while(h){if(h===e){s=s.concat(n[c].tweens)}h=h.parentNode}}d=s.length;for(f=0;f<d;f++){if(t){s[f].totalTime(s[f].totalDuration())}s[f]._enabled(false,false)}};var p=function(e,i,r,n){i=i!==false;r=r!==false;n=n!==false;var a=d(n),s=i&&r&&n,o=a.length,l,u;while(--o>-1){u=a[o];if(s||u instanceof t||(l=u.target===u.vars.onComplete)&&r||i&&!l){u.paused(e)}}};a.pauseAll=function(e,t,i){p(true,e,t,i)};a.resumeAll=function(e,t,i){p(false,e,t,i)};a.globalTimeScale=function(t){var r=e._rootTimeline,n=i.ticker.time;if(!arguments.length){return r._timeScale}t=t||s;r._startTime=n-(n-r._startTime)*r._timeScale/t;r=e._rootFramesTimeline;n=i.ticker.frame;r._startTime=n-(n-r._startTime)*r._timeScale/t;r._timeScale=e._rootTimeline._timeScale=t;return t};h.progress=function(e,t){return!arguments.length?this._time/this.duration():this.totalTime(this.duration()*(this._yoyo&&(this._cycle&1)!==0?1-e:e)+this._cycle*(this._duration+this._repeatDelay),t)};h.totalProgress=function(e,t){return!arguments.length?this._totalTime/this.totalDuration():this.totalTime(this.totalDuration()*e,t)};h.time=function(e,t){if(!arguments.length){return this._time}if(this._dirty){this.totalDuration()}if(e>this._duration){e=this._duration}if(this._yoyo&&(this._cycle&1)!==0){e=this._duration-e+this._cycle*(this._duration+this._repeatDelay)}else if(this._repeat!==0){e+=this._cycle*(this._duration+this._repeatDelay)}return this.totalTime(e,t)};h.duration=function(t){if(!arguments.length){return this._duration}return e.prototype.duration.call(this,t)};h.totalDuration=function(e){if(!arguments.length){if(this._dirty){this._totalDuration=this._repeat===-1?999999999999:this._duration*(this._repeat+1)+this._repeatDelay*this._repeat;this._dirty=false}return this._totalDuration}return this._repeat===-1?this:this.duration((e-this._repeat*this._repeatDelay)/(this._repeat+1))};h.repeat=function(e){if(!arguments.length){return this._repeat}this._repeat=e;return this._uncache(true)};h.repeatDelay=function(e){if(!arguments.length){return this._repeatDelay}this._repeatDelay=e;return this._uncache(true)};h.yoyo=function(e){if(!arguments.length){return this._yoyo}this._yoyo=e;return this};return a},true);i._gsDefine("TimelineLite",["core.Animation","core.SimpleTimeline","TweenLite"],function(e,t,r){var n=function(e){t.call(this,e);this._labels={};this.autoRemoveChildren=this.vars.autoRemoveChildren===true;this.smoothChildTiming=this.vars.smoothChildTiming===true;this._sortChildren=true;this._onUpdate=this.vars.onUpdate;var i=this.vars,r,n;for(n in i){r=i[n];if(u(r))if(r.join("").indexOf("{self}")!==-1){i[n]=this._swapSelfInParams(r)}}if(u(i.tweens)){this.add(i.tweens,0,i.align,i.stagger)}},a=1e-10,s=r._internals,o=n._internals={},l=s.isSelector,u=s.isArray,h=s.lazyTweens,c=s.lazyRender,f=i._gsDefine.globals,d=function(e){var t={},i;for(i in e){t[i]=e[i]}return t},p=function(e,t,i){var r=e.cycle,n,a;for(n in r){a=r[n];e[n]=typeof a==="function"?a(i,t[i]):a[i%a.length]}delete e.cycle},m=o.pauseCallback=function(){},v=function(e){var t=[],i=e.length,r;for(r=0;r!==i;t.push(e[r++]));return t},g=n.prototype=new t;n.version="1.20.3";g.constructor=n;g.kill()._gc=g._forcingPlayhead=g._hasPause=false;g.to=function(e,t,i,n){var a=i.repeat&&f.TweenMax||r;return t?this.add(new a(e,t,i),n):this.set(e,i,n)};g.from=function(e,t,i,n){return this.add((i.repeat&&f.TweenMax||r).from(e,t,i),n)};g.fromTo=function(e,t,i,n,a){var s=n.repeat&&f.TweenMax||r;return t?this.add(s.fromTo(e,t,i,n),a):this.set(e,n,a)};g.staggerTo=function(e,t,i,a,s,o,u,h){var c=new n({onComplete:o,onCompleteParams:u,callbackScope:h,smoothChildTiming:this.smoothChildTiming}),f=i.cycle,m,g;if(typeof e==="string"){e=r.selector(e)||e}e=e||[];if(l(e)){e=v(e)}a=a||0;if(a<0){e=v(e);e.reverse();a*=-1}for(g=0;g<e.length;g++){m=d(i);if(m.startAt){m.startAt=d(m.startAt);if(m.startAt.cycle){p(m.startAt,e,g)}}if(f){p(m,e,g);if(m.duration!=null){t=m.duration;delete m.duration}}c.to(e[g],t,m,g*a)}return this.add(c,s)};g.staggerFrom=function(e,t,i,r,n,a,s,o){i.immediateRender=i.immediateRender!=false;i.runBackwards=true;return this.staggerTo(e,t,i,r,n,a,s,o)};g.staggerFromTo=function(e,t,i,r,n,a,s,o,l){r.startAt=i;r.immediateRender=r.immediateRender!=false&&i.immediateRender!=false;return this.staggerTo(e,t,r,n,a,s,o,l)};g.call=function(e,t,i,n){return this.add(r.delayedCall(0,e,t,i),n)};g.set=function(e,t,i){i=this._parseTimeOrLabel(i,0,true);if(t.immediateRender==null){t.immediateRender=i===this._time&&!this._paused}return this.add(new r(e,0,t),i)};n.exportRoot=function(e,t){e=e||{};if(e.smoothChildTiming==null){e.smoothChildTiming=true}var i=new n(e),a=i._timeline,s,o,l,u;if(t==null){t=true}a._remove(i,true);i._startTime=0;i._rawPrevTime=i._time=i._totalTime=a._time;l=a._first;while(l){u=l._next;if(!t||!(l instanceof r&&l.target===l.vars.onComplete)){o=l._startTime-l._delay;if(o<0){s=1}i.add(l,o)}l=u}a.add(i,0);if(s){i.totalDuration()}return i};g.add=function(i,a,s,o){var l,h,c,f,d,p;if(typeof a!=="number"){a=this._parseTimeOrLabel(a,0,true,i)}if(!(i instanceof e)){if(i instanceof Array||i&&i.push&&u(i)){s=s||"normal";o=o||0;l=a;h=i.length;for(c=0;c<h;c++){if(u(f=i[c])){f=new n({tweens:f})}this.add(f,l);if(typeof f!=="string"&&typeof f!=="function"){if(s==="sequence"){l=f._startTime+f.totalDuration()/f._timeScale}else if(s==="start"){f._startTime-=f.delay()}}l+=o}return this._uncache(true)}else if(typeof i==="string"){return this.addLabel(i,a)}else if(typeof i==="function"){i=r.delayedCall(0,i)}else{throw"Cannot add "+i+" into the timeline; it is not a tween, timeline, function, or string."}}t.prototype.add.call(this,i,a);if(i._time){i.render((this.rawTime()-i._startTime)*i._timeScale,false,false)}if(this._gc||this._time===this._duration)if(!this._paused)if(this._duration<this.duration()){d=this;p=d.rawTime()>i._startTime;while(d._timeline){if(p&&d._timeline.smoothChildTiming){d.totalTime(d._totalTime,true)}else if(d._gc){d._enabled(true,false)}d=d._timeline}}return this};g.remove=function(t){if(t instanceof e){this._remove(t,false);var i=t._timeline=t.vars.useFrames?e._rootFramesTimeline:e._rootTimeline;t._startTime=(t._paused?t._pauseTime:i._time)-(!t._reversed?t._totalTime:t.totalDuration()-t._totalTime)/t._timeScale;return this}else if(t instanceof Array||t&&t.push&&u(t)){var r=t.length;while(--r>-1){this.remove(t[r])}return this}else if(typeof t==="string"){return this.removeLabel(t)}return this.kill(null,t)};g._remove=function(e,i){t.prototype._remove.call(this,e,i);var r=this._last;if(!r){this._time=this._totalTime=this._duration=this._totalDuration=0}else if(this._time>this.duration()){this._time=this._duration;this._totalTime=this._totalDuration}return this};g.append=function(e,t){return this.add(e,this._parseTimeOrLabel(null,t,true,e))};g.insert=g.insertMultiple=function(e,t,i,r){return this.add(e,t||0,i,r)};g.appendMultiple=function(e,t,i,r){return this.add(e,this._parseTimeOrLabel(null,t,true,e),i,r)};g.addLabel=function(e,t){this._labels[e]=this._parseTimeOrLabel(t);return this};g.addPause=function(e,t,i,n){var a=r.delayedCall(0,m,i,n||this);a.vars.onComplete=a.vars.onReverseComplete=t;a.data="isPause";this._hasPause=true;return this.add(a,e)};g.removeLabel=function(e){delete this._labels[e];return this};g.getLabelTime=function(e){return this._labels[e]!=null?this._labels[e]:-1};g._parseTimeOrLabel=function(t,i,r,n){var a,s;if(n instanceof e&&n.timeline===this){this.remove(n)}else if(n&&(n instanceof Array||n.push&&u(n))){s=n.length;while(--s>-1){if(n[s]instanceof e&&n[s].timeline===this){this.remove(n[s])}}}a=typeof t==="number"&&!i?0:this.duration()>99999999999?this.recent().endTime(false):this._duration;if(typeof i==="string"){return this._parseTimeOrLabel(i,r&&typeof t==="number"&&this._labels[i]==null?t-a:0,r)}i=i||0;if(typeof t==="string"&&(isNaN(t)||this._labels[t]!=null)){s=t.indexOf("=");if(s===-1){if(this._labels[t]==null){return r?this._labels[t]=a+i:i}return this._labels[t]+i}i=parseInt(t.charAt(s-1)+"1",10)*Number(t.substr(s+1));t=s>1?this._parseTimeOrLabel(t.substr(0,s-1),0,r):a}else if(t==null){t=a}return Number(t)+i};g.seek=function(e,t){return this.totalTime(typeof e==="number"?e:this._parseTimeOrLabel(e),t!==false)};g.stop=function(){return this.paused(true)};g.gotoAndPlay=function(e,t){return this.play(e,t)};g.gotoAndStop=function(e,t){return this.pause(e,t)};g.render=function(e,t,i){if(this._gc){this._enabled(true,false)}var r=this._time,n=!this._dirty?this._totalDuration:this.totalDuration(),s=this._startTime,o=this._timeScale,l=this._paused,u,f,d,p,m,v,g;if(r!==this._time){e+=this._time-r}if(e>=n-1e-7&&e>=0){this._totalTime=this._time=n;if(!this._reversed)if(!this._hasPausedChild()){f=true;p="onComplete";m=!!this._timeline.autoRemoveChildren;if(this._duration===0)if(e<=0&&e>=-1e-7||this._rawPrevTime<0||this._rawPrevTime===a)if(this._rawPrevTime!==e&&this._first){m=true;if(this._rawPrevTime>a){p="onReverseComplete"}}}this._rawPrevTime=this._duration||!t||e||this._rawPrevTime===e?e:a;e=n+1e-4}else if(e<1e-7){this._totalTime=this._time=0;if(r!==0||this._duration===0&&this._rawPrevTime!==a&&(this._rawPrevTime>0||e<0&&this._rawPrevTime>=0)){p="onReverseComplete";f=this._reversed}if(e<0){this._active=false;if(this._timeline.autoRemoveChildren&&this._reversed){m=f=true;p="onReverseComplete"}else if(this._rawPrevTime>=0&&this._first){m=true}this._rawPrevTime=e}else{this._rawPrevTime=this._duration||!t||e||this._rawPrevTime===e?e:a;if(e===0&&f){u=this._first;while(u&&u._startTime===0){if(!u._duration){f=false}u=u._next}}e=0;if(!this._initted){m=true}}}else{if(this._hasPause&&!this._forcingPlayhead&&!t){if(e>=r){u=this._first;while(u&&u._startTime<=e&&!v){if(!u._duration)if(u.data==="isPause"&&!u.ratio&&!(u._startTime===0&&this._rawPrevTime===0)){v=u}u=u._next}}else{u=this._last;while(u&&u._startTime>=e&&!v){if(!u._duration)if(u.data==="isPause"&&u._rawPrevTime>0){v=u}u=u._prev}}if(v){this._time=e=v._startTime;this._totalTime=e+this._cycle*(this._totalDuration+this._repeatDelay)}}this._totalTime=this._time=this._rawPrevTime=e}if((this._time===r||!this._first)&&!i&&!m&&!v){return}else if(!this._initted){this._initted=true}if(!this._active)if(!this._paused&&this._time!==r&&e>0){this._active=true}if(r===0)if(this.vars.onStart)if(this._time!==0||!this._duration)if(!t){this._callback("onStart")}g=this._time;if(g>=r){u=this._first;while(u){d=u._next;if(g!==this._time||this._paused&&!l){break}else if(u._active||u._startTime<=g&&!u._paused&&!u._gc){if(v===u){this.pause()}if(!u._reversed){u.render((e-u._startTime)*u._timeScale,t,i)}else{u.render((!u._dirty?u._totalDuration:u.totalDuration())-(e-u._startTime)*u._timeScale,t,i)}}u=d}}else{u=this._last;while(u){d=u._prev;if(g!==this._time||this._paused&&!l){break}else if(u._active||u._startTime<=r&&!u._paused&&!u._gc){if(v===u){v=u._prev;while(v&&v.endTime()>this._time){v.render(v._reversed?v.totalDuration()-(e-v._startTime)*v._timeScale:(e-v._startTime)*v._timeScale,t,i);v=v._prev}v=null;this.pause()}if(!u._reversed){u.render((e-u._startTime)*u._timeScale,t,i)}else{u.render((!u._dirty?u._totalDuration:u.totalDuration())-(e-u._startTime)*u._timeScale,t,i)}}u=d}}if(this._onUpdate)if(!t){if(h.length){c()}this._callback("onUpdate")}if(p)if(!this._gc)if(s===this._startTime||o!==this._timeScale)if(this._time===0||n>=this.totalDuration()){if(f){if(h.length){c()}if(this._timeline.autoRemoveChildren){this._enabled(false,false)}this._active=false}if(!t&&this.vars[p]){this._callback(p)}}};g._hasPausedChild=function(){var e=this._first;while(e){if(e._paused||e instanceof n&&e._hasPausedChild()){return true}e=e._next}return false};g.getChildren=function(e,t,i,n){n=n||-9999999999;var a=[],s=this._first,o=0;while(s){if(s._startTime<n){}else if(s instanceof r){if(t!==false){a[o++]=s}}else{if(i!==false){a[o++]=s}if(e!==false){a=a.concat(s.getChildren(true,t,i));o=a.length}}s=s._next}return a};g.getTweensOf=function(e,t){var i=this._gc,n=[],a=0,s,o;if(i){this._enabled(true,true)}s=r.getTweensOf(e);o=s.length;while(--o>-1){if(s[o].timeline===this||t&&this._contains(s[o])){n[a++]=s[o]}}if(i){this._enabled(false,true)}return n};g.recent=function(){return this._recent};g._contains=function(e){var t=e.timeline;while(t){if(t===this){return true}t=t.timeline}return false};g.shiftChildren=function(e,t,i){i=i||0;var r=this._first,n=this._labels,a;while(r){if(r._startTime>=i){r._startTime+=e}r=r._next}if(t){for(a in n){if(n[a]>=i){n[a]+=e}}}return this._uncache(true)};g._kill=function(e,t){if(!e&&!t){return this._enabled(false,false)}var i=!t?this.getChildren(true,true,false):this.getTweensOf(t),r=i.length,n=false;while(--r>-1){if(i[r]._kill(e,t)){n=true}}return n};g.clear=function(e){var t=this.getChildren(false,true,true),i=t.length;this._time=this._totalTime=0;while(--i>-1){t[i]._enabled(false,false)}if(e!==false){this._labels={}}return this._uncache(true)};g.invalidate=function(){var t=this._first;while(t){t.invalidate();t=t._next}return e.prototype.invalidate.call(this)};g._enabled=function(e,i){if(e===this._gc){var r=this._first;while(r){r._enabled(e,true);r=r._next}}return t.prototype._enabled.call(this,e,i)};g.totalTime=function(t,i,r){this._forcingPlayhead=true;var n=e.prototype.totalTime.apply(this,arguments);this._forcingPlayhead=false;return n};g.duration=function(e){if(!arguments.length){if(this._dirty){this.totalDuration()}return this._duration}if(this.duration()!==0&&e!==0){this.timeScale(this._duration/e)}return this};g.totalDuration=function(e){if(!arguments.length){if(this._dirty){var t=0,i=this._last,r=999999999999,n,a;while(i){n=i._prev;if(i._dirty){i.totalDuration()}if(i._startTime>r&&this._sortChildren&&!i._paused&&!this._calculatingDuration){this._calculatingDuration=1;this.add(i,i._startTime-i._delay);this._calculatingDuration=0}else{r=i._startTime}if(i._startTime<0&&!i._paused){t-=i._startTime;if(this._timeline.smoothChildTiming){this._startTime+=i._startTime/this._timeScale;this._time-=i._startTime;this._totalTime-=i._startTime;this._rawPrevTime-=i._startTime}this.shiftChildren(-i._startTime,false,-9999999999);r=0}a=i._startTime+i._totalDuration/i._timeScale;if(a>t){t=a}i=n}this._duration=this._totalDuration=t;this._dirty=false}return this._totalDuration}return e&&this.totalDuration()?this.timeScale(this._totalDuration/e):this};g.paused=function(t){if(!t){var i=this._first,r=this._time;while(i){if(i._startTime===r&&i.data==="isPause"){i._rawPrevTime=0}i=i._next}}return e.prototype.paused.apply(this,arguments)};g.usesFrames=function(){var t=this._timeline;while(t._timeline){t=t._timeline}return t===e._rootFramesTimeline};g.rawTime=function(e){return e&&(this._paused||this._repeat&&this.time()>0&&this.totalProgress()<1)?this._totalTime%(this._duration+this._repeatDelay):this._paused?this._totalTime:(this._timeline.rawTime(e)-this._startTime)*this._timeScale};return n},true);i._gsDefine("TimelineMax",["TimelineLite","TweenLite","easing.Ease"],function(e,t,r){var n=function(t){e.call(this,t);this._repeat=this.vars.repeat||0;this._repeatDelay=this.vars.repeatDelay||0;this._cycle=0;this._yoyo=this.vars.yoyo===true;this._dirty=true},a=1e-10,s=t._internals,o=s.lazyTweens,l=s.lazyRender,u=i._gsDefine.globals,h=new r(null,null,1,0),c=n.prototype=new e;c.constructor=n;c.kill()._gc=false;n.version="1.20.3";c.invalidate=function(){this._yoyo=this.vars.yoyo===true;this._repeat=this.vars.repeat||0;this._repeatDelay=this.vars.repeatDelay||0;this._uncache(true);return e.prototype.invalidate.call(this)};c.addCallback=function(e,i,r,n){return this.add(t.delayedCall(0,e,r,n),i)};c.removeCallback=function(e,t){if(e){if(t==null){this._kill(null,e)}else{var i=this.getTweensOf(e,false),r=i.length,n=this._parseTimeOrLabel(t);while(--r>-1){if(i[r]._startTime===n){i[r]._enabled(false,false)}}}}return this};c.removePause=function(t){return this.removeCallback(e._internals.pauseCallback,t)};c.tweenTo=function(e,i){i=i||{};var r={ease:h,useFrames:this.usesFrames(),immediateRender:false},n=i.repeat&&u.TweenMax||t,a,s,o;for(s in i){r[s]=i[s]}r.time=this._parseTimeOrLabel(e);a=Math.abs(Number(r.time)-this._time)/this._timeScale||.001;o=new n(this,a,r);r.onStart=function(){o.target.paused(true);if(o.vars.time!==o.target.time()&&a===o.duration()){o.duration(Math.abs(o.vars.time-o.target.time())/o.target._timeScale)}if(i.onStart){i.onStart.apply(i.onStartScope||i.callbackScope||o,i.onStartParams||[])}};return o};c.tweenFromTo=function(e,t,i){i=i||{};e=this._parseTimeOrLabel(e);i.startAt={onComplete:this.seek,onCompleteParams:[e],callbackScope:this};i.immediateRender=i.immediateRender!==false;var r=this.tweenTo(t,i);return r.duration(Math.abs(r.vars.time-e)/this._timeScale||.001)};c.render=function(e,t,i){if(this._gc){this._enabled(true,false)}var r=this._time,n=!this._dirty?this._totalDuration:this.totalDuration(),s=this._duration,u=this._totalTime,h=this._startTime,c=this._timeScale,f=this._rawPrevTime,d=this._paused,p=this._cycle,m,v,g,y,_,b,x,w;if(r!==this._time){e+=this._time-r}if(e>=n-1e-7&&e>=0){if(!this._locked){this._totalTime=n;this._cycle=this._repeat}if(!this._reversed)if(!this._hasPausedChild()){v=true;y="onComplete";_=!!this._timeline.autoRemoveChildren;if(this._duration===0)if(e<=0&&e>=-1e-7||f<0||f===a)if(f!==e&&this._first){_=true;if(f>a){y="onReverseComplete"}}}this._rawPrevTime=this._duration||!t||e||this._rawPrevTime===e?e:a;if(this._yoyo&&(this._cycle&1)!==0){this._time=e=0}else{this._time=s;e=s+1e-4}}else if(e<1e-7){if(!this._locked){this._totalTime=this._cycle=0}this._time=0;if(r!==0||s===0&&f!==a&&(f>0||e<0&&f>=0)&&!this._locked){y="onReverseComplete";v=this._reversed}if(e<0){this._active=false;if(this._timeline.autoRemoveChildren&&this._reversed){_=v=true;y="onReverseComplete"}else if(f>=0&&this._first){_=true}this._rawPrevTime=e}else{this._rawPrevTime=s||!t||e||this._rawPrevTime===e?e:a;if(e===0&&v){m=this._first;while(m&&m._startTime===0){if(!m._duration){v=false}m=m._next}}e=0;if(!this._initted){_=true}}}else{if(s===0&&f<0){_=true}this._time=this._rawPrevTime=e;if(!this._locked){this._totalTime=e;if(this._repeat!==0){b=s+this._repeatDelay;this._cycle=this._totalTime/b>>0;if(this._cycle!==0)if(this._cycle===this._totalTime/b&&u<=e){this._cycle--}this._time=this._totalTime-this._cycle*b;if(this._yoyo)if((this._cycle&1)!==0){this._time=s-this._time}if(this._time>s){this._time=s;e=s+1e-4}else if(this._time<0){this._time=e=0}else{e=this._time}}}if(this._hasPause&&!this._forcingPlayhead&&!t){e=this._time;if(e>=r||this._repeat&&p!==this._cycle){m=this._first;while(m&&m._startTime<=e&&!x){if(!m._duration)if(m.data==="isPause"&&!m.ratio&&!(m._startTime===0&&this._rawPrevTime===0)){x=m}m=m._next}}else{m=this._last;while(m&&m._startTime>=e&&!x){if(!m._duration)if(m.data==="isPause"&&m._rawPrevTime>0){x=m}m=m._prev}}if(x&&x._startTime<s){this._time=e=x._startTime;this._totalTime=e+this._cycle*(this._totalDuration+this._repeatDelay)}}}if(this._cycle!==p)if(!this._locked){var T=this._yoyo&&(p&1)!==0,M=T===(this._yoyo&&(this._cycle&1)!==0),E=this._totalTime,S=this._cycle,A=this._rawPrevTime,P=this._time;this._totalTime=p*s;if(this._cycle<p){T=!T}else{this._totalTime+=s}this._time=r;this._rawPrevTime=s===0?f-1e-4:f;this._cycle=p;this._locked=true;r=T?0:s;this.render(r,t,s===0);if(!t)if(!this._gc){if(this.vars.onRepeat){this._cycle=S;this._locked=false;this._callback("onRepeat")}}if(r!==this._time){return}if(M){this._cycle=p;this._locked=true;r=T?s+1e-4:-1e-4;this.render(r,true,false)}this._locked=false;if(this._paused&&!d){return}this._time=P;this._totalTime=E;this._cycle=S;this._rawPrevTime=A}if((this._time===r||!this._first)&&!i&&!_&&!x){if(u!==this._totalTime)if(this._onUpdate)if(!t){this._callback("onUpdate")}return}else if(!this._initted){this._initted=true}if(!this._active)if(!this._paused&&this._totalTime!==u&&e>0){this._active=true}if(u===0)if(this.vars.onStart)if(this._totalTime!==0||!this._totalDuration)if(!t){this._callback("onStart")}w=this._time;if(w>=r){m=this._first;while(m){g=m._next;if(w!==this._time||this._paused&&!d){break}else if(m._active||m._startTime<=this._time&&!m._paused&&!m._gc){if(x===m){this.pause()}if(!m._reversed){m.render((e-m._startTime)*m._timeScale,t,i)}else{m.render((!m._dirty?m._totalDuration:m.totalDuration())-(e-m._startTime)*m._timeScale,t,i)}}m=g}}else{m=this._last;while(m){g=m._prev;if(w!==this._time||this._paused&&!d){break}else if(m._active||m._startTime<=r&&!m._paused&&!m._gc){if(x===m){x=m._prev;while(x&&x.endTime()>this._time){x.render(x._reversed?x.totalDuration()-(e-x._startTime)*x._timeScale:(e-x._startTime)*x._timeScale,t,i);x=x._prev}x=null;this.pause()}if(!m._reversed){m.render((e-m._startTime)*m._timeScale,t,i)}else{m.render((!m._dirty?m._totalDuration:m.totalDuration())-(e-m._startTime)*m._timeScale,t,i)}}m=g}}if(this._onUpdate)if(!t){if(o.length){l()}this._callback("onUpdate")}if(y)if(!this._locked)if(!this._gc)if(h===this._startTime||c!==this._timeScale)if(this._time===0||n>=this.totalDuration()){if(v){if(o.length){l()}if(this._timeline.autoRemoveChildren){this._enabled(false,false)}this._active=false}if(!t&&this.vars[y]){this._callback(y)}}};c.getActive=function(e,t,i){if(e==null){e=true}if(t==null){t=true}if(i==null){i=false}var r=[],n=this.getChildren(e,t,i),a=0,s=n.length,o,l;for(o=0;o<s;o++){l=n[o];if(l.isActive()){r[a++]=l}}return r};c.getLabelAfter=function(e){if(!e)if(e!==0){e=this._time}var t=this.getLabelsArray(),i=t.length,r;for(r=0;r<i;r++){if(t[r].time>e){return t[r].name}}return null};c.getLabelBefore=function(e){if(e==null){e=this._time}var t=this.getLabelsArray(),i=t.length;while(--i>-1){if(t[i].time<e){return t[i].name}}return null};c.getLabelsArray=function(){var e=[],t=0,i;for(i in this._labels){e[t++]={time:this._labels[i],name:i}}e.sort(function(e,t){return e.time-t.time});return e};c.invalidate=function(){this._locked=false;return e.prototype.invalidate.call(this)};c.progress=function(e,t){return!arguments.length?this._time/this.duration()||0:this.totalTime(this.duration()*(this._yoyo&&(this._cycle&1)!==0?1-e:e)+this._cycle*(this._duration+this._repeatDelay),t)};c.totalProgress=function(e,t){return!arguments.length?this._totalTime/this.totalDuration()||0:this.totalTime(this.totalDuration()*e,t)};c.totalDuration=function(t){if(!arguments.length){if(this._dirty){e.prototype.totalDuration.call(this);this._totalDuration=this._repeat===-1?999999999999:this._duration*(this._repeat+1)+this._repeatDelay*this._repeat}return this._totalDuration}return this._repeat===-1||!t?this:this.timeScale(this.totalDuration()/t)};c.time=function(e,t){if(!arguments.length){return this._time}if(this._dirty){this.totalDuration()}if(e>this._duration){e=this._duration}if(this._yoyo&&(this._cycle&1)!==0){e=this._duration-e+this._cycle*(this._duration+this._repeatDelay)}else if(this._repeat!==0){e+=this._cycle*(this._duration+this._repeatDelay)}return this.totalTime(e,t)};c.repeat=function(e){if(!arguments.length){return this._repeat}this._repeat=e;return this._uncache(true)};c.repeatDelay=function(e){if(!arguments.length){return this._repeatDelay}this._repeatDelay=e;return this._uncache(true)};c.yoyo=function(e){if(!arguments.length){return this._yoyo}this._yoyo=e;return this};c.currentLabel=function(e){if(!arguments.length){return this.getLabelBefore(this._time+1e-8)}return this.seek(e,true)};return n},true);(function(){var e=180/Math.PI,t=[],r=[],n=[],a={},s=i._gsDefine.globals,o=function(e,t,i,r){if(i===r){i=r-(r-t)/1e6}if(e===t){t=e+(i-e)/1e6}this.a=e;this.b=t;this.c=i;this.d=r;this.da=r-e;this.ca=i-e;this.ba=t-e},l=",x,y,z,left,top,right,bottom,marginTop,marginLeft,marginRight,marginBottom,paddingLeft,paddingTop,paddingRight,paddingBottom,backgroundPosition,backgroundPosition_y,",u=function(e,t,i,r){var n={a:e},a={},s={},o={c:r},l=(e+t)/2,u=(t+i)/2,h=(i+r)/2,c=(l+u)/2,f=(u+h)/2,d=(f-c)/8;n.b=l+(e-l)/4;a.b=c+d;n.c=a.a=(n.b+a.b)/2;a.c=s.a=(c+f)/2;s.b=f-d;o.b=h+(r-h)/4;s.c=o.a=(s.b+o.b)/2;return[n,a,s,o]},h=function(e,i,a,s,o){var l=e.length-1,h=0,c=e[0].a,f,d,p,m,v,g,y,_,b,x,w,T,M;for(f=0;f<l;f++){v=e[h];d=v.a;p=v.d;m=e[h+1].d;if(o){w=t[f];T=r[f];M=(T+w)*i*.25/(s?.5:n[f]||.5);g=p-(p-d)*(s?i*.5:w!==0?M/w:0);y=p+(m-p)*(s?i*.5:T!==0?M/T:0);_=p-(g+((y-g)*(w*3/(w+T)+.5)/4||0))}else{g=p-(p-d)*i*.5;y=p+(m-p)*i*.5;_=p-(g+y)/2}g+=_;y+=_;v.c=b=g;if(f!==0){v.b=c}else{v.b=c=v.a+(v.c-v.a)*.6}v.da=p-d;v.ca=b-d;v.ba=c-d;if(a){x=u(d,c,b,p);e.splice(h,1,x[0],x[1],x[2],x[3]);h+=4}else{h++}c=y}v=e[h];v.b=c;v.c=c+(v.d-c)*.4;v.da=v.d-v.a;v.ca=v.c-v.a;v.ba=c-v.a;if(a){x=u(v.a,c,v.c,v.d);e.splice(h,1,x[0],x[1],x[2],x[3])}},c=function(e,i,n,a){var s=[],l,u,h,c,f,d;if(a){e=[a].concat(e);u=e.length;while(--u>-1){if(typeof(d=e[u][i])==="string")if(d.charAt(1)==="="){e[u][i]=a[i]+Number(d.charAt(0)+d.substr(2))}}}l=e.length-2;if(l<0){s[0]=new o(e[0][i],0,0,e[0][i]);return s}for(u=0;u<l;u++){h=e[u][i];c=e[u+1][i];s[u]=new o(h,0,0,c);if(n){f=e[u+2][i];t[u]=(t[u]||0)+(c-h)*(c-h)
;r[u]=(r[u]||0)+(f-c)*(f-c)}}s[u]=new o(e[u][i],0,0,e[u+1][i]);return s},f=function(e,i,s,o,u,f){var d={},p=[],m=f||e[0],v,g,y,_,b,x,w,T;u=typeof u==="string"?","+u+",":l;if(i==null){i=1}for(g in e[0]){p.push(g)}if(e.length>1){T=e[e.length-1];w=true;v=p.length;while(--v>-1){g=p[v];if(Math.abs(m[g]-T[g])>.05){w=false;break}}if(w){e=e.concat();if(f){e.unshift(f)}e.push(e[1]);f=e[e.length-3]}}t.length=r.length=n.length=0;v=p.length;while(--v>-1){g=p[v];a[g]=u.indexOf(","+g+",")!==-1;d[g]=c(e,g,a[g],f)}v=t.length;while(--v>-1){t[v]=Math.sqrt(t[v]);r[v]=Math.sqrt(r[v])}if(!o){v=p.length;while(--v>-1){if(a[g]){y=d[p[v]];x=y.length-1;for(_=0;_<x;_++){b=y[_+1].da/r[_]+y[_].da/t[_]||0;n[_]=(n[_]||0)+b*b}}}v=n.length;while(--v>-1){n[v]=Math.sqrt(n[v])}}v=p.length;_=s?4:1;while(--v>-1){g=p[v];y=d[g];h(y,i,s,o,a[g]);if(w){y.splice(0,_);y.splice(y.length-_,_)}}return d},d=function(e,t,i){t=t||"soft";var r={},n=t==="cubic"?3:2,a=t==="soft",s=[],l,u,h,c,f,d,p,m,v,g,y;if(a&&i){e=[i].concat(e)}if(e==null||e.length<n+1){throw"invalid Bezier data"}for(v in e[0]){s.push(v)}d=s.length;while(--d>-1){v=s[d];r[v]=f=[];g=0;m=e.length;for(p=0;p<m;p++){l=i==null?e[p][v]:typeof(y=e[p][v])==="string"&&y.charAt(1)==="="?i[v]+Number(y.charAt(0)+y.substr(2)):Number(y);if(a)if(p>1)if(p<m-1){f[g++]=(l+f[g-2])/2}f[g++]=l}m=g-n+1;g=0;for(p=0;p<m;p+=n){l=f[p];u=f[p+1];h=f[p+2];c=n===2?0:f[p+3];f[g++]=y=n===3?new o(l,u,h,c):new o(l,(2*u+l)/3,(2*u+h)/3,h)}f.length=g}return r},p=function(e,t,i){var r=1/i,n=e.length,a,s,o,l,u,h,c,f,d,p,m;while(--n>-1){p=e[n];o=p.a;l=p.d-o;u=p.c-o;h=p.b-o;a=s=0;for(f=1;f<=i;f++){c=r*f;d=1-c;a=s-(s=(c*c*l+3*d*(c*u+d*h))*c);m=n*i+f-1;t[m]=(t[m]||0)+a*a}}},m=function(e,t){t=t>>0||6;var i=[],r=[],n=0,a=0,s=t-1,o=[],l=[],u,h,c,f;for(u in e){p(e[u],i,t)}c=i.length;for(h=0;h<c;h++){n+=Math.sqrt(i[h]);f=h%t;l[f]=n;if(f===s){a+=n;f=h/t>>0;o[f]=l;r[f]=a;n=0;l=[]}}return{length:a,lengths:r,segments:o}},v=i._gsDefine.plugin({propName:"bezier",priority:-1,version:"1.3.8",API:2,global:true,init:function(e,t,i){this._target=e;if(t instanceof Array){t={values:t}}this._func={};this._mod={};this._props=[];this._timeRes=t.timeResolution==null?6:parseInt(t.timeResolution,10);var r=t.values||[],n={},a=r[0],s=t.autoRotate||i.vars.orientToBezier,o,l,u,h,c;this._autoRotate=s?s instanceof Array?s:[["x","y","rotation",s===true?0:Number(s)||0]]:null;for(o in a){this._props.push(o)}u=this._props.length;while(--u>-1){o=this._props[u];this._overwriteProps.push(o);l=this._func[o]=typeof e[o]==="function";n[o]=!l?parseFloat(e[o]):e[o.indexOf("set")||typeof e["get"+o.substr(3)]!=="function"?o:"get"+o.substr(3)]();if(!c)if(n[o]!==r[0][o]){c=n}}this._beziers=t.type!=="cubic"&&t.type!=="quadratic"&&t.type!=="soft"?f(r,isNaN(t.curviness)?1:t.curviness,false,t.type==="thruBasic",t.correlate,c):d(r,t.type,n);this._segCount=this._beziers[o].length;if(this._timeRes){var p=m(this._beziers,this._timeRes);this._length=p.length;this._lengths=p.lengths;this._segments=p.segments;this._l1=this._li=this._s1=this._si=0;this._l2=this._lengths[0];this._curSeg=this._segments[0];this._s2=this._curSeg[0];this._prec=1/this._curSeg.length}if(s=this._autoRotate){this._initialRotations=[];if(!(s[0]instanceof Array)){this._autoRotate=s=[s]}u=s.length;while(--u>-1){for(h=0;h<3;h++){o=s[u][h];this._func[o]=typeof e[o]==="function"?e[o.indexOf("set")||typeof e["get"+o.substr(3)]!=="function"?o:"get"+o.substr(3)]:false}o=s[u][2];this._initialRotations[u]=(this._func[o]?this._func[o].call(this._target):this._target[o])||0;this._overwriteProps.push(o)}}this._startRatio=i.vars.runBackwards?1:0;return true},set:function(t){var i=this._segCount,r=this._func,n=this._target,a=t!==this._startRatio,s,o,l,u,h,c,f,d,p,m;if(!this._timeRes){s=t<0?0:t>=1?i-1:i*t>>0;c=(t-s*(1/i))*i}else{p=this._lengths;m=this._curSeg;t*=this._length;l=this._li;if(t>this._l2&&l<i-1){d=i-1;while(l<d&&(this._l2=p[++l])<=t){}this._l1=p[l-1];this._li=l;this._curSeg=m=this._segments[l];this._s2=m[this._s1=this._si=0]}else if(t<this._l1&&l>0){while(l>0&&(this._l1=p[--l])>=t){}if(l===0&&t<this._l1){this._l1=0}else{l++}this._l2=p[l];this._li=l;this._curSeg=m=this._segments[l];this._s1=m[(this._si=m.length-1)-1]||0;this._s2=m[this._si]}s=l;t-=this._l1;l=this._si;if(t>this._s2&&l<m.length-1){d=m.length-1;while(l<d&&(this._s2=m[++l])<=t){}this._s1=m[l-1];this._si=l}else if(t<this._s1&&l>0){while(l>0&&(this._s1=m[--l])>=t){}if(l===0&&t<this._s1){this._s1=0}else{l++}this._s2=m[l];this._si=l}c=(l+(t-this._s1)/(this._s2-this._s1))*this._prec||0}o=1-c;l=this._props.length;while(--l>-1){u=this._props[l];h=this._beziers[u][s];f=(c*c*h.da+3*o*(c*h.ca+o*h.ba))*c+h.a;if(this._mod[u]){f=this._mod[u](f,n)}if(r[u]){n[u](f)}else{n[u]=f}}if(this._autoRotate){var v=this._autoRotate,g,y,_,b,x,w,T;l=v.length;while(--l>-1){u=v[l][2];w=v[l][3]||0;T=v[l][4]===true?1:e;h=this._beziers[v[l][0]];g=this._beziers[v[l][1]];if(h&&g){h=h[s];g=g[s];y=h.a+(h.b-h.a)*c;b=h.b+(h.c-h.b)*c;y+=(b-y)*c;b+=(h.c+(h.d-h.c)*c-b)*c;_=g.a+(g.b-g.a)*c;x=g.b+(g.c-g.b)*c;_+=(x-_)*c;x+=(g.c+(g.d-g.c)*c-x)*c;f=a?Math.atan2(x-_,b-y)*T+w:this._initialRotations[l];if(this._mod[u]){f=this._mod[u](f,n)}if(r[u]){n[u](f)}else{n[u]=f}}}}}}),g=v.prototype;v.bezierThrough=f;v.cubicToQuadratic=u;v._autoCSS=true;v.quadraticToCubic=function(e,t,i){return new o(e,(2*t+e)/3,(2*t+i)/3,i)};v._cssRegister=function(){var e=s.CSSPlugin;if(!e){return}var t=e._internals,i=t._parseToProxy,r=t._setPluginRatio,n=t.CSSPropTween;t._registerComplexSpecialProp("bezier",{parser:function(e,t,a,s,o,l){if(t instanceof Array){t={values:t}}l=new v;var u=t.values,h=u.length-1,c=[],f={},d,p,m;if(h<0){return o}for(d=0;d<=h;d++){m=i(e,u[d],s,o,l,h!==d);c[d]=m.end}for(p in t){f[p]=t[p]}f.values=c;o=new n(e,"bezier",0,0,m.pt,2);o.data=m;o.plugin=l;o.setRatio=r;if(f.autoRotate===0){f.autoRotate=true}if(f.autoRotate&&!(f.autoRotate instanceof Array)){d=f.autoRotate===true?0:Number(f.autoRotate);f.autoRotate=m.end.left!=null?[["left","top","rotation",d,false]]:m.end.x!=null?[["x","y","rotation",d,false]]:false}if(f.autoRotate){if(!s._transform){s._enableTransforms(false)}m.autoRotate=s._target._gsTransform;m.proxy.rotation=m.autoRotate.rotation||0;s._overwriteProps.push("rotation")}l._onInitTween(m.proxy,f,s._tween);return o}})};g._mod=function(e){var t=this._overwriteProps,i=t.length,r;while(--i>-1){r=e[t[i]];if(r&&typeof r==="function"){this._mod[t[i]]=r}}};g._kill=function(e){var t=this._props,i,r;for(i in this._beziers){if(i in e){delete this._beziers[i];delete this._func[i];r=t.length;while(--r>-1){if(t[r]===i){t.splice(r,1)}}}}t=this._autoRotate;if(t){r=t.length;while(--r>-1){if(e[t[r][2]]){t.splice(r,1)}}}return this._super._kill.call(this,e)}})();i._gsDefine("plugins.CSSPlugin",["plugins.TweenPlugin","TweenLite"],function(e,t){var r=function(){e.call(this,"css");this._overwriteProps.length=0;this.setRatio=r.prototype.setRatio},n=i._gsDefine.globals,a,s,o,l,u={},h=r.prototype=new e("css");h.constructor=r;r.version="1.20.3";r.API=2;r.defaultTransformPerspective=0;r.defaultSkewType="compensated";r.defaultSmoothOrigin=true;h="px";r.suffixMap={top:h,right:h,bottom:h,left:h,width:h,height:h,fontSize:h,padding:h,margin:h,perspective:h,lineHeight:""};var c=/(?:\-|\.|\b)(\d|\.|e\-)+/g,f=/(?:\d|\-\d|\.\d|\-\.\d|\+=\d|\-=\d|\+=.\d|\-=\.\d)+/g,d=/(?:\+=|\-=|\-|\b)[\d\-\.]+[a-zA-Z0-9]*(?:%|\b)/gi,p=/(?![+-]?\d*\.?\d+|[+-]|e[+-]\d+)[^0-9]/g,m=/(?:\d|\-|\+|=|#|\.)*/g,v=/opacity *= *([^)]*)/i,g=/opacity:([^;]*)/i,y=/alpha\(opacity *=.+?\)/i,_=/^(rgb|hsl)/,b=/([A-Z])/g,x=/-([a-z])/gi,w=/(^(?:url\(\"|url\())|(?:(\"\))$|\)$)/gi,T=function(e,t){return t.toUpperCase()},M=/(?:Left|Right|Width)/i,E=/(M11|M12|M21|M22)=[\d\-\.e]+/gi,S=/progid\:DXImageTransform\.Microsoft\.Matrix\(.+?\)/i,A=/,(?=[^\)]*(?:\(|$))/gi,P=/[\s,\(]/i,R=Math.PI/180,L=180/Math.PI,C={},O={style:{}},I=i.document||{createElement:function(){return O}},D=function(e,t){return I.createElementNS?I.createElementNS(t||"http://www.w3.org/1999/xhtml",e):I.createElement(e)},k=D("div"),U=D("img"),F=r._internals={_specialProps:u},N=(i.navigator||{}).userAgent||"",B,z,j,G,H,V,W=function(){var e=N.indexOf("Android"),t=D("a");j=N.indexOf("Safari")!==-1&&N.indexOf("Chrome")===-1&&(e===-1||parseFloat(N.substr(e+8,2))>3);H=j&&parseFloat(N.substr(N.indexOf("Version/")+8,2))<6;G=N.indexOf("Firefox")!==-1;if(/MSIE ([0-9]{1,}[\.0-9]{0,})/.exec(N)||/Trident\/.*rv:([0-9]{1,}[\.0-9]{0,})/.exec(N)){V=parseFloat(RegExp.$1)}if(!t){return false}t.style.cssText="top:1px;opacity:.55;";return/^0.55/.test(t.style.opacity)}(),X=function(e){return v.test(typeof e==="string"?e:(e.currentStyle?e.currentStyle.filter:e.style.filter)||"")?parseFloat(RegExp.$1)/100:1},Y=function(e){if(i.console){console.log(e)}},q,$,Z="",J="",Q=function(e,t){t=t||k;var i=t.style,r,n;if(i[e]!==undefined){return e}e=e.charAt(0).toUpperCase()+e.substr(1);r=["O","Moz","ms","Ms","Webkit"];n=5;while(--n>-1&&i[r[n]+e]===undefined){}if(n>=0){J=n===3?"ms":r[n];Z="-"+J.toLowerCase()+"-";return J+e}return null},K=I.defaultView?I.defaultView.getComputedStyle:function(){},ee=r.getStyle=function(e,t,i,r,n){var a;if(!W)if(t==="opacity"){return X(e)}if(!r&&e.style[t]){a=e.style[t]}else if(i=i||K(e)){a=i[t]||i.getPropertyValue(t)||i.getPropertyValue(t.replace(b,"-$1").toLowerCase())}else if(e.currentStyle){a=e.currentStyle[t]}return n!=null&&(!a||a==="none"||a==="auto"||a==="auto auto")?n:a},te=F.convertToPixels=function(e,i,n,a,s){if(a==="px"||!a&&i!=="lineHeight"){return n}if(a==="auto"||!n){return 0}var o=M.test(i),l=e,u=k.style,h=n<0,c=n===1,f,d,p;if(h){n=-n}if(c){n*=100}if(i==="lineHeight"&&!a){d=K(e).lineHeight;e.style.lineHeight=n;f=parseFloat(K(e).lineHeight);e.style.lineHeight=d}else if(a==="%"&&i.indexOf("border")!==-1){f=n/100*(o?e.clientWidth:e.clientHeight)}else{u.cssText="border:0 solid red;position:"+ee(e,"position")+";line-height:0;";if(a==="%"||!l.appendChild||a.charAt(0)==="v"||a==="rem"){l=e.parentNode||I.body;if(ee(l,"display").indexOf("flex")!==-1){u.position="absolute"}d=l._gsCache;p=t.ticker.frame;if(d&&o&&d.time===p){return d.width*n/100}u[o?"width":"height"]=n+a}else{u[o?"borderLeftWidth":"borderTopWidth"]=n+a}l.appendChild(k);f=parseFloat(k[o?"offsetWidth":"offsetHeight"]);l.removeChild(k);if(o&&a==="%"&&r.cacheWidths!==false){d=l._gsCache=l._gsCache||{};d.time=p;d.width=f/n*100}if(f===0&&!s){f=te(e,i,n,a,true)}}if(c){f/=100}return h?-f:f},ie=F.calculateOffset=function(e,t,i){if(ee(e,"position",i)!=="absolute"){return 0}var r=t==="left"?"Left":"Top",n=ee(e,"margin"+r,i);return e["offset"+r]-(te(e,t,parseFloat(n),n.replace(m,""))||0)},re=function(e,t){var i={},r,n,a;if(t=t||K(e,null)){if(r=t.length){while(--r>-1){a=t[r];if(a.indexOf("-transform")===-1||Ce===a){i[a.replace(x,T)]=t.getPropertyValue(a)}}}else{for(r in t){if(r.indexOf("Transform")===-1||Le===r){i[r]=t[r]}}}}else if(t=e.currentStyle||e.style){for(r in t){if(typeof r==="string"&&i[r]===undefined){i[r.replace(x,T)]=t[r]}}}if(!W){i.opacity=X(e)}n=Xe(e,t,false);i.rotation=n.rotation;i.skewX=n.skewX;i.scaleX=n.scaleX;i.scaleY=n.scaleY;i.x=n.x;i.y=n.y;if(Ie){i.z=n.z;i.rotationX=n.rotationX;i.rotationY=n.rotationY;i.scaleZ=n.scaleZ}if(i.filters){delete i.filters}return i},ne=function(e,t,i,r,n){var a={},s=e.style,o,l,u;for(l in i){if(l!=="cssText")if(l!=="length")if(isNaN(l))if(t[l]!==(o=i[l])||n&&n[l])if(l.indexOf("Origin")===-1)if(typeof o==="number"||typeof o==="string"){a[l]=o==="auto"&&(l==="left"||l==="top")?ie(e,l):(o===""||o==="auto"||o==="none")&&typeof t[l]==="string"&&t[l].replace(p,"")!==""?0:o;if(s[l]!==undefined){u=new be(s,l,s[l],u)}}}if(r){for(l in r){if(l!=="className"){a[l]=r[l]}}}return{difs:a,firstMPT:u}},ae={width:["Left","Right"],height:["Top","Bottom"]},se=["marginLeft","marginRight","marginTop","marginBottom"],oe=function(e,t,i){if((e.nodeName+"").toLowerCase()==="svg"){return(i||K(e))[t]||0}else if(e.getCTM&&He(e)){return e.getBBox()[t]||0}var r=parseFloat(t==="width"?e.offsetWidth:e.offsetHeight),n=ae[t],a=n.length;i=i||K(e,null);while(--a>-1){r-=parseFloat(ee(e,"padding"+n[a],i,true))||0;r-=parseFloat(ee(e,"border"+n[a]+"Width",i,true))||0}return r},le=function(e,t){if(e==="contain"||e==="auto"||e==="auto auto"){return e+" "}if(e==null||e===""){e="0 0"}var i=e.split(" "),r=e.indexOf("left")!==-1?"0%":e.indexOf("right")!==-1?"100%":i[0],n=e.indexOf("top")!==-1?"0%":e.indexOf("bottom")!==-1?"100%":i[1],a;if(i.length>3&&!t){i=e.split(", ").join(",").split(",");e=[];for(a=0;a<i.length;a++){e.push(le(i[a]))}return e.join(",")}if(n==null){n=r==="center"?"50%":"0"}else if(n==="center"){n="50%"}if(r==="center"||isNaN(parseFloat(r))&&(r+"").indexOf("=")===-1){r="50%"}e=r+" "+n+(i.length>2?" "+i[2]:"");if(t){t.oxp=r.indexOf("%")!==-1;t.oyp=n.indexOf("%")!==-1;t.oxr=r.charAt(1)==="=";t.oyr=n.charAt(1)==="=";t.ox=parseFloat(r.replace(p,""));t.oy=parseFloat(n.replace(p,""));t.v=e}return t||e},ue=function(e,t){if(typeof e==="function"){e=e($,q)}return typeof e==="string"&&e.charAt(1)==="="?parseInt(e.charAt(0)+"1",10)*parseFloat(e.substr(2)):parseFloat(e)-parseFloat(t)||0},he=function(e,t){if(typeof e==="function"){e=e($,q)}return e==null?t:typeof e==="string"&&e.charAt(1)==="="?parseInt(e.charAt(0)+"1",10)*parseFloat(e.substr(2))+t:parseFloat(e)||0},ce=function(e,t,i,r){var n=1e-6,a,s,o,l,u;if(typeof e==="function"){e=e($,q)}if(e==null){l=t}else if(typeof e==="number"){l=e}else{a=360;s=e.split("_");u=e.charAt(1)==="=";o=(u?parseInt(e.charAt(0)+"1",10)*parseFloat(s[0].substr(2)):parseFloat(s[0]))*(e.indexOf("rad")===-1?1:L)-(u?0:t);if(s.length){if(r){r[i]=t+o}if(e.indexOf("short")!==-1){o=o%a;if(o!==o%(a/2)){o=o<0?o+a:o-a}}if(e.indexOf("_cw")!==-1&&o<0){o=(o+a*9999999999)%a-(o/a|0)*a}else if(e.indexOf("ccw")!==-1&&o>0){o=(o-a*9999999999)%a-(o/a|0)*a}}l=t+o}if(l<n&&l>-n){l=0}return l},fe={aqua:[0,255,255],lime:[0,255,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,255],navy:[0,0,128],white:[255,255,255],fuchsia:[255,0,255],olive:[128,128,0],yellow:[255,255,0],orange:[255,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[255,0,0],pink:[255,192,203],cyan:[0,255,255],transparent:[255,255,255,0]},de=function(e,t,i){e=e<0?e+1:e>1?e-1:e;return(e*6<1?t+(i-t)*e*6:e<.5?i:e*3<2?t+(i-t)*(2/3-e)*6:t)*255+.5|0},pe=r.parseColor=function(e,t){var i,r,n,a,s,o,l,u,h,d,p;if(!e){i=fe.black}else if(typeof e==="number"){i=[e>>16,e>>8&255,e&255]}else{if(e.charAt(e.length-1)===","){e=e.substr(0,e.length-1)}if(fe[e]){i=fe[e]}else if(e.charAt(0)==="#"){if(e.length===4){r=e.charAt(1);n=e.charAt(2);a=e.charAt(3);e="#"+r+r+n+n+a+a}e=parseInt(e.substr(1),16);i=[e>>16,e>>8&255,e&255]}else if(e.substr(0,3)==="hsl"){i=p=e.match(c);if(!t){s=Number(i[0])%360/360;o=Number(i[1])/100;l=Number(i[2])/100;n=l<=.5?l*(o+1):l+o-l*o;r=l*2-n;if(i.length>3){i[3]=Number(i[3])}i[0]=de(s+1/3,r,n);i[1]=de(s,r,n);i[2]=de(s-1/3,r,n)}else if(e.indexOf("=")!==-1){return e.match(f)}}else{i=e.match(c)||fe.transparent}i[0]=Number(i[0]);i[1]=Number(i[1]);i[2]=Number(i[2]);if(i.length>3){i[3]=Number(i[3])}}if(t&&!p){r=i[0]/255;n=i[1]/255;a=i[2]/255;u=Math.max(r,n,a);h=Math.min(r,n,a);l=(u+h)/2;if(u===h){s=o=0}else{d=u-h;o=l>.5?d/(2-u-h):d/(u+h);s=u===r?(n-a)/d+(n<a?6:0):u===n?(a-r)/d+2:(r-n)/d+4;s*=60}i[0]=s+.5|0;i[1]=o*100+.5|0;i[2]=l*100+.5|0}return i},me=function(e,t){var i=e.match(ve)||[],r=0,n="",a,s,o;if(!i.length){return e}for(a=0;a<i.length;a++){s=i[a];o=e.substr(r,e.indexOf(s,r)-r);r+=o.length+s.length;s=pe(s,t);if(s.length===3){s.push(1)}n+=o+(t?"hsla("+s[0]+","+s[1]+"%,"+s[2]+"%,"+s[3]:"rgba("+s.join(","))+")"}return n+e.substr(r)},ve="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3}){1,2}\\b";for(h in fe){ve+="|"+h+"\\b"}ve=new RegExp(ve+")","gi");r.colorStringFilter=function(e){var t=e[0]+" "+e[1],i;if(ve.test(t)){i=t.indexOf("hsl(")!==-1||t.indexOf("hsla(")!==-1;e[0]=me(e[0],i);e[1]=me(e[1],i)}ve.lastIndex=0};if(!t.defaultStringFilter){t.defaultStringFilter=r.colorStringFilter}var ge=function(e,t,i,r){if(e==null){return function(e){return e}}var n=t?(e.match(ve)||[""])[0]:"",a=e.split(n).join("").match(d)||[],s=e.substr(0,e.indexOf(a[0])),o=e.charAt(e.length-1)===")"?")":"",l=e.indexOf(" ")!==-1?" ":",",u=a.length,h=u>0?a[0].replace(c,""):"",f;if(!u){return function(e){return e}}if(t){f=function(e){var t,c,p,m;if(typeof e==="number"){e+=h}else if(r&&A.test(e)){m=e.replace(A,"|").split("|");for(p=0;p<m.length;p++){m[p]=f(m[p])}return m.join(",")}t=(e.match(ve)||[n])[0];c=e.split(t).join("").match(d)||[];p=c.length;if(u>p--){while(++p<u){c[p]=i?c[(p-1)/2|0]:a[p]}}return s+c.join(l)+l+t+o+(e.indexOf("inset")!==-1?" inset":"")};return f}f=function(e){var t,n,c;if(typeof e==="number"){e+=h}else if(r&&A.test(e)){n=e.replace(A,"|").split("|");for(c=0;c<n.length;c++){n[c]=f(n[c])}return n.join(",")}t=e.match(d)||[];c=t.length;if(u>c--){while(++c<u){t[c]=i?t[(c-1)/2|0]:a[c]}}return s+t.join(l)+o};return f},ye=function(e){e=e.split(",");return function(t,i,r,n,a,s,o){var l=(i+"").split(" "),u;o={};for(u=0;u<4;u++){o[e[u]]=l[u]=l[u]||l[(u-1)/2>>0]}return n.parse(t,o,a,s)}},_e=F._setPluginRatio=function(e){this.plugin.setRatio(e);var t=this.data,i=t.proxy,r=t.firstMPT,n=1e-6,a,s,o,l,u;while(r){a=i[r.v];if(r.r){a=Math.round(a)}else if(a<n&&a>-n){a=0}r.t[r.p]=a;r=r._next}if(t.autoRotate){t.autoRotate.rotation=t.mod?t.mod(i.rotation,this.t):i.rotation}if(e===1||e===0){r=t.firstMPT;u=e===1?"e":"b";while(r){s=r.t;if(!s.type){s[u]=s.s+s.xs0}else if(s.type===1){l=s.xs0+s.s+s.xs1;for(o=1;o<s.l;o++){l+=s["xn"+o]+s["xs"+(o+1)]}s[u]=l}r=r._next}}},be=function(e,t,i,r,n){this.t=e;this.p=t;this.v=i;this.r=n;if(r){r._prev=this;this._next=r}},xe=F._parseToProxy=function(e,t,i,r,n,a){var s=r,o={},l={},u=i._transform,h=C,c,f,d,p,m;i._transform=null;C=t;r=m=i.parse(e,t,r,n);C=h;if(a){i._transform=u;if(s){s._prev=null;if(s._prev){s._prev._next=null}}}while(r&&r!==s){if(r.type<=1){f=r.p;l[f]=r.s+r.c;o[f]=r.s;if(!a){p=new be(r,"s",f,p,r.r);r.c=0}if(r.type===1){c=r.l;while(--c>0){d="xn"+c;f=r.p+"_"+d;l[f]=r.data[d];o[f]=r[d];if(!a){p=new be(r,d,f,p,r.rxp[d])}}}}r=r._next}return{proxy:o,end:l,firstMPT:p,pt:m}},we=F.CSSPropTween=function(e,t,i,r,n,s,o,u,h,c,f){this.t=e;this.p=t;this.s=i;this.c=r;this.n=o||t;if(!(e instanceof we)){l.push(this.n)}this.r=u;this.type=s||0;if(h){this.pr=h;a=true}this.b=c===undefined?i:c;this.e=f===undefined?i+r:f;if(n){this._next=n;n._prev=this}},Te=function(e,t,i,r,n,a){var s=new we(e,t,i,r-i,n,-1,a);s.b=i;s.e=s.xs0=r;return s},Me=r.parseComplex=function(e,t,i,n,a,s,o,l,u,h){i=i||s||"";if(typeof n==="function"){n=n($,q)}o=new we(e,t,0,0,o,h?2:1,null,false,l,i,n);n+="";if(a&&ve.test(n+i)){n=[i,n];r.colorStringFilter(n);i=n[0];n=n[1]}var d=i.split(", ").join(",").split(" "),p=n.split(", ").join(",").split(" "),m=d.length,v=B!==false,g,y,_,b,x,w,T,M,E,S,P,R,L;if(n.indexOf(",")!==-1||i.indexOf(",")!==-1){if((n+i).indexOf("rgb")!==-1||(n+i).indexOf("hsl")!==-1){d=d.join(" ").replace(A,", ").split(" ");p=p.join(" ").replace(A,", ").split(" ")}else{d=d.join(" ").split(",").join(", ").split(" ");p=p.join(" ").split(",").join(", ").split(" ")}m=d.length}if(m!==p.length){d=(s||"").split(" ");m=d.length}o.plugin=u;o.setRatio=h;ve.lastIndex=0;for(g=0;g<m;g++){b=d[g];x=p[g];M=parseFloat(b);if(M||M===0){o.appendXtra("",M,ue(x,M),x.replace(f,""),v&&x.indexOf("px")!==-1,true)}else if(a&&ve.test(b)){R=x.indexOf(")")+1;R=")"+(R?x.substr(R):"");L=x.indexOf("hsl")!==-1&&W;S=x;b=pe(b,L);x=pe(x,L);E=b.length+x.length>6;if(E&&!W&&x[3]===0){o["xs"+o.l]+=o.l?" transparent":"transparent";o.e=o.e.split(p[g]).join("transparent")}else{if(!W){E=false}if(L){o.appendXtra(S.substr(0,S.indexOf("hsl"))+(E?"hsla(":"hsl("),b[0],ue(x[0],b[0]),",",false,true).appendXtra("",b[1],ue(x[1],b[1]),"%,",false).appendXtra("",b[2],ue(x[2],b[2]),E?"%,":"%"+R,false)}else{o.appendXtra(S.substr(0,S.indexOf("rgb"))+(E?"rgba(":"rgb("),b[0],x[0]-b[0],",",true,true).appendXtra("",b[1],x[1]-b[1],",",true).appendXtra("",b[2],x[2]-b[2],E?",":R,true)}if(E){b=b.length<4?1:b[3];o.appendXtra("",b,(x.length<4?1:x[3])-b,R,false)}}ve.lastIndex=0}else{w=b.match(c);if(!w){o["xs"+o.l]+=o.l||o["xs"+o.l]?" "+x:x}else{T=x.match(f);if(!T||T.length!==w.length){return o}_=0;for(y=0;y<w.length;y++){P=w[y];S=b.indexOf(P,_);o.appendXtra(b.substr(_,S-_),Number(P),ue(T[y],P),"",v&&b.substr(S+P.length,2)==="px",y===0);_=S+P.length}o["xs"+o.l]+=b.substr(_)}}}if(n.indexOf("=")!==-1)if(o.data){R=o.xs0+o.data.s;for(g=1;g<o.l;g++){R+=o["xs"+g]+o.data["xn"+g]}o.e=R+o["xs"+g]}if(!o.l){o.type=-1;o.xs0=o.e}return o.xfirst||o},Ee=9;h=we.prototype;h.l=h.pr=0;while(--Ee>0){h["xn"+Ee]=0;h["xs"+Ee]=""}h.xs0="";h._next=h._prev=h.xfirst=h.data=h.plugin=h.setRatio=h.rxp=null;h.appendXtra=function(e,t,i,r,n,a){var s=this,o=s.l;s["xs"+o]+=a&&(o||s["xs"+o])?" "+e:e||"";if(!i)if(o!==0&&!s.plugin){s["xs"+o]+=t+(r||"");return s}s.l++;s.type=s.setRatio?2:1;s["xs"+s.l]=r||"";if(o>0){s.data["xn"+o]=t+i;s.rxp["xn"+o]=n;s["xn"+o]=t;if(!s.plugin){s.xfirst=new we(s,"xn"+o,t,i,s.xfirst||s,0,s.n,n,s.pr);s.xfirst.xs0=0}return s}s.data={s:t+i};s.rxp={};s.s=t;s.c=i;s.r=n;return s};var Se=function(e,t){t=t||{};this.p=t.prefix?Q(e)||e:e;u[e]=u[this.p]=this;this.format=t.formatter||ge(t.defaultValue,t.color,t.collapsible,t.multi);if(t.parser){this.parse=t.parser}this.clrs=t.color;this.multi=t.multi;this.keyword=t.keyword;this.dflt=t.defaultValue;this.pr=t.priority||0},Ae=F._registerComplexSpecialProp=function(e,t,i){if(typeof t!=="object"){t={parser:i}}var r=e.split(","),n=t.defaultValue,a,s;i=i||[n];for(a=0;a<r.length;a++){t.prefix=a===0&&t.prefix;t.defaultValue=i[a]||n;s=new Se(r[a],t)}},Pe=F._registerPluginProp=function(e){if(!u[e]){var t=e.charAt(0).toUpperCase()+e.substr(1)+"Plugin";Ae(e,{parser:function(e,i,r,a,s,o,l){var h=n.com.greensock.plugins[t];if(!h){Y("Error: "+t+" js file not loaded.");return s}h._cssRegister();return u[r].parse(e,i,r,a,s,o,l)}})}};h=Se.prototype;h.parseComplex=function(e,t,i,r,n,a){var s=this.keyword,o,l,u,h,c,f;if(this.multi)if(A.test(i)||A.test(t)){l=t.replace(A,"|").split("|");u=i.replace(A,"|").split("|")}else if(s){l=[t];u=[i]}if(u){h=u.length>l.length?u.length:l.length;for(o=0;o<h;o++){t=l[o]=l[o]||this.dflt;i=u[o]=u[o]||this.dflt;if(s){c=t.indexOf(s);f=i.indexOf(s);if(c!==f){if(f===-1){l[o]=l[o].split(s).join("")}else if(c===-1){l[o]+=" "+s}}}}t=l.join(", ");i=u.join(", ")}return Me(e,this.p,t,i,this.clrs,this.dflt,r,this.pr,n,a)};h.parse=function(e,t,i,r,n,a,s){return this.parseComplex(e.style,this.format(ee(e,this.p,o,false,this.dflt)),this.format(t),n,a)};r.registerSpecialProp=function(e,t,i){Ae(e,{parser:function(e,r,n,a,s,o,l){var u=new we(e,n,0,0,s,2,n,false,i);u.plugin=o;u.setRatio=t(e,r,a._tween,n);return u},priority:i})};r.useSVGTransformAttr=true;var Re="scaleX,scaleY,scaleZ,x,y,z,skewX,skewY,rotation,rotationX,rotationY,perspective,xPercent,yPercent".split(","),Le=Q("transform"),Ce=Z+"transform",Oe=Q("transformOrigin"),Ie=Q("perspective")!==null,De=F.Transform=function(){this.perspective=parseFloat(r.defaultTransformPerspective)||0;this.force3D=r.defaultForce3D===false||!Ie?false:r.defaultForce3D||"auto"},ke=i.SVGElement,Ue,Fe=function(e,t,i){var r=I.createElementNS("http://www.w3.org/2000/svg",e),n=/([a-z])([A-Z])/g,a;for(a in i){r.setAttributeNS(null,a.replace(n,"$1-$2").toLowerCase(),i[a])}t.appendChild(r);return r},Ne=I.documentElement||{},Be=function(){var e=V||/Android/i.test(N)&&!i.chrome,t,r,n;if(I.createElementNS&&!e){t=Fe("svg",Ne);r=Fe("rect",t,{width:100,height:50,x:100});n=r.getBoundingClientRect().width;r.style[Oe]="50% 50%";r.style[Le]="scaleX(0.5)";e=n===r.getBoundingClientRect().width&&!(G&&Ie);Ne.removeChild(t)}return e}(),ze=function(e,t,i,n,a,s){var o=e._gsTransform,l=We(e,true),u,h,c,f,d,p,m,v,g,y,_,b,x,w;if(o){x=o.xOrigin;w=o.yOrigin}if(!n||(u=n.split(" ")).length<2){m=e.getBBox();if(m.x===0&&m.y===0&&m.width+m.height===0){m={x:parseFloat(e.hasAttribute("x")?e.getAttribute("x"):e.hasAttribute("cx")?e.getAttribute("cx"):0)||0,y:parseFloat(e.hasAttribute("y")?e.getAttribute("y"):e.hasAttribute("cy")?e.getAttribute("cy"):0)||0,width:0,height:0}}t=le(t).split(" ");u=[(t[0].indexOf("%")!==-1?parseFloat(t[0])/100*m.width:parseFloat(t[0]))+m.x,(t[1].indexOf("%")!==-1?parseFloat(t[1])/100*m.height:parseFloat(t[1]))+m.y]}i.xOrigin=f=parseFloat(u[0]);i.yOrigin=d=parseFloat(u[1]);if(n&&l!==Ve){p=l[0];m=l[1];v=l[2];g=l[3];y=l[4];_=l[5];b=p*g-m*v;if(b){h=f*(g/b)+d*(-v/b)+(v*_-g*y)/b;c=f*(-m/b)+d*(p/b)-(p*_-m*y)/b;f=i.xOrigin=u[0]=h;d=i.yOrigin=u[1]=c}}if(o){if(s){i.xOffset=o.xOffset;i.yOffset=o.yOffset;o=i}if(a||a!==false&&r.defaultSmoothOrigin!==false){h=f-x;c=d-w;o.xOffset+=h*l[0]+c*l[2]-h;o.yOffset+=h*l[1]+c*l[3]-c}else{o.xOffset=o.yOffset=0}}if(!s){e.setAttribute("data-svg-origin",u.join(" "))}},je=function(e){var t=D("svg",this.ownerSVGElement&&this.ownerSVGElement.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),i=this.parentNode,r=this.nextSibling,n=this.style.cssText,a;Ne.appendChild(t);t.appendChild(this);this.style.display="block";if(e){try{a=this.getBBox();this._originalGetBBox=this.getBBox;this.getBBox=je}catch(e){}}else if(this._originalGetBBox){a=this._originalGetBBox()}if(r){i.insertBefore(this,r)}else{i.appendChild(this)}Ne.removeChild(t);this.style.cssText=n;return a},Ge=function(e){try{return e.getBBox()}catch(t){return je.call(e,true)}},He=function(e){return!!(ke&&e.getCTM&&(!e.parentNode||e.ownerSVGElement)&&Ge(e))},Ve=[1,0,0,1,0,0],We=function(e,t){var i=e._gsTransform||new De,r=1e5,n=e.style,a,s,o,l,u,h;if(Le){s=ee(e,Ce,null,true)}else if(e.currentStyle){s=e.currentStyle.filter.match(E);s=s&&s.length===4?[s[0].substr(4),Number(s[2].substr(4)),Number(s[1].substr(4)),s[3].substr(4),i.x||0,i.y||0].join(","):""}a=!s||s==="none"||s==="matrix(1, 0, 0, 1, 0, 0)";if(Le&&((h=!K(e)||K(e).display==="none")||!e.parentNode)){if(h){l=n.display;n.display="block"}if(!e.parentNode){u=1;Ne.appendChild(e)}s=ee(e,Ce,null,true);a=!s||s==="none"||s==="matrix(1, 0, 0, 1, 0, 0)";if(l){n.display=l}else if(h){Ze(n,"display")}if(u){Ne.removeChild(e)}}if(i.svg||e.getCTM&&He(e)){if(a&&(n[Le]+"").indexOf("matrix")!==-1){s=n[Le];a=0}o=e.getAttribute("transform");if(a&&o){if(o.indexOf("matrix")!==-1){s=o;a=0}else if(o.indexOf("translate")!==-1){s="matrix(1,0,0,1,"+o.match(/(?:\-|\b)[\d\-\.e]+\b/gi).join(",")+")";a=0}}}if(a){return Ve}o=(s||"").match(c)||[];Ee=o.length;while(--Ee>-1){l=Number(o[Ee]);o[Ee]=(u=l-(l|=0))?(u*r+(u<0?-.5:.5)|0)/r+l:l}return t&&o.length>6?[o[0],o[1],o[4],o[5],o[12],o[13]]:o},Xe=F.getTransform=function(e,i,n,a){if(e._gsTransform&&n&&!a){return e._gsTransform}var s=n?e._gsTransform||new De:new De,o=s.scaleX<0,l=2e-5,u=1e5,h=Ie?parseFloat(ee(e,Oe,i,false,"0 0 0").split(" ")[2])||s.zOrigin||0:0,c=parseFloat(r.defaultTransformPerspective)||0,f,d,p,m,v,g;s.svg=!!(e.getCTM&&He(e));if(s.svg){ze(e,ee(e,Oe,i,false,"50% 50%")+"",s,e.getAttribute("data-svg-origin"));Ue=r.useSVGTransformAttr||Be}f=We(e);if(f!==Ve){if(f.length===16){var y=f[0],_=f[1],b=f[2],x=f[3],w=f[4],T=f[5],M=f[6],E=f[7],S=f[8],A=f[9],P=f[10],R=f[12],C=f[13],O=f[14],I=f[11],D=Math.atan2(M,P),k,U,F,N,B,z;if(s.zOrigin){O=-s.zOrigin;R=S*O-f[12];C=A*O-f[13];O=P*O+s.zOrigin-f[14]}s.rotationX=D*L;if(D){B=Math.cos(-D);z=Math.sin(-D);k=w*B+S*z;U=T*B+A*z;F=M*B+P*z;S=w*-z+S*B;A=T*-z+A*B;P=M*-z+P*B;I=E*-z+I*B;w=k;T=U;M=F}D=Math.atan2(-b,P);s.rotationY=D*L;if(D){B=Math.cos(-D);z=Math.sin(-D);k=y*B-S*z;U=_*B-A*z;F=b*B-P*z;A=_*z+A*B;P=b*z+P*B;I=x*z+I*B;y=k;_=U;b=F}D=Math.atan2(_,y);s.rotation=D*L;if(D){B=Math.cos(D);z=Math.sin(D);k=y*B+_*z;U=w*B+T*z;F=S*B+A*z;_=_*B-y*z;T=T*B-w*z;A=A*B-S*z;y=k;w=U;S=F}if(s.rotationX&&Math.abs(s.rotationX)+Math.abs(s.rotation)>359.9){s.rotationX=s.rotation=0;s.rotationY=180-s.rotationY}D=Math.atan2(w,T);s.scaleX=(Math.sqrt(y*y+_*_+b*b)*u+.5|0)/u;s.scaleY=(Math.sqrt(T*T+M*M)*u+.5|0)/u;s.scaleZ=(Math.sqrt(S*S+A*A+P*P)*u+.5|0)/u;y/=s.scaleX;w/=s.scaleY;_/=s.scaleX;T/=s.scaleY;if(Math.abs(D)>l){s.skewX=D*L;w=0;if(s.skewType!=="simple"){s.scaleY*=1/Math.cos(D)}}else{s.skewX=0}s.perspective=I?1/(I<0?-I:I):0;s.x=R;s.y=C;s.z=O;if(s.svg){s.x-=s.xOrigin-(s.xOrigin*y-s.yOrigin*w);s.y-=s.yOrigin-(s.yOrigin*_-s.xOrigin*T)}}else if(!Ie||a||!f.length||s.x!==f[4]||s.y!==f[5]||!s.rotationX&&!s.rotationY){var j=f.length>=6,G=j?f[0]:1,H=f[1]||0,V=f[2]||0,W=j?f[3]:1;s.x=f[4]||0;s.y=f[5]||0;p=Math.sqrt(G*G+H*H);m=Math.sqrt(W*W+V*V);v=G||H?Math.atan2(H,G)*L:s.rotation||0;g=V||W?Math.atan2(V,W)*L+v:s.skewX||0;s.scaleX=p;s.scaleY=m;s.rotation=v;s.skewX=g;if(Ie){s.rotationX=s.rotationY=s.z=0;s.perspective=c;s.scaleZ=1}if(s.svg){s.x-=s.xOrigin-(s.xOrigin*G+s.yOrigin*V);s.y-=s.yOrigin-(s.xOrigin*H+s.yOrigin*W)}}if(Math.abs(s.skewX)>90&&Math.abs(s.skewX)<270){if(o){s.scaleX*=-1;s.skewX+=s.rotation<=0?180:-180;s.rotation+=s.rotation<=0?180:-180}else{s.scaleY*=-1;s.skewX+=s.skewX<=0?180:-180}}s.zOrigin=h;for(d in s){if(s[d]<l)if(s[d]>-l){s[d]=0}}}if(n){e._gsTransform=s;if(s.svg){if(Ue&&e.style[Le]){t.delayedCall(.001,function(){Ze(e.style,Le)})}else if(!Ue&&e.getAttribute("transform")){t.delayedCall(.001,function(){e.removeAttribute("transform")})}}}return s},Ye=function(e){var t=this.data,i=-t.rotation*R,r=i+t.skewX*R,n=1e5,a=(Math.cos(i)*t.scaleX*n|0)/n,s=(Math.sin(i)*t.scaleX*n|0)/n,o=(Math.sin(r)*-t.scaleY*n|0)/n,l=(Math.cos(r)*t.scaleY*n|0)/n,u=this.t.style,h=this.t.currentStyle,c,f;if(!h){return}f=s;s=-o;o=-f;c=h.filter;u.filter="";var d=this.t.offsetWidth,p=this.t.offsetHeight,g=h.position!=="absolute",y="progid:DXImageTransform.Microsoft.Matrix(M11="+a+", M12="+s+", M21="+o+", M22="+l,_=t.x+d*t.xPercent/100,b=t.y+p*t.yPercent/100,x,w;if(t.ox!=null){x=(t.oxp?d*t.ox*.01:t.ox)-d/2;w=(t.oyp?p*t.oy*.01:t.oy)-p/2;_+=x-(x*a+w*s);b+=w-(x*o+w*l)}if(!g){y+=", sizingMethod='auto expand')"}else{x=d/2;w=p/2;y+=", Dx="+(x-(x*a+w*s)+_)+", Dy="+(w-(x*o+w*l)+b)+")"}if(c.indexOf("DXImageTransform.Microsoft.Matrix(")!==-1){u.filter=c.replace(S,y)}else{u.filter=y+" "+c}if(e===0||e===1)if(a===1)if(s===0)if(o===0)if(l===1)if(!g||y.indexOf("Dx=0, Dy=0")!==-1)if(!v.test(c)||parseFloat(RegExp.$1)===100)if(c.indexOf("gradient("&&c.indexOf("Alpha"))===-1){u.removeAttribute("filter")}if(!g){var T=V<8?1:-1,M,E,A;x=t.ieOffsetX||0;w=t.ieOffsetY||0;t.ieOffsetX=Math.round((d-((a<0?-a:a)*d+(s<0?-s:s)*p))/2+_);t.ieOffsetY=Math.round((p-((l<0?-l:l)*p+(o<0?-o:o)*d))/2+b);for(Ee=0;Ee<4;Ee++){E=se[Ee];M=h[E];f=M.indexOf("px")!==-1?parseFloat(M):te(this.t,E,parseFloat(M),M.replace(m,""))||0;if(f!==t[E]){A=Ee<2?-t.ieOffsetX:-t.ieOffsetY}else{A=Ee<2?x-t.ieOffsetX:w-t.ieOffsetY}u[E]=(t[E]=Math.round(f-A*(Ee===0||Ee===2?1:T)))+"px"}}},qe=F.set3DTransformRatio=F.setTransformRatio=function(e){var t=this.data,i=this.t.style,r=t.rotation,n=t.rotationX,a=t.rotationY,s=t.scaleX,o=t.scaleY,l=t.scaleZ,u=t.x,h=t.y,c=t.z,f=t.svg,d=t.perspective,p=t.force3D,m=t.skewY,v=t.skewX,g,y,_,b,x,w,T,M,E,S,A,P,L,C,O,I,D,k,U,F,N,B,z;if(m){v+=m;r+=m}if(((e===1||e===0)&&p==="auto"&&(this.tween._totalTime===this.tween._totalDuration||!this.tween._totalTime)||!p)&&!c&&!d&&!a&&!n&&l===1||Ue&&f||!Ie){if(r||v||f){r*=R;B=v*R;z=1e5;y=Math.cos(r)*s;x=Math.sin(r)*s;_=Math.sin(r-B)*-o;w=Math.cos(r-B)*o;if(B&&t.skewType==="simple"){g=Math.tan(B-m*R);g=Math.sqrt(1+g*g);_*=g;w*=g;if(m){g=Math.tan(m*R);g=Math.sqrt(1+g*g);y*=g;x*=g}}if(f){u+=t.xOrigin-(t.xOrigin*y+t.yOrigin*_)+t.xOffset;h+=t.yOrigin-(t.xOrigin*x+t.yOrigin*w)+t.yOffset;if(Ue&&(t.xPercent||t.yPercent)){O=this.t.getBBox();u+=t.xPercent*.01*O.width;h+=t.yPercent*.01*O.height}O=1e-6;if(u<O)if(u>-O){u=0}if(h<O)if(h>-O){h=0}}U=(y*z|0)/z+","+(x*z|0)/z+","+(_*z|0)/z+","+(w*z|0)/z+","+u+","+h+")";if(f&&Ue){this.t.setAttribute("transform","matrix("+U)}else{i[Le]=(t.xPercent||t.yPercent?"translate("+t.xPercent+"%,"+t.yPercent+"%) matrix(":"matrix(")+U}}else{i[Le]=(t.xPercent||t.yPercent?"translate("+t.xPercent+"%,"+t.yPercent+"%) matrix(":"matrix(")+s+",0,0,"+o+","+u+","+h+")"}return}if(G){O=1e-4;if(s<O&&s>-O){s=l=2e-5}if(o<O&&o>-O){o=l=2e-5}if(d&&!t.z&&!t.rotationX&&!t.rotationY){d=0}}if(r||v){r*=R;I=y=Math.cos(r);D=x=Math.sin(r);if(v){r-=v*R;I=Math.cos(r);D=Math.sin(r);if(t.skewType==="simple"){g=Math.tan((v-m)*R);g=Math.sqrt(1+g*g);I*=g;D*=g;if(t.skewY){g=Math.tan(m*R);g=Math.sqrt(1+g*g);y*=g;x*=g}}}_=-D;w=I
}else if(!a&&!n&&l===1&&!d&&!f){i[Le]=(t.xPercent||t.yPercent?"translate("+t.xPercent+"%,"+t.yPercent+"%) translate3d(":"translate3d(")+u+"px,"+h+"px,"+c+"px)"+(s!==1||o!==1?" scale("+s+","+o+")":"");return}else{y=w=1;_=x=0}S=1;b=T=M=E=A=P=0;L=d?-1/d:0;C=t.zOrigin;O=1e-6;F=",";N="0";r=a*R;if(r){I=Math.cos(r);D=Math.sin(r);M=-D;A=L*-D;b=y*D;T=x*D;S=I;L*=I;y*=I;x*=I}r=n*R;if(r){I=Math.cos(r);D=Math.sin(r);g=_*I+b*D;k=w*I+T*D;E=S*D;P=L*D;b=_*-D+b*I;T=w*-D+T*I;S=S*I;L=L*I;_=g;w=k}if(l!==1){b*=l;T*=l;S*=l;L*=l}if(o!==1){_*=o;w*=o;E*=o;P*=o}if(s!==1){y*=s;x*=s;M*=s;A*=s}if(C||f){if(C){u+=b*-C;h+=T*-C;c+=S*-C+C}if(f){u+=t.xOrigin-(t.xOrigin*y+t.yOrigin*_)+t.xOffset;h+=t.yOrigin-(t.xOrigin*x+t.yOrigin*w)+t.yOffset}if(u<O&&u>-O){u=N}if(h<O&&h>-O){h=N}if(c<O&&c>-O){c=0}}U=t.xPercent||t.yPercent?"translate("+t.xPercent+"%,"+t.yPercent+"%) matrix3d(":"matrix3d(";U+=(y<O&&y>-O?N:y)+F+(x<O&&x>-O?N:x)+F+(M<O&&M>-O?N:M);U+=F+(A<O&&A>-O?N:A)+F+(_<O&&_>-O?N:_)+F+(w<O&&w>-O?N:w);if(n||a||l!==1){U+=F+(E<O&&E>-O?N:E)+F+(P<O&&P>-O?N:P)+F+(b<O&&b>-O?N:b);U+=F+(T<O&&T>-O?N:T)+F+(S<O&&S>-O?N:S)+F+(L<O&&L>-O?N:L)+F}else{U+=",0,0,0,0,1,0,"}U+=u+F+h+F+c+F+(d?1+-c/d:1)+")";i[Le]=U};h=De.prototype;h.x=h.y=h.z=h.skewX=h.skewY=h.rotation=h.rotationX=h.rotationY=h.zOrigin=h.xPercent=h.yPercent=h.xOffset=h.yOffset=0;h.scaleX=h.scaleY=h.scaleZ=1;Ae("transform,scale,scaleX,scaleY,scaleZ,x,y,z,rotation,rotationX,rotationY,rotationZ,skewX,skewY,shortRotation,shortRotationX,shortRotationY,shortRotationZ,transformOrigin,svgOrigin,transformPerspective,directionalRotation,parseTransform,force3D,skewType,xPercent,yPercent,smoothOrigin",{parser:function(e,t,i,n,a,s,l){if(n._lastParsedTransform===l){return a}n._lastParsedTransform=l;var u=l.scale&&typeof l.scale==="function"?l.scale:0,h;if(typeof l[i]==="function"){h=l[i];l[i]=t}if(u){l.scale=u($,e)}var c=e._gsTransform,f=e.style,d=1e-6,p=Re.length,m=l,v={},g="transformOrigin",y=Xe(e,o,true,m.parseTransform),_=m.transform&&(typeof m.transform==="function"?m.transform($,q):m.transform),b,x,w,T,M,E,S,A,P;y.skewType=m.skewType||y.skewType||r.defaultSkewType;n._transform=y;if(_&&typeof _==="string"&&Le){x=k.style;x[Le]=_;x.display="block";x.position="absolute";I.body.appendChild(k);b=Xe(k,null,false);if(y.skewType==="simple"){b.scaleY*=Math.cos(b.skewX*R)}if(y.svg){E=y.xOrigin;S=y.yOrigin;b.x-=y.xOffset;b.y-=y.yOffset;if(m.transformOrigin||m.svgOrigin){_={};ze(e,le(m.transformOrigin),_,m.svgOrigin,m.smoothOrigin,true);E=_.xOrigin;S=_.yOrigin;b.x-=_.xOffset-y.xOffset;b.y-=_.yOffset-y.yOffset}if(E||S){A=We(k,true);b.x-=E-(E*A[0]+S*A[2]);b.y-=S-(E*A[1]+S*A[3])}}I.body.removeChild(k);if(!b.perspective){b.perspective=y.perspective}if(m.xPercent!=null){b.xPercent=he(m.xPercent,y.xPercent)}if(m.yPercent!=null){b.yPercent=he(m.yPercent,y.yPercent)}}else if(typeof m==="object"){b={scaleX:he(m.scaleX!=null?m.scaleX:m.scale,y.scaleX),scaleY:he(m.scaleY!=null?m.scaleY:m.scale,y.scaleY),scaleZ:he(m.scaleZ,y.scaleZ),x:he(m.x,y.x),y:he(m.y,y.y),z:he(m.z,y.z),xPercent:he(m.xPercent,y.xPercent),yPercent:he(m.yPercent,y.yPercent),perspective:he(m.transformPerspective,y.perspective)};M=m.directionalRotation;if(M!=null){if(typeof M==="object"){for(x in M){m[x]=M[x]}}else{m.rotation=M}}if(typeof m.x==="string"&&m.x.indexOf("%")!==-1){b.x=0;b.xPercent=he(m.x,y.xPercent)}if(typeof m.y==="string"&&m.y.indexOf("%")!==-1){b.y=0;b.yPercent=he(m.y,y.yPercent)}b.rotation=ce("rotation"in m?m.rotation:"shortRotation"in m?m.shortRotation+"_short":"rotationZ"in m?m.rotationZ:y.rotation,y.rotation,"rotation",v);if(Ie){b.rotationX=ce("rotationX"in m?m.rotationX:"shortRotationX"in m?m.shortRotationX+"_short":y.rotationX||0,y.rotationX,"rotationX",v);b.rotationY=ce("rotationY"in m?m.rotationY:"shortRotationY"in m?m.shortRotationY+"_short":y.rotationY||0,y.rotationY,"rotationY",v)}b.skewX=ce(m.skewX,y.skewX);b.skewY=ce(m.skewY,y.skewY)}if(Ie&&m.force3D!=null){y.force3D=m.force3D;T=true}w=y.force3D||y.z||y.rotationX||y.rotationY||b.z||b.rotationX||b.rotationY||b.perspective;if(!w&&m.scale!=null){b.scaleZ=1}while(--p>-1){P=Re[p];_=b[P]-y[P];if(_>d||_<-d||m[P]!=null||C[P]!=null){T=true;a=new we(y,P,y[P],_,a);if(P in v){a.e=v[P]}a.xs0=0;a.plugin=s;n._overwriteProps.push(a.n)}}_=m.transformOrigin;if(y.svg&&(_||m.svgOrigin)){E=y.xOffset;S=y.yOffset;ze(e,le(_),b,m.svgOrigin,m.smoothOrigin);a=Te(y,"xOrigin",(c?y:b).xOrigin,b.xOrigin,a,g);a=Te(y,"yOrigin",(c?y:b).yOrigin,b.yOrigin,a,g);if(E!==y.xOffset||S!==y.yOffset){a=Te(y,"xOffset",c?E:y.xOffset,y.xOffset,a,g);a=Te(y,"yOffset",c?S:y.yOffset,y.yOffset,a,g)}_="0px 0px"}if(_||Ie&&w&&y.zOrigin){if(Le){T=true;P=Oe;_=(_||ee(e,P,o,false,"50% 50%"))+"";a=new we(f,P,0,0,a,-1,g);a.b=f[P];a.plugin=s;if(Ie){x=y.zOrigin;_=_.split(" ");y.zOrigin=(_.length>2&&!(x!==0&&_[2]==="0px")?parseFloat(_[2]):x)||0;a.xs0=a.e=_[0]+" "+(_[1]||"50%")+" 0px";a=new we(y,"zOrigin",0,0,a,-1,a.n);a.b=x;a.xs0=a.e=y.zOrigin}else{a.xs0=a.e=_}}else{le(_+"",y)}}if(T){n._transformType=!(y.svg&&Ue)&&(w||this._transformType===3)?3:2}if(h){l[i]=h}if(u){l.scale=u}return a},prefix:true});Ae("boxShadow",{defaultValue:"0px 0px 0px 0px #999",prefix:true,color:true,multi:true,keyword:"inset"});Ae("borderRadius",{defaultValue:"0px",parser:function(e,t,i,r,n,a){t=this.format(t);var l=["borderTopLeftRadius","borderTopRightRadius","borderBottomRightRadius","borderBottomLeftRadius"],u=e.style,h,c,f,d,p,m,v,g,y,_,b,x,w,T,M,E;y=parseFloat(e.offsetWidth);_=parseFloat(e.offsetHeight);h=t.split(" ");for(c=0;c<l.length;c++){if(this.p.indexOf("border")){l[c]=Q(l[c])}p=d=ee(e,l[c],o,false,"0px");if(p.indexOf(" ")!==-1){d=p.split(" ");p=d[0];d=d[1]}m=f=h[c];v=parseFloat(p);x=p.substr((v+"").length);w=m.charAt(1)==="=";if(w){g=parseInt(m.charAt(0)+"1",10);m=m.substr(2);g*=parseFloat(m);b=m.substr((g+"").length-(g<0?1:0))||""}else{g=parseFloat(m);b=m.substr((g+"").length)}if(b===""){b=s[i]||x}if(b!==x){T=te(e,"borderLeft",v,x);M=te(e,"borderTop",v,x);if(b==="%"){p=T/y*100+"%";d=M/_*100+"%"}else if(b==="em"){E=te(e,"borderLeft",1,"em");p=T/E+"em";d=M/E+"em"}else{p=T+"px";d=M+"px"}if(w){m=parseFloat(p)+g+b;f=parseFloat(d)+g+b}}n=Me(u,l[c],p+" "+d,m+" "+f,false,"0px",n)}return n},prefix:true,formatter:ge("0px 0px 0px 0px",false,true)});Ae("borderBottomLeftRadius,borderBottomRightRadius,borderTopLeftRadius,borderTopRightRadius",{defaultValue:"0px",parser:function(e,t,i,r,n,a){return Me(e.style,i,this.format(ee(e,i,o,false,"0px 0px")),this.format(t),false,"0px",n)},prefix:true,formatter:ge("0px 0px",false,true)});Ae("backgroundPosition",{defaultValue:"0 0",parser:function(e,t,i,r,n,a){var s="background-position",l=o||K(e,null),u=this.format((l?V?l.getPropertyValue(s+"-x")+" "+l.getPropertyValue(s+"-y"):l.getPropertyValue(s):e.currentStyle.backgroundPositionX+" "+e.currentStyle.backgroundPositionY)||"0 0"),h=this.format(t),c,f,d,p,m,v;if(u.indexOf("%")!==-1!==(h.indexOf("%")!==-1)&&h.split(",").length<2){v=ee(e,"backgroundImage").replace(w,"");if(v&&v!=="none"){c=u.split(" ");f=h.split(" ");U.setAttribute("src",v);d=2;while(--d>-1){u=c[d];p=u.indexOf("%")!==-1;if(p!==(f[d].indexOf("%")!==-1)){m=d===0?e.offsetWidth-U.width:e.offsetHeight-U.height;c[d]=p?parseFloat(u)/100*m+"px":parseFloat(u)/m*100+"%"}}u=c.join(" ")}}return this.parseComplex(e.style,u,h,n,a)},formatter:le});Ae("backgroundSize",{defaultValue:"0 0",formatter:function(e){e+="";return le(e.indexOf(" ")===-1?e+" "+e:e)}});Ae("perspective",{defaultValue:"0px",prefix:true});Ae("perspectiveOrigin",{defaultValue:"50% 50%",prefix:true});Ae("transformStyle",{prefix:true});Ae("backfaceVisibility",{prefix:true});Ae("userSelect",{prefix:true});Ae("margin",{parser:ye("marginTop,marginRight,marginBottom,marginLeft")});Ae("padding",{parser:ye("paddingTop,paddingRight,paddingBottom,paddingLeft")});Ae("clip",{defaultValue:"rect(0px,0px,0px,0px)",parser:function(e,t,i,r,n,a){var s,l,u;if(V<9){l=e.currentStyle;u=V<8?" ":",";s="rect("+l.clipTop+u+l.clipRight+u+l.clipBottom+u+l.clipLeft+")";t=this.format(t).split(",").join(u)}else{s=this.format(ee(e,this.p,o,false,this.dflt));t=this.format(t)}return this.parseComplex(e.style,s,t,n,a)}});Ae("textShadow",{defaultValue:"0px 0px 0px #999",color:true,multi:true});Ae("autoRound,strictUnits",{parser:function(e,t,i,r,n){return n}});Ae("border",{defaultValue:"0px solid #000",parser:function(e,t,i,r,n,a){var s=ee(e,"borderTopWidth",o,false,"0px"),l=this.format(t).split(" "),u=l[0].replace(m,"");if(u!=="px"){s=parseFloat(s)/te(e,"borderTopWidth",1,u)+u}return this.parseComplex(e.style,this.format(s+" "+ee(e,"borderTopStyle",o,false,"solid")+" "+ee(e,"borderTopColor",o,false,"#000")),l.join(" "),n,a)},color:true,formatter:function(e){var t=e.split(" ");return t[0]+" "+(t[1]||"solid")+" "+(e.match(ve)||["#000"])[0]}});Ae("borderWidth",{parser:ye("borderTopWidth,borderRightWidth,borderBottomWidth,borderLeftWidth")});Ae("float,cssFloat,styleFloat",{parser:function(e,t,i,r,n,a){var s=e.style,o="cssFloat"in s?"cssFloat":"styleFloat";return new we(s,o,0,0,n,-1,i,false,0,s[o],t)}});var $e=function(e){var t=this.t,i=t.filter||ee(this.data,"filter")||"",r=this.s+this.c*e|0,n;if(r===100){if(i.indexOf("atrix(")===-1&&i.indexOf("radient(")===-1&&i.indexOf("oader(")===-1){t.removeAttribute("filter");n=!ee(this.data,"filter")}else{t.filter=i.replace(y,"");n=true}}if(!n){if(this.xn1){t.filter=i=i||"alpha(opacity="+r+")"}if(i.indexOf("pacity")===-1){if(r!==0||!this.xn1){t.filter=i+" alpha(opacity="+r+")"}}else{t.filter=i.replace(v,"opacity="+r)}}};Ae("opacity,alpha,autoAlpha",{defaultValue:"1",parser:function(e,t,i,r,n,a){var s=parseFloat(ee(e,"opacity",o,false,"1")),l=e.style,u=i==="autoAlpha";if(typeof t==="string"&&t.charAt(1)==="="){t=(t.charAt(0)==="-"?-1:1)*parseFloat(t.substr(2))+s}if(u&&s===1&&ee(e,"visibility",o)==="hidden"&&t!==0){s=0}if(W){n=new we(l,"opacity",s,t-s,n)}else{n=new we(l,"opacity",s*100,(t-s)*100,n);n.xn1=u?1:0;l.zoom=1;n.type=2;n.b="alpha(opacity="+n.s+")";n.e="alpha(opacity="+(n.s+n.c)+")";n.data=e;n.plugin=a;n.setRatio=$e}if(u){n=new we(l,"visibility",0,0,n,-1,null,false,0,s!==0?"inherit":"hidden",t===0?"hidden":"inherit");n.xs0="inherit";r._overwriteProps.push(n.n);r._overwriteProps.push(i)}return n}});var Ze=function(e,t){if(t){if(e.removeProperty){if(t.substr(0,2)==="ms"||t.substr(0,6)==="webkit"){t="-"+t}e.removeProperty(t.replace(b,"-$1").toLowerCase())}else{e.removeAttribute(t)}}},Je=function(e){this.t._gsClassPT=this;if(e===1||e===0){this.t.setAttribute("class",e===0?this.b:this.e);var t=this.data,i=this.t.style;while(t){if(!t.v){Ze(i,t.p)}else{i[t.p]=t.v}t=t._next}if(e===1&&this.t._gsClassPT===this){this.t._gsClassPT=null}}else if(this.t.getAttribute("class")!==this.e){this.t.setAttribute("class",this.e)}};Ae("className",{parser:function(e,t,i,r,n,s,l){var u=e.getAttribute("class")||"",h=e.style.cssText,c,f,d,p,m;n=r._classNamePT=new we(e,i,0,0,n,2);n.setRatio=Je;n.pr=-11;a=true;n.b=u;f=re(e,o);d=e._gsClassPT;if(d){p={};m=d.data;while(m){p[m.p]=1;m=m._next}d.setRatio(1)}e._gsClassPT=n;n.e=t.charAt(1)!=="="?t:u.replace(new RegExp("(?:\\s|^)"+t.substr(2)+"(?![\\w-])"),"")+(t.charAt(0)==="+"?" "+t.substr(2):"");e.setAttribute("class",n.e);c=ne(e,f,re(e),l,p);e.setAttribute("class",u);n.data=c.firstMPT;e.style.cssText=h;n=n.xfirst=r.parse(e,c.difs,n,s);return n}});var Qe=function(e){if(e===1||e===0)if(this.data._totalTime===this.data._totalDuration&&this.data.data!=="isFromStart"){var t=this.t.style,i=u.transform.parse,r,n,a,s,o;if(this.e==="all"){t.cssText="";s=true}else{r=this.e.split(" ").join("").split(",");a=r.length;while(--a>-1){n=r[a];if(u[n]){if(u[n].parse===i){s=true}else{n=n==="transformOrigin"?Oe:u[n].p}}Ze(t,n)}}if(s){Ze(t,Le);o=this.t._gsTransform;if(o){if(o.svg){this.t.removeAttribute("data-svg-origin");this.t.removeAttribute("transform")}delete this.t._gsTransform}}}};Ae("clearProps",{parser:function(e,t,i,r,n){n=new we(e,i,0,0,n,2);n.setRatio=Qe;n.e=t;n.pr=-10;n.data=r._tween;a=true;return n}});h="bezier,throwProps,physicsProps,physics2D".split(",");Ee=h.length;while(Ee--){Pe(h[Ee])}h=r.prototype;h._firstPT=h._lastParsedTransform=h._transform=null;h._onInitTween=function(e,t,i,n){if(!e.nodeType){return false}this._target=q=e;this._tween=i;this._vars=t;$=n;B=t.autoRound;a=false;s=t.suffixMap||r.suffixMap;o=K(e,"");l=this._overwriteProps;var h=e.style,c,f,d,p,m,v,y,_,b;if(z)if(h.zIndex===""){c=ee(e,"zIndex",o);if(c==="auto"||c===""){this._addLazySet(h,"zIndex",0)}}if(typeof t==="string"){p=h.cssText;c=re(e,o);h.cssText=p+";"+t;c=ne(e,c,re(e)).difs;if(!W&&g.test(t)){c.opacity=parseFloat(RegExp.$1)}t=c;h.cssText=p}if(t.className){this._firstPT=f=u.className.parse(e,t.className,"className",this,null,null,t)}else{this._firstPT=f=this.parse(e,t,null)}if(this._transformType){b=this._transformType===3;if(!Le){h.zoom=1}else if(j){z=true;if(h.zIndex===""){y=ee(e,"zIndex",o);if(y==="auto"||y===""){this._addLazySet(h,"zIndex",0)}}if(H){this._addLazySet(h,"WebkitBackfaceVisibility",this._vars.WebkitBackfaceVisibility||(b?"visible":"hidden"))}}d=f;while(d&&d._next){d=d._next}_=new we(e,"transform",0,0,null,2);this._linkCSSP(_,null,d);_.setRatio=Le?qe:Ye;_.data=this._transform||Xe(e,o,true);_.tween=i;_.pr=-1;l.pop()}if(a){while(f){v=f._next;d=p;while(d&&d.pr>f.pr){d=d._next}if(f._prev=d?d._prev:m){f._prev._next=f}else{p=f}if(f._next=d){d._prev=f}else{m=f}f=v}this._firstPT=p}return true};h.parse=function(e,t,i,r){var n=e.style,a,l,h,c,f,d,p,v,g,y;for(a in t){d=t[a];if(typeof d==="function"){d=d($,q)}l=u[a];if(l){i=l.parse(e,d,a,this,i,r,t)}else if(a.substr(0,2)==="--"){this._tween._propLookup[a]=this._addTween.call(this._tween,e.style,"setProperty",K(e).getPropertyValue(a)+"",d+"",a,false,a);continue}else{f=ee(e,a,o)+"";g=typeof d==="string";if(a==="color"||a==="fill"||a==="stroke"||a.indexOf("Color")!==-1||g&&_.test(d)){if(!g){d=pe(d);d=(d.length>3?"rgba(":"rgb(")+d.join(",")+")"}i=Me(n,a,f,d,true,"transparent",i,0,r)}else if(g&&P.test(d)){i=Me(n,a,f,d,true,null,i,0,r)}else{h=parseFloat(f);p=h||h===0?f.substr((h+"").length):"";if(f===""||f==="auto"){if(a==="width"||a==="height"){h=oe(e,a,o);p="px"}else if(a==="left"||a==="top"){h=ie(e,a,o);p="px"}else{h=a!=="opacity"?0:1;p=""}}y=g&&d.charAt(1)==="=";if(y){c=parseInt(d.charAt(0)+"1",10);d=d.substr(2);c*=parseFloat(d);v=d.replace(m,"")}else{c=parseFloat(d);v=g?d.replace(m,""):""}if(v===""){v=a in s?s[a]:p}d=c||c===0?(y?c+h:c)+v:t[a];if(p!==v)if(v!==""||a==="lineHeight")if(c||c===0)if(h){h=te(e,a,h,p);if(v==="%"){h/=te(e,a,100,"%")/100;if(t.strictUnits!==true){f=h+"%"}}else if(v==="em"||v==="rem"||v==="vw"||v==="vh"){h/=te(e,a,1,v)}else if(v!=="px"){c=te(e,a,c,v);v="px"}if(y)if(c||c===0){d=c+h+v}}if(y){c+=h}if((h||h===0)&&(c||c===0)){i=new we(n,a,h,c-h,i,0,a,B!==false&&(v==="px"||a==="zIndex"),0,f,d);i.xs0=v}else if(n[a]===undefined||!d&&(d+""==="NaN"||d==null)){Y("invalid "+a+" tween value: "+t[a])}else{i=new we(n,a,c||h||0,0,i,-1,a,false,0,f,d);i.xs0=d==="none"&&(a==="display"||a.indexOf("Style")!==-1)?f:d}}}if(r)if(i&&!i.plugin){i.plugin=r}}return i};h.setRatio=function(e){var t=this._firstPT,i=1e-6,r,n,a;if(e===1&&(this._tween._time===this._tween._duration||this._tween._time===0)){while(t){if(t.type!==2){if(t.r&&t.type!==-1){r=Math.round(t.s+t.c);if(!t.type){t.t[t.p]=r+t.xs0}else if(t.type===1){a=t.l;n=t.xs0+r+t.xs1;for(a=1;a<t.l;a++){n+=t["xn"+a]+t["xs"+(a+1)]}t.t[t.p]=n}}else{t.t[t.p]=t.e}}else{t.setRatio(e)}t=t._next}}else if(e||!(this._tween._time===this._tween._duration||this._tween._time===0)||this._tween._rawPrevTime===-1e-6){while(t){r=t.c*e+t.s;if(t.r){r=Math.round(r)}else if(r<i)if(r>-i){r=0}if(!t.type){t.t[t.p]=r+t.xs0}else if(t.type===1){a=t.l;if(a===2){t.t[t.p]=t.xs0+r+t.xs1+t.xn1+t.xs2}else if(a===3){t.t[t.p]=t.xs0+r+t.xs1+t.xn1+t.xs2+t.xn2+t.xs3}else if(a===4){t.t[t.p]=t.xs0+r+t.xs1+t.xn1+t.xs2+t.xn2+t.xs3+t.xn3+t.xs4}else if(a===5){t.t[t.p]=t.xs0+r+t.xs1+t.xn1+t.xs2+t.xn2+t.xs3+t.xn3+t.xs4+t.xn4+t.xs5}else{n=t.xs0+r+t.xs1;for(a=1;a<t.l;a++){n+=t["xn"+a]+t["xs"+(a+1)]}t.t[t.p]=n}}else if(t.type===-1){t.t[t.p]=t.xs0}else if(t.setRatio){t.setRatio(e)}t=t._next}}else{while(t){if(t.type!==2){t.t[t.p]=t.b}else{t.setRatio(e)}t=t._next}}};h._enableTransforms=function(e){this._transform=this._transform||Xe(this._target,o,true);this._transformType=!(this._transform.svg&&Ue)&&(e||this._transformType===3)?3:2};var Ke=function(e){this.t[this.p]=this.e;this.data._linkCSSP(this,this._next,null,true)};h._addLazySet=function(e,t,i){var r=this._firstPT=new we(e,t,0,0,this._firstPT,2);r.e=i;r.setRatio=Ke;r.data=this};h._linkCSSP=function(e,t,i,r){if(e){if(t){t._prev=e}if(e._next){e._next._prev=e._prev}if(e._prev){e._prev._next=e._next}else if(this._firstPT===e){this._firstPT=e._next;r=true}if(i){i._next=e}else if(!r&&this._firstPT===null){this._firstPT=e}e._next=t;e._prev=i}return e};h._mod=function(e){var t=this._firstPT;while(t){if(typeof e[t.p]==="function"&&e[t.p]===Math.round){t.r=1}t=t._next}};h._kill=function(t){var i=t,r,n,a;if(t.autoAlpha||t.alpha){i={};for(n in t){i[n]=t[n]}i.opacity=1;if(i.autoAlpha){i.visibility=1}}if(t.className&&(r=this._classNamePT)){a=r.xfirst;if(a&&a._prev){this._linkCSSP(a._prev,r._next,a._prev._prev)}else if(a===this._firstPT){this._firstPT=r._next}if(r._next){this._linkCSSP(r._next,r._next._next,a._prev)}this._classNamePT=null}r=this._firstPT;while(r){if(r.plugin&&r.plugin!==n&&r.plugin._kill){r.plugin._kill(t);n=r.plugin}r=r._next}return e.prototype._kill.call(this,i)};var et=function(e,t,i){var r,n,a,s;if(e.slice){n=e.length;while(--n>-1){et(e[n],t,i)}return}r=e.childNodes;n=r.length;while(--n>-1){a=r[n];s=a.type;if(a.style){t.push(re(a));if(i){i.push(a)}}if((s===1||s===9||s===11)&&a.childNodes.length){et(a,t,i)}}};r.cascadeTo=function(e,i,r){var n=t.to(e,i,r),a=[n],s=[],o=[],l=[],u=t._internals.reservedProps,h,c,f,d;e=n._targets||n.target;et(e,s,l);n.render(i,true,true);et(e,o);n.render(0,true,true);n._enabled(true);h=l.length;while(--h>-1){c=ne(l[h],s[h],o[h]);if(c.firstMPT){c=c.difs;for(f in r){if(u[f]){c[f]=r[f]}}d={};for(f in c){d[f]=s[h][f]}a.push(t.fromTo(l[h],i,d,c))}}return a};e.activate([r]);return r},true);(function(){var e=i._gsDefine.plugin({propName:"roundProps",version:"1.6.0",priority:-1,API:2,init:function(e,t,i){this._tween=i;return true}}),t=function(e){while(e){if(!e.f&&!e.blob){e.m=Math.round}e=e._next}},r=e.prototype;r._onInitAllProps=function(){var e=this._tween,i=e.vars.roundProps.join?e.vars.roundProps:e.vars.roundProps.split(","),r=i.length,n={},a=e._propLookup.roundProps,s,o,l;while(--r>-1){n[i[r]]=Math.round}r=i.length;while(--r>-1){s=i[r];o=e._firstPT;while(o){l=o._next;if(o.pg){o.t._mod(n)}else if(o.n===s){if(o.f===2&&o.t){t(o.t._firstPT)}else{this._add(o.t,s,o.s,o.c);if(l){l._prev=o._prev}if(o._prev){o._prev._next=l}else if(e._firstPT===o){e._firstPT=l}o._next=o._prev=null;e._propLookup[s]=a}}o=l}}return false};r._add=function(e,t,i,r){this._addTween(e,t,i,i+r,t,Math.round);this._overwriteProps.push(t)}})();(function(){i._gsDefine.plugin({propName:"attr",API:2,version:"0.6.1",init:function(e,t,i,r){var n,a;if(typeof e.setAttribute!=="function"){return false}for(n in t){a=t[n];if(typeof a==="function"){a=a(r,e)}this._addTween(e,"setAttribute",e.getAttribute(n)+"",a+"",n,false,n);this._overwriteProps.push(n)}return true}})})();i._gsDefine.plugin({propName:"directionalRotation",version:"0.3.1",API:2,init:function(e,t,i,r){if(typeof t!=="object"){t={rotation:t}}this.finals={};var n=t.useRadians===true?Math.PI*2:360,a=1e-6,s,o,l,u,h,c;for(s in t){if(s!=="useRadians"){u=t[s];if(typeof u==="function"){u=u(r,e)}c=(u+"").split("_");o=c[0];l=parseFloat(typeof e[s]!=="function"?e[s]:e[s.indexOf("set")||typeof e["get"+s.substr(3)]!=="function"?s:"get"+s.substr(3)]());u=this.finals[s]=typeof o==="string"&&o.charAt(1)==="="?l+parseInt(o.charAt(0)+"1",10)*Number(o.substr(2)):Number(o)||0;h=u-l;if(c.length){o=c.join("_");if(o.indexOf("short")!==-1){h=h%n;if(h!==h%(n/2)){h=h<0?h+n:h-n}}if(o.indexOf("_cw")!==-1&&h<0){h=(h+n*9999999999)%n-(h/n|0)*n}else if(o.indexOf("ccw")!==-1&&h>0){h=(h-n*9999999999)%n-(h/n|0)*n}}if(h>a||h<-a){this._addTween(e,s,l,l+h,s);this._overwriteProps.push(s)}}}return true},set:function(e){var t;if(e!==1){this._super.setRatio.call(this,e)}else{t=this._firstPT;while(t){if(t.f){t.t[t.p](this.finals[t.p])}else{t.t[t.p]=this.finals[t.p]}t=t._next}}}})._autoCSS=true;i._gsDefine("easing.Back",["easing.Ease"],function(e){var t=i.GreenSockGlobals||i,r=t.com.greensock,n=Math.PI*2,a=Math.PI/2,s=r._class,o=function(t,i){var r=s("easing."+t,function(){},true),n=r.prototype=new e;n.constructor=r;n.getRatio=i;return r},l=e.register||function(){},u=function(e,t,i,r,n){var a=s("easing."+e,{easeOut:new t,easeIn:new i,easeInOut:new r},true);l(a,e);return a},h=function(e,t,i){this.t=e;this.v=t;if(i){this.next=i;i.prev=this;this.c=i.v-t;this.gap=i.t-e}},c=function(t,i){var r=s("easing."+t,function(e){this._p1=e||e===0?e:1.70158;this._p2=this._p1*1.525},true),n=r.prototype=new e;n.constructor=r;n.getRatio=i;n.config=function(e){return new r(e)};return r},f=u("Back",c("BackOut",function(e){return(e=e-1)*e*((this._p1+1)*e+this._p1)+1}),c("BackIn",function(e){return e*e*((this._p1+1)*e-this._p1)}),c("BackInOut",function(e){return(e*=2)<1?.5*e*e*((this._p2+1)*e-this._p2):.5*((e-=2)*e*((this._p2+1)*e+this._p2)+2)})),d=s("easing.SlowMo",function(e,t,i){t=t||t===0?t:.7;if(e==null){e=.7}else if(e>1){e=1}this._p=e!==1?t:0;this._p1=(1-e)/2;this._p2=e;this._p3=this._p1+this._p2;this._calcEnd=i===true},true),p=d.prototype=new e,m,v,g;p.constructor=d;p.getRatio=function(e){var t=e+(.5-e)*this._p;if(e<this._p1){return this._calcEnd?1-(e=1-e/this._p1)*e:t-(e=1-e/this._p1)*e*e*e*t}else if(e>this._p3){return this._calcEnd?e===1?0:1-(e=(e-this._p3)/this._p1)*e:t+(e-t)*(e=(e-this._p3)/this._p1)*e*e*e}return this._calcEnd?1:t};d.ease=new d(.7,.7);p.config=d.config=function(e,t,i){return new d(e,t,i)};m=s("easing.SteppedEase",function(e,t){e=e||1;this._p1=1/e;this._p2=e+(t?0:1);this._p3=t?1:0},true);p=m.prototype=new e;p.constructor=m;p.getRatio=function(e){if(e<0){e=0}else if(e>=1){e=.999999999}return((this._p2*e|0)+this._p3)*this._p1};p.config=m.config=function(e,t){return new m(e,t)};v=s("easing.RoughEase",function(t){t=t||{};var i=t.taper||"none",r=[],n=0,a=(t.points||20)|0,s=a,o=t.randomize!==false,l=t.clamp===true,u=t.template instanceof e?t.template:null,c=typeof t.strength==="number"?t.strength*.4:.4,f,d,p,m,v,g;while(--s>-1){f=o?Math.random():1/a*s;d=u?u.getRatio(f):f;if(i==="none"){p=c}else if(i==="out"){m=1-f;p=m*m*c}else if(i==="in"){p=f*f*c}else if(f<.5){m=f*2;p=m*m*.5*c}else{m=(1-f)*2;p=m*m*.5*c}if(o){d+=Math.random()*p-p*.5}else if(s%2){d+=p*.5}else{d-=p*.5}if(l){if(d>1){d=1}else if(d<0){d=0}}r[n++]={x:f,y:d}}r.sort(function(e,t){return e.x-t.x});g=new h(1,1,null);s=a;while(--s>-1){v=r[s];g=new h(v.x,v.y,g)}this._prev=new h(0,0,g.t!==0?g:g.next)},true);p=v.prototype=new e;p.constructor=v;p.getRatio=function(e){var t=this._prev;if(e>t.t){while(t.next&&e>=t.t){t=t.next}t=t.prev}else{while(t.prev&&e<=t.t){t=t.prev}}this._prev=t;return t.v+(e-t.t)/t.gap*t.c};p.config=function(e){return new v(e)};v.ease=new v;u("Bounce",o("BounceOut",function(e){if(e<1/2.75){return 7.5625*e*e}else if(e<2/2.75){return 7.5625*(e-=1.5/2.75)*e+.75}else if(e<2.5/2.75){return 7.5625*(e-=2.25/2.75)*e+.9375}return 7.5625*(e-=2.625/2.75)*e+.984375}),o("BounceIn",function(e){if((e=1-e)<1/2.75){return 1-7.5625*e*e}else if(e<2/2.75){return 1-(7.5625*(e-=1.5/2.75)*e+.75)}else if(e<2.5/2.75){return 1-(7.5625*(e-=2.25/2.75)*e+.9375)}return 1-(7.5625*(e-=2.625/2.75)*e+.984375)}),o("BounceInOut",function(e){var t=e<.5;if(t){e=1-e*2}else{e=e*2-1}if(e<1/2.75){e=7.5625*e*e}else if(e<2/2.75){e=7.5625*(e-=1.5/2.75)*e+.75}else if(e<2.5/2.75){e=7.5625*(e-=2.25/2.75)*e+.9375}else{e=7.5625*(e-=2.625/2.75)*e+.984375}return t?(1-e)*.5:e*.5+.5}));u("Circ",o("CircOut",function(e){return Math.sqrt(1-(e=e-1)*e)}),o("CircIn",function(e){return-(Math.sqrt(1-e*e)-1)}),o("CircInOut",function(e){return(e*=2)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)}));g=function(t,i,r){var a=s("easing."+t,function(e,t){this._p1=e>=1?e:1;this._p2=(t||r)/(e<1?e:1);this._p3=this._p2/n*(Math.asin(1/this._p1)||0);this._p2=n/this._p2},true),o=a.prototype=new e;o.constructor=a;o.getRatio=i;o.config=function(e,t){return new a(e,t)};return a};u("Elastic",g("ElasticOut",function(e){return this._p1*Math.pow(2,-10*e)*Math.sin((e-this._p3)*this._p2)+1},.3),g("ElasticIn",function(e){return-(this._p1*Math.pow(2,10*(e-=1))*Math.sin((e-this._p3)*this._p2))},.3),g("ElasticInOut",function(e){return(e*=2)<1?-.5*(this._p1*Math.pow(2,10*(e-=1))*Math.sin((e-this._p3)*this._p2)):this._p1*Math.pow(2,-10*(e-=1))*Math.sin((e-this._p3)*this._p2)*.5+1},.45));u("Expo",o("ExpoOut",function(e){return 1-Math.pow(2,-10*e)}),o("ExpoIn",function(e){return Math.pow(2,10*(e-1))-.001}),o("ExpoInOut",function(e){return(e*=2)<1?.5*Math.pow(2,10*(e-1)):.5*(2-Math.pow(2,-10*(e-1)))}));u("Sine",o("SineOut",function(e){return Math.sin(e*a)}),o("SineIn",function(e){return-Math.cos(e*a)+1}),o("SineInOut",function(e){return-.5*(Math.cos(Math.PI*e)-1)}));s("easing.EaseLookup",{find:function(t){return e.map[t]}},true);l(t.SlowMo,"SlowMo","ease,");l(v,"RoughEase","ease,");l(m,"SteppedEase","ease,");return f},true)});if(i._gsDefine){i._gsQueue.pop()()}(function(e,i){"use strict";var r={},n=e.document,a=e.GreenSockGlobals=e.GreenSockGlobals||e;if(a.TweenLite){return}var s=function(e){var t=e.split("."),i=a,r;for(r=0;r<t.length;r++){i[t[r]]=i=i[t[r]]||{}}return i},o=s("com.greensock"),l=1e-10,u=function(e){var t=[],i=e.length,r;for(r=0;r!==i;t.push(e[r++])){}return t},h=function(){},c=function(){var e=Object.prototype.toString,t=e.call([]);return function(i){return i!=null&&(i instanceof Array||typeof i==="object"&&!!i.push&&e.call(i)===t)}}(),f,d,p,m,v,g={},y=function(n,o,l,u){this.sc=g[n]?g[n].sc:[];g[n]=this;this.gsClass=null;this.func=l;var h=[];this.check=function(c){var f=o.length,d=f,p,m,v,_;while(--f>-1){if((p=g[o[f]]||new y(o[f],[])).gsClass){h[f]=p.gsClass;d--}else if(c){p.sc.push(this)}}if(d===0&&l){m=("com.greensock."+n).split(".");v=m.pop();_=s(m.join("."))[v]=this.gsClass=l.apply(l,h);if(u){a[v]=r[v]=_;if(typeof t!=="undefined"&&t.exports){if(n===i){t.exports=r[i]=_;for(f in r){_[f]=r[f]}}else if(r[i]){r[i][v]=_}}else if(typeof define==="function"&&define.amd){define((e.GreenSockAMDPath?e.GreenSockAMDPath+"/":"")+n.split(".").pop(),[],function(){return _})}}for(f=0;f<this.sc.length;f++){this.sc[f].check()}}};this.check(true)},_=e._gsDefine=function(e,t,i,r){return new y(e,t,i,r)},b=o._class=function(e,t,i){t=t||function(){};_(e,[],function(){return t},i);return t};_.globals=a;var x=[0,0,1,1],w=b("easing.Ease",function(e,t,i,r){this._func=e;this._type=i||0;this._power=r||0;this._params=t?x.concat(t):x},true),T=w.map={},M=w.register=function(e,t,i,r){var n=t.split(","),a=n.length,s=(i||"easeIn,easeOut,easeInOut").split(","),l,u,h,c;while(--a>-1){u=n[a];l=r?b("easing."+u,null,true):o.easing[u]||{};h=s.length;while(--h>-1){c=s[h];T[u+"."+c]=T[c+u]=l[c]=e.getRatio?e:e[c]||new e}}};p=w.prototype;p._calcEnd=false;p.getRatio=function(e){if(this._func){this._params[0]=e;return this._func.apply(null,this._params)}var t=this._type,i=this._power,r=t===1?1-e:t===2?e:e<.5?e*2:(1-e)*2;if(i===1){r*=r}else if(i===2){r*=r*r}else if(i===3){r*=r*r*r}else if(i===4){r*=r*r*r*r}return t===1?1-r:t===2?r:e<.5?r/2:1-r/2};f=["Linear","Quad","Cubic","Quart","Quint,Strong"];d=f.length;while(--d>-1){p=f[d]+",Power"+d;M(new w(null,null,1,d),p,"easeOut",true);M(new w(null,null,2,d),p,"easeIn"+(d===0?",easeNone":""));M(new w(null,null,3,d),p,"easeInOut")}T.linear=o.easing.Linear.easeIn;T.swing=o.easing.Quad.easeInOut;var E=b("events.EventDispatcher",function(e){this._listeners={};this._eventTarget=e||this});p=E.prototype;p.addEventListener=function(e,t,i,r,n){n=n||0;var a=this._listeners[e],s=0,o,l;if(this===m&&!v){m.wake()}if(a==null){this._listeners[e]=a=[]}l=a.length;while(--l>-1){o=a[l];if(o.c===t&&o.s===i){a.splice(l,1)}else if(s===0&&o.pr<n){s=l+1}}a.splice(s,0,{c:t,s:i,up:r,pr:n})};p.removeEventListener=function(e,t){var i=this._listeners[e],r;if(i){r=i.length;while(--r>-1){if(i[r].c===t){i.splice(r,1);return}}}};p.dispatchEvent=function(e){var t=this._listeners[e],i,r,n;if(t){i=t.length;if(i>1){t=t.slice(0)}r=this._eventTarget;while(--i>-1){n=t[i];if(n){if(n.up){n.c.call(n.s||r,{type:e,target:r})}else{n.c.call(n.s||r)}}}}};var S=e.requestAnimationFrame,A=e.cancelAnimationFrame,P=Date.now||function(){return(new Date).getTime()},R=P();f=["ms","moz","webkit","o"];d=f.length;while(--d>-1&&!S){S=e[f[d]+"RequestAnimationFrame"];A=e[f[d]+"CancelAnimationFrame"]||e[f[d]+"CancelRequestAnimationFrame"]}b("Ticker",function(e,t){var i=this,r=P(),a=t!==false&&S?"auto":false,s=500,o=33,u="tick",c,f,d,p,g,y=function(e){var t=P()-R,n,a;if(t>s){r+=t-o}R+=t;i.time=(R-r)/1e3;n=i.time-g;if(!c||n>0||e===true){i.frame++;g+=n+(n>=p?.004:p-n);a=true}if(e!==true){d=f(y)}if(a){i.dispatchEvent(u)}};E.call(i);i.time=i.frame=0;i.tick=function(){y(true)};i.lagSmoothing=function(e,t){if(!arguments.length){return s<1/l}s=e||1/l;o=Math.min(t,s,0)};i.sleep=function(){if(d==null){return}if(!a||!A){clearTimeout(d)}else{A(d)}f=h;d=null;if(i===m){v=false}};i.wake=function(e){if(d!==null){i.sleep()}else if(e){r+=-R+(R=P())}else if(i.frame>10){R=P()-s+5}f=c===0?h:!a||!S?function(e){return setTimeout(e,(g-i.time)*1e3+1|0)}:S;if(i===m){v=true}y(2)};i.fps=function(e){if(!arguments.length){return c}c=e;p=1/(c||60);g=this.time+p;i.wake()};i.useRAF=function(e){if(!arguments.length){return a}i.sleep();a=e;i.fps(c)};i.fps(e);setTimeout(function(){if(a==="auto"&&i.frame<5&&n.visibilityState!=="hidden"){i.useRAF(false)}},1500)});p=o.Ticker.prototype=new o.events.EventDispatcher;p.constructor=o.Ticker;var L=b("core.Animation",function(e,t){this.vars=t=t||{};this._duration=this._totalDuration=e||0;this._delay=Number(t.delay)||0;this._timeScale=1;this._active=t.immediateRender===true;this.data=t.data;this._reversed=t.reversed===true;if(!Z){return}if(!v){m.wake()}var i=this.vars.useFrames?$:Z;i.add(this,i._time);if(this.vars.paused){this.paused(true)}});m=L.ticker=new o.Ticker;p=L.prototype;p._dirty=p._gc=p._initted=p._paused=false;p._totalTime=p._time=0;p._rawPrevTime=-1;p._next=p._last=p._onUpdate=p._timeline=p.timeline=null;p._paused=false;var C=function(){if(v&&P()-R>2e3&&(n.visibilityState!=="hidden"||!m.lagSmoothing())){m.wake()}var e=setTimeout(C,2e3);if(e.unref){e.unref()}};C();p.play=function(e,t){if(e!=null){this.seek(e,t)}return this.reversed(false).paused(false)};p.pause=function(e,t){if(e!=null){this.seek(e,t)}return this.paused(true)};p.resume=function(e,t){if(e!=null){this.seek(e,t)}return this.paused(false)};p.seek=function(e,t){return this.totalTime(Number(e),t!==false)};p.restart=function(e,t){return this.reversed(false).paused(false).totalTime(e?-this._delay:0,t!==false,true)};p.reverse=function(e,t){if(e!=null){this.seek(e||this.totalDuration(),t)}return this.reversed(true).paused(false)};p.render=function(e,t,i){};p.invalidate=function(){this._time=this._totalTime=0;this._initted=this._gc=false;this._rawPrevTime=-1;if(this._gc||!this.timeline){this._enabled(true)}return this};p.isActive=function(){var e=this._timeline,t=this._startTime,i;return!e||!this._gc&&!this._paused&&e.isActive()&&(i=e.rawTime(true))>=t&&i<t+this.totalDuration()/this._timeScale-1e-7};p._enabled=function(e,t){if(!v){m.wake()}this._gc=!e;this._active=this.isActive();if(t!==true){if(e&&!this.timeline){this._timeline.add(this,this._startTime-this._delay)}else if(!e&&this.timeline){this._timeline._remove(this,true)}}return false};p._kill=function(e,t){return this._enabled(false,false)};p.kill=function(e,t){this._kill(e,t);return this};p._uncache=function(e){var t=e?this:this.timeline;while(t){t._dirty=true;t=t.timeline}return this};p._swapSelfInParams=function(e){var t=e.length,i=e.concat();while(--t>-1){if(e[t]==="{self}"){i[t]=this}}return i};p._callback=function(e){var t=this.vars,i=t[e],r=t[e+"Params"],n=t[e+"Scope"]||t.callbackScope||this,a=r?r.length:0;switch(a){case 0:i.call(n);break;case 1:i.call(n,r[0]);break;case 2:
i.call(n,r[0],r[1]);break;default:i.apply(n,r)}};p.eventCallback=function(e,t,i,r){if((e||"").substr(0,2)==="on"){var n=this.vars;if(arguments.length===1){return n[e]}if(t==null){delete n[e]}else{n[e]=t;n[e+"Params"]=c(i)&&i.join("").indexOf("{self}")!==-1?this._swapSelfInParams(i):i;n[e+"Scope"]=r}if(e==="onUpdate"){this._onUpdate=t}}return this};p.delay=function(e){if(!arguments.length){return this._delay}if(this._timeline.smoothChildTiming){this.startTime(this._startTime+e-this._delay)}this._delay=e;return this};p.duration=function(e){if(!arguments.length){this._dirty=false;return this._duration}this._duration=this._totalDuration=e;this._uncache(true);if(this._timeline.smoothChildTiming)if(this._time>0)if(this._time<this._duration)if(e!==0){this.totalTime(this._totalTime*(e/this._duration),true)}return this};p.totalDuration=function(e){this._dirty=false;return!arguments.length?this._totalDuration:this.duration(e)};p.time=function(e,t){if(!arguments.length){return this._time}if(this._dirty){this.totalDuration()}return this.totalTime(e>this._duration?this._duration:e,t)};p.totalTime=function(e,t,i){if(!v){m.wake()}if(!arguments.length){return this._totalTime}if(this._timeline){if(e<0&&!i){e+=this.totalDuration()}if(this._timeline.smoothChildTiming){if(this._dirty){this.totalDuration()}var r=this._totalDuration,n=this._timeline;if(e>r&&!i){e=r}this._startTime=(this._paused?this._pauseTime:n._time)-(!this._reversed?e:r-e)/this._timeScale;if(!n._dirty){this._uncache(false)}if(n._timeline){while(n._timeline){if(n._timeline._time!==(n._startTime+n._totalTime)/n._timeScale){n.totalTime(n._totalTime,true)}n=n._timeline}}}if(this._gc){this._enabled(true,false)}if(this._totalTime!==e||this._duration===0){if(U.length){Q()}this.render(e,t,false);if(U.length){Q()}}}return this};p.progress=p.totalProgress=function(e,t){var i=this.duration();return!arguments.length?i?this._time/i:this.ratio:this.totalTime(i*e,t)};p.startTime=function(e){if(!arguments.length){return this._startTime}if(e!==this._startTime){this._startTime=e;if(this.timeline)if(this.timeline._sortChildren){this.timeline.add(this,e-this._delay)}}return this};p.endTime=function(e){return this._startTime+(e!=false?this.totalDuration():this.duration())/this._timeScale};p.timeScale=function(e){if(!arguments.length){return this._timeScale}var t,i;e=e||l;if(this._timeline&&this._timeline.smoothChildTiming){t=this._pauseTime;i=t||t===0?t:this._timeline.totalTime();this._startTime=i-(i-this._startTime)*this._timeScale/e}this._timeScale=e;i=this.timeline;while(i&&i.timeline){i._dirty=true;i.totalDuration();i=i.timeline}return this};p.reversed=function(e){if(!arguments.length){return this._reversed}if(e!=this._reversed){this._reversed=e;this.totalTime(this._timeline&&!this._timeline.smoothChildTiming?this.totalDuration()-this._totalTime:this._totalTime,true)}return this};p.paused=function(e){if(!arguments.length){return this._paused}var t=this._timeline,i,r;if(e!=this._paused)if(t){if(!v&&!e){m.wake()}i=t.rawTime();r=i-this._pauseTime;if(!e&&t.smoothChildTiming){this._startTime+=r;this._uncache(false)}this._pauseTime=e?i:null;this._paused=e;this._active=this.isActive();if(!e&&r!==0&&this._initted&&this.duration()){i=t.smoothChildTiming?this._totalTime:(i-this._startTime)/this._timeScale;this.render(i,i===this._totalTime,true)}}if(this._gc&&!e){this._enabled(true,false)}return this};var O=b("core.SimpleTimeline",function(e){L.call(this,0,e);this.autoRemoveChildren=this.smoothChildTiming=true});p=O.prototype=new L;p.constructor=O;p.kill()._gc=false;p._first=p._last=p._recent=null;p._sortChildren=false;p.add=p.insert=function(e,t,i,r){var n,a;e._startTime=Number(t||0)+e._delay;if(e._paused)if(this!==e._timeline){e._pauseTime=e._startTime+(this.rawTime()-e._startTime)/e._timeScale}if(e.timeline){e.timeline._remove(e,true)}e.timeline=e._timeline=this;if(e._gc){e._enabled(true,true)}n=this._last;if(this._sortChildren){a=e._startTime;while(n&&n._startTime>a){n=n._prev}}if(n){e._next=n._next;n._next=e}else{e._next=this._first;this._first=e}if(e._next){e._next._prev=e}else{this._last=e}e._prev=n;this._recent=e;if(this._timeline){this._uncache(true)}return this};p._remove=function(e,t){if(e.timeline===this){if(!t){e._enabled(false,true)}if(e._prev){e._prev._next=e._next}else if(this._first===e){this._first=e._next}if(e._next){e._next._prev=e._prev}else if(this._last===e){this._last=e._prev}e._next=e._prev=e.timeline=null;if(e===this._recent){this._recent=this._last}if(this._timeline){this._uncache(true)}}return this};p.render=function(e,t,i){var r=this._first,n;this._totalTime=this._time=this._rawPrevTime=e;while(r){n=r._next;if(r._active||e>=r._startTime&&!r._paused&&!r._gc){if(!r._reversed){r.render((e-r._startTime)*r._timeScale,t,i)}else{r.render((!r._dirty?r._totalDuration:r.totalDuration())-(e-r._startTime)*r._timeScale,t,i)}}r=n}};p.rawTime=function(){if(!v){m.wake()}return this._totalTime};var I=b("TweenLite",function(t,i,r){L.call(this,i,r);this.render=I.prototype.render;if(t==null){throw"Cannot tween a null target."}this.target=t=typeof t!=="string"?t:I.selector(t)||t;var n=t.jquery||t.length&&t!==e&&t[0]&&(t[0]===e||t[0].nodeType&&t[0].style&&!t.nodeType),a=this.vars.overwrite,s,o,h;this._overwrite=a=a==null?q[I.defaultOverwrite]:typeof a==="number"?a>>0:q[a];if((n||t instanceof Array||t.push&&c(t))&&typeof t[0]!=="number"){this._targets=h=u(t);this._propLookup=[];this._siblings=[];for(s=0;s<h.length;s++){o=h[s];if(!o){h.splice(s--,1);continue}else if(typeof o==="string"){o=h[s--]=I.selector(o);if(typeof o==="string"){h.splice(s+1,1)}continue}else if(o.length&&o!==e&&o[0]&&(o[0]===e||o[0].nodeType&&o[0].style&&!o.nodeType)){h.splice(s--,1);this._targets=h=h.concat(u(o));continue}this._siblings[s]=K(o,this,false);if(a===1)if(this._siblings[s].length>1){te(o,this,null,1,this._siblings[s])}}}else{this._propLookup={};this._siblings=K(t,this,false);if(a===1)if(this._siblings.length>1){te(t,this,null,1,this._siblings)}}if(this.vars.immediateRender||i===0&&this._delay===0&&this.vars.immediateRender!==false){this._time=-l;this.render(Math.min(0,-this._delay))}},true),D=function(t){return t&&t.length&&t!==e&&t[0]&&(t[0]===e||t[0].nodeType&&t[0].style&&!t.nodeType)},k=function(e,t){var i={},r;for(r in e){if(!Y[r]&&(!(r in t)||r==="transform"||r==="x"||r==="y"||r==="width"||r==="height"||r==="className"||r==="border")&&(!V[r]||V[r]&&V[r]._autoCSS)){i[r]=e[r];delete e[r]}}e.css=i};p=I.prototype=new L;p.constructor=I;p.kill()._gc=false;p.ratio=0;p._firstPT=p._targets=p._overwrittenProps=p._startAt=null;p._notifyPluginsOfEnabled=p._lazy=false;I.version="1.20.3";I.defaultEase=p._ease=new w(null,null,1,1);I.defaultOverwrite="auto";I.ticker=m;I.autoSleep=120;I.lagSmoothing=function(e,t){m.lagSmoothing(e,t)};I.selector=e.$||e.jQuery||function(t){var i=e.$||e.jQuery;if(i){I.selector=i;return i(t)}return typeof n==="undefined"?t:n.querySelectorAll?n.querySelectorAll(t):n.getElementById(t.charAt(0)==="#"?t.substr(1):t)};var U=[],F={},N=/(?:(-|-=|\+=)?\d*\.?\d*(?:e[\-+]?\d+)?)[0-9]/gi,B=/[\+-]=-?[\.\d]/,z=function(e){var t=this._firstPT,i=1e-6,r;while(t){r=!t.blob?t.c*e+t.s:e===1&&this.end!=null?this.end:e?this.join(""):this.start;if(t.m){r=t.m(r,this._target||t.t)}else if(r<i)if(r>-i&&!t.blob){r=0}if(!t.f){t.t[t.p]=r}else if(t.fp){t.t[t.p](t.fp,r)}else{t.t[t.p](r)}t=t._next}},j=function(e,t,i,r){var n=[],a=0,s="",o=0,l,u,h,c,f,d,p;n.start=e;n.end=t;e=n[0]=e+"";t=n[1]=t+"";if(i){i(n);e=n[0];t=n[1]}n.length=0;l=e.match(N)||[];u=t.match(N)||[];if(r){r._next=null;r.blob=1;n._firstPT=n._applyPT=r}f=u.length;for(c=0;c<f;c++){p=u[c];d=t.substr(a,t.indexOf(p,a)-a);s+=d||!c?d:",";a+=d.length;if(o){o=(o+1)%5}else if(d.substr(-5)==="rgba("){o=1}if(p===l[c]||l.length<=c){s+=p}else{if(s){n.push(s);s=""}h=parseFloat(l[c]);n.push(h);n._firstPT={_next:n._firstPT,t:n,p:n.length-1,s:h,c:(p.charAt(1)==="="?parseInt(p.charAt(0)+"1",10)*parseFloat(p.substr(2)):parseFloat(p)-h)||0,f:0,m:o&&o<4?Math.round:0}}a+=p.length}s+=t.substr(a);if(s){n.push(s)}n.setRatio=z;if(B.test(t)){n.end=null}return n},G=function(e,t,i,r,n,a,s,o,l){if(typeof r==="function"){r=r(l||0,e)}var u=typeof e[t],h=u!=="function"?"":t.indexOf("set")||typeof e["get"+t.substr(3)]!=="function"?t:"get"+t.substr(3),c=i!=="get"?i:!h?e[t]:s?e[h](s):e[h](),f=typeof r==="string"&&r.charAt(1)==="=",d={t:e,p:t,s:c,f:u==="function",pg:0,n:n||t,m:!a?0:typeof a==="function"?a:Math.round,pr:0,c:f?parseInt(r.charAt(0)+"1",10)*parseFloat(r.substr(2)):parseFloat(r)-c||0},p;if(typeof c!=="number"||typeof r!=="number"&&!f){if(s||isNaN(c)||!f&&isNaN(r)||typeof c==="boolean"||typeof r==="boolean"){d.fp=s;p=j(c,f?parseFloat(d.s)+d.c:r,o||I.defaultStringFilter,d);d={t:p,p:"setRatio",s:0,c:1,f:2,pg:0,n:n||t,pr:0,m:0}}else{d.s=parseFloat(c);if(!f){d.c=parseFloat(r)-d.s||0}}}if(d.c){if(d._next=this._firstPT){d._next._prev=d}this._firstPT=d;return d}},H=I._internals={isArray:c,isSelector:D,lazyTweens:U,blobDif:j},V=I._plugins={},W=H.tweenLookup={},X=0,Y=H.reservedProps={ease:1,delay:1,overwrite:1,onComplete:1,onCompleteParams:1,onCompleteScope:1,useFrames:1,runBackwards:1,startAt:1,onUpdate:1,onUpdateParams:1,onUpdateScope:1,onStart:1,onStartParams:1,onStartScope:1,onReverseComplete:1,onReverseCompleteParams:1,onReverseCompleteScope:1,onRepeat:1,onRepeatParams:1,onRepeatScope:1,easeParams:1,yoyo:1,immediateRender:1,repeat:1,repeatDelay:1,data:1,paused:1,reversed:1,autoCSS:1,lazy:1,onOverwrite:1,callbackScope:1,stringFilter:1,id:1,yoyoEase:1},q={none:0,all:1,auto:2,concurrent:3,allOnStart:4,preexisting:5,true:1,false:0},$=L._rootFramesTimeline=new O,Z=L._rootTimeline=new O,J=30,Q=H.lazyRender=function(){var e=U.length,t;F={};while(--e>-1){t=U[e];if(t&&t._lazy!==false){t.render(t._lazy[0],t._lazy[1],true);t._lazy=false}}U.length=0};Z._startTime=m.time;$._startTime=m.frame;Z._active=$._active=true;setTimeout(Q,1);L._updateRoot=I.render=function(){var e,t,i;if(U.length){Q()}Z.render((m.time-Z._startTime)*Z._timeScale,false,false);$.render((m.frame-$._startTime)*$._timeScale,false,false);if(U.length){Q()}if(m.frame>=J){J=m.frame+(parseInt(I.autoSleep,10)||120);for(i in W){t=W[i].tweens;e=t.length;while(--e>-1){if(t[e]._gc){t.splice(e,1)}}if(t.length===0){delete W[i]}}i=Z._first;if(!i||i._paused)if(I.autoSleep&&!$._first&&m._listeners.tick.length===1){while(i&&i._paused){i=i._next}if(!i){m.sleep()}}}};m.addEventListener("tick",L._updateRoot);var K=function(e,t,i){var r=e._gsTweenID,n,a;if(!W[r||(e._gsTweenID=r="t"+X++)]){W[r]={target:e,tweens:[]}}if(t){n=W[r].tweens;n[a=n.length]=t;if(i){while(--a>-1){if(n[a]===t){n.splice(a,1)}}}}return W[r].tweens},ee=function(e,t,i,r){var n=e.vars.onOverwrite,a,s;if(n){a=n(e,t,i,r)}n=I.onOverwrite;if(n){s=n(e,t,i,r)}return a!==false&&s!==false},te=function(e,t,i,r,n){var a,s,o,u;if(r===1||r>=4){u=n.length;for(a=0;a<u;a++){if((o=n[a])!==t){if(!o._gc){if(o._kill(null,e,t)){s=true}}}else if(r===5){break}}return s}var h=t._startTime+l,c=[],f=0,d=t._duration===0,p;a=n.length;while(--a>-1){if((o=n[a])===t||o._gc||o._paused){}else if(o._timeline!==t._timeline){p=p||ie(t,0,d);if(ie(o,p,d)===0){c[f++]=o}}else if(o._startTime<=h)if(o._startTime+o.totalDuration()/o._timeScale>h)if(!((d||!o._initted)&&h-o._startTime<=2e-10)){c[f++]=o}}a=f;while(--a>-1){o=c[a];if(r===2)if(o._kill(i,e,t)){s=true}if(r!==2||!o._firstPT&&o._initted){if(r!==2&&!ee(o,t)){continue}if(o._enabled(false,false)){s=true}}}return s},ie=function(e,t,i){var r=e._timeline,n=r._timeScale,a=e._startTime;while(r._timeline){a+=r._startTime;n*=r._timeScale;if(r._paused){return-100}r=r._timeline}a/=n;return a>t?a-t:i&&a===t||!e._initted&&a-t<2*l?l:(a+=e.totalDuration()/e._timeScale/n)>t+l?0:a-t-l};p._init=function(){var e=this.vars,t=this._overwrittenProps,i=this._duration,r=!!e.immediateRender,n=e.ease,a,s,o,l,u,h;if(e.startAt){if(this._startAt){this._startAt.render(-1,true);this._startAt.kill()}u={};for(l in e.startAt){u[l]=e.startAt[l]}u.data="isStart";u.overwrite=false;u.immediateRender=true;u.lazy=r&&e.lazy!==false;u.startAt=u.delay=null;u.onUpdate=e.onUpdate;u.onUpdateParams=e.onUpdateParams;u.onUpdateScope=e.onUpdateScope||e.callbackScope||this;this._startAt=I.to(this.target,0,u);if(r){if(this._time>0){this._startAt=null}else if(i!==0){return}}}else if(e.runBackwards&&i!==0){if(this._startAt){this._startAt.render(-1,true);this._startAt.kill();this._startAt=null}else{if(this._time!==0){r=false}o={};for(l in e){if(!Y[l]||l==="autoCSS"){o[l]=e[l]}}o.overwrite=0;o.data="isFromStart";o.lazy=r&&e.lazy!==false;o.immediateRender=r;this._startAt=I.to(this.target,0,o);if(!r){this._startAt._init();this._startAt._enabled(false);if(this.vars.immediateRender){this._startAt=null}}else if(this._time===0){return}}}this._ease=n=!n?I.defaultEase:n instanceof w?n:typeof n==="function"?new w(n,e.easeParams):T[n]||I.defaultEase;if(e.easeParams instanceof Array&&n.config){this._ease=n.config.apply(n,e.easeParams)}this._easeType=this._ease._type;this._easePower=this._ease._power;this._firstPT=null;if(this._targets){h=this._targets.length;for(a=0;a<h;a++){if(this._initProps(this._targets[a],this._propLookup[a]={},this._siblings[a],t?t[a]:null,a)){s=true}}}else{s=this._initProps(this.target,this._propLookup,this._siblings,t,0)}if(s){I._onPluginEvent("_onInitAllProps",this)}if(t)if(!this._firstPT)if(typeof this.target!=="function"){this._enabled(false,false)}if(e.runBackwards){o=this._firstPT;while(o){o.s+=o.c;o.c=-o.c;o=o._next}}this._onUpdate=e.onUpdate;this._initted=true};p._initProps=function(t,i,r,n,a){var s,o,l,u,h,f;if(t==null){return false}if(F[t._gsTweenID]){Q()}if(!this.vars.css)if(t.style)if(t!==e&&t.nodeType)if(V.css)if(this.vars.autoCSS!==false){k(this.vars,t)}for(s in this.vars){f=this.vars[s];if(Y[s]){if(f)if(f instanceof Array||f.push&&c(f))if(f.join("").indexOf("{self}")!==-1){this.vars[s]=f=this._swapSelfInParams(f,this)}}else if(V[s]&&(u=new V[s])._onInitTween(t,this.vars[s],this,a)){this._firstPT=h={_next:this._firstPT,t:u,p:"setRatio",s:0,c:1,f:1,n:s,pg:1,pr:u._priority,m:0};o=u._overwriteProps.length;while(--o>-1){i[u._overwriteProps[o]]=this._firstPT}if(u._priority||u._onInitAllProps){l=true}if(u._onDisable||u._onEnable){this._notifyPluginsOfEnabled=true}if(h._next){h._next._prev=h}}else{i[s]=G.call(this,t,s,"get",f,s,0,null,this.vars.stringFilter,a)}}if(n)if(this._kill(n,t)){return this._initProps(t,i,r,n,a)}if(this._overwrite>1)if(this._firstPT)if(r.length>1)if(te(t,this,i,this._overwrite,r)){this._kill(i,t);return this._initProps(t,i,r,n,a)}if(this._firstPT)if(this.vars.lazy!==false&&this._duration||this.vars.lazy&&!this._duration){F[t._gsTweenID]=true}return l};p.render=function(e,t,i){var r=this._time,n=this._duration,a=this._rawPrevTime,s,o,u,h;if(e>=n-1e-7&&e>=0){this._totalTime=this._time=n;this.ratio=this._ease._calcEnd?this._ease.getRatio(1):1;if(!this._reversed){s=true;o="onComplete";i=i||this._timeline.autoRemoveChildren}if(n===0)if(this._initted||!this.vars.lazy||i){if(this._startTime===this._timeline._duration){e=0}if(a<0||e<=0&&e>=-1e-7||a===l&&this.data!=="isPause")if(a!==e){i=true;if(a>l){o="onReverseComplete"}}this._rawPrevTime=h=!t||e||a===e?e:l}}else if(e<1e-7){this._totalTime=this._time=0;this.ratio=this._ease._calcEnd?this._ease.getRatio(0):0;if(r!==0||n===0&&a>0){o="onReverseComplete";s=this._reversed}if(e<0){this._active=false;if(n===0)if(this._initted||!this.vars.lazy||i){if(a>=0&&!(a===l&&this.data==="isPause")){i=true}this._rawPrevTime=h=!t||e||a===e?e:l}}if(!this._initted||this._startAt&&this._startAt.progress()){i=true}}else{this._totalTime=this._time=e;if(this._easeType){var c=e/n,f=this._easeType,d=this._easePower;if(f===1||f===3&&c>=.5){c=1-c}if(f===3){c*=2}if(d===1){c*=c}else if(d===2){c*=c*c}else if(d===3){c*=c*c*c}else if(d===4){c*=c*c*c*c}if(f===1){this.ratio=1-c}else if(f===2){this.ratio=c}else if(e/n<.5){this.ratio=c/2}else{this.ratio=1-c/2}}else{this.ratio=this._ease.getRatio(e/n)}}if(this._time===r&&!i){return}else if(!this._initted){this._init();if(!this._initted||this._gc){return}else if(!i&&this._firstPT&&(this.vars.lazy!==false&&this._duration||this.vars.lazy&&!this._duration)){this._time=this._totalTime=r;this._rawPrevTime=a;U.push(this);this._lazy=[e,t];return}if(this._time&&!s){this.ratio=this._ease.getRatio(this._time/n)}else if(s&&this._ease._calcEnd){this.ratio=this._ease.getRatio(this._time===0?0:1)}}if(this._lazy!==false){this._lazy=false}if(!this._active)if(!this._paused&&this._time!==r&&e>=0){this._active=true}if(r===0){if(this._startAt){if(e>=0){this._startAt.render(e,true,i)}else if(!o){o="_dummyGS"}}if(this.vars.onStart)if(this._time!==0||n===0)if(!t){this._callback("onStart")}}u=this._firstPT;while(u){if(u.f){u.t[u.p](u.c*this.ratio+u.s)}else{u.t[u.p]=u.c*this.ratio+u.s}u=u._next}if(this._onUpdate){if(e<0)if(this._startAt&&e!==-1e-4){this._startAt.render(e,true,i)}if(!t)if(this._time!==r||s||i){this._callback("onUpdate")}}if(o)if(!this._gc||i){if(e<0&&this._startAt&&!this._onUpdate&&e!==-1e-4){this._startAt.render(e,true,i)}if(s){if(this._timeline.autoRemoveChildren){this._enabled(false,false)}this._active=false}if(!t&&this.vars[o]){this._callback(o)}if(n===0&&this._rawPrevTime===l&&h!==l){this._rawPrevTime=0}}};p._kill=function(e,t,i){if(e==="all"){e=null}if(e==null)if(t==null||t===this.target){this._lazy=false;return this._enabled(false,false)}t=typeof t!=="string"?t||this._targets||this.target:I.selector(t)||t;var r=i&&this._time&&i._startTime===this._startTime&&this._timeline===i._timeline,n,a,s,o,l,u,h,f,d;if((c(t)||D(t))&&typeof t[0]!=="number"){n=t.length;while(--n>-1){if(this._kill(e,t[n],i)){u=true}}}else{if(this._targets){n=this._targets.length;while(--n>-1){if(t===this._targets[n]){l=this._propLookup[n]||{};this._overwrittenProps=this._overwrittenProps||[];a=this._overwrittenProps[n]=e?this._overwrittenProps[n]||{}:"all";break}}}else if(t!==this.target){return false}else{l=this._propLookup;a=this._overwrittenProps=e?this._overwrittenProps||{}:"all"}if(l){h=e||l;f=e!==a&&a!=="all"&&e!==l&&(typeof e!=="object"||!e._tempKill);if(i&&(I.onOverwrite||this.vars.onOverwrite)){for(s in h){if(l[s]){if(!d){d=[]}d.push(s)}}if((d||!e)&&!ee(this,i,t,d)){return false}}for(s in h){if(o=l[s]){if(r){if(o.f){o.t[o.p](o.s)}else{o.t[o.p]=o.s}u=true}if(o.pg&&o.t._kill(h)){u=true}if(!o.pg||o.t._overwriteProps.length===0){if(o._prev){o._prev._next=o._next}else if(o===this._firstPT){this._firstPT=o._next}if(o._next){o._next._prev=o._prev}o._next=o._prev=null}delete l[s]}if(f){a[s]=1}}if(!this._firstPT&&this._initted){this._enabled(false,false)}}}return u};p.invalidate=function(){if(this._notifyPluginsOfEnabled){I._onPluginEvent("_onDisable",this)}this._firstPT=this._overwrittenProps=this._startAt=this._onUpdate=null;this._notifyPluginsOfEnabled=this._active=this._lazy=false;this._propLookup=this._targets?{}:[];L.prototype.invalidate.call(this);if(this.vars.immediateRender){this._time=-l;this.render(Math.min(0,-this._delay))}return this};p._enabled=function(e,t){if(!v){m.wake()}if(e&&this._gc){var i=this._targets,r;if(i){r=i.length;while(--r>-1){this._siblings[r]=K(i[r],this,true)}}else{this._siblings=K(this.target,this,true)}}L.prototype._enabled.call(this,e,t);if(this._notifyPluginsOfEnabled)if(this._firstPT){return I._onPluginEvent(e?"_onEnable":"_onDisable",this)}return false};I.to=function(e,t,i){return new I(e,t,i)};I.from=function(e,t,i){i.runBackwards=true;i.immediateRender=i.immediateRender!=false;return new I(e,t,i)};I.fromTo=function(e,t,i,r){r.startAt=i;r.immediateRender=r.immediateRender!=false&&i.immediateRender!=false;return new I(e,t,r)};I.delayedCall=function(e,t,i,r,n){return new I(t,0,{delay:e,onComplete:t,onCompleteParams:i,callbackScope:r,onReverseComplete:t,onReverseCompleteParams:i,immediateRender:false,lazy:false,useFrames:n,overwrite:0})};I.set=function(e,t){return new I(e,0,t)};I.getTweensOf=function(e,t){if(e==null){return[]}e=typeof e!=="string"?e:I.selector(e)||e;var i,r,n,a;if((c(e)||D(e))&&typeof e[0]!=="number"){i=e.length;r=[];while(--i>-1){r=r.concat(I.getTweensOf(e[i],t))}i=r.length;while(--i>-1){a=r[i];n=i;while(--n>-1){if(a===r[n]){r.splice(i,1)}}}}else if(e._gsTweenID){r=K(e).concat();i=r.length;while(--i>-1){if(r[i]._gc||t&&!r[i].isActive()){r.splice(i,1)}}}return r||[]};I.killTweensOf=I.killDelayedCallsTo=function(e,t,i){if(typeof t==="object"){i=t;t=false}var r=I.getTweensOf(e,t),n=r.length;while(--n>-1){r[n]._kill(i,e)}};var re=b("plugins.TweenPlugin",function(e,t){this._overwriteProps=(e||"").split(",");this._propName=this._overwriteProps[0];this._priority=t||0;this._super=re.prototype},true);p=re.prototype;re.version="1.19.0";re.API=2;p._firstPT=null;p._addTween=G;p.setRatio=z;p._kill=function(e){var t=this._overwriteProps,i=this._firstPT,r;if(e[this._propName]!=null){this._overwriteProps=[]}else{r=t.length;while(--r>-1){if(e[t[r]]!=null){t.splice(r,1)}}}while(i){if(e[i.n]!=null){if(i._next){i._next._prev=i._prev}if(i._prev){i._prev._next=i._next;i._prev=null}else if(this._firstPT===i){this._firstPT=i._next}}i=i._next}return false};p._mod=p._roundProps=function(e){var t=this._firstPT,i;while(t){i=e[this._propName]||t.n!=null&&e[t.n.split(this._propName+"_").join("")];if(i&&typeof i==="function"){if(t.f===2){t.t._applyPT.m=i}else{t.m=i}}t=t._next}};I._onPluginEvent=function(e,t){var i=t._firstPT,r,n,a,s,o;if(e==="_onInitAllProps"){while(i){o=i._next;n=a;while(n&&n.pr>i.pr){n=n._next}if(i._prev=n?n._prev:s){i._prev._next=i}else{a=i}if(i._next=n){n._prev=i}else{s=i}i=o}i=t._firstPT=a}while(i){if(i.pg)if(typeof i.t[e]==="function")if(i.t[e]()){r=true}i=i._next}return r};re.activate=function(e){var t=e.length;while(--t>-1){if(e[t].API===re.API){V[(new e[t])._propName]=e[t]}}return true};_.plugin=function(e){if(!e||!e.propName||!e.init||!e.API){throw"illegal plugin definition."}var t=e.propName,i=e.priority||0,r=e.overwriteProps,n={init:"_onInitTween",set:"setRatio",kill:"_kill",round:"_mod",mod:"_mod",initAll:"_onInitAllProps"},a=b("plugins."+t.charAt(0).toUpperCase()+t.substr(1)+"Plugin",function(){re.call(this,t,i);this._overwriteProps=r||[]},e.global===true),s=a.prototype=new re(t),o;s.constructor=a;a.API=e.API;for(o in n){if(typeof e[o]==="function"){s[n[o]]=e[o]}}a.version=e.version;re.activate([a]);return a};f=e._gsQueue;if(f){for(d=0;d<f.length;d++){f[d]()}for(p in g){if(!g[p].func){e.console.log("GSAP encountered missing dependency: "+p)}}}v=false})(typeof t!=="undefined"&&t.exports&&typeof e!=="undefined"?e:this||window,"TweenMax")}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{}],21:[function(e,t,i){t.exports=function(e){function t(r){if(i[r])return i[r].exports;var n=i[r]={i:r,l:!1,exports:{}};return e[r].call(n.exports,n,n.exports,t),n.l=!0,n.exports}var i={};return t.m=e,t.c=i,t.i=function(e){return e},t.d=function(e,i,r){t.o(e,i)||Object.defineProperty(e,i,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var i=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(i,"a",i),i},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=50)}([function(e,t,i){"use strict";function r(e){for(var t=document.createElement(e),i=arguments.length,r=Array(i>1?i-1:0),n=1;n<i;n++)r[n-1]=arguments[n];return s.apply(void 0,[t].concat(r)),t}function n(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document.body;t.appendChild(e)}function a(e){var t={left:0,top:0};if(e.offsetParent)do{t.left+=e.offsetLeft,t.top+=e.offsetTop}while(e=e.offsetParent);return t}function s(e){for(var t=arguments.length,i=Array(t>1?t-1:0),r=1;r<t;r++)i[r-1]=arguments[r];i.forEach(function(t){return o(e,t)})}function o(e,t){l(e,t)||(e.classList?e.classList.add(t):e.className+=" "+t)}function l(e,t){return e.classList?e.classList.contains(t):new RegExp("(^| )"+t+"( |$)","gi").test(e.className)}function u(e,t){l(e,t)&&(e.classList?e.classList.remove(t):e.className=e.className.replace(new RegExp("(^|\\b)"+t.split(" ").join("|")+"(\\b|$)","gi")," "))}function h(e,t){l(e,t)?u(e,t):o(e,t)}Object.defineProperty(t,"__esModule",{value:!0}),t.createElement=r,t.appendElement=n,t.offset=a,t.addClasses=s,t.addClass=o,t.hasClass=l,t.removeClass=u,t.toggleClass=h},function(e,t){e.exports=function(){var e=[];return e.toString=function(){for(var e=[],t=0;t<this.length;t++){var i=this[t];i[2]?e.push("@media "+i[2]+"{"+i[1]+"}"):e.push(i[1])}return e.join("")},e.i=function(t,i){"string"==typeof t&&(t=[[null,t,""]]);for(var r={},n=0;n<this.length;n++){var a=this[n][0];"number"==typeof a&&(r[a]=!0)}for(n=0;n<t.length;n++){var s=t[n];"number"==typeof s[0]&&r[s[0]]||(i&&!s[2]?s[2]=i:i&&(s[2]="("+s[2]+") and ("+i+")"),e.push(s))}},e}},function(e,t){function i(e,t){for(var i=0;i<e.length;i++){var r=e[i],n=f[r.id];if(n){n.refs++;for(var a=0;a<n.parts.length;a++)n.parts[a](r.parts[a]);for(;a<r.parts.length;a++)n.parts.push(l(r.parts[a],t))}else{for(var s=[],a=0;a<r.parts.length;a++)s.push(l(r.parts[a],t));f[r.id]={id:r.id,refs:1,parts:s}}}}function r(e){for(var t=[],i={},r=0;r<e.length;r++){var n=e[r],a=n[0],s=n[1],o=n[2],l=n[3],u={css:s,media:o,sourceMap:l};i[a]?i[a].parts.push(u):t.push(i[a]={id:a,parts:[u]})}return t}function n(e,t){var i=m(),r=y[y.length-1];if("top"===e.insertAt)r?r.nextSibling?i.insertBefore(t,r.nextSibling):i.appendChild(t):i.insertBefore(t,i.firstChild),y.push(t);else{if("bottom"!==e.insertAt)throw new Error("Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.");i.appendChild(t)}}function a(e){e.parentNode.removeChild(e);var t=y.indexOf(e);t>=0&&y.splice(t,1)}function s(e){var t=document.createElement("style");return t.type="text/css",n(e,t),t}function o(e){var t=document.createElement("link");return t.rel="stylesheet",n(e,t),t}function l(e,t){var i,r,n;if(t.singleton){var l=g++;i=v||(v=s(t)),r=u.bind(null,i,l,!1),n=u.bind(null,i,l,!0)}else e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(i=o(t),r=c.bind(null,i),n=function(){a(i),i.href&&URL.revokeObjectURL(i.href)}):(i=s(t),r=h.bind(null,i),n=function(){a(i)});return r(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;r(e=t)}else n()}}function u(e,t,i,r){var n=i?"":r.css;if(e.styleSheet)e.styleSheet.cssText=_(t,n);else{var a=document.createTextNode(n),s=e.childNodes;s[t]&&e.removeChild(s[t]),s.length?e.insertBefore(a,s[t]):e.appendChild(a)}}function h(e,t){var i=t.css,r=t.media;if(r&&e.setAttribute("media",r),e.styleSheet)e.styleSheet.cssText=i;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(i))}}function c(e,t){var i=t.css,r=t.sourceMap;r&&(i+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(r))))+" */");var n=new Blob([i],{type:"text/css"}),a=e.href;e.href=URL.createObjectURL(n),a&&URL.revokeObjectURL(a)}var f={},d=function(e){var t;return function(){return"undefined"==typeof t&&(t=e.apply(this,arguments)),t}},p=d(function(){return/msie [6-9]\b/.test(window.navigator.userAgent.toLowerCase())}),m=d(function(){return document.head||document.getElementsByTagName("head")[0]}),v=null,g=0,y=[];e.exports=function(e,t){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");t=t||{},"undefined"==typeof t.singleton&&(t.singleton=p()),"undefined"==typeof t.insertAt&&(t.insertAt="bottom");var n=r(e);return i(n,t),function(e){for(var a=[],s=0;s<n.length;s++){var o=n[s],l=f[o.id];l.refs--,a.push(l)}if(e){var u=r(e);i(u,t)}for(var s=0;s<a.length;s++){var l=a[s];if(0===l.refs){for(var h=0;h<l.parts.length;h++)l.parts[h]();delete f[l.id]}}}};var _=function(){var e=[];return function(t,i){return e[t]=i,e.filter(Boolean).join("\n")}}()},function(e,t,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),l=i(5),u=r(l),h=i(8),c=r(h),f=function(e){function t(e,i){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";n(this,t),r.classNames=r.classNames||[],r.classNames.push("guigui-component");var o=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,r,s));return(0,c.default)(o),o.onWatch=o.onWatch.bind(o),o.isWatched=r.watch===!0,o._targetObject=e,o._targetProperty=i,o._value=e[i],o.onEndInteraction(),o}return s(t,e),o(t,[{key:"invalidate",value:function(){this._value=this._targetObject[this._targetProperty]}},{key:"onWatch",value:function(){this._targetObject[this._targetProperty]!==this._value&&this.invalidate()}},{key:"onStartInteraction",value:function(){this.isWatched&&clearInterval(this._watchInterval)}},{key:"onEndInteraction",value:function(){this.isWatched&&(this._watchInterval=setInterval(this.onWatch,100))}}]),t}(u.default);t.default=f},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n=(t.isBoolean=function(e){return e===!0||e===!1},t.isFunction=function(e){return"function"==typeof e});t.isNumber=function(e){return"number"==typeof e},t.isArray=function(e){return Array.isArray(e)},t.isObject=function(e){return null!==e&&"object"===("undefined"==typeof e?"undefined":r(e))},t.isThreejsColor=function(e){return e.isColor&&n(e.setHex)&&n(e.getHex)}},function(e,t,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function n(e){if(Array.isArray(e)){for(var t=0,i=Array(e.length);t<e.length;t++)i[t]=e[t];return i}return Array.from(e)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),o=i(18),l=r(o),u=i(0),h=i(19),c=function(){function e(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";a(this,e),this.classNames=t.classNames||[],this.$el=u.createElement.apply(void 0,["div"].concat(n(this.classNames))),this.parent=null,this.$el.innerHTML=i}return s(e,[{key:"render",value:function(){}},{key:"appendTo",value:function(e){(0,l.default)(e)?(this.parent=e,e.appendChild(this.$el)):(0,h.warn)(e+" is not a valid dom element")}},{key:"remove",value:function(){this.parent&&(this.parent.removeChild(this.$el),this.parent=null)}}]),e}();t.default=c},function(e,t,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{
constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),l=i(17),u=r(l),h=i(5),c=r(h),f=i(0),d=i(7),p=r(d),m=function(e){function t(e,i){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;n(this,t),i.classNames=i.classNames||["guigui-folder"],r=r||'\n      <div class="guigui-folder-head">\n        <h2 class="guigui-folder-label">'+e+'</h2>\n        <div class="guigui-folder-toggle">\n          <div class="guigui-folder-toggle-line"></div>\n          <div class="guigui-folder-toggle-line"></div>\n        </div>\n      </div>\n      <div class="guigui-folder-content"></div>\n    ';var s=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,i,r));return s.toggle=s.toggle.bind(s),s.folderName=e,s.components=[],s.folders=[],s.$content=s.$el.querySelector("."+i.classNames[0]+"-content"),s.$head=s.$el.querySelector("."+i.classNames[0]+"-head"),s.$head.addEventListener("click",s.toggle),s}return s(t,e),o(t,[{key:"toggle",value:function(){(0,f.toggleClass)(this.$el,this.classNames[0]+"--opened")}},{key:"close",value:function(){(0,f.removeClass)(this.$el,this.classNames[0]+"--opened")}},{key:"open",value:function(){(0,f.addClass)(this.$el,this.classNames[0]+"--opened")}},{key:"addFolder",value:function(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=new t(e,i);return this.folders.push(r),r.appendTo(this.$content),r}},{key:"add",value:function(e,t,i,r){var n=(0,u.default)(e,t,i,r);return this.components.push(n),n.appendTo(this.$content),n}},{key:"addColorPicker",value:function(){return this.addColor.apply(this,arguments)}},{key:"addColor",value:function(e,t,i){var r=new p.default(e,t,i);return this.components.push(r),r.appendTo(this.$content),r}}]),t}(c.default);t.default=m},function(e,t,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),l=function e(t,i,r){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,i);if(void 0===n){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,i,r)}if("value"in n)return n.value;var s=n.get;if(void 0!==s)return s.call(r)},u=i(3),h=r(u),c=i(0),f=i(4),d=i(40),p=r(d);i(41);var m=function(e){function t(e,i){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};n(this,t);var s=r.label,o=void 0===s?i:s,l='\n      <div class="guigui-colorpicker-label">'+o+'</div>\n      <div class="guigui-colorpicker-state">\n        <input type="text" class="guigui-colorpicker-text" value="#FF0000"/>\n      </div>\n    ',u=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,i,{classNames:["guigui-colorpicker"]},l));u.onColorPickerClick=u.onColorPickerClick.bind(u),u.onColorPickerUpdate=u.onColorPickerUpdate.bind(u),u.onPickerMouseLeave=u.onPickerMouseLeave.bind(u),u.onFinishedInteracting=u.onFinishedInteracting.bind(u),u.onTextChange=u.onTextChange.bind(u);var h=e[i];return u.isThreejsColor=(0,f.isThreejsColor)(h),u.initialColorFormat=(0,f.isNumber)(h)||u.isThreejsColor?"number":"string",u.isOpened=!1,u.$text=u.$el.querySelector(".guigui-colorpicker-text"),u.$state=u.$el.querySelector(".guigui-colorpicker-state"),u.colorPicker=new p.default({el:u.$el,color:u.isThreejsColor?u._targetObject[u._targetProperty].getHex():u._targetObject[u._targetProperty],background:"#30343c"}),u.$picker=u.colorPicker.$el,u.colorPicker.onChange(u.onColorPickerUpdate),u.$text.value=u.colorPicker.color.toHexString(),u.onTextChange(),u.$state.addEventListener("click",u.onColorPickerClick),u.$text.addEventListener("change",u.onTextChange),u}return s(t,e),o(t,[{key:"remove",value:function(){this.$state.removeEventListener("click",this.onColorPickerClick),this.$picker.removeEventListener("mouseleave",this.onPickerMouseLeave),window.removeEventListener("mouseup",this.onFinishedInteracting),l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"remove",this).call(this)}},{key:"getColor",value:function(){return"number"===this.initialColorFormat?this.colorPicker.getHexNumber():this.colorPicker.getHexString()}},{key:"_closePicker",value:function(){this.isOpened=!1,(0,c.removeClass)(this.$el,"guigui-colorpicker--opened"),this.onEndInteraction()}},{key:"invalidate",value:function(){this.colorPicker.setColor(this._value),this.onColorPickerUpdate()}},{key:"onTextChange",value:function(){this.colorPicker.setColor(this.$text.value)}},{key:"onColorPickerClick",value:function(){this.isOpened=!this.isOpened,this.isOpened?(this.onStartInteraction(),(0,c.addClass)(this.$el,"guigui-colorpicker--opened"),this.$picker.addEventListener("mouseleave",this.onPickerMouseLeave)):this._closePicker()}},{key:"onPickerMouseLeave",value:function(){this.$picker.removeEventListener("mouseleave",this.onPickerMouseLeave),this.colorPicker.choosing?window.addEventListener("mouseup",this.onFinishedInteracting):this._closePicker()}},{key:"onFinishedInteracting",value:function(){window.removeEventListener("mouseup",this.onFinishedInteracting),this._closePicker()}},{key:"onColorPickerUpdate",value:function(){var e=this.colorPicker.getHexString(),t=this.getColor();this._value=t,this.$state.style.background=e,this.$text.value=e,this.$text.style.color=this.colorPicker.isDark()?"white":"black",this.isThreejsColor?this._targetObject[this._targetProperty].setHex(t):this._targetObject[this._targetProperty]=t,this.emit("update",t)}}]),t}(h.default);t.default=m},function(e,t,i){function r(e){if(e)return n(e)}function n(e){for(var t in r.prototype)e[t]=r.prototype[t];return e}e.exports=r,r.prototype.on=r.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this},r.prototype.once=function(e,t){function i(){this.off(e,i),t.apply(this,arguments)}return i.fn=t,this.on(e,i),this},r.prototype.off=r.prototype.removeListener=r.prototype.removeAllListeners=r.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var i=this._callbacks["$"+e];if(!i)return this;if(1==arguments.length)return delete this._callbacks["$"+e],this;for(var r,n=0;n<i.length;n++)if(r=i[n],r===t||r.fn===t){i.splice(n,1);break}return this},r.prototype.emit=function(e){this._callbacks=this._callbacks||{};var t=[].slice.call(arguments,1),i=this._callbacks["$"+e];if(i){i=i.slice(0);for(var r=0,n=i.length;r<n;++r)i[r].apply(this,t)}return this},r.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]},r.prototype.hasListeners=function(e){return!!this.listeners(e).length}},function(e,t,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),l=i(5),u=r(l),h=i(0),c=function(e){function t(e,i){n(this,t);var r='\n      <div class="guigui-toggle-line"></div>\n      <div class="guigui-toggle-line"></div>\n    ',s=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,{classNames:["guigui-toggle"]},r));return s.toggle=s.toggle.bind(s),s.$container=e,s.containerClass=i,s.$el.addEventListener("click",s.toggle),s}return s(t,e),o(t,[{key:"toggle",value:function(){(0,h.toggleClass)(this.$el,this.classNames[0]+"--opened"),(0,h.toggleClass)(this.$container,this.containerClass+"--opened")}}]),t}(u.default);t.default=c},function(e,t,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=i(6),l=r(o),u=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";n(this,t);var i='\n      <div class="guigui-panel-head">\n        <h2 class="guigui-panel-label">'+e+'</h2>\n      </div>\n      <div class="guigui-panel-content"></div>\n    ';return a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,{classNames:["guigui-panel","guigui-panel--opened"]},i))}return s(t,e),t}(l.default);t.default=u},function(e,t,i){var r=i(29);"string"==typeof r&&(r=[[e.i,r,""]]);i(2)(r,{});r.locals&&(e.exports=r.locals)},function(e,t,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),l=function e(t,i,r){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,i);if(void 0===n){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,i,r)}if("value"in n)return n.value;var s=n.get;if(void 0!==s)return s.call(r)},u=i(3),h=r(u),c=i(0);i(42);var f=function(e){function t(e,i){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};n(this,t);var s=r.label,o=void 0===s?i:s,l=r.scope,u=void 0===l?e:l,h='\n      <div class="guigui-launcher-label">'+o+"<span>()</span></div>\n    ",c=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,i,{classNames:["guigui-launcher"]},h));return c.onButtonClick=c.onButtonClick.bind(c),c.onMouseDown=c.onMouseDown.bind(c),c.onMouseUp=c.onMouseUp.bind(c),c.labelText=o,c.callbackScope=u,c.$el.addEventListener("click",c.onButtonClick),c.$el.addEventListener("mousedown",c.onMouseDown),c}return s(t,e),o(t,[{key:"remove",value:function(){this.$el.removeEventListener("click",this.onButtonClick),this.$el.removeEventListener("mousedown",this.onMouseDown),window.removeEventListener("mouseup",this.onMouseUp),l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"remove",this).call(this)}},{key:"onButtonClick",value:function(e){this._targetObject[this._targetProperty].call(this.callbackScope)}},{key:"onMouseDown",value:function(e){(0,c.addClass)(this.$el,"guigui-launcher--pressed"),window.addEventListener("mouseup",this.onMouseUp)}},{key:"onMouseUp",value:function(e){window.removeEventListener("mouseup",this.onMouseUp),(0,c.removeClass)(this.$el,"guigui-launcher--pressed")}}]),t}(h.default);t.default=f},function(e,t,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),l=function e(t,i,r){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,i);if(void 0===n){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,i,r)}if("value"in n)return n.value;var s=n.get;if(void 0!==s)return s.call(r)},u=i(3),h=r(u),c=(i(0),i(4));i(43);var f=function(e){function t(e,i,r){var s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};n(this,t);var o=s.label,l=void 0===o?i:o,u=e[i];r=r.map(function(e){return(0,c.isObject)(e)&&e.name&&e.value?e:{name:e,value:e}});var h=r.map(function(e){var t=e.value,i=e.name,r=t===u?"selected":"";return"<option "+r+' value="'+t+'">'+i+"</option>"}).join(""),f='\n      <div class="guigui-select-label">'+l+"</div>\n      <select>\n        "+h+"\n      </select>\n    ",d=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,i,{classNames:["guigui-select"]},f));return d.onSelectChange=d.onSelectChange.bind(d),d.$select=d.$el.querySelector("select"),d.value=u,d.$select.addEventListener("change",d.onSelectChange),d}return s(t,e),o(t,[{key:"onSelectChange",value:function(e){this.value=this.$select.value}},{key:"invalidate",value:function(){l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"invalidate",this).call(this),this.value=this._value}},{key:"value",get:function(){return this.$select.value},set:function(e){this.$select.value=e,this._value=e,this._targetObject[this._targetProperty]=e,this.emit("update",this.sliderValue)}}]),t}(h.default);t.default=f},function(e,t,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),l=function e(t,i,r){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,i);if(void 0===n){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,i,r)}if("value"in n)return n.value;var s=n.get;if(void 0!==s)return s.call(r)},u=i(3),h=r(u),c=i(20),f=i(0);i(44);var d=function(e){function t(e,i){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};n(this,t);var s=r.step,o=void 0===s?1:s,l=r.min,u=void 0===l?0:l,h=r.max,f=void 0===h?100:h,d=r.watch,p=void 0!==d&&d,m=r.label,v=void 0===m?i:m,g=r.minText,y=void 0===g?(0,c.format)(u,o.toString()):g,_=r.maxText,b=void 0===_?(0,c.format)(f,o.toString()):_,x='\n      <div class="guigui-slider-label">'+v+'</div>\n      <div class="guigui-slider-container">\n        <div class="guigui-slider-background"></div>\n        <div class="guigui-slider-handle"></div>\n          <div class="guigui-slider-indice guigui-slider-indice--min">'+y+'</div>\n          <div class="guigui-slider-indice guigui-slider-indice--max">'+b+'</div>\n        </div>\n        <input type="text" class="guigui-slider-value" value="0"/>\n      </div>\n    ',w=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,i,{watch:p,classNames:["guigui-slider"]},x));return w.onSliderStartDrag=w.onSliderStartDrag.bind(w),w.onSliderStopDrag=w.onSliderStopDrag.bind(w),w.onSliderDrag=w.onSliderDrag.bind(w),w.onTextStartDrag=w.onTextStartDrag.bind(w),w.onTextStopDrag=w.onTextStopDrag.bind(w),w.onTextDrag=w.onTextDrag.bind(w),w.onTextKeyDown=w.onTextKeyDown.bind(w),w.onTextChange=w.onTextChange.bind(w),w.step=o,w.min=u,w.max=f,w.labelText=v||i,w.isWatched=p===!0,w.minText=y,w.maxText=b,w.textValueSlowingFactor=.1,w.sliderValue=0,w.$container=w.$el.querySelector(".guigui-slider-container"),w.$handle=w.$el.querySelector(".guigui-slider-handle"),w.$background=w.$el.querySelector(".guigui-slider-background"),w.$value=w.$el.querySelector(".guigui-slider-value"),w.$container.addEventListener("mousedown",w.onSliderStartDrag),w.$value.addEventListener("mousedown",w.onTextStartDrag),w.$value.addEventListener("keydown",w.onTextKeyDown),w.$value.addEventListener("change",w.onTextChange),w.value=w._targetObject[w._targetProperty],w}return s(t,e),o(t,[{key:"remove",value:function(){this.$container.removeEventListener("mousedown",this.onSliderStartDrag),this.$value.removeEventListener("mousedown",this.onTextStartDrag),this.$value.removeEventListener("keydown",this.onTextKeyDown),this.$value.removeEventListener("change",this.onTextChange),this.onSliderStopDrag(),this.onTextStopDrag(),l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"remove",this).call(this)}},{key:"onSliderStartDrag",value:function(e){this.onStartInteraction(),this.onSliderDrag(e),window.addEventListener("mouseup",this.onSliderStopDrag),window.addEventListener("mousemove",this.onSliderDrag),e.preventDefault()}},{key:"onSliderStopDrag",value:function(e){window.removeEventListener("mouseup",this.onSliderStopDrag),window.removeEventListener("mousemove",this.onSliderDrag),this.onEndInteraction(),e.preventDefault()}},{key:"onSliderDrag",value:function(e){var t=(e.clientX-(0,f.offset)(this.$handle).left)/this.$background.offsetWidth;this.value=this.min+(this.max-this.min)*t,e.preventDefault()}},{key:"onTextStartDrag",value:function(e){this.startY=e.clientY,this.startValue=this.value,window.addEventListener("mouseup",this.onTextStopDrag),window.addEventListener("mousemove",this.onTextDrag),e.preventDefault()}},{key:"onTextStopDrag",value:function(e){window.removeEventListener("mouseup",this.onTextStopDrag),window.removeEventListener("mousemove",this.onTextDrag),e.preventDefault()}},{key:"onTextDrag",value:function(e){var t=this.startY-e.clientY;this.value=this.startValue+t*this.step*this.textValueSlowingFactor,e.preventDefault()}},{key:"onTextKeyDown",value:function(e){if(38===e.keyCode)this.value+=this.step;else{if(40!==e.keyCode)return;this.value-=this.step}e.preventDefault()}},{key:"onTextChange",value:function(){this.$value.value.match(/^[+-]?\d+(\.\d+)?$/g)?this.value=Number(this.$value.value):this.value=this.sliderValue}},{key:"updateTarget",value:function(){return this._targetObject[this._targetProperty]=this.sliderValue,this}},{key:"updateText",value:function(){return isNaN(this.sliderValue)||(this.$value.value=(0,c.format)(this.sliderValue,this.step.toString())),this}},{key:"updateSlider",value:function(){return this.$handle.style.transform="scaleX("+(1-(this.sliderValue-this.min)/(this.max-this.min))+")",this}},{key:"invalidate",value:function(){l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"invalidate",this).call(this),this.value=this._value}},{key:"value",get:function(){return this.sliderValue},set:function(e){this.sliderValue=(0,c.clamp)((0,c.toPrecision)(e,this.step),this.min,this.max),this._value=this.sliderValue,this.updateTarget().updateSlider().updateText(),this.emit("update",this.sliderValue)}}]),t}(h.default);t.default=d},function(e,t,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),l=function e(t,i,r){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,i);if(void 0===n){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,i,r)}if("value"in n)return n.value;var s=n.get;if(void 0!==s)return s.call(r)},u=i(3),h=r(u);i(0),i(4);i(45);var c=function(e){function t(e,i){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};n(this,t);var s=r.label,o=void 0===s?i:s,l=e[i],u='\n      <div class="guigui-text-label">'+o+'</div>\n      <input type="text" class="guigui-text-value" value="'+l+'"/>\n    ',h=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,i,{classNames:["guigui-text"]},u));return h.onInputChange=h.onInputChange.bind(h),h.$input=h.$el.querySelector("input"),h.value=l,h.$input.addEventListener("input",h.onInputChange),h}return s(t,e),o(t,[{key:"onInputChange",value:function(e){this.value=this.$input.value,console.log("onInputChange",this.value)}},{key:"invalidate",value:function(){l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"invalidate",this).call(this),this.value=this._value}},{key:"value",get:function(){return this.$input.value},set:function(e){this.$input.value=e,this._value=e,this._targetObject[this._targetProperty]=e,this.emit("update",this.sliderValue)}}]),t}(h.default);t.default=c},function(e,t,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),l=i(3),u=r(l),h=i(0);i(46);var c=function(e){function t(e,i){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};n(this,t);var s=r.label,o=void 0===s?i:s,l='\n      <div class="guigui-toggler-label">'+o+'</div>\n      <div class="guigui-toggler-state">\n        <div class="guigui-toggler-handle"></div>\n      </div>\n    ',u=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,i,{classNames:["guigui-toggler"]},l));return u.onTogglerClick=u.onTogglerClick.bind(u),u.labelText=o,u.isSelected=!1,u.value=u._targetObject[u._targetProperty]===!0,u.$el.addEventListener("click",u.onTogglerClick),u}return s(t,e),o(t,[{key:"onTogglerClick",value:function(e){this.onStartInteraction(),this.value=!this.value,this.onEndInteraction()}},{key:"value",get:function(){return this.isSelected},set:function(e){e?(this.isSelected=!0,(0,h.addClass)(this.$el,"guigui-toggler--selected")):(this.isSelected=!1,(0,h.removeClass)(this.$el,"guigui-toggler--selected")),this._targetObject[this._targetProperty]=e,this.emit("update",e)}}]),t}(u.default);t.default=c},function(e,t,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function n(e,t,i,r){var n=e[t];return(0,a.isArray)(i)?new v.default(e,t,i,r):(r=i,(0,a.isBoolean)(n)?new o.default(e,t,r):(0,a.isNumber)(n)?new u.default(e,t,r):(0,a.isFunction)(n)?new c.default(e,t,r):new d.default(e,t,r))}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n;var a=i(4),s=i(16),o=r(s),l=i(14),u=r(l),h=i(12),c=r(h),f=i(15),d=r(f),p=i(7),m=(r(p),i(13)),v=r(m)},function(e,t,i){"use strict";function r(e){return"object"===("undefined"==typeof Node?"undefined":n(Node))?e instanceof Node:e&&"object"===("undefined"==typeof e?"undefined":n(e))&&"number"==typeof e.nodeType&&"string"==typeof e.nodeName}Object.defineProperty(t,"__esModule",{value:!0});var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.default=r},function(e,t,i){"use strict";function r(e){console.warn("[guigui]",e)}Object.defineProperty(t,"__esModule",{value:!0}),t.warn=r},function(e,t,i){"use strict";function r(e,t){var i=Math.pow(10,t);return(Math.round(e*i)/i).toFixed(t)}function n(e,t){var i=String(t).split(".")[1];return r(e,i?i.length:0)}function a(e,t,i){return Math.min(Math.max(e,t),i)}function s(e,t){return Math.round(e/t)*t}Object.defineProperty(t,"__esModule",{value:!0}),t.toFixed=r,t.format=n,t.clamp=a,t.toPrecision=s},function(e,t,i){"use strict";function r(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");return"="===e[t-2]?2:"="===e[t-1]?1:0}function n(e){return 3*e.length/4-r(e)}function a(e){var t,i,n,a,s,o,l=e.length;s=r(e),o=new c(3*l/4-s),n=s>0?l-4:l;var u=0;for(t=0,i=0;t<n;t+=4,i+=3)a=h[e.charCodeAt(t)]<<18|h[e.charCodeAt(t+1)]<<12|h[e.charCodeAt(t+2)]<<6|h[e.charCodeAt(t+3)],o[u++]=a>>16&255,o[u++]=a>>8&255,o[u++]=255&a;return 2===s?(a=h[e.charCodeAt(t)]<<2|h[e.charCodeAt(t+1)]>>4,o[u++]=255&a):1===s&&(a=h[e.charCodeAt(t)]<<10|h[e.charCodeAt(t+1)]<<4|h[e.charCodeAt(t+2)]>>2,o[u++]=a>>8&255,o[u++]=255&a),o}function s(e){return u[e>>18&63]+u[e>>12&63]+u[e>>6&63]+u[63&e]}function o(e,t,i){for(var r,n=[],a=t;a<i;a+=3)r=(e[a]<<16)+(e[a+1]<<8)+e[a+2],n.push(s(r));return n.join("")}function l(e){for(var t,i=e.length,r=i%3,n="",a=[],s=16383,l=0,h=i-r;l<h;l+=s)a.push(o(e,l,l+s>h?h:l+s));return 1===r?(t=e[i-1],n+=u[t>>2],n+=u[t<<4&63],n+="=="):2===r&&(t=(e[i-2]<<8)+e[i-1],n+=u[t>>10],n+=u[t>>4&63],n+=u[t<<2&63],n+="="),a.push(n),a.join("")}t.byteLength=n,t.toByteArray=a,t.fromByteArray=l;for(var u=[],h=[],c="undefined"!=typeof Uint8Array?Uint8Array:Array,f="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",d=0,p=f.length;d<p;++d)u[d]=f[d],h[f.charCodeAt(d)]=d;h["-".charCodeAt(0)]=62,h["_".charCodeAt(0)]=63},function(e,t,i){"use strict";(function(e){function r(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(e){return!1}}function n(){return s.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function a(e,t){if(n()<t)throw new RangeError("Invalid typed array length");return s.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t),e.__proto__=s.prototype):(null===e&&(e=new s(t)),e.length=t),e}function s(e,t,i){if(!(s.TYPED_ARRAY_SUPPORT||this instanceof s))return new s(e,t,i);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return h(this,e)}return o(this,e,t,i)}function o(e,t,i,r){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?d(e,t,i,r):"string"==typeof t?c(e,t,i):p(e,t)}function l(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function u(e,t,i,r){return l(t),t<=0?a(e,t):void 0!==i?"string"==typeof r?a(e,t).fill(i,r):a(e,t).fill(i):a(e,t)}function h(e,t){if(l(t),e=a(e,t<0?0:0|m(t)),!s.TYPED_ARRAY_SUPPORT)for(var i=0;i<t;++i)e[i]=0;return e}function c(e,t,i){if("string"==typeof i&&""!==i||(i="utf8"),!s.isEncoding(i))throw new TypeError('"encoding" must be a valid string encoding');var r=0|g(t,i);e=a(e,r);var n=e.write(t,i);return n!==r&&(e=e.slice(0,n)),e}function f(e,t){var i=t.length<0?0:0|m(t.length);e=a(e,i);for(var r=0;r<i;r+=1)e[r]=255&t[r];return e}function d(e,t,i,r){if(t.byteLength,i<0||t.byteLength<i)throw new RangeError("'offset' is out of bounds");if(t.byteLength<i+(r||0))throw new RangeError("'length' is out of bounds");return t=void 0===i&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,i):new Uint8Array(t,i,r),s.TYPED_ARRAY_SUPPORT?(e=t,e.__proto__=s.prototype):e=f(e,t),e}function p(e,t){if(s.isBuffer(t)){var i=0|m(t.length);return e=a(e,i),0===e.length?e:(t.copy(e,0,0,i),e)}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||Z(t.length)?a(e,0):f(e,t);if("Buffer"===t.type&&K(t.data))return f(e,t.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function m(e){if(e>=n())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+n().toString(16)+" bytes");return 0|e}function v(e){return+e!=e&&(e=0),s.alloc(+e)}function g(e,t){if(s.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var i=e.length;if(0===i)return 0;for(var r=!1;;)switch(t){case"ascii":case"latin1":case"binary":return i;case"utf8":case"utf-8":case void 0:return W(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*i;case"hex":return i>>>1;case"base64":return q(e).length;default:if(r)return W(e).length;t=(""+t).toLowerCase(),r=!0}}function y(e,t,i){var r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===i||i>this.length)&&(i=this.length),i<=0)return"";if(i>>>=0,t>>>=0,i<=t)return"";for(e||(e="utf8");;)switch(e){case"hex":return I(this,t,i);case"utf8":case"utf-8":return R(this,t,i);case"ascii":return C(this,t,i);case"latin1":case"binary":return O(this,t,i);case"base64":
return P(this,t,i);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return D(this,t,i);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function _(e,t,i){var r=e[t];e[t]=e[i],e[i]=r}function b(e,t,i,r,n){if(0===e.length)return-1;if("string"==typeof i?(r=i,i=0):i>2147483647?i=2147483647:i<-2147483648&&(i=-2147483648),i=+i,isNaN(i)&&(i=n?0:e.length-1),i<0&&(i=e.length+i),i>=e.length){if(n)return-1;i=e.length-1}else if(i<0){if(!n)return-1;i=0}if("string"==typeof t&&(t=s.from(t,r)),s.isBuffer(t))return 0===t.length?-1:x(e,t,i,r,n);if("number"==typeof t)return t&=255,s.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?n?Uint8Array.prototype.indexOf.call(e,t,i):Uint8Array.prototype.lastIndexOf.call(e,t,i):x(e,[t],i,r,n);throw new TypeError("val must be string, number or Buffer")}function x(e,t,i,r,n){function a(e,t){return 1===s?e[t]:e.readUInt16BE(t*s)}var s=1,o=e.length,l=t.length;if(void 0!==r&&(r=String(r).toLowerCase(),"ucs2"===r||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;s=2,o/=2,l/=2,i/=2}var u;if(n){var h=-1;for(u=i;u<o;u++)if(a(e,u)===a(t,h===-1?0:u-h)){if(h===-1&&(h=u),u-h+1===l)return h*s}else h!==-1&&(u-=u-h),h=-1}else for(i+l>o&&(i=o-l),u=i;u>=0;u--){for(var c=!0,f=0;f<l;f++)if(a(e,u+f)!==a(t,f)){c=!1;break}if(c)return u}return-1}function w(e,t,i,r){i=Number(i)||0;var n=e.length-i;r?(r=Number(r),r>n&&(r=n)):r=n;var a=t.length;if(a%2!==0)throw new TypeError("Invalid hex string");r>a/2&&(r=a/2);for(var s=0;s<r;++s){var o=parseInt(t.substr(2*s,2),16);if(isNaN(o))return s;e[i+s]=o}return s}function T(e,t,i,r){return $(W(t,e.length-i),e,i,r)}function M(e,t,i,r){return $(X(t),e,i,r)}function E(e,t,i,r){return M(e,t,i,r)}function S(e,t,i,r){return $(q(t),e,i,r)}function A(e,t,i,r){return $(Y(t,e.length-i),e,i,r)}function P(e,t,i){return 0===t&&i===e.length?J.fromByteArray(e):J.fromByteArray(e.slice(t,i))}function R(e,t,i){i=Math.min(e.length,i);for(var r=[],n=t;n<i;){var a=e[n],s=null,o=a>239?4:a>223?3:a>191?2:1;if(n+o<=i){var l,u,h,c;switch(o){case 1:a<128&&(s=a);break;case 2:l=e[n+1],128===(192&l)&&(c=(31&a)<<6|63&l,c>127&&(s=c));break;case 3:l=e[n+1],u=e[n+2],128===(192&l)&&128===(192&u)&&(c=(15&a)<<12|(63&l)<<6|63&u,c>2047&&(c<55296||c>57343)&&(s=c));break;case 4:l=e[n+1],u=e[n+2],h=e[n+3],128===(192&l)&&128===(192&u)&&128===(192&h)&&(c=(15&a)<<18|(63&l)<<12|(63&u)<<6|63&h,c>65535&&c<1114112&&(s=c))}}null===s?(s=65533,o=1):s>65535&&(s-=65536,r.push(s>>>10&1023|55296),s=56320|1023&s),r.push(s),n+=o}return L(r)}function L(e){var t=e.length;if(t<=ee)return String.fromCharCode.apply(String,e);for(var i="",r=0;r<t;)i+=String.fromCharCode.apply(String,e.slice(r,r+=ee));return i}function C(e,t,i){var r="";i=Math.min(e.length,i);for(var n=t;n<i;++n)r+=String.fromCharCode(127&e[n]);return r}function O(e,t,i){var r="";i=Math.min(e.length,i);for(var n=t;n<i;++n)r+=String.fromCharCode(e[n]);return r}function I(e,t,i){var r=e.length;(!t||t<0)&&(t=0),(!i||i<0||i>r)&&(i=r);for(var n="",a=t;a<i;++a)n+=V(e[a]);return n}function D(e,t,i){for(var r=e.slice(t,i),n="",a=0;a<r.length;a+=2)n+=String.fromCharCode(r[a]+256*r[a+1]);return n}function k(e,t,i){if(e%1!==0||e<0)throw new RangeError("offset is not uint");if(e+t>i)throw new RangeError("Trying to access beyond buffer length")}function U(e,t,i,r,n,a){if(!s.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>n||t<a)throw new RangeError('"value" argument is out of bounds');if(i+r>e.length)throw new RangeError("Index out of range")}function F(e,t,i,r){t<0&&(t=65535+t+1);for(var n=0,a=Math.min(e.length-i,2);n<a;++n)e[i+n]=(t&255<<8*(r?n:1-n))>>>8*(r?n:1-n)}function N(e,t,i,r){t<0&&(t=4294967295+t+1);for(var n=0,a=Math.min(e.length-i,4);n<a;++n)e[i+n]=t>>>8*(r?n:3-n)&255}function B(e,t,i,r,n,a){if(i+r>e.length)throw new RangeError("Index out of range");if(i<0)throw new RangeError("Index out of range")}function z(e,t,i,r,n){return n||B(e,t,i,4,3.4028234663852886e38,-3.4028234663852886e38),Q.write(e,t,i,r,23,4),i+4}function j(e,t,i,r,n){return n||B(e,t,i,8,1.7976931348623157e308,-1.7976931348623157e308),Q.write(e,t,i,r,52,8),i+8}function G(e){if(e=H(e).replace(te,""),e.length<2)return"";for(;e.length%4!==0;)e+="=";return e}function H(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function V(e){return e<16?"0"+e.toString(16):e.toString(16)}function W(e,t){t=t||1/0;for(var i,r=e.length,n=null,a=[],s=0;s<r;++s){if(i=e.charCodeAt(s),i>55295&&i<57344){if(!n){if(i>56319){(t-=3)>-1&&a.push(239,191,189);continue}if(s+1===r){(t-=3)>-1&&a.push(239,191,189);continue}n=i;continue}if(i<56320){(t-=3)>-1&&a.push(239,191,189),n=i;continue}i=(n-55296<<10|i-56320)+65536}else n&&(t-=3)>-1&&a.push(239,191,189);if(n=null,i<128){if((t-=1)<0)break;a.push(i)}else if(i<2048){if((t-=2)<0)break;a.push(i>>6|192,63&i|128)}else if(i<65536){if((t-=3)<0)break;a.push(i>>12|224,i>>6&63|128,63&i|128)}else{if(!(i<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;a.push(i>>18|240,i>>12&63|128,i>>6&63|128,63&i|128)}}return a}function X(e){for(var t=[],i=0;i<e.length;++i)t.push(255&e.charCodeAt(i));return t}function Y(e,t){for(var i,r,n,a=[],s=0;s<e.length&&!((t-=2)<0);++s)i=e.charCodeAt(s),r=i>>8,n=i%256,a.push(n),a.push(r);return a}function q(e){return J.toByteArray(G(e))}function $(e,t,i,r){for(var n=0;n<r&&!(n+i>=t.length||n>=e.length);++n)t[n+i]=e[n];return n}function Z(e){return e!==e}var J=i(21),Q=i(33),K=i(37);t.Buffer=s,t.SlowBuffer=v,t.INSPECT_MAX_BYTES=50,s.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:r(),t.kMaxLength=n(),s.poolSize=8192,s._augment=function(e){return e.__proto__=s.prototype,e},s.from=function(e,t,i){return o(null,e,t,i)},s.TYPED_ARRAY_SUPPORT&&(s.prototype.__proto__=Uint8Array.prototype,s.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&s[Symbol.species]===s&&Object.defineProperty(s,Symbol.species,{value:null,configurable:!0})),s.alloc=function(e,t,i){return u(null,e,t,i)},s.allocUnsafe=function(e){return h(null,e)},s.allocUnsafeSlow=function(e){return h(null,e)},s.isBuffer=function(e){return!(null==e||!e._isBuffer)},s.compare=function(e,t){if(!s.isBuffer(e)||!s.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var i=e.length,r=t.length,n=0,a=Math.min(i,r);n<a;++n)if(e[n]!==t[n]){i=e[n],r=t[n];break}return i<r?-1:r<i?1:0},s.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},s.concat=function(e,t){if(!K(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return s.alloc(0);var i;if(void 0===t)for(t=0,i=0;i<e.length;++i)t+=e[i].length;var r=s.allocUnsafe(t),n=0;for(i=0;i<e.length;++i){var a=e[i];if(!s.isBuffer(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(r,n),n+=a.length}return r},s.byteLength=g,s.prototype._isBuffer=!0,s.prototype.swap16=function(){var e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)_(this,t,t+1);return this},s.prototype.swap32=function(){var e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)_(this,t,t+3),_(this,t+1,t+2);return this},s.prototype.swap64=function(){var e=this.length;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)_(this,t,t+7),_(this,t+1,t+6),_(this,t+2,t+5),_(this,t+3,t+4);return this},s.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?R(this,0,e):y.apply(this,arguments)},s.prototype.equals=function(e){if(!s.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===s.compare(this,e)},s.prototype.inspect=function(){var e="",i=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,i).match(/.{2}/g).join(" "),this.length>i&&(e+=" ... ")),"<Buffer "+e+">"},s.prototype.compare=function(e,t,i,r,n){if(!s.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===i&&(i=e?e.length:0),void 0===r&&(r=0),void 0===n&&(n=this.length),t<0||i>e.length||r<0||n>this.length)throw new RangeError("out of range index");if(r>=n&&t>=i)return 0;if(r>=n)return-1;if(t>=i)return 1;if(t>>>=0,i>>>=0,r>>>=0,n>>>=0,this===e)return 0;for(var a=n-r,o=i-t,l=Math.min(a,o),u=this.slice(r,n),h=e.slice(t,i),c=0;c<l;++c)if(u[c]!==h[c]){a=u[c],o=h[c];break}return a<o?-1:o<a?1:0},s.prototype.includes=function(e,t,i){return this.indexOf(e,t,i)!==-1},s.prototype.indexOf=function(e,t,i){return b(this,e,t,i,!0)},s.prototype.lastIndexOf=function(e,t,i){return b(this,e,t,i,!1)},s.prototype.write=function(e,t,i,r){if(void 0===t)r="utf8",i=this.length,t=0;else if(void 0===i&&"string"==typeof t)r=t,i=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(i)?(i|=0,void 0===r&&(r="utf8")):(r=i,i=void 0)}var n=this.length-t;if((void 0===i||i>n)&&(i=n),e.length>0&&(i<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var a=!1;;)switch(r){case"hex":return w(this,e,t,i);case"utf8":case"utf-8":return T(this,e,t,i);case"ascii":return M(this,e,t,i);case"latin1":case"binary":return E(this,e,t,i);case"base64":return S(this,e,t,i);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return A(this,e,t,i);default:if(a)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),a=!0}},s.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var ee=4096;s.prototype.slice=function(e,t){var i=this.length;e=~~e,t=void 0===t?i:~~t,e<0?(e+=i,e<0&&(e=0)):e>i&&(e=i),t<0?(t+=i,t<0&&(t=0)):t>i&&(t=i),t<e&&(t=e);var r;if(s.TYPED_ARRAY_SUPPORT)r=this.subarray(e,t),r.__proto__=s.prototype;else{var n=t-e;r=new s(n,void 0);for(var a=0;a<n;++a)r[a]=this[a+e]}return r},s.prototype.readUIntLE=function(e,t,i){e|=0,t|=0,i||k(e,t,this.length);for(var r=this[e],n=1,a=0;++a<t&&(n*=256);)r+=this[e+a]*n;return r},s.prototype.readUIntBE=function(e,t,i){e|=0,t|=0,i||k(e,t,this.length);for(var r=this[e+--t],n=1;t>0&&(n*=256);)r+=this[e+--t]*n;return r},s.prototype.readUInt8=function(e,t){return t||k(e,1,this.length),this[e]},s.prototype.readUInt16LE=function(e,t){return t||k(e,2,this.length),this[e]|this[e+1]<<8},s.prototype.readUInt16BE=function(e,t){return t||k(e,2,this.length),this[e]<<8|this[e+1]},s.prototype.readUInt32LE=function(e,t){return t||k(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},s.prototype.readUInt32BE=function(e,t){return t||k(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},s.prototype.readIntLE=function(e,t,i){e|=0,t|=0,i||k(e,t,this.length);for(var r=this[e],n=1,a=0;++a<t&&(n*=256);)r+=this[e+a]*n;return n*=128,r>=n&&(r-=Math.pow(2,8*t)),r},s.prototype.readIntBE=function(e,t,i){e|=0,t|=0,i||k(e,t,this.length);for(var r=t,n=1,a=this[e+--r];r>0&&(n*=256);)a+=this[e+--r]*n;return n*=128,a>=n&&(a-=Math.pow(2,8*t)),a},s.prototype.readInt8=function(e,t){return t||k(e,1,this.length),128&this[e]?(255-this[e]+1)*-1:this[e]},s.prototype.readInt16LE=function(e,t){t||k(e,2,this.length);var i=this[e]|this[e+1]<<8;return 32768&i?4294901760|i:i},s.prototype.readInt16BE=function(e,t){t||k(e,2,this.length);var i=this[e+1]|this[e]<<8;return 32768&i?4294901760|i:i},s.prototype.readInt32LE=function(e,t){return t||k(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},s.prototype.readInt32BE=function(e,t){return t||k(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},s.prototype.readFloatLE=function(e,t){return t||k(e,4,this.length),Q.read(this,e,!0,23,4)},s.prototype.readFloatBE=function(e,t){return t||k(e,4,this.length),Q.read(this,e,!1,23,4)},s.prototype.readDoubleLE=function(e,t){return t||k(e,8,this.length),Q.read(this,e,!0,52,8)},s.prototype.readDoubleBE=function(e,t){return t||k(e,8,this.length),Q.read(this,e,!1,52,8)},s.prototype.writeUIntLE=function(e,t,i,r){if(e=+e,t|=0,i|=0,!r){var n=Math.pow(2,8*i)-1;U(this,e,t,i,n,0)}var a=1,s=0;for(this[t]=255&e;++s<i&&(a*=256);)this[t+s]=e/a&255;return t+i},s.prototype.writeUIntBE=function(e,t,i,r){if(e=+e,t|=0,i|=0,!r){var n=Math.pow(2,8*i)-1;U(this,e,t,i,n,0)}var a=i-1,s=1;for(this[t+a]=255&e;--a>=0&&(s*=256);)this[t+a]=e/s&255;return t+i},s.prototype.writeUInt8=function(e,t,i){return e=+e,t|=0,i||U(this,e,t,1,255,0),s.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},s.prototype.writeUInt16LE=function(e,t,i){return e=+e,t|=0,i||U(this,e,t,2,65535,0),s.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):F(this,e,t,!0),t+2},s.prototype.writeUInt16BE=function(e,t,i){return e=+e,t|=0,i||U(this,e,t,2,65535,0),s.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):F(this,e,t,!1),t+2},s.prototype.writeUInt32LE=function(e,t,i){return e=+e,t|=0,i||U(this,e,t,4,4294967295,0),s.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):N(this,e,t,!0),t+4},s.prototype.writeUInt32BE=function(e,t,i){return e=+e,t|=0,i||U(this,e,t,4,4294967295,0),s.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):N(this,e,t,!1),t+4},s.prototype.writeIntLE=function(e,t,i,r){if(e=+e,t|=0,!r){var n=Math.pow(2,8*i-1);U(this,e,t,i,n-1,-n)}var a=0,s=1,o=0;for(this[t]=255&e;++a<i&&(s*=256);)e<0&&0===o&&0!==this[t+a-1]&&(o=1),this[t+a]=(e/s>>0)-o&255;return t+i},s.prototype.writeIntBE=function(e,t,i,r){if(e=+e,t|=0,!r){var n=Math.pow(2,8*i-1);U(this,e,t,i,n-1,-n)}var a=i-1,s=1,o=0;for(this[t+a]=255&e;--a>=0&&(s*=256);)e<0&&0===o&&0!==this[t+a+1]&&(o=1),this[t+a]=(e/s>>0)-o&255;return t+i},s.prototype.writeInt8=function(e,t,i){return e=+e,t|=0,i||U(this,e,t,1,127,-128),s.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},s.prototype.writeInt16LE=function(e,t,i){return e=+e,t|=0,i||U(this,e,t,2,32767,-32768),s.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):F(this,e,t,!0),t+2},s.prototype.writeInt16BE=function(e,t,i){return e=+e,t|=0,i||U(this,e,t,2,32767,-32768),s.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):F(this,e,t,!1),t+2},s.prototype.writeInt32LE=function(e,t,i){return e=+e,t|=0,i||U(this,e,t,4,2147483647,-2147483648),s.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):N(this,e,t,!0),t+4},s.prototype.writeInt32BE=function(e,t,i){return e=+e,t|=0,i||U(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),s.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):N(this,e,t,!1),t+4},s.prototype.writeFloatLE=function(e,t,i){return z(this,e,t,!0,i)},s.prototype.writeFloatBE=function(e,t,i){return z(this,e,t,!1,i)},s.prototype.writeDoubleLE=function(e,t,i){return j(this,e,t,!0,i)},s.prototype.writeDoubleBE=function(e,t,i){return j(this,e,t,!1,i)},s.prototype.copy=function(e,t,i,r){if(i||(i=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<i&&(r=i),r===i)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(i<0||i>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-i&&(r=e.length-t+i);var n,a=r-i;if(this===e&&i<t&&t<r)for(n=a-1;n>=0;--n)e[n+t]=this[n+i];else if(a<1e3||!s.TYPED_ARRAY_SUPPORT)for(n=0;n<a;++n)e[n+t]=this[n+i];else Uint8Array.prototype.set.call(e,this.subarray(i,i+a),t);return a},s.prototype.fill=function(e,t,i,r){if("string"==typeof e){if("string"==typeof t?(r=t,t=0,i=this.length):"string"==typeof i&&(r=i,i=this.length),1===e.length){var n=e.charCodeAt(0);n<256&&(e=n)}if(void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!s.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<i)throw new RangeError("Out of range index");if(i<=t)return this;t>>>=0,i=void 0===i?this.length:i>>>0,e||(e=0);var a;if("number"==typeof e)for(a=t;a<i;++a)this[a]=e;else{var o=s.isBuffer(e)?e:W(new s(e,r).toString()),l=o.length;for(a=0;a<i-t;++a)this[a+t]=o[a%l]}return this};var te=/[^+\/0-9A-Za-z-_]/g}).call(t,i(49))},function(e,t,i){t=e.exports=i(1)(),t.push([e.i,".guigui-colorpicker-label{font-size:12px;line-height:18px;font-style:italic;text-align:center;overflow:hidden;text-overflow:ellipsis;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;float:left;width:calc(31.5% - 20px);padding:0 5px;margin-right:10px}.guigui-colorpicker{clear:both}.guigui-colorpicker-state{background:#b89089;width:calc(68.5% - 8px);height:10px;float:left;padding:4px;box-shadow:inset 0 1px 8px rgba(0,0,0,.2),inset 0 -1px 1px hsla(0,0%,100%,.0980392)}.guigui-colorpicker-text{color:#000;background:none;font-size:11px;line-height:12px;font-family:Arial;margin:0;border:0;padding:3px 0;display:inline-block;vertical-align:middle;white-space:normal;box-sizing:content-box;outline:0;position:relative;top:-4px}@-moz-document url-prefix(){.guigui-colorpicker-text{top:-6px}}.guigui-colorpicker .Scp{padding:5px;background:#30343c;width:175px;height:150px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;position:absolute;z-index:999;top:26px;right:4px;display:none;box-shadow:inset 0 1px 1px hsla(0,0%,100%,.0588235);border:1px solid #1d1f24}.guigui-colorpicker .Scp-saturation{background:-webkit-linear-gradient(left,#fff,#ff2600);background:linear-gradient(90deg,#fff 0,#ff2600);position:relative;width:calc(100% - 25px);height:100%;float:left;margin-right:5px}.guigui-colorpicker .Scp-hue{width:20px;height:100%;position:relative;float:left;background:-webkit-linear-gradient(red,#f0f 17%,#00f 34%,#0ff 50%,#0f0 67%,#ff0 84%,red);background:linear-gradient(red,#f0f 17%,#00f 34%,#0ff 50%,#0f0 67%,#ff0 84%,red)}.guigui-colorpicker .Scp-brightness{width:100%;height:100%;background:-webkit-linear-gradient(hsla(0,0%,100%,0),#000);background:linear-gradient(hsla(0,0%,100%,0),#000)}.guigui-colorpicker .Scp-sbSelector{-webkit-transform:translateX(38.3152px) translateY(41.7647px);transform:translateX(38.3152px) translateY(41.7647px);background:#b89089;border:2px solid #000;position:absolute;width:14px;height:14px;border-radius:10px;top:-7px;left:-7px;box-sizing:border-box;z-index:10}.guigui-colorpicker .Scp-hSelector{-webkit-transform:translateY(146.277px);transform:translateY(146.277px);position:absolute;background:#fff;border-bottom:1px solid #000;right:-3px;width:10px;height:2px}.guigui-colorpicker--opened .Scp{display:block}",""])},function(e,t,i){t=e.exports=i(1)(),t.push([e.i,".guigui-launcher-label{font-size:12px;line-height:18px;font-style:italic;text-align:center;overflow:hidden;text-overflow:ellipsis}.guigui-launcher,.guigui-launcher-label{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.guigui-launcher{cursor:pointer}.guigui .guigui-launcher--pressed{background:#36383f}.guigui-launcher-label{text-transform:capitalize}.guigui-launcher-label span{position:relative;top:-1px;left:4px;color:#3d77eb}",""])},function(e,t,i){t=e.exports=i(1)(),t.push([e.i,".guigui-select-label{font-size:12px;line-height:18px;font-style:italic;text-align:center;overflow:hidden;text-overflow:ellipsis;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;float:left;width:calc(31.5% - 20px);padding:0 5px;margin-right:10px}.guigui-select select{width:calc(68.5% - 10px);background:#22252b;color:#3d77eb;line-height:12px;box-sizing:content-box}.guigui-select{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.guigui-select select{border:none;-webkit-appearance:none;-moz-appearance:none;appearance:none;padding:3px 5px;border-radius:0;background-image:url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiA/PjwhRE9DVFlQRSBzdmcgIFBVQkxJQyAnLS8vVzNDLy9EVEQgU1ZHIDEuMS8vRU4nICAnaHR0cDovL3d3dy53My5vcmcvR3JhcGhpY3MvU1ZHLzEuMS9EVEQvc3ZnMTEuZHRkJz48c3ZnIGhlaWdodD0iNTEycHgiIGZpbGw9IiMzRDc3RUIiIGlkPSJMYXllcl8xIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA1MTIgNTEyOyIgdmVyc2lvbj0iMS4xIiB2aWV3Qm94PSIwIDAgNTEyIDUxMiIgd2lkdGg9IjUxMnB4IiB4bWw6c3BhY2U9InByZXNlcnZlIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIj48cGF0aCBkPSJNOTguOSwxODQuN2wxLjgsMi4xbDEzNiwxNTYuNWM0LjYsNS4zLDExLjUsOC42LDE5LjIsOC42YzcuNywwLDE0LjYtMy40LDE5LjItOC42TDQxMSwxODcuMWwyLjMtMi42ICBjMS43LTIuNSwyLjctNS41LDIuNy04LjdjMC04LjctNy40LTE1LjgtMTYuNi0xNS44djBIMTEyLjZ2MGMtOS4yLDAtMTYuNiw3LjEtMTYuNiwxNS44Qzk2LDE3OS4xLDk3LjEsMTgyLjIsOTguOSwxODQuN3oiLz48L3N2Zz4=);background-repeat:no-repeat;background-size:14px 14px;background-position:calc(100% - 2px) 50%}.guigui-select select:focus{outline:none}.guigui-select select::-moz-focus-inner{border:0}@-moz-document url-prefix(){.guigui-select select{padding:1px 5px;position:relative;top:-3px}}",""])},function(e,t,i){t=e.exports=i(1)(),t.push([e.i,".guigui-slider-label{font-size:12px;line-height:18px;font-style:italic;text-align:center;overflow:hidden;text-overflow:ellipsis;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;float:left;width:calc(29.5% - 10px);padding:0 5px}.guigui-slider-container{float:left;width:calc(50% - 20px);margin:0 10px;height:100%;position:relative;cursor:ew-resize}.guigui-slider-background,.guigui-slider-handle{position:absolute;width:100%;height:18%;top:5%;pointer-events:none}.guigui-slider-background{background:-webkit-linear-gradient(left,#3d77eb,#00d2da);background:linear-gradient(90deg,#3d77eb 0,#00d2da);pointer-events:none}.guigui-slider-handle{background:#22252b;right:0;-webkit-transform-origin:right center 0;transform-origin:right center 0}.guigui-slider-indice{color:#6b6b6b;font-size:9px;line-height:7px;bottom:0;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;position:absolute;pointer-events:none}.guigui-slider-indice.guigui-slider-indice--min{left:0}.guigui-slider-indice.guigui-slider-indice--max{right:0}.guigui-slider-value{float:left;font-family:Courier New,Arial;background:#22252b;color:#3d77eb;height:100%;line-height:1;width:20.5%;font-size:10px;text-align:center;margin:0;border:0;padding:0;display:inline-block;vertical-align:middle;white-space:normal;box-sizing:content-box;outline:0}",""])},function(e,t,i){t=e.exports=i(1)(),t.push([e.i,".guigui-text-label{font-size:12px;line-height:18px;font-style:italic;text-align:center;overflow:hidden;text-overflow:ellipsis;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;float:left;width:calc(31.5% - 20px);padding:0 5px;margin-right:10px}.guigui-text-value{width:calc(68.5% - 10px);background:#22252b;color:#3d77eb;line-height:12px;box-sizing:content-box}.guigui-text{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.guigui-text-value{float:left;height:10px;font-size:11px;text-align:left;margin:0;border:0;padding:4px 5px;display:inline-block;vertical-align:middle;white-space:normal;outline:0}",""])},function(e,t,i){t=e.exports=i(1)(),t.push([e.i,".guigui-toggler-label{font-size:12px;line-height:18px;font-style:italic;text-align:center;overflow:hidden;text-overflow:ellipsis}.guigui-toggler,.guigui-toggler-label{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.guigui-toggler{cursor:pointer}.guigui-toggler-label{float:left;width:calc(90% - 27px);padding:0 5px}.guigui-toggler-handle,.guigui-toggler-state{border-radius:2px}.guigui-toggler-state{position:relative;background:#1d1f24;height:100%;width:17px;float:left;margin:0 0 0 10px;box-shadow:0 2px 1px hsla(0,0%,100%,.0470588)}.guigui-toggler-handle{position:absolute;background:#3d77eb;width:54%;height:50%;top:25%;left:23%;display:none}.guigui-toggler--selected .guigui-toggler-handle{display:block}",""])},function(e,t,i){t=e.exports=i(1)(),t.push([e.i,".guigui-component,.guigui-folder,.guigui-panel,.guigui-toggle{border:1px solid #111;box-shadow:inset 0 1px 1px hsla(0,0%,100%,.06);background:-webkit-linear-gradient(hsla(0,0%,100%,.0196078),hsla(0,0%,100%,0)) #292c33;background:linear-gradient(hsla(0,0%,100%,.0196078),hsla(0,0%,100%,0)) #292c33}.guigui{position:absolute;z-index:999;top:10px;right:10px;width:calc(100% - 20px);color:#fff}.guigui-container{margin-top:30px;display:none}.guigui-container--opened{display:block}.guigui-component,.guigui-folder,.guigui-panel{box-sizing:border-box;padding:5px;position:relative}.guigui-folder,.guigui-panel{background:-webkit-linear-gradient(hsla(0,0%,100%,.0196078),hsla(0,0%,100%,0)) #22252b;background:linear-gradient(hsla(0,0%,100%,.0196078),hsla(0,0%,100%,0)) #22252b}.guigui-panel{width:300px;float:right;margin:10px 0 0 10px}.guigui-panel>.guigui-panel-content{display:none}.guigui-panel-label{margin:0;text-align:center;width:100%;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.guigui-panel--opened>.guigui-panel-content{display:block}.guigui-folder{margin:5px 0}.guigui-folder>.guigui-folder-content{margin-top:5px;display:none}.guigui-folder-head{padding:1px 0}.guigui-folder-label{margin:0;text-align:center;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.guigui-folder--opened>.guigui-folder-content{display:block}.guigui-component{margin-top:3px;height:17px;box-sizing:content-box}.guigui-component+.guigui-component{margin-top:-1px}.guigui{font-family:Arial,sans-serif;color:#bbbdc0}.guigui-folder-label,.guigui-panel-label{font-weight:400}.guigui-folder-label{font-size:13px}.guigui-panel-label{font-size:14px;line-height:21px}.guigui-toggle{position:absolute;top:0;right:0;width:30px;height:30px}.guigui-toggle-line{-webkit-transition:-webkit-transform .5s cubic-bezier(.19,1,.22,1);transition:-webkit-transform .5s cubic-bezier(.19,1,.22,1);transition:transform .5s cubic-bezier(.19,1,.22,1);transition:transform .5s cubic-bezier(.19,1,.22,1),-webkit-transform .5s cubic-bezier(.19,1,.22,1)}.guigui-toggle--opened .guigui-toggle-line{-webkit-transform:translate3d(-50%,-50%,1px) rotate(45deg);transform:translate3d(-50%,-50%,1px) rotate(45deg)}.guigui-toggle--opened .guigui-toggle-line:first-child{-webkit-transform:translate3d(-50%,-50%,1px) rotate(135deg);transform:translate3d(-50%,-50%,1px) rotate(135deg)}.guigui-folder-head,.guigui-panel-head,.guigui-toggle{cursor:pointer}.guigui-folder-toggle,.guigui-panel-toggle{position:absolute}.guigui-panel-toggle{top:11px;right:11px;width:14px;height:14px}.guigui-folder-toggle{top:7px;right:7px;width:12px;height:12px}.guigui-folder-toggle-line,.guigui-panel-toggle-line,.guigui-toggle-line{position:absolute;top:50%;left:50%;-webkit-transform:translate3d(-50%,-50%,1px);transform:translate3d(-50%,-50%,1px);width:2px;height:100%;background:#3d77eb}.guigui-folder-toggle-line:first-child,.guigui-panel-toggle-line:first-child,.guigui-toggle-line:first-child{-webkit-transform:translate3d(-50%,-50%,1px) rotate(90deg);transform:translate3d(-50%,-50%,1px) rotate(90deg)}.guigui-toggle-line{height:60%}.guigui-folder>.guigui-folder-head .guigui-folder-toggle-line:last-child{display:block}.guigui-folder--opened>.guigui-folder-head .guigui-folder-toggle-line:last-child{display:none}",""])},function(e,t,i){"use strict";function r(e,t){var i,r,n,a=[];o(t);for(i in t)d.call(t,i)&&(r=t[i],d.call(c.transform,i)?(n=c.transform[i],h(r)&&(r=r.join(n.separator)),a.push(i+"("+f(r,n.defaultUnit,n.separator)+")")):d.call(c,i)?(n=c[i],h(r)&&(r=r.join(n.separator)),e.style[u(i)]=f(r,n.defaultUnit,n.separator)):console.warn("dom-transform: this property (`"+i+"`) is not supported."));e.style[p]=a.join(" ")}function n(e,t){var i=e.style;if("string"==typeof t)return d.call(c.transform,t)?i[p]:i[u(t)];t||(t=l());var r={};return t.forEach(function(e){r[e]=i[u(e)]}),r}function a(e,t){var i=e.style;return"string"==typeof t?void(i[u(t)]=null):(t||(t=l()),void t.forEach(function(e){i[u(e)]=null}))}function s(){return p.length>0}function o(e){var t;for(t in e)d.call(m,t)&&(e[m[t]]=e[t],delete e[t])}function l(){return Object.keys(c).map(function(e){return e})}var u=i(39),h=i(34),c=i(32),f=i(31),d=Object.prototype.hasOwnProperty,p=u("transform"),m={x:"translateX",y:"translateY",z:"translateZ",origin:"transformOrigin"};t=e.exports=r,t.get=n,t.reset=a,t.isSupported=s},function(e,t,i){"use strict";var r=i(48),n=/^-?\d+(\.\d+)?$/;e.exports=function(e,t,i){if(i=i||",","number"==typeof e)return""+e+t;var a=new RegExp(i,"g"),s=e.split(a.test(e)?i:" ");return s.map(function(e){return e=r(e),n.test(e)&&(e+=t),e}).join(i)}},function(e,t,i){"use strict";e.exports={transform:{translate:{defaultUnit:"px"},translate3d:{defaultUnit:"px"},translateX:{defaultUnit:"px"},translateY:{defaultUnit:"px"},translateZ:{defaultUnit:"px"},scale:{defaultUnit:""},scale3d:{defaultUnit:""},scaleX:{defaultUnit:""},scaleY:{defaultUnit:""},scaleZ:{defaultUnit:""},rotate:{defaultUnit:"deg"},rotate3d:{defaultUnit:""},rotateX:{defaultUnit:"deg"},rotateY:{defaultUnit:"deg"},rotateZ:{defaultUnit:"deg"},skew:{defaultUnit:"deg"},skewX:{defaultUnit:"deg"},skewY:{defaultUnit:"deg"},perspective:{defaultUnit:"px"},matrix:{defaultUnit:""},matrix3d:{defaultUnit:""}},transformOrigin:{defaultUnit:"px",separator:" "}}},function(e,t){t.read=function(e,t,i,r,n){var a,s,o=8*n-r-1,l=(1<<o)-1,u=l>>1,h=-7,c=i?n-1:0,f=i?-1:1,d=e[t+c];for(c+=f,a=d&(1<<-h)-1,d>>=-h,h+=o;h>0;a=256*a+e[t+c],c+=f,h-=8);for(s=a&(1<<-h)-1,a>>=-h,h+=r;h>0;s=256*s+e[t+c],c+=f,h-=8);if(0===a)a=1-u;else{if(a===l)return s?NaN:(d?-1:1)*(1/0);s+=Math.pow(2,r),a-=u}return(d?-1:1)*s*Math.pow(2,a-r)},t.write=function(e,t,i,r,n,a){var s,o,l,u=8*a-n-1,h=(1<<u)-1,c=h>>1,f=23===n?Math.pow(2,-24)-Math.pow(2,-77):0,d=r?0:a-1,p=r?1:-1,m=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(o=isNaN(t)?1:0,s=h):(s=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-s))<1&&(s--,l*=2),t+=s+c>=1?f/l:f*Math.pow(2,1-c),t*l>=2&&(s++,l/=2),s+c>=h?(o=0,s=h):s+c>=1?(o=(t*l-1)*Math.pow(2,n),s+=c):(o=t*Math.pow(2,c-1)*Math.pow(2,n),s=0));n>=8;e[i+d]=255&o,d+=p,o/=256,n-=8);for(s=s<<n|o,u+=n;u>0;e[i+d]=255&s,d+=p,s/=256,u-=8);e[i+d-p]|=128*m}},function(e,t){var i=Array.isArray,r=Object.prototype.toString;e.exports=i||function(e){return!!e&&"[object Array]"==r.call(e)}},function(e,t){function i(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}function r(e){return"function"==typeof e.readFloatLE&&"function"==typeof e.slice&&i(e.slice(0,0))}e.exports=function(e){return null!=e&&(i(e)||r(e)||!!e._isBuffer)}},function(e,t,i){"use strict";var r=i(38);e.exports=function(e){var t=r(e);if("string"===t){if(!e.trim())return!1}else if("number"!==t)return!1;return e-e+1>=0}},function(e,t){var i={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==i.call(e)}},function(e,t,i){(function(t){var r=i(35),n=Object.prototype.toString;e.exports=function(e){if("undefined"==typeof e)return"undefined";if(null===e)return"null";if(e===!0||e===!1||e instanceof Boolean)return"boolean";if("string"==typeof e||e instanceof String)return"string";if("number"==typeof e||e instanceof Number)return"number";if("function"==typeof e||e instanceof Function)return"function";if("undefined"!=typeof Array.isArray&&Array.isArray(e))return"array";if(e instanceof RegExp)return"regexp";if(e instanceof Date)return"date";var i=n.call(e)
;return"[object RegExp]"===i?"regexp":"[object Date]"===i?"date":"[object Arguments]"===i?"arguments":"[object Error]"===i?"error":"undefined"!=typeof t&&r(e)?"buffer":"[object Set]"===i?"set":"[object WeakSet]"===i?"weakset":"[object Map]"===i?"map":"[object WeakMap]"===i?"weakmap":"[object Symbol]"===i?"symbol":"[object Int8Array]"===i?"int8array":"[object Uint8Array]"===i?"uint8array":"[object Uint8ClampedArray]"===i?"uint8clampedarray":"[object Int16Array]"===i?"int16array":"[object Uint16Array]"===i?"uint16array":"[object Int32Array]"===i?"int32array":"[object Uint32Array]"===i?"uint32array":"[object Float32Array]"===i?"float32array":"[object Float64Array]"===i?"float64array":"object"}}).call(t,i(22).Buffer)},function(e,t){function i(e){if(e=e.replace(/-([a-z])/g,function(e,t){return t.toUpperCase()}),void 0!==a[e])return e;for(var t=e.charAt(0).toUpperCase()+e.slice(1),i=s.length;i--;){var r=s[i]+t;if(void 0!==a[r])return r}return e}function r(e){return e in l?l[e]:l[e]=i(e)}function n(e){return e=i(e),o.test(e)&&(e="-"+e.replace(o,"-$1"),o.lastIndex=0),e.toLowerCase()}var a="undefined"!=typeof document?document.createElement("p").style:{},s=["O","ms","Moz","Webkit"],o=/([A-Z])/g,l={};e.exports=r,e.exports.dash=n},function(e,t,i){"use strict";!function(){function t(e){return e=e||{},this.color=null,this.width=0,this.widthUnits="px",this.height=0,this.heightUnits="px",this.hue=0,this.position={x:0,y:0},this.huePosition=0,this.saturationWidth=0,this.hueHeight=0,this.maxHue=0,this.inputIsNumber=!1,this._onSaturationMouseDown=this._onSaturationMouseDown.bind(this),this._onSaturationMouseMove=this._onSaturationMouseMove.bind(this),this._onSaturationMouseUp=this._onSaturationMouseUp.bind(this),this._onHueMouseDown=this._onHueMouseDown.bind(this),this._onHueMouseMove=this._onHueMouseMove.bind(this),this._onHueMouseUp=this._onHueMouseUp.bind(this),this.$el=document.createElement("div"),this.$el.className="Scp",this.$el.innerHTML=['<div class="Scp-saturation">','<div class="Scp-brightness"></div>','<div class="Scp-sbSelector"></div>',"</div>",'<div class="Scp-hue">','<div class="Scp-hSelector"></div>',"</div>"].join(""),this.$saturation=this.$el.querySelector(".Scp-saturation"),this.$hue=this.$el.querySelector(".Scp-hue"),this.$sbSelector=this.$el.querySelector(".Scp-sbSelector"),this.$hSelector=this.$el.querySelector(".Scp-hSelector"),this.$saturation.addEventListener("mousedown",this._onSaturationMouseDown),this.$saturation.addEventListener("touchstart",this._onSaturationMouseDown),this.$hue.addEventListener("mousedown",this._onHueMouseDown),this.$hue.addEventListener("touchstart",this._onHueMouseDown),e.el&&this.appendTo(e.el),e.background&&this.setBackgroundColor(e.background),e.widthUnits&&(this.widthUnits=e.widthUnits),e.heightUnits&&(this.heightUnits=e.heightUnits),this.setSize(e.width||175,e.height||150),this.setColor(e.color),this}function r(e,t,i){return Math.min(Math.max(e,t),i)}function n(e){return e=0===e.type.indexOf("touch")?e.touches[0]:e,{x:e.clientX,y:e.clientY}}function a(e){return e="#"+("00000"+(0|e).toString(16)).substr(-6)}var s=i(8),o=i(36),l=i(47),u=i(30);s(t.prototype),t.prototype.appendTo=function(e){return e.appendChild(this.$el),this},t.prototype.remove=function(){this._onSaturationMouseUp(),this._onHueMouseUp(),this.$saturation.removeEventListener("mousedown",this._onSaturationMouseDown),this.$saturation.removeEventListener("touchstart",this._onSaturationMouseDown),this.$hue.removeEventListener("mousedown",this._onHueMouseDown),this.$hue.removeEventListener("touchstart",this._onHueMouseDown),this.off(),this.$el.parentNode&&this.$el.parentNode.removeChild(this.$el)},t.prototype.setColor=function(e){o(e)?(this.inputIsNumber=!0,e=a(e)):this.inputIsNumber=!1,this.color=l(e);var t=this.color.toHsv();return isNaN(t.h)||(this.hue=t.h),this._moveSelectorTo(this.saturationWidth*t.s,(1-t.v)*this.hueHeight),this._moveHueTo((1-this.hue/360)*this.hueHeight),this._updateHue(),this},t.prototype.setSize=function(e,t){return this.width=e,this.height=t,this.$el.style.width=this.width+this.widthUnits,this.$el.style.height=this.height+this.heightUnits,this.saturationWidth=this.width-25,this.$saturation.style.width=this.saturationWidth+"px",this.hueHeight=this.height,this.maxHue=this.hueHeight-2,this},t.prototype.setBackgroundColor=function(e){return o(e)&&(e=a(e)),this.$el.style.padding="5px",this.$el.style.background=l(e).toHexString(),this},t.prototype.setNoBackground=function(){this.$el.style.padding="0px",this.$el.style.background="none"},t.prototype.onChange=function(e){return this.on("update",e),this.emit("update",this.getHexString()),this},t.prototype.getColor=function(){return this.inputIsNumber?this.getHexNumber():this.color.toString()},t.prototype.getHexString=function(){return this.color.toHexString().toUpperCase()},t.prototype.getHexNumber=function(){return parseInt(this.color.toHex(),16)},t.prototype.getRGB=function(){return this.color.toRgb()},t.prototype.getHSV=function(){return this.color.toHsv()},t.prototype.isDark=function(){return this.color.isDark()},t.prototype.isLight=function(){return this.color.isLight()},t.prototype._moveSelectorTo=function(e,t){this.position.x=r(e,0,this.saturationWidth),this.position.y=r(t,0,this.hueHeight),u(this.$sbSelector,{x:this.position.x,y:this.position.y})},t.prototype._updateColorFromPosition=function(){this.color=l({h:this.hue,s:this.position.x/this.saturationWidth,v:1-this.position.y/this.hueHeight}),this._updateColor()},t.prototype._moveHueTo=function(e){this.huePosition=r(e,0,this.maxHue),u(this.$hSelector,{y:this.huePosition})},t.prototype._updateHueFromPosition=function(){var e=this.color.toHsv();this.hue=360*(1-this.huePosition/this.maxHue),this.color=l({h:this.hue,s:e.s,v:e.v}),this._updateHue()},t.prototype._updateHue=function(){var e=l({h:this.hue,s:1,v:1});this.$saturation.style.background="linear-gradient(to right, #fff, "+e.toHexString()+")",this._updateColor()},t.prototype._updateColor=function(){this.$sbSelector.style.background=this.color.toHexString(),this.$sbSelector.style.borderColor=this.color.isDark()?"#fff":"#000",this.emit("update",this.color.toHexString())},t.prototype._onSaturationMouseDown=function(e){var t=this.$saturation.getBoundingClientRect(),i=n(e).x,r=n(e).y;this._moveSelectorTo(i-t.left,r-t.top),this._updateColorFromPosition(),window.addEventListener("mouseup",this._onSaturationMouseUp),window.addEventListener("touchend",this._onSaturationMouseUp),window.addEventListener("mousemove",this._onSaturationMouseMove),window.addEventListener("touchmove",this._onSaturationMouseMove),e.preventDefault()},t.prototype._onSaturationMouseMove=function(e){var t=this.$saturation.getBoundingClientRect(),i=n(e).x,r=n(e).y;this._moveSelectorTo(i-t.left,r-t.top),this._updateColorFromPosition()},t.prototype._onSaturationMouseUp=function(){window.removeEventListener("mouseup",this._onSaturationMouseUp),window.removeEventListener("touchend",this._onSaturationMouseUp),window.removeEventListener("mousemove",this._onSaturationMouseMove),window.removeEventListener("touchmove",this._onSaturationMouseMove)},t.prototype._onHueMouseDown=function(e){var t=this.$hue.getBoundingClientRect(),i=n(e).y;this._moveHueTo(i-t.top),this._updateHueFromPosition(),window.addEventListener("mouseup",this._onHueMouseUp),window.addEventListener("touchend",this._onHueMouseUp),window.addEventListener("mousemove",this._onHueMouseMove),window.addEventListener("touchmove",this._onHueMouseMove),e.preventDefault()},t.prototype._onHueMouseMove=function(e){var t=this.$hue.getBoundingClientRect(),i=n(e).y;this._moveHueTo(i-t.top),this._updateHueFromPosition()},t.prototype._onHueMouseUp=function(){window.removeEventListener("mouseup",this._onHueMouseUp),window.removeEventListener("touchend",this._onHueMouseUp),window.removeEventListener("mousemove",this._onHueMouseMove),window.removeEventListener("touchmove",this._onHueMouseMove)},"undefined"!=typeof e&&e.exports&&(e.exports=t)}()},function(e,t,i){var r=i(23);"string"==typeof r&&(r=[[e.i,r,""]]);i(2)(r,{});r.locals&&(e.exports=r.locals)},function(e,t,i){var r=i(24);"string"==typeof r&&(r=[[e.i,r,""]]);i(2)(r,{});r.locals&&(e.exports=r.locals)},function(e,t,i){var r=i(25);"string"==typeof r&&(r=[[e.i,r,""]]);i(2)(r,{});r.locals&&(e.exports=r.locals)},function(e,t,i){var r=i(26);"string"==typeof r&&(r=[[e.i,r,""]]);i(2)(r,{});r.locals&&(e.exports=r.locals)},function(e,t,i){var r=i(27);"string"==typeof r&&(r=[[e.i,r,""]]);i(2)(r,{});r.locals&&(e.exports=r.locals)},function(e,t,i){var r=i(28);"string"==typeof r&&(r=[[e.i,r,""]]);i(2)(r,{});r.locals&&(e.exports=r.locals)},function(e,t,i){var r;!function(n){function a(e,t){if(e=e?e:"",t=t||{},e instanceof a)return e;if(!(this instanceof a))return new a(e,t);var i=s(e);this._originalInput=e,this._r=i.r,this._g=i.g,this._b=i.b,this._a=i.a,this._roundA=W(100*this._a)/100,this._format=t.format||i.format,this._gradientType=t.gradientType,this._r<1&&(this._r=W(this._r)),this._g<1&&(this._g=W(this._g)),this._b<1&&(this._b=W(this._b)),this._ok=i.ok,this._tc_id=V++}function s(e){var t={r:0,g:0,b:0},i=1,r=null,n=null,a=null,s=!1,l=!1;return"string"==typeof e&&(e=z(e)),"object"==typeof e&&(B(e.r)&&B(e.g)&&B(e.b)?(t=o(e.r,e.g,e.b),s=!0,l="%"===String(e.r).substr(-1)?"prgb":"rgb"):B(e.h)&&B(e.s)&&B(e.v)?(r=U(e.s),n=U(e.v),t=c(e.h,r,n),s=!0,l="hsv"):B(e.h)&&B(e.s)&&B(e.l)&&(r=U(e.s),a=U(e.l),t=u(e.h,r,a),s=!0,l="hsl"),e.hasOwnProperty("a")&&(i=e.a)),i=R(i),{ok:s,format:e.format||l,r:X(255,Y(t.r,0)),g:X(255,Y(t.g,0)),b:X(255,Y(t.b,0)),a:i}}function o(e,t,i){return{r:255*L(e,255),g:255*L(t,255),b:255*L(i,255)}}function l(e,t,i){e=L(e,255),t=L(t,255),i=L(i,255);var r,n,a=Y(e,t,i),s=X(e,t,i),o=(a+s)/2;if(a==s)r=n=0;else{var l=a-s;switch(n=o>.5?l/(2-a-s):l/(a+s),a){case e:r=(t-i)/l+(t<i?6:0);break;case t:r=(i-e)/l+2;break;case i:r=(e-t)/l+4}r/=6}return{h:r,s:n,l:o}}function u(e,t,i){function r(e,t,i){return i<0&&(i+=1),i>1&&(i-=1),i<1/6?e+6*(t-e)*i:i<.5?t:i<2/3?e+(t-e)*(2/3-i)*6:e}var n,a,s;if(e=L(e,360),t=L(t,100),i=L(i,100),0===t)n=a=s=i;else{var o=i<.5?i*(1+t):i+t-i*t,l=2*i-o;n=r(l,o,e+1/3),a=r(l,o,e),s=r(l,o,e-1/3)}return{r:255*n,g:255*a,b:255*s}}function h(e,t,i){e=L(e,255),t=L(t,255),i=L(i,255);var r,n,a=Y(e,t,i),s=X(e,t,i),o=a,l=a-s;if(n=0===a?0:l/a,a==s)r=0;else{switch(a){case e:r=(t-i)/l+(t<i?6:0);break;case t:r=(i-e)/l+2;break;case i:r=(e-t)/l+4}r/=6}return{h:r,s:n,v:o}}function c(e,t,i){e=6*L(e,360),t=L(t,100),i=L(i,100);var r=n.floor(e),a=e-r,s=i*(1-t),o=i*(1-a*t),l=i*(1-(1-a)*t),u=r%6,h=[i,o,s,s,l,i][u],c=[l,i,i,o,s,s][u],f=[s,s,l,i,i,o][u];return{r:255*h,g:255*c,b:255*f}}function f(e,t,i,r){var n=[k(W(e).toString(16)),k(W(t).toString(16)),k(W(i).toString(16))];return r&&n[0].charAt(0)==n[0].charAt(1)&&n[1].charAt(0)==n[1].charAt(1)&&n[2].charAt(0)==n[2].charAt(1)?n[0].charAt(0)+n[1].charAt(0)+n[2].charAt(0):n.join("")}function d(e,t,i,r,n){var a=[k(W(e).toString(16)),k(W(t).toString(16)),k(W(i).toString(16)),k(F(r))];return n&&a[0].charAt(0)==a[0].charAt(1)&&a[1].charAt(0)==a[1].charAt(1)&&a[2].charAt(0)==a[2].charAt(1)&&a[3].charAt(0)==a[3].charAt(1)?a[0].charAt(0)+a[1].charAt(0)+a[2].charAt(0)+a[3].charAt(0):a.join("")}function p(e,t,i,r){var n=[k(F(r)),k(W(e).toString(16)),k(W(t).toString(16)),k(W(i).toString(16))];return n.join("")}function m(e,t){t=0===t?0:t||10;var i=a(e).toHsl();return i.s-=t/100,i.s=C(i.s),a(i)}function v(e,t){t=0===t?0:t||10;var i=a(e).toHsl();return i.s+=t/100,i.s=C(i.s),a(i)}function g(e){return a(e).desaturate(100)}function y(e,t){t=0===t?0:t||10;var i=a(e).toHsl();return i.l+=t/100,i.l=C(i.l),a(i)}function _(e,t){t=0===t?0:t||10;var i=a(e).toRgb();return i.r=Y(0,X(255,i.r-W(255*-(t/100)))),i.g=Y(0,X(255,i.g-W(255*-(t/100)))),i.b=Y(0,X(255,i.b-W(255*-(t/100)))),a(i)}function b(e,t){t=0===t?0:t||10;var i=a(e).toHsl();return i.l-=t/100,i.l=C(i.l),a(i)}function x(e,t){var i=a(e).toHsl(),r=(i.h+t)%360;return i.h=r<0?360+r:r,a(i)}function w(e){var t=a(e).toHsl();return t.h=(t.h+180)%360,a(t)}function T(e){var t=a(e).toHsl(),i=t.h;return[a(e),a({h:(i+120)%360,s:t.s,l:t.l}),a({h:(i+240)%360,s:t.s,l:t.l})]}function M(e){var t=a(e).toHsl(),i=t.h;return[a(e),a({h:(i+90)%360,s:t.s,l:t.l}),a({h:(i+180)%360,s:t.s,l:t.l}),a({h:(i+270)%360,s:t.s,l:t.l})]}function E(e){var t=a(e).toHsl(),i=t.h;return[a(e),a({h:(i+72)%360,s:t.s,l:t.l}),a({h:(i+216)%360,s:t.s,l:t.l})]}function S(e,t,i){t=t||6,i=i||30;var r=a(e).toHsl(),n=360/i,s=[a(e)];for(r.h=(r.h-(n*t>>1)+720)%360;--t;)r.h=(r.h+n)%360,s.push(a(r));return s}function A(e,t){t=t||6;for(var i=a(e).toHsv(),r=i.h,n=i.s,s=i.v,o=[],l=1/t;t--;)o.push(a({h:r,s:n,v:s})),s=(s+l)%1;return o}function P(e){var t={};for(var i in e)e.hasOwnProperty(i)&&(t[e[i]]=i);return t}function R(e){return e=parseFloat(e),(isNaN(e)||e<0||e>1)&&(e=1),e}function L(e,t){I(e)&&(e="100%");var i=D(e);return e=X(t,Y(0,parseFloat(e))),i&&(e=parseInt(e*t,10)/100),n.abs(e-t)<1e-6?1:e%t/parseFloat(t)}function C(e){return X(1,Y(0,e))}function O(e){return parseInt(e,16)}function I(e){return"string"==typeof e&&e.indexOf(".")!=-1&&1===parseFloat(e)}function D(e){return"string"==typeof e&&e.indexOf("%")!=-1}function k(e){return 1==e.length?"0"+e:""+e}function U(e){return e<=1&&(e=100*e+"%"),e}function F(e){return n.round(255*parseFloat(e)).toString(16)}function N(e){return O(e)/255}function B(e){return!!J.CSS_UNIT.exec(e)}function z(e){e=e.replace(G,"").replace(H,"").toLowerCase();var t=!1;if($[e])e=$[e],t=!0;else if("transparent"==e)return{r:0,g:0,b:0,a:0,format:"name"};var i;return(i=J.rgb.exec(e))?{r:i[1],g:i[2],b:i[3]}:(i=J.rgba.exec(e))?{r:i[1],g:i[2],b:i[3],a:i[4]}:(i=J.hsl.exec(e))?{h:i[1],s:i[2],l:i[3]}:(i=J.hsla.exec(e))?{h:i[1],s:i[2],l:i[3],a:i[4]}:(i=J.hsv.exec(e))?{h:i[1],s:i[2],v:i[3]}:(i=J.hsva.exec(e))?{h:i[1],s:i[2],v:i[3],a:i[4]}:(i=J.hex8.exec(e))?{r:O(i[1]),g:O(i[2]),b:O(i[3]),a:N(i[4]),format:t?"name":"hex8"}:(i=J.hex6.exec(e))?{r:O(i[1]),g:O(i[2]),b:O(i[3]),format:t?"name":"hex"}:(i=J.hex4.exec(e))?{r:O(i[1]+""+i[1]),g:O(i[2]+""+i[2]),b:O(i[3]+""+i[3]),a:N(i[4]+""+i[4]),format:t?"name":"hex8"}:!!(i=J.hex3.exec(e))&&{r:O(i[1]+""+i[1]),g:O(i[2]+""+i[2]),b:O(i[3]+""+i[3]),format:t?"name":"hex"}}function j(e){var t,i;return e=e||{level:"AA",size:"small"},t=(e.level||"AA").toUpperCase(),i=(e.size||"small").toLowerCase(),"AA"!==t&&"AAA"!==t&&(t="AA"),"small"!==i&&"large"!==i&&(i="small"),{level:t,size:i}}var G=/^\s+/,H=/\s+$/,V=0,W=n.round,X=n.min,Y=n.max,q=n.random;a.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var e=this.toRgb();return(299*e.r+587*e.g+114*e.b)/1e3},getLuminance:function(){var e,t,i,r,a,s,o=this.toRgb();return e=o.r/255,t=o.g/255,i=o.b/255,r=e<=.03928?e/12.92:n.pow((e+.055)/1.055,2.4),a=t<=.03928?t/12.92:n.pow((t+.055)/1.055,2.4),s=i<=.03928?i/12.92:n.pow((i+.055)/1.055,2.4),.2126*r+.7152*a+.0722*s},setAlpha:function(e){return this._a=R(e),this._roundA=W(100*this._a)/100,this},toHsv:function(){var e=h(this._r,this._g,this._b);return{h:360*e.h,s:e.s,v:e.v,a:this._a}},toHsvString:function(){var e=h(this._r,this._g,this._b),t=W(360*e.h),i=W(100*e.s),r=W(100*e.v);return 1==this._a?"hsv("+t+", "+i+"%, "+r+"%)":"hsva("+t+", "+i+"%, "+r+"%, "+this._roundA+")"},toHsl:function(){var e=l(this._r,this._g,this._b);return{h:360*e.h,s:e.s,l:e.l,a:this._a}},toHslString:function(){var e=l(this._r,this._g,this._b),t=W(360*e.h),i=W(100*e.s),r=W(100*e.l);return 1==this._a?"hsl("+t+", "+i+"%, "+r+"%)":"hsla("+t+", "+i+"%, "+r+"%, "+this._roundA+")"},toHex:function(e){return f(this._r,this._g,this._b,e)},toHexString:function(e){return"#"+this.toHex(e)},toHex8:function(e){return d(this._r,this._g,this._b,this._a,e)},toHex8String:function(e){return"#"+this.toHex8(e)},toRgb:function(){return{r:W(this._r),g:W(this._g),b:W(this._b),a:this._a}},toRgbString:function(){return 1==this._a?"rgb("+W(this._r)+", "+W(this._g)+", "+W(this._b)+")":"rgba("+W(this._r)+", "+W(this._g)+", "+W(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:W(100*L(this._r,255))+"%",g:W(100*L(this._g,255))+"%",b:W(100*L(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return 1==this._a?"rgb("+W(100*L(this._r,255))+"%, "+W(100*L(this._g,255))+"%, "+W(100*L(this._b,255))+"%)":"rgba("+W(100*L(this._r,255))+"%, "+W(100*L(this._g,255))+"%, "+W(100*L(this._b,255))+"%, "+this._roundA+")"},toName:function(){return 0===this._a?"transparent":!(this._a<1)&&(Z[f(this._r,this._g,this._b,!0)]||!1)},toFilter:function(e){var t="#"+p(this._r,this._g,this._b,this._a),i=t,r=this._gradientType?"GradientType = 1, ":"";if(e){var n=a(e);i="#"+p(n._r,n._g,n._b,n._a)}return"progid:DXImageTransform.Microsoft.gradient("+r+"startColorstr="+t+",endColorstr="+i+")"},toString:function(e){var t=!!e;e=e||this._format;var i=!1,r=this._a<1&&this._a>=0,n=!t&&r&&("hex"===e||"hex6"===e||"hex3"===e||"hex4"===e||"hex8"===e||"name"===e);return n?"name"===e&&0===this._a?this.toName():this.toRgbString():("rgb"===e&&(i=this.toRgbString()),"prgb"===e&&(i=this.toPercentageRgbString()),"hex"!==e&&"hex6"!==e||(i=this.toHexString()),"hex3"===e&&(i=this.toHexString(!0)),"hex4"===e&&(i=this.toHex8String(!0)),"hex8"===e&&(i=this.toHex8String()),"name"===e&&(i=this.toName()),"hsl"===e&&(i=this.toHslString()),"hsv"===e&&(i=this.toHsvString()),i||this.toHexString())},clone:function(){return a(this.toString())},_applyModification:function(e,t){var i=e.apply(null,[this].concat([].slice.call(t)));return this._r=i._r,this._g=i._g,this._b=i._b,this.setAlpha(i._a),this},lighten:function(){return this._applyModification(y,arguments)},brighten:function(){return this._applyModification(_,arguments)},darken:function(){return this._applyModification(b,arguments)},desaturate:function(){return this._applyModification(m,arguments)},saturate:function(){return this._applyModification(v,arguments)},greyscale:function(){return this._applyModification(g,arguments)},spin:function(){return this._applyModification(x,arguments)},_applyCombination:function(e,t){return e.apply(null,[this].concat([].slice.call(t)))},analogous:function(){return this._applyCombination(S,arguments)},complement:function(){return this._applyCombination(w,arguments)},monochromatic:function(){return this._applyCombination(A,arguments)},splitcomplement:function(){return this._applyCombination(E,arguments)},triad:function(){return this._applyCombination(T,arguments)},tetrad:function(){return this._applyCombination(M,arguments)}},a.fromRatio=function(e,t){if("object"==typeof e){var i={};for(var r in e)e.hasOwnProperty(r)&&("a"===r?i[r]=e[r]:i[r]=U(e[r]));e=i}return a(e,t)},a.equals=function(e,t){return!(!e||!t)&&a(e).toRgbString()==a(t).toRgbString()},a.random=function(){return a.fromRatio({r:q(),g:q(),b:q()})},a.mix=function(e,t,i){i=0===i?0:i||50;var r=a(e).toRgb(),n=a(t).toRgb(),s=i/100,o={r:(n.r-r.r)*s+r.r,g:(n.g-r.g)*s+r.g,b:(n.b-r.b)*s+r.b,a:(n.a-r.a)*s+r.a};return a(o)},a.readability=function(e,t){var i=a(e),r=a(t);return(n.max(i.getLuminance(),r.getLuminance())+.05)/(n.min(i.getLuminance(),r.getLuminance())+.05)},a.isReadable=function(e,t,i){var r,n,s=a.readability(e,t);switch(n=!1,r=j(i),r.level+r.size){case"AAsmall":case"AAAlarge":n=s>=4.5;break;case"AAlarge":n=s>=3;break;case"AAAsmall":n=s>=7}return n},a.mostReadable=function(e,t,i){var r,n,s,o,l=null,u=0;i=i||{},n=i.includeFallbackColors,s=i.level,o=i.size;for(var h=0;h<t.length;h++)r=a.readability(e,t[h]),r>u&&(u=r,l=a(t[h]));return a.isReadable(e,l,{level:s,size:o})||!n?l:(i.includeFallbackColors=!1,a.mostReadable(e,["#fff","#000"],i))};var $=a.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},Z=a.hexNames=P($),J=function(){var e="[-\\+]?\\d+%?",t="[-\\+]?\\d*\\.\\d+%?",i="(?:"+t+")|(?:"+e+")",r="[\\s|\\(]+("+i+")[,|\\s]+("+i+")[,|\\s]+("+i+")\\s*\\)?",n="[\\s|\\(]+("+i+")[,|\\s]+("+i+")[,|\\s]+("+i+")[,|\\s]+("+i+")\\s*\\)?";return{CSS_UNIT:new RegExp(i),rgb:new RegExp("rgb"+r),rgba:new RegExp("rgba"+n),hsl:new RegExp("hsl"+r),hsla:new RegExp("hsla"+n),hsv:new RegExp("hsv"+r),hsva:new RegExp("hsva"+n),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();"undefined"!=typeof e&&e.exports?e.exports=a:(r=function(){return a}.call(t,i,t,e),!(void 0!==r&&(e.exports=r)))}(Math)},function(e,t){function i(e){return e.replace(/^\s*|\s*$/g,"")}t=e.exports=i,t.left=function(e){return e.replace(/^\s*/,"")},t.right=function(e){return e.replace(/\s*$/,"")}},function(e,t){var i;i=function(){return this}();try{i=i||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(i=window)}e.exports=i},function(e,t,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";""===e&&(e="Settings",g.length>0&&(e+=" "+(g.length+1)));var t=new f.default(e);return g.push(t),t.appendTo(_),t}function a(){var e;return(e=h()).add.apply(e,arguments)}function s(){var e;return(e=h()).addColor.apply(e,arguments)}function o(){var e;return(e=h()).addColor.apply(e,arguments)}function l(){var e;return(e=h()).addFolder.apply(e,arguments)}function u(e){return e<g.length?g[e]:null}function h(){return u(0)||n()}var c=i(10),f=r(c),d=i(6),p=(r(d),i(9)),m=r(p),v=i(0);i(11);var g=[],y=(0,v.createElement)("div","guigui"),_=(0,v.createElement)("div","guigui-container"),b=new m.default(_,"guigui-container");(0,v.appendElement)(y),(0,v.appendElement)(_,y),b.appendTo(y),e.exports={addPanel:n,addFolder:l,add:a,addColor:s,addColorPicker:o,getPanel:u}}])},{}],22:[function(e,t,i){var r=[].indexOf;t.exports=function(e,t){if(r)return e.indexOf(t);for(var i=0;i<e.length;++i){if(e[i]===t)return i}return-1}},{}],23:[function(e,t,i){if(typeof Object.create==="function"){t.exports=function e(t,i){t.super_=i;t.prototype=Object.create(i.prototype,{constructor:{value:t,enumerable:false,writable:true,configurable:true}})}}else{t.exports=function e(t,i){t.super_=i;var r=function(){};r.prototype=i.prototype;t.prototype=new r;t.prototype.constructor=t}}},{}],24:[function(e,t,i){var r={left:0,top:0};t.exports=n;function n(e,t,i){t=t||e.currentTarget||e.srcElement;if(!Array.isArray(i)){i=[0,0]}var r=e.clientX||0;var n=e.clientY||0;var s=a(t);i[0]=r-s.left;i[1]=n-s.top;return i}function a(e){if(e===window||e===document||e===document.body){return r}else{return e.getBoundingClientRect()}}},{}],25:[function(e,t,i){"use strict";var r=e("to-px");t.exports=n;function n(e,t,i){if(typeof e==="function"){i=!!t;t=e;e=window}var n=r("ex",e);var a=function(e){if(i){e.preventDefault()}var r=e.deltaX||0;var a=e.deltaY||0;var s=e.deltaZ||0;var o=e.deltaMode;var l=1;switch(o){case 1:l=n;break;case 2:l=window.innerHeight;break}r*=l;a*=l;s*=l;if(r||a||s){return t(r,a,s,e)}};e.addEventListener("wheel",a);return a}},{"to-px":34}],26:[function(e,t,i){t.exports=function e(t,i){if(!i)i=[0,""];t=String(t);var r=parseFloat(t,10);i[0]=r;i[1]=t.match(/[\d.\-\+]*\s*(.*)/)[1]||"";return i}},{}],27:[function(e,t,i){var r=t.exports={};var n;var a;function s(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}(function(){try{if(typeof setTimeout==="function"){n=setTimeout}else{n=s}}catch(e){n=s}try{if(typeof clearTimeout==="function"){a=clearTimeout}else{a=o}}catch(e){a=o}})();function l(e){if(n===setTimeout){return setTimeout(e,0)}if((n===s||!n)&&setTimeout){n=setTimeout;return setTimeout(e,0)}try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}function u(e){if(a===clearTimeout){return clearTimeout(e)}if((a===o||!a)&&clearTimeout){a=clearTimeout;return clearTimeout(e)}try{return a(e)}catch(t){try{return a.call(null,e)}catch(t){return a.call(this,e)}}}var h=[];var c=false;var f;var d=-1;function p(){if(!c||!f){return}c=false;if(f.length){h=f.concat(h)}else{d=-1}if(h.length){m()}}function m(){if(c){return}var e=l(p);c=true;var t=h.length;while(t){f=h;h=[];while(++d<t){if(f){f[d].run()}}d=-1;t=h.length}f=null;c=false;u(e)}r.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1){for(var i=1;i<arguments.length;i++){t[i-1]=arguments[i]}}h.push(new v(e,t));if(h.length===1&&!c){l(m)}};function v(e,t){this.fun=e;this.array=t}v.prototype.run=function(){this.fun.apply(null,this.array)};r.title="browser";r.browser=true;r.env={};r.argv=[];r.version="";r.versions={};function g(){}r.on=g;r.addListener=g;r.once=g;r.off=g;r.removeListener=g;r.removeAllListeners=g;r.emit=g;r.prependListener=g;r.prependOnceListener=g;r.listeners=function(e){return[]};r.binding=function(e){throw new Error("process.binding is not supported")};r.cwd=function(){return"/"};r.chdir=function(e){throw new Error("process.chdir is not supported")};r.umask=function(){return 0}},{}],28:[function(e,t,i){var r=e("inherits");var n=e("events").EventEmitter;var a=e("right-now");var s=e("raf");t.exports=o;function o(e){if(!(this instanceof o))return new o(e);this.running=false;this.last=a();this._frame=0;this._tick=this.tick.bind(this);if(e)this.on("tick",e)}r(o,n);o.prototype.start=function(){if(this.running)return;this.running=true;this.last=a();this._frame=s(this._tick);return this};o.prototype.stop=function(){this.running=false;if(this._frame!==0)s.cancel(this._frame);this._frame=0;return this};o.prototype.tick=function(){this._frame=s(this._tick);var e=a();var t=e-this.last;this.emit("tick",t);this.last=e}},{events:19,inherits:23,raf:30,"right-now":31}],29:[function(e,t,i){(function(e){(function(){var i,r,n,a,s,o;if(typeof performance!=="undefined"&&performance!==null&&performance.now){t.exports=function(){return performance.now()}}else if(typeof e!=="undefined"&&e!==null&&e.hrtime){t.exports=function(){return(i()-s)/1e6};r=e.hrtime;i=function(){var e;e=r();return e[0]*1e9+e[1]};a=i();o=e.uptime()*1e9;s=a-o}else if(Date.now){t.exports=function(){return Date.now()-n};n=Date.now()}else{t.exports=function(){return(new Date).getTime()-n};n=(new Date).getTime()}}).call(this)}).call(this,e("_process"))},{_process:27}],30:[function(e,t,i){(function(i){var r=e("performance-now"),n=typeof window==="undefined"?i:window,a=["moz","webkit"],s="AnimationFrame",o=n["request"+s],l=n["cancel"+s]||n["cancelRequest"+s];for(var u=0;!o&&u<a.length;u++){o=n[a[u]+"Request"+s];l=n[a[u]+"Cancel"+s]||n[a[u]+"CancelRequest"+s]}if(!o||!l){var h=0,c=0,f=[],d=1e3/60;o=function(e){if(f.length===0){var t=r(),i=Math.max(0,d-(t-h));h=i+t;setTimeout(function(){var e=f.slice(0);f.length=0;for(var t=0;t<e.length;t++){if(!e[t].cancelled){try{e[t].callback(h)}catch(e){setTimeout(function(){throw e},0)}}}},Math.round(i))}f.push({handle:++c,callback:e,cancelled:false});return c};l=function(e){for(var t=0;t<f.length;t++){if(f[t].handle===e){f[t].cancelled=true}}}}t.exports=function(e){return o.call(n,e)};t.exports.cancel=function(){l.apply(n,arguments)};t.exports.polyfill=function(e){if(!e){e=n}e.requestAnimationFrame=o;e.cancelAnimationFrame=l}}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"performance-now":29}],31:[function(e,t,i){(function(e){t.exports=e.performance&&e.performance.now?function e(){return performance.now()}:Date.now||function e(){return+new Date}}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{}],32:[function(e,t,i){(function(e,r){typeof i==="object"&&typeof t!=="undefined"?r(i):typeof define==="function"&&define.amd?define(["exports"],r):r(e.THREE=e.THREE||{})})(this,function(e){"use strict";if(Number.EPSILON===undefined){Number.EPSILON=Math.pow(2,-52)}if(Number.isInteger===undefined){Number.isInteger=function(e){return typeof e==="number"&&isFinite(e)&&Math.floor(e)===e}}if(Math.sign===undefined){Math.sign=function(e){return e<0?-1:e>0?1:+e}}if(Function.prototype.name===undefined){Object.defineProperty(Function.prototype,"name",{get:function(){return this.toString().match(/^\s*function\s*([^\(\s]*)/)[1]}})}if(Object.assign===undefined){(function(){Object.assign=function(e){"use strict";if(e===undefined||e===null){throw new TypeError("Cannot convert undefined or null to object")}var t=Object(e);for(var i=1;i<arguments.length;i++){var r=arguments[i];if(r!==undefined&&r!==null){for(var n in r){if(Object.prototype.hasOwnProperty.call(r,n)){t[n]=r[n]}}}}return t}})()}function t(){}Object.assign(t.prototype,{addEventListener:function(e,t){if(this._listeners===undefined)this._listeners={};var i=this._listeners;if(i[e]===undefined){i[e]=[]}if(i[e].indexOf(t)===-1){i[e].push(t)}},hasEventListener:function(e,t){if(this._listeners===undefined)return false;var i=this._listeners;return i[e]!==undefined&&i[e].indexOf(t)!==-1},removeEventListener:function(e,t){if(this._listeners===undefined)return;var i=this._listeners;var r=i[e];if(r!==undefined){var n=r.indexOf(t);if(n!==-1){r.splice(n,1)}}},dispatchEvent:function(e){if(this._listeners===undefined)return;var t=this._listeners;var i=t[e.type];if(i!==undefined){e.target=this
;var r=i.slice(0);for(var n=0,a=r.length;n<a;n++){r[n].call(this,e)}}}});var i="87";var r={LEFT:0,MIDDLE:1,RIGHT:2};var n=0;var a=1;var s=2;var o=3;var l=0;var u=1;var h=0;var c=1;var f=2;var d=0;var p=1;var m=2;var v=1;var g=2;var y=0;var _=1;var b=2;var x=0;var w=1;var T=2;var M=3;var E=4;var S=5;var A=100;var P=101;var R=102;var L=103;var C=104;var O=200;var I=201;var D=202;var k=203;var U=204;var F=205;var N=206;var B=207;var z=208;var j=209;var G=210;var H=0;var V=1;var W=2;var X=3;var Y=4;var q=5;var $=6;var Z=7;var J=0;var Q=1;var K=2;var ee=0;var te=1;var ie=2;var re=3;var ne=4;var ae=300;var se=301;var oe=302;var le=303;var ue=304;var he=305;var ce=306;var fe=307;var de=1e3;var pe=1001;var me=1002;var ve=1003;var ge=1004;var ye=1005;var _e=1006;var be=1007;var xe=1008;var we=1009;var Te=1010;var Me=1011;var Ee=1012;var Se=1013;var Ae=1014;var Pe=1015;var Re=1016;var Le=1017;var Ce=1018;var Oe=1019;var Ie=1020;var De=1021;var ke=1022;var Ue=1023;var Fe=1024;var Ne=1025;var Be=Ue;var ze=1026;var je=1027;var Ge=2001;var He=2002;var Ve=2003;var We=2004;var Xe=2100;var Ye=2101;var qe=2102;var $e=2103;var Ze=2151;var Je=2200;var Qe=2201;var Ke=2202;var et=2300;var tt=2301;var it=2302;var rt=2400;var nt=2401;var at=2402;var st=0;var ot=1;var lt=2;var ut=3e3;var ht=3001;var ct=3007;var ft=3002;var dt=3003;var pt=3004;var mt=3005;var vt=3006;var gt=3200;var yt=3201;var _t={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:function(){var e="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split("");var t=new Array(36);var i=0,r;return function n(){for(var a=0;a<36;a++){if(a===8||a===13||a===18||a===23){t[a]="-"}else if(a===14){t[a]="4"}else{if(i<=2)i=33554432+Math.random()*16777216|0;r=i&15;i=i>>4;t[a]=e[a===19?r&3|8:r]}}return t.join("")}}(),clamp:function(e,t,i){return Math.max(t,Math.min(i,e))},euclideanModulo:function(e,t){return(e%t+t)%t},mapLinear:function(e,t,i,r,n){return r+(e-t)*(n-r)/(i-t)},lerp:function(e,t,i){return(1-i)*e+i*t},smoothstep:function(e,t,i){if(e<=t)return 0;if(e>=i)return 1;e=(e-t)/(i-t);return e*e*(3-2*e)},smootherstep:function(e,t,i){if(e<=t)return 0;if(e>=i)return 1;e=(e-t)/(i-t);return e*e*e*(e*(e*6-15)+10)},randInt:function(e,t){return e+Math.floor(Math.random()*(t-e+1))},randFloat:function(e,t){return e+Math.random()*(t-e)},randFloatSpread:function(e){return e*(.5-Math.random())},degToRad:function(e){return e*_t.DEG2RAD},radToDeg:function(e){return e*_t.RAD2DEG},isPowerOfTwo:function(e){return(e&e-1)===0&&e!==0},nearestPowerOfTwo:function(e){return Math.pow(2,Math.round(Math.log(e)/Math.LN2))},nextPowerOfTwo:function(e){e--;e|=e>>1;e|=e>>2;e|=e>>4;e|=e>>8;e|=e>>16;e++;return e}};function bt(e,t){this.x=e||0;this.y=t||0}Object.defineProperties(bt.prototype,{width:{get:function(){return this.x},set:function(e){this.x=e}},height:{get:function(){return this.y},set:function(e){this.y=e}}});Object.assign(bt.prototype,{isVector2:true,set:function(e,t){this.x=e;this.y=t;return this},setScalar:function(e){this.x=e;this.y=e;return this},setX:function(e){this.x=e;return this},setY:function(e){this.y=e;return this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}},clone:function(){return new this.constructor(this.x,this.y)},copy:function(e){this.x=e.x;this.y=e.y;return this},add:function(e,t){if(t!==undefined){console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead.");return this.addVectors(e,t)}this.x+=e.x;this.y+=e.y;return this},addScalar:function(e){this.x+=e;this.y+=e;return this},addVectors:function(e,t){this.x=e.x+t.x;this.y=e.y+t.y;return this},addScaledVector:function(e,t){this.x+=e.x*t;this.y+=e.y*t;return this},sub:function(e,t){if(t!==undefined){console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead.");return this.subVectors(e,t)}this.x-=e.x;this.y-=e.y;return this},subScalar:function(e){this.x-=e;this.y-=e;return this},subVectors:function(e,t){this.x=e.x-t.x;this.y=e.y-t.y;return this},multiply:function(e){this.x*=e.x;this.y*=e.y;return this},multiplyScalar:function(e){this.x*=e;this.y*=e;return this},divide:function(e){this.x/=e.x;this.y/=e.y;return this},divideScalar:function(e){return this.multiplyScalar(1/e)},min:function(e){this.x=Math.min(this.x,e.x);this.y=Math.min(this.y,e.y);return this},max:function(e){this.x=Math.max(this.x,e.x);this.y=Math.max(this.y,e.y);return this},clamp:function(e,t){this.x=Math.max(e.x,Math.min(t.x,this.x));this.y=Math.max(e.y,Math.min(t.y,this.y));return this},clampScalar:function(){var e=new bt;var t=new bt;return function i(r,n){e.set(r,r);t.set(n,n);return this.clamp(e,t)}}(),clampLength:function(e,t){var i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))},floor:function(){this.x=Math.floor(this.x);this.y=Math.floor(this.y);return this},ceil:function(){this.x=Math.ceil(this.x);this.y=Math.ceil(this.y);return this},round:function(){this.x=Math.round(this.x);this.y=Math.round(this.y);return this},roundToZero:function(){this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x);this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y);return this},negate:function(){this.x=-this.x;this.y=-this.y;return this},dot:function(e){return this.x*e.x+this.y*e.y},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)},normalize:function(){return this.divideScalar(this.length()||1)},angle:function(){var e=Math.atan2(this.y,this.x);if(e<0)e+=2*Math.PI;return e},distanceTo:function(e){return Math.sqrt(this.distanceToSquared(e))},distanceToSquared:function(e){var t=this.x-e.x,i=this.y-e.y;return t*t+i*i},distanceToManhattan:function(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)},setLength:function(e){return this.normalize().multiplyScalar(e)},lerp:function(e,t){this.x+=(e.x-this.x)*t;this.y+=(e.y-this.y)*t;return this},lerpVectors:function(e,t,i){return this.subVectors(t,e).multiplyScalar(i).add(e)},equals:function(e){return e.x===this.x&&e.y===this.y},fromArray:function(e,t){if(t===undefined)t=0;this.x=e[t];this.y=e[t+1];return this},toArray:function(e,t){if(e===undefined)e=[];if(t===undefined)t=0;e[t]=this.x;e[t+1]=this.y;return e},fromBufferAttribute:function(e,t,i){if(i!==undefined){console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute().")}this.x=e.getX(t);this.y=e.getY(t);return this},rotateAround:function(e,t){var i=Math.cos(t),r=Math.sin(t);var n=this.x-e.x;var a=this.y-e.y;this.x=n*i-a*r+e.x;this.y=n*r+a*i+e.y;return this}});var xt=0;function wt(e,t,i,r,n,a,s,o,l,u){Object.defineProperty(this,"id",{value:xt++});this.uuid=_t.generateUUID();this.name="";this.image=e!==undefined?e:wt.DEFAULT_IMAGE;this.mipmaps=[];this.mapping=t!==undefined?t:wt.DEFAULT_MAPPING;this.wrapS=i!==undefined?i:pe;this.wrapT=r!==undefined?r:pe;this.magFilter=n!==undefined?n:_e;this.minFilter=a!==undefined?a:xe;this.anisotropy=l!==undefined?l:1;this.format=s!==undefined?s:Ue;this.type=o!==undefined?o:we;this.offset=new bt(0,0);this.repeat=new bt(1,1);this.generateMipmaps=true;this.premultiplyAlpha=false;this.flipY=true;this.unpackAlignment=4;this.encoding=u!==undefined?u:ut;this.version=0;this.onUpdate=null}wt.DEFAULT_IMAGE=undefined;wt.DEFAULT_MAPPING=ae;Object.defineProperty(wt.prototype,"needsUpdate",{set:function(e){if(e===true)this.version++}});Object.assign(wt.prototype,t.prototype,{constructor:wt,isTexture:true,clone:function(){return(new this.constructor).copy(this)},copy:function(e){this.name=e.name;this.image=e.image;this.mipmaps=e.mipmaps.slice(0);this.mapping=e.mapping;this.wrapS=e.wrapS;this.wrapT=e.wrapT;this.magFilter=e.magFilter;this.minFilter=e.minFilter;this.anisotropy=e.anisotropy;this.format=e.format;this.type=e.type;this.offset.copy(e.offset);this.repeat.copy(e.repeat);this.generateMipmaps=e.generateMipmaps;this.premultiplyAlpha=e.premultiplyAlpha;this.flipY=e.flipY;this.unpackAlignment=e.unpackAlignment;this.encoding=e.encoding;return this},toJSON:function(e){if(e.textures[this.uuid]!==undefined){return e.textures[this.uuid]}function t(e){var t;if(e instanceof HTMLCanvasElement){t=e}else{t=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");t.width=e.width;t.height=e.height;var i=t.getContext("2d");if(e instanceof ImageData){i.putImageData(e,0,0)}else{i.drawImage(e,0,0,e.width,e.height)}}if(t.width>2048||t.height>2048){return t.toDataURL("image/jpeg",.6)}else{return t.toDataURL("image/png")}}var i={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],wrap:[this.wrapS,this.wrapT],minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY};if(this.image!==undefined){var r=this.image;if(r.uuid===undefined){r.uuid=_t.generateUUID()}if(e.images[r.uuid]===undefined){e.images[r.uuid]={uuid:r.uuid,url:t(r)}}i.image=r.uuid}e.textures[this.uuid]=i;return i},dispose:function(){this.dispatchEvent({type:"dispose"})},transformUv:function(e){if(this.mapping!==ae)return;e.multiply(this.repeat);e.add(this.offset);if(e.x<0||e.x>1){switch(this.wrapS){case de:e.x=e.x-Math.floor(e.x);break;case pe:e.x=e.x<0?0:1;break;case me:if(Math.abs(Math.floor(e.x)%2)===1){e.x=Math.ceil(e.x)-e.x}else{e.x=e.x-Math.floor(e.x)}break}}if(e.y<0||e.y>1){switch(this.wrapT){case de:e.y=e.y-Math.floor(e.y);break;case pe:e.y=e.y<0?0:1;break;case me:if(Math.abs(Math.floor(e.y)%2)===1){e.y=Math.ceil(e.y)-e.y}else{e.y=e.y-Math.floor(e.y)}break}}if(this.flipY){e.y=1-e.y}}});function Tt(e,t,i,r){this.x=e||0;this.y=t||0;this.z=i||0;this.w=r!==undefined?r:1}Object.assign(Tt.prototype,{isVector4:true,set:function(e,t,i,r){this.x=e;this.y=t;this.z=i;this.w=r;return this},setScalar:function(e){this.x=e;this.y=e;this.z=e;this.w=e;return this},setX:function(e){this.x=e;return this},setY:function(e){this.y=e;return this},setZ:function(e){this.z=e;return this},setW:function(e){this.w=e;return this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}},clone:function(){return new this.constructor(this.x,this.y,this.z,this.w)},copy:function(e){this.x=e.x;this.y=e.y;this.z=e.z;this.w=e.w!==undefined?e.w:1;return this},add:function(e,t){if(t!==undefined){console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead.");return this.addVectors(e,t)}this.x+=e.x;this.y+=e.y;this.z+=e.z;this.w+=e.w;return this},addScalar:function(e){this.x+=e;this.y+=e;this.z+=e;this.w+=e;return this},addVectors:function(e,t){this.x=e.x+t.x;this.y=e.y+t.y;this.z=e.z+t.z;this.w=e.w+t.w;return this},addScaledVector:function(e,t){this.x+=e.x*t;this.y+=e.y*t;this.z+=e.z*t;this.w+=e.w*t;return this},sub:function(e,t){if(t!==undefined){console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead.");return this.subVectors(e,t)}this.x-=e.x;this.y-=e.y;this.z-=e.z;this.w-=e.w;return this},subScalar:function(e){this.x-=e;this.y-=e;this.z-=e;this.w-=e;return this},subVectors:function(e,t){this.x=e.x-t.x;this.y=e.y-t.y;this.z=e.z-t.z;this.w=e.w-t.w;return this},multiplyScalar:function(e){this.x*=e;this.y*=e;this.z*=e;this.w*=e;return this},applyMatrix4:function(e){var t=this.x,i=this.y,r=this.z,n=this.w;var a=e.elements;this.x=a[0]*t+a[4]*i+a[8]*r+a[12]*n;this.y=a[1]*t+a[5]*i+a[9]*r+a[13]*n;this.z=a[2]*t+a[6]*i+a[10]*r+a[14]*n;this.w=a[3]*t+a[7]*i+a[11]*r+a[15]*n;return this},divideScalar:function(e){return this.multiplyScalar(1/e)},setAxisAngleFromQuaternion:function(e){this.w=2*Math.acos(e.w);var t=Math.sqrt(1-e.w*e.w);if(t<1e-4){this.x=1;this.y=0;this.z=0}else{this.x=e.x/t;this.y=e.y/t;this.z=e.z/t}return this},setAxisAngleFromRotationMatrix:function(e){var t,i,r,n,a=.01,s=.1,o=e.elements,l=o[0],u=o[4],h=o[8],c=o[1],f=o[5],d=o[9],p=o[2],m=o[6],v=o[10];if(Math.abs(u-c)<a&&Math.abs(h-p)<a&&Math.abs(d-m)<a){if(Math.abs(u+c)<s&&Math.abs(h+p)<s&&Math.abs(d+m)<s&&Math.abs(l+f+v-3)<s){this.set(1,0,0,0);return this}t=Math.PI;var g=(l+1)/2;var y=(f+1)/2;var _=(v+1)/2;var b=(u+c)/4;var x=(h+p)/4;var w=(d+m)/4;if(g>y&&g>_){if(g<a){i=0;r=.707106781;n=.707106781}else{i=Math.sqrt(g);r=b/i;n=x/i}}else if(y>_){if(y<a){i=.707106781;r=0;n=.707106781}else{r=Math.sqrt(y);i=b/r;n=w/r}}else{if(_<a){i=.707106781;r=.707106781;n=0}else{n=Math.sqrt(_);i=x/n;r=w/n}}this.set(i,r,n,t);return this}var T=Math.sqrt((m-d)*(m-d)+(h-p)*(h-p)+(c-u)*(c-u));if(Math.abs(T)<.001)T=1;this.x=(m-d)/T;this.y=(h-p)/T;this.z=(c-u)/T;this.w=Math.acos((l+f+v-1)/2);return this},min:function(e){this.x=Math.min(this.x,e.x);this.y=Math.min(this.y,e.y);this.z=Math.min(this.z,e.z);this.w=Math.min(this.w,e.w);return this},max:function(e){this.x=Math.max(this.x,e.x);this.y=Math.max(this.y,e.y);this.z=Math.max(this.z,e.z);this.w=Math.max(this.w,e.w);return this},clamp:function(e,t){this.x=Math.max(e.x,Math.min(t.x,this.x));this.y=Math.max(e.y,Math.min(t.y,this.y));this.z=Math.max(e.z,Math.min(t.z,this.z));this.w=Math.max(e.w,Math.min(t.w,this.w));return this},clampScalar:function(){var e,t;return function i(r,n){if(e===undefined){e=new Tt;t=new Tt}e.set(r,r,r,r);t.set(n,n,n,n);return this.clamp(e,t)}}(),clampLength:function(e,t){var i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))},floor:function(){this.x=Math.floor(this.x);this.y=Math.floor(this.y);this.z=Math.floor(this.z);this.w=Math.floor(this.w);return this},ceil:function(){this.x=Math.ceil(this.x);this.y=Math.ceil(this.y);this.z=Math.ceil(this.z);this.w=Math.ceil(this.w);return this},round:function(){this.x=Math.round(this.x);this.y=Math.round(this.y);this.z=Math.round(this.z);this.w=Math.round(this.w);return this},roundToZero:function(){this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x);this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y);this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z);this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w);return this},negate:function(){this.x=-this.x;this.y=-this.y;this.z=-this.z;this.w=-this.w;return this},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(e){return this.normalize().multiplyScalar(e)},lerp:function(e,t){this.x+=(e.x-this.x)*t;this.y+=(e.y-this.y)*t;this.z+=(e.z-this.z)*t;this.w+=(e.w-this.w)*t;return this},lerpVectors:function(e,t,i){return this.subVectors(t,e).multiplyScalar(i).add(e)},equals:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w},fromArray:function(e,t){if(t===undefined)t=0;this.x=e[t];this.y=e[t+1];this.z=e[t+2];this.w=e[t+3];return this},toArray:function(e,t){if(e===undefined)e=[];if(t===undefined)t=0;e[t]=this.x;e[t+1]=this.y;e[t+2]=this.z;e[t+3]=this.w;return e},fromBufferAttribute:function(e,t,i){if(i!==undefined){console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute().")}this.x=e.getX(t);this.y=e.getY(t);this.z=e.getZ(t);this.w=e.getW(t);return this}});function Mt(e,t,i){this.uuid=_t.generateUUID();this.width=e;this.height=t;this.scissor=new Tt(0,0,e,t);this.scissorTest=false;this.viewport=new Tt(0,0,e,t);i=i||{};if(i.minFilter===undefined)i.minFilter=_e;this.texture=new wt(undefined,undefined,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.encoding);this.depthBuffer=i.depthBuffer!==undefined?i.depthBuffer:true;this.stencilBuffer=i.stencilBuffer!==undefined?i.stencilBuffer:true;this.depthTexture=i.depthTexture!==undefined?i.depthTexture:null}Object.assign(Mt.prototype,t.prototype,{isWebGLRenderTarget:true,setSize:function(e,t){if(this.width!==e||this.height!==t){this.width=e;this.height=t;this.dispose()}this.viewport.set(0,0,e,t);this.scissor.set(0,0,e,t)},clone:function(){return(new this.constructor).copy(this)},copy:function(e){this.width=e.width;this.height=e.height;this.viewport.copy(e.viewport);this.texture=e.texture.clone();this.depthBuffer=e.depthBuffer;this.stencilBuffer=e.stencilBuffer;this.depthTexture=e.depthTexture;return this},dispose:function(){this.dispatchEvent({type:"dispose"})}});function Et(e,t,i){Mt.call(this,e,t,i);this.activeCubeFace=0;this.activeMipMapLevel=0}Et.prototype=Object.create(Mt.prototype);Et.prototype.constructor=Et;Et.prototype.isWebGLRenderTargetCube=true;function St(e,t,i,r){this._x=e||0;this._y=t||0;this._z=i||0;this._w=r!==undefined?r:1}Object.assign(St,{slerp:function(e,t,i,r){return i.copy(e).slerp(t,r)},slerpFlat:function(e,t,i,r,n,a,s){var o=i[r+0],l=i[r+1],u=i[r+2],h=i[r+3],c=n[a+0],f=n[a+1],d=n[a+2],p=n[a+3];if(h!==p||o!==c||l!==f||u!==d){var m=1-s,v=o*c+l*f+u*d+h*p,g=v>=0?1:-1,y=1-v*v;if(y>Number.EPSILON){var _=Math.sqrt(y),b=Math.atan2(_,v*g);m=Math.sin(m*b)/_;s=Math.sin(s*b)/_}var x=s*g;o=o*m+c*x;l=l*m+f*x;u=u*m+d*x;h=h*m+p*x;if(m===1-s){var w=1/Math.sqrt(o*o+l*l+u*u+h*h);o*=w;l*=w;u*=w;h*=w}}e[t]=o;e[t+1]=l;e[t+2]=u;e[t+3]=h}});Object.defineProperties(St.prototype,{x:{get:function(){return this._x},set:function(e){this._x=e;this.onChangeCallback()}},y:{get:function(){return this._y},set:function(e){this._y=e;this.onChangeCallback()}},z:{get:function(){return this._z},set:function(e){this._z=e;this.onChangeCallback()}},w:{get:function(){return this._w},set:function(e){this._w=e;this.onChangeCallback()}}});Object.assign(St.prototype,{set:function(e,t,i,r){this._x=e;this._y=t;this._z=i;this._w=r;this.onChangeCallback();return this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._w)},copy:function(e){this._x=e.x;this._y=e.y;this._z=e.z;this._w=e.w;this.onChangeCallback();return this},setFromEuler:function(e,t){if(!(e&&e.isEuler)){throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.")}var i=e._x,r=e._y,n=e._z,a=e.order;var s=Math.cos;var o=Math.sin;var l=s(i/2);var u=s(r/2);var h=s(n/2);var c=o(i/2);var f=o(r/2);var d=o(n/2);if(a==="XYZ"){this._x=c*u*h+l*f*d;this._y=l*f*h-c*u*d;this._z=l*u*d+c*f*h;this._w=l*u*h-c*f*d}else if(a==="YXZ"){this._x=c*u*h+l*f*d;this._y=l*f*h-c*u*d;this._z=l*u*d-c*f*h;this._w=l*u*h+c*f*d}else if(a==="ZXY"){this._x=c*u*h-l*f*d;this._y=l*f*h+c*u*d;this._z=l*u*d+c*f*h;this._w=l*u*h-c*f*d}else if(a==="ZYX"){this._x=c*u*h-l*f*d;this._y=l*f*h+c*u*d;this._z=l*u*d-c*f*h;this._w=l*u*h+c*f*d}else if(a==="YZX"){this._x=c*u*h+l*f*d;this._y=l*f*h+c*u*d;this._z=l*u*d-c*f*h;this._w=l*u*h-c*f*d}else if(a==="XZY"){this._x=c*u*h-l*f*d;this._y=l*f*h-c*u*d;this._z=l*u*d+c*f*h;this._w=l*u*h+c*f*d}if(t!==false)this.onChangeCallback();return this},setFromAxisAngle:function(e,t){var i=t/2,r=Math.sin(i);this._x=e.x*r;this._y=e.y*r;this._z=e.z*r;this._w=Math.cos(i);this.onChangeCallback();return this},setFromRotationMatrix:function(e){var t=e.elements,i=t[0],r=t[4],n=t[8],a=t[1],s=t[5],o=t[9],l=t[2],u=t[6],h=t[10],c=i+s+h,f;if(c>0){f=.5/Math.sqrt(c+1);this._w=.25/f;this._x=(u-o)*f;this._y=(n-l)*f;this._z=(a-r)*f}else if(i>s&&i>h){f=2*Math.sqrt(1+i-s-h);this._w=(u-o)/f;this._x=.25*f;this._y=(r+a)/f;this._z=(n+l)/f}else if(s>h){f=2*Math.sqrt(1+s-i-h);this._w=(n-l)/f;this._x=(r+a)/f;this._y=.25*f;this._z=(o+u)/f}else{f=2*Math.sqrt(1+h-i-s);this._w=(a-r)/f;this._x=(n+l)/f;this._y=(o+u)/f;this._z=.25*f}this.onChangeCallback();return this},setFromUnitVectors:function(){var e=new At;var t;var i=1e-6;return function r(n,a){if(e===undefined)e=new At;t=n.dot(a)+1;if(t<i){t=0;if(Math.abs(n.x)>Math.abs(n.z)){e.set(-n.y,n.x,0)}else{e.set(0,-n.z,n.y)}}else{e.crossVectors(n,a)}this._x=e.x;this._y=e.y;this._z=e.z;this._w=t;return this.normalize()}}(),inverse:function(){return this.conjugate().normalize()},conjugate:function(){this._x*=-1;this._y*=-1;this._z*=-1;this.onChangeCallback();return this},dot:function(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var e=this.length();if(e===0){this._x=0;this._y=0;this._z=0;this._w=1}else{e=1/e;this._x=this._x*e;this._y=this._y*e;this._z=this._z*e;this._w=this._w*e}this.onChangeCallback();return this},multiply:function(e,t){if(t!==undefined){console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead.");return this.multiplyQuaternions(e,t)}return this.multiplyQuaternions(this,e)},premultiply:function(e){return this.multiplyQuaternions(e,this)},multiplyQuaternions:function(e,t){var i=e._x,r=e._y,n=e._z,a=e._w;var s=t._x,o=t._y,l=t._z,u=t._w;this._x=i*u+a*s+r*l-n*o;this._y=r*u+a*o+n*s-i*l;this._z=n*u+a*l+i*o-r*s;this._w=a*u-i*s-r*o-n*l;this.onChangeCallback();return this},slerp:function(e,t){if(t===0)return this;if(t===1)return this.copy(e);var i=this._x,r=this._y,n=this._z,a=this._w;var s=a*e._w+i*e._x+r*e._y+n*e._z;if(s<0){this._w=-e._w;this._x=-e._x;this._y=-e._y;this._z=-e._z;s=-s}else{this.copy(e)}if(s>=1){this._w=a;this._x=i;this._y=r;this._z=n;return this}var o=Math.sqrt(1-s*s);if(Math.abs(o)<.001){this._w=.5*(a+this._w);this._x=.5*(i+this._x);this._y=.5*(r+this._y);this._z=.5*(n+this._z);return this}var l=Math.atan2(o,s);var u=Math.sin((1-t)*l)/o,h=Math.sin(t*l)/o;this._w=a*u+this._w*h;this._x=i*u+this._x*h;this._y=r*u+this._y*h;this._z=n*u+this._z*h;this.onChangeCallback();return this},equals:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w},fromArray:function(e,t){if(t===undefined)t=0;this._x=e[t];this._y=e[t+1];this._z=e[t+2];this._w=e[t+3];this.onChangeCallback();return this},toArray:function(e,t){if(e===undefined)e=[];if(t===undefined)t=0;e[t]=this._x;e[t+1]=this._y;e[t+2]=this._z;e[t+3]=this._w;return e},onChange:function(e){this.onChangeCallback=e;return this},onChangeCallback:function(){}});function At(e,t,i){this.x=e||0;this.y=t||0;this.z=i||0}Object.assign(At.prototype,{isVector3:true,set:function(e,t,i){this.x=e;this.y=t;this.z=i;return this},setScalar:function(e){this.x=e;this.y=e;this.z=e;return this},setX:function(e){this.x=e;return this},setY:function(e){this.y=e;return this},setZ:function(e){this.z=e;return this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}},clone:function(){return new this.constructor(this.x,this.y,this.z)},copy:function(e){this.x=e.x;this.y=e.y;this.z=e.z;return this},add:function(e,t){if(t!==undefined){console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead.");return this.addVectors(e,t)}this.x+=e.x;this.y+=e.y;this.z+=e.z;return this},addScalar:function(e){this.x+=e;this.y+=e;this.z+=e;return this},addVectors:function(e,t){this.x=e.x+t.x;this.y=e.y+t.y;this.z=e.z+t.z;return this},addScaledVector:function(e,t){this.x+=e.x*t;this.y+=e.y*t;this.z+=e.z*t;return this},sub:function(e,t){if(t!==undefined){console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead.");return this.subVectors(e,t)}this.x-=e.x;this.y-=e.y;this.z-=e.z;return this},subScalar:function(e){this.x-=e;this.y-=e;this.z-=e;return this},subVectors:function(e,t){this.x=e.x-t.x;this.y=e.y-t.y;this.z=e.z-t.z;return this},multiply:function(e,t){if(t!==undefined){console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead.");return this.multiplyVectors(e,t)}this.x*=e.x;this.y*=e.y;this.z*=e.z;return this},multiplyScalar:function(e){this.x*=e;this.y*=e;this.z*=e;return this},multiplyVectors:function(e,t){this.x=e.x*t.x;this.y=e.y*t.y;this.z=e.z*t.z;return this},applyEuler:function(){var e=new St;return function t(i){if(!(i&&i.isEuler)){console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order.")}return this.applyQuaternion(e.setFromEuler(i))}}(),applyAxisAngle:function(){var e=new St;return function t(i,r){return this.applyQuaternion(e.setFromAxisAngle(i,r))}}(),applyMatrix3:function(e){var t=this.x,i=this.y,r=this.z;var n=e.elements;this.x=n[0]*t+n[3]*i+n[6]*r;this.y=n[1]*t+n[4]*i+n[7]*r;this.z=n[2]*t+n[5]*i+n[8]*r;return this},applyMatrix4:function(e){var t=this.x,i=this.y,r=this.z;var n=e.elements;var a=1/(n[3]*t+n[7]*i+n[11]*r+n[15]);this.x=(n[0]*t+n[4]*i+n[8]*r+n[12])*a;this.y=(n[1]*t+n[5]*i+n[9]*r+n[13])*a;this.z=(n[2]*t+n[6]*i+n[10]*r+n[14])*a;return this},applyQuaternion:function(e){var t=this.x,i=this.y,r=this.z;var n=e.x,a=e.y,s=e.z,o=e.w;var l=o*t+a*r-s*i;var u=o*i+s*t-n*r;var h=o*r+n*i-a*t;var c=-n*t-a*i-s*r;this.x=l*o+c*-n+u*-s-h*-a;this.y=u*o+c*-a+h*-n-l*-s;this.z=h*o+c*-s+l*-a-u*-n;return this},project:function(){var e=new Pt;return function t(i){e.multiplyMatrices(i.projectionMatrix,e.getInverse(i.matrixWorld));return this.applyMatrix4(e)}}(),unproject:function(){var e=new Pt;return function t(i){e.multiplyMatrices(i.matrixWorld,e.getInverse(i.projectionMatrix));return this.applyMatrix4(e)}}(),transformDirection:function(e){var t=this.x,i=this.y,r=this.z;var n=e.elements;this.x=n[0]*t+n[4]*i+n[8]*r;this.y=n[1]*t+n[5]*i+n[9]*r;this.z=n[2]*t+n[6]*i+n[10]*r;return this.normalize()},divide:function(e){this.x/=e.x;this.y/=e.y;this.z/=e.z;return this},divideScalar:function(e){return this.multiplyScalar(1/e)},min:function(e){this.x=Math.min(this.x,e.x);this.y=Math.min(this.y,e.y);this.z=Math.min(this.z,e.z);return this},max:function(e){this.x=Math.max(this.x,e.x);this.y=Math.max(this.y,e.y);this.z=Math.max(this.z,e.z);return this},clamp:function(e,t){this.x=Math.max(e.x,Math.min(t.x,this.x));this.y=Math.max(e.y,Math.min(t.y,this.y));this.z=Math.max(e.z,Math.min(t.z,this.z));return this},clampScalar:function(){var e=new At;var t=new At;return function i(r,n){e.set(r,r,r);t.set(n,n,n);return this.clamp(e,t)}}(),clampLength:function(e,t){var i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))},floor:function(){this.x=Math.floor(this.x);this.y=Math.floor(this.y);this.z=Math.floor(this.z);return this},ceil:function(){this.x=Math.ceil(this.x);this.y=Math.ceil(this.y);this.z=Math.ceil(this.z);return this},round:function(){this.x=Math.round(this.x);this.y=Math.round(this.y);this.z=Math.round(this.z);return this},roundToZero:function(){this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x);this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y);this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z);return this},negate:function(){this.x=-this.x;this.y=-this.y;this.z=-this.z;return this},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(e){return this.normalize().multiplyScalar(e)},lerp:function(e,t){this.x+=(e.x-this.x)*t;this.y+=(e.y-this.y)*t;this.z+=(e.z-this.z)*t;return this},lerpVectors:function(e,t,i){return this.subVectors(t,e).multiplyScalar(i).add(e)},cross:function(e,t){if(t!==undefined){console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead.");return this.crossVectors(e,t)}var i=this.x,r=this.y,n=this.z;this.x=r*e.z-n*e.y;this.y=n*e.x-i*e.z;this.z=i*e.y-r*e.x;return this},crossVectors:function(e,t){var i=e.x,r=e.y,n=e.z;var a=t.x,s=t.y,o=t.z;this.x=r*o-n*s;this.y=n*a-i*o;this.z=i*s-r*a;return this},projectOnVector:function(e){var t=e.dot(this)/e.lengthSq();return this.copy(e).multiplyScalar(t)},projectOnPlane:function(){var e=new At;return function t(i){e.copy(this).projectOnVector(i);return this.sub(e)}}(),reflect:function(){var e=new At;return function t(i){return this.sub(e.copy(i).multiplyScalar(2*this.dot(i)))}}(),angleTo:function(e){var t=this.dot(e)/Math.sqrt(this.lengthSq()*e.lengthSq());return Math.acos(_t.clamp(t,-1,1))},distanceTo:function(e){return Math.sqrt(this.distanceToSquared(e))},distanceToSquared:function(e){var t=this.x-e.x,i=this.y-e.y,r=this.z-e.z;return t*t+i*i+r*r},distanceToManhattan:function(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)},setFromSpherical:function(e){var t=Math.sin(e.phi)*e.radius;this.x=t*Math.sin(e.theta);this.y=Math.cos(e.phi)*e.radius;this.z=t*Math.cos(e.theta);return this},setFromCylindrical:function(e){this.x=e.radius*Math.sin(e.theta);this.y=e.y;this.z=e.radius*Math.cos(e.theta);return this},setFromMatrixPosition:function(e){var t=e.elements;this.x=t[12];this.y=t[13];this.z=t[14];return this},setFromMatrixScale:function(e){var t=this.setFromMatrixColumn(e,0).length();var i=this.setFromMatrixColumn(e,1).length();var r=this.setFromMatrixColumn(e,2).length();this.x=t;this.y=i;this.z=r;return this},setFromMatrixColumn:function(e,t){return this.fromArray(e.elements,t*4)},equals:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z},fromArray:function(e,t){if(t===undefined)t=0;this.x=e[t];this.y=e[t+1];this.z=e[t+2];return this},toArray:function(e,t){if(e===undefined)e=[];if(t===undefined)t=0;e[t]=this.x;e[t+1]=this.y;e[t+2]=this.z;return e},fromBufferAttribute:function(e,t,i){if(i!==undefined){console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute().")}this.x=e.getX(t);this.y=e.getY(t);this.z=e.getZ(t);return this}});function Pt(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];if(arguments.length>0){console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}}Object.assign(Pt.prototype,{isMatrix4:true,set:function(e,t,i,r,n,a,s,o,l,u,h,c,f,d,p,m){var v=this.elements;v[0]=e;v[4]=t;v[8]=i;v[12]=r;v[1]=n;v[5]=a;v[9]=s;v[13]=o;v[2]=l;v[6]=u;v[10]=h;v[14]=c;v[3]=f;v[7]=d;v[11]=p;v[15]=m;return this},identity:function(){this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1);return this},clone:function(){return(new Pt).fromArray(this.elements)},copy:function(e){var t=this.elements;var i=e.elements;t[0]=i[0];t[1]=i[1];t[2]=i[2];t[3]=i[3];t[4]=i[4];t[5]=i[5];t[6]=i[6];t[7]=i[7];t[8]=i[8];t[9]=i[9];t[10]=i[10];t[11]=i[11];t[12]=i[12];t[13]=i[13];t[14]=i[14];t[15]=i[15];return this},copyPosition:function(e){var t=this.elements,i=e.elements;t[12]=i[12];t[13]=i[13];t[14]=i[14];return this},extractBasis:function(e,t,i){e.setFromMatrixColumn(this,0);t.setFromMatrixColumn(this,1);i.setFromMatrixColumn(this,2);return this},makeBasis:function(e,t,i){this.set(e.x,t.x,i.x,0,e.y,t.y,i.y,0,e.z,t.z,i.z,0,0,0,0,1);return this},extractRotation:function(){var e=new At;return function t(i){var r=this.elements;var n=i.elements;var a=1/e.setFromMatrixColumn(i,0).length();var s=1/e.setFromMatrixColumn(i,1).length();var o=1/e.setFromMatrixColumn(i,2).length();r[0]=n[0]*a;r[1]=n[1]*a;r[2]=n[2]*a;r[4]=n[4]*s;r[5]=n[5]*s;r[6]=n[6]*s;r[8]=n[8]*o;r[9]=n[9]*o;r[10]=n[10]*o;return this}}(),makeRotationFromEuler:function(e){if(!(e&&e.isEuler)){console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.")}
var t=this.elements;var i=e.x,r=e.y,n=e.z;var a=Math.cos(i),s=Math.sin(i);var o=Math.cos(r),l=Math.sin(r);var u=Math.cos(n),h=Math.sin(n);if(e.order==="XYZ"){var c=a*u,f=a*h,d=s*u,p=s*h;t[0]=o*u;t[4]=-o*h;t[8]=l;t[1]=f+d*l;t[5]=c-p*l;t[9]=-s*o;t[2]=p-c*l;t[6]=d+f*l;t[10]=a*o}else if(e.order==="YXZ"){var m=o*u,v=o*h,g=l*u,y=l*h;t[0]=m+y*s;t[4]=g*s-v;t[8]=a*l;t[1]=a*h;t[5]=a*u;t[9]=-s;t[2]=v*s-g;t[6]=y+m*s;t[10]=a*o}else if(e.order==="ZXY"){var m=o*u,v=o*h,g=l*u,y=l*h;t[0]=m-y*s;t[4]=-a*h;t[8]=g+v*s;t[1]=v+g*s;t[5]=a*u;t[9]=y-m*s;t[2]=-a*l;t[6]=s;t[10]=a*o}else if(e.order==="ZYX"){var c=a*u,f=a*h,d=s*u,p=s*h;t[0]=o*u;t[4]=d*l-f;t[8]=c*l+p;t[1]=o*h;t[5]=p*l+c;t[9]=f*l-d;t[2]=-l;t[6]=s*o;t[10]=a*o}else if(e.order==="YZX"){var _=a*o,b=a*l,x=s*o,w=s*l;t[0]=o*u;t[4]=w-_*h;t[8]=x*h+b;t[1]=h;t[5]=a*u;t[9]=-s*u;t[2]=-l*u;t[6]=b*h+x;t[10]=_-w*h}else if(e.order==="XZY"){var _=a*o,b=a*l,x=s*o,w=s*l;t[0]=o*u;t[4]=-h;t[8]=l*u;t[1]=_*h+w;t[5]=a*u;t[9]=b*h-x;t[2]=x*h-b;t[6]=s*u;t[10]=w*h+_}t[3]=0;t[7]=0;t[11]=0;t[12]=0;t[13]=0;t[14]=0;t[15]=1;return this},makeRotationFromQuaternion:function(e){var t=this.elements;var i=e._x,r=e._y,n=e._z,a=e._w;var s=i+i,o=r+r,l=n+n;var u=i*s,h=i*o,c=i*l;var f=r*o,d=r*l,p=n*l;var m=a*s,v=a*o,g=a*l;t[0]=1-(f+p);t[4]=h-g;t[8]=c+v;t[1]=h+g;t[5]=1-(u+p);t[9]=d-m;t[2]=c-v;t[6]=d+m;t[10]=1-(u+f);t[3]=0;t[7]=0;t[11]=0;t[12]=0;t[13]=0;t[14]=0;t[15]=1;return this},lookAt:function(){var e=new At;var t=new At;var i=new At;return function r(n,a,s){var o=this.elements;i.subVectors(n,a);if(i.lengthSq()===0){i.z=1}i.normalize();e.crossVectors(s,i);if(e.lengthSq()===0){if(Math.abs(s.z)===1){i.x+=1e-4}else{i.z+=1e-4}i.normalize();e.crossVectors(s,i)}e.normalize();t.crossVectors(i,e);o[0]=e.x;o[4]=t.x;o[8]=i.x;o[1]=e.y;o[5]=t.y;o[9]=i.y;o[2]=e.z;o[6]=t.z;o[10]=i.z;return this}}(),multiply:function(e,t){if(t!==undefined){console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead.");return this.multiplyMatrices(e,t)}return this.multiplyMatrices(this,e)},premultiply:function(e){return this.multiplyMatrices(e,this)},multiplyMatrices:function(e,t){var i=e.elements;var r=t.elements;var n=this.elements;var a=i[0],s=i[4],o=i[8],l=i[12];var u=i[1],h=i[5],c=i[9],f=i[13];var d=i[2],p=i[6],m=i[10],v=i[14];var g=i[3],y=i[7],_=i[11],b=i[15];var x=r[0],w=r[4],T=r[8],M=r[12];var E=r[1],S=r[5],A=r[9],P=r[13];var R=r[2],L=r[6],C=r[10],O=r[14];var I=r[3],D=r[7],k=r[11],U=r[15];n[0]=a*x+s*E+o*R+l*I;n[4]=a*w+s*S+o*L+l*D;n[8]=a*T+s*A+o*C+l*k;n[12]=a*M+s*P+o*O+l*U;n[1]=u*x+h*E+c*R+f*I;n[5]=u*w+h*S+c*L+f*D;n[9]=u*T+h*A+c*C+f*k;n[13]=u*M+h*P+c*O+f*U;n[2]=d*x+p*E+m*R+v*I;n[6]=d*w+p*S+m*L+v*D;n[10]=d*T+p*A+m*C+v*k;n[14]=d*M+p*P+m*O+v*U;n[3]=g*x+y*E+_*R+b*I;n[7]=g*w+y*S+_*L+b*D;n[11]=g*T+y*A+_*C+b*k;n[15]=g*M+y*P+_*O+b*U;return this},multiplyScalar:function(e){var t=this.elements;t[0]*=e;t[4]*=e;t[8]*=e;t[12]*=e;t[1]*=e;t[5]*=e;t[9]*=e;t[13]*=e;t[2]*=e;t[6]*=e;t[10]*=e;t[14]*=e;t[3]*=e;t[7]*=e;t[11]*=e;t[15]*=e;return this},applyToBufferAttribute:function(){var e=new At;return function t(i){for(var r=0,n=i.count;r<n;r++){e.x=i.getX(r);e.y=i.getY(r);e.z=i.getZ(r);e.applyMatrix4(this);i.setXYZ(r,e.x,e.y,e.z)}return i}}(),determinant:function(){var e=this.elements;var t=e[0],i=e[4],r=e[8],n=e[12];var a=e[1],s=e[5],o=e[9],l=e[13];var u=e[2],h=e[6],c=e[10],f=e[14];var d=e[3],p=e[7],m=e[11],v=e[15];return d*(+n*o*h-r*l*h-n*s*c+i*l*c+r*s*f-i*o*f)+p*(+t*o*f-t*l*c+n*a*c-r*a*f+r*l*u-n*o*u)+m*(+t*l*h-t*s*f-n*a*h+i*a*f+n*s*u-i*l*u)+v*(-r*s*u-t*o*h+t*s*c+r*a*h-i*a*c+i*o*u)},transpose:function(){var e=this.elements;var t;t=e[1];e[1]=e[4];e[4]=t;t=e[2];e[2]=e[8];e[8]=t;t=e[6];e[6]=e[9];e[9]=t;t=e[3];e[3]=e[12];e[12]=t;t=e[7];e[7]=e[13];e[13]=t;t=e[11];e[11]=e[14];e[14]=t;return this},setPosition:function(e){var t=this.elements;t[12]=e.x;t[13]=e.y;t[14]=e.z;return this},getInverse:function(e,t){var i=this.elements,r=e.elements,n=r[0],a=r[1],s=r[2],o=r[3],l=r[4],u=r[5],h=r[6],c=r[7],f=r[8],d=r[9],p=r[10],m=r[11],v=r[12],g=r[13],y=r[14],_=r[15],b=d*y*c-g*p*c+g*h*m-u*y*m-d*h*_+u*p*_,x=v*p*c-f*y*c-v*h*m+l*y*m+f*h*_-l*p*_,w=f*g*c-v*d*c+v*u*m-l*g*m-f*u*_+l*d*_,T=v*d*h-f*g*h-v*u*p+l*g*p+f*u*y-l*d*y;var M=n*b+a*x+s*w+o*T;if(M===0){var E="THREE.Matrix4: .getInverse() can't invert matrix, determinant is 0";if(t===true){throw new Error(E)}else{console.warn(E)}return this.identity()}var S=1/M;i[0]=b*S;i[1]=(g*p*o-d*y*o-g*s*m+a*y*m+d*s*_-a*p*_)*S;i[2]=(u*y*o-g*h*o+g*s*c-a*y*c-u*s*_+a*h*_)*S;i[3]=(d*h*o-u*p*o-d*s*c+a*p*c+u*s*m-a*h*m)*S;i[4]=x*S;i[5]=(f*y*o-v*p*o+v*s*m-n*y*m-f*s*_+n*p*_)*S;i[6]=(v*h*o-l*y*o-v*s*c+n*y*c+l*s*_-n*h*_)*S;i[7]=(l*p*o-f*h*o+f*s*c-n*p*c-l*s*m+n*h*m)*S;i[8]=w*S;i[9]=(v*d*o-f*g*o-v*a*m+n*g*m+f*a*_-n*d*_)*S;i[10]=(l*g*o-v*u*o+v*a*c-n*g*c-l*a*_+n*u*_)*S;i[11]=(f*u*o-l*d*o-f*a*c+n*d*c+l*a*m-n*u*m)*S;i[12]=T*S;i[13]=(f*g*s-v*d*s+v*a*p-n*g*p-f*a*y+n*d*y)*S;i[14]=(v*u*s-l*g*s-v*a*h+n*g*h+l*a*y-n*u*y)*S;i[15]=(l*d*s-f*u*s+f*a*h-n*d*h-l*a*p+n*u*p)*S;return this},scale:function(e){var t=this.elements;var i=e.x,r=e.y,n=e.z;t[0]*=i;t[4]*=r;t[8]*=n;t[1]*=i;t[5]*=r;t[9]*=n;t[2]*=i;t[6]*=r;t[10]*=n;t[3]*=i;t[7]*=r;t[11]*=n;return this},getMaxScaleOnAxis:function(){var e=this.elements;var t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2];var i=e[4]*e[4]+e[5]*e[5]+e[6]*e[6];var r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,i,r))},makeTranslation:function(e,t,i){this.set(1,0,0,e,0,1,0,t,0,0,1,i,0,0,0,1);return this},makeRotationX:function(e){var t=Math.cos(e),i=Math.sin(e);this.set(1,0,0,0,0,t,-i,0,0,i,t,0,0,0,0,1);return this},makeRotationY:function(e){var t=Math.cos(e),i=Math.sin(e);this.set(t,0,i,0,0,1,0,0,-i,0,t,0,0,0,0,1);return this},makeRotationZ:function(e){var t=Math.cos(e),i=Math.sin(e);this.set(t,-i,0,0,i,t,0,0,0,0,1,0,0,0,0,1);return this},makeRotationAxis:function(e,t){var i=Math.cos(t);var r=Math.sin(t);var n=1-i;var a=e.x,s=e.y,o=e.z;var l=n*a,u=n*s;this.set(l*a+i,l*s-r*o,l*o+r*s,0,l*s+r*o,u*s+i,u*o-r*a,0,l*o-r*s,u*o+r*a,n*o*o+i,0,0,0,0,1);return this},makeScale:function(e,t,i){this.set(e,0,0,0,0,t,0,0,0,0,i,0,0,0,0,1);return this},makeShear:function(e,t,i){this.set(1,t,i,0,e,1,i,0,e,t,1,0,0,0,0,1);return this},compose:function(e,t,i){this.makeRotationFromQuaternion(t);this.scale(i);this.setPosition(e);return this},decompose:function(){var e=new At;var t=new Pt;return function i(r,n,a){var s=this.elements;var o=e.set(s[0],s[1],s[2]).length();var l=e.set(s[4],s[5],s[6]).length();var u=e.set(s[8],s[9],s[10]).length();var h=this.determinant();if(h<0)o=-o;r.x=s[12];r.y=s[13];r.z=s[14];t.copy(this);var c=1/o;var f=1/l;var d=1/u;t.elements[0]*=c;t.elements[1]*=c;t.elements[2]*=c;t.elements[4]*=f;t.elements[5]*=f;t.elements[6]*=f;t.elements[8]*=d;t.elements[9]*=d;t.elements[10]*=d;n.setFromRotationMatrix(t);a.x=o;a.y=l;a.z=u;return this}}(),makePerspective:function(e,t,i,r,n,a){if(a===undefined){console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.")}var s=this.elements;var o=2*n/(t-e);var l=2*n/(i-r);var u=(t+e)/(t-e);var h=(i+r)/(i-r);var c=-(a+n)/(a-n);var f=-2*a*n/(a-n);s[0]=o;s[4]=0;s[8]=u;s[12]=0;s[1]=0;s[5]=l;s[9]=h;s[13]=0;s[2]=0;s[6]=0;s[10]=c;s[14]=f;s[3]=0;s[7]=0;s[11]=-1;s[15]=0;return this},makeOrthographic:function(e,t,i,r,n,a){var s=this.elements;var o=1/(t-e);var l=1/(i-r);var u=1/(a-n);var h=(t+e)*o;var c=(i+r)*l;var f=(a+n)*u;s[0]=2*o;s[4]=0;s[8]=0;s[12]=-h;s[1]=0;s[5]=2*l;s[9]=0;s[13]=-c;s[2]=0;s[6]=0;s[10]=-2*u;s[14]=-f;s[3]=0;s[7]=0;s[11]=0;s[15]=1;return this},equals:function(e){var t=this.elements;var i=e.elements;for(var r=0;r<16;r++){if(t[r]!==i[r])return false}return true},fromArray:function(e,t){if(t===undefined)t=0;for(var i=0;i<16;i++){this.elements[i]=e[i+t]}return this},toArray:function(e,t){if(e===undefined)e=[];if(t===undefined)t=0;var i=this.elements;e[t]=i[0];e[t+1]=i[1];e[t+2]=i[2];e[t+3]=i[3];e[t+4]=i[4];e[t+5]=i[5];e[t+6]=i[6];e[t+7]=i[7];e[t+8]=i[8];e[t+9]=i[9];e[t+10]=i[10];e[t+11]=i[11];e[t+12]=i[12];e[t+13]=i[13];e[t+14]=i[14];e[t+15]=i[15];return e}});function Rt(e,t,i,r,n,a,s,o,l,u,h,c){wt.call(this,null,a,s,o,l,u,r,n,h,c);this.image={data:e,width:t,height:i};this.magFilter=l!==undefined?l:ve;this.minFilter=u!==undefined?u:ve;this.generateMipmaps=false;this.flipY=false;this.unpackAlignment=1}Rt.prototype=Object.create(wt.prototype);Rt.prototype.constructor=Rt;Rt.prototype.isDataTexture=true;function Lt(e,t,i,r,n,a,s,o,l,u){e=e!==undefined?e:[];t=t!==undefined?t:se;wt.call(this,e,t,i,r,n,a,s,o,l,u);this.flipY=false}Lt.prototype=Object.create(wt.prototype);Lt.prototype.constructor=Lt;Lt.prototype.isCubeTexture=true;Object.defineProperty(Lt.prototype,"images",{get:function(){return this.image},set:function(e){this.image=e}});var Ct=new wt;var Ot=new Lt;function It(){this.seq=[];this.map={}}var Dt=[];var kt=[];var Ut=new Float32Array(16);var Ft=new Float32Array(9);function Nt(e,t,i){var r=e[0];if(r<=0||r>0)return e;var n=t*i,a=Dt[n];if(a===undefined){a=new Float32Array(n);Dt[n]=a}if(t!==0){r.toArray(a,0);for(var s=1,o=0;s!==t;++s){o+=i;e[s].toArray(a,o)}}return a}function Bt(e,t){var i=kt[t];if(i===undefined){i=new Int32Array(t);kt[t]=i}for(var r=0;r!==t;++r)i[r]=e.allocTextureUnit();return i}function zt(e,t){e.uniform1f(this.addr,t)}function jt(e,t){e.uniform1i(this.addr,t)}function Gt(e,t){if(t.x===undefined)e.uniform2fv(this.addr,t);else e.uniform2f(this.addr,t.x,t.y)}function Ht(e,t){if(t.x!==undefined)e.uniform3f(this.addr,t.x,t.y,t.z);else if(t.r!==undefined)e.uniform3f(this.addr,t.r,t.g,t.b);else e.uniform3fv(this.addr,t)}function Vt(e,t){if(t.x===undefined)e.uniform4fv(this.addr,t);else e.uniform4f(this.addr,t.x,t.y,t.z,t.w)}function Wt(e,t){e.uniformMatrix2fv(this.addr,false,t.elements||t)}function Xt(e,t){if(t.elements===undefined){e.uniformMatrix3fv(this.addr,false,t)}else{Ft.set(t.elements);e.uniformMatrix3fv(this.addr,false,Ft)}}function Yt(e,t){if(t.elements===undefined){e.uniformMatrix4fv(this.addr,false,t)}else{Ut.set(t.elements);e.uniformMatrix4fv(this.addr,false,Ut)}}function qt(e,t,i){var r=i.allocTextureUnit();e.uniform1i(this.addr,r);i.setTexture2D(t||Ct,r)}function $t(e,t,i){var r=i.allocTextureUnit();e.uniform1i(this.addr,r);i.setTextureCube(t||Ot,r)}function Zt(e,t){e.uniform2iv(this.addr,t)}function Jt(e,t){e.uniform3iv(this.addr,t)}function Qt(e,t){e.uniform4iv(this.addr,t)}function Kt(e){switch(e){case 5126:return zt;case 35664:return Gt;case 35665:return Ht;case 35666:return Vt;case 35674:return Wt;case 35675:return Xt;case 35676:return Yt;case 35678:case 36198:return qt;case 35680:return $t;case 5124:case 35670:return jt;case 35667:case 35671:return Zt;case 35668:case 35672:return Jt;case 35669:case 35673:return Qt}}function ei(e,t){e.uniform1fv(this.addr,t)}function ti(e,t){e.uniform1iv(this.addr,t)}function ii(e,t){e.uniform2fv(this.addr,Nt(t,this.size,2))}function ri(e,t){e.uniform3fv(this.addr,Nt(t,this.size,3))}function ni(e,t){e.uniform4fv(this.addr,Nt(t,this.size,4))}function ai(e,t){e.uniformMatrix2fv(this.addr,false,Nt(t,this.size,4))}function si(e,t){e.uniformMatrix3fv(this.addr,false,Nt(t,this.size,9))}function oi(e,t){e.uniformMatrix4fv(this.addr,false,Nt(t,this.size,16))}function li(e,t,i){var r=t.length,n=Bt(i,r);e.uniform1iv(this.addr,n);for(var a=0;a!==r;++a){i.setTexture2D(t[a]||Ct,n[a])}}function ui(e,t,i){var r=t.length,n=Bt(i,r);e.uniform1iv(this.addr,n);for(var a=0;a!==r;++a){i.setTextureCube(t[a]||Ot,n[a])}}function hi(e){switch(e){case 5126:return ei;case 35664:return ii;case 35665:return ri;case 35666:return ni;case 35674:return ai;case 35675:return si;case 35676:return oi;case 35678:return li;case 35680:return ui;case 5124:case 35670:return ti;case 35667:case 35671:return Zt;case 35668:case 35672:return Jt;case 35669:case 35673:return Qt}}function ci(e,t,i){this.id=e;this.addr=i;this.setValue=Kt(t.type)}function fi(e,t,i){this.id=e;this.addr=i;this.size=t.size;this.setValue=hi(t.type)}function di(e){this.id=e;It.call(this)}di.prototype.setValue=function(e,t){var i=this.seq;for(var r=0,n=i.length;r!==n;++r){var a=i[r];a.setValue(e,t[a.id])}};var pi=/([\w\d_]+)(\])?(\[|\.)?/g;function mi(e,t){e.seq.push(t);e.map[t.id]=t}function vi(e,t,i){var r=e.name,n=r.length;pi.lastIndex=0;for(;;){var a=pi.exec(r),s=pi.lastIndex,o=a[1],l=a[2]==="]",u=a[3];if(l)o=o|0;if(u===undefined||u==="["&&s+2===n){mi(i,u===undefined?new ci(o,e,t):new fi(o,e,t));break}else{var h=i.map,c=h[o];if(c===undefined){c=new di(o);mi(i,c)}i=c}}}function gi(e,t,i){It.call(this);this.renderer=i;var r=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(var n=0;n<r;++n){var a=e.getActiveUniform(t,n),s=a.name,o=e.getUniformLocation(t,s);vi(a,o,this)}}gi.prototype.setValue=function(e,t,i){var r=this.map[t];if(r!==undefined)r.setValue(e,i,this.renderer)};gi.prototype.setOptional=function(e,t,i){var r=t[i];if(r!==undefined)this.setValue(e,i,r)};gi.upload=function(e,t,i,r){for(var n=0,a=t.length;n!==a;++n){var s=t[n],o=i[s.id];if(o.needsUpdate!==false){s.setValue(e,o.value,r)}}};gi.seqWithValue=function(e,t){var i=[];for(var r=0,n=e.length;r!==n;++r){var a=e[r];if(a.id in t)i.push(a)}return i};var yi={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function _i(e,t,i){if(t===undefined&&i===undefined){return this.set(e)}return this.setRGB(e,t,i)}Object.assign(_i.prototype,{isColor:true,r:1,g:1,b:1,set:function(e){if(e&&e.isColor){this.copy(e)}else if(typeof e==="number"){this.setHex(e)}else if(typeof e==="string"){this.setStyle(e)}return this},setScalar:function(e){this.r=e;this.g=e;this.b=e;return this},setHex:function(e){e=Math.floor(e);this.r=(e>>16&255)/255;this.g=(e>>8&255)/255;this.b=(e&255)/255;return this},setRGB:function(e,t,i){this.r=e;this.g=t;this.b=i;return this},setHSL:function(){function e(e,t,i){if(i<0)i+=1;if(i>1)i-=1;if(i<1/6)return e+(t-e)*6*i;if(i<1/2)return t;if(i<2/3)return e+(t-e)*6*(2/3-i);return e}return function t(i,r,n){i=_t.euclideanModulo(i,1);r=_t.clamp(r,0,1);n=_t.clamp(n,0,1);if(r===0){this.r=this.g=this.b=n}else{var a=n<=.5?n*(1+r):n+r-n*r;var s=2*n-a;this.r=e(s,a,i+1/3);this.g=e(s,a,i);this.b=e(s,a,i-1/3)}return this}}(),setStyle:function(e){function t(t){if(t===undefined)return;if(parseFloat(t)<1){console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}}var i;if(i=/^((?:rgb|hsl)a?)\(\s*([^\)]*)\)/.exec(e)){var r;var n=i[1];var a=i[2];switch(n){case"rgb":case"rgba":if(r=/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(a)){this.r=Math.min(255,parseInt(r[1],10))/255;this.g=Math.min(255,parseInt(r[2],10))/255;this.b=Math.min(255,parseInt(r[3],10))/255;t(r[5]);return this}if(r=/^(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(a)){this.r=Math.min(100,parseInt(r[1],10))/100;this.g=Math.min(100,parseInt(r[2],10))/100;this.b=Math.min(100,parseInt(r[3],10))/100;t(r[5]);return this}break;case"hsl":case"hsla":if(r=/^([0-9]*\.?[0-9]+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(a)){var s=parseFloat(r[1])/360;var o=parseInt(r[2],10)/100;var l=parseInt(r[3],10)/100;t(r[5]);return this.setHSL(s,o,l)}break}}else if(i=/^\#([A-Fa-f0-9]+)$/.exec(e)){var u=i[1];var h=u.length;if(h===3){this.r=parseInt(u.charAt(0)+u.charAt(0),16)/255;this.g=parseInt(u.charAt(1)+u.charAt(1),16)/255;this.b=parseInt(u.charAt(2)+u.charAt(2),16)/255;return this}else if(h===6){this.r=parseInt(u.charAt(0)+u.charAt(1),16)/255;this.g=parseInt(u.charAt(2)+u.charAt(3),16)/255;this.b=parseInt(u.charAt(4)+u.charAt(5),16)/255;return this}}if(e&&e.length>0){var u=yi[e];if(u!==undefined){this.setHex(u)}else{console.warn("THREE.Color: Unknown color "+e)}}return this},clone:function(){return new this.constructor(this.r,this.g,this.b)},copy:function(e){this.r=e.r;this.g=e.g;this.b=e.b;return this},copyGammaToLinear:function(e,t){if(t===undefined)t=2;this.r=Math.pow(e.r,t);this.g=Math.pow(e.g,t);this.b=Math.pow(e.b,t);return this},copyLinearToGamma:function(e,t){if(t===undefined)t=2;var i=t>0?1/t:1;this.r=Math.pow(e.r,i);this.g=Math.pow(e.g,i);this.b=Math.pow(e.b,i);return this},convertGammaToLinear:function(){var e=this.r,t=this.g,i=this.b;this.r=e*e;this.g=t*t;this.b=i*i;return this},convertLinearToGamma:function(){this.r=Math.sqrt(this.r);this.g=Math.sqrt(this.g);this.b=Math.sqrt(this.b);return this},getHex:function(){return this.r*255<<16^this.g*255<<8^this.b*255<<0},getHexString:function(){return("000000"+this.getHex().toString(16)).slice(-6)},getHSL:function(e){var t=e||{h:0,s:0,l:0};var i=this.r,r=this.g,n=this.b;var a=Math.max(i,r,n);var s=Math.min(i,r,n);var o,l;var u=(s+a)/2;if(s===a){o=0;l=0}else{var h=a-s;l=u<=.5?h/(a+s):h/(2-a-s);switch(a){case i:o=(r-n)/h+(r<n?6:0);break;case r:o=(n-i)/h+2;break;case n:o=(i-r)/h+4;break}o/=6}t.h=o;t.s=l;t.l=u;return t},getStyle:function(){return"rgb("+(this.r*255|0)+","+(this.g*255|0)+","+(this.b*255|0)+")"},offsetHSL:function(e,t,i){var r=this.getHSL();r.h+=e;r.s+=t;r.l+=i;this.setHSL(r.h,r.s,r.l);return this},add:function(e){this.r+=e.r;this.g+=e.g;this.b+=e.b;return this},addColors:function(e,t){this.r=e.r+t.r;this.g=e.g+t.g;this.b=e.b+t.b;return this},addScalar:function(e){this.r+=e;this.g+=e;this.b+=e;return this},sub:function(e){this.r=Math.max(0,this.r-e.r);this.g=Math.max(0,this.g-e.g);this.b=Math.max(0,this.b-e.b);return this},multiply:function(e){this.r*=e.r;this.g*=e.g;this.b*=e.b;return this},multiplyScalar:function(e){this.r*=e;this.g*=e;this.b*=e;return this},lerp:function(e,t){this.r+=(e.r-this.r)*t;this.g+=(e.g-this.g)*t;this.b+=(e.b-this.b)*t;return this},equals:function(e){return e.r===this.r&&e.g===this.g&&e.b===this.b},fromArray:function(e,t){if(t===undefined)t=0;this.r=e[t];this.g=e[t+1];this.b=e[t+2];return this},toArray:function(e,t){if(e===undefined)e=[];if(t===undefined)t=0;e[t]=this.r;e[t+1]=this.g;e[t+2]=this.b;return e},toJSON:function(){return this.getHex()}});var bi={common:{diffuse:{value:new _i(15658734)},opacity:{value:1},map:{value:null},offsetRepeat:{value:new Tt(0,0,1,1)},alphaMap:{value:null}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new bt(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new _i(16777215)}},lights:{ambientLightColor:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}}},points:{diffuse:{value:new _i(15658734)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},offsetRepeat:{value:new Tt(0,0,1,1)}}};var xi={merge:function(e){var t={};for(var i=0;i<e.length;i++){var r=this.clone(e[i]);for(var n in r){t[n]=r[n]}}return t},clone:function(e){var t={};for(var i in e){t[i]={};for(var r in e[i]){var n=e[i][r];if(n&&(n.isColor||n.isMatrix3||n.isMatrix4||n.isVector2||n.isVector3||n.isVector4||n.isTexture)){t[i][r]=n.clone()}else if(Array.isArray(n)){t[i][r]=n.slice()}else{t[i][r]=n}}}return t}};var wi="#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif\n";var Ti="#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif\n";var Mi="#ifdef ALPHATEST\n\tif ( diffuseColor.a < ALPHATEST ) discard;\n#endif\n";var Ei="#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( PHYSICAL )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );\n\t#endif\n#endif\n";var Si="#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif";var Ai="\nvec3 transformed = vec3( position );\n";var Pi="\nvec3 objectNormal = vec3( normal );\n";var Ri="float punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\tif( decayExponent > 0.0 ) {\n#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\tfloat maxDistanceCutoffFactor = pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\treturn distanceFalloff * maxDistanceCutoffFactor;\n#else\n\t\treturn pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\n#endif\n\t}\n\treturn 1.0;\n}\nvec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );\n\treturn ( 1.0 - specularColor ) * fresnel + specularColor;\n}\nfloat G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\tfloat gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\treturn 1.0 / ( gl * gv );\n}\nfloat G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNL = saturate( dot( geometry.normal, incidentLight.direction ) );\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( G * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE  = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS  = 0.5 / LUT_SIZE;\n\tfloat theta = acos( dot( N, V ) );\n\tvec2 uv = vec2(\n\t\tsqrt( saturate( roughness ) ),\n\t\tsaturate( theta / ( 0.5 * PI ) ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.86267 + (0.49788 + 0.01436 * y ) * y;\n\tfloat b = 3.45068 + (4.18814 + y) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = (x > 0.0) ? v : 0.5 * inversesqrt( 1.0 - x * x ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transpose( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tvec3 result = vec3( LTC_ClippedSphereFormFactor( vectorFormFactor ) );\n\treturn result;\n}\nvec3 BRDF_Specular_GGX_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 AB = vec2( -1.04, 1.04 ) * a004 + r.zw;\n\treturn specularColor * AB.x + AB.y;\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\nfloat GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {\n\treturn ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );\n}\nfloat BlinnExponentToGGXRoughness( const in float blinnExponent ) {\n\treturn sqrt( 2.0 / ( blinnExponent + 2.0 ) );\n}\n";var Li="#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\n\t\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\n\t\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 );\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif\n";var Ci="#if NUM_CLIPPING_PLANES > 0\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; ++ i ) {\n\t\tvec4 plane = clippingPlanes[ i ];\n\t\tif ( dot( vViewPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t\t\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; ++ i ) {\n\t\t\tvec4 plane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vViewPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\tif ( clipped ) discard;\n\t\n\t#endif\n#endif\n";var Oi="#if NUM_CLIPPING_PLANES > 0\n\t#if ! defined( PHYSICAL ) && ! defined( PHONG )\n\t\tvarying vec3 vViewPosition;\n\t#endif\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif\n";var Ii="#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG )\n\tvarying vec3 vViewPosition;\n#endif\n";var Di="#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n";var ki="#ifdef USE_COLOR\n\tdiffuseColor.rgb *= vColor;\n#endif";var Ui="#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif\n";var Fi="#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif";var Ni="#ifdef USE_COLOR\n\tvColor.xyz = color.xyz;\n#endif"
;var Bi="#define PI 3.14159265359\n#define PI2 6.28318530718\n#define PI_HALF 1.5707963267949\n#define RECIPROCAL_PI 0.31830988618\n#define RECIPROCAL_PI2 0.15915494\n#define LOG2 1.442695\n#define EPSILON 1e-6\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#define whiteCompliment(a) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract(sin(sn) * c);\n}\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\tfloat distance = dot( planeNormal, point - pointOnPlane );\n\treturn - distance * planeNormal + point;\n}\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn sign( dot( point - pointOnPlane, planeNormal ) );\n}\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\n}\nmat3 transpose( const in mat3 v ) {\n\tmat3 tmp;\n\ttmp[0] = vec3(v[0].x, v[1].x, v[2].x);\n\ttmp[1] = vec3(v[0].y, v[1].y, v[2].y);\n\ttmp[2] = vec3(v[0].z, v[1].z, v[2].z);\n\treturn tmp;\n}\n";var zi="#ifdef ENVMAP_TYPE_CUBE_UV\n#define cubeUV_textureSize (1024.0)\nint getFaceFromDirection(vec3 direction) {\n\tvec3 absDirection = abs(direction);\n\tint face = -1;\n\tif( absDirection.x > absDirection.z ) {\n\t\tif(absDirection.x > absDirection.y )\n\t\t\tface = direction.x > 0.0 ? 0 : 3;\n\t\telse\n\t\t\tface = direction.y > 0.0 ? 1 : 4;\n\t}\n\telse {\n\t\tif(absDirection.z > absDirection.y )\n\t\t\tface = direction.z > 0.0 ? 2 : 5;\n\t\telse\n\t\t\tface = direction.y > 0.0 ? 1 : 4;\n\t}\n\treturn face;\n}\n#define cubeUV_maxLods1  (log2(cubeUV_textureSize*0.25) - 1.0)\n#define cubeUV_rangeClamp (exp2((6.0 - 1.0) * 2.0))\nvec2 MipLevelInfo( vec3 vec, float roughnessLevel, float roughness ) {\n\tfloat scale = exp2(cubeUV_maxLods1 - roughnessLevel);\n\tfloat dxRoughness = dFdx(roughness);\n\tfloat dyRoughness = dFdy(roughness);\n\tvec3 dx = dFdx( vec * scale * dxRoughness );\n\tvec3 dy = dFdy( vec * scale * dyRoughness );\n\tfloat d = max( dot( dx, dx ), dot( dy, dy ) );\n\td = clamp(d, 1.0, cubeUV_rangeClamp);\n\tfloat mipLevel = 0.5 * log2(d);\n\treturn vec2(floor(mipLevel), fract(mipLevel));\n}\n#define cubeUV_maxLods2 (log2(cubeUV_textureSize*0.25) - 2.0)\n#define cubeUV_rcpTextureSize (1.0 / cubeUV_textureSize)\nvec2 getCubeUV(vec3 direction, float roughnessLevel, float mipLevel) {\n\tmipLevel = roughnessLevel > cubeUV_maxLods2 - 3.0 ? 0.0 : mipLevel;\n\tfloat a = 16.0 * cubeUV_rcpTextureSize;\n\tvec2 exp2_packed = exp2( vec2( roughnessLevel, mipLevel ) );\n\tvec2 rcp_exp2_packed = vec2( 1.0 ) / exp2_packed;\n\tfloat powScale = exp2_packed.x * exp2_packed.y;\n\tfloat scale = rcp_exp2_packed.x * rcp_exp2_packed.y * 0.25;\n\tfloat mipOffset = 0.75*(1.0 - rcp_exp2_packed.y) * rcp_exp2_packed.x;\n\tbool bRes = mipLevel == 0.0;\n\tscale =  bRes && (scale < a) ? a : scale;\n\tvec3 r;\n\tvec2 offset;\n\tint face = getFaceFromDirection(direction);\n\tfloat rcpPowScale = 1.0 / powScale;\n\tif( face == 0) {\n\t\tr = vec3(direction.x, -direction.z, direction.y);\n\t\toffset = vec2(0.0+mipOffset,0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 1) {\n\t\tr = vec3(direction.y, direction.x, direction.z);\n\t\toffset = vec2(scale+mipOffset, 0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 2) {\n\t\tr = vec3(direction.z, direction.x, direction.y);\n\t\toffset = vec2(2.0*scale+mipOffset, 0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 3) {\n\t\tr = vec3(direction.x, direction.z, direction.y);\n\t\toffset = vec2(0.0+mipOffset,0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\telse if( face == 4) {\n\t\tr = vec3(direction.y, direction.x, -direction.z);\n\t\toffset = vec2(scale+mipOffset, 0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\telse {\n\t\tr = vec3(direction.z, -direction.x, direction.y);\n\t\toffset = vec2(2.0*scale+mipOffset, 0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\tr = normalize(r);\n\tfloat texelOffset = 0.5 * cubeUV_rcpTextureSize;\n\tvec2 s = ( r.yz / abs( r.x ) + vec2( 1.0 ) ) * 0.5;\n\tvec2 base = offset + vec2( texelOffset );\n\treturn base + s * ( scale - 2.0 * texelOffset );\n}\n#define cubeUV_maxLods3 (log2(cubeUV_textureSize*0.25) - 3.0)\nvec4 textureCubeUV(vec3 reflectedDirection, float roughness ) {\n\tfloat roughnessVal = roughness* cubeUV_maxLods3;\n\tfloat r1 = floor(roughnessVal);\n\tfloat r2 = r1 + 1.0;\n\tfloat t = fract(roughnessVal);\n\tvec2 mipInfo = MipLevelInfo(reflectedDirection, r1, roughness);\n\tfloat s = mipInfo.y;\n\tfloat level0 = mipInfo.x;\n\tfloat level1 = level0 + 1.0;\n\tlevel1 = level1 > 5.0 ? 5.0 : level1;\n\tlevel0 += min( floor( s + 0.5 ), 5.0 );\n\tvec2 uv_10 = getCubeUV(reflectedDirection, r1, level0);\n\tvec4 color10 = envMapTexelToLinear(texture2D(envMap, uv_10));\n\tvec2 uv_20 = getCubeUV(reflectedDirection, r2, level0);\n\tvec4 color20 = envMapTexelToLinear(texture2D(envMap, uv_20));\n\tvec4 result = mix(color10, color20, t);\n\treturn vec4(result.rgb, 1.0);\n}\n#endif\n";var ji="vec3 transformedNormal = normalMatrix * objectNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n";var Gi="#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif\n";var Hi="#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, uv ).x * displacementScale + displacementBias );\n#endif\n";var Vi="#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\temissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif\n";var Wi="#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif\n";var Xi="  gl_FragColor = linearToOutputTexel( gl_FragColor );\n";var Yi="\nvec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.xyz, vec3( gammaFactor ) ), value.w );\n}\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.xyz, vec3( 1.0 / gammaFactor ) ), value.w );\n}\nvec4 sRGBToLinear( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.w );\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.w );\n}\nvec4 RGBEToLinear( in vec4 value ) {\n\treturn vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\n}\nvec4 LinearToRGBE( in vec4 value ) {\n\tfloat maxComponent = max( max( value.r, value.g ), value.b );\n\tfloat fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\n\treturn vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\n}\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.xyz * value.w * maxRange, 1.0 );\n}\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.x, max( value.g, value.b ) );\n\tfloat M      = clamp( maxRGB / maxRange, 0.0, 1.0 );\n\tM            = ceil( M * 255.0 ) / 255.0;\n\treturn vec4( value.rgb / ( M * maxRange ), M );\n}\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\n}\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.x, max( value.g, value.b ) );\n\tfloat D      = max( maxRange / maxRGB, 1.0 );\n\tD            = min( floor( D ) / 255.0, 1.0 );\n\treturn vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\n}\nconst mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );\nvec4 LinearToLogLuv( in vec4 value )  {\n\tvec3 Xp_Y_XYZp = value.rgb * cLogLuvM;\n\tXp_Y_XYZp = max(Xp_Y_XYZp, vec3(1e-6, 1e-6, 1e-6));\n\tvec4 vResult;\n\tvResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;\n\tfloat Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;\n\tvResult.w = fract(Le);\n\tvResult.z = (Le - (floor(vResult.w*255.0))/255.0)/255.0;\n\treturn vResult;\n}\nconst mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );\nvec4 LogLuvToLinear( in vec4 value ) {\n\tfloat Le = value.z * 255.0 + value.w;\n\tvec3 Xp_Y_XYZp;\n\tXp_Y_XYZp.y = exp2((Le - 127.0) / 2.0);\n\tXp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;\n\tXp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;\n\tvec3 vRGB = Xp_Y_XYZp.rgb * cLogLuvInverseM;\n\treturn vec4( max(vRGB, 0.0), 1.0 );\n}\n";var qi="#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvec3 cameraToVertex = normalize( vWorldPosition - cameraPosition );\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\tvec2 sampleUV;\n\t\treflectVec = normalize( reflectVec );\n\t\tsampleUV.y = asin( clamp( reflectVec.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\t\tsampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\tvec4 envColor = texture2D( envMap, sampleUV );\n\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\treflectVec = normalize( reflectVec );\n\t\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0, 0.0, 1.0 ) );\n\t\tvec4 envColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5 );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\tenvColor = envMapTexelToLinear( envColor );\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif\n";var $i="#if defined( USE_ENVMAP ) || defined( PHYSICAL )\n\tuniform float reflectivity;\n\tuniform float envMapIntensity;\n#endif\n#ifdef USE_ENVMAP\n\t#if ! defined( PHYSICAL ) && ( defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) )\n\t\tvarying vec3 vWorldPosition;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\tuniform float flipEnvMap;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( PHYSICAL )\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif\n";var Zi="#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif\n";var Ji="#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif\n";var Qi="\n#ifdef USE_FOG\nfogDepth = -mvPosition.z;\n#endif";var Ki="#ifdef USE_FOG\n  varying float fogDepth;\n#endif\n";var er="#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = whiteCompliment( exp2( - fogDensity * fogDensity * fogDepth * fogDepth * LOG2 ) );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, fogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif\n";var tr="#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float fogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif\n";var ir="#ifdef TOON\n\tuniform sampler2D gradientMap;\n\tvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\t\tfloat dotNL = dot( normal, lightDirection );\n\t\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t\t#ifdef USE_GRADIENTMAP\n\t\t\treturn texture2D( gradientMap, coord ).rgb;\n\t\t#else\n\t\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\t\t#endif\n\t}\n#endif\n";var rr="#ifdef USE_LIGHTMAP\n\treflectedLight.indirectDiffuse += PI * texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n#endif\n";var nr="#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif";var ar="vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\n#if NUM_POINT_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_DIR_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvLightFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );\n\t\t#endif\n\t}\n#endif\n";var sr="uniform vec3 ambientLightColor;\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treturn irradiance;\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tdirectLight.color = directionalLight.color;\n\t\tdirectLight.direction = directionalLight.direction;\n\t\tdirectLight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t\tfloat shadowCameraNear;\n\t\tfloat shadowCameraFar;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tdirectLight.color = pointLight.color;\n\t\tdirectLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );\n\t\tdirectLight.visible = ( directLight.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight  ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tfloat angleCos = dot( directLight.direction, spotLight.direction );\n\t\tif ( angleCos > spotLight.coneCos ) {\n\t\t\tfloat spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\t\tdirectLight.color = spotLight.color;\n\t\t\tdirectLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tdirectLight.visible = true;\n\t\t} else {\n\t\t\tdirectLight.color = vec3( 0.0 );\n\t\t\tdirectLight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltcMat;\tuniform sampler2D ltcMag;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {\n\t\tfloat dotNL = dot( geometry.normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tirradiance *= PI;\n\t\t#endif\n\t\treturn irradiance;\n\t}\n#endif\n#if defined( USE_ENVMAP ) && defined( PHYSICAL )\n\tvec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {\n\t\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\tvec4 envMapColor = textureCubeUV( queryVec, 1.0 );\n\t\t#else\n\t\t\tvec4 envMapColor = vec4( 0.0 );\n\t\t#endif\n\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t}\n\tfloat getSpecularMIPLevel( const in float blinnShininessExponent, const in int maxMIPLevel ) {\n\t\tfloat maxMIPLevelScalar = float( maxMIPLevel );\n\t\tfloat desiredMIPLevel = maxMIPLevelScalar - 0.79248 - 0.5 * log2( pow2( blinnShininessExponent ) + 1.0 );\n\t\treturn clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );\n\t}\n\tvec3 getLightProbeIndirectRadiance( const in GeometricContext geometry, const in float blinnShininessExponent, const in int maxMIPLevel ) {\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( -geometry.viewDir, geometry.normal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( -geometry.viewDir, geometry.normal, refractionRatio );\n\t\t#endif\n\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\tfloat specularMIPLevel = getSpecularMIPLevel( blinnShininessExponent, maxMIPLevel );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\tvec4 envMapColor = textureCubeUV(queryReflectVec, BlinnExponentToGGXRoughness(blinnShininessExponent));\n\t\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\t\tvec2 sampleUV;\n\t\t\tsampleUV.y = asin( clamp( reflectVec.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\t\t\tsampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, sampleUV, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, sampleUV, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\t\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0,0.0,1.0 ) );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#endif\n\t\treturn envMapColor.rgb * envMapIntensity;\n\t}\n#endif\n";var or="BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;\n";var lr="varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\nstruct BlinnPhongMaterial {\n\tvec3\tdiffuseColor;\n\tvec3\tspecularColor;\n\tfloat\tspecularShininess;\n\tfloat\tspecularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\t#ifdef TOON\n\t\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\t#else\n\t\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\t\tvec3 irradiance = dotNL * directLight.color;\n\t#endif\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)\n";var ur="PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nmaterial.specularRoughness = clamp( roughnessFactor, 0.04, 1.0 );\n#ifdef STANDARD\n\tmaterial.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.clearCoat = saturate( clearCoat );\tmaterial.clearCoatRoughness = clamp( clearCoatRoughness, 0.04, 1.0 );\n#endif\n";var hr="struct PhysicalMaterial {\n\tvec3\tdiffuseColor;\n\tfloat\tspecularRoughness;\n\tvec3\tspecularColor;\n\t#ifndef STANDARD\n\t\tfloat clearCoat;\n\t\tfloat clearCoatRoughness;\n\t#endif\n};\n#define MAXIMUM_SPECULAR_COEFFICIENT 0.16\n#define DEFAULT_SPECULAR_COEFFICIENT 0.04\nfloat clearCoatDHRApprox( const in float roughness, const in float dotNL ) {\n\treturn DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.specularRoughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos - halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos + halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos + halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos - halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tfloat norm = texture2D( ltcMag, uv ).a;\n\t\tvec4 t = texture2D( ltcMat, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3(   1,   0, t.y ),\n\t\t\tvec3(   0, t.z,   0 ),\n\t\t\tvec3( t.w,   0, t.x )\n\t\t);\n\t\treflectedLight.directSpecular += lightColor * material.specularColor * norm * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\t#ifndef STANDARD\n\t\tfloat clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );\n\t#else\n\t\tfloat clearCoatDHR = 0.0;\n\t#endif\n\treflectedLight.directSpecular += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry, material.specularColor, material.specularRoughness );\n\treflectedLight.directDiffuse += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\t#ifndef STANDARD\n\t\treflectedLight.directSpecular += irradiance * material.clearCoat * BRDF_Specular_GGX( directLight, geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );\n\t#endif\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 clearCoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t#ifndef STANDARD\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\tfloat dotNL = dotNV;\n\t\tfloat clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );\n\t#else\n\t\tfloat clearCoatDHR = 0.0;\n\t#endif\n\treflectedLight.indirectSpecular += ( 1.0 - clearCoatDHR ) * radiance * BRDF_Specular_GGX_Environment( geometry, material.specularColor, material.specularRoughness );\n\t#ifndef STANDARD\n\t\treflectedLight.indirectSpecular += clearCoatRadiance * material.clearCoat * BRDF_Specular_GGX_Environment( geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );\n\t#endif\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\n#define Material_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.specularRoughness )\n#define Material_ClearCoat_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.clearCoatRoughness )\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}\n"
;var cr="\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = normalize( vViewPosition );\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointDirectLightIrradiance( pointLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( pointLight.shadow, directLight.visible ) ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotDirectLightIrradiance( spotLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( spotLight.shadow, directLight.visible ) ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( directionalLight.shadow, directLight.visible ) ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\t#ifdef USE_LIGHTMAP\n\t\tvec3 lightMapIrradiance = texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tlightMapIrradiance *= PI;\n\t\t#endif\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t}\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( PHYSICAL ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tirradiance += getLightProbeIndirectIrradiance( geometry, 8 );\n\t#endif\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tvec3 radiance = getLightProbeIndirectRadiance( geometry, Material_BlinnShininessExponent( material ), 8 );\n\t#ifndef STANDARD\n\t\tvec3 clearCoatRadiance = getLightProbeIndirectRadiance( geometry, Material_ClearCoat_BlinnShininessExponent( material ), 8 );\n\t#else\n\t\tvec3 clearCoatRadiance = vec3( 0.0 );\n\t#endif\n\tRE_IndirectSpecular( radiance, clearCoatRadiance, geometry, material, reflectedLight );\n#endif\n";var fr="#if defined(USE_LOGDEPTHBUF) && defined(USE_LOGDEPTHBUF_EXT)\n\tgl_FragDepthEXT = log2(vFragDepth) * logDepthBufFC * 0.5;\n#endif";var dr="#ifdef USE_LOGDEPTHBUF\n\tuniform float logDepthBufFC;\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t#endif\n#endif\n";var pr="#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t#endif\n\tuniform float logDepthBufFC;\n#endif";var mr="#ifdef USE_LOGDEPTHBUF\n\tgl_Position.z = log2(max( EPSILON, gl_Position.w + 1.0 )) * logDepthBufFC;\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t#else\n\t\tgl_Position.z = (gl_Position.z - 1.0) * gl_Position.w;\n\t#endif\n#endif\n";var vr="#ifdef USE_MAP\n\tvec4 texelColor = texture2D( map, vUv );\n\ttexelColor = mapTexelToLinear( texelColor );\n\tdiffuseColor *= texelColor;\n#endif\n";var gr="#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n";var yr="#ifdef USE_MAP\n\tvec4 mapTexel = texture2D( map, vec2( gl_PointCoord.x, 1.0 - gl_PointCoord.y ) * offsetRepeat.zw + offsetRepeat.xy );\n\tdiffuseColor *= mapTexelToLinear( mapTexel );\n#endif\n";var _r="#ifdef USE_MAP\n\tuniform vec4 offsetRepeat;\n\tuniform sampler2D map;\n#endif\n";var br="float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif\n";var xr="#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif";var wr="#ifdef USE_MORPHNORMALS\n\tobjectNormal += ( morphNormal0 - normal ) * morphTargetInfluences[ 0 ];\n\tobjectNormal += ( morphNormal1 - normal ) * morphTargetInfluences[ 1 ];\n\tobjectNormal += ( morphNormal2 - normal ) * morphTargetInfluences[ 2 ];\n\tobjectNormal += ( morphNormal3 - normal ) * morphTargetInfluences[ 3 ];\n#endif\n";var Tr="#ifdef USE_MORPHTARGETS\n\t#ifndef USE_MORPHNORMALS\n\tuniform float morphTargetInfluences[ 8 ];\n\t#else\n\tuniform float morphTargetInfluences[ 4 ];\n\t#endif\n#endif";var Mr="#ifdef USE_MORPHTARGETS\n\ttransformed += ( morphTarget0 - position ) * morphTargetInfluences[ 0 ];\n\ttransformed += ( morphTarget1 - position ) * morphTargetInfluences[ 1 ];\n\ttransformed += ( morphTarget2 - position ) * morphTargetInfluences[ 2 ];\n\ttransformed += ( morphTarget3 - position ) * morphTargetInfluences[ 3 ];\n\t#ifndef USE_MORPHNORMALS\n\ttransformed += ( morphTarget4 - position ) * morphTargetInfluences[ 4 ];\n\ttransformed += ( morphTarget5 - position ) * morphTargetInfluences[ 5 ];\n\ttransformed += ( morphTarget6 - position ) * morphTargetInfluences[ 6 ];\n\ttransformed += ( morphTarget7 - position ) * morphTargetInfluences[ 7 ];\n\t#endif\n#endif\n";var Er="#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t#endif\n#endif\n#ifdef USE_NORMALMAP\n\tnormal = perturbNormal2Arb( -vViewPosition, normal );\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\n#endif\n";var Sr="#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm ) {\n\t\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\n\t\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tvec3 S = normalize( q0 * st1.t - q1 * st0.t );\n\t\tvec3 T = normalize( -q0 * st1.s + q1 * st0.s );\n\t\tvec3 N = normalize( surf_norm );\n\t\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t\tmapN.xy = normalScale * mapN.xy;\n\t\tmat3 tsn = mat3( S, T, N );\n\t\treturn normalize( tsn * mapN );\n\t}\n#endif\n";var Ar="vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 1.0 - 2.0 * rgb.xyz;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256.,  256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn (( near + viewZ ) * far ) / (( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}\n";var Pr="#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif\n";var Rr="vec4 mvPosition = modelViewMatrix * vec4( transformed, 1.0 );\ngl_Position = projectionMatrix * mvPosition;\n";var Lr="#if defined( DITHERING )\n  gl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif\n";var Cr="#if defined( DITHERING )\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif\n";var Or="float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif\n";var Ir="#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif";var Dr="#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHTS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHTS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHTS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tfloat texture2DShadowLerp( sampler2D depths, vec2 size, vec2 uv, float compare ) {\n\t\tconst vec2 offset = vec2( 0.0, 1.0 );\n\t\tvec2 texelSize = vec2( 1.0 ) / size;\n\t\tvec2 centroidUV = floor( uv * size + 0.5 ) / size;\n\t\tfloat lb = texture2DCompare( depths, centroidUV + texelSize * offset.xx, compare );\n\t\tfloat lt = texture2DCompare( depths, centroidUV + texelSize * offset.xy, compare );\n\t\tfloat rb = texture2DCompare( depths, centroidUV + texelSize * offset.yx, compare );\n\t\tfloat rt = texture2DCompare( depths, centroidUV + texelSize * offset.yy, compare );\n\t\tvec2 f = fract( uv * size + 0.5 );\n\t\tfloat a = mix( lb, lt, f.y );\n\t\tfloat b = mix( rb, rt, f.y );\n\t\tfloat c = mix( a, b, f.x );\n\t\treturn c;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tshadow = (\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif\n";var kr="#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHTS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHTS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHTS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\n\t#endif\n#endif\n";var Ur="#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n#endif\n";var Fr="float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\tDirectionalLight directionalLight;\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tshadow *= bool( directionalLight.shadow ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\tSpotLight spotLight;\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tshadow *= bool( spotLight.shadow ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\tPointLight pointLight;\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tshadow *= bool( pointLight.shadow ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#endif\n\t#endif\n\treturn shadow;\n}\n";var Nr="#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif";var Br="#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\t#ifdef BONE_TEXTURE\n\t\tuniform sampler2D boneTexture;\n\t\tuniform int boneTextureSize;\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\t\ty = dy * ( y + 0.5 );\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\t\treturn bone;\n\t\t}\n\t#else\n\t\tuniform mat4 boneMatrices[ MAX_BONES ];\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tmat4 bone = boneMatrices[ int(i) ];\n\t\t\treturn bone;\n\t\t}\n\t#endif\n#endif\n";var zr="#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif\n";var jr="#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix  = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n#endif\n";var Gr="float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif";var Hr="#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif";var Vr="#if defined( TONE_MAPPING )\n  gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif\n";var Wr="#define saturate(a) clamp( a, 0.0, 1.0 )\nuniform float toneMappingExposure;\nuniform float toneMappingWhitePoint;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\n#define Uncharted2Helper( x ) max( ( ( x * ( 0.15 * x + 0.10 * 0.50 ) + 0.20 * 0.02 ) / ( x * ( 0.15 * x + 0.50 ) + 0.20 * 0.30 ) ) - 0.02 / 0.30, vec3( 0.0 ) )\nvec3 Uncharted2ToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( Uncharted2Helper( color ) / Uncharted2Helper( vec3( toneMappingWhitePoint ) ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\n";var Xr="#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvarying vec2 vUv;\n#endif";var Yr="#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvarying vec2 vUv;\n\tuniform vec4 offsetRepeat;\n#endif\n";var qr="#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvUv = uv * offsetRepeat.zw + offsetRepeat.xy;\n#endif";var $r="#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif";var Zr="#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n#endif";var Jr="#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = uv2;\n#endif";var Qr="#if defined( USE_ENVMAP ) || defined( PHONG ) || defined( PHYSICAL ) || defined( LAMBERT ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP )\n\tvec4 worldPosition = modelMatrix * vec4( transformed, 1.0 );\n#endif\n";var Kr="uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldPosition;\nvoid main() {\n\tgl_FragColor = textureCube( tCube, vec3( tFlip * vWorldPosition.x, vWorldPosition.yz ) );\n\tgl_FragColor.a *= opacity;\n}\n";var en="varying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tvWorldPosition = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}\n";var tn="#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( gl_FragCoord.z ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( gl_FragCoord.z );\n\t#endif\n}\n";var rn="#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n}\n";var nn="#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}\n";var an="#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}\n";var sn="uniform sampler2D tEquirect;\nvarying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldPosition );\n\tvec2 sampleUV;\n\tsampleUV.y = asin( clamp( direction.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\tsampleUV.x = atan( direction.z, direction.x ) * RECIPROCAL_PI2 + 0.5;\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n}\n";var on="varying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tvWorldPosition = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}\n";var ln="uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n";var un="uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\tvLineDistance = scale * lineDistance;\n\tvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}\n";var hn="uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\treflectedLight.indirectDiffuse += texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n";var cn="#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_ENVMAP\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}\n"
;var fn="uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <bsdfs>\n#include <lights_pars>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\treflectedLight.indirectDiffuse = getAmbientLightIrradiance( ambientLightColor );\n\t#include <lightmap_fragment>\n\treflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}\n";var dn="#define LAMBERT\nvarying vec3 vLightFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n";var pn="#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_template>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}\n";var mn="#define PHONG\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n";var vn="#define PHYSICAL\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifndef STANDARD\n\tuniform float clearCoat;\n\tuniform float clearCoatRoughness;\n#endif\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <lights_pars>\n#include <lights_physical_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_template>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}\n";var gn="#define PHYSICAL\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n";var yn="#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\nvoid main() {\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n}\n";var _n="#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}\n";var bn="uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n";var xn="uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#ifdef USE_SIZEATTENUATION\n\t\tgl_PointSize = size * ( scale / - mvPosition.z );\n\t#else\n\t\tgl_PointSize = size;\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n";var wn="uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <bsdfs>\n#include <lights_pars>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n}\n";var Tn="#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n}\n";var Mn={alphamap_fragment:wi,alphamap_pars_fragment:Ti,alphatest_fragment:Mi,aomap_fragment:Ei,aomap_pars_fragment:Si,begin_vertex:Ai,beginnormal_vertex:Pi,bsdfs:Ri,bumpmap_pars_fragment:Li,clipping_planes_fragment:Ci,clipping_planes_pars_fragment:Oi,clipping_planes_pars_vertex:Ii,clipping_planes_vertex:Di,color_fragment:ki,color_pars_fragment:Ui,color_pars_vertex:Fi,color_vertex:Ni,common:Bi,cube_uv_reflection_fragment:zi,defaultnormal_vertex:ji,displacementmap_pars_vertex:Gi,displacementmap_vertex:Hi,emissivemap_fragment:Vi,emissivemap_pars_fragment:Wi,encodings_fragment:Xi,encodings_pars_fragment:Yi,envmap_fragment:qi,envmap_pars_fragment:$i,envmap_pars_vertex:Zi,envmap_vertex:Ji,fog_vertex:Qi,fog_pars_vertex:Ki,fog_fragment:er,fog_pars_fragment:tr,gradientmap_pars_fragment:ir,lightmap_fragment:rr,lightmap_pars_fragment:nr,lights_lambert_vertex:ar,lights_pars:sr,lights_phong_fragment:or,lights_phong_pars_fragment:lr,lights_physical_fragment:ur,lights_physical_pars_fragment:hr,lights_template:cr,logdepthbuf_fragment:fr,logdepthbuf_pars_fragment:dr,logdepthbuf_pars_vertex:pr,logdepthbuf_vertex:mr,map_fragment:vr,map_pars_fragment:gr,map_particle_fragment:yr,map_particle_pars_fragment:_r,metalnessmap_fragment:br,metalnessmap_pars_fragment:xr,morphnormal_vertex:wr,morphtarget_pars_vertex:Tr,morphtarget_vertex:Mr,normal_fragment:Er,normalmap_pars_fragment:Sr,packing:Ar,premultiplied_alpha_fragment:Pr,project_vertex:Rr,dithering_fragment:Lr,dithering_pars_fragment:Cr,roughnessmap_fragment:Or,roughnessmap_pars_fragment:Ir,shadowmap_pars_fragment:Dr,shadowmap_pars_vertex:kr,shadowmap_vertex:Ur,shadowmask_pars_fragment:Fr,skinbase_vertex:Nr,skinning_pars_vertex:Br,skinning_vertex:zr,skinnormal_vertex:jr,specularmap_fragment:Gr,specularmap_pars_fragment:Hr,tonemapping_fragment:Vr,tonemapping_pars_fragment:Wr,uv_pars_fragment:Xr,uv_pars_vertex:Yr,uv_vertex:qr,uv2_pars_fragment:$r,uv2_pars_vertex:Zr,uv2_vertex:Jr,worldpos_vertex:Qr,cube_frag:Kr,cube_vert:en,depth_frag:tn,depth_vert:rn,distanceRGBA_frag:nn,distanceRGBA_vert:an,equirect_frag:sn,equirect_vert:on,linedashed_frag:ln,linedashed_vert:un,meshbasic_frag:hn,meshbasic_vert:cn,meshlambert_frag:fn,meshlambert_vert:dn,meshphong_frag:pn,meshphong_vert:mn,meshphysical_frag:vn,meshphysical_vert:gn,normal_frag:yn,normal_vert:_n,points_frag:bn,points_vert:xn,shadow_frag:wn,shadow_vert:Tn};var En={basic:{uniforms:xi.merge([bi.common,bi.specularmap,bi.envmap,bi.aomap,bi.lightmap,bi.fog]),vertexShader:Mn.meshbasic_vert,fragmentShader:Mn.meshbasic_frag},lambert:{uniforms:xi.merge([bi.common,bi.specularmap,bi.envmap,bi.aomap,bi.lightmap,bi.emissivemap,bi.fog,bi.lights,{emissive:{value:new _i(0)}}]),vertexShader:Mn.meshlambert_vert,fragmentShader:Mn.meshlambert_frag},phong:{uniforms:xi.merge([bi.common,bi.specularmap,bi.envmap,bi.aomap,bi.lightmap,bi.emissivemap,bi.bumpmap,bi.normalmap,bi.displacementmap,bi.gradientmap,bi.fog,bi.lights,{emissive:{value:new _i(0)},specular:{value:new _i(1118481)},shininess:{value:30}}]),vertexShader:Mn.meshphong_vert,fragmentShader:Mn.meshphong_frag},standard:{uniforms:xi.merge([bi.common,bi.envmap,bi.aomap,bi.lightmap,bi.emissivemap,bi.bumpmap,bi.normalmap,bi.displacementmap,bi.roughnessmap,bi.metalnessmap,bi.fog,bi.lights,{emissive:{value:new _i(0)},roughness:{value:.5},metalness:{value:.5},envMapIntensity:{value:1}}]),vertexShader:Mn.meshphysical_vert,fragmentShader:Mn.meshphysical_frag},points:{uniforms:xi.merge([bi.points,bi.fog]),vertexShader:Mn.points_vert,fragmentShader:Mn.points_frag},dashed:{uniforms:xi.merge([bi.common,bi.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Mn.linedashed_vert,fragmentShader:Mn.linedashed_frag},depth:{uniforms:xi.merge([bi.common,bi.displacementmap]),vertexShader:Mn.depth_vert,fragmentShader:Mn.depth_frag},normal:{uniforms:xi.merge([bi.common,bi.bumpmap,bi.normalmap,bi.displacementmap,{opacity:{value:1}}]),vertexShader:Mn.normal_vert,fragmentShader:Mn.normal_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:Mn.cube_vert,fragmentShader:Mn.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Mn.equirect_vert,fragmentShader:Mn.equirect_frag},distanceRGBA:{uniforms:xi.merge([bi.common,bi.displacementmap,{referencePosition:{value:new At},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Mn.distanceRGBA_vert,fragmentShader:Mn.distanceRGBA_frag},shadow:{uniforms:xi.merge([bi.lights,{color:{value:new _i(0)},opacity:{value:1}}]),vertexShader:Mn.shadow_vert,fragmentShader:Mn.shadow_frag}};En.physical={uniforms:xi.merge([En.standard.uniforms,{clearCoat:{value:0},clearCoatRoughness:{value:0}}]),vertexShader:Mn.meshphysical_vert,fragmentShader:Mn.meshphysical_frag};function Sn(e,t){this.min=e!==undefined?e:new bt(+Infinity,+Infinity);this.max=t!==undefined?t:new bt(-Infinity,-Infinity)}Object.assign(Sn.prototype,{set:function(e,t){this.min.copy(e);this.max.copy(t);return this},setFromPoints:function(e){this.makeEmpty();for(var t=0,i=e.length;t<i;t++){this.expandByPoint(e[t])}return this},setFromCenterAndSize:function(){var e=new bt;return function t(i,r){var n=e.copy(r).multiplyScalar(.5);this.min.copy(i).sub(n);this.max.copy(i).add(n);return this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(e){this.min.copy(e.min);this.max.copy(e.max);return this},makeEmpty:function(){this.min.x=this.min.y=+Infinity;this.max.x=this.max.y=-Infinity;return this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y},getCenter:function(e){var t=e||new bt;return this.isEmpty()?t.set(0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(e){var t=e||new bt;return this.isEmpty()?t.set(0,0):t.subVectors(this.max,this.min)},expandByPoint:function(e){this.min.min(e);this.max.max(e);return this},expandByVector:function(e){this.min.sub(e);this.max.add(e);return this},expandByScalar:function(e){this.min.addScalar(-e);this.max.addScalar(e);return this},containsPoint:function(e){return e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y?false:true},containsBox:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y},getParameter:function(e,t){var i=t||new bt;return i.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))},intersectsBox:function(e){return e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y?false:true},clampPoint:function(e,t){var i=t||new bt;return i.copy(e).clamp(this.min,this.max)},distanceToPoint:function(){var e=new bt;return function t(i){var r=e.copy(i).clamp(this.min,this.max);return r.sub(i).length()}}(),intersect:function(e){this.min.max(e.min);this.max.min(e.max);return this},union:function(e){this.min.min(e.min);this.max.max(e.max);return this},translate:function(e){this.min.add(e);this.max.add(e);return this},equals:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)}});function An(e,t,i,r,n){var a,s;var o,l,u,h;var c,f;function d(){var e=new Float32Array([-1,-1,0,0,1,-1,1,0,1,1,1,1,-1,1,0,1]);var r=new Uint16Array([0,1,2,0,2,3]);a=t.createBuffer();s=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,a);t.bufferData(t.ARRAY_BUFFER,e,t.STATIC_DRAW);t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,s);t.bufferData(t.ELEMENT_ARRAY_BUFFER,r,t.STATIC_DRAW);c=t.createTexture();f=t.createTexture();i.bindTexture(t.TEXTURE_2D,c);t.texImage2D(t.TEXTURE_2D,0,t.RGB,16,16,0,t.RGB,t.UNSIGNED_BYTE,null);t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE);t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE);t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST);t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST);i.bindTexture(t.TEXTURE_2D,f);t.texImage2D(t.TEXTURE_2D,0,t.RGBA,16,16,0,t.RGBA,t.UNSIGNED_BYTE,null);t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE);t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE);t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST);t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST);o={vertexShader:["uniform lowp int renderType;","uniform vec3 screenPosition;","uniform vec2 scale;","uniform float rotation;","uniform sampler2D occlusionMap;","attribute vec2 position;","attribute vec2 uv;","varying vec2 vUV;","varying float vVisibility;","void main() {","vUV = uv;","vec2 pos = position;","if ( renderType == 2 ) {","vec4 visibility = texture2D( occlusionMap, vec2( 0.1, 0.1 ) );","visibility += texture2D( occlusionMap, vec2( 0.5, 0.1 ) );","visibility += texture2D( occlusionMap, vec2( 0.9, 0.1 ) );","visibility += texture2D( occlusionMap, vec2( 0.9, 0.5 ) );","visibility += texture2D( occlusionMap, vec2( 0.9, 0.9 ) );","visibility += texture2D( occlusionMap, vec2( 0.5, 0.9 ) );","visibility += texture2D( occlusionMap, vec2( 0.1, 0.9 ) );","visibility += texture2D( occlusionMap, vec2( 0.1, 0.5 ) );","visibility += texture2D( occlusionMap, vec2( 0.5, 0.5 ) );","vVisibility =        visibility.r / 9.0;","vVisibility *= 1.0 - visibility.g / 9.0;","vVisibility *=       visibility.b / 9.0;","vVisibility *= 1.0 - visibility.a / 9.0;","pos.x = cos( rotation ) * position.x - sin( rotation ) * position.y;","pos.y = sin( rotation ) * position.x + cos( rotation ) * position.y;","}","gl_Position = vec4( ( pos * scale + screenPosition.xy ).xy, screenPosition.z, 1.0 );","}"].join("\n"),fragmentShader:["uniform lowp int renderType;","uniform sampler2D map;","uniform float opacity;","uniform vec3 color;","varying vec2 vUV;","varying float vVisibility;","void main() {","if ( renderType == 0 ) {","gl_FragColor = vec4( 1.0, 0.0, 1.0, 0.0 );","} else if ( renderType == 1 ) {","gl_FragColor = texture2D( map, vUV );","} else {","vec4 texture = texture2D( map, vUV );","texture.a *= opacity * vVisibility;","gl_FragColor = texture;","gl_FragColor.rgb *= color;","}","}"].join("\n")};l=p(o);u={vertex:t.getAttribLocation(l,"position"),uv:t.getAttribLocation(l,"uv")};h={renderType:t.getUniformLocation(l,"renderType"),map:t.getUniformLocation(l,"map"),occlusionMap:t.getUniformLocation(l,"occlusionMap"),opacity:t.getUniformLocation(l,"opacity"),color:t.getUniformLocation(l,"color"),scale:t.getUniformLocation(l,"scale"),rotation:t.getUniformLocation(l,"rotation"),screenPosition:t.getUniformLocation(l,"screenPosition")}}this.render=function(e,n,o,p){if(e.length===0)return;var m=new At;var v=p.w/p.z,g=p.z*.5,y=p.w*.5;var _=16/p.w,b=new bt(_*v,_);var x=new At(1,1,0),w=new bt(1,1);var T=new Sn;T.min.set(p.x,p.y);T.max.set(p.x+(p.z-16),p.y+(p.w-16));if(l===undefined){d()}i.useProgram(l);i.initAttributes();i.enableAttribute(u.vertex);i.enableAttribute(u.uv);i.disableUnusedAttributes();t.uniform1i(h.occlusionMap,0);t.uniform1i(h.map,1);t.bindBuffer(t.ARRAY_BUFFER,a);t.vertexAttribPointer(u.vertex,2,t.FLOAT,false,2*8,0);t.vertexAttribPointer(u.uv,2,t.FLOAT,false,2*8,8);t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,s);i.disable(t.CULL_FACE);i.buffers.depth.setMask(false);for(var M=0,E=e.length;M<E;M++){_=16/p.w;b.set(_*v,_);var S=e[M];m.set(S.matrixWorld.elements[12],S.matrixWorld.elements[13],S.matrixWorld.elements[14]);m.applyMatrix4(o.matrixWorldInverse);m.applyMatrix4(o.projectionMatrix);x.copy(m);w.x=p.x+x.x*g+g-8;w.y=p.y+x.y*y+y-8;if(T.containsPoint(w)===true){i.activeTexture(t.TEXTURE0);i.bindTexture(t.TEXTURE_2D,null);i.activeTexture(t.TEXTURE1);i.bindTexture(t.TEXTURE_2D,c);t.copyTexImage2D(t.TEXTURE_2D,0,t.RGB,w.x,w.y,16,16,0);t.uniform1i(h.renderType,0);t.uniform2f(h.scale,b.x,b.y);t.uniform3f(h.screenPosition,x.x,x.y,x.z);i.disable(t.BLEND);i.enable(t.DEPTH_TEST);t.drawElements(t.TRIANGLES,6,t.UNSIGNED_SHORT,0);i.activeTexture(t.TEXTURE0);i.bindTexture(t.TEXTURE_2D,f);t.copyTexImage2D(t.TEXTURE_2D,0,t.RGBA,w.x,w.y,16,16,0);t.uniform1i(h.renderType,1);i.disable(t.DEPTH_TEST);i.activeTexture(t.TEXTURE1);i.bindTexture(t.TEXTURE_2D,c);t.drawElements(t.TRIANGLES,6,t.UNSIGNED_SHORT,0);S.positionScreen.copy(x);if(S.customUpdateCallback){S.customUpdateCallback(S)}else{S.updateLensFlares()}t.uniform1i(h.renderType,2);i.enable(t.BLEND);for(var A=0,P=S.lensFlares.length;A<P;A++){var R=S.lensFlares[A];if(R.opacity>.001&&R.scale>.001){x.x=R.x;x.y=R.y;x.z=R.z;_=R.size*R.scale/p.w;b.x=_*v;b.y=_;t.uniform3f(h.screenPosition,x.x,x.y,x.z);t.uniform2f(h.scale,b.x,b.y);t.uniform1f(h.rotation,R.rotation);t.uniform1f(h.opacity,R.opacity);t.uniform3f(h.color,R.color.r,R.color.g,R.color.b);i.setBlending(R.blending,R.blendEquation,R.blendSrc,R.blendDst);r.setTexture2D(R.texture,1);t.drawElements(t.TRIANGLES,6,t.UNSIGNED_SHORT,0)}}}}i.enable(t.CULL_FACE);i.enable(t.DEPTH_TEST);i.buffers.depth.setMask(true);i.reset()};function p(e){var i=t.createProgram();var r=t.createShader(t.FRAGMENT_SHADER);var a=t.createShader(t.VERTEX_SHADER);var s="precision "+n.precision+" float;\n";t.shaderSource(r,s+e.fragmentShader);t.shaderSource(a,s+e.vertexShader);t.compileShader(r);t.compileShader(a);t.attachShader(i,r);t.attachShader(i,a);t.linkProgram(i);return i}}function Pn(e,t,i,r,n,a,s,o,l){wt.call(this,e,t,i,r,n,a,s,o,l);this.needsUpdate=true}Pn.prototype=Object.create(wt.prototype);Pn.prototype.constructor=Pn;function Rn(e,t,i,r,n){var a,s;var o,l,u;var h;var c=new At;var f=new St;var d=new At;function p(){var e=new Float32Array([-.5,-.5,0,0,.5,-.5,1,0,.5,.5,1,1,-.5,.5,0,1]);var i=new Uint16Array([0,1,2,0,2,3]);a=t.createBuffer();s=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,a);t.bufferData(t.ARRAY_BUFFER,e,t.STATIC_DRAW);t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,s);t.bufferData(t.ELEMENT_ARRAY_BUFFER,i,t.STATIC_DRAW);o=m();l={position:t.getAttribLocation(o,"position"),uv:t.getAttribLocation(o,"uv")};u={uvOffset:t.getUniformLocation(o,"uvOffset"),uvScale:t.getUniformLocation(o,"uvScale"),rotation:t.getUniformLocation(o,"rotation"),scale:t.getUniformLocation(o,"scale"),color:t.getUniformLocation(o,"color"),map:t.getUniformLocation(o,"map"),opacity:t.getUniformLocation(o,"opacity"),modelViewMatrix:t.getUniformLocation(o,"modelViewMatrix"),projectionMatrix:t.getUniformLocation(o,"projectionMatrix"),fogType:t.getUniformLocation(o,"fogType"),fogDensity:t.getUniformLocation(o,"fogDensity"),fogNear:t.getUniformLocation(o,"fogNear"),fogFar:t.getUniformLocation(o,"fogFar"),fogColor:t.getUniformLocation(o,"fogColor"),alphaTest:t.getUniformLocation(o,"alphaTest")};var r=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");r.width=8;r.height=8;var n=r.getContext("2d");n.fillStyle="white";n.fillRect(0,0,8,8);h=new Pn(r)}this.render=function(n,m,g){if(n.length===0)return;if(o===undefined){p()}i.useProgram(o);i.initAttributes();i.enableAttribute(l.position);i.enableAttribute(l.uv);i.disableUnusedAttributes();i.disable(t.CULL_FACE);i.enable(t.BLEND);t.bindBuffer(t.ARRAY_BUFFER,a);t.vertexAttribPointer(l.position,2,t.FLOAT,false,2*8,0);t.vertexAttribPointer(l.uv,2,t.FLOAT,false,2*8,8);t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,s);t.uniformMatrix4fv(u.projectionMatrix,false,g.projectionMatrix.elements);i.activeTexture(t.TEXTURE0);t.uniform1i(u.map,0);var y=0;var _=0;var b=m.fog;if(b){t.uniform3f(u.fogColor,b.color.r,b.color.g,b.color.b);if(b.isFog){t.uniform1f(u.fogNear,b.near);t.uniform1f(u.fogFar,b.far);t.uniform1i(u.fogType,1);y=1;_=1}else if(b.isFogExp2){t.uniform1f(u.fogDensity,b.density);t.uniform1i(u.fogType,2);y=2;_=2}}else{t.uniform1i(u.fogType,0);y=0;_=0}for(var x=0,w=n.length;x<w;x++){var T=n[x];T.modelViewMatrix.multiplyMatrices(g.matrixWorldInverse,T.matrixWorld);T.z=-T.modelViewMatrix.elements[14]}n.sort(v);var M=[];for(var x=0,w=n.length;x<w;x++){var T=n[x];var E=T.material;if(E.visible===false)continue;T.onBeforeRender(e,m,g,undefined,E,undefined);t.uniform1f(u.alphaTest,E.alphaTest);t.uniformMatrix4fv(u.modelViewMatrix,false,T.modelViewMatrix.elements);T.matrixWorld.decompose(c,f,d);M[0]=d.x;M[1]=d.y;var S=0;if(m.fog&&E.fog){S=_}if(y!==S){t.uniform1i(u.fogType,S);y=S}if(E.map!==null){t.uniform2f(u.uvOffset,E.map.offset.x,E.map.offset.y);t.uniform2f(u.uvScale,E.map.repeat.x,E.map.repeat.y)}else{t.uniform2f(u.uvOffset,0,0);t.uniform2f(u.uvScale,1,1)}t.uniform1f(u.opacity,E.opacity);t.uniform3f(u.color,E.color.r,E.color.g,E.color.b);t.uniform1f(u.rotation,E.rotation);t.uniform2fv(u.scale,M);i.setBlending(E.blending,E.blendEquation,E.blendSrc,E.blendDst,E.blendEquationAlpha,E.blendSrcAlpha,E.blendDstAlpha,E.premultipliedAlpha);i.buffers.depth.setTest(E.depthTest);i.buffers.depth.setMask(E.depthWrite);r.setTexture2D(E.map||h,0);t.drawElements(t.TRIANGLES,6,t.UNSIGNED_SHORT,0);T.onAfterRender(e,m,g,undefined,E,undefined)}i.enable(t.CULL_FACE);i.reset()};function m(){var e=t.createProgram();var i=t.createShader(t.VERTEX_SHADER);var r=t.createShader(t.FRAGMENT_SHADER);t.shaderSource(i,["precision "+n.precision+" float;","#define SHADER_NAME "+"SpriteMaterial","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform float rotation;","uniform vec2 scale;","uniform vec2 uvOffset;","uniform vec2 uvScale;","attribute vec2 position;","attribute vec2 uv;","varying vec2 vUV;","void main() {","vUV = uvOffset + uv * uvScale;","vec2 alignedPosition = position * scale;","vec2 rotatedPosition;","rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;","rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;","vec4 finalPosition;","finalPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );","finalPosition.xy += rotatedPosition;","finalPosition = projectionMatrix * finalPosition;","gl_Position = finalPosition;","}"].join("\n"));t.shaderSource(r,["precision "+n.precision+" float;","#define SHADER_NAME "+"SpriteMaterial","uniform vec3 color;","uniform sampler2D map;","uniform float opacity;","uniform int fogType;","uniform vec3 fogColor;","uniform float fogDensity;","uniform float fogNear;","uniform float fogFar;","uniform float alphaTest;","varying vec2 vUV;","void main() {","vec4 texture = texture2D( map, vUV );","if ( texture.a < alphaTest ) discard;","gl_FragColor = vec4( color * texture.xyz, texture.a * opacity );","if ( fogType > 0 ) {","float depth = gl_FragCoord.z / gl_FragCoord.w;","float fogFactor = 0.0;","if ( fogType == 1 ) {","fogFactor = smoothstep( fogNear, fogFar, depth );","} else {","const float LOG2 = 1.442695;","fogFactor = exp2( - fogDensity * fogDensity * depth * depth * LOG2 );","fogFactor = 1.0 - clamp( fogFactor, 0.0, 1.0 );","}","gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );","}","}"].join("\n"));t.compileShader(i);t.compileShader(r);t.attachShader(e,i);t.attachShader(e,r);t.linkProgram(e);return e}function v(e,t){if(e.renderOrder!==t.renderOrder){return e.renderOrder-t.renderOrder}else if(e.z!==t.z){return t.z-e.z}else{return t.id-e.id}}}var Ln=0;function Cn(){Object.defineProperty(this,"id",{value:Ln++});this.uuid=_t.generateUUID();this.name="";this.type="Material";this.fog=true;this.lights=true;this.blending=w;this.side=d;this.flatShading=false
;this.vertexColors=y;this.opacity=1;this.transparent=false;this.blendSrc=U;this.blendDst=F;this.blendEquation=A;this.blendSrcAlpha=null;this.blendDstAlpha=null;this.blendEquationAlpha=null;this.depthFunc=X;this.depthTest=true;this.depthWrite=true;this.clippingPlanes=null;this.clipIntersection=false;this.clipShadows=false;this.colorWrite=true;this.precision=null;this.polygonOffset=false;this.polygonOffsetFactor=0;this.polygonOffsetUnits=0;this.dithering=false;this.alphaTest=0;this.premultipliedAlpha=false;this.overdraw=0;this.visible=true;this.userData={};this.needsUpdate=true}Object.assign(Cn.prototype,t.prototype,{isMaterial:true,onBeforeCompile:function(){},setValues:function(e){if(e===undefined)return;for(var t in e){var i=e[t];if(i===undefined){console.warn("THREE.Material: '"+t+"' parameter is undefined.");continue}if(t==="shading"){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.");this.flatShading=i===v?true:false;continue}var r=this[t];if(r===undefined){console.warn("THREE."+this.type+": '"+t+"' is not a property of this material.");continue}if(r&&r.isColor){r.set(i)}else if(r&&r.isVector3&&(i&&i.isVector3)){r.copy(i)}else if(t==="overdraw"){this[t]=Number(i)}else{this[t]=i}}},toJSON:function(e){var t=e===undefined;if(t){e={textures:{},images:{}}}var i={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};i.uuid=this.uuid;i.type=this.type;if(this.name!=="")i.name=this.name;if(this.color&&this.color.isColor)i.color=this.color.getHex();if(this.roughness!==undefined)i.roughness=this.roughness;if(this.metalness!==undefined)i.metalness=this.metalness;if(this.emissive&&this.emissive.isColor)i.emissive=this.emissive.getHex();if(this.specular&&this.specular.isColor)i.specular=this.specular.getHex();if(this.shininess!==undefined)i.shininess=this.shininess;if(this.clearCoat!==undefined)i.clearCoat=this.clearCoat;if(this.clearCoatRoughness!==undefined)i.clearCoatRoughness=this.clearCoatRoughness;if(this.map&&this.map.isTexture)i.map=this.map.toJSON(e).uuid;if(this.alphaMap&&this.alphaMap.isTexture)i.alphaMap=this.alphaMap.toJSON(e).uuid;if(this.lightMap&&this.lightMap.isTexture)i.lightMap=this.lightMap.toJSON(e).uuid;if(this.bumpMap&&this.bumpMap.isTexture){i.bumpMap=this.bumpMap.toJSON(e).uuid;i.bumpScale=this.bumpScale}if(this.normalMap&&this.normalMap.isTexture){i.normalMap=this.normalMap.toJSON(e).uuid;i.normalScale=this.normalScale.toArray()}if(this.displacementMap&&this.displacementMap.isTexture){i.displacementMap=this.displacementMap.toJSON(e).uuid;i.displacementScale=this.displacementScale;i.displacementBias=this.displacementBias}if(this.roughnessMap&&this.roughnessMap.isTexture)i.roughnessMap=this.roughnessMap.toJSON(e).uuid;if(this.metalnessMap&&this.metalnessMap.isTexture)i.metalnessMap=this.metalnessMap.toJSON(e).uuid;if(this.emissiveMap&&this.emissiveMap.isTexture)i.emissiveMap=this.emissiveMap.toJSON(e).uuid;if(this.specularMap&&this.specularMap.isTexture)i.specularMap=this.specularMap.toJSON(e).uuid;if(this.envMap&&this.envMap.isTexture){i.envMap=this.envMap.toJSON(e).uuid;i.reflectivity=this.reflectivity}if(this.gradientMap&&this.gradientMap.isTexture){i.gradientMap=this.gradientMap.toJSON(e).uuid}if(this.size!==undefined)i.size=this.size;if(this.sizeAttenuation!==undefined)i.sizeAttenuation=this.sizeAttenuation;if(this.blending!==w)i.blending=this.blending;if(this.flatShading===true)i.flatShading=this.flatShading;if(this.side!==d)i.side=this.side;if(this.vertexColors!==y)i.vertexColors=this.vertexColors;if(this.opacity<1)i.opacity=this.opacity;if(this.transparent===true)i.transparent=this.transparent;i.depthFunc=this.depthFunc;i.depthTest=this.depthTest;i.depthWrite=this.depthWrite;if(this.dithering===true)i.dithering=true;if(this.alphaTest>0)i.alphaTest=this.alphaTest;if(this.premultipliedAlpha===true)i.premultipliedAlpha=this.premultipliedAlpha;if(this.wireframe===true)i.wireframe=this.wireframe;if(this.wireframeLinewidth>1)i.wireframeLinewidth=this.wireframeLinewidth;if(this.wireframeLinecap!=="round")i.wireframeLinecap=this.wireframeLinecap;if(this.wireframeLinejoin!=="round")i.wireframeLinejoin=this.wireframeLinejoin;if(this.morphTargets===true)i.morphTargets=true;if(this.skinning===true)i.skinning=true;if(this.visible===false)i.visible=false;if(JSON.stringify(this.userData)!=="{}")i.userData=this.userData;function r(e){var t=[];for(var i in e){var r=e[i];delete r.metadata;t.push(r)}return t}if(t){var n=r(e.textures);var a=r(e.images);if(n.length>0)i.textures=n;if(a.length>0)i.images=a}return i},clone:function(){return(new this.constructor).copy(this)},copy:function(e){this.name=e.name;this.fog=e.fog;this.lights=e.lights;this.blending=e.blending;this.side=e.side;this.flatShading=e.flatShading;this.vertexColors=e.vertexColors;this.opacity=e.opacity;this.transparent=e.transparent;this.blendSrc=e.blendSrc;this.blendDst=e.blendDst;this.blendEquation=e.blendEquation;this.blendSrcAlpha=e.blendSrcAlpha;this.blendDstAlpha=e.blendDstAlpha;this.blendEquationAlpha=e.blendEquationAlpha;this.depthFunc=e.depthFunc;this.depthTest=e.depthTest;this.depthWrite=e.depthWrite;this.colorWrite=e.colorWrite;this.precision=e.precision;this.polygonOffset=e.polygonOffset;this.polygonOffsetFactor=e.polygonOffsetFactor;this.polygonOffsetUnits=e.polygonOffsetUnits;this.dithering=e.dithering;this.alphaTest=e.alphaTest;this.premultipliedAlpha=e.premultipliedAlpha;this.overdraw=e.overdraw;this.visible=e.visible;this.userData=JSON.parse(JSON.stringify(e.userData));this.clipShadows=e.clipShadows;this.clipIntersection=e.clipIntersection;var t=e.clippingPlanes,i=null;if(t!==null){var r=t.length;i=new Array(r);for(var n=0;n!==r;++n)i[n]=t[n].clone()}this.clippingPlanes=i;return this},dispose:function(){this.dispatchEvent({type:"dispose"})}});function On(e){Cn.call(this);this.type="ShaderMaterial";this.defines={};this.uniforms={};this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}";this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}";this.linewidth=1;this.wireframe=false;this.wireframeLinewidth=1;this.fog=false;this.lights=false;this.clipping=false;this.skinning=false;this.morphTargets=false;this.morphNormals=false;this.extensions={derivatives:false,fragDepth:false,drawBuffers:false,shaderTextureLOD:false};this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]};this.index0AttributeName=undefined;if(e!==undefined){if(e.attributes!==undefined){console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead.")}this.setValues(e)}}On.prototype=Object.create(Cn.prototype);On.prototype.constructor=On;On.prototype.isShaderMaterial=true;On.prototype.copy=function(e){Cn.prototype.copy.call(this,e);this.fragmentShader=e.fragmentShader;this.vertexShader=e.vertexShader;this.uniforms=xi.clone(e.uniforms);this.defines=e.defines;this.wireframe=e.wireframe;this.wireframeLinewidth=e.wireframeLinewidth;this.lights=e.lights;this.clipping=e.clipping;this.skinning=e.skinning;this.morphTargets=e.morphTargets;this.morphNormals=e.morphNormals;this.extensions=e.extensions;return this};On.prototype.toJSON=function(e){var t=Cn.prototype.toJSON.call(this,e);t.uniforms=this.uniforms;t.vertexShader=this.vertexShader;t.fragmentShader=this.fragmentShader;return t};function In(e){Cn.call(this);this.type="MeshDepthMaterial";this.depthPacking=gt;this.skinning=false;this.morphTargets=false;this.map=null;this.alphaMap=null;this.displacementMap=null;this.displacementScale=1;this.displacementBias=0;this.wireframe=false;this.wireframeLinewidth=1;this.fog=false;this.lights=false;this.setValues(e)}In.prototype=Object.create(Cn.prototype);In.prototype.constructor=In;In.prototype.isMeshDepthMaterial=true;In.prototype.copy=function(e){Cn.prototype.copy.call(this,e);this.depthPacking=e.depthPacking;this.skinning=e.skinning;this.morphTargets=e.morphTargets;this.map=e.map;this.alphaMap=e.alphaMap;this.displacementMap=e.displacementMap;this.displacementScale=e.displacementScale;this.displacementBias=e.displacementBias;this.wireframe=e.wireframe;this.wireframeLinewidth=e.wireframeLinewidth;return this};function Dn(e){Cn.call(this);this.type="MeshDistanceMaterial";this.referencePosition=new At;this.nearDistance=1;this.farDistance=1e3;this.skinning=false;this.morphTargets=false;this.map=null;this.alphaMap=null;this.displacementMap=null;this.displacementScale=1;this.displacementBias=0;this.fog=false;this.lights=false;this.setValues(e)}Dn.prototype=Object.create(Cn.prototype);Dn.prototype.constructor=Dn;Dn.prototype.isMeshDistanceMaterial=true;Dn.prototype.copy=function(e){Cn.prototype.copy.call(this,e);this.referencePosition.copy(e.referencePosition);this.nearDistance=e.nearDistance;this.farDistance=e.farDistance;this.skinning=e.skinning;this.morphTargets=e.morphTargets;this.map=e.map;this.alphaMap=e.alphaMap;this.displacementMap=e.displacementMap;this.displacementScale=e.displacementScale;this.displacementBias=e.displacementBias;return this};function kn(e,t){this.min=e!==undefined?e:new At(+Infinity,+Infinity,+Infinity);this.max=t!==undefined?t:new At(-Infinity,-Infinity,-Infinity)}Object.assign(kn.prototype,{isBox3:true,set:function(e,t){this.min.copy(e);this.max.copy(t);return this},setFromArray:function(e){var t=+Infinity;var i=+Infinity;var r=+Infinity;var n=-Infinity;var a=-Infinity;var s=-Infinity;for(var o=0,l=e.length;o<l;o+=3){var u=e[o];var h=e[o+1];var c=e[o+2];if(u<t)t=u;if(h<i)i=h;if(c<r)r=c;if(u>n)n=u;if(h>a)a=h;if(c>s)s=c}this.min.set(t,i,r);this.max.set(n,a,s);return this},setFromBufferAttribute:function(e){var t=+Infinity;var i=+Infinity;var r=+Infinity;var n=-Infinity;var a=-Infinity;var s=-Infinity;for(var o=0,l=e.count;o<l;o++){var u=e.getX(o);var h=e.getY(o);var c=e.getZ(o);if(u<t)t=u;if(h<i)i=h;if(c<r)r=c;if(u>n)n=u;if(h>a)a=h;if(c>s)s=c}this.min.set(t,i,r);this.max.set(n,a,s);return this},setFromPoints:function(e){this.makeEmpty();for(var t=0,i=e.length;t<i;t++){this.expandByPoint(e[t])}return this},setFromCenterAndSize:function(){var e=new At;return function t(i,r){var n=e.copy(r).multiplyScalar(.5);this.min.copy(i).sub(n);this.max.copy(i).add(n);return this}}(),setFromObject:function(e){this.makeEmpty();return this.expandByObject(e)},clone:function(){return(new this.constructor).copy(this)},copy:function(e){this.min.copy(e.min);this.max.copy(e.max);return this},makeEmpty:function(){this.min.x=this.min.y=this.min.z=+Infinity;this.max.x=this.max.y=this.max.z=-Infinity;return this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},getCenter:function(e){var t=e||new At;return this.isEmpty()?t.set(0,0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(e){var t=e||new At;return this.isEmpty()?t.set(0,0,0):t.subVectors(this.max,this.min)},expandByPoint:function(e){this.min.min(e);this.max.max(e);return this},expandByVector:function(e){this.min.sub(e);this.max.add(e);return this},expandByScalar:function(e){this.min.addScalar(-e);this.max.addScalar(e);return this},expandByObject:function(){var e=new At;return function t(i){var r=this;i.updateMatrixWorld(true);i.traverse(function(t){var i,n;var a=t.geometry;if(a!==undefined){if(a.isGeometry){var s=a.vertices;for(i=0,n=s.length;i<n;i++){e.copy(s[i]);e.applyMatrix4(t.matrixWorld);r.expandByPoint(e)}}else if(a.isBufferGeometry){var o=a.attributes.position;if(o!==undefined){for(i=0,n=o.count;i<n;i++){e.fromBufferAttribute(o,i).applyMatrix4(t.matrixWorld);r.expandByPoint(e)}}}}});return this}}(),containsPoint:function(e){return e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z?false:true},containsBox:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z},getParameter:function(e,t){var i=t||new At;return i.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))},intersectsBox:function(e){return e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z?false:true},intersectsSphere:function(){var e=new At;return function t(i){this.clampPoint(i.center,e);return e.distanceToSquared(i.center)<=i.radius*i.radius}}(),intersectsPlane:function(e){var t,i;if(e.normal.x>0){t=e.normal.x*this.min.x;i=e.normal.x*this.max.x}else{t=e.normal.x*this.max.x;i=e.normal.x*this.min.x}if(e.normal.y>0){t+=e.normal.y*this.min.y;i+=e.normal.y*this.max.y}else{t+=e.normal.y*this.max.y;i+=e.normal.y*this.min.y}if(e.normal.z>0){t+=e.normal.z*this.min.z;i+=e.normal.z*this.max.z}else{t+=e.normal.z*this.max.z;i+=e.normal.z*this.min.z}return t<=e.constant&&i>=e.constant},clampPoint:function(e,t){var i=t||new At;return i.copy(e).clamp(this.min,this.max)},distanceToPoint:function(){var e=new At;return function t(i){var r=e.copy(i).clamp(this.min,this.max);return r.sub(i).length()}}(),getBoundingSphere:function(){var e=new At;return function t(i){var r=i||new Un;this.getCenter(r.center);r.radius=this.getSize(e).length()*.5;return r}}(),intersect:function(e){this.min.max(e.min);this.max.min(e.max);if(this.isEmpty())this.makeEmpty();return this},union:function(e){this.min.min(e.min);this.max.max(e.max);return this},applyMatrix4:function(){var e=[new At,new At,new At,new At,new At,new At,new At,new At];return function t(i){if(this.isEmpty())return this;e[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(i);e[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(i);e[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(i);e[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(i);e[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(i);e[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(i);e[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(i);e[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(i);this.setFromPoints(e);return this}}(),translate:function(e){this.min.add(e);this.max.add(e);return this},equals:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)}});function Un(e,t){this.center=e!==undefined?e:new At;this.radius=t!==undefined?t:0}Object.assign(Un.prototype,{set:function(e,t){this.center.copy(e);this.radius=t;return this},setFromPoints:function(){var e=new kn;return function t(i,r){var n=this.center;if(r!==undefined){n.copy(r)}else{e.setFromPoints(i).getCenter(n)}var a=0;for(var s=0,o=i.length;s<o;s++){a=Math.max(a,n.distanceToSquared(i[s]))}this.radius=Math.sqrt(a);return this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(e){this.center.copy(e.center);this.radius=e.radius;return this},empty:function(){return this.radius<=0},containsPoint:function(e){return e.distanceToSquared(this.center)<=this.radius*this.radius},distanceToPoint:function(e){return e.distanceTo(this.center)-this.radius},intersectsSphere:function(e){var t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t},intersectsBox:function(e){return e.intersectsSphere(this)},intersectsPlane:function(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius},clampPoint:function(e,t){var i=this.center.distanceToSquared(e);var r=t||new At;r.copy(e);if(i>this.radius*this.radius){r.sub(this.center).normalize();r.multiplyScalar(this.radius).add(this.center)}return r},getBoundingBox:function(e){var t=e||new kn;t.set(this.center,this.center);t.expandByScalar(this.radius);return t},applyMatrix4:function(e){this.center.applyMatrix4(e);this.radius=this.radius*e.getMaxScaleOnAxis();return this},translate:function(e){this.center.add(e);return this},equals:function(e){return e.center.equals(this.center)&&e.radius===this.radius}});function Fn(){this.elements=[1,0,0,0,1,0,0,0,1];if(arguments.length>0){console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}}Object.assign(Fn.prototype,{isMatrix3:true,set:function(e,t,i,r,n,a,s,o,l){var u=this.elements;u[0]=e;u[1]=r;u[2]=s;u[3]=t;u[4]=n;u[5]=o;u[6]=i;u[7]=a;u[8]=l;return this},identity:function(){this.set(1,0,0,0,1,0,0,0,1);return this},clone:function(){return(new this.constructor).fromArray(this.elements)},copy:function(e){var t=this.elements;var i=e.elements;t[0]=i[0];t[1]=i[1];t[2]=i[2];t[3]=i[3];t[4]=i[4];t[5]=i[5];t[6]=i[6];t[7]=i[7];t[8]=i[8];return this},setFromMatrix4:function(e){var t=e.elements;this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]);return this},applyToBufferAttribute:function(){var e=new At;return function t(i){for(var r=0,n=i.count;r<n;r++){e.x=i.getX(r);e.y=i.getY(r);e.z=i.getZ(r);e.applyMatrix3(this);i.setXYZ(r,e.x,e.y,e.z)}return i}}(),multiply:function(e){return this.multiplyMatrices(this,e)},premultiply:function(e){return this.multiplyMatrices(e,this)},multiplyMatrices:function(e,t){var i=e.elements;var r=t.elements;var n=this.elements;var a=i[0],s=i[3],o=i[6];var l=i[1],u=i[4],h=i[7];var c=i[2],f=i[5],d=i[8];var p=r[0],m=r[3],v=r[6];var g=r[1],y=r[4],_=r[7];var b=r[2],x=r[5],w=r[8];n[0]=a*p+s*g+o*b;n[3]=a*m+s*y+o*x;n[6]=a*v+s*_+o*w;n[1]=l*p+u*g+h*b;n[4]=l*m+u*y+h*x;n[7]=l*v+u*_+h*w;n[2]=c*p+f*g+d*b;n[5]=c*m+f*y+d*x;n[8]=c*v+f*_+d*w;return this},multiplyScalar:function(e){var t=this.elements;t[0]*=e;t[3]*=e;t[6]*=e;t[1]*=e;t[4]*=e;t[7]*=e;t[2]*=e;t[5]*=e;t[8]*=e;return this},determinant:function(){var e=this.elements;var t=e[0],i=e[1],r=e[2],n=e[3],a=e[4],s=e[5],o=e[6],l=e[7],u=e[8];return t*a*u-t*s*l-i*n*u+i*s*o+r*n*l-r*a*o},getInverse:function(e,t){if(e&&e.isMatrix4){console.error("THREE.Matrix3: .getInverse() no longer takes a Matrix4 argument.")}var i=e.elements,r=this.elements,n=i[0],a=i[1],s=i[2],o=i[3],l=i[4],u=i[5],h=i[6],c=i[7],f=i[8],d=f*l-u*c,p=u*h-f*o,m=c*o-l*h,v=n*d+a*p+s*m;if(v===0){var g="THREE.Matrix3: .getInverse() can't invert matrix, determinant is 0";if(t===true){throw new Error(g)}else{console.warn(g)}return this.identity()}var y=1/v;r[0]=d*y;r[1]=(s*c-f*a)*y;r[2]=(u*a-s*l)*y;r[3]=p*y;r[4]=(f*n-s*h)*y;r[5]=(s*o-u*n)*y;r[6]=m*y;r[7]=(a*h-c*n)*y;r[8]=(l*n-a*o)*y;return this},transpose:function(){var e,t=this.elements;e=t[1];t[1]=t[3];t[3]=e;e=t[2];t[2]=t[6];t[6]=e;e=t[5];t[5]=t[7];t[7]=e;return this},getNormalMatrix:function(e){return this.setFromMatrix4(e).getInverse(this).transpose()},transposeIntoArray:function(e){var t=this.elements;e[0]=t[0];e[1]=t[3];e[2]=t[6];e[3]=t[1];e[4]=t[4];e[5]=t[7];e[6]=t[2];e[7]=t[5];e[8]=t[8];return this},equals:function(e){var t=this.elements;var i=e.elements;for(var r=0;r<9;r++){if(t[r]!==i[r])return false}return true},fromArray:function(e,t){if(t===undefined)t=0;for(var i=0;i<9;i++){this.elements[i]=e[i+t]}return this},toArray:function(e,t){if(e===undefined)e=[];if(t===undefined)t=0;var i=this.elements;e[t]=i[0];e[t+1]=i[1];e[t+2]=i[2];e[t+3]=i[3];e[t+4]=i[4];e[t+5]=i[5];e[t+6]=i[6];e[t+7]=i[7];e[t+8]=i[8];return e}});function Nn(e,t){this.normal=e!==undefined?e:new At(1,0,0);this.constant=t!==undefined?t:0}Object.assign(Nn.prototype,{set:function(e,t){this.normal.copy(e);this.constant=t;return this},setComponents:function(e,t,i,r){this.normal.set(e,t,i);this.constant=r;return this},setFromNormalAndCoplanarPoint:function(e,t){this.normal.copy(e);this.constant=-t.dot(this.normal);return this},setFromCoplanarPoints:function(){var e=new At;var t=new At;return function i(r,n,a){var s=e.subVectors(a,n).cross(t.subVectors(r,n)).normalize();this.setFromNormalAndCoplanarPoint(s,r);return this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(e){this.normal.copy(e.normal);this.constant=e.constant;return this},normalize:function(){var e=1/this.normal.length();this.normal.multiplyScalar(e);this.constant*=e;return this},negate:function(){this.constant*=-1;this.normal.negate();return this},distanceToPoint:function(e){return this.normal.dot(e)+this.constant},distanceToSphere:function(e){return this.distanceToPoint(e.center)-e.radius},projectPoint:function(e,t){var i=t||new At;return i.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)},intersectLine:function(){var e=new At;return function t(i,r){var n=r||new At;var a=i.delta(e);var s=this.normal.dot(a);if(s===0){if(this.distanceToPoint(i.start)===0){return n.copy(i.start)}return undefined}var o=-(i.start.dot(this.normal)+this.constant)/s;if(o<0||o>1){return undefined}return n.copy(a).multiplyScalar(o).add(i.start)}}(),intersectsLine:function(e){var t=this.distanceToPoint(e.start);var i=this.distanceToPoint(e.end);return t<0&&i>0||i<0&&t>0},intersectsBox:function(e){return e.intersectsPlane(this)},intersectsSphere:function(e){return e.intersectsPlane(this)},coplanarPoint:function(e){var t=e||new At;return t.copy(this.normal).multiplyScalar(-this.constant)},applyMatrix4:function(){var e=new At;var t=new Fn;return function i(r,n){var a=n||t.getNormalMatrix(r);var s=this.coplanarPoint(e).applyMatrix4(r);var o=this.normal.applyMatrix3(a).normalize();this.constant=-s.dot(o);return this}}(),translate:function(e){this.constant-=e.dot(this.normal);return this},equals:function(e){return e.normal.equals(this.normal)&&e.constant===this.constant}});function Bn(e,t,i,r,n,a){this.planes=[e!==undefined?e:new Nn,t!==undefined?t:new Nn,i!==undefined?i:new Nn,r!==undefined?r:new Nn,n!==undefined?n:new Nn,a!==undefined?a:new Nn]}Object.assign(Bn.prototype,{set:function(e,t,i,r,n,a){var s=this.planes;s[0].copy(e);s[1].copy(t);s[2].copy(i);s[3].copy(r);s[4].copy(n);s[5].copy(a);return this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){var t=this.planes;for(var i=0;i<6;i++){t[i].copy(e.planes[i])}return this},setFromMatrix:function(e){var t=this.planes;var i=e.elements;var r=i[0],n=i[1],a=i[2],s=i[3];var o=i[4],l=i[5],u=i[6],h=i[7];var c=i[8],f=i[9],d=i[10],p=i[11];var m=i[12],v=i[13],g=i[14],y=i[15];t[0].setComponents(s-r,h-o,p-c,y-m).normalize();t[1].setComponents(s+r,h+o,p+c,y+m).normalize();t[2].setComponents(s+n,h+l,p+f,y+v).normalize();t[3].setComponents(s-n,h-l,p-f,y-v).normalize();t[4].setComponents(s-a,h-u,p-d,y-g).normalize();t[5].setComponents(s+a,h+u,p+d,y+g).normalize();return this},intersectsObject:function(){var e=new Un;return function t(i){var r=i.geometry;if(r.boundingSphere===null)r.computeBoundingSphere();e.copy(r.boundingSphere).applyMatrix4(i.matrixWorld);return this.intersectsSphere(e)}}(),intersectsSprite:function(){var e=new Un;return function t(i){e.center.set(0,0,0);e.radius=.7071067811865476;e.applyMatrix4(i.matrixWorld);return this.intersectsSphere(e)}}(),intersectsSphere:function(e){var t=this.planes;var i=e.center;var r=-e.radius;for(var n=0;n<6;n++){var a=t[n].distanceToPoint(i);if(a<r){return false}}return true},intersectsBox:function(){var e=new At,t=new At;return function i(r){var n=this.planes;for(var a=0;a<6;a++){var s=n[a];e.x=s.normal.x>0?r.min.x:r.max.x;t.x=s.normal.x>0?r.max.x:r.min.x;e.y=s.normal.y>0?r.min.y:r.max.y;t.y=s.normal.y>0?r.max.y:r.min.y;e.z=s.normal.z>0?r.min.z:r.max.z;t.z=s.normal.z>0?r.max.z:r.min.z;var o=s.distanceToPoint(e);var l=s.distanceToPoint(t);if(o<0&&l<0){return false}}return true}}(),containsPoint:function(e){var t=this.planes;for(var i=0;i<6;i++){if(t[i].distanceToPoint(e)<0){return false}}return true}});function zn(e,t,i){var r=new Bn,n=new Pt,a=new bt,s=new bt(i,i),o=new At,l=new At,u=1,h=2,f=(u|h)+1,v=new Array(f),g=new Array(f),y={};var _=[new At(1,0,0),new At(-1,0,0),new At(0,0,1),new At(0,0,-1),new At(0,1,0),new At(0,-1,0)];var b=[new At(0,1,0),new At(0,1,0),new At(0,1,0),new At(0,1,0),new At(0,0,1),new At(0,0,-1)];var x=[new Tt,new Tt,new Tt,new Tt,new Tt,new Tt];for(var w=0;w!==f;++w){var T=(w&u)!==0;var M=(w&h)!==0;var E=new In({depthPacking:yt,morphTargets:T,skinning:M});v[w]=E;var S=new Dn({morphTargets:T,skinning:M});g[w]=S}var A=this;this.enabled=false;this.autoUpdate=true;this.needsUpdate=false;this.type=c;this.renderReverseSided=true;this.renderSingleSided=true;this.render=function(t,i,u){if(A.enabled===false)return;if(A.autoUpdate===false&&A.needsUpdate===false)return;if(t.length===0)return;var h=e.context;var c=e.state;c.disable(h.BLEND);c.buffers.color.setClear(1,1,1,1);c.buffers.depth.setTest(true);c.setScissorTest(false);var f;for(var d=0,p=t.length;d<p;d++){var m=t[d];var v=m.shadow;var g=m&&m.isPointLight;if(v===undefined){console.warn("THREE.WebGLShadowMap:",m,"has no shadow.");continue}var y=v.camera;a.copy(v.mapSize);a.min(s);if(g){var w=a.x;var T=a.y;x[0].set(w*2,T,w,T);x[1].set(0,T,w,T);x[2].set(w*3,T,w,T);x[3].set(w,T,w,T);x[4].set(w*3,0,w,T);x[5].set(w,0,w,T);a.x*=4;a.y*=2}if(v.map===null){var M={minFilter:ve,magFilter:ve,format:Ue};v.map=new Mt(a.x,a.y,M);v.map.texture.name=m.name+".shadowMap";y.updateProjectionMatrix()}if(v.isSpotLightShadow){v.update(m)}var E=v.map;var S=v.matrix;l.setFromMatrixPosition(m.matrixWorld);y.position.copy(l);if(g){f=6;S.makeTranslation(-l.x,-l.y,-l.z)}else{f=1;o.setFromMatrixPosition(m.target.matrixWorld);y.lookAt(o);y.updateMatrixWorld();S.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1);S.multiply(y.projectionMatrix);S.multiply(y.matrixWorldInverse)}e.setRenderTarget(E);e.clear();for(var P=0;P<f;P++){if(g){o.copy(y.position);o.add(_[P]);y.up.copy(b[P]);y.lookAt(o);y.updateMatrixWorld();var L=x[P];c.viewport(L)}n.multiplyMatrices(y.projectionMatrix,y.matrixWorldInverse);r.setFromMatrix(n);R(i,u,y,g)}}A.needsUpdate=false};function P(t,i,r,n,a,s){var o=t.geometry;var l=null;var c=v;var f=t.customDepthMaterial;if(r){c=g;f=t.customDistanceMaterial}if(!f){var _=false;if(i.morphTargets){if(o&&o.isBufferGeometry){_=o.morphAttributes&&o.morphAttributes.position&&o.morphAttributes.position.length>0}else if(o&&o.isGeometry){_=o.morphTargets&&o.morphTargets.length>0}}if(t.isSkinnedMesh&&i.skinning===false){console.warn("THREE.WebGLShadowMap: THREE.SkinnedMesh with material.skinning set to false:",t)}var b=t.isSkinnedMesh&&i.skinning;var x=0;if(_)x|=u;if(b)x|=h;l=c[x]}else{l=f}if(e.localClippingEnabled&&i.clipShadows===true&&i.clippingPlanes.length!==0){var w=l.uuid,T=i.uuid;var M=y[w];if(M===undefined){M={};y[w]=M}var E=M[T];if(E===undefined){E=l.clone();M[T]=E}l=E}l.visible=i.visible;l.wireframe=i.wireframe;var S=i.side;if(A.renderSingleSided&&S==m){S=d}if(A.renderReverseSided){if(S===d)S=p;else if(S===p)S=d}l.side=S;l.clipShadows=i.clipShadows;l.clippingPlanes=i.clippingPlanes;l.clipIntersection=i.clipIntersection;l.wireframeLinewidth=i.wireframeLinewidth;l.linewidth=i.linewidth;if(r&&l.isMeshDistanceMaterial){l.referencePosition.copy(n);l.nearDistance=a;l.farDistance=s}return l}function R(i,n,a,s){if(i.visible===false)return;var o=i.layers.test(n.layers);if(o&&(i.isMesh||i.isLine||i.isPoints)){if(i.castShadow&&(!i.frustumCulled||r.intersectsObject(i))){i.modelViewMatrix.multiplyMatrices(a.matrixWorldInverse,i.matrixWorld);var u=t.update(i);var h=i.material;if(Array.isArray(h)){var c=u.groups;for(var f=0,d=c.length;f<d;f++){var p=c[f];var m=h[p.materialIndex];if(m&&m.visible){var v=P(i,m,s,l,a.near,a.far);e.renderBufferDirect(a,null,u,v,i,p)}}}else if(h.visible){var v=P(i,h,s,l,a.near,a.far);e.renderBufferDirect(a,null,u,v,i,null)}}}var g=i.children;for(var y=0,_=g.length;y<_;y++){R(g[y],n,a,s)}}}function jn(e){var t={};function i(t,i){var r=t.array;var n=t.dynamic?e.DYNAMIC_DRAW:e.STATIC_DRAW;var a=e.createBuffer();e.bindBuffer(i,a);e.bufferData(i,r,n);t.onUploadCallback();var s=e.FLOAT;if(r instanceof Float32Array){s=e.FLOAT}else if(r instanceof Float64Array){console.warn("THREE.WebGLAttributes: Unsupported data buffer format: Float64Array.")}else if(r instanceof Uint16Array){s=e.UNSIGNED_SHORT}else if(r instanceof Int16Array){s=e.SHORT}else if(r instanceof Uint32Array){s=e.UNSIGNED_INT}else if(r instanceof Int32Array){s=e.INT}else if(r instanceof Int8Array){s=e.BYTE}else if(r instanceof Uint8Array){s=e.UNSIGNED_BYTE}return{buffer:a,type:s,bytesPerElement:r.BYTES_PER_ELEMENT,version:t.version}}function r(t,i,r){var n=i.array;var a=i.updateRange;e.bindBuffer(r,t);if(i.dynamic===false){e.bufferData(r,n,e.STATIC_DRAW)}else if(a.count===-1){e.bufferSubData(r,0,n)}else if(a.count===0){console.error("THREE.WebGLObjects.updateBuffer: dynamic THREE.BufferAttribute marked as needsUpdate but updateRange.count is 0, ensure you are using set methods or updating manually.")}else{e.bufferSubData(r,a.offset*n.BYTES_PER_ELEMENT,n.subarray(a.offset,a.offset+a.count));a.count=-1}}function n(e){if(e.isInterleavedBufferAttribute)e=e.data;return t[e.uuid]}function a(i){if(i.isInterleavedBufferAttribute)i=i.data;var r=t[i.uuid];if(r){e.deleteBuffer(r.buffer);delete t[i.uuid]}}function s(e,n){if(e.isInterleavedBufferAttribute)e=e.data;var a=t[e.uuid];if(a===undefined){t[e.uuid]=i(e,n)}else if(a.version<e.version){r(a.buffer,e,n);a.version=e.version}}return{get:n,remove:a,update:s}}function Gn(e,t,i,r){this._x=e||0;this._y=t||0;this._z=i||0;this._order=r||Gn.DefaultOrder}Gn.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"];Gn.DefaultOrder="XYZ";Object.defineProperties(Gn.prototype,{x:{get:function(){return this._x},set:function(e){this._x=e;this.onChangeCallback()}},y:{get:function(){return this._y},set:function(e){this._y=e;this.onChangeCallback()}},z:{get:function(){return this._z},set:function(e){this._z=e;this.onChangeCallback()}},order:{get:function(){return this._order},set:function(e){this._order=e;this.onChangeCallback()}}});Object.assign(Gn.prototype,{isEuler:true,set:function(e,t,i,r){this._x=e;this._y=t;this._z=i;this._order=r||this._order;this.onChangeCallback();return this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._order)},copy:function(e){this._x=e._x;this._y=e._y;this._z=e._z;this._order=e._order;this.onChangeCallback();return this},setFromRotationMatrix:function(e,t,i){var r=_t.clamp;var n=e.elements;var a=n[0],s=n[4],o=n[8];var l=n[1],u=n[5],h=n[9];var c=n[2],f=n[6],d=n[10];t=t||this._order;if(t==="XYZ"){this._y=Math.asin(r(o,-1,1));if(Math.abs(o)<.99999){this._x=Math.atan2(-h,d);this._z=Math.atan2(-s,a)}else{this._x=Math.atan2(f,u);this._z=0}}else if(t==="YXZ"){this._x=Math.asin(-r(h,-1,1));if(Math.abs(h)<.99999){this._y=Math.atan2(o,d);this._z=Math.atan2(l,u)}else{this._y=Math.atan2(-c,a);this._z=0}}else if(t==="ZXY"){this._x=Math.asin(r(f,-1,1));if(Math.abs(f)<.99999){this._y=Math.atan2(-c,d);this._z=Math.atan2(-s,u)}else{this._y=0;this._z=Math.atan2(l,a)}}else if(t==="ZYX"){this._y=Math.asin(-r(c,-1,1));if(Math.abs(c)<.99999){this._x=Math.atan2(f,d);this._z=Math.atan2(l,a)}else{this._x=0;this._z=Math.atan2(-s,u)}}else if(t==="YZX"){this._z=Math.asin(r(l,-1,1));if(Math.abs(l)<.99999){this._x=Math.atan2(-h,u);this._y=Math.atan2(-c,a)}else{this._x=0;this._y=Math.atan2(o,d)}}else if(t==="XZY"){this._z=Math.asin(-r(s,-1,1));if(Math.abs(s)<.99999){this._x=Math.atan2(f,u);this._y=Math.atan2(o,a)}else{this._x=Math.atan2(-h,d);this._y=0}}else{console.warn("THREE.Euler: .setFromRotationMatrix() given unsupported order: "+t)}this._order=t;if(i!==false)this.onChangeCallback();return this},setFromQuaternion:function(){var e=new Pt;return function t(i,r,n){e.makeRotationFromQuaternion(i);return this.setFromRotationMatrix(e,r,n)}}(),setFromVector3:function(e,t){return this.set(e.x,e.y,e.z,t||this._order)},reorder:function(){var e=new St;return function t(i){e.setFromEuler(this);return this.setFromQuaternion(e,i)}}(),equals:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order},fromArray:function(e){this._x=e[0];this._y=e[1];this._z=e[2];if(e[3]!==undefined)this._order=e[3];this.onChangeCallback();return this},toArray:function(e,t){if(e===undefined)e=[];if(t===undefined)t=0;e[t]=this._x;e[t+1]=this._y;e[t+2]=this._z;e[t+3]=this._order;return e},toVector3:function(e){if(e){return e.set(this._x,this._y,this._z)}else{return new At(this._x,this._y,this._z)}},onChange:function(e){this.onChangeCallback=e;return this},onChangeCallback:function(){}});function Hn(){this.mask=1|0}Object.assign(Hn.prototype,{set:function(e){this.mask=1<<e|0},enable:function(e){this.mask|=1<<e|0},toggle:function(e){this.mask^=1<<e|0},disable:function(e){
this.mask&=~(1<<e|0)},test:function(e){return(this.mask&e.mask)!==0}});var Vn=0;function Wn(){Object.defineProperty(this,"id",{value:Vn++});this.uuid=_t.generateUUID();this.name="";this.type="Object3D";this.parent=null;this.children=[];this.up=Wn.DefaultUp.clone();var e=new At;var t=new Gn;var i=new St;var r=new At(1,1,1);function n(){i.setFromEuler(t,false)}function a(){t.setFromQuaternion(i,undefined,false)}t.onChange(n);i.onChange(a);Object.defineProperties(this,{position:{enumerable:true,value:e},rotation:{enumerable:true,value:t},quaternion:{enumerable:true,value:i},scale:{enumerable:true,value:r},modelViewMatrix:{value:new Pt},normalMatrix:{value:new Fn}});this.matrix=new Pt;this.matrixWorld=new Pt;this.matrixAutoUpdate=Wn.DefaultMatrixAutoUpdate;this.matrixWorldNeedsUpdate=false;this.layers=new Hn;this.visible=true;this.castShadow=false;this.receiveShadow=false;this.frustumCulled=true;this.renderOrder=0;this.userData={}}Wn.DefaultUp=new At(0,1,0);Wn.DefaultMatrixAutoUpdate=true;Object.assign(Wn.prototype,t.prototype,{isObject3D:true,onBeforeRender:function(){},onAfterRender:function(){},applyMatrix:function(e){this.matrix.multiplyMatrices(e,this.matrix);this.matrix.decompose(this.position,this.quaternion,this.scale)},applyQuaternion:function(e){this.quaternion.premultiply(e);return this},setRotationFromAxisAngle:function(e,t){this.quaternion.setFromAxisAngle(e,t)},setRotationFromEuler:function(e){this.quaternion.setFromEuler(e,true)},setRotationFromMatrix:function(e){this.quaternion.setFromRotationMatrix(e)},setRotationFromQuaternion:function(e){this.quaternion.copy(e)},rotateOnAxis:function(){var e=new St;return function t(i,r){e.setFromAxisAngle(i,r);this.quaternion.multiply(e);return this}}(),rotateX:function(){var e=new At(1,0,0);return function t(i){return this.rotateOnAxis(e,i)}}(),rotateY:function(){var e=new At(0,1,0);return function t(i){return this.rotateOnAxis(e,i)}}(),rotateZ:function(){var e=new At(0,0,1);return function t(i){return this.rotateOnAxis(e,i)}}(),translateOnAxis:function(){var e=new At;return function t(i,r){e.copy(i).applyQuaternion(this.quaternion);this.position.add(e.multiplyScalar(r));return this}}(),translateX:function(){var e=new At(1,0,0);return function t(i){return this.translateOnAxis(e,i)}}(),translateY:function(){var e=new At(0,1,0);return function t(i){return this.translateOnAxis(e,i)}}(),translateZ:function(){var e=new At(0,0,1);return function t(i){return this.translateOnAxis(e,i)}}(),localToWorld:function(e){return e.applyMatrix4(this.matrixWorld)},worldToLocal:function(){var e=new Pt;return function t(i){return i.applyMatrix4(e.getInverse(this.matrixWorld))}}(),lookAt:function(){var e=new Pt;return function t(i){if(this.isCamera){e.lookAt(this.position,i,this.up)}else{e.lookAt(i,this.position,this.up)}this.quaternion.setFromRotationMatrix(e)}}(),add:function(e){if(arguments.length>1){for(var t=0;t<arguments.length;t++){this.add(arguments[t])}return this}if(e===this){console.error("THREE.Object3D.add: object can't be added as a child of itself.",e);return this}if(e&&e.isObject3D){if(e.parent!==null){e.parent.remove(e)}e.parent=this;e.dispatchEvent({type:"added"});this.children.push(e)}else{console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e)}return this},remove:function(e){if(arguments.length>1){for(var t=0;t<arguments.length;t++){this.remove(arguments[t])}return this}var i=this.children.indexOf(e);if(i!==-1){e.parent=null;e.dispatchEvent({type:"removed"});this.children.splice(i,1)}return this},getObjectById:function(e){return this.getObjectByProperty("id",e)},getObjectByName:function(e){return this.getObjectByProperty("name",e)},getObjectByProperty:function(e,t){if(this[e]===t)return this;for(var i=0,r=this.children.length;i<r;i++){var n=this.children[i];var a=n.getObjectByProperty(e,t);if(a!==undefined){return a}}return undefined},getWorldPosition:function(e){var t=e||new At;this.updateMatrixWorld(true);return t.setFromMatrixPosition(this.matrixWorld)},getWorldQuaternion:function(){var e=new At;var t=new At;return function i(r){var n=r||new St;this.updateMatrixWorld(true);this.matrixWorld.decompose(e,n,t);return n}}(),getWorldRotation:function(){var e=new St;return function t(i){var r=i||new Gn;this.getWorldQuaternion(e);return r.setFromQuaternion(e,this.rotation.order,false)}}(),getWorldScale:function(){var e=new At;var t=new St;return function i(r){var n=r||new At;this.updateMatrixWorld(true);this.matrixWorld.decompose(e,t,n);return n}}(),getWorldDirection:function(){var e=new St;return function t(i){var r=i||new At;this.getWorldQuaternion(e);return r.set(0,0,1).applyQuaternion(e)}}(),raycast:function(){},traverse:function(e){e(this);var t=this.children;for(var i=0,r=t.length;i<r;i++){t[i].traverse(e)}},traverseVisible:function(e){if(this.visible===false)return;e(this);var t=this.children;for(var i=0,r=t.length;i<r;i++){t[i].traverseVisible(e)}},traverseAncestors:function(e){var t=this.parent;if(t!==null){e(t);t.traverseAncestors(e)}},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale);this.matrixWorldNeedsUpdate=true},updateMatrixWorld:function(e){if(this.matrixAutoUpdate)this.updateMatrix();if(this.matrixWorldNeedsUpdate||e){if(this.parent===null){this.matrixWorld.copy(this.matrix)}else{this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)}this.matrixWorldNeedsUpdate=false;e=true}var t=this.children;for(var i=0,r=t.length;i<r;i++){t[i].updateMatrixWorld(e)}},toJSON:function(e){var t=e===undefined||e==="";var i={};if(t){e={geometries:{},materials:{},textures:{},images:{}};i.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"}}var r={};r.uuid=this.uuid;r.type=this.type;if(this.name!=="")r.name=this.name;if(this.castShadow===true)r.castShadow=true;if(this.receiveShadow===true)r.receiveShadow=true;if(this.visible===false)r.visible=false;if(JSON.stringify(this.userData)!=="{}")r.userData=this.userData;r.matrix=this.matrix.toArray();function n(t,i){if(t[i.uuid]===undefined){t[i.uuid]=i.toJSON(e)}return i.uuid}if(this.geometry!==undefined){r.geometry=n(e.geometries,this.geometry)}if(this.material!==undefined){if(Array.isArray(this.material)){var a=[];for(var s=0,o=this.material.length;s<o;s++){a.push(n(e.materials,this.material[s]))}r.material=a}else{r.material=n(e.materials,this.material)}}if(this.children.length>0){r.children=[];for(var s=0;s<this.children.length;s++){r.children.push(this.children[s].toJSON(e).object)}}if(t){var l=f(e.geometries);var u=f(e.materials);var h=f(e.textures);var c=f(e.images);if(l.length>0)i.geometries=l;if(u.length>0)i.materials=u;if(h.length>0)i.textures=h;if(c.length>0)i.images=c}i.object=r;return i;function f(e){var t=[];for(var i in e){var r=e[i];delete r.metadata;t.push(r)}return t}},clone:function(e){return(new this.constructor).copy(this,e)},copy:function(e,t){if(t===undefined)t=true;this.name=e.name;this.up.copy(e.up);this.position.copy(e.position);this.quaternion.copy(e.quaternion);this.scale.copy(e.scale);this.matrix.copy(e.matrix);this.matrixWorld.copy(e.matrixWorld);this.matrixAutoUpdate=e.matrixAutoUpdate;this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate;this.layers.mask=e.layers.mask;this.visible=e.visible;this.castShadow=e.castShadow;this.receiveShadow=e.receiveShadow;this.frustumCulled=e.frustumCulled;this.renderOrder=e.renderOrder;this.userData=JSON.parse(JSON.stringify(e.userData));if(t===true){for(var i=0;i<e.children.length;i++){var r=e.children[i];this.add(r.clone())}}return this}});function Xn(){Wn.call(this);this.type="Camera";this.matrixWorldInverse=new Pt;this.projectionMatrix=new Pt}Xn.prototype=Object.assign(Object.create(Wn.prototype),{constructor:Xn,isCamera:true,copy:function(e,t){Wn.prototype.copy.call(this,e,t);this.matrixWorldInverse.copy(e.matrixWorldInverse);this.projectionMatrix.copy(e.projectionMatrix);return this},getWorldDirection:function(){var e=new St;return function t(i){var r=i||new At;this.getWorldQuaternion(e);return r.set(0,0,-1).applyQuaternion(e)}}(),updateMatrixWorld:function(e){Wn.prototype.updateMatrixWorld.call(this,e);this.matrixWorldInverse.getInverse(this.matrixWorld)},clone:function(){return(new this.constructor).copy(this)}});function Yn(e,t,i,r,n,a){Xn.call(this);this.type="OrthographicCamera";this.zoom=1;this.view=null;this.left=e;this.right=t;this.top=i;this.bottom=r;this.near=n!==undefined?n:.1;this.far=a!==undefined?a:2e3;this.updateProjectionMatrix()}Yn.prototype=Object.assign(Object.create(Xn.prototype),{constructor:Yn,isOrthographicCamera:true,copy:function(e,t){Xn.prototype.copy.call(this,e,t);this.left=e.left;this.right=e.right;this.top=e.top;this.bottom=e.bottom;this.near=e.near;this.far=e.far;this.zoom=e.zoom;this.view=e.view===null?null:Object.assign({},e.view);return this},setViewOffset:function(e,t,i,r,n,a){this.view={fullWidth:e,fullHeight:t,offsetX:i,offsetY:r,width:n,height:a};this.updateProjectionMatrix()},clearViewOffset:function(){this.view=null;this.updateProjectionMatrix()},updateProjectionMatrix:function(){var e=(this.right-this.left)/(2*this.zoom);var t=(this.top-this.bottom)/(2*this.zoom);var i=(this.right+this.left)/2;var r=(this.top+this.bottom)/2;var n=i-e;var a=i+e;var s=r+t;var o=r-t;if(this.view!==null){var l=this.zoom/(this.view.width/this.view.fullWidth);var u=this.zoom/(this.view.height/this.view.fullHeight);var h=(this.right-this.left)/this.view.width;var c=(this.top-this.bottom)/this.view.height;n+=h*(this.view.offsetX/l);a=n+h*(this.view.width/l);s-=c*(this.view.offsetY/u);o=s-c*(this.view.height/u)}this.projectionMatrix.makeOrthographic(n,a,s,o,this.near,this.far)},toJSON:function(e){var t=Wn.prototype.toJSON.call(this,e);t.object.zoom=this.zoom;t.object.left=this.left;t.object.right=this.right;t.object.top=this.top;t.object.bottom=this.bottom;t.object.near=this.near;t.object.far=this.far;if(this.view!==null)t.object.view=Object.assign({},this.view);return t}});function qn(e,t,i,r){Xn.call(this);this.type="PerspectiveCamera";this.fov=e!==undefined?e:50;this.zoom=1;this.near=i!==undefined?i:.1;this.far=r!==undefined?r:2e3;this.focus=10;this.aspect=t!==undefined?t:1;this.view=null;this.filmGauge=35;this.filmOffset=0;this.updateProjectionMatrix()}qn.prototype=Object.assign(Object.create(Xn.prototype),{constructor:qn,isPerspectiveCamera:true,copy:function(e,t){Xn.prototype.copy.call(this,e,t);this.fov=e.fov;this.zoom=e.zoom;this.near=e.near;this.far=e.far;this.focus=e.focus;this.aspect=e.aspect;this.view=e.view===null?null:Object.assign({},e.view);this.filmGauge=e.filmGauge;this.filmOffset=e.filmOffset;return this},setFocalLength:function(e){var t=.5*this.getFilmHeight()/e;this.fov=_t.RAD2DEG*2*Math.atan(t);this.updateProjectionMatrix()},getFocalLength:function(){var e=Math.tan(_t.DEG2RAD*.5*this.fov);return.5*this.getFilmHeight()/e},getEffectiveFOV:function(){return _t.RAD2DEG*2*Math.atan(Math.tan(_t.DEG2RAD*.5*this.fov)/this.zoom)},getFilmWidth:function(){return this.filmGauge*Math.min(this.aspect,1)},getFilmHeight:function(){return this.filmGauge/Math.max(this.aspect,1)},setViewOffset:function(e,t,i,r,n,a){this.aspect=e/t;this.view={fullWidth:e,fullHeight:t,offsetX:i,offsetY:r,width:n,height:a};this.updateProjectionMatrix()},clearViewOffset:function(){this.view=null;this.updateProjectionMatrix()},updateProjectionMatrix:function(){var e=this.near,t=e*Math.tan(_t.DEG2RAD*.5*this.fov)/this.zoom,i=2*t,r=this.aspect*i,n=-.5*r,a=this.view;if(a!==null){var s=a.fullWidth,o=a.fullHeight;n+=a.offsetX*r/s;t-=a.offsetY*i/o;r*=a.width/s;i*=a.height/o}var l=this.filmOffset;if(l!==0)n+=e*l/this.getFilmWidth();this.projectionMatrix.makePerspective(n,n+r,t,t-i,e,this.far)},toJSON:function(e){var t=Wn.prototype.toJSON.call(this,e);t.object.fov=this.fov;t.object.zoom=this.zoom;t.object.near=this.near;t.object.far=this.far;t.object.focus=this.focus;t.object.aspect=this.aspect;if(this.view!==null)t.object.view=Object.assign({},this.view);t.object.filmGauge=this.filmGauge;t.object.filmOffset=this.filmOffset;return t}});function $n(e,t,i,r,n,a){this.a=e;this.b=t;this.c=i;this.normal=r&&r.isVector3?r:new At;this.vertexNormals=Array.isArray(r)?r:[];this.color=n&&n.isColor?n:new _i;this.vertexColors=Array.isArray(n)?n:[];this.materialIndex=a!==undefined?a:0}Object.assign($n.prototype,{clone:function(){return(new this.constructor).copy(this)},copy:function(e){this.a=e.a;this.b=e.b;this.c=e.c;this.normal.copy(e.normal);this.color.copy(e.color);this.materialIndex=e.materialIndex;for(var t=0,i=e.vertexNormals.length;t<i;t++){this.vertexNormals[t]=e.vertexNormals[t].clone()}for(var t=0,i=e.vertexColors.length;t<i;t++){this.vertexColors[t]=e.vertexColors[t].clone()}return this}});var Zn=0;function Jn(){return Zn++}function Qn(){Object.defineProperty(this,"id",{value:Jn()});this.uuid=_t.generateUUID();this.name="";this.type="Geometry";this.vertices=[];this.colors=[];this.faces=[];this.faceVertexUvs=[[]];this.morphTargets=[];this.morphNormals=[];this.skinWeights=[];this.skinIndices=[];this.lineDistances=[];this.boundingBox=null;this.boundingSphere=null;this.elementsNeedUpdate=false;this.verticesNeedUpdate=false;this.uvsNeedUpdate=false;this.normalsNeedUpdate=false;this.colorsNeedUpdate=false;this.lineDistancesNeedUpdate=false;this.groupsNeedUpdate=false}Object.assign(Qn.prototype,t.prototype,{isGeometry:true,applyMatrix:function(e){var t=(new Fn).getNormalMatrix(e);for(var i=0,r=this.vertices.length;i<r;i++){var n=this.vertices[i];n.applyMatrix4(e)}for(var i=0,r=this.faces.length;i<r;i++){var a=this.faces[i];a.normal.applyMatrix3(t).normalize();for(var s=0,o=a.vertexNormals.length;s<o;s++){a.vertexNormals[s].applyMatrix3(t).normalize()}}if(this.boundingBox!==null){this.computeBoundingBox()}if(this.boundingSphere!==null){this.computeBoundingSphere()}this.verticesNeedUpdate=true;this.normalsNeedUpdate=true;return this},rotateX:function(){var e=new Pt;return function t(i){e.makeRotationX(i);this.applyMatrix(e);return this}}(),rotateY:function(){var e=new Pt;return function t(i){e.makeRotationY(i);this.applyMatrix(e);return this}}(),rotateZ:function(){var e=new Pt;return function t(i){e.makeRotationZ(i);this.applyMatrix(e);return this}}(),translate:function(){var e=new Pt;return function t(i,r,n){e.makeTranslation(i,r,n);this.applyMatrix(e);return this}}(),scale:function(){var e=new Pt;return function t(i,r,n){e.makeScale(i,r,n);this.applyMatrix(e);return this}}(),lookAt:function(){var e=new Wn;return function t(i){e.lookAt(i);e.updateMatrix();this.applyMatrix(e.matrix)}}(),fromBufferGeometry:function(e){var t=this;var i=e.index!==null?e.index.array:undefined;var r=e.attributes;var n=r.position.array;var a=r.normal!==undefined?r.normal.array:undefined;var s=r.color!==undefined?r.color.array:undefined;var o=r.uv!==undefined?r.uv.array:undefined;var l=r.uv2!==undefined?r.uv2.array:undefined;if(l!==undefined)this.faceVertexUvs[1]=[];var u=[];var h=[];var c=[];for(var f=0,d=0;f<n.length;f+=3,d+=2){t.vertices.push(new At(n[f],n[f+1],n[f+2]));if(a!==undefined){u.push(new At(a[f],a[f+1],a[f+2]))}if(s!==undefined){t.colors.push(new _i(s[f],s[f+1],s[f+2]))}if(o!==undefined){h.push(new bt(o[d],o[d+1]))}if(l!==undefined){c.push(new bt(l[d],l[d+1]))}}function p(e,i,r,n){var f=a!==undefined?[u[e].clone(),u[i].clone(),u[r].clone()]:[];var d=s!==undefined?[t.colors[e].clone(),t.colors[i].clone(),t.colors[r].clone()]:[];var p=new $n(e,i,r,f,d,n);t.faces.push(p);if(o!==undefined){t.faceVertexUvs[0].push([h[e].clone(),h[i].clone(),h[r].clone()])}if(l!==undefined){t.faceVertexUvs[1].push([c[e].clone(),c[i].clone(),c[r].clone()])}}var m=e.groups;if(m.length>0){for(var f=0;f<m.length;f++){var v=m[f];var g=v.start;var y=v.count;for(var d=g,_=g+y;d<_;d+=3){if(i!==undefined){p(i[d],i[d+1],i[d+2],v.materialIndex)}else{p(d,d+1,d+2,v.materialIndex)}}}}else{if(i!==undefined){for(var f=0;f<i.length;f+=3){p(i[f],i[f+1],i[f+2])}}else{for(var f=0;f<n.length/3;f+=3){p(f,f+1,f+2)}}}this.computeFaceNormals();if(e.boundingBox!==null){this.boundingBox=e.boundingBox.clone()}if(e.boundingSphere!==null){this.boundingSphere=e.boundingSphere.clone()}return this},center:function(){this.computeBoundingBox();var e=this.boundingBox.getCenter().negate();this.translate(e.x,e.y,e.z);return e},normalize:function(){this.computeBoundingSphere();var e=this.boundingSphere.center;var t=this.boundingSphere.radius;var i=t===0?1:1/t;var r=new Pt;r.set(i,0,0,-i*e.x,0,i,0,-i*e.y,0,0,i,-i*e.z,0,0,0,1);this.applyMatrix(r);return this},computeFaceNormals:function(){var e=new At,t=new At;for(var i=0,r=this.faces.length;i<r;i++){var n=this.faces[i];var a=this.vertices[n.a];var s=this.vertices[n.b];var o=this.vertices[n.c];e.subVectors(o,s);t.subVectors(a,s);e.cross(t);e.normalize();n.normal.copy(e)}},computeVertexNormals:function(e){if(e===undefined)e=true;var t,i,r,n,a,s;s=new Array(this.vertices.length);for(t=0,i=this.vertices.length;t<i;t++){s[t]=new At}if(e){var o,l,u;var h=new At,c=new At;for(r=0,n=this.faces.length;r<n;r++){a=this.faces[r];o=this.vertices[a.a];l=this.vertices[a.b];u=this.vertices[a.c];h.subVectors(u,l);c.subVectors(o,l);h.cross(c);s[a.a].add(h);s[a.b].add(h);s[a.c].add(h)}}else{this.computeFaceNormals();for(r=0,n=this.faces.length;r<n;r++){a=this.faces[r];s[a.a].add(a.normal);s[a.b].add(a.normal);s[a.c].add(a.normal)}}for(t=0,i=this.vertices.length;t<i;t++){s[t].normalize()}for(r=0,n=this.faces.length;r<n;r++){a=this.faces[r];var f=a.vertexNormals;if(f.length===3){f[0].copy(s[a.a]);f[1].copy(s[a.b]);f[2].copy(s[a.c])}else{f[0]=s[a.a].clone();f[1]=s[a.b].clone();f[2]=s[a.c].clone()}}if(this.faces.length>0){this.normalsNeedUpdate=true}},computeFlatVertexNormals:function(){var e,t,i;this.computeFaceNormals();for(e=0,t=this.faces.length;e<t;e++){i=this.faces[e];var r=i.vertexNormals;if(r.length===3){r[0].copy(i.normal);r[1].copy(i.normal);r[2].copy(i.normal)}else{r[0]=i.normal.clone();r[1]=i.normal.clone();r[2]=i.normal.clone()}}if(this.faces.length>0){this.normalsNeedUpdate=true}},computeMorphNormals:function(){var e,t,i,r,n;for(i=0,r=this.faces.length;i<r;i++){n=this.faces[i];if(!n.__originalFaceNormal){n.__originalFaceNormal=n.normal.clone()}else{n.__originalFaceNormal.copy(n.normal)}if(!n.__originalVertexNormals)n.__originalVertexNormals=[];for(e=0,t=n.vertexNormals.length;e<t;e++){if(!n.__originalVertexNormals[e]){n.__originalVertexNormals[e]=n.vertexNormals[e].clone()}else{n.__originalVertexNormals[e].copy(n.vertexNormals[e])}}}var a=new Qn;a.faces=this.faces;for(e=0,t=this.morphTargets.length;e<t;e++){if(!this.morphNormals[e]){this.morphNormals[e]={};this.morphNormals[e].faceNormals=[];this.morphNormals[e].vertexNormals=[];var s=this.morphNormals[e].faceNormals;var o=this.morphNormals[e].vertexNormals;var l,u;for(i=0,r=this.faces.length;i<r;i++){l=new At;u={a:new At,b:new At,c:new At};s.push(l);o.push(u)}}var h=this.morphNormals[e];a.vertices=this.morphTargets[e].vertices;a.computeFaceNormals();a.computeVertexNormals();var l,u;for(i=0,r=this.faces.length;i<r;i++){n=this.faces[i];l=h.faceNormals[i];u=h.vertexNormals[i];l.copy(n.normal);u.a.copy(n.vertexNormals[0]);u.b.copy(n.vertexNormals[1]);u.c.copy(n.vertexNormals[2])}}for(i=0,r=this.faces.length;i<r;i++){n=this.faces[i];n.normal=n.__originalFaceNormal;n.vertexNormals=n.__originalVertexNormals}},computeLineDistances:function(){var e=0;var t=this.vertices;for(var i=0,r=t.length;i<r;i++){if(i>0){e+=t[i].distanceTo(t[i-1])}this.lineDistances[i]=e}},computeBoundingBox:function(){if(this.boundingBox===null){this.boundingBox=new kn}this.boundingBox.setFromPoints(this.vertices)},computeBoundingSphere:function(){if(this.boundingSphere===null){this.boundingSphere=new Un}this.boundingSphere.setFromPoints(this.vertices)},merge:function(e,t,i){if(!(e&&e.isGeometry)){console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",e);return}var r,n=this.vertices.length,a=this.vertices,s=e.vertices,o=this.faces,l=e.faces,u=this.faceVertexUvs[0],h=e.faceVertexUvs[0],c=this.colors,f=e.colors;if(i===undefined)i=0;if(t!==undefined){r=(new Fn).getNormalMatrix(t)}for(var d=0,p=s.length;d<p;d++){var m=s[d];var v=m.clone();if(t!==undefined)v.applyMatrix4(t);a.push(v)}for(var d=0,p=f.length;d<p;d++){c.push(f[d].clone())}for(d=0,p=l.length;d<p;d++){var g=l[d],y,_,b,x=g.vertexNormals,w=g.vertexColors;y=new $n(g.a+n,g.b+n,g.c+n);y.normal.copy(g.normal);if(r!==undefined){y.normal.applyMatrix3(r).normalize()}for(var T=0,M=x.length;T<M;T++){_=x[T].clone();if(r!==undefined){_.applyMatrix3(r).normalize()}y.vertexNormals.push(_)}y.color.copy(g.color);for(var T=0,M=w.length;T<M;T++){b=w[T];y.vertexColors.push(b.clone())}y.materialIndex=g.materialIndex+i;o.push(y)}for(d=0,p=h.length;d<p;d++){var E=h[d],S=[];if(E===undefined){continue}for(var T=0,M=E.length;T<M;T++){S.push(E[T].clone())}u.push(S)}},mergeMesh:function(e){if(!(e&&e.isMesh)){console.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.",e);return}e.matrixAutoUpdate&&e.updateMatrix();this.merge(e.geometry,e.matrix)},mergeVertices:function(){var e={};var t=[],i=[];var r,n;var a=4;var s=Math.pow(10,a);var o,l,u;var h,c,f;for(o=0,l=this.vertices.length;o<l;o++){r=this.vertices[o];n=Math.round(r.x*s)+"_"+Math.round(r.y*s)+"_"+Math.round(r.z*s);if(e[n]===undefined){e[n]=o;t.push(this.vertices[o]);i[o]=t.length-1}else{i[o]=i[e[n]]}}var d=[];for(o=0,l=this.faces.length;o<l;o++){u=this.faces[o];u.a=i[u.a];u.b=i[u.b];u.c=i[u.c];h=[u.a,u.b,u.c];for(var p=0;p<3;p++){if(h[p]===h[(p+1)%3]){d.push(o);break}}}for(o=d.length-1;o>=0;o--){var m=d[o];this.faces.splice(m,1);for(c=0,f=this.faceVertexUvs.length;c<f;c++){this.faceVertexUvs[c].splice(m,1)}}var v=this.vertices.length-t.length;this.vertices=t;return v},sortFacesByMaterialIndex:function(){var e=this.faces;var t=e.length;for(var i=0;i<t;i++){e[i]._id=i}function r(e,t){return e.materialIndex-t.materialIndex}e.sort(r);var n=this.faceVertexUvs[0];var a=this.faceVertexUvs[1];var s,o;if(n&&n.length===t)s=[];if(a&&a.length===t)o=[];for(var i=0;i<t;i++){var l=e[i]._id;if(s)s.push(n[l]);if(o)o.push(a[l])}if(s)this.faceVertexUvs[0]=s;if(o)this.faceVertexUvs[1]=o},toJSON:function(){var e={metadata:{version:4.5,type:"Geometry",generator:"Geometry.toJSON"}};e.uuid=this.uuid;e.type=this.type;if(this.name!=="")e.name=this.name;if(this.parameters!==undefined){var t=this.parameters;for(var i in t){if(t[i]!==undefined)e[i]=t[i]}return e}var r=[];for(var n=0;n<this.vertices.length;n++){var a=this.vertices[n];r.push(a.x,a.y,a.z)}var s=[];var o=[];var l={};var u=[];var h={};var c=[];var f={};for(var n=0;n<this.faces.length;n++){var d=this.faces[n];var p=true;var m=false;var v=this.faceVertexUvs[0][n]!==undefined;var g=d.normal.length()>0;var y=d.vertexNormals.length>0;var _=d.color.r!==1||d.color.g!==1||d.color.b!==1;var b=d.vertexColors.length>0;var x=0;x=E(x,0,0);x=E(x,1,p);x=E(x,2,m);x=E(x,3,v);x=E(x,4,g);x=E(x,5,y);x=E(x,6,_);x=E(x,7,b);s.push(x);s.push(d.a,d.b,d.c);s.push(d.materialIndex);if(v){var w=this.faceVertexUvs[0][n];s.push(P(w[0]),P(w[1]),P(w[2]))}if(g){s.push(S(d.normal))}if(y){var T=d.vertexNormals;s.push(S(T[0]),S(T[1]),S(T[2]))}if(_){s.push(A(d.color))}if(b){var M=d.vertexColors;s.push(A(M[0]),A(M[1]),A(M[2]))}}function E(e,t,i){return i?e|1<<t:e&~(1<<t)}function S(e){var t=e.x.toString()+e.y.toString()+e.z.toString();if(l[t]!==undefined){return l[t]}l[t]=o.length/3;o.push(e.x,e.y,e.z);return l[t]}function A(e){var t=e.r.toString()+e.g.toString()+e.b.toString();if(h[t]!==undefined){return h[t]}h[t]=u.length;u.push(e.getHex());return h[t]}function P(e){var t=e.x.toString()+e.y.toString();if(f[t]!==undefined){return f[t]}f[t]=c.length/2;c.push(e.x,e.y);return f[t]}e.data={};e.data.vertices=r;e.data.normals=o;if(u.length>0)e.data.colors=u;if(c.length>0)e.data.uvs=[c];e.data.faces=s;return e},clone:function(){return(new Qn).copy(this)},copy:function(e){var t,i,r,n,a,s;this.vertices=[];this.colors=[];this.faces=[];this.faceVertexUvs=[[]];this.morphTargets=[];this.morphNormals=[];this.skinWeights=[];this.skinIndices=[];this.lineDistances=[];this.boundingBox=null;this.boundingSphere=null;this.name=e.name;var o=e.vertices;for(t=0,i=o.length;t<i;t++){this.vertices.push(o[t].clone())}var l=e.colors;for(t=0,i=l.length;t<i;t++){this.colors.push(l[t].clone())}var u=e.faces;for(t=0,i=u.length;t<i;t++){this.faces.push(u[t].clone())}for(t=0,i=e.faceVertexUvs.length;t<i;t++){var h=e.faceVertexUvs[t];if(this.faceVertexUvs[t]===undefined){this.faceVertexUvs[t]=[]}for(r=0,n=h.length;r<n;r++){var c=h[r],f=[];for(a=0,s=c.length;a<s;a++){var d=c[a];f.push(d.clone())}this.faceVertexUvs[t].push(f)}}var p=e.morphTargets;for(t=0,i=p.length;t<i;t++){var m={};m.name=p[t].name;if(p[t].vertices!==undefined){m.vertices=[];for(r=0,n=p[t].vertices.length;r<n;r++){m.vertices.push(p[t].vertices[r].clone())}}if(p[t].normals!==undefined){m.normals=[];for(r=0,n=p[t].normals.length;r<n;r++){m.normals.push(p[t].normals[r].clone())}}this.morphTargets.push(m)}var v=e.morphNormals;for(t=0,i=v.length;t<i;t++){var g={};if(v[t].vertexNormals!==undefined){g.vertexNormals=[];for(r=0,n=v[t].vertexNormals.length;r<n;r++){var y=v[t].vertexNormals[r];var _={};_.a=y.a.clone();_.b=y.b.clone();_.c=y.c.clone();g.vertexNormals.push(_)}}if(v[t].faceNormals!==undefined){g.faceNormals=[];for(r=0,n=v[t].faceNormals.length;r<n;r++){g.faceNormals.push(v[t].faceNormals[r].clone())}}this.morphNormals.push(g)}var b=e.skinWeights;for(t=0,i=b.length;t<i;t++){this.skinWeights.push(b[t].clone())}var x=e.skinIndices;for(t=0,i=x.length;t<i;t++){this.skinIndices.push(x[t].clone())}var w=e.lineDistances;for(t=0,i=w.length;t<i;t++){this.lineDistances.push(w[t])}var T=e.boundingBox;if(T!==null){this.boundingBox=T.clone()}var M=e.boundingSphere;if(M!==null){this.boundingSphere=M.clone()}this.elementsNeedUpdate=e.elementsNeedUpdate;this.verticesNeedUpdate=e.verticesNeedUpdate;this.uvsNeedUpdate=e.uvsNeedUpdate;this.normalsNeedUpdate=e.normalsNeedUpdate;this.colorsNeedUpdate=e.colorsNeedUpdate;this.lineDistancesNeedUpdate=e.lineDistancesNeedUpdate;this.groupsNeedUpdate=e.groupsNeedUpdate;return this},dispose:function(){this.dispatchEvent({type:"dispose"})}});function Kn(e,t,i){if(Array.isArray(e)){throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.")}this.uuid=_t.generateUUID();this.name="";this.array=e;this.itemSize=t;this.count=e!==undefined?e.length/t:0;this.normalized=i===true;this.dynamic=false;this.updateRange={offset:0,count:-1};this.onUploadCallback=function(){};this.version=0}Object.defineProperty(Kn.prototype,"needsUpdate",{set:function(e){if(e===true)this.version++}});Object.assign(Kn.prototype,{isBufferAttribute:true,setArray:function(e){if(Array.isArray(e)){throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.")}this.count=e!==undefined?e.length/this.itemSize:0;this.array=e},setDynamic:function(e){this.dynamic=e;return this},copy:function(e){this.array=new e.array.constructor(e.array);this.itemSize=e.itemSize;this.count=e.count;this.normalized=e.normalized;this.dynamic=e.dynamic;return this},copyAt:function(e,t,i){e*=this.itemSize;i*=t.itemSize;for(var r=0,n=this.itemSize;r<n;r++){this.array[e+r]=t.array[i+r]}return this},copyArray:function(e){this.array.set(e);return this},copyColorsArray:function(e){var t=this.array,i=0;for(var r=0,n=e.length;r<n;r++){var a=e[r];if(a===undefined){console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",r);a=new _i}t[i++]=a.r;t[i++]=a.g;t[i++]=a.b}return this},copyIndicesArray:function(e){var t=this.array,i=0;for(var r=0,n=e.length;r<n;r++){var a=e[r];t[i++]=a.a;t[i++]=a.b;t[i++]=a.c}return this},copyVector2sArray:function(e){var t=this.array,i=0;for(var r=0,n=e.length;r<n;r++){var a=e[r];if(a===undefined){console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",r);a=new bt}t[i++]=a.x;t[i++]=a.y}return this},copyVector3sArray:function(e){var t=this.array,i=0;for(var r=0,n=e.length;r<n;r++){var a=e[r];if(a===undefined){console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",r);a=new At}t[i++]=a.x;t[i++]=a.y;t[i++]=a.z}return this},copyVector4sArray:function(e){var t=this.array,i=0;for(var r=0,n=e.length;r<n;r++){var a=e[r];if(a===undefined){console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",r);a=new Tt}t[i++]=a.x;t[i++]=a.y;t[i++]=a.z;t[i++]=a.w}return this},set:function(e,t){if(t===undefined)t=0;this.array.set(e,t);return this},getX:function(e){return this.array[e*this.itemSize]},setX:function(e,t){this.array[e*this.itemSize]=t;return this},getY:function(e){return this.array[e*this.itemSize+1]},setY:function(e,t){this.array[e*this.itemSize+1]=t;return this},getZ:function(e){return this.array[e*this.itemSize+2]},setZ:function(e,t){this.array[e*this.itemSize+2]=t;return this},getW:function(e){return this.array[e*this.itemSize+3]},setW:function(e,t){this.array[e*this.itemSize+3]=t;return this},setXY:function(e,t,i){e*=this.itemSize;this.array[e+0]=t;this.array[e+1]=i;return this},setXYZ:function(e,t,i,r){e*=this.itemSize;this.array[e+0]=t;this.array[e+1]=i;this.array[e+2]=r;return this},setXYZW:function(e,t,i,r,n){e*=this.itemSize;this.array[e+0]=t;this.array[e+1]=i;this.array[e+2]=r;this.array[e+3]=n;return this},onUpload:function(e){this.onUploadCallback=e;return this},clone:function(){return new this.constructor(this.array,this.itemSize).copy(this)}});function ea(e,t){Kn.call(this,new Int8Array(e),t)}ea.prototype=Object.create(Kn.prototype);ea.prototype.constructor=ea;function ta(e,t){Kn.call(this,new Uint8Array(e),t)}ta.prototype=Object.create(Kn.prototype);ta.prototype.constructor=ta;function ia(e,t){Kn.call(this,new Uint8ClampedArray(e),t)}ia.prototype=Object.create(Kn.prototype);ia.prototype.constructor=ia;function ra(e,t){Kn.call(this,new Int16Array(e),t)}ra.prototype=Object.create(Kn.prototype);ra.prototype.constructor=ra;function na(e,t){Kn.call(this,new Uint16Array(e),t)}na.prototype=Object.create(Kn.prototype);na.prototype.constructor=na;function aa(e,t){Kn.call(this,new Int32Array(e),t)}aa.prototype=Object.create(Kn.prototype);aa.prototype.constructor=aa;function sa(e,t){Kn.call(this,new Uint32Array(e),t)}sa.prototype=Object.create(Kn.prototype);sa.prototype.constructor=sa;function oa(e,t){Kn.call(this,new Float32Array(e),t)}oa.prototype=Object.create(Kn.prototype);oa.prototype.constructor=oa;function la(e,t){Kn.call(this,new Float64Array(e),t)}la.prototype=Object.create(Kn.prototype);la.prototype.constructor=la;function ua(){this.indices=[];this.vertices=[];this.normals=[];this.colors=[];this.uvs=[];this.uvs2=[];this.groups=[];this.morphTargets={};this.skinWeights=[];this.skinIndices=[];this.boundingBox=null;this.boundingSphere=null;this.verticesNeedUpdate=false;this.normalsNeedUpdate=false;this.colorsNeedUpdate=false;this.uvsNeedUpdate=false;this.groupsNeedUpdate=false}Object.assign(ua.prototype,{computeGroups:function(e){var t;var i=[];var r=undefined;var n=e.faces;for(var a=0;a<n.length;a++){var s=n[a];if(s.materialIndex!==r){r=s.materialIndex;if(t!==undefined){t.count=a*3-t.start;i.push(t)}t={start:a*3,materialIndex:r}}}if(t!==undefined){t.count=a*3-t.start;i.push(t)}this.groups=i},fromGeometry:function(e){var t=e.faces;var i=e.vertices;var r=e.faceVertexUvs;var n=r[0]&&r[0].length>0;var a=r[1]&&r[1].length>0;var s=e.morphTargets;var o=s.length;var l;if(o>0){l=[];for(var u=0;u<o;u++){l[u]=[]}this.morphTargets.position=l}var h=e.morphNormals;var c=h.length;var f;if(c>0){f=[];for(var u=0;u<c;u++){f[u]=[]}this.morphTargets.normal=f}var d=e.skinIndices;var p=e.skinWeights;var m=d.length===i.length;var v=p.length===i.length;for(var u=0;u<t.length;u++){var g=t[u];this.vertices.push(i[g.a],i[g.b],i[g.c]);var y=g.vertexNormals;if(y.length===3){this.normals.push(y[0],y[1],y[2])}else{var _=g.normal;this.normals.push(_,_,_)}var b=g.vertexColors;if(b.length===3){this.colors.push(b[0],b[1],b[2])}else{var x=g.color;this.colors.push(x,x,x)}if(n===true){var w=r[0][u];if(w!==undefined){this.uvs.push(w[0],w[1],w[2])}else{console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ",u);this.uvs.push(new bt,new bt,new bt)}}
if(a===true){var w=r[1][u];if(w!==undefined){this.uvs2.push(w[0],w[1],w[2])}else{console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ",u);this.uvs2.push(new bt,new bt,new bt)}}for(var T=0;T<o;T++){var M=s[T].vertices;l[T].push(M[g.a],M[g.b],M[g.c])}for(var T=0;T<c;T++){var E=h[T].vertexNormals[u];f[T].push(E.a,E.b,E.c)}if(m){this.skinIndices.push(d[g.a],d[g.b],d[g.c])}if(v){this.skinWeights.push(p[g.a],p[g.b],p[g.c])}}this.computeGroups(e);this.verticesNeedUpdate=e.verticesNeedUpdate;this.normalsNeedUpdate=e.normalsNeedUpdate;this.colorsNeedUpdate=e.colorsNeedUpdate;this.uvsNeedUpdate=e.uvsNeedUpdate;this.groupsNeedUpdate=e.groupsNeedUpdate;return this}});function ha(e){if(e.length===0)return-Infinity;var t=e[0];for(var i=1,r=e.length;i<r;++i){if(e[i]>t)t=e[i]}return t}function ca(){Object.defineProperty(this,"id",{value:Jn()});this.uuid=_t.generateUUID();this.name="";this.type="BufferGeometry";this.index=null;this.attributes={};this.morphAttributes={};this.groups=[];this.boundingBox=null;this.boundingSphere=null;this.drawRange={start:0,count:Infinity}}ca.MaxIndex=65535;Object.assign(ca.prototype,t.prototype,{isBufferGeometry:true,getIndex:function(){return this.index},setIndex:function(e){if(Array.isArray(e)){this.index=new(ha(e)>65535?sa:na)(e,1)}else{this.index=e}},addAttribute:function(e,t){if(!(t&&t.isBufferAttribute)&&!(t&&t.isInterleavedBufferAttribute)){console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute ).");this.addAttribute(e,new Kn(arguments[1],arguments[2]));return}if(e==="index"){console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute.");this.setIndex(t);return}this.attributes[e]=t;return this},getAttribute:function(e){return this.attributes[e]},removeAttribute:function(e){delete this.attributes[e];return this},addGroup:function(e,t,i){this.groups.push({start:e,count:t,materialIndex:i!==undefined?i:0})},clearGroups:function(){this.groups=[]},setDrawRange:function(e,t){this.drawRange.start=e;this.drawRange.count=t},applyMatrix:function(e){var t=this.attributes.position;if(t!==undefined){e.applyToBufferAttribute(t);t.needsUpdate=true}var i=this.attributes.normal;if(i!==undefined){var r=(new Fn).getNormalMatrix(e);r.applyToBufferAttribute(i);i.needsUpdate=true}if(this.boundingBox!==null){this.computeBoundingBox()}if(this.boundingSphere!==null){this.computeBoundingSphere()}return this},rotateX:function(){var e=new Pt;return function t(i){e.makeRotationX(i);this.applyMatrix(e);return this}}(),rotateY:function(){var e=new Pt;return function t(i){e.makeRotationY(i);this.applyMatrix(e);return this}}(),rotateZ:function(){var e=new Pt;return function t(i){e.makeRotationZ(i);this.applyMatrix(e);return this}}(),translate:function(){var e=new Pt;return function t(i,r,n){e.makeTranslation(i,r,n);this.applyMatrix(e);return this}}(),scale:function(){var e=new Pt;return function t(i,r,n){e.makeScale(i,r,n);this.applyMatrix(e);return this}}(),lookAt:function(){var e=new Wn;return function t(i){e.lookAt(i);e.updateMatrix();this.applyMatrix(e.matrix)}}(),center:function(){this.computeBoundingBox();var e=this.boundingBox.getCenter().negate();this.translate(e.x,e.y,e.z);return e},setFromObject:function(e){var t=e.geometry;if(e.isPoints||e.isLine){var i=new oa(t.vertices.length*3,3);var r=new oa(t.colors.length*3,3);this.addAttribute("position",i.copyVector3sArray(t.vertices));this.addAttribute("color",r.copyColorsArray(t.colors));if(t.lineDistances&&t.lineDistances.length===t.vertices.length){var n=new oa(t.lineDistances.length,1);this.addAttribute("lineDistance",n.copyArray(t.lineDistances))}if(t.boundingSphere!==null){this.boundingSphere=t.boundingSphere.clone()}if(t.boundingBox!==null){this.boundingBox=t.boundingBox.clone()}}else if(e.isMesh){if(t&&t.isGeometry){this.fromGeometry(t)}}return this},updateFromObject:function(e){var t=e.geometry;if(e.isMesh){var i=t.__directGeometry;if(t.elementsNeedUpdate===true){i=undefined;t.elementsNeedUpdate=false}if(i===undefined){return this.fromGeometry(t)}i.verticesNeedUpdate=t.verticesNeedUpdate;i.normalsNeedUpdate=t.normalsNeedUpdate;i.colorsNeedUpdate=t.colorsNeedUpdate;i.uvsNeedUpdate=t.uvsNeedUpdate;i.groupsNeedUpdate=t.groupsNeedUpdate;t.verticesNeedUpdate=false;t.normalsNeedUpdate=false;t.colorsNeedUpdate=false;t.uvsNeedUpdate=false;t.groupsNeedUpdate=false;t=i}var r;if(t.verticesNeedUpdate===true){r=this.attributes.position;if(r!==undefined){r.copyVector3sArray(t.vertices);r.needsUpdate=true}t.verticesNeedUpdate=false}if(t.normalsNeedUpdate===true){r=this.attributes.normal;if(r!==undefined){r.copyVector3sArray(t.normals);r.needsUpdate=true}t.normalsNeedUpdate=false}if(t.colorsNeedUpdate===true){r=this.attributes.color;if(r!==undefined){r.copyColorsArray(t.colors);r.needsUpdate=true}t.colorsNeedUpdate=false}if(t.uvsNeedUpdate){r=this.attributes.uv;if(r!==undefined){r.copyVector2sArray(t.uvs);r.needsUpdate=true}t.uvsNeedUpdate=false}if(t.lineDistancesNeedUpdate){r=this.attributes.lineDistance;if(r!==undefined){r.copyArray(t.lineDistances);r.needsUpdate=true}t.lineDistancesNeedUpdate=false}if(t.groupsNeedUpdate){t.computeGroups(e.geometry);this.groups=t.groups;t.groupsNeedUpdate=false}return this},fromGeometry:function(e){e.__directGeometry=(new ua).fromGeometry(e);return this.fromDirectGeometry(e.__directGeometry)},fromDirectGeometry:function(e){var t=new Float32Array(e.vertices.length*3);this.addAttribute("position",new Kn(t,3).copyVector3sArray(e.vertices));if(e.normals.length>0){var i=new Float32Array(e.normals.length*3);this.addAttribute("normal",new Kn(i,3).copyVector3sArray(e.normals))}if(e.colors.length>0){var r=new Float32Array(e.colors.length*3);this.addAttribute("color",new Kn(r,3).copyColorsArray(e.colors))}if(e.uvs.length>0){var n=new Float32Array(e.uvs.length*2);this.addAttribute("uv",new Kn(n,2).copyVector2sArray(e.uvs))}if(e.uvs2.length>0){var a=new Float32Array(e.uvs2.length*2);this.addAttribute("uv2",new Kn(a,2).copyVector2sArray(e.uvs2))}if(e.indices.length>0){var s=ha(e.indices)>65535?Uint32Array:Uint16Array;var o=new s(e.indices.length*3);this.setIndex(new Kn(o,1).copyIndicesArray(e.indices))}this.groups=e.groups;for(var l in e.morphTargets){var u=[];var h=e.morphTargets[l];for(var c=0,f=h.length;c<f;c++){var d=h[c];var p=new oa(d.length*3,3);u.push(p.copyVector3sArray(d))}this.morphAttributes[l]=u}if(e.skinIndices.length>0){var m=new oa(e.skinIndices.length*4,4);this.addAttribute("skinIndex",m.copyVector4sArray(e.skinIndices))}if(e.skinWeights.length>0){var v=new oa(e.skinWeights.length*4,4);this.addAttribute("skinWeight",v.copyVector4sArray(e.skinWeights))}if(e.boundingSphere!==null){this.boundingSphere=e.boundingSphere.clone()}if(e.boundingBox!==null){this.boundingBox=e.boundingBox.clone()}return this},computeBoundingBox:function(){if(this.boundingBox===null){this.boundingBox=new kn}var e=this.attributes.position;if(e!==undefined){this.boundingBox.setFromBufferAttribute(e)}else{this.boundingBox.makeEmpty()}if(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z)){console.error('THREE.BufferGeometry.computeBoundingBox: Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}},computeBoundingSphere:function(){var e=new kn;var t=new At;return function i(){if(this.boundingSphere===null){this.boundingSphere=new Un}var r=this.attributes.position;if(r){var n=this.boundingSphere.center;e.setFromBufferAttribute(r);e.getCenter(n);var a=0;for(var s=0,o=r.count;s<o;s++){t.x=r.getX(s);t.y=r.getY(s);t.z=r.getZ(s);a=Math.max(a,n.distanceToSquared(t))}this.boundingSphere.radius=Math.sqrt(a);if(isNaN(this.boundingSphere.radius)){console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}}}(),computeFaceNormals:function(){},computeVertexNormals:function(){var e=this.index;var t=this.attributes;var i=this.groups;if(t.position){var r=t.position.array;if(t.normal===undefined){this.addAttribute("normal",new Kn(new Float32Array(r.length),3))}else{var n=t.normal.array;for(var a=0,s=n.length;a<s;a++){n[a]=0}}var o=t.normal.array;var l,u,h;var c=new At,f=new At,d=new At;var p=new At,m=new At;if(e){var v=e.array;if(i.length===0){this.addGroup(0,v.length)}for(var g=0,y=i.length;g<y;++g){var _=i[g];var b=_.start;var x=_.count;for(var a=b,s=b+x;a<s;a+=3){l=v[a+0]*3;u=v[a+1]*3;h=v[a+2]*3;c.fromArray(r,l);f.fromArray(r,u);d.fromArray(r,h);p.subVectors(d,f);m.subVectors(c,f);p.cross(m);o[l]+=p.x;o[l+1]+=p.y;o[l+2]+=p.z;o[u]+=p.x;o[u+1]+=p.y;o[u+2]+=p.z;o[h]+=p.x;o[h+1]+=p.y;o[h+2]+=p.z}}}else{for(var a=0,s=r.length;a<s;a+=9){c.fromArray(r,a);f.fromArray(r,a+3);d.fromArray(r,a+6);p.subVectors(d,f);m.subVectors(c,f);p.cross(m);o[a]=p.x;o[a+1]=p.y;o[a+2]=p.z;o[a+3]=p.x;o[a+4]=p.y;o[a+5]=p.z;o[a+6]=p.x;o[a+7]=p.y;o[a+8]=p.z}}this.normalizeNormals();t.normal.needsUpdate=true}},merge:function(e,t){if(!(e&&e.isBufferGeometry)){console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",e);return}if(t===undefined)t=0;var i=this.attributes;for(var r in i){if(e.attributes[r]===undefined)continue;var n=i[r];var a=n.array;var s=e.attributes[r];var o=s.array;var l=s.itemSize;for(var u=0,h=l*t;u<o.length;u++,h++){a[h]=o[u]}}return this},normalizeNormals:function(){var e=new At;return function t(){var i=this.attributes.normal;for(var r=0,n=i.count;r<n;r++){e.x=i.getX(r);e.y=i.getY(r);e.z=i.getZ(r);e.normalize();i.setXYZ(r,e.x,e.y,e.z)}}}(),toNonIndexed:function(){if(this.index===null){console.warn("THREE.BufferGeometry.toNonIndexed(): Geometry is already non-indexed.");return this}var e=new ca;var t=this.index.array;var i=this.attributes;for(var r in i){var n=i[r];var a=n.array;var s=n.itemSize;var o=new a.constructor(t.length*s);var l=0,u=0;for(var h=0,c=t.length;h<c;h++){l=t[h]*s;for(var f=0;f<s;f++){o[u++]=a[l++]}}e.addAttribute(r,new Kn(o,s))}return e},toJSON:function(){var e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};e.uuid=this.uuid;e.type=this.type;if(this.name!=="")e.name=this.name;if(this.parameters!==undefined){var t=this.parameters;for(var i in t){if(t[i]!==undefined)e[i]=t[i]}return e}e.data={attributes:{}};var r=this.index;if(r!==null){var n=Array.prototype.slice.call(r.array);e.data.index={type:r.array.constructor.name,array:n}}var a=this.attributes;for(var i in a){var s=a[i];var n=Array.prototype.slice.call(s.array);e.data.attributes[i]={itemSize:s.itemSize,type:s.array.constructor.name,array:n,normalized:s.normalized}}var o=this.groups;if(o.length>0){e.data.groups=JSON.parse(JSON.stringify(o))}var l=this.boundingSphere;if(l!==null){e.data.boundingSphere={center:l.center.toArray(),radius:l.radius}}return e},clone:function(){return(new ca).copy(this)},copy:function(e){var t,i,r;this.index=null;this.attributes={};this.morphAttributes={};this.groups=[];this.boundingBox=null;this.boundingSphere=null;this.name=e.name;var n=e.index;if(n!==null){this.setIndex(n.clone())}var a=e.attributes;for(t in a){var s=a[t];this.addAttribute(t,s.clone())}var o=e.morphAttributes;for(t in o){var l=[];var u=o[t];for(i=0,r=u.length;i<r;i++){l.push(u[i].clone())}this.morphAttributes[t]=l}var h=e.groups;for(i=0,r=h.length;i<r;i++){var c=h[i];this.addGroup(c.start,c.count,c.materialIndex)}var f=e.boundingBox;if(f!==null){this.boundingBox=f.clone()}var d=e.boundingSphere;if(d!==null){this.boundingSphere=d.clone()}this.drawRange.start=e.drawRange.start;this.drawRange.count=e.drawRange.count;return this},dispose:function(){this.dispatchEvent({type:"dispose"})}});function fa(e,t,i,r,n,a){Qn.call(this);this.type="BoxGeometry";this.parameters={width:e,height:t,depth:i,widthSegments:r,heightSegments:n,depthSegments:a};this.fromBufferGeometry(new da(e,t,i,r,n,a));this.mergeVertices()}fa.prototype=Object.create(Qn.prototype);fa.prototype.constructor=fa;function da(e,t,i,r,n,a){ca.call(this);this.type="BoxBufferGeometry";this.parameters={width:e,height:t,depth:i,widthSegments:r,heightSegments:n,depthSegments:a};var s=this;r=Math.floor(r)||1;n=Math.floor(n)||1;a=Math.floor(a)||1;var o=[];var l=[];var u=[];var h=[];var c=0;var f=0;d("z","y","x",-1,-1,i,t,e,a,n,0);d("z","y","x",1,-1,i,t,-e,a,n,1);d("x","z","y",1,1,e,i,t,r,a,2);d("x","z","y",1,-1,e,i,-t,r,a,3);d("x","y","z",1,-1,e,t,i,r,n,4);d("x","y","z",-1,-1,e,t,-i,r,n,5);this.setIndex(o);this.addAttribute("position",new oa(l,3));this.addAttribute("normal",new oa(u,3));this.addAttribute("uv",new oa(h,2));function d(e,t,i,r,n,a,d,p,m,v,g){var y=a/m;var _=d/v;var b=a/2;var x=d/2;var w=p/2;var T=m+1;var M=v+1;var E=0;var S=0;var A,P;var R=new At;for(P=0;P<M;P++){var L=P*_-x;for(A=0;A<T;A++){var C=A*y-b;R[e]=C*r;R[t]=L*n;R[i]=w;l.push(R.x,R.y,R.z);R[e]=0;R[t]=0;R[i]=p>0?1:-1;u.push(R.x,R.y,R.z);h.push(A/m);h.push(1-P/v);E+=1}}for(P=0;P<v;P++){for(A=0;A<m;A++){var O=c+A+T*P;var I=c+A+T*(P+1);var D=c+(A+1)+T*(P+1);var k=c+(A+1)+T*P;o.push(O,I,k);o.push(I,D,k);S+=6}}s.addGroup(f,S,g);f+=S;c+=E}}da.prototype=Object.create(ca.prototype);da.prototype.constructor=da;function pa(e,t,i,r){Qn.call(this);this.type="PlaneGeometry";this.parameters={width:e,height:t,widthSegments:i,heightSegments:r};this.fromBufferGeometry(new ma(e,t,i,r));this.mergeVertices()}pa.prototype=Object.create(Qn.prototype);pa.prototype.constructor=pa;function ma(e,t,i,r){ca.call(this);this.type="PlaneBufferGeometry";this.parameters={width:e,height:t,widthSegments:i,heightSegments:r};var n=e/2;var a=t/2;var s=Math.floor(i)||1;var o=Math.floor(r)||1;var l=s+1;var u=o+1;var h=e/s;var c=t/o;var f,d;var p=[];var m=[];var v=[];var g=[];for(d=0;d<u;d++){var y=d*c-a;for(f=0;f<l;f++){var _=f*h-n;m.push(_,-y,0);v.push(0,0,1);g.push(f/s);g.push(1-d/o)}}for(d=0;d<o;d++){for(f=0;f<s;f++){var b=f+l*d;var x=f+l*(d+1);var w=f+1+l*(d+1);var T=f+1+l*d;p.push(b,x,T);p.push(x,w,T)}}this.setIndex(p);this.addAttribute("position",new oa(m,3));this.addAttribute("normal",new oa(v,3));this.addAttribute("uv",new oa(g,2))}ma.prototype=Object.create(ca.prototype);ma.prototype.constructor=ma;function va(e){Cn.call(this);this.type="MeshBasicMaterial";this.color=new _i(16777215);this.map=null;this.lightMap=null;this.lightMapIntensity=1;this.aoMap=null;this.aoMapIntensity=1;this.specularMap=null;this.alphaMap=null;this.envMap=null;this.combine=J;this.reflectivity=1;this.refractionRatio=.98;this.wireframe=false;this.wireframeLinewidth=1;this.wireframeLinecap="round";this.wireframeLinejoin="round";this.skinning=false;this.morphTargets=false;this.lights=false;this.setValues(e)}va.prototype=Object.create(Cn.prototype);va.prototype.constructor=va;va.prototype.isMeshBasicMaterial=true;va.prototype.copy=function(e){Cn.prototype.copy.call(this,e);this.color.copy(e.color);this.map=e.map;this.lightMap=e.lightMap;this.lightMapIntensity=e.lightMapIntensity;this.aoMap=e.aoMap;this.aoMapIntensity=e.aoMapIntensity;this.specularMap=e.specularMap;this.alphaMap=e.alphaMap;this.envMap=e.envMap;this.combine=e.combine;this.reflectivity=e.reflectivity;this.refractionRatio=e.refractionRatio;this.wireframe=e.wireframe;this.wireframeLinewidth=e.wireframeLinewidth;this.wireframeLinecap=e.wireframeLinecap;this.wireframeLinejoin=e.wireframeLinejoin;this.skinning=e.skinning;this.morphTargets=e.morphTargets;return this};function ga(e,t){this.origin=e!==undefined?e:new At;this.direction=t!==undefined?t:new At}Object.assign(ga.prototype,{set:function(e,t){this.origin.copy(e);this.direction.copy(t);return this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){this.origin.copy(e.origin);this.direction.copy(e.direction);return this},at:function(e,t){var i=t||new At;return i.copy(this.direction).multiplyScalar(e).add(this.origin)},lookAt:function(e){this.direction.copy(e).sub(this.origin).normalize();return this},recast:function(){var e=new At;return function t(i){this.origin.copy(this.at(i,e));return this}}(),closestPointToPoint:function(e,t){var i=t||new At;i.subVectors(e,this.origin);var r=i.dot(this.direction);if(r<0){return i.copy(this.origin)}return i.copy(this.direction).multiplyScalar(r).add(this.origin)},distanceToPoint:function(e){return Math.sqrt(this.distanceSqToPoint(e))},distanceSqToPoint:function(){var e=new At;return function t(i){var r=e.subVectors(i,this.origin).dot(this.direction);if(r<0){return this.origin.distanceToSquared(i)}e.copy(this.direction).multiplyScalar(r).add(this.origin);return e.distanceToSquared(i)}}(),distanceSqToSegment:function(){var e=new At;var t=new At;var i=new At;return function r(n,a,s,o){e.copy(n).add(a).multiplyScalar(.5);t.copy(a).sub(n).normalize();i.copy(this.origin).sub(e);var l=n.distanceTo(a)*.5;var u=-this.direction.dot(t);var h=i.dot(this.direction);var c=-i.dot(t);var f=i.lengthSq();var d=Math.abs(1-u*u);var p,m,v,g;if(d>0){p=u*c-h;m=u*h-c;g=l*d;if(p>=0){if(m>=-g){if(m<=g){var y=1/d;p*=y;m*=y;v=p*(p+u*m+2*h)+m*(u*p+m+2*c)+f}else{m=l;p=Math.max(0,-(u*m+h));v=-p*p+m*(m+2*c)+f}}else{m=-l;p=Math.max(0,-(u*m+h));v=-p*p+m*(m+2*c)+f}}else{if(m<=-g){p=Math.max(0,-(-u*l+h));m=p>0?-l:Math.min(Math.max(-l,-c),l);v=-p*p+m*(m+2*c)+f}else if(m<=g){p=0;m=Math.min(Math.max(-l,-c),l);v=m*(m+2*c)+f}else{p=Math.max(0,-(u*l+h));m=p>0?l:Math.min(Math.max(-l,-c),l);v=-p*p+m*(m+2*c)+f}}}else{m=u>0?-l:l;p=Math.max(0,-(u*m+h));v=-p*p+m*(m+2*c)+f}if(s){s.copy(this.direction).multiplyScalar(p).add(this.origin)}if(o){o.copy(t).multiplyScalar(m).add(e)}return v}}(),intersectSphere:function(){var e=new At;return function t(i,r){e.subVectors(i.center,this.origin);var n=e.dot(this.direction);var a=e.dot(e)-n*n;var s=i.radius*i.radius;if(a>s)return null;var o=Math.sqrt(s-a);var l=n-o;var u=n+o;if(l<0&&u<0)return null;if(l<0)return this.at(u,r);return this.at(l,r)}}(),intersectsSphere:function(e){return this.distanceToPoint(e.center)<=e.radius},distanceToPlane:function(e){var t=e.normal.dot(this.direction);if(t===0){if(e.distanceToPoint(this.origin)===0){return 0}return null}var i=-(this.origin.dot(e.normal)+e.constant)/t;return i>=0?i:null},intersectPlane:function(e,t){var i=this.distanceToPlane(e);if(i===null){return null}return this.at(i,t)},intersectsPlane:function(e){var t=e.distanceToPoint(this.origin);if(t===0){return true}var i=e.normal.dot(this.direction);if(i*t<0){return true}return false},intersectBox:function(e,t){var i,r,n,a,s,o;var l=1/this.direction.x,u=1/this.direction.y,h=1/this.direction.z;var c=this.origin;if(l>=0){i=(e.min.x-c.x)*l;r=(e.max.x-c.x)*l}else{i=(e.max.x-c.x)*l;r=(e.min.x-c.x)*l}if(u>=0){n=(e.min.y-c.y)*u;a=(e.max.y-c.y)*u}else{n=(e.max.y-c.y)*u;a=(e.min.y-c.y)*u}if(i>a||n>r)return null;if(n>i||i!==i)i=n;if(a<r||r!==r)r=a;if(h>=0){s=(e.min.z-c.z)*h;o=(e.max.z-c.z)*h}else{s=(e.max.z-c.z)*h;o=(e.min.z-c.z)*h}if(i>o||s>r)return null;if(s>i||i!==i)i=s;if(o<r||r!==r)r=o;if(r<0)return null;return this.at(i>=0?i:r,t)},intersectsBox:function(){var e=new At;return function t(i){return this.intersectBox(i,e)!==null}}(),intersectTriangle:function(){var e=new At;var t=new At;var i=new At;var r=new At;return function n(a,s,o,l,u){t.subVectors(s,a);i.subVectors(o,a);r.crossVectors(t,i);var h=this.direction.dot(r);var c;if(h>0){if(l)return null;c=1}else if(h<0){c=-1;h=-h}else{return null}e.subVectors(this.origin,a);var f=c*this.direction.dot(i.crossVectors(e,i));if(f<0){return null}var d=c*this.direction.dot(t.cross(e));if(d<0){return null}if(f+d>h){return null}var p=-c*e.dot(r);if(p<0){return null}return this.at(p/h,u)}}(),applyMatrix4:function(e){this.origin.applyMatrix4(e);this.direction.transformDirection(e);return this},equals:function(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}});function ya(e,t){this.start=e!==undefined?e:new At;this.end=t!==undefined?t:new At}Object.assign(ya.prototype,{set:function(e,t){this.start.copy(e);this.end.copy(t);return this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){this.start.copy(e.start);this.end.copy(e.end);return this},getCenter:function(e){var t=e||new At;return t.addVectors(this.start,this.end).multiplyScalar(.5)},delta:function(e){var t=e||new At;return t.subVectors(this.end,this.start)},distanceSq:function(){return this.start.distanceToSquared(this.end)},distance:function(){return this.start.distanceTo(this.end)},at:function(e,t){var i=t||new At;return this.delta(i).multiplyScalar(e).add(this.start)},closestPointToPointParameter:function(){var e=new At;var t=new At;return function i(r,n){e.subVectors(r,this.start);t.subVectors(this.end,this.start);var a=t.dot(t);var s=t.dot(e);var o=s/a;if(n){o=_t.clamp(o,0,1)}return o}}(),closestPointToPoint:function(e,t,i){var r=this.closestPointToPointParameter(e,t);var n=i||new At;return this.delta(n).multiplyScalar(r).add(this.start)},applyMatrix4:function(e){this.start.applyMatrix4(e);this.end.applyMatrix4(e);return this},equals:function(e){return e.start.equals(this.start)&&e.end.equals(this.end)}});function _a(e,t,i){this.a=e!==undefined?e:new At;this.b=t!==undefined?t:new At;this.c=i!==undefined?i:new At}Object.assign(_a,{normal:function(){var e=new At;return function t(i,r,n,a){var s=a||new At;s.subVectors(n,r);e.subVectors(i,r);s.cross(e);var o=s.lengthSq();if(o>0){return s.multiplyScalar(1/Math.sqrt(o))}return s.set(0,0,0)}}(),barycoordFromPoint:function(){var e=new At;var t=new At;var i=new At;return function r(n,a,s,o,l){e.subVectors(o,a);t.subVectors(s,a);i.subVectors(n,a);var u=e.dot(e);var h=e.dot(t);var c=e.dot(i);var f=t.dot(t);var d=t.dot(i);var p=u*f-h*h;var m=l||new At;if(p===0){return m.set(-2,-1,-1)}var v=1/p;var g=(f*c-h*d)*v;var y=(u*d-h*c)*v;return m.set(1-g-y,y,g)}}(),containsPoint:function(){var e=new At;return function t(i,r,n,a){var s=_a.barycoordFromPoint(i,r,n,a,e);return s.x>=0&&s.y>=0&&s.x+s.y<=1}}()});Object.assign(_a.prototype,{set:function(e,t,i){this.a.copy(e);this.b.copy(t);this.c.copy(i);return this},setFromPointsAndIndices:function(e,t,i,r){this.a.copy(e[t]);this.b.copy(e[i]);this.c.copy(e[r]);return this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){this.a.copy(e.a);this.b.copy(e.b);this.c.copy(e.c);return this},area:function(){var e=new At;var t=new At;return function i(){e.subVectors(this.c,this.b);t.subVectors(this.a,this.b);return e.cross(t).length()*.5}}(),midpoint:function(e){var t=e||new At;return t.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)},normal:function(e){return _a.normal(this.a,this.b,this.c,e)},plane:function(e){var t=e||new Nn;return t.setFromCoplanarPoints(this.a,this.b,this.c)},barycoordFromPoint:function(e,t){return _a.barycoordFromPoint(e,this.a,this.b,this.c,t)},containsPoint:function(e){return _a.containsPoint(e,this.a,this.b,this.c)},closestPointToPoint:function(){var e=new Nn;var t=[new ya,new ya,new ya];var i=new At;var r=new At;return function n(a,s){var o=s||new At;var l=Infinity;e.setFromCoplanarPoints(this.a,this.b,this.c);e.projectPoint(a,i);if(this.containsPoint(i)===true){o.copy(i)}else{t[0].set(this.a,this.b);t[1].set(this.b,this.c);t[2].set(this.c,this.a);for(var u=0;u<t.length;u++){t[u].closestPointToPoint(i,true,r);var h=i.distanceToSquared(r);if(h<l){l=h;o.copy(r)}}}return o}}(),equals:function(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}});function ba(e,t){Wn.call(this);this.type="Mesh";this.geometry=e!==undefined?e:new ca;this.material=t!==undefined?t:new va({color:Math.random()*16777215});this.drawMode=st;this.updateMorphTargets()}ba.prototype=Object.assign(Object.create(Wn.prototype),{constructor:ba,isMesh:true,setDrawMode:function(e){this.drawMode=e},copy:function(e){Wn.prototype.copy.call(this,e);this.drawMode=e.drawMode;return this},updateMorphTargets:function(){var e=this.geometry;var t,i,r;if(e.isBufferGeometry){var n=e.morphAttributes;var a=Object.keys(n);if(a.length>0){var s=n[a[0]];if(s!==undefined){this.morphTargetInfluences=[];this.morphTargetDictionary={};for(t=0,i=s.length;t<i;t++){r=s[t].name||String(t);this.morphTargetInfluences.push(0);this.morphTargetDictionary[r]=t}}}}else{var o=e.morphTargets;if(o!==undefined&&o.length>0){this.morphTargetInfluences=[];this.morphTargetDictionary={};for(t=0,i=o.length;t<i;t++){r=o[t].name||String(t);this.morphTargetInfluences.push(0);this.morphTargetDictionary[r]=t}}}},raycast:function(){var e=new Pt;var t=new ga;var i=new Un;var r=new At;var n=new At;var a=new At;var s=new At;var o=new At;var l=new At;var u=new bt;var h=new bt;var c=new bt;var f=new At;var d=new At;var v=new At;function g(e,t,i,r,n,a,s){_a.barycoordFromPoint(e,t,i,r,f);n.multiplyScalar(f.x);a.multiplyScalar(f.y);s.multiplyScalar(f.z);n.add(a).add(s);return n.clone()}function y(e,t,i,r,n,a,s,o){var l;if(t.side===p){l=r.intersectTriangle(s,a,n,true,o)}else{l=r.intersectTriangle(n,a,s,t.side!==m,o)}if(l===null)return null;v.copy(o);v.applyMatrix4(e.matrixWorld);var u=i.ray.origin.distanceTo(v);if(u<i.near||u>i.far)return null;return{distance:u,point:v.clone(),object:e}}function _(e,t,i,s,o,l,f,p){r.fromBufferAttribute(s,l);n.fromBufferAttribute(s,f);a.fromBufferAttribute(s,p);var m=y(e,e.material,t,i,r,n,a,d);if(m){if(o){u.fromBufferAttribute(o,l);h.fromBufferAttribute(o,f);c.fromBufferAttribute(o,p);m.uv=g(d,r,n,a,u,h,c)}m.face=new $n(l,f,p,_a.normal(r,n,a));m.faceIndex=l}return m}return function f(p,m){var v=this.geometry;var b=this.material;var x=this.matrixWorld;if(b===undefined)return;if(v.boundingSphere===null)v.computeBoundingSphere();i.copy(v.boundingSphere);i.applyMatrix4(x);if(p.ray.intersectsSphere(i)===false)return;e.getInverse(x);t.copy(p.ray).applyMatrix4(e);if(v.boundingBox!==null){if(t.intersectsBox(v.boundingBox)===false)return}var w;if(v.isBufferGeometry){var T,M,E;var S=v.index;var A=v.attributes.position;var P=v.attributes.uv;var R,L;if(S!==null){for(R=0,L=S.count;R<L;R+=3){T=S.getX(R);M=S.getX(R+1);E=S.getX(R+2);w=_(this,p,t,A,P,T,M,E);if(w){w.faceIndex=Math.floor(R/3);m.push(w)}}}else{for(R=0,L=A.count;R<L;R+=3){T=R;M=R+1;E=R+2;w=_(this,p,t,A,P,T,M,E);if(w){w.index=T;m.push(w)}}}}else if(v.isGeometry){var C,O,I;var D=Array.isArray(b);var k=v.vertices;var U=v.faces;var F;var N=v.faceVertexUvs[0];if(N.length>0)F=N;for(var B=0,z=U.length;B<z;B++){var j=U[B];var G=D?b[j.materialIndex]:b;if(G===undefined)continue;C=k[j.a];O=k[j.b];I=k[j.c];if(G.morphTargets===true){var H=v.morphTargets;var V=this.morphTargetInfluences;r.set(0,0,0);n.set(0,0,0);a.set(0,0,0);for(var W=0,X=H.length;W<X;W++){var Y=V[W];if(Y===0)continue;var q=H[W].vertices;r.addScaledVector(s.subVectors(q[j.a],C),Y);n.addScaledVector(o.subVectors(q[j.b],O),Y);a.addScaledVector(l.subVectors(q[j.c],I),Y)}r.add(C);n.add(O);a.add(I);C=r;O=n;I=a}w=y(this,G,p,t,C,O,I,d);if(w){if(F&&F[B]){var $=F[B];u.copy($[0]);h.copy($[1]);c.copy($[2]);w.uv=g(d,C,O,I,u,h,c)}w.face=j;w.faceIndex=B;m.push(w)}}}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}});function xa(e,t,i,r){var n=new _i(0);var a=0;var s,o;var l;function u(t,r,u,c){var f=r.background;if(f===null){h(n,a)}else if(f&&f.isColor){h(f,1);c=true}if(e.autoClear||c){e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil)}if(f&&f.isCubeTexture){if(l===undefined){l=new ba(new da(1,1,1),new On({uniforms:En.cube.uniforms,vertexShader:En.cube.vertexShader,fragmentShader:En.cube.fragmentShader,side:p,depthTest:true,depthWrite:false,polygonOffset:true,fog:false}));l.geometry.removeAttribute("normal");l.geometry.removeAttribute("uv");l.onBeforeRender=function(e,t,i){var r=i.far;this.matrixWorld.makeScale(r,r,r);this.matrixWorld.copyPosition(i.matrixWorld);this.material.polygonOffsetUnits=r*10};i.update(l.geometry)}l.material.uniforms.tCube.value=f;t.push(l,l.geometry,l.material,0,null)}else if(f&&f.isTexture){if(s===undefined){s=new Yn(-1,1,1,-1,0,1);o=new ba(new ma(2,2),new va({depthTest:false,depthWrite:false,fog:false}));i.update(o.geometry)}o.material.map=f;e.renderBufferDirect(s,null,o.geometry,o.material,o,null)}}function h(e,i){t.buffers.color.setClear(e.r,e.g,e.b,i,r)}return{getClearColor:function(){return n},setClearColor:function(e,t){n.set(e);a=t!==undefined?t:1;h(n,a)},getClearAlpha:function(){return a},setClearAlpha:function(e){a=e;h(n,a)},render:u}}function wa(e,t){if(e.renderOrder!==t.renderOrder){return e.renderOrder-t.renderOrder}else if(e.program&&t.program&&e.program!==t.program){return e.program.id-t.program.id}else if(e.material.id!==t.material.id){return e.material.id-t.material.id}else if(e.z!==t.z){return e.z-t.z}else{return e.id-t.id}}function Ta(e,t){if(e.renderOrder!==t.renderOrder){return e.renderOrder-t.renderOrder}if(e.z!==t.z){return t.z-e.z}else{return e.id-t.id}}function Ma(){var e=[];var t=0;var i=[];var r=[];function n(){t=0;i.length=0;r.length=0}function a(n,a,s,o,l){var u=e[t];if(u===undefined){u={id:n.id,object:n,geometry:a,material:s,program:s.program,renderOrder:n.renderOrder,z:o,group:l};e[t]=u}else{u.id=n.id;u.object=n;u.geometry=a;u.material=s;u.program=s.program;u.renderOrder=n.renderOrder;u.z=o;u.group=l}(s.transparent===true?r:i).push(u);t++}function s(){if(i.length>1)i.sort(wa);if(r.length>1)r.sort(Ta)}return{opaque:i,transparent:r,init:n,push:a,sort:s}}function Ea(){var e={};function t(t,i){var r=t.id+","+i.id;var n=e[r];if(n===undefined){n=new Ma;e[r]=n}return n}function i(){e={}}return{get:t,dispose:i}}function Sa(e,t){return Math.abs(t[1])-Math.abs(e[1])}function Aa(e){var t={};var i=new Float32Array(8);function r(r,n,a,s){var o=r.morphTargetInfluences;var l=o.length;var u=t[n.id];if(u===undefined){u=[];for(var h=0;h<l;h++){u[h]=[h,0]}t[n.id]=u}var c=a.morphTargets&&n.morphAttributes.position;var f=a.morphNormals&&n.morphAttributes.normal;for(var h=0;h<l;h++){var d=u[h];if(d[1]!==0){if(c)n.removeAttribute("morphTarget"+h);if(f)n.removeAttribute("morphNormal"+h)}}for(var h=0;h<l;h++){var d=u[h];d[0]=h;d[1]=o[h]}u.sort(Sa);for(var h=0;h<8;h++){var d=u[h];if(d){var p=d[0];var m=d[1];if(m){if(c)n.addAttribute("morphTarget"+h,c[p]);if(f)n.addAttribute("morphNormal"+h,f[p]);i[h]=m;continue}}i[h]=0}s.getUniforms().setValue(e,"morphTargetInfluences",i)}return{update:r}}function Pa(e,t,i){var r;function n(e){r=e}var a,s;function o(e){a=e.type;s=e.bytesPerElement}function l(t,n){e.drawElements(r,n,a,t*s);i.calls++;i.vertices+=n;if(r===e.TRIANGLES)i.faces+=n/3;else if(r===e.POINTS)i.points+=n}function u(n,o,l){var u=t.get("ANGLE_instanced_arrays");if(u===null){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}u.drawElementsInstancedANGLE(r,l,a,o*s,n.maxInstancedCount);i.calls++;i.vertices+=l*n.maxInstancedCount;if(r===e.TRIANGLES)i.faces+=n.maxInstancedCount*l/3;else if(r===e.POINTS)i.points+=n.maxInstancedCount*l}this.setMode=n;this.setIndex=o;this.render=l;this.renderInstances=u}function Ra(e,t,i){var r;function n(e){r=e}function a(t,n){e.drawArrays(r,t,n);i.calls++;i.vertices+=n;if(r===e.TRIANGLES)i.faces+=n/3;else if(r===e.POINTS)i.points+=n}function s(n,a,s){var o=t.get("ANGLE_instanced_arrays");if(o===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}var l=n.attributes.position;if(l.isInterleavedBufferAttribute){s=l.data.count;o.drawArraysInstancedANGLE(r,0,s,n.maxInstancedCount)}else{o.drawArraysInstancedANGLE(r,a,s,n.maxInstancedCount)}i.calls++;i.vertices+=s*n.maxInstancedCount;if(r===e.TRIANGLES)i.faces+=n.maxInstancedCount*s/3;else if(r===e.POINTS)i.points+=n.maxInstancedCount*s}this.setMode=n;this.render=a;this.renderInstances=s}function La(e,t,i){var r={};var n={};function a(e){var s=e.target;var o=r[s.id];if(o.index!==null){t.remove(o.index)}for(var l in o.attributes){t.remove(o.attributes[l])}s.removeEventListener("dispose",a);delete r[s.id];var u=n[s.id];if(u){t.remove(u);delete n[s.id]}u=n[o.id];if(u){t.remove(u);delete n[o.id]}i.geometries--}function s(e,t){var n=r[t.id];if(n)return n;t.addEventListener("dispose",a);if(t.isBufferGeometry){n=t}else if(t.isGeometry){if(t._bufferGeometry===undefined){
t._bufferGeometry=(new ca).setFromObject(e)}n=t._bufferGeometry}r[t.id]=n;i.geometries++;return n}function o(i){var r=i.index;var n=i.attributes;if(r!==null){t.update(r,e.ELEMENT_ARRAY_BUFFER)}for(var a in n){t.update(n[a],e.ARRAY_BUFFER)}var s=i.morphAttributes;for(var a in s){var o=s[a];for(var l=0,u=o.length;l<u;l++){t.update(o[l],e.ARRAY_BUFFER)}}}function l(i){var r=n[i.id];if(r)return r;var a=[];var s=i.index;var o=i.attributes;if(s!==null){var l=s.array;for(var u=0,h=l.length;u<h;u+=3){var c=l[u+0];var f=l[u+1];var d=l[u+2];a.push(c,f,f,d,d,c)}}else{var l=o.position.array;for(var u=0,h=l.length/3-1;u<h;u+=3){var c=u+0;var f=u+1;var d=u+2;a.push(c,f,f,d,d,c)}}r=new(ha(a)>65535?sa:na)(a,1);t.update(r,e.ELEMENT_ARRAY_BUFFER);n[i.id]=r;return r}return{get:s,update:o,getWireframeAttribute:l}}function Ca(){var e={};return{get:function(t){if(e[t.id]!==undefined){return e[t.id]}var i;switch(t.type){case"DirectionalLight":i={direction:new At,color:new _i,shadow:false,shadowBias:0,shadowRadius:1,shadowMapSize:new bt};break;case"SpotLight":i={position:new At,direction:new At,color:new _i,distance:0,coneCos:0,penumbraCos:0,decay:0,shadow:false,shadowBias:0,shadowRadius:1,shadowMapSize:new bt};break;case"PointLight":i={position:new At,color:new _i,distance:0,decay:0,shadow:false,shadowBias:0,shadowRadius:1,shadowMapSize:new bt,shadowCameraNear:1,shadowCameraFar:1e3};break;case"HemisphereLight":i={direction:new At,skyColor:new _i,groundColor:new _i};break;case"RectAreaLight":i={color:new _i,position:new At,halfWidth:new At,halfHeight:new At};break}e[t.id]=i;return i}}}function Oa(){var e=new Ca;var t={hash:"",ambient:[0,0,0],directional:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],point:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]};var i=new At;var r=new Pt;var n=new Pt;function a(a,s,o){var l=0,u=0,h=0;var c=0;var f=0;var d=0;var p=0;var m=0;var v=o.matrixWorldInverse;for(var g=0,y=a.length;g<y;g++){var _=a[g];var b=_.color;var x=_.intensity;var w=_.distance;var T=_.shadow&&_.shadow.map?_.shadow.map.texture:null;if(_.isAmbientLight){l+=b.r*x;u+=b.g*x;h+=b.b*x}else if(_.isDirectionalLight){var M=e.get(_);M.color.copy(_.color).multiplyScalar(_.intensity);M.direction.setFromMatrixPosition(_.matrixWorld);i.setFromMatrixPosition(_.target.matrixWorld);M.direction.sub(i);M.direction.transformDirection(v);M.shadow=_.castShadow;if(_.castShadow){var E=_.shadow;M.shadowBias=E.bias;M.shadowRadius=E.radius;M.shadowMapSize=E.mapSize}t.directionalShadowMap[c]=T;t.directionalShadowMatrix[c]=_.shadow.matrix;t.directional[c]=M;c++}else if(_.isSpotLight){var M=e.get(_);M.position.setFromMatrixPosition(_.matrixWorld);M.position.applyMatrix4(v);M.color.copy(b).multiplyScalar(x);M.distance=w;M.direction.setFromMatrixPosition(_.matrixWorld);i.setFromMatrixPosition(_.target.matrixWorld);M.direction.sub(i);M.direction.transformDirection(v);M.coneCos=Math.cos(_.angle);M.penumbraCos=Math.cos(_.angle*(1-_.penumbra));M.decay=_.distance===0?0:_.decay;M.shadow=_.castShadow;if(_.castShadow){var E=_.shadow;M.shadowBias=E.bias;M.shadowRadius=E.radius;M.shadowMapSize=E.mapSize}t.spotShadowMap[d]=T;t.spotShadowMatrix[d]=_.shadow.matrix;t.spot[d]=M;d++}else if(_.isRectAreaLight){var M=e.get(_);M.color.copy(b).multiplyScalar(x/(_.width*_.height));M.position.setFromMatrixPosition(_.matrixWorld);M.position.applyMatrix4(v);n.identity();r.copy(_.matrixWorld);r.premultiply(v);n.extractRotation(r);M.halfWidth.set(_.width*.5,0,0);M.halfHeight.set(0,_.height*.5,0);M.halfWidth.applyMatrix4(n);M.halfHeight.applyMatrix4(n);t.rectArea[p]=M;p++}else if(_.isPointLight){var M=e.get(_);M.position.setFromMatrixPosition(_.matrixWorld);M.position.applyMatrix4(v);M.color.copy(_.color).multiplyScalar(_.intensity);M.distance=_.distance;M.decay=_.distance===0?0:_.decay;M.shadow=_.castShadow;if(_.castShadow){var E=_.shadow;M.shadowBias=E.bias;M.shadowRadius=E.radius;M.shadowMapSize=E.mapSize;M.shadowCameraNear=E.camera.near;M.shadowCameraFar=E.camera.far}t.pointShadowMap[f]=T;t.pointShadowMatrix[f]=_.shadow.matrix;t.point[f]=M;f++}else if(_.isHemisphereLight){var M=e.get(_);M.direction.setFromMatrixPosition(_.matrixWorld);M.direction.transformDirection(v);M.direction.normalize();M.skyColor.copy(_.color).multiplyScalar(x);M.groundColor.copy(_.groundColor).multiplyScalar(x);t.hemi[m]=M;m++}}t.ambient[0]=l;t.ambient[1]=u;t.ambient[2]=h;t.directional.length=c;t.spot.length=d;t.rectArea.length=p;t.point.length=f;t.hemi.length=m;t.hash=c+","+f+","+d+","+p+","+m+","+s.length}return{setup:a,state:t}}function Ia(e,t){var i={};function r(r){var n=t.frame;var a=r.geometry;var s=e.get(r,a);if(i[s.id]!==n){if(a.isGeometry){s.updateFromObject(r)}e.update(s);i[s.id]=n}return s}function n(){i={}}return{update:r,clear:n}}function Da(e){var t=e.split("\n");for(var i=0;i<t.length;i++){t[i]=i+1+": "+t[i]}return t.join("\n")}function ka(e,t,i){var r=e.createShader(t);e.shaderSource(r,i);e.compileShader(r);if(e.getShaderParameter(r,e.COMPILE_STATUS)===false){console.error("THREE.WebGLShader: Shader couldn't compile.")}if(e.getShaderInfoLog(r)!==""){console.warn("THREE.WebGLShader: gl.getShaderInfoLog()",t===e.VERTEX_SHADER?"vertex":"fragment",e.getShaderInfoLog(r),Da(i))}return r}var Ua=0;function Fa(e){switch(e){case ut:return["Linear","( value )"];case ht:return["sRGB","( value )"];case ft:return["RGBE","( value )"];case pt:return["RGBM","( value, 7.0 )"];case mt:return["RGBM","( value, 16.0 )"];case vt:return["RGBD","( value, 256.0 )"];case ct:return["Gamma","( value, float( GAMMA_FACTOR ) )"];default:throw new Error("unsupported encoding: "+e)}}function Na(e,t){var i=Fa(t);return"vec4 "+e+"( vec4 value ) { return "+i[0]+"ToLinear"+i[1]+"; }"}function Ba(e,t){var i=Fa(t);return"vec4 "+e+"( vec4 value ) { return LinearTo"+i[0]+i[1]+"; }"}function za(e,t){var i;switch(t){case te:i="Linear";break;case ie:i="Reinhard";break;case re:i="Uncharted2";break;case ne:i="OptimizedCineon";break;default:throw new Error("unsupported toneMapping: "+t)}return"vec3 "+e+"( vec3 color ) { return "+i+"ToneMapping( color ); }"}function ja(e,t,i){e=e||{};var r=[e.derivatives||t.envMapCubeUV||t.bumpMap||t.normalMap||t.flatShading?"#extension GL_OES_standard_derivatives : enable":"",(e.fragDepth||t.logarithmicDepthBuffer)&&i.get("EXT_frag_depth")?"#extension GL_EXT_frag_depth : enable":"",e.drawBuffers&&i.get("WEBGL_draw_buffers")?"#extension GL_EXT_draw_buffers : require":"",(e.shaderTextureLOD||t.envMap)&&i.get("EXT_shader_texture_lod")?"#extension GL_EXT_shader_texture_lod : enable":""];return r.filter(Va).join("\n")}function Ga(e){var t=[];for(var i in e){var r=e[i];if(r===false)continue;t.push("#define "+i+" "+r)}return t.join("\n")}function Ha(e,t,i){var r={};var n=e.getProgramParameter(t,e.ACTIVE_ATTRIBUTES);for(var a=0;a<n;a++){var s=e.getActiveAttrib(t,a);var o=s.name;r[o]=e.getAttribLocation(t,o)}return r}function Va(e){return e!==""}function Wa(e,t){return e.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights)}function Xa(e){var t=/^[ \t]*#include +<([\w\d.]+)>/gm;function i(e,t){var i=Mn[t];if(i===undefined){throw new Error("Can not resolve #include <"+t+">")}return Xa(i)}return e.replace(t,i)}function Ya(e){var t=/for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g;function i(e,t,i,r){var n="";for(var a=parseInt(t);a<parseInt(i);a++){n+=r.replace(/\[ i \]/g,"[ "+a+" ]")}return n}return e.replace(t,i)}function qa(e,t,i,r,n,a){var s=e.context;var o=r.defines;var l=n.vertexShader;var u=n.fragmentShader;var h="SHADOWMAP_TYPE_BASIC";if(a.shadowMapType===c){h="SHADOWMAP_TYPE_PCF"}else if(a.shadowMapType===f){h="SHADOWMAP_TYPE_PCF_SOFT"}var d="ENVMAP_TYPE_CUBE";var p="ENVMAP_MODE_REFLECTION";var m="ENVMAP_BLENDING_MULTIPLY";if(a.envMap){switch(r.envMap.mapping){case se:case oe:d="ENVMAP_TYPE_CUBE";break;case ce:case fe:d="ENVMAP_TYPE_CUBE_UV";break;case le:case ue:d="ENVMAP_TYPE_EQUIREC";break;case he:d="ENVMAP_TYPE_SPHERE";break}switch(r.envMap.mapping){case oe:case ue:p="ENVMAP_MODE_REFRACTION";break}switch(r.combine){case J:m="ENVMAP_BLENDING_MULTIPLY";break;case Q:m="ENVMAP_BLENDING_MIX";break;case K:m="ENVMAP_BLENDING_ADD";break}}var v=e.gammaFactor>0?e.gammaFactor:1;var g=ja(r.extensions,a,t);var y=Ga(o);var _=s.createProgram();var b,x;if(r.isRawShaderMaterial){b=[y,"\n"].filter(Va).join("\n");x=[g,y,"\n"].filter(Va).join("\n")}else{b=["precision "+a.precision+" float;","precision "+a.precision+" int;","#define SHADER_NAME "+n.name,y,a.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+v,"#define MAX_BONES "+a.maxBones,a.useFog&&a.fog?"#define USE_FOG":"",a.useFog&&a.fogExp?"#define FOG_EXP2":"",a.map?"#define USE_MAP":"",a.envMap?"#define USE_ENVMAP":"",a.envMap?"#define "+p:"",a.lightMap?"#define USE_LIGHTMAP":"",a.aoMap?"#define USE_AOMAP":"",a.emissiveMap?"#define USE_EMISSIVEMAP":"",a.bumpMap?"#define USE_BUMPMAP":"",a.normalMap?"#define USE_NORMALMAP":"",a.displacementMap&&a.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",a.specularMap?"#define USE_SPECULARMAP":"",a.roughnessMap?"#define USE_ROUGHNESSMAP":"",a.metalnessMap?"#define USE_METALNESSMAP":"",a.alphaMap?"#define USE_ALPHAMAP":"",a.vertexColors?"#define USE_COLOR":"",a.flatShading?"#define FLAT_SHADED":"",a.skinning?"#define USE_SKINNING":"",a.useVertexTexture?"#define BONE_TEXTURE":"",a.morphTargets?"#define USE_MORPHTARGETS":"",a.morphNormals&&a.flatShading===false?"#define USE_MORPHNORMALS":"",a.doubleSided?"#define DOUBLE_SIDED":"",a.flipSided?"#define FLIP_SIDED":"","#define NUM_CLIPPING_PLANES "+a.numClippingPlanes,a.shadowMapEnabled?"#define USE_SHADOWMAP":"",a.shadowMapEnabled?"#define "+h:"",a.sizeAttenuation?"#define USE_SIZEATTENUATION":"",a.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",a.logarithmicDepthBuffer&&t.get("EXT_frag_depth")?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_COLOR","\tattribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(Va).join("\n");x=[g,"precision "+a.precision+" float;","precision "+a.precision+" int;","#define SHADER_NAME "+n.name,y,a.alphaTest?"#define ALPHATEST "+a.alphaTest:"","#define GAMMA_FACTOR "+v,a.useFog&&a.fog?"#define USE_FOG":"",a.useFog&&a.fogExp?"#define FOG_EXP2":"",a.map?"#define USE_MAP":"",a.envMap?"#define USE_ENVMAP":"",a.envMap?"#define "+d:"",a.envMap?"#define "+p:"",a.envMap?"#define "+m:"",a.lightMap?"#define USE_LIGHTMAP":"",a.aoMap?"#define USE_AOMAP":"",a.emissiveMap?"#define USE_EMISSIVEMAP":"",a.bumpMap?"#define USE_BUMPMAP":"",a.normalMap?"#define USE_NORMALMAP":"",a.specularMap?"#define USE_SPECULARMAP":"",a.roughnessMap?"#define USE_ROUGHNESSMAP":"",a.metalnessMap?"#define USE_METALNESSMAP":"",a.alphaMap?"#define USE_ALPHAMAP":"",a.vertexColors?"#define USE_COLOR":"",a.gradientMap?"#define USE_GRADIENTMAP":"",a.flatShading?"#define FLAT_SHADED":"",a.doubleSided?"#define DOUBLE_SIDED":"",a.flipSided?"#define FLIP_SIDED":"","#define NUM_CLIPPING_PLANES "+a.numClippingPlanes,"#define UNION_CLIPPING_PLANES "+(a.numClippingPlanes-a.numClipIntersection),a.shadowMapEnabled?"#define USE_SHADOWMAP":"",a.shadowMapEnabled?"#define "+h:"",a.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",a.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",a.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",a.logarithmicDepthBuffer&&t.get("EXT_frag_depth")?"#define USE_LOGDEPTHBUF_EXT":"",a.envMap&&t.get("EXT_shader_texture_lod")?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;",a.toneMapping!==ee?"#define TONE_MAPPING":"",a.toneMapping!==ee?Mn["tonemapping_pars_fragment"]:"",a.toneMapping!==ee?za("toneMapping",a.toneMapping):"",a.dithering?"#define DITHERING":"",a.outputEncoding||a.mapEncoding||a.envMapEncoding||a.emissiveMapEncoding?Mn["encodings_pars_fragment"]:"",a.mapEncoding?Na("mapTexelToLinear",a.mapEncoding):"",a.envMapEncoding?Na("envMapTexelToLinear",a.envMapEncoding):"",a.emissiveMapEncoding?Na("emissiveMapTexelToLinear",a.emissiveMapEncoding):"",a.outputEncoding?Ba("linearToOutputTexel",a.outputEncoding):"",a.depthPacking?"#define DEPTH_PACKING "+r.depthPacking:"","\n"].filter(Va).join("\n")}l=Xa(l);l=Wa(l,a);u=Xa(u);u=Wa(u,a);if(!r.isShaderMaterial){l=Ya(l);u=Ya(u)}var w=b+l;var T=x+u;var M=ka(s,s.VERTEX_SHADER,w);var E=ka(s,s.FRAGMENT_SHADER,T);s.attachShader(_,M);s.attachShader(_,E);if(r.index0AttributeName!==undefined){s.bindAttribLocation(_,0,r.index0AttributeName)}else if(a.morphTargets===true){s.bindAttribLocation(_,0,"position")}s.linkProgram(_);var S=s.getProgramInfoLog(_);var A=s.getShaderInfoLog(M);var P=s.getShaderInfoLog(E);var R=true;var L=true;if(s.getProgramParameter(_,s.LINK_STATUS)===false){R=false;console.error("THREE.WebGLProgram: shader error: ",s.getError(),"gl.VALIDATE_STATUS",s.getProgramParameter(_,s.VALIDATE_STATUS),"gl.getProgramInfoLog",S,A,P)}else if(S!==""){console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()",S)}else if(A===""||P===""){L=false}if(L){this.diagnostics={runnable:R,material:r,programLog:S,vertexShader:{log:A,prefix:b},fragmentShader:{log:P,prefix:x}}}s.deleteShader(M);s.deleteShader(E);var C;this.getUniforms=function(){if(C===undefined){C=new gi(s,_,e)}return C};var O;this.getAttributes=function(){if(O===undefined){O=Ha(s,_)}return O};this.destroy=function(){s.deleteProgram(_);this.program=undefined};Object.defineProperties(this,{uniforms:{get:function(){console.warn("THREE.WebGLProgram: .uniforms is now .getUniforms().");return this.getUniforms()}},attributes:{get:function(){console.warn("THREE.WebGLProgram: .attributes is now .getAttributes().");return this.getAttributes()}}});this.id=Ua++;this.code=i;this.usedTimes=1;this.program=_;this.vertexShader=M;this.fragmentShader=E;return this}function $a(e,t,i){var r=[];var n={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"phong",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow"};var a=["precision","supportsVertexTextures","map","mapEncoding","envMap","envMapMode","envMapEncoding","lightMap","aoMap","emissiveMap","emissiveMapEncoding","bumpMap","normalMap","displacementMap","specularMap","roughnessMap","metalnessMap","gradientMap","alphaMap","combine","vertexColors","fog","useFog","fogExp","flatShading","sizeAttenuation","logarithmicDepthBuffer","skinning","maxBones","useVertexTexture","morphTargets","morphNormals","maxMorphTargets","maxMorphNormals","premultipliedAlpha","numDirLights","numPointLights","numSpotLights","numHemiLights","numRectAreaLights","shadowMapEnabled","shadowMapType","toneMapping","physicallyCorrectLights","alphaTest","doubleSided","flipSided","numClippingPlanes","numClipIntersection","depthPacking","dithering"];function s(e){var t=e.skeleton;var r=t.bones;if(i.floatVertexTextures){return 1024}else{var n=i.maxVertexUniforms;var a=Math.floor((n-20)/4);var s=Math.min(a,r.length);if(s<r.length){console.warn("THREE.WebGLRenderer: Skeleton has "+r.length+" bones. This GPU supports "+s+".");return 0}return s}}function o(e,t){var i;if(!e){i=ut}else if(e.isTexture){i=e.encoding}else if(e.isWebGLRenderTarget){console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead.");i=e.texture.encoding}if(i===ut&&t){i=ct}return i}this.getParameters=function(t,r,a,l,u,h,c){var f=n[t.type];var d=c.isSkinnedMesh?s(c):0;var v=i.precision;if(t.precision!==null){v=i.getMaxPrecision(t.precision);if(v!==t.precision){console.warn("THREE.WebGLProgram.getParameters:",t.precision,"not supported, using",v,"instead.")}}var g=e.getRenderTarget();var y={shaderID:f,precision:v,supportsVertexTextures:i.vertexTextures,outputEncoding:o(!g?null:g.texture,e.gammaOutput),map:!!t.map,mapEncoding:o(t.map,e.gammaInput),envMap:!!t.envMap,envMapMode:t.envMap&&t.envMap.mapping,envMapEncoding:o(t.envMap,e.gammaInput),envMapCubeUV:!!t.envMap&&(t.envMap.mapping===ce||t.envMap.mapping===fe),lightMap:!!t.lightMap,aoMap:!!t.aoMap,emissiveMap:!!t.emissiveMap,emissiveMapEncoding:o(t.emissiveMap,e.gammaInput),bumpMap:!!t.bumpMap,normalMap:!!t.normalMap,displacementMap:!!t.displacementMap,roughnessMap:!!t.roughnessMap,metalnessMap:!!t.metalnessMap,specularMap:!!t.specularMap,alphaMap:!!t.alphaMap,gradientMap:!!t.gradientMap,combine:t.combine,vertexColors:t.vertexColors,fog:!!l,useFog:t.fog,fogExp:l&&l.isFogExp2,flatShading:t.flatShading,sizeAttenuation:t.sizeAttenuation,logarithmicDepthBuffer:i.logarithmicDepthBuffer,skinning:t.skinning&&d>0,maxBones:d,useVertexTexture:i.floatVertexTextures,morphTargets:t.morphTargets,morphNormals:t.morphNormals,maxMorphTargets:e.maxMorphTargets,maxMorphNormals:e.maxMorphNormals,numDirLights:r.directional.length,numPointLights:r.point.length,numSpotLights:r.spot.length,numRectAreaLights:r.rectArea.length,numHemiLights:r.hemi.length,numClippingPlanes:u,numClipIntersection:h,dithering:t.dithering,shadowMapEnabled:e.shadowMap.enabled&&c.receiveShadow&&a.length>0,shadowMapType:e.shadowMap.type,toneMapping:e.toneMapping,physicallyCorrectLights:e.physicallyCorrectLights,premultipliedAlpha:t.premultipliedAlpha,alphaTest:t.alphaTest,doubleSided:t.side===m,flipSided:t.side===p,depthPacking:t.depthPacking!==undefined?t.depthPacking:false};return y};this.getProgramCode=function(t,i){var r=[];if(i.shaderID){r.push(i.shaderID)}else{r.push(t.fragmentShader);r.push(t.vertexShader)}if(t.defines!==undefined){for(var n in t.defines){r.push(n);r.push(t.defines[n])}}for(var s=0;s<a.length;s++){r.push(i[a[s]])}r.push(t.onBeforeCompile.toString());r.push(e.gammaOutput);return r.join()};this.acquireProgram=function(i,n,a,s){var o;for(var l=0,u=r.length;l<u;l++){var h=r[l];if(h.code===s){o=h;++o.usedTimes;break}}if(o===undefined){o=new qa(e,t,s,i,n,a);r.push(o)}return o};this.releaseProgram=function(e){if(--e.usedTimes===0){var t=r.indexOf(e);r[t]=r[r.length-1];r.pop();e.destroy()}};this.programs=r}function Za(e,t,i,r,n,a,s){var o=typeof WebGL2RenderingContext!=="undefined"&&e instanceof WebGL2RenderingContext;function l(e,t){if(e.width>t||e.height>t){var i=t/Math.max(e.width,e.height);var r=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");r.width=Math.floor(e.width*i);r.height=Math.floor(e.height*i);var n=r.getContext("2d");n.drawImage(e,0,0,e.width,e.height,0,0,r.width,r.height);console.warn("THREE.WebGLRenderer: image is too big ("+e.width+"x"+e.height+"). Resized to "+r.width+"x"+r.height,e);return r}return e}function u(e){return _t.isPowerOfTwo(e.width)&&_t.isPowerOfTwo(e.height)}function h(e){if(e instanceof HTMLImageElement||e instanceof HTMLCanvasElement){var t=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");t.width=_t.nearestPowerOfTwo(e.width);t.height=_t.nearestPowerOfTwo(e.height);var i=t.getContext("2d");i.drawImage(e,0,0,t.width,t.height);console.warn("THREE.WebGLRenderer: image is not power of two ("+e.width+"x"+e.height+"). Resized to "+t.width+"x"+t.height,e);return t}return e}function c(e){return e.wrapS!==pe||e.wrapT!==pe||e.minFilter!==ve&&e.minFilter!==_e}function f(e,t){return e.generateMipmaps&&t&&e.minFilter!==ve&&e.minFilter!==_e}function d(t){if(t===ve||t===ge||t===ye){return e.NEAREST}return e.LINEAR}function p(e){var t=e.target;t.removeEventListener("dispose",p);v(t);s.textures--}function m(e){var t=e.target;t.removeEventListener("dispose",m);g(t);s.textures--}function v(t){var i=r.get(t);if(t.image&&i.__image__webglTextureCube){e.deleteTexture(i.__image__webglTextureCube)}else{if(i.__webglInit===undefined)return;e.deleteTexture(i.__webglTexture)}r.remove(t)}function g(t){var i=r.get(t);var n=r.get(t.texture);if(!t)return;if(n.__webglTexture!==undefined){e.deleteTexture(n.__webglTexture)}if(t.depthTexture){t.depthTexture.dispose()}if(t.isWebGLRenderTargetCube){for(var a=0;a<6;a++){e.deleteFramebuffer(i.__webglFramebuffer[a]);if(i.__webglDepthbuffer)e.deleteRenderbuffer(i.__webglDepthbuffer[a])}}else{e.deleteFramebuffer(i.__webglFramebuffer);if(i.__webglDepthbuffer)e.deleteRenderbuffer(i.__webglDepthbuffer)}r.remove(t.texture);r.remove(t)}function y(t,n){var a=r.get(t);if(t.version>0&&a.__version!==t.version){var s=t.image;if(s===undefined){console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined",t)}else if(s.complete===false){console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete",t)}else{w(a,t,n);return}}i.activeTexture(e.TEXTURE0+n);i.bindTexture(e.TEXTURE_2D,a.__webglTexture)}function _(t,o){var h=r.get(t);if(t.image.length===6){if(t.version>0&&h.__version!==t.version){if(!h.__image__webglTextureCube){t.addEventListener("dispose",p);h.__image__webglTextureCube=e.createTexture();s.textures++}i.activeTexture(e.TEXTURE0+o);i.bindTexture(e.TEXTURE_CUBE_MAP,h.__image__webglTextureCube);e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,t.flipY);var c=t&&t.isCompressedTexture;var d=t.image[0]&&t.image[0].isDataTexture;var m=[];for(var v=0;v<6;v++){if(!c&&!d){m[v]=l(t.image[v],n.maxCubemapSize)}else{m[v]=d?t.image[v].image:t.image[v]}}var g=m[0],y=u(g),_=a.convert(t.format),b=a.convert(t.type);x(e.TEXTURE_CUBE_MAP,t,y);for(var v=0;v<6;v++){if(!c){if(d){i.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+v,0,_,m[v].width,m[v].height,0,_,b,m[v].data)}else{i.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+v,0,_,_,b,m[v])}}else{var w,T=m[v].mipmaps;for(var M=0,E=T.length;M<E;M++){w=T[M];if(t.format!==Ue&&t.format!==ke){if(i.getCompressedTextureFormats().indexOf(_)>-1){i.compressedTexImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+v,M,_,w.width,w.height,0,w.data)}else{console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()")}}else{i.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+v,M,_,w.width,w.height,0,_,b,w.data)}}}}if(f(t,y)){e.generateMipmap(e.TEXTURE_CUBE_MAP)}h.__version=t.version;if(t.onUpdate)t.onUpdate(t)}else{i.activeTexture(e.TEXTURE0+o);i.bindTexture(e.TEXTURE_CUBE_MAP,h.__image__webglTextureCube)}}}function b(t,n){i.activeTexture(e.TEXTURE0+n);i.bindTexture(e.TEXTURE_CUBE_MAP,r.get(t).__webglTexture)}function x(i,s,o){var l;if(o){e.texParameteri(i,e.TEXTURE_WRAP_S,a.convert(s.wrapS));e.texParameteri(i,e.TEXTURE_WRAP_T,a.convert(s.wrapT));e.texParameteri(i,e.TEXTURE_MAG_FILTER,a.convert(s.magFilter));e.texParameteri(i,e.TEXTURE_MIN_FILTER,a.convert(s.minFilter))}else{e.texParameteri(i,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE);e.texParameteri(i,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE);if(s.wrapS!==pe||s.wrapT!==pe){console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping.",s)}e.texParameteri(i,e.TEXTURE_MAG_FILTER,d(s.magFilter));e.texParameteri(i,e.TEXTURE_MIN_FILTER,d(s.minFilter));if(s.minFilter!==ve&&s.minFilter!==_e){console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.",s)}}l=t.get("EXT_texture_filter_anisotropic");if(l){if(s.type===Pe&&t.get("OES_texture_float_linear")===null)return;if(s.type===Re&&t.get("OES_texture_half_float_linear")===null)return;if(s.anisotropy>1||r.get(s).__currentAnisotropy){e.texParameterf(i,l.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(s.anisotropy,n.getMaxAnisotropy()));r.get(s).__currentAnisotropy=s.anisotropy}}}function w(t,r,d){if(t.__webglInit===undefined){t.__webglInit=true;r.addEventListener("dispose",p);t.__webglTexture=e.createTexture();s.textures++}i.activeTexture(e.TEXTURE0+d);i.bindTexture(e.TEXTURE_2D,t.__webglTexture);e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,r.flipY);e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,r.premultiplyAlpha);e.pixelStorei(e.UNPACK_ALIGNMENT,r.unpackAlignment);var m=l(r.image,n.maxTextureSize);if(c(r)&&u(m)===false){m=h(m)}var v=u(m),g=a.convert(r.format),y=a.convert(r.type);x(e.TEXTURE_2D,r,v);var _,b=r.mipmaps;if(r.isDepthTexture){var w=e.DEPTH_COMPONENT;if(r.type===Pe){if(!o)throw new Error("Float Depth Texture only supported in WebGL2.0");w=e.DEPTH_COMPONENT32F}else if(o){w=e.DEPTH_COMPONENT16}if(r.format===ze&&w===e.DEPTH_COMPONENT){if(r.type!==Ee&&r.type!==Ae){console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture.");r.type=Ee;y=a.convert(r.type)}}if(r.format===je){w=e.DEPTH_STENCIL;if(r.type!==Ie){console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture.");r.type=Ie;y=a.convert(r.type)}}i.texImage2D(e.TEXTURE_2D,0,w,m.width,m.height,0,g,y,null)}else if(r.isDataTexture){if(b.length>0&&v){for(var T=0,M=b.length;T<M;T++){_=b[T];i.texImage2D(e.TEXTURE_2D,T,g,_.width,_.height,0,g,y,_.data)}r.generateMipmaps=false}else{i.texImage2D(e.TEXTURE_2D,0,g,m.width,m.height,0,g,y,m.data)}}else if(r.isCompressedTexture){for(var T=0,M=b.length;T<M;T++){_=b[T];if(r.format!==Ue&&r.format!==ke){if(i.getCompressedTextureFormats().indexOf(g)>-1){i.compressedTexImage2D(e.TEXTURE_2D,T,g,_.width,_.height,0,_.data)}else{console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()")}}else{i.texImage2D(e.TEXTURE_2D,T,g,_.width,_.height,0,g,y,_.data)}}}else{if(b.length>0&&v){for(var T=0,M=b.length;T<M;T++){_=b[T];i.texImage2D(e.TEXTURE_2D,T,g,g,y,_)}r.generateMipmaps=false}else{i.texImage2D(e.TEXTURE_2D,0,g,g,y,m)}}if(f(r,v))e.generateMipmap(e.TEXTURE_2D);t.__version=r.version;if(r.onUpdate)r.onUpdate(r)}function T(t,n,s,o){var l=a.convert(n.texture.format);var u=a.convert(n.texture.type);i.texImage2D(o,0,l,n.width,n.height,0,l,u,null);e.bindFramebuffer(e.FRAMEBUFFER,t);e.framebufferTexture2D(e.FRAMEBUFFER,s,o,r.get(n.texture).__webglTexture,0);e.bindFramebuffer(e.FRAMEBUFFER,null)}function M(t,i){e.bindRenderbuffer(e.RENDERBUFFER,t);if(i.depthBuffer&&!i.stencilBuffer){e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_COMPONENT16,i.width,i.height);e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.RENDERBUFFER,t)}else if(i.depthBuffer&&i.stencilBuffer){e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_STENCIL,i.width,i.height);e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.RENDERBUFFER,t)}else{e.renderbufferStorage(e.RENDERBUFFER,e.RGBA4,i.width,i.height)}e.bindRenderbuffer(e.RENDERBUFFER,null)}function E(t,i){var n=i&&i.isWebGLRenderTargetCube;if(n)throw new Error("Depth Texture with cube render targets is not supported");e.bindFramebuffer(e.FRAMEBUFFER,t);if(!(i.depthTexture&&i.depthTexture.isDepthTexture)){throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture")}if(!r.get(i.depthTexture).__webglTexture||i.depthTexture.image.width!==i.width||i.depthTexture.image.height!==i.height){i.depthTexture.image.width=i.width;i.depthTexture.image.height=i.height;i.depthTexture.needsUpdate=true}y(i.depthTexture,0);var a=r.get(i.depthTexture).__webglTexture;if(i.depthTexture.format===ze){e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.TEXTURE_2D,a,0)}else if(i.depthTexture.format===je){e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.TEXTURE_2D,a,0)}else{throw new Error("Unknown depthTexture format")}}function S(t){var i=r.get(t);var n=t.isWebGLRenderTargetCube===true;if(t.depthTexture){if(n)throw new Error("target.depthTexture not supported in Cube render targets");E(i.__webglFramebuffer,t)}else{if(n){i.__webglDepthbuffer=[];for(var a=0;a<6;a++){e.bindFramebuffer(e.FRAMEBUFFER,i.__webglFramebuffer[a]);i.__webglDepthbuffer[a]=e.createRenderbuffer();M(i.__webglDepthbuffer[a],t)}}else{e.bindFramebuffer(e.FRAMEBUFFER,i.__webglFramebuffer);i.__webglDepthbuffer=e.createRenderbuffer();M(i.__webglDepthbuffer,t)}}e.bindFramebuffer(e.FRAMEBUFFER,null)}function A(t){var n=r.get(t);var a=r.get(t.texture);t.addEventListener("dispose",m);a.__webglTexture=e.createTexture();s.textures++;var o=t.isWebGLRenderTargetCube===true;var l=u(t);if(o){n.__webglFramebuffer=[];for(var h=0;h<6;h++){n.__webglFramebuffer[h]=e.createFramebuffer()}}else{n.__webglFramebuffer=e.createFramebuffer()}if(o){i.bindTexture(e.TEXTURE_CUBE_MAP,a.__webglTexture);x(e.TEXTURE_CUBE_MAP,t.texture,l);for(var h=0;h<6;h++){T(n.__webglFramebuffer[h],t,e.COLOR_ATTACHMENT0,e.TEXTURE_CUBE_MAP_POSITIVE_X+h)}if(f(t.texture,l))e.generateMipmap(e.TEXTURE_CUBE_MAP);i.bindTexture(e.TEXTURE_CUBE_MAP,null)}else{i.bindTexture(e.TEXTURE_2D,a.__webglTexture);x(e.TEXTURE_2D,t.texture,l);T(n.__webglFramebuffer,t,e.COLOR_ATTACHMENT0,e.TEXTURE_2D);if(f(t.texture,l))e.generateMipmap(e.TEXTURE_2D);i.bindTexture(e.TEXTURE_2D,null)}if(t.depthBuffer){S(t)}}function P(t){var n=t.texture;var a=u(t);if(f(n,a)){var s=t.isWebGLRenderTargetCube?e.TEXTURE_CUBE_MAP:e.TEXTURE_2D;var o=r.get(n).__webglTexture;i.bindTexture(s,o);e.generateMipmap(s);i.bindTexture(s,null)}}this.setTexture2D=y;this.setTextureCube=_;this.setTextureCubeDynamic=b;this.setupRenderTarget=A;this.updateRenderTargetMipmap=P}function Ja(){var e={};function t(t){var i=t.uuid;var r=e[i];if(r===undefined){r={};e[i]=r}return r}function i(t){delete e[t.uuid]}function r(){e={}}return{get:t,remove:i,clear:r}}function Qa(e,t,i){function r(){var t=false;var i=new Tt;var r=null;var n=new Tt(0,0,0,0);return{setMask:function(i){if(r!==i&&!t){e.colorMask(i,i,i,i);r=i}},setLocked:function(e){t=e},setClear:function(t,r,a,s,o){if(o===true){t*=s;r*=s;a*=s}i.set(t,r,a,s);if(n.equals(i)===false){e.clearColor(t,r,a,s);n.copy(i)}},reset:function(){t=false;r=null;n.set(-1,0,0,0)}}}function o(){var t=false;var i=null;var r=null;var n=null;return{setTest:function(t){if(t){oe(e.DEPTH_TEST)}else{le(e.DEPTH_TEST)}},setMask:function(r){if(i!==r&&!t){e.depthMask(r);i=r}},setFunc:function(t){if(r!==t){if(t){switch(t){case H:e.depthFunc(e.NEVER);break;case V:e.depthFunc(e.ALWAYS);break;case W:e.depthFunc(e.LESS);break;case X:e.depthFunc(e.LEQUAL);break;case Y:e.depthFunc(e.EQUAL);break;case q:e.depthFunc(e.GEQUAL);break;case $:e.depthFunc(e.GREATER);break;case Z:e.depthFunc(e.NOTEQUAL);break;default:e.depthFunc(e.LEQUAL)}}else{e.depthFunc(e.LEQUAL)}r=t}},setLocked:function(e){t=e},setClear:function(t){if(n!==t){e.clearDepth(t);n=t}},reset:function(){t=false;i=null;r=null;n=null}}}function l(){var t=false;var i=null;var r=null;var n=null;var a=null;var s=null;var o=null;var l=null;var u=null;return{setTest:function(t){if(t){oe(e.STENCIL_TEST)}else{le(e.STENCIL_TEST)}},setMask:function(r){if(i!==r&&!t){e.stencilMask(r);i=r}},setFunc:function(t,i,s){if(r!==t||n!==i||a!==s){e.stencilFunc(t,i,s);r=t;n=i;a=s}},setOp:function(t,i,r){if(s!==t||o!==i||l!==r){e.stencilOp(t,i,r);s=t;o=i;l=r}},setLocked:function(e){t=e},setClear:function(t){if(u!==t){e.clearStencil(t);u=t}},reset:function(){t=false;i=null;r=null;n=null;a=null;s=null;o=null;l=null;u=null}}}var u=new r;var h=new o;var c=new l;var f=e.getParameter(e.MAX_VERTEX_ATTRIBS);var d=new Uint8Array(f);var v=new Uint8Array(f);var g=new Uint8Array(f);var y={};var _=null;var b=null;var A=null;var P=null;var R=null;var L=null;var C=null;var O=null;var I=null;var D=false;var k=null
;var U=null;var F=null;var N=null;var B=null;var z=e.getParameter(e.MAX_COMBINED_TEXTURE_IMAGE_UNITS);var j=parseFloat(/^WebGL\ ([0-9])/.exec(e.getParameter(e.VERSION))[1]);var G=parseFloat(j)>=1;var J=null;var Q={};var K=new Tt;var ee=new Tt;function te(t,i,r){var n=new Uint8Array(4);var a=e.createTexture();e.bindTexture(t,a);e.texParameteri(t,e.TEXTURE_MIN_FILTER,e.NEAREST);e.texParameteri(t,e.TEXTURE_MAG_FILTER,e.NEAREST);for(var s=0;s<r;s++){e.texImage2D(i+s,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,n)}return a}var ie={};ie[e.TEXTURE_2D]=te(e.TEXTURE_2D,e.TEXTURE_2D,1);ie[e.TEXTURE_CUBE_MAP]=te(e.TEXTURE_CUBE_MAP,e.TEXTURE_CUBE_MAP_POSITIVE_X,6);u.setClear(0,0,0,1);h.setClear(1);c.setClear(0);oe(e.DEPTH_TEST);h.setFunc(X);de(false);pe(a);oe(e.CULL_FACE);oe(e.BLEND);ce(w);function re(){for(var e=0,t=d.length;e<t;e++){d[e]=0}}function ne(i){d[i]=1;if(v[i]===0){e.enableVertexAttribArray(i);v[i]=1}if(g[i]!==0){var r=t.get("ANGLE_instanced_arrays");r.vertexAttribDivisorANGLE(i,0);g[i]=0}}function ae(i,r){d[i]=1;if(v[i]===0){e.enableVertexAttribArray(i);v[i]=1}if(g[i]!==r){var n=t.get("ANGLE_instanced_arrays");n.vertexAttribDivisorANGLE(i,r);g[i]=r}}function se(){for(var t=0,i=v.length;t!==i;++t){if(v[t]!==d[t]){e.disableVertexAttribArray(t);v[t]=0}}}function oe(t){if(y[t]!==true){e.enable(t);y[t]=true}}function le(t){if(y[t]!==false){e.disable(t);y[t]=false}}function ue(){if(_===null){_=[];if(t.get("WEBGL_compressed_texture_pvrtc")||t.get("WEBGL_compressed_texture_s3tc")||t.get("WEBGL_compressed_texture_etc1")){var i=e.getParameter(e.COMPRESSED_TEXTURE_FORMATS);for(var r=0;r<i.length;r++){_.push(i[r])}}}return _}function he(t){if(b!==t){e.useProgram(t);b=t;return true}return false}function ce(t,r,n,a,s,o,l,u){if(t!==x){oe(e.BLEND)}else{le(e.BLEND)}if(t!==S){if(t!==A||u!==D){switch(t){case T:if(u){e.blendEquationSeparate(e.FUNC_ADD,e.FUNC_ADD);e.blendFuncSeparate(e.ONE,e.ONE,e.ONE,e.ONE)}else{e.blendEquation(e.FUNC_ADD);e.blendFunc(e.SRC_ALPHA,e.ONE)}break;case M:if(u){e.blendEquationSeparate(e.FUNC_ADD,e.FUNC_ADD);e.blendFuncSeparate(e.ZERO,e.ZERO,e.ONE_MINUS_SRC_COLOR,e.ONE_MINUS_SRC_ALPHA)}else{e.blendEquation(e.FUNC_ADD);e.blendFunc(e.ZERO,e.ONE_MINUS_SRC_COLOR)}break;case E:if(u){e.blendEquationSeparate(e.FUNC_ADD,e.FUNC_ADD);e.blendFuncSeparate(e.ZERO,e.SRC_COLOR,e.ZERO,e.SRC_ALPHA)}else{e.blendEquation(e.FUNC_ADD);e.blendFunc(e.ZERO,e.SRC_COLOR)}break;default:if(u){e.blendEquationSeparate(e.FUNC_ADD,e.FUNC_ADD);e.blendFuncSeparate(e.ONE,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA)}else{e.blendEquationSeparate(e.FUNC_ADD,e.FUNC_ADD);e.blendFuncSeparate(e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA)}}}P=null;R=null;L=null;C=null;O=null;I=null}else{s=s||r;o=o||n;l=l||a;if(r!==P||s!==C){e.blendEquationSeparate(i.convert(r),i.convert(s));P=r;C=s}if(n!==R||a!==L||o!==O||l!==I){e.blendFuncSeparate(i.convert(n),i.convert(a),i.convert(o),i.convert(l));R=n;L=a;O=o;I=l}}A=t;D=u}function fe(t){t.side===m?le(e.CULL_FACE):oe(e.CULL_FACE);de(t.side===p);t.transparent===true?ce(t.blending,t.blendEquation,t.blendSrc,t.blendDst,t.blendEquationAlpha,t.blendSrcAlpha,t.blendDstAlpha,t.premultipliedAlpha):ce(x);h.setFunc(t.depthFunc);h.setTest(t.depthTest);h.setMask(t.depthWrite);u.setMask(t.colorWrite);ve(t.polygonOffset,t.polygonOffsetFactor,t.polygonOffsetUnits)}function de(t){if(k!==t){if(t){e.frontFace(e.CW)}else{e.frontFace(e.CCW)}k=t}}function pe(t){if(t!==n){oe(e.CULL_FACE);if(t!==U){if(t===a){e.cullFace(e.BACK)}else if(t===s){e.cullFace(e.FRONT)}else{e.cullFace(e.FRONT_AND_BACK)}}}else{le(e.CULL_FACE)}U=t}function me(t){if(t!==F){if(G)e.lineWidth(t);F=t}}function ve(t,i,r){if(t){oe(e.POLYGON_OFFSET_FILL);if(N!==i||B!==r){e.polygonOffset(i,r);N=i;B=r}}else{le(e.POLYGON_OFFSET_FILL)}}function ge(t){if(t){oe(e.SCISSOR_TEST)}else{le(e.SCISSOR_TEST)}}function ye(t){if(t===undefined)t=e.TEXTURE0+z-1;if(J!==t){e.activeTexture(t);J=t}}function _e(t,i){if(J===null){ye()}var r=Q[J];if(r===undefined){r={type:undefined,texture:undefined};Q[J]=r}if(r.type!==t||r.texture!==i){e.bindTexture(t,i||ie[t]);r.type=t;r.texture=i}}function be(){try{e.compressedTexImage2D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}}function xe(){try{e.texImage2D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}}function we(t){if(K.equals(t)===false){e.scissor(t.x,t.y,t.z,t.w);K.copy(t)}}function Te(t){if(ee.equals(t)===false){e.viewport(t.x,t.y,t.z,t.w);ee.copy(t)}}function Me(){for(var t=0;t<v.length;t++){if(v[t]===1){e.disableVertexAttribArray(t);v[t]=0}}y={};_=null;J=null;Q={};b=null;A=null;k=null;U=null;u.reset();h.reset();c.reset()}return{buffers:{color:u,depth:h,stencil:c},initAttributes:re,enableAttribute:ne,enableAttributeAndDivisor:ae,disableUnusedAttributes:se,enable:oe,disable:le,getCompressedTextureFormats:ue,useProgram:he,setBlending:ce,setMaterial:fe,setFlipSided:de,setCullFace:pe,setLineWidth:me,setPolygonOffset:ve,setScissorTest:ge,activeTexture:ye,bindTexture:_e,compressedTexImage2D:be,texImage2D:xe,scissor:we,viewport:Te,reset:Me}}function Ka(e,t,i){var r;function n(){if(r!==undefined)return r;var i=t.get("EXT_texture_filter_anisotropic");if(i!==null){r=e.getParameter(i.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else{r=0}return r}function a(t){if(t==="highp"){if(e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.HIGH_FLOAT).precision>0&&e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.HIGH_FLOAT).precision>0){return"highp"}t="mediump"}if(t==="mediump"){if(e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.MEDIUM_FLOAT).precision>0&&e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.MEDIUM_FLOAT).precision>0){return"mediump"}}return"lowp"}var s=i.precision!==undefined?i.precision:"highp";var o=a(s);if(o!==s){console.warn("THREE.WebGLRenderer:",s,"not supported, using",o,"instead.");s=o}var l=i.logarithmicDepthBuffer===true&&!!t.get("EXT_frag_depth");var u=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS);var h=e.getParameter(e.MAX_VERTEX_TEXTURE_IMAGE_UNITS);var c=e.getParameter(e.MAX_TEXTURE_SIZE);var f=e.getParameter(e.MAX_CUBE_MAP_TEXTURE_SIZE);var d=e.getParameter(e.MAX_VERTEX_ATTRIBS);var p=e.getParameter(e.MAX_VERTEX_UNIFORM_VECTORS);var m=e.getParameter(e.MAX_VARYING_VECTORS);var v=e.getParameter(e.MAX_FRAGMENT_UNIFORM_VECTORS);var g=h>0;var y=!!t.get("OES_texture_float");var _=g&&y;return{getMaxAnisotropy:n,getMaxPrecision:a,precision:s,logarithmicDepthBuffer:l,maxTextures:u,maxVertexTextures:h,maxTextureSize:c,maxCubemapSize:f,maxAttributes:d,maxVertexUniforms:p,maxVaryings:m,maxFragmentUniforms:v,vertexTextures:g,floatFragmentTextures:y,floatVertexTextures:_}}function es(e){qn.call(this);this.cameras=e||[]}es.prototype=Object.assign(Object.create(qn.prototype),{constructor:es,isArrayCamera:true});function ts(e){var t=this;var i=null;var r=null;if("VRFrameData"in window){r=new window.VRFrameData}var n=new Pt;var a=new Pt;var s=new Pt;var o=new qn;o.bounds=new Tt(0,0,.5,1);o.layers.enable(1);var l=new qn;l.bounds=new Tt(.5,0,.5,1);l.layers.enable(2);var u=new es([o,l]);u.layers.enable(1);u.layers.enable(2);var h,c;function f(){if(i!==null&&i.isPresenting){var r=i.getEyeParameters("left");var n=r.renderWidth;var a=r.renderHeight;c=e.getPixelRatio();h=e.getSize();e.setDrawingBufferSize(n*2,a,1)}else if(t.enabled){e.setDrawingBufferSize(h.width,h.height,c)}}window.addEventListener("vrdisplaypresentchange",f,false);this.enabled=false;this.standing=false;this.getDevice=function(){return i};this.setDevice=function(e){if(e!==undefined)i=e};this.getCamera=function(e){if(i===null)return e;i.depthNear=e.near;i.depthFar=e.far;i.getFrameData(r);var t=r.pose;if(t.position!==null){e.position.fromArray(t.position)}else{e.position.set(0,0,0)}if(t.orientation!==null){e.quaternion.fromArray(t.orientation)}e.updateMatrixWorld();var h=i.stageParameters;if(this.standing&&h){a.fromArray(h.sittingToStandingTransform);s.getInverse(a);e.matrixWorld.multiply(a);e.matrixWorldInverse.multiply(s)}if(i.isPresenting===false)return e;o.near=e.near;l.near=e.near;o.far=e.far;l.far=e.far;u.matrixWorld.copy(e.matrixWorld);u.matrixWorldInverse.copy(e.matrixWorldInverse);o.matrixWorldInverse.fromArray(r.leftViewMatrix);l.matrixWorldInverse.fromArray(r.rightViewMatrix);if(this.standing&&h){o.matrixWorldInverse.multiply(s);l.matrixWorldInverse.multiply(s)}var c=e.parent;if(c!==null){n.getInverse(c.matrixWorld);o.matrixWorldInverse.multiply(n);l.matrixWorldInverse.multiply(n)}o.matrixWorld.getInverse(o.matrixWorldInverse);l.matrixWorld.getInverse(l.matrixWorldInverse);o.projectionMatrix.fromArray(r.leftProjectionMatrix);l.projectionMatrix.fromArray(r.rightProjectionMatrix);u.projectionMatrix.copy(o.projectionMatrix);var f=i.getLayers();if(f.length){var d=f[0];if(d.leftBounds!==null&&d.leftBounds.length===4){o.bounds.fromArray(d.leftBounds)}if(d.rightBounds!==null&&d.rightBounds.length===4){l.bounds.fromArray(d.rightBounds)}}return u};this.getStandingMatrix=function(){return a};this.submitFrame=function(){if(i&&i.isPresenting)i.submitFrame()};this.dispose=function(){window.removeEventListener("vrdisplaypresentchange",f)}}function is(e){var t={};return{get:function(i){if(t[i]!==undefined){return t[i]}var r;switch(i){case"WEBGL_depth_texture":r=e.getExtension("WEBGL_depth_texture")||e.getExtension("MOZ_WEBGL_depth_texture")||e.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=e.getExtension("WEBGL_compressed_texture_s3tc")||e.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;case"WEBGL_compressed_texture_etc1":r=e.getExtension("WEBGL_compressed_texture_etc1");break;default:r=e.getExtension(i)}if(r===null){console.warn("THREE.WebGLRenderer: "+i+" extension not supported.")}t[i]=r;return r}}}function rs(){var e=this,t=null,i=0,r=false,n=false,a=new Nn,s=new Fn,o={value:null,needsUpdate:false};this.uniform=o;this.numPlanes=0;this.numIntersection=0;this.init=function(e,n,a){var s=e.length!==0||n||i!==0||r;r=n;t=u(e,a,0);i=e.length;return s};this.beginShadows=function(){n=true;u(null)};this.endShadows=function(){n=false;l()};this.setState=function(e,a,s,h,c,f){if(!r||e===null||e.length===0||n&&!s){if(n){u(null)}else{l()}}else{var d=n?0:i,p=d*4,m=c.clippingState||null;o.value=m;m=u(e,h,p,f);for(var v=0;v!==p;++v){m[v]=t[v]}c.clippingState=m;this.numIntersection=a?this.numPlanes:0;this.numPlanes+=d}};function l(){if(o.value!==t){o.value=t;o.needsUpdate=i>0}e.numPlanes=i;e.numIntersection=0}function u(t,i,r,n){var l=t!==null?t.length:0,u=null;if(l!==0){u=o.value;if(n!==true||u===null){var h=r+l*4,c=i.matrixWorldInverse;s.getNormalMatrix(c);if(u===null||u.length<h){u=new Float32Array(h)}for(var f=0,d=r;f!==l;++f,d+=4){a.copy(t[f]).applyMatrix4(c,s);a.normal.toArray(u,d);u[d+3]=a.constant}}o.value=u;o.needsUpdate=true}e.numPlanes=l;return u}}function ns(e,t){function i(i){var r;if(i===de)return e.REPEAT;if(i===pe)return e.CLAMP_TO_EDGE;if(i===me)return e.MIRRORED_REPEAT;if(i===ve)return e.NEAREST;if(i===ge)return e.NEAREST_MIPMAP_NEAREST;if(i===ye)return e.NEAREST_MIPMAP_LINEAR;if(i===_e)return e.LINEAR;if(i===be)return e.LINEAR_MIPMAP_NEAREST;if(i===xe)return e.LINEAR_MIPMAP_LINEAR;if(i===we)return e.UNSIGNED_BYTE;if(i===Le)return e.UNSIGNED_SHORT_4_4_4_4;if(i===Ce)return e.UNSIGNED_SHORT_5_5_5_1;if(i===Oe)return e.UNSIGNED_SHORT_5_6_5;if(i===Te)return e.BYTE;if(i===Me)return e.SHORT;if(i===Ee)return e.UNSIGNED_SHORT;if(i===Se)return e.INT;if(i===Ae)return e.UNSIGNED_INT;if(i===Pe)return e.FLOAT;if(i===Re){r=t.get("OES_texture_half_float");if(r!==null)return r.HALF_FLOAT_OES}if(i===De)return e.ALPHA;if(i===ke)return e.RGB;if(i===Ue)return e.RGBA;if(i===Fe)return e.LUMINANCE;if(i===Ne)return e.LUMINANCE_ALPHA;if(i===ze)return e.DEPTH_COMPONENT;if(i===je)return e.DEPTH_STENCIL;if(i===A)return e.FUNC_ADD;if(i===P)return e.FUNC_SUBTRACT;if(i===R)return e.FUNC_REVERSE_SUBTRACT;if(i===O)return e.ZERO;if(i===I)return e.ONE;if(i===D)return e.SRC_COLOR;if(i===k)return e.ONE_MINUS_SRC_COLOR;if(i===U)return e.SRC_ALPHA;if(i===F)return e.ONE_MINUS_SRC_ALPHA;if(i===N)return e.DST_ALPHA;if(i===B)return e.ONE_MINUS_DST_ALPHA;if(i===z)return e.DST_COLOR;if(i===j)return e.ONE_MINUS_DST_COLOR;if(i===G)return e.SRC_ALPHA_SATURATE;if(i===Ge||i===He||i===Ve||i===We){r=t.get("WEBGL_compressed_texture_s3tc");if(r!==null){if(i===Ge)return r.COMPRESSED_RGB_S3TC_DXT1_EXT;if(i===He)return r.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(i===Ve)return r.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(i===We)return r.COMPRESSED_RGBA_S3TC_DXT5_EXT}}if(i===Xe||i===Ye||i===qe||i===$e){r=t.get("WEBGL_compressed_texture_pvrtc");if(r!==null){if(i===Xe)return r.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(i===Ye)return r.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(i===qe)return r.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(i===$e)return r.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}}if(i===Ze){r=t.get("WEBGL_compressed_texture_etc1");if(r!==null)return r.COMPRESSED_RGB_ETC1_WEBGL}if(i===L||i===C){r=t.get("EXT_blend_minmax");if(r!==null){if(i===L)return r.MIN_EXT;if(i===C)return r.MAX_EXT}}if(i===Ie){r=t.get("WEBGL_depth_texture");if(r!==null)return r.UNSIGNED_INT_24_8_WEBGL}return 0}return{convert:i}}function as(e){console.log("THREE.WebGLRenderer",i);e=e||{};var t=e.canvas!==undefined?e.canvas:document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),r=e.context!==undefined?e.context:null,n=e.alpha!==undefined?e.alpha:false,a=e.depth!==undefined?e.depth:true,s=e.stencil!==undefined?e.stencil:true,o=e.antialias!==undefined?e.antialias:false,u=e.premultipliedAlpha!==undefined?e.premultipliedAlpha:true,h=e.preserveDrawingBuffer!==undefined?e.preserveDrawingBuffer:false;var c=[];var f=[];var d=null;var p=[];var m=[];this.domElement=t;this.context=null;this.autoClear=true;this.autoClearColor=true;this.autoClearDepth=true;this.autoClearStencil=true;this.sortObjects=true;this.clippingPlanes=[];this.localClippingEnabled=false;this.gammaFactor=2;this.gammaInput=false;this.gammaOutput=false;this.physicallyCorrectLights=false;this.toneMapping=te;this.toneMappingExposure=1;this.toneMappingWhitePoint=1;this.maxMorphTargets=8;this.maxMorphNormals=4;var v=this,g=false,_=null,b=null,x=-1,w="",T=null,M=null,E=new Tt,S=new Tt,A=null,P=0,R=t.width,L=t.height,C=1,O=new Tt(0,0,R,L),I=new Tt(0,0,R,L),D=false,k=new Bn,U=new rs,F=false,N=false,B=new Pt,z=new At,j={geometries:0,textures:0},G={frame:0,calls:0,vertices:0,faces:0,points:0};this.info={render:G,memory:j,programs:null};function H(){return _===null?C:1}var V;try{var W={alpha:n,depth:a,stencil:s,antialias:o,premultipliedAlpha:u,preserveDrawingBuffer:h};V=r||t.getContext("webgl",W)||t.getContext("experimental-webgl",W);if(V===null){if(t.getContext("webgl")!==null){throw"Error creating WebGL context with your selected attributes."}else{throw"Error creating WebGL context."}}if(V.getShaderPrecisionFormat===undefined){V.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}}}t.addEventListener("webglcontextlost",pe,false);t.addEventListener("webglcontextrestored",me,false)}catch(e){console.error("THREE.WebGLRenderer: "+e)}var X,Y,q;var $,Z,J,Q,K,ee;var ie,re;var ne,ae,se,oe;var le,ue;var he;function ce(){X=new is(V);X.get("WEBGL_depth_texture");X.get("OES_texture_float");X.get("OES_texture_float_linear");X.get("OES_texture_half_float");X.get("OES_texture_half_float_linear");X.get("OES_standard_derivatives");X.get("ANGLE_instanced_arrays");if(X.get("OES_element_index_uint")){ca.MaxIndex=4294967296}he=new ns(V,X);Y=new Ka(V,X,e);q=new Qa(V,X,he);q.scissor(S.copy(I).multiplyScalar(C));q.viewport(E.copy(O).multiplyScalar(C));$=new Ja;Z=new Za(V,X,q,$,Y,he,j);J=new jn(V);Q=new La(V,J,j);K=new Ia(Q,G);ae=new Aa(V);ie=new $a(v,X,Y);ee=new Oa;re=new Ea;ne=new xa(v,q,Q,u);se=new Ra(V,X,G);oe=new Pa(V,X,G);le=new An(v,V,q,Z,Y);ue=new Rn(v,V,q,Z,Y);v.info.programs=ie.programs;v.context=V;v.capabilities=Y;v.extensions=X;v.properties=$;v.renderLists=re;v.state=q}ce();var fe=new ts(v);this.vr=fe;var de=new zn(v,K,Y.maxTextureSize);this.shadowMap=de;this.getContext=function(){return V};this.getContextAttributes=function(){return V.getContextAttributes()};this.forceContextLoss=function(){var e=X.get("WEBGL_lose_context");if(e)e.loseContext()};this.forceContextRestore=function(){var e=X.get("WEBGL_lose_context");if(e)e.restoreContext()};this.getPixelRatio=function(){return C};this.setPixelRatio=function(e){if(e===undefined)return;C=e;this.setSize(R,L,false)};this.getSize=function(){return{width:R,height:L}};this.setSize=function(e,i,r){var n=fe.getDevice();if(n&&n.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}R=e;L=i;t.width=e*C;t.height=i*C;if(r!==false){t.style.width=e+"px";t.style.height=i+"px"}this.setViewport(0,0,e,i)};this.getDrawingBufferSize=function(){return{width:R*C,height:L*C}};this.setDrawingBufferSize=function(e,i,r){R=e;L=i;C=r;t.width=e*r;t.height=i*r;this.setViewport(0,0,e,i)};this.setViewport=function(e,t,i,r){O.set(e,L-t-r,i,r);q.viewport(E.copy(O).multiplyScalar(C))};this.setScissor=function(e,t,i,r){I.set(e,L-t-r,i,r);q.scissor(S.copy(I).multiplyScalar(C))};this.setScissorTest=function(e){q.setScissorTest(D=e)};this.getClearColor=ne.getClearColor;this.setClearColor=ne.setClearColor;this.getClearAlpha=ne.getClearAlpha;this.setClearAlpha=ne.setClearAlpha;this.clear=function(e,t,i){var r=0;if(e===undefined||e)r|=V.COLOR_BUFFER_BIT;if(t===undefined||t)r|=V.DEPTH_BUFFER_BIT;if(i===undefined||i)r|=V.STENCIL_BUFFER_BIT;V.clear(r)};this.clearColor=function(){this.clear(true,false,false)};this.clearDepth=function(){this.clear(false,true,false)};this.clearStencil=function(){this.clear(false,false,true)};this.clearTarget=function(e,t,i,r){this.setRenderTarget(e);this.clear(t,i,r)};this.dispose=function(){t.removeEventListener("webglcontextlost",pe,false);t.removeEventListener("webglcontextrestored",me,false);re.dispose();fe.dispose()};function pe(e){e.preventDefault();console.log("THREE.WebGLRenderer: Context Lost.");g=true}function me(e){console.log("THREE.WebGLRenderer: Context Restored.");g=false;ce()}function ve(e){var t=e.target;t.removeEventListener("dispose",ve);ge(t)}function ge(e){ye(e);$.remove(e)}function ye(e){var t=$.get(e).program;e.program=undefined;if(t!==undefined){ie.releaseProgram(t)}}function _e(e,t,i){e.render(function(e){v.renderBufferImmediate(e,t,i)})}this.renderBufferImmediate=function(e,t,i){q.initAttributes();var r=$.get(e);if(e.hasPositions&&!r.position)r.position=V.createBuffer();if(e.hasNormals&&!r.normal)r.normal=V.createBuffer();if(e.hasUvs&&!r.uv)r.uv=V.createBuffer();if(e.hasColors&&!r.color)r.color=V.createBuffer();var n=t.getAttributes();if(e.hasPositions){V.bindBuffer(V.ARRAY_BUFFER,r.position);V.bufferData(V.ARRAY_BUFFER,e.positionArray,V.DYNAMIC_DRAW);q.enableAttribute(n.position);V.vertexAttribPointer(n.position,3,V.FLOAT,false,0,0)}if(e.hasNormals){V.bindBuffer(V.ARRAY_BUFFER,r.normal);if(!i.isMeshPhongMaterial&&!i.isMeshStandardMaterial&&!i.isMeshNormalMaterial&&i.flatShading===true){for(var a=0,s=e.count*3;a<s;a+=9){var o=e.normalArray;var l=(o[a+0]+o[a+3]+o[a+6])/3;var u=(o[a+1]+o[a+4]+o[a+7])/3;var h=(o[a+2]+o[a+5]+o[a+8])/3;o[a+0]=l;o[a+1]=u;o[a+2]=h;o[a+3]=l;o[a+4]=u;o[a+5]=h;o[a+6]=l;o[a+7]=u;o[a+8]=h}}V.bufferData(V.ARRAY_BUFFER,e.normalArray,V.DYNAMIC_DRAW);q.enableAttribute(n.normal);V.vertexAttribPointer(n.normal,3,V.FLOAT,false,0,0)}if(e.hasUvs&&i.map){V.bindBuffer(V.ARRAY_BUFFER,r.uv);V.bufferData(V.ARRAY_BUFFER,e.uvArray,V.DYNAMIC_DRAW);q.enableAttribute(n.uv);V.vertexAttribPointer(n.uv,2,V.FLOAT,false,0,0)}if(e.hasColors&&i.vertexColors!==y){V.bindBuffer(V.ARRAY_BUFFER,r.color);V.bufferData(V.ARRAY_BUFFER,e.colorArray,V.DYNAMIC_DRAW);q.enableAttribute(n.color);V.vertexAttribPointer(n.color,3,V.FLOAT,false,0,0)}q.disableUnusedAttributes();V.drawArrays(V.TRIANGLES,0,e.count);e.count=0};this.renderBufferDirect=function(e,t,i,r,n,a){q.setMaterial(r);var s=Oe(e,t,r,n);var o=i.id+"_"+s.id+"_"+(r.wireframe===true);var l=false;if(o!==w){w=o;l=true}if(n.morphTargetInfluences){ae.update(n,i,r,s);l=true}var u=i.index;var h=i.attributes.position;var c=1;if(r.wireframe===true){u=Q.getWireframeAttribute(i);c=2}var f;var d=se;if(u!==null){f=J.get(u);d=oe;d.setIndex(f)}if(l){be(r,s,i);if(u!==null){V.bindBuffer(V.ELEMENT_ARRAY_BUFFER,f.buffer)}}var p=0;if(u!==null){p=u.count}else if(h!==undefined){p=h.count}var m=i.drawRange.start*c;var v=i.drawRange.count*c;var g=a!==null?a.start*c:0;var y=a!==null?a.count*c:Infinity;var _=Math.max(m,g);var b=Math.min(p,m+v,g+y)-1;var x=Math.max(0,b-_+1);if(x===0)return;if(n.isMesh){if(r.wireframe===true){q.setLineWidth(r.wireframeLinewidth*H());d.setMode(V.LINES)}else{switch(n.drawMode){case st:d.setMode(V.TRIANGLES);break;case ot:d.setMode(V.TRIANGLE_STRIP);break;case lt:d.setMode(V.TRIANGLE_FAN);break}}}else if(n.isLine){var T=r.linewidth;if(T===undefined)T=1;q.setLineWidth(T*H());if(n.isLineSegments){d.setMode(V.LINES)}else if(n.isLineLoop){d.setMode(V.LINE_LOOP)}else{d.setMode(V.LINE_STRIP)}}else if(n.isPoints){d.setMode(V.POINTS)}if(i&&i.isInstancedBufferGeometry){if(i.maxInstancedCount>0){d.renderInstances(i,_,x)}}else{d.render(_,x)}};function be(e,t,i,r){if(i&&i.isInstancedBufferGeometry){if(X.get("ANGLE_instanced_arrays")===null){console.error("THREE.WebGLRenderer.setupVertexAttributes: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}}if(r===undefined)r=0;q.initAttributes();var n=i.attributes;var a=t.getAttributes();var s=e.defaultAttributeValues;for(var o in a){var l=a[o];if(l>=0){var u=n[o];if(u!==undefined){var h=u.normalized;var c=u.itemSize;var f=J.get(u);if(f===undefined)continue;var d=f.buffer;var p=f.type;var m=f.bytesPerElement;if(u.isInterleavedBufferAttribute){var v=u.data;var g=v.stride;var y=u.offset;if(v&&v.isInstancedInterleavedBuffer){q.enableAttributeAndDivisor(l,v.meshPerAttribute);if(i.maxInstancedCount===undefined){i.maxInstancedCount=v.meshPerAttribute*v.count}}else{q.enableAttribute(l)}V.bindBuffer(V.ARRAY_BUFFER,d);V.vertexAttribPointer(l,c,p,h,g*m,(r*g+y)*m)}else{if(u.isInstancedBufferAttribute){q.enableAttributeAndDivisor(l,u.meshPerAttribute);if(i.maxInstancedCount===undefined){i.maxInstancedCount=u.meshPerAttribute*u.count}}else{q.enableAttribute(l)}V.bindBuffer(V.ARRAY_BUFFER,d);V.vertexAttribPointer(l,c,p,h,0,r*c*m)}}else if(s!==undefined){var _=s[o];if(_!==undefined){switch(_.length){case 2:V.vertexAttrib2fv(l,_);break;case 3:V.vertexAttrib3fv(l,_);break;case 4:V.vertexAttrib4fv(l,_);break;default:V.vertexAttrib1fv(l,_)}}}}}q.disableUnusedAttributes()}this.compile=function(e,t){c.length=0;f.length=0;e.traverse(function(e){if(e.isLight){c.push(e);if(e.castShadow){f.push(e)}}});ee.setup(c,f,t);e.traverse(function(t){if(t.material){if(Array.isArray(t.material)){for(var i=0;i<t.material.length;i++){Ce(t.material[i],e.fog,t)}}else{Ce(t.material,e.fog,t)}}})};var xe=false;var Te=null;function Me(){if(xe)return;(fe.getDevice()||window).requestAnimationFrame(Ee);xe=true}function Ee(e){if(Te!==null)Te(e);(fe.getDevice()||window).requestAnimationFrame(Ee)}this.animate=function(e){Te=e;Me()};this.render=function(e,t,i,r){if(!(t&&t.isCamera)){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(g)return;w="";x=-1;T=null;if(e.autoUpdate===true)e.updateMatrixWorld();if(t.parent===null)t.updateMatrixWorld();if(fe.enabled){t=fe.getCamera(t)}B.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse);k.setFromMatrix(B);c.length=0;f.length=0;p.length=0;m.length=0;N=this.localClippingEnabled;F=U.init(this.clippingPlanes,N,t);d=re.get(e,t);d.init();Se(e,t,v.sortObjects);if(v.sortObjects===true){d.sort()}if(F)U.beginShadows();de.render(f,e,t);ee.setup(c,f,t);if(F)U.endShadows();G.frame++;G.calls=0;G.vertices=0;G.faces=0;G.points=0;if(i===undefined){i=null}this.setRenderTarget(i);ne.render(d,e,t,r);var n=d.opaque;var a=d.transparent;if(e.overrideMaterial){var s=e.overrideMaterial;if(n.length)Ae(n,e,t,s);if(a.length)Ae(a,e,t,s)}else{if(n.length)Ae(n,e,t);if(a.length)Ae(a,e,t)}ue.render(p,e,t);le.render(m,e,t,E);if(i){Z.updateRenderTargetMipmap(i)}q.buffers.depth.setTest(true);q.buffers.depth.setMask(true);q.buffers.color.setMask(true);q.setPolygonOffset(false);if(fe.enabled){fe.submitFrame()}};function Se(e,t,i){if(!e.visible)return;var r=e.layers.test(t.layers);if(r){if(e.isLight){c.push(e);if(e.castShadow){f.push(e)}}else if(e.isSprite){if(!e.frustumCulled||k.intersectsSprite(e)){p.push(e)}}else if(e.isLensFlare){m.push(e)}else if(e.isImmediateRenderObject){if(i){z.setFromMatrixPosition(e.matrixWorld).applyMatrix4(B)}d.push(e,null,e.material,z.z,null)}else if(e.isMesh||e.isLine||e.isPoints){if(e.isSkinnedMesh){e.skeleton.update()}if(!e.frustumCulled||k.intersectsObject(e)){if(i){z.setFromMatrixPosition(e.matrixWorld).applyMatrix4(B)}var n=K.update(e);var a=e.material;if(Array.isArray(a)){var s=n.groups;for(var o=0,l=s.length;o<l;o++){var u=s[o];var h=a[u.materialIndex];if(h&&h.visible){d.push(e,n,h,z.z,u)}}}else if(a.visible){d.push(e,n,a,z.z,null)}}}}var v=e.children;for(var o=0,l=v.length;o<l;o++){Se(v[o],t,i)}}function Ae(e,t,i,r){for(var n=0,a=e.length;n<a;n++){var s=e[n];var o=s.object;var l=s.geometry;var u=r===undefined?s.material:r;var h=s.group;if(i.isArrayCamera){M=i;var c=i.cameras;for(var f=0,d=c.length;f<d;f++){var p=c[f];if(o.layers.test(p.layers)){var m=p.bounds;var v=m.x*R;var g=m.y*L;var y=m.z*R;var _=m.w*L;q.viewport(E.set(v,g,y,_).multiplyScalar(C));Le(o,t,p,l,u,h)}}}else{M=null;Le(o,t,i,l,u,h)}}}function Le(e,t,i,r,n,a){e.onBeforeRender(v,t,i,r,n,a);e.modelViewMatrix.multiplyMatrices(i.matrixWorldInverse,e.matrixWorld);e.normalMatrix.getNormalMatrix(e.modelViewMatrix);if(e.isImmediateRenderObject){q.setMaterial(n);var s=Oe(i,t.fog,n,e);w="";_e(e,s,n)}else{v.renderBufferDirect(i,t.fog,r,n,e,a)}e.onAfterRender(v,t,i,r,n,a)}function Ce(e,t,i){var r=$.get(e);var n=ie.getParameters(e,ee.state,f,t,U.numPlanes,U.numIntersection,i);var a=ie.getProgramCode(e,n);var s=r.program;var o=true;if(s===undefined){e.addEventListener("dispose",ve)}else if(s.code!==a){ye(e)}else if(n.shaderID!==undefined){return}else{o=false}if(o){if(n.shaderID){var l=En[n.shaderID];r.shader={name:e.type,uniforms:xi.clone(l.uniforms),vertexShader:l.vertexShader,fragmentShader:l.fragmentShader}}else{r.shader={name:e.type,uniforms:e.uniforms,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader}}e.onBeforeCompile(r.shader);s=ie.acquireProgram(e,r.shader,n,a);r.program=s;e.program=s}var u=s.getAttributes();if(e.morphTargets){e.numSupportedMorphTargets=0;for(var h=0;h<v.maxMorphTargets;h++){if(u["morphTarget"+h]>=0){e.numSupportedMorphTargets++}}}if(e.morphNormals){e.numSupportedMorphNormals=0;for(var h=0;h<v.maxMorphNormals;h++){if(u["morphNormal"+h]>=0){e.numSupportedMorphNormals++}}}var c=r.shader.uniforms;if(!e.isShaderMaterial&&!e.isRawShaderMaterial||e.clipping===true){r.numClippingPlanes=U.numPlanes;r.numIntersection=U.numIntersection;c.clippingPlanes=U.uniform}r.fog=t;r.lightsHash=ee.state.hash;if(e.lights){c.ambientLightColor.value=ee.state.ambient;c.directionalLights.value=ee.state.directional;c.spotLights.value=ee.state.spot;c.rectAreaLights.value=ee.state.rectArea;c.pointLights.value=ee.state.point;c.hemisphereLights.value=ee.state.hemi;c.directionalShadowMap.value=ee.state.directionalShadowMap;c.directionalShadowMatrix.value=ee.state.directionalShadowMatrix;c.spotShadowMap.value=ee.state.spotShadowMap;c.spotShadowMatrix.value=ee.state.spotShadowMatrix;c.pointShadowMap.value=ee.state.pointShadowMap;c.pointShadowMatrix.value=ee.state.pointShadowMatrix}var d=r.program.getUniforms(),p=gi.seqWithValue(d.seq,c);r.uniformsList=p}function Oe(e,t,i,r){P=0;var n=$.get(i);if(F){if(N||e!==T){var a=e===T&&i.id===x;U.setState(i.clippingPlanes,i.clipIntersection,i.clipShadows,e,n,a)}}if(i.needsUpdate===false){if(n.program===undefined){i.needsUpdate=true}else if(i.fog&&n.fog!==t){i.needsUpdate=true}else if(i.lights&&n.lightsHash!==ee.state.hash){i.needsUpdate=true}else if(n.numClippingPlanes!==undefined&&(n.numClippingPlanes!==U.numPlanes||n.numIntersection!==U.numIntersection)){i.needsUpdate=true}}if(i.needsUpdate){Ce(i,t,r);i.needsUpdate=false}var s=false;var o=false;var l=false;var u=n.program,h=u.getUniforms(),c=n.shader.uniforms;if(q.useProgram(u.program)){s=true;o=true;l=true}if(i.id!==x){x=i.id;o=true}if(s||e!==T){h.setValue(V,"projectionMatrix",e.projectionMatrix);if(Y.logarithmicDepthBuffer){h.setValue(V,"logDepthBufFC",2/(Math.log(e.far+1)/Math.LN2))}if(T!==(M||e)){T=M||e;o=true;l=true}if(i.isShaderMaterial||i.isMeshPhongMaterial||i.isMeshStandardMaterial||i.envMap){var f=h.map.cameraPosition;if(f!==undefined){f.setValue(V,z.setFromMatrixPosition(e.matrixWorld))}}if(i.isMeshPhongMaterial||i.isMeshLambertMaterial||i.isMeshBasicMaterial||i.isMeshStandardMaterial||i.isShaderMaterial||i.skinning){h.setValue(V,"viewMatrix",e.matrixWorldInverse)}}if(i.skinning){h.setOptional(V,r,"bindMatrix");h.setOptional(V,r,"bindMatrixInverse");var d=r.skeleton;if(d){var p=d.bones;if(Y.floatVertexTextures){if(d.boneTexture===undefined){var m=Math.sqrt(p.length*4);m=_t.nextPowerOfTwo(Math.ceil(m));m=Math.max(m,4);var g=new Float32Array(m*m*4);g.set(d.boneMatrices);var y=new Rt(g,m,m,Ue,Pe);d.boneMatrices=g;d.boneTexture=y;d.boneTextureSize=m}h.setValue(V,"boneTexture",d.boneTexture);h.setValue(V,"boneTextureSize",d.boneTextureSize)}else{h.setOptional(V,d,"boneMatrices")}}}if(o){h.setValue(V,"toneMappingExposure",v.toneMappingExposure);h.setValue(V,"toneMappingWhitePoint",v.toneMappingWhitePoint);if(i.lights){Ye(c,l)}if(t&&i.fog){Ne(c,t)}if(i.isMeshBasicMaterial){Ie(c,i)}else if(i.isMeshLambertMaterial){Ie(c,i);Be(c,i)}else if(i.isMeshPhongMaterial){Ie(c,i);if(i.isMeshToonMaterial){je(c,i)}else{ze(c,i)}}else if(i.isMeshStandardMaterial){Ie(c,i);if(i.isMeshPhysicalMaterial){He(c,i)}else{Ge(c,i)}}else if(i.isMeshDepthMaterial){Ie(c,i);Ve(c,i)}else if(i.isMeshDistanceMaterial){Ie(c,i);We(c,i)}else if(i.isMeshNormalMaterial){Ie(c,i);Xe(c,i)}else if(i.isLineBasicMaterial){De(c,i);if(i.isLineDashedMaterial){ke(c,i)}}else if(i.isPointsMaterial){Fe(c,i)}else if(i.isShadowMaterial){c.color.value=i.color;c.opacity.value=i.opacity}if(c.ltcMat!==undefined)c.ltcMat.value=bi.LTC_MAT_TEXTURE;if(c.ltcMag!==undefined)c.ltcMag.value=bi.LTC_MAG_TEXTURE;gi.upload(V,n.uniformsList,c,v)}h.setValue(V,"modelViewMatrix",r.modelViewMatrix);h.setValue(V,"normalMatrix",r.normalMatrix);h.setValue(V,"modelMatrix",r.matrixWorld);return u}function Ie(e,t){e.opacity.value=t.opacity;if(t.color){e.diffuse.value=t.color}if(t.emissive){e.emissive.value.copy(t.emissive).multiplyScalar(t.emissiveIntensity)}if(t.map){e.map.value=t.map}if(t.alphaMap){e.alphaMap.value=t.alphaMap}if(t.specularMap){e.specularMap.value=t.specularMap}if(t.envMap){e.envMap.value=t.envMap;e.flipEnvMap.value=!(t.envMap&&t.envMap.isCubeTexture)?1:-1;e.reflectivity.value=t.reflectivity;e.refractionRatio.value=t.refractionRatio}if(t.lightMap){e.lightMap.value=t.lightMap;e.lightMapIntensity.value=t.lightMapIntensity}if(t.aoMap){e.aoMap.value=t.aoMap;e.aoMapIntensity.value=t.aoMapIntensity}var i;if(t.map){i=t.map}else if(t.specularMap){i=t.specularMap}else if(t.displacementMap){i=t.displacementMap}else if(t.normalMap){i=t.normalMap}else if(t.bumpMap){i=t.bumpMap}else if(t.roughnessMap){i=t.roughnessMap}else if(t.metalnessMap){i=t.metalnessMap}else if(t.alphaMap){i=t.alphaMap}else if(t.emissiveMap){i=t.emissiveMap}if(i!==undefined){if(i.isWebGLRenderTarget){i=i.texture}var r=i.offset;var n=i.repeat;e.offsetRepeat.value.set(r.x,r.y,n.x,n.y)}}function De(e,t){e.diffuse.value=t.color;e.opacity.value=t.opacity}function ke(e,t){e.dashSize.value=t.dashSize
;e.totalSize.value=t.dashSize+t.gapSize;e.scale.value=t.scale}function Fe(e,t){e.diffuse.value=t.color;e.opacity.value=t.opacity;e.size.value=t.size*C;e.scale.value=L*.5;e.map.value=t.map;if(t.map!==null){var i=t.map.offset;var r=t.map.repeat;e.offsetRepeat.value.set(i.x,i.y,r.x,r.y)}}function Ne(e,t){e.fogColor.value=t.color;if(t.isFog){e.fogNear.value=t.near;e.fogFar.value=t.far}else if(t.isFogExp2){e.fogDensity.value=t.density}}function Be(e,t){if(t.emissiveMap){e.emissiveMap.value=t.emissiveMap}}function ze(e,t){e.specular.value=t.specular;e.shininess.value=Math.max(t.shininess,1e-4);if(t.emissiveMap){e.emissiveMap.value=t.emissiveMap}if(t.bumpMap){e.bumpMap.value=t.bumpMap;e.bumpScale.value=t.bumpScale}if(t.normalMap){e.normalMap.value=t.normalMap;e.normalScale.value.copy(t.normalScale)}if(t.displacementMap){e.displacementMap.value=t.displacementMap;e.displacementScale.value=t.displacementScale;e.displacementBias.value=t.displacementBias}}function je(e,t){ze(e,t);if(t.gradientMap){e.gradientMap.value=t.gradientMap}}function Ge(e,t){e.roughness.value=t.roughness;e.metalness.value=t.metalness;if(t.roughnessMap){e.roughnessMap.value=t.roughnessMap}if(t.metalnessMap){e.metalnessMap.value=t.metalnessMap}if(t.emissiveMap){e.emissiveMap.value=t.emissiveMap}if(t.bumpMap){e.bumpMap.value=t.bumpMap;e.bumpScale.value=t.bumpScale}if(t.normalMap){e.normalMap.value=t.normalMap;e.normalScale.value.copy(t.normalScale)}if(t.displacementMap){e.displacementMap.value=t.displacementMap;e.displacementScale.value=t.displacementScale;e.displacementBias.value=t.displacementBias}if(t.envMap){e.envMapIntensity.value=t.envMapIntensity}}function He(e,t){e.clearCoat.value=t.clearCoat;e.clearCoatRoughness.value=t.clearCoatRoughness;Ge(e,t)}function Ve(e,t){if(t.displacementMap){e.displacementMap.value=t.displacementMap;e.displacementScale.value=t.displacementScale;e.displacementBias.value=t.displacementBias}}function We(e,t){if(t.displacementMap){e.displacementMap.value=t.displacementMap;e.displacementScale.value=t.displacementScale;e.displacementBias.value=t.displacementBias}e.referencePosition.value.copy(t.referencePosition);e.nearDistance.value=t.nearDistance;e.farDistance.value=t.farDistance}function Xe(e,t){if(t.bumpMap){e.bumpMap.value=t.bumpMap;e.bumpScale.value=t.bumpScale}if(t.normalMap){e.normalMap.value=t.normalMap;e.normalScale.value.copy(t.normalScale)}if(t.displacementMap){e.displacementMap.value=t.displacementMap;e.displacementScale.value=t.displacementScale;e.displacementBias.value=t.displacementBias}}function Ye(e,t){e.ambientLightColor.needsUpdate=t;e.directionalLights.needsUpdate=t;e.pointLights.needsUpdate=t;e.spotLights.needsUpdate=t;e.rectAreaLights.needsUpdate=t;e.hemisphereLights.needsUpdate=t}this.setFaceCulling=function(e,t){q.setCullFace(e);q.setFlipSided(t===l)};function qe(){var e=P;if(e>=Y.maxTextures){console.warn("THREE.WebGLRenderer: Trying to use "+e+" texture units while this GPU supports only "+Y.maxTextures)}P+=1;return e}this.allocTextureUnit=qe;this.setTexture2D=function(){var e=false;return function t(i,r){if(i&&i.isWebGLRenderTarget){if(!e){console.warn("THREE.WebGLRenderer.setTexture2D: don't use render targets as textures. Use their .texture property instead.");e=true}i=i.texture}Z.setTexture2D(i,r)}}();this.setTexture=function(){var e=false;return function t(i,r){if(!e){console.warn("THREE.WebGLRenderer: .setTexture is deprecated, use setTexture2D instead.");e=true}Z.setTexture2D(i,r)}}();this.setTextureCube=function(){var e=false;return function t(i,r){if(i&&i.isWebGLRenderTargetCube){if(!e){console.warn("THREE.WebGLRenderer.setTextureCube: don't use cube render targets as textures. Use their .texture property instead.");e=true}i=i.texture}if(i&&i.isCubeTexture||Array.isArray(i.image)&&i.image.length===6){Z.setTextureCube(i,r)}else{Z.setTextureCubeDynamic(i,r)}}}();this.getRenderTarget=function(){return _};this.setRenderTarget=function(e){_=e;if(e&&$.get(e).__webglFramebuffer===undefined){Z.setupRenderTarget(e)}var t=null;var i=false;if(e){var r=$.get(e).__webglFramebuffer;if(e.isWebGLRenderTargetCube){t=r[e.activeCubeFace];i=true}else{t=r}E.copy(e.viewport);S.copy(e.scissor);A=e.scissorTest}else{E.copy(O).multiplyScalar(C);S.copy(I).multiplyScalar(C);A=D}if(b!==t){V.bindFramebuffer(V.FRAMEBUFFER,t);b=t}q.viewport(E);q.scissor(S);q.setScissorTest(A);if(i){var n=$.get(e.texture);V.framebufferTexture2D(V.FRAMEBUFFER,V.COLOR_ATTACHMENT0,V.TEXTURE_CUBE_MAP_POSITIVE_X+e.activeCubeFace,n.__webglTexture,e.activeMipMapLevel)}};this.readRenderTargetPixels=function(e,t,i,r,n,a){if(!(e&&e.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}var s=$.get(e).__webglFramebuffer;if(s){var o=false;if(s!==b){V.bindFramebuffer(V.FRAMEBUFFER,s);o=true}try{var l=e.texture;var u=l.format;var h=l.type;if(u!==Ue&&he.convert(u)!==V.getParameter(V.IMPLEMENTATION_COLOR_READ_FORMAT)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(h!==we&&he.convert(h)!==V.getParameter(V.IMPLEMENTATION_COLOR_READ_TYPE)&&!(h===Pe&&(X.get("OES_texture_float")||X.get("WEBGL_color_buffer_float")))&&!(h===Re&&X.get("EXT_color_buffer_half_float"))){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}if(V.checkFramebufferStatus(V.FRAMEBUFFER)===V.FRAMEBUFFER_COMPLETE){if(t>=0&&t<=e.width-r&&(i>=0&&i<=e.height-n)){V.readPixels(t,i,r,n,he.convert(u),he.convert(h),a)}}else{console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.")}}finally{if(o){V.bindFramebuffer(V.FRAMEBUFFER,b)}}}}}function ss(e,t){this.name="";this.color=new _i(e);this.density=t!==undefined?t:25e-5}ss.prototype.isFogExp2=true;ss.prototype.clone=function(){return new ss(this.color.getHex(),this.density)};ss.prototype.toJSON=function(e){return{type:"FogExp2",color:this.color.getHex(),density:this.density}};function os(e,t,i){this.name="";this.color=new _i(e);this.near=t!==undefined?t:1;this.far=i!==undefined?i:1e3}os.prototype.isFog=true;os.prototype.clone=function(){return new os(this.color.getHex(),this.near,this.far)};os.prototype.toJSON=function(e){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}};function ls(){Wn.call(this);this.type="Scene";this.background=null;this.fog=null;this.overrideMaterial=null;this.autoUpdate=true}ls.prototype=Object.assign(Object.create(Wn.prototype),{constructor:ls,copy:function(e,t){Wn.prototype.copy.call(this,e,t);if(e.background!==null)this.background=e.background.clone();if(e.fog!==null)this.fog=e.fog.clone();if(e.overrideMaterial!==null)this.overrideMaterial=e.overrideMaterial.clone();this.autoUpdate=e.autoUpdate;this.matrixAutoUpdate=e.matrixAutoUpdate;return this},toJSON:function(e){var t=Wn.prototype.toJSON.call(this,e);if(this.background!==null)t.object.background=this.background.toJSON(e);if(this.fog!==null)t.object.fog=this.fog.toJSON();return t}});function us(e,t,i,r,n){Wn.call(this);this.lensFlares=[];this.positionScreen=new At;this.customUpdateCallback=undefined;if(e!==undefined){this.add(e,t,i,r,n)}}us.prototype=Object.assign(Object.create(Wn.prototype),{constructor:us,isLensFlare:true,copy:function(e){Wn.prototype.copy.call(this,e);this.positionScreen.copy(e.positionScreen);this.customUpdateCallback=e.customUpdateCallback;for(var t=0,i=e.lensFlares.length;t<i;t++){this.lensFlares.push(e.lensFlares[t])}return this},add:function(e,t,i,r,n,a){if(t===undefined)t=-1;if(i===undefined)i=0;if(a===undefined)a=1;if(n===undefined)n=new _i(16777215);if(r===undefined)r=w;i=Math.min(i,Math.max(0,i));this.lensFlares.push({texture:e,size:t,distance:i,x:0,y:0,z:0,scale:1,rotation:0,opacity:a,color:n,blending:r})},updateLensFlares:function(){var e,t=this.lensFlares.length;var i;var r=-this.positionScreen.x*2;var n=-this.positionScreen.y*2;for(e=0;e<t;e++){i=this.lensFlares[e];i.x=this.positionScreen.x+r*i.distance;i.y=this.positionScreen.y+n*i.distance;i.wantedRotation=i.x*Math.PI*.25;i.rotation+=(i.wantedRotation-i.rotation)*.25}}});function hs(e){Cn.call(this);this.type="SpriteMaterial";this.color=new _i(16777215);this.map=null;this.rotation=0;this.fog=false;this.lights=false;this.setValues(e)}hs.prototype=Object.create(Cn.prototype);hs.prototype.constructor=hs;hs.prototype.isSpriteMaterial=true;hs.prototype.copy=function(e){Cn.prototype.copy.call(this,e);this.color.copy(e.color);this.map=e.map;this.rotation=e.rotation;return this};function cs(e){Wn.call(this);this.type="Sprite";this.material=e!==undefined?e:new hs}cs.prototype=Object.assign(Object.create(Wn.prototype),{constructor:cs,isSprite:true,raycast:function(){var e=new At;var t=new At;var i=new At;return function r(n,a){t.setFromMatrixPosition(this.matrixWorld);n.ray.closestPointToPoint(t,e);i.setFromMatrixScale(this.matrixWorld);var s=i.x*i.y/4;if(t.distanceToSquared(e)>s)return;var o=n.ray.origin.distanceTo(e);if(o<n.near||o>n.far)return;a.push({distance:o,point:e.clone(),face:null,object:this})}}(),clone:function(){return new this.constructor(this.material).copy(this)}});function fs(){Wn.call(this);this.type="LOD";Object.defineProperties(this,{levels:{enumerable:true,value:[]}})}fs.prototype=Object.assign(Object.create(Wn.prototype),{constructor:fs,copy:function(e){Wn.prototype.copy.call(this,e,false);var t=e.levels;for(var i=0,r=t.length;i<r;i++){var n=t[i];this.addLevel(n.object.clone(),n.distance)}return this},addLevel:function(e,t){if(t===undefined)t=0;t=Math.abs(t);var i=this.levels;for(var r=0;r<i.length;r++){if(t<i[r].distance){break}}i.splice(r,0,{distance:t,object:e});this.add(e)},getObjectForDistance:function(e){var t=this.levels;for(var i=1,r=t.length;i<r;i++){if(e<t[i].distance){break}}return t[i-1].object},raycast:function(){var e=new At;return function t(i,r){e.setFromMatrixPosition(this.matrixWorld);var n=i.ray.origin.distanceTo(e);this.getObjectForDistance(n).raycast(i,r)}}(),update:function(){var e=new At;var t=new At;return function i(r){var n=this.levels;if(n.length>1){e.setFromMatrixPosition(r.matrixWorld);t.setFromMatrixPosition(this.matrixWorld);var a=e.distanceTo(t);n[0].object.visible=true;for(var s=1,o=n.length;s<o;s++){if(a>=n[s].distance){n[s-1].object.visible=false;n[s].object.visible=true}else{break}}for(;s<o;s++){n[s].object.visible=false}}}}(),toJSON:function(e){var t=Wn.prototype.toJSON.call(this,e);t.object.levels=[];var i=this.levels;for(var r=0,n=i.length;r<n;r++){var a=i[r];t.object.levels.push({object:a.object.uuid,distance:a.distance})}return t}});function ds(e,t){e=e||[];this.bones=e.slice(0);this.boneMatrices=new Float32Array(this.bones.length*16);if(t===undefined){this.calculateInverses()}else{if(this.bones.length===t.length){this.boneInverses=t.slice(0)}else{console.warn("THREE.Skeleton boneInverses is the wrong length.");this.boneInverses=[];for(var i=0,r=this.bones.length;i<r;i++){this.boneInverses.push(new Pt)}}}}Object.assign(ds.prototype,{calculateInverses:function(){this.boneInverses=[];for(var e=0,t=this.bones.length;e<t;e++){var i=new Pt;if(this.bones[e]){i.getInverse(this.bones[e].matrixWorld)}this.boneInverses.push(i)}},pose:function(){var e,t,i;for(t=0,i=this.bones.length;t<i;t++){e=this.bones[t];if(e){e.matrixWorld.getInverse(this.boneInverses[t])}}for(t=0,i=this.bones.length;t<i;t++){e=this.bones[t];if(e){if(e.parent&&e.parent.isBone){e.matrix.getInverse(e.parent.matrixWorld);e.matrix.multiply(e.matrixWorld)}else{e.matrix.copy(e.matrixWorld)}e.matrix.decompose(e.position,e.quaternion,e.scale)}}},update:function(){var e=new Pt;var t=new Pt;return function i(){var r=this.bones;var n=this.boneInverses;var a=this.boneMatrices;var s=this.boneTexture;for(var o=0,l=r.length;o<l;o++){var u=r[o]?r[o].matrixWorld:t;e.multiplyMatrices(u,n[o]);e.toArray(a,o*16)}if(s!==undefined){s.needsUpdate=true}}}(),clone:function(){return new ds(this.bones,this.boneInverses)}});function ps(){Wn.call(this);this.type="Bone"}ps.prototype=Object.assign(Object.create(Wn.prototype),{constructor:ps,isBone:true});function ms(e,t){ba.call(this,e,t);this.type="SkinnedMesh";this.bindMode="attached";this.bindMatrix=new Pt;this.bindMatrixInverse=new Pt;var i=this.initBones();var r=new ds(i);this.bind(r,this.matrixWorld);this.normalizeSkinWeights()}ms.prototype=Object.assign(Object.create(ba.prototype),{constructor:ms,isSkinnedMesh:true,initBones:function(){var e=[],t,i;var r,n;if(this.geometry&&this.geometry.bones!==undefined){for(r=0,n=this.geometry.bones.length;r<n;r++){i=this.geometry.bones[r];t=new ps;e.push(t);t.name=i.name;t.position.fromArray(i.pos);t.quaternion.fromArray(i.rotq);if(i.scl!==undefined)t.scale.fromArray(i.scl)}for(r=0,n=this.geometry.bones.length;r<n;r++){i=this.geometry.bones[r];if(i.parent!==-1&&i.parent!==null&&e[i.parent]!==undefined){e[i.parent].add(e[r])}else{this.add(e[r])}}}this.updateMatrixWorld(true);return e},bind:function(e,t){this.skeleton=e;if(t===undefined){this.updateMatrixWorld(true);this.skeleton.calculateInverses();t=this.matrixWorld}this.bindMatrix.copy(t);this.bindMatrixInverse.getInverse(t)},pose:function(){this.skeleton.pose()},normalizeSkinWeights:function(){var e,t;if(this.geometry&&this.geometry.isGeometry){for(t=0;t<this.geometry.skinWeights.length;t++){var i=this.geometry.skinWeights[t];e=1/i.lengthManhattan();if(e!==Infinity){i.multiplyScalar(e)}else{i.set(1,0,0,0)}}}else if(this.geometry&&this.geometry.isBufferGeometry){var r=new Tt;var n=this.geometry.attributes.skinWeight;for(t=0;t<n.count;t++){r.x=n.getX(t);r.y=n.getY(t);r.z=n.getZ(t);r.w=n.getW(t);e=1/r.lengthManhattan();if(e!==Infinity){r.multiplyScalar(e)}else{r.set(1,0,0,0)}n.setXYZW(t,r.x,r.y,r.z,r.w)}}},updateMatrixWorld:function(e){ba.prototype.updateMatrixWorld.call(this,e);if(this.bindMode==="attached"){this.bindMatrixInverse.getInverse(this.matrixWorld)}else if(this.bindMode==="detached"){this.bindMatrixInverse.getInverse(this.bindMatrix)}else{console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}});function vs(e){Cn.call(this);this.type="LineBasicMaterial";this.color=new _i(16777215);this.linewidth=1;this.linecap="round";this.linejoin="round";this.lights=false;this.setValues(e)}vs.prototype=Object.create(Cn.prototype);vs.prototype.constructor=vs;vs.prototype.isLineBasicMaterial=true;vs.prototype.copy=function(e){Cn.prototype.copy.call(this,e);this.color.copy(e.color);this.linewidth=e.linewidth;this.linecap=e.linecap;this.linejoin=e.linejoin;return this};function gs(e,t,i){if(i===1){console.warn("THREE.Line: parameter THREE.LinePieces no longer supported. Created THREE.LineSegments instead.");return new ys(e,t)}Wn.call(this);this.type="Line";this.geometry=e!==undefined?e:new ca;this.material=t!==undefined?t:new vs({color:Math.random()*16777215})}gs.prototype=Object.assign(Object.create(Wn.prototype),{constructor:gs,isLine:true,raycast:function(){var e=new Pt;var t=new ga;var i=new Un;return function r(n,a){var s=n.linePrecision;var o=s*s;var l=this.geometry;var u=this.matrixWorld;if(l.boundingSphere===null)l.computeBoundingSphere();i.copy(l.boundingSphere);i.applyMatrix4(u);if(n.ray.intersectsSphere(i)===false)return;e.getInverse(u);t.copy(n.ray).applyMatrix4(e);var h=new At;var c=new At;var f=new At;var d=new At;var p=this&&this.isLineSegments?2:1;if(l.isBufferGeometry){var m=l.index;var v=l.attributes;var g=v.position.array;if(m!==null){var y=m.array;for(var _=0,b=y.length-1;_<b;_+=p){var x=y[_];var w=y[_+1];h.fromArray(g,x*3);c.fromArray(g,w*3);var T=t.distanceSqToSegment(h,c,d,f);if(T>o)continue;d.applyMatrix4(this.matrixWorld);var M=n.ray.origin.distanceTo(d);if(M<n.near||M>n.far)continue;a.push({distance:M,point:f.clone().applyMatrix4(this.matrixWorld),index:_,face:null,faceIndex:null,object:this})}}else{for(var _=0,b=g.length/3-1;_<b;_+=p){h.fromArray(g,3*_);c.fromArray(g,3*_+3);var T=t.distanceSqToSegment(h,c,d,f);if(T>o)continue;d.applyMatrix4(this.matrixWorld);var M=n.ray.origin.distanceTo(d);if(M<n.near||M>n.far)continue;a.push({distance:M,point:f.clone().applyMatrix4(this.matrixWorld),index:_,face:null,faceIndex:null,object:this})}}}else if(l.isGeometry){var E=l.vertices;var S=E.length;for(var _=0;_<S-1;_+=p){var T=t.distanceSqToSegment(E[_],E[_+1],d,f);if(T>o)continue;d.applyMatrix4(this.matrixWorld);var M=n.ray.origin.distanceTo(d);if(M<n.near||M>n.far)continue;a.push({distance:M,point:f.clone().applyMatrix4(this.matrixWorld),index:_,face:null,faceIndex:null,object:this})}}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}});function ys(e,t){gs.call(this,e,t);this.type="LineSegments"}ys.prototype=Object.assign(Object.create(gs.prototype),{constructor:ys,isLineSegments:true});function _s(e,t){gs.call(this,e,t);this.type="LineLoop"}_s.prototype=Object.assign(Object.create(gs.prototype),{constructor:_s,isLineLoop:true});function bs(e){Cn.call(this);this.type="PointsMaterial";this.color=new _i(16777215);this.map=null;this.size=1;this.sizeAttenuation=true;this.lights=false;this.setValues(e)}bs.prototype=Object.create(Cn.prototype);bs.prototype.constructor=bs;bs.prototype.isPointsMaterial=true;bs.prototype.copy=function(e){Cn.prototype.copy.call(this,e);this.color.copy(e.color);this.map=e.map;this.size=e.size;this.sizeAttenuation=e.sizeAttenuation;return this};function xs(e,t){Wn.call(this);this.type="Points";this.geometry=e!==undefined?e:new ca;this.material=t!==undefined?t:new bs({color:Math.random()*16777215})}xs.prototype=Object.assign(Object.create(Wn.prototype),{constructor:xs,isPoints:true,raycast:function(){var e=new Pt;var t=new ga;var i=new Un;return function r(n,a){var s=this;var o=this.geometry;var l=this.matrixWorld;var u=n.params.Points.threshold;if(o.boundingSphere===null)o.computeBoundingSphere();i.copy(o.boundingSphere);i.applyMatrix4(l);i.radius+=u;if(n.ray.intersectsSphere(i)===false)return;e.getInverse(l);t.copy(n.ray).applyMatrix4(e);var h=u/((this.scale.x+this.scale.y+this.scale.z)/3);var c=h*h;var f=new At;function d(e,i){var r=t.distanceSqToPoint(e);if(r<c){var o=t.closestPointToPoint(e);o.applyMatrix4(l);var u=n.ray.origin.distanceTo(o);if(u<n.near||u>n.far)return;a.push({distance:u,distanceToRay:Math.sqrt(r),point:o.clone(),index:i,face:null,object:s})}}if(o.isBufferGeometry){var p=o.index;var m=o.attributes;var v=m.position.array;if(p!==null){var g=p.array;for(var y=0,_=g.length;y<_;y++){var b=g[y];f.fromArray(v,b*3);d(f,b)}}else{for(var y=0,x=v.length/3;y<x;y++){f.fromArray(v,y*3);d(f,y)}}}else{var w=o.vertices;for(var y=0,x=w.length;y<x;y++){d(w[y],y)}}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}});function ws(){Wn.call(this);this.type="Group"}ws.prototype=Object.assign(Object.create(Wn.prototype),{constructor:ws});function Ts(e,t,i,r,n,a,s,o,l){wt.call(this,e,t,i,r,n,a,s,o,l);this.generateMipmaps=false;var u=this;function h(){requestAnimationFrame(h);if(e.readyState>=e.HAVE_CURRENT_DATA){u.needsUpdate=true}}h()}Ts.prototype=Object.create(wt.prototype);Ts.prototype.constructor=Ts;function Ms(e,t,i,r,n,a,s,o,l,u,h,c){wt.call(this,null,a,s,o,l,u,r,n,h,c);this.image={width:t,height:i};this.mipmaps=e;this.flipY=false;this.generateMipmaps=false}Ms.prototype=Object.create(wt.prototype);Ms.prototype.constructor=Ms;Ms.prototype.isCompressedTexture=true;function Es(e,t,i,r,n,a,s,o,l,u){u=u!==undefined?u:ze;if(u!==ze&&u!==je){throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat")}if(i===undefined&&u===ze)i=Ee;if(i===undefined&&u===je)i=Ie;wt.call(this,null,r,n,a,s,o,u,i,l);this.image={width:e,height:t};this.magFilter=s!==undefined?s:ve;this.minFilter=o!==undefined?o:ve;this.flipY=false;this.generateMipmaps=false}Es.prototype=Object.create(wt.prototype);Es.prototype.constructor=Es;Es.prototype.isDepthTexture=true;function Ss(e){ca.call(this);this.type="WireframeGeometry";var t=[];var i,r,n,a,s;var o=[0,0],l={},u,h,c;var f,d=["a","b","c"];var p;if(e&&e.isGeometry){var m=e.faces;for(i=0,n=m.length;i<n;i++){var v=m[i];for(r=0;r<3;r++){h=v[d[r]];c=v[d[(r+1)%3]];o[0]=Math.min(h,c);o[1]=Math.max(h,c);f=o[0]+","+o[1];if(l[f]===undefined){l[f]={index1:o[0],index2:o[1]}}}}for(f in l){u=l[f];p=e.vertices[u.index1];t.push(p.x,p.y,p.z);p=e.vertices[u.index2];t.push(p.x,p.y,p.z)}}else if(e&&e.isBufferGeometry){var g,y,_;var b,x,w;var T,M;p=new At;if(e.index!==null){g=e.attributes.position;y=e.index;_=e.groups;if(_.length===0){_=[{start:0,count:y.count,materialIndex:0}]}for(a=0,s=_.length;a<s;++a){b=_[a];x=b.start;w=b.count;for(i=x,n=x+w;i<n;i+=3){for(r=0;r<3;r++){h=y.getX(i+r);c=y.getX(i+(r+1)%3);o[0]=Math.min(h,c);o[1]=Math.max(h,c);f=o[0]+","+o[1];if(l[f]===undefined){l[f]={index1:o[0],index2:o[1]}}}}}for(f in l){u=l[f];p.fromBufferAttribute(g,u.index1);t.push(p.x,p.y,p.z);p.fromBufferAttribute(g,u.index2);t.push(p.x,p.y,p.z)}}else{g=e.attributes.position;for(i=0,n=g.count/3;i<n;i++){for(r=0;r<3;r++){T=3*i+r;p.fromBufferAttribute(g,T);t.push(p.x,p.y,p.z);M=3*i+(r+1)%3;p.fromBufferAttribute(g,M);t.push(p.x,p.y,p.z)}}}}this.addAttribute("position",new oa(t,3))}Ss.prototype=Object.create(ca.prototype);Ss.prototype.constructor=Ss;function As(e,t,i){Qn.call(this);this.type="ParametricGeometry";this.parameters={func:e,slices:t,stacks:i};this.fromBufferGeometry(new Ps(e,t,i));this.mergeVertices()}As.prototype=Object.create(Qn.prototype);As.prototype.constructor=As;function Ps(e,t,i){ca.call(this);this.type="ParametricBufferGeometry";this.parameters={func:e,slices:t,stacks:i};var r=[];var n=[];var a=[];var s=[];var o=1e-5;var l=new At;var u=new At,h=new At;var c=new At,f=new At;var d,p;var m=t+1;for(d=0;d<=i;d++){var v=d/i;for(p=0;p<=t;p++){var g=p/t;u=e(g,v,u);n.push(u.x,u.y,u.z);if(g-o>=0){h=e(g-o,v,h);c.subVectors(u,h)}else{h=e(g+o,v,h);c.subVectors(h,u)}if(v-o>=0){h=e(g,v-o,h);f.subVectors(u,h)}else{h=e(g,v+o,h);f.subVectors(h,u)}l.crossVectors(c,f).normalize();a.push(l.x,l.y,l.z);s.push(g,v)}}for(d=0;d<i;d++){for(p=0;p<t;p++){var y=d*m+p;var _=d*m+p+1;var b=(d+1)*m+p+1;var x=(d+1)*m+p;r.push(y,_,x);r.push(_,b,x)}}this.setIndex(r);this.addAttribute("position",new oa(n,3));this.addAttribute("normal",new oa(a,3));this.addAttribute("uv",new oa(s,2))}Ps.prototype=Object.create(ca.prototype);Ps.prototype.constructor=Ps;function Rs(e,t,i,r){Qn.call(this);this.type="PolyhedronGeometry";this.parameters={vertices:e,indices:t,radius:i,detail:r};this.fromBufferGeometry(new Ls(e,t,i,r));this.mergeVertices()}Rs.prototype=Object.create(Qn.prototype);Rs.prototype.constructor=Rs;function Ls(e,t,i,r){ca.call(this);this.type="PolyhedronBufferGeometry";this.parameters={vertices:e,indices:t,radius:i,detail:r};i=i||1;r=r||0;var n=[];var a=[];s(r);l(i);u();this.addAttribute("position",new oa(n,3));this.addAttribute("normal",new oa(n.slice(),3));this.addAttribute("uv",new oa(a,2));if(r===0){this.computeVertexNormals()}else{this.normalizeNormals()}function s(e){var i=new At;var r=new At;var n=new At;for(var a=0;a<t.length;a+=3){f(t[a+0],i);f(t[a+1],r);f(t[a+2],n);o(i,r,n,e)}}function o(e,t,i,r){var n=Math.pow(2,r);var a=[];var s,o;for(s=0;s<=n;s++){a[s]=[];var l=e.clone().lerp(i,s/n);var u=t.clone().lerp(i,s/n);var h=n-s;for(o=0;o<=h;o++){if(o===0&&s===n){a[s][o]=l}else{a[s][o]=l.clone().lerp(u,o/h)}}}for(s=0;s<n;s++){for(o=0;o<2*(n-s)-1;o++){var f=Math.floor(o/2);if(o%2===0){c(a[s][f+1]);c(a[s+1][f]);c(a[s][f])}else{c(a[s][f+1]);c(a[s+1][f+1]);c(a[s+1][f])}}}}function l(e){var t=new At;for(var i=0;i<n.length;i+=3){t.x=n[i+0];t.y=n[i+1];t.z=n[i+2];t.normalize().multiplyScalar(e);n[i+0]=t.x;n[i+1]=t.y;n[i+2]=t.z}}function u(){var e=new At;for(var t=0;t<n.length;t+=3){e.x=n[t+0];e.y=n[t+1];e.z=n[t+2];var i=m(e)/2/Math.PI+.5;var r=v(e)/Math.PI+.5;a.push(i,1-r)}d();h()}function h(){for(var e=0;e<a.length;e+=6){var t=a[e+0];var i=a[e+2];var r=a[e+4];var n=Math.max(t,i,r);var s=Math.min(t,i,r);if(n>.9&&s<.1){if(t<.2)a[e+0]+=1;if(i<.2)a[e+2]+=1;if(r<.2)a[e+4]+=1}}}function c(e){n.push(e.x,e.y,e.z)}function f(t,i){var r=t*3;i.x=e[r+0];i.y=e[r+1];i.z=e[r+2]}function d(){var e=new At;var t=new At;var i=new At;var r=new At;var s=new bt;var o=new bt;var l=new bt;for(var u=0,h=0;u<n.length;u+=9,h+=6){e.set(n[u+0],n[u+1],n[u+2]);t.set(n[u+3],n[u+4],n[u+5]);i.set(n[u+6],n[u+7],n[u+8]);s.set(a[h+0],a[h+1]);o.set(a[h+2],a[h+3]);l.set(a[h+4],a[h+5]);r.copy(e).add(t).add(i).divideScalar(3);var c=m(r);p(s,h+0,e,c);p(o,h+2,t,c);p(l,h+4,i,c)}}function p(e,t,i,r){if(r<0&&e.x===1){a[t]=e.x-1}if(i.x===0&&i.z===0){a[t]=r/2/Math.PI+.5}}function m(e){return Math.atan2(e.z,-e.x)}function v(e){return Math.atan2(-e.y,Math.sqrt(e.x*e.x+e.z*e.z))}}Ls.prototype=Object.create(ca.prototype);Ls.prototype.constructor=Ls;function Cs(e,t){Qn.call(this);this.type="TetrahedronGeometry";this.parameters={radius:e,detail:t};this.fromBufferGeometry(new Os(e,t));this.mergeVertices()}Cs.prototype=Object.create(Qn.prototype);Cs.prototype.constructor=Cs;function Os(e,t){var i=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1];var r=[2,1,0,0,3,2,1,3,0,2,3,1];Ls.call(this,i,r,e,t);this.type="TetrahedronBufferGeometry";this.parameters={radius:e,detail:t}}Os.prototype=Object.create(Ls.prototype);Os.prototype.constructor=Os;function Is(e,t){Qn.call(this);this.type="OctahedronGeometry";this.parameters={radius:e,detail:t};this.fromBufferGeometry(new Ds(e,t));this.mergeVertices()}Is.prototype=Object.create(Qn.prototype);Is.prototype.constructor=Is;function Ds(e,t){var i=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1];var r=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];Ls.call(this,i,r,e,t);this.type="OctahedronBufferGeometry";this.parameters={radius:e,detail:t}}Ds.prototype=Object.create(Ls.prototype);Ds.prototype.constructor=Ds;function ks(e,t){Qn.call(this);this.type="IcosahedronGeometry";this.parameters={radius:e,detail:t};this.fromBufferGeometry(new Us(e,t));this.mergeVertices()}ks.prototype=Object.create(Qn.prototype);ks.prototype.constructor=ks;function Us(e,t){var i=(1+Math.sqrt(5))/2;var r=[-1,i,0,1,i,0,-1,-i,0,1,-i,0,0,-1,i,0,1,i,0,-1,-i,0,1,-i,i,0,-1,i,0,1,-i,0,-1,-i,0,1];var n=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];Ls.call(this,r,n,e,t);this.type="IcosahedronBufferGeometry";this.parameters={radius:e,detail:t}}Us.prototype=Object.create(Ls.prototype);Us.prototype.constructor=Us;function Fs(e,t){Qn.call(this);this.type="DodecahedronGeometry";this.parameters={radius:e,detail:t};this.fromBufferGeometry(new Ns(e,t));this.mergeVertices()}Fs.prototype=Object.create(Qn.prototype);Fs.prototype.constructor=Fs;function Ns(e,t){var i=(1+Math.sqrt(5))/2;var r=1/i;var n=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-r,-i,0,-r,i,0,r,-i,0,r,i,-r,-i,0,-r,i,0,r,-i,0,r,i,0,-i,0,-r,i,0,-r,-i,0,r,i,0,r];var a=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];Ls.call(this,n,a,e,t);this.type="DodecahedronBufferGeometry";this.parameters={radius:e,detail:t}}Ns.prototype=Object.create(Ls.prototype);Ns.prototype.constructor=Ns;function Bs(e,t,i,r,n,a){Qn.call(this);this.type="TubeGeometry";this.parameters={path:e,tubularSegments:t,radius:i,radialSegments:r,closed:n};if(a!==undefined)console.warn("THREE.TubeGeometry: taper has been removed.");var s=new zs(e,t,i,r,n);this.tangents=s.tangents;this.normals=s.normals;this.binormals=s.binormals;this.fromBufferGeometry(s);this.mergeVertices()}Bs.prototype=Object.create(Qn.prototype);Bs.prototype.constructor=Bs;function zs(e,t,i,r,n){ca.call(this);this.type="TubeBufferGeometry";this.parameters={path:e,tubularSegments:t,radius:i,radialSegments:r,closed:n};t=t||64;i=i||1;r=r||8;n=n||false;var a=e.computeFrenetFrames(t,n);this.tangents=a.tangents;this.normals=a.normals;this.binormals=a.binormals;var s=new At;var o=new At;var l=new bt;var u,h;var c=[];var f=[];var d=[];var p=[];m();this.setIndex(p);this.addAttribute("position",new oa(c,3));this.addAttribute("normal",new oa(f,3));this.addAttribute("uv",new oa(d,2));function m(){for(u=0;u<t;u++){v(u)}v(n===false?t:0);y();g()}function v(n){var l=e.getPointAt(n/t);var u=a.normals[n];var d=a.binormals[n];for(h=0;h<=r;h++){var p=h/r*Math.PI*2;var m=Math.sin(p);var v=-Math.cos(p);o.x=v*u.x+m*d.x;o.y=v*u.y+m*d.y;o.z=v*u.z+m*d.z;o.normalize();f.push(o.x,o.y,o.z);s.x=l.x+i*o.x;s.y=l.y+i*o.y;s.z=l.z+i*o.z;c.push(s.x,s.y,s.z)}}function g(){for(h=1;h<=t;h++){for(u=1;u<=r;u++){var e=(r+1)*(h-1)+(u-1);var i=(r+1)*h+(u-1);var n=(r+1)*h+u;var a=(r+1)*(h-1)+u;p.push(e,i,a);p.push(i,n,a)}}}function y(){for(u=0;u<=t;u++){for(h=0;h<=r;h++){l.x=u/t;l.y=h/r;d.push(l.x,l.y)}}}}zs.prototype=Object.create(ca.prototype);zs.prototype.constructor=zs;function js(e,t,i,r,n,a,s){Qn.call(this);this.type="TorusKnotGeometry";this.parameters={radius:e,tube:t,tubularSegments:i,radialSegments:r,p:n,q:a};if(s!==undefined)console.warn("THREE.TorusKnotGeometry: heightScale has been deprecated. Use .scale( x, y, z ) instead.");this.fromBufferGeometry(new Gs(e,t,i,r,n,a));this.mergeVertices()}js.prototype=Object.create(Qn.prototype);js.prototype.constructor=js;function Gs(e,t,i,r,n,a){ca.call(this);this.type="TorusKnotBufferGeometry";this.parameters={radius:e,tube:t,tubularSegments:i,radialSegments:r,p:n,q:a};e=e||100;t=t||40;i=Math.floor(i)||64;r=Math.floor(r)||8;n=n||2;a=a||3;var s=[];var o=[];var l=[];var u=[];var h,c;var f=new At;var d=new At;var p=new At;var m=new At;var v=new At;var g=new At;var y=new At;for(h=0;h<=i;++h){var _=h/i*n*Math.PI*2;A(_,n,a,e,p);A(_+.01,n,a,e,m);g.subVectors(m,p);y.addVectors(m,p);v.crossVectors(g,y);y.crossVectors(v,g);v.normalize();y.normalize();for(c=0;c<=r;++c){var b=c/r*Math.PI*2;var x=-t*Math.cos(b);var w=t*Math.sin(b);f.x=p.x+(x*y.x+w*v.x);f.y=p.y+(x*y.y+w*v.y);f.z=p.z+(x*y.z+w*v.z);o.push(f.x,f.y,f.z);d.subVectors(f,p).normalize();l.push(d.x,d.y,d.z);u.push(h/i);u.push(c/r)}}for(c=1;c<=i;c++){for(h=1;h<=r;h++){var T=(r+1)*(c-1)+(h-1);var M=(r+1)*c+(h-1);var E=(r+1)*c+h;var S=(r+1)*(c-1)+h;s.push(T,M,S);s.push(M,E,S)}}this.setIndex(s);this.addAttribute("position",new oa(o,3));this.addAttribute("normal",new oa(l,3));this.addAttribute("uv",new oa(u,2));function A(e,t,i,r,n){var a=Math.cos(e);var s=Math.sin(e);var o=i/t*e;var l=Math.cos(o);n.x=r*(2+l)*.5*a;n.y=r*(2+l)*s*.5;n.z=r*Math.sin(o)*.5}}Gs.prototype=Object.create(ca.prototype);Gs.prototype.constructor=Gs;function Hs(e,t,i,r,n){Qn.call(this);this.type="TorusGeometry";this.parameters={radius:e,tube:t,radialSegments:i,tubularSegments:r,arc:n};this.fromBufferGeometry(new Vs(e,t,i,r,n));this.mergeVertices()}Hs.prototype=Object.create(Qn.prototype);Hs.prototype.constructor=Hs;function Vs(e,t,i,r,n){ca.call(this);this.type="TorusBufferGeometry";this.parameters={radius:e,tube:t,radialSegments:i,tubularSegments:r,arc:n};e=e||100;t=t||40;i=Math.floor(i)||8;r=Math.floor(r)||6;n=n||Math.PI*2;var a=[];var s=[];var o=[];var l=[];var u=new At;var h=new At;var c=new At;var f,d;for(f=0;f<=i;f++){for(d=0;d<=r;d++){var p=d/r*n;var m=f/i*Math.PI*2;h.x=(e+t*Math.cos(m))*Math.cos(p);h.y=(e+t*Math.cos(m))*Math.sin(p);h.z=t*Math.sin(m);s.push(h.x,h.y,h.z);u.x=e*Math.cos(p);u.y=e*Math.sin(p);c.subVectors(h,u).normalize();o.push(c.x,c.y,c.z);l.push(d/r);l.push(f/i)}}for(f=1;f<=i;f++){for(d=1;d<=r;d++){var v=(r+1)*f+d-1;var g=(r+1)*(f-1)+d-1;var y=(r+1)*(f-1)+d;var _=(r+1)*f+d;a.push(v,g,_);a.push(g,y,_)}}this.setIndex(a);this.addAttribute("position",new oa(s,3));this.addAttribute("normal",new oa(o,3));this.addAttribute("uv",new oa(l,2))}Vs.prototype=Object.create(ca.prototype);Vs.prototype.constructor=Vs;var Ws={area:function(e){var t=e.length;var i=0;for(var r=t-1,n=0;n<t;r=n++){i+=e[r].x*e[n].y-e[n].x*e[r].y}return i*.5},triangulate:function(){function e(e,t,i,r,n,a){var s;var o,l,u,h;var c,f,d,p;o=e[a[t]].x;l=e[a[t]].y
;u=e[a[i]].x;h=e[a[i]].y;c=e[a[r]].x;f=e[a[r]].y;if((u-o)*(f-l)-(h-l)*(c-o)<=0)return false;var m,v,g,y,_,b;var x,w,T,M,E,S;var A,P,R;m=c-u;v=f-h;g=o-c;y=l-f;_=u-o;b=h-l;for(s=0;s<n;s++){d=e[a[s]].x;p=e[a[s]].y;if(d===o&&p===l||d===u&&p===h||d===c&&p===f)continue;x=d-o;w=p-l;T=d-u;M=p-h;E=d-c;S=p-f;R=m*M-v*T;A=_*w-b*x;P=g*S-y*E;if(R>=-Number.EPSILON&&P>=-Number.EPSILON&&A>=-Number.EPSILON)return false}return true}return function t(i,r){var n=i.length;if(n<3)return null;var a=[],s=[],o=[];var l,u,h;if(Ws.area(i)>0){for(u=0;u<n;u++)s[u]=u}else{for(u=0;u<n;u++)s[u]=n-1-u}var c=n;var f=2*c;for(u=c-1;c>2;){if(f--<=0){console.warn("THREE.ShapeUtils: Unable to triangulate polygon! in triangulate()");if(r)return o;return a}l=u;if(c<=l)l=0;u=l+1;if(c<=u)u=0;h=u+1;if(c<=h)h=0;if(e(i,l,u,h,c,s)){var d,p,m,v,g;d=s[l];p=s[u];m=s[h];a.push([i[d],i[p],i[m]]);o.push([s[l],s[u],s[h]]);for(v=u,g=u+1;g<c;v++,g++){s[v]=s[g]}c--;f=2*c}}if(r)return o;return a}}(),triangulateShape:function(e,t){function i(e){var t=e.length;if(t>2&&e[t-1].equals(e[0])){e.pop()}}i(e);t.forEach(i);function r(e,t,i){if(e.x!==t.x){if(e.x<t.x){return e.x<=i.x&&i.x<=t.x}else{return t.x<=i.x&&i.x<=e.x}}else{if(e.y<t.y){return e.y<=i.y&&i.y<=t.y}else{return t.y<=i.y&&i.y<=e.y}}}function n(e,t,i,n,a){var s=t.x-e.x,o=t.y-e.y;var l=n.x-i.x,u=n.y-i.y;var h=e.x-i.x;var c=e.y-i.y;var f=o*l-s*u;var d=o*h-s*c;if(Math.abs(f)>Number.EPSILON){var p;if(f>0){if(d<0||d>f)return[];p=u*h-l*c;if(p<0||p>f)return[]}else{if(d>0||d<f)return[];p=u*h-l*c;if(p>0||p<f)return[]}if(p===0){if(a&&(d===0||d===f))return[];return[e]}if(p===f){if(a&&(d===0||d===f))return[];return[t]}if(d===0)return[i];if(d===f)return[n];var m=p/f;return[{x:e.x+m*s,y:e.y+m*o}]}else{if(d!==0||u*h!==l*c)return[];var v=s===0&&o===0;var g=l===0&&u===0;if(v&&g){if(e.x!==i.x||e.y!==i.y)return[];return[e]}if(v){if(!r(i,n,e))return[];return[e]}if(g){if(!r(e,t,i))return[];return[i]}var y,_,b,x;var w,T,M,E;if(s!==0){if(e.x<t.x){y=e;b=e.x;_=t;x=t.x}else{y=t;b=t.x;_=e;x=e.x}if(i.x<n.x){w=i;M=i.x;T=n;E=n.x}else{w=n;M=n.x;T=i;E=i.x}}else{if(e.y<t.y){y=e;b=e.y;_=t;x=t.y}else{y=t;b=t.y;_=e;x=e.y}if(i.y<n.y){w=i;M=i.y;T=n;E=n.y}else{w=n;M=n.y;T=i;E=i.y}}if(b<=M){if(x<M)return[];if(x===M){if(a)return[];return[w]}if(x<=E)return[w,_];return[w,T]}else{if(b>E)return[];if(b===E){if(a)return[];return[y]}if(x<=E)return[y,_];return[y,T]}}}function a(e,t,i,r){var n=t.x-e.x,a=t.y-e.y;var s=i.x-e.x,o=i.y-e.y;var l=r.x-e.x,u=r.y-e.y;var h=n*o-a*s;var c=n*u-a*l;if(Math.abs(h)>Number.EPSILON){var f=l*o-u*s;if(h>0){return c>=0&&f>=0}else{return c>=0||f>=0}}else{return c>0}}function s(e,t){var i=e.concat();var r;function s(e,t){var n=i.length-1;var s=e-1;if(s<0)s=n;var o=e+1;if(o>n)o=0;var l=a(i[e],i[s],i[o],r[t]);if(!l){return false}var u=r.length-1;var h=t-1;if(h<0)h=u;var c=t+1;if(c>u)c=0;l=a(r[t],r[h],r[c],i[e]);if(!l){return false}return true}function o(e,t){var r,a,s;for(r=0;r<i.length;r++){a=r+1;a%=i.length;s=n(e,t,i[r],i[a],true);if(s.length>0)return true}return false}var l=[];function u(e,i){var r,a,s,o,u;for(r=0;r<l.length;r++){a=t[l[r]];for(s=0;s<a.length;s++){o=s+1;o%=a.length;u=n(e,i,a[s],a[o],true);if(u.length>0)return true}}return false}var h,c,f,d,p,m,v=[],g,y,_,b;for(var x=0,w=t.length;x<w;x++){l.push(x)}var T=0;var M=l.length*2;while(l.length>0){M--;if(M<0){console.log('THREE.ShapeUtils: Infinite Loop! Holes left:" + indepHoles.length + ", Probably Hole outside Shape!');break}for(c=T;c<i.length;c++){f=i[c];h=-1;for(var x=0;x<l.length;x++){p=l[x];m=f.x+":"+f.y+":"+p;if(v[m]!==undefined)continue;r=t[p];for(var E=0;E<r.length;E++){d=r[E];if(!s(c,E))continue;if(o(f,d))continue;if(u(f,d))continue;h=E;l.splice(x,1);g=i.slice(0,c+1);y=i.slice(c);_=r.slice(h);b=r.slice(0,h+1);i=g.concat(_).concat(b).concat(y);T=c;break}if(h>=0)break;v[m]=true}if(h>=0)break}}return i}var o,l,u,h,c,f,d={};var p=e.concat();for(var m=0,v=t.length;m<v;m++){Array.prototype.push.apply(p,t[m])}for(o=0,l=p.length;o<l;o++){c=p[o].x+":"+p[o].y;if(d[c]!==undefined){console.warn("THREE.ShapeUtils: Duplicate point",c,o)}d[c]=o}var g=s(e,t);var y=Ws.triangulate(g,false);for(o=0,l=y.length;o<l;o++){h=y[o];for(u=0;u<3;u++){c=h[u].x+":"+h[u].y;f=d[c];if(f!==undefined){h[u]=f}}}return y.concat()},isClockWise:function(e){return Ws.area(e)<0}};function Xs(e,t){Qn.call(this);this.type="ExtrudeGeometry";this.parameters={shapes:e,options:t};this.fromBufferGeometry(new Ys(e,t));this.mergeVertices()}Xs.prototype=Object.create(Qn.prototype);Xs.prototype.constructor=Xs;function Ys(e,t){if(typeof e==="undefined"){return}ca.call(this);this.type="ExtrudeBufferGeometry";e=Array.isArray(e)?e:[e];this.addShapeList(e,t);this.computeVertexNormals()}Ys.prototype=Object.create(ca.prototype);Ys.prototype.constructor=Ys;Ys.prototype.getArrays=function(){var e=this.getAttribute("position");var t=e?Array.prototype.slice.call(e.array):[];var i=this.getAttribute("uv");var r=i?Array.prototype.slice.call(i.array):[];var n=this.index;var a=n?Array.prototype.slice.call(n.array):[];return{position:t,uv:r,index:a}};Ys.prototype.addShapeList=function(e,t){var i=e.length;t.arrays=this.getArrays();for(var r=0;r<i;r++){var n=e[r];this.addShape(n,t)}this.setIndex(t.arrays.index);this.addAttribute("position",new oa(t.arrays.position,3));this.addAttribute("uv",new oa(t.arrays.uv,2))};Ys.prototype.addShape=function(e,t){var i=t.arrays?t.arrays:this.getArrays();var r=i.position;var n=i.index;var a=i.uv;var s=[];var o=t.amount!==undefined?t.amount:100;var l=t.bevelThickness!==undefined?t.bevelThickness:6;var u=t.bevelSize!==undefined?t.bevelSize:l-2;var h=t.bevelSegments!==undefined?t.bevelSegments:3;var c=t.bevelEnabled!==undefined?t.bevelEnabled:true;var f=t.curveSegments!==undefined?t.curveSegments:12;var d=t.steps!==undefined?t.steps:1;var p=t.extrudePath;var m,v=false;var g=t.UVGenerator!==undefined?t.UVGenerator:Xs.WorldUVGenerator;var y,_,b,x;if(p){m=p.getSpacedPoints(d);v=true;c=false;y=t.frames!==undefined?t.frames:p.computeFrenetFrames(d,false);_=new At;b=new At;x=new At}if(!c){h=0;l=0;u=0}var w,T,M;var E=this;var S=e.extractPoints(f);var A=S.shape;var P=S.holes;var R=!Ws.isClockWise(A);if(R){A=A.reverse();for(T=0,M=P.length;T<M;T++){w=P[T];if(Ws.isClockWise(w)){P[T]=w.reverse()}}}var L=Ws.triangulateShape(A,P);var C=A;for(T=0,M=P.length;T<M;T++){w=P[T];A=A.concat(w)}function O(e,t,i){if(!t)console.error("THREE.ExtrudeGeometry: vec does not exist");return t.clone().multiplyScalar(i).add(e)}var I,D,k,U,F,N=A.length,B,z=L.length;function j(e,t,i){var r,n,a;var s=e.x-t.x,o=e.y-t.y;var l=i.x-e.x,u=i.y-e.y;var h=s*s+o*o;var c=s*u-o*l;if(Math.abs(c)>Number.EPSILON){var f=Math.sqrt(h);var d=Math.sqrt(l*l+u*u);var p=t.x-o/f;var m=t.y+s/f;var v=i.x-u/d;var g=i.y+l/d;var y=((v-p)*u-(g-m)*l)/(s*u-o*l);r=p+s*y-e.x;n=m+o*y-e.y;var _=r*r+n*n;if(_<=2){return new bt(r,n)}else{a=Math.sqrt(_/2)}}else{var b=false;if(s>Number.EPSILON){if(l>Number.EPSILON){b=true}}else{if(s<-Number.EPSILON){if(l<-Number.EPSILON){b=true}}else{if(Math.sign(o)===Math.sign(u)){b=true}}}if(b){r=-o;n=s;a=Math.sqrt(h)}else{r=s;n=o;a=Math.sqrt(h/2)}}return new bt(r/a,n/a)}var G=[];for(var H=0,V=C.length,W=V-1,X=H+1;H<V;H++,W++,X++){if(W===V)W=0;if(X===V)X=0;G[H]=j(C[H],C[W],C[X])}var Y=[],q,$=G.concat();for(T=0,M=P.length;T<M;T++){w=P[T];q=[];for(H=0,V=w.length,W=V-1,X=H+1;H<V;H++,W++,X++){if(W===V)W=0;if(X===V)X=0;q[H]=j(w[H],w[W],w[X])}Y.push(q);$=$.concat(q)}for(I=0;I<h;I++){k=I/h;U=l*Math.cos(k*Math.PI/2);D=u*Math.sin(k*Math.PI/2);for(H=0,V=C.length;H<V;H++){F=O(C[H],G[H],D);ee(F.x,F.y,-U)}for(T=0,M=P.length;T<M;T++){w=P[T];q=Y[T];for(H=0,V=w.length;H<V;H++){F=O(w[H],q[H],D);ee(F.x,F.y,-U)}}}D=u;for(H=0;H<N;H++){F=c?O(A[H],$[H],D):A[H];if(!v){ee(F.x,F.y,0)}else{b.copy(y.normals[0]).multiplyScalar(F.x);_.copy(y.binormals[0]).multiplyScalar(F.y);x.copy(m[0]).add(b).add(_);ee(x.x,x.y,x.z)}}var Z;for(Z=1;Z<=d;Z++){for(H=0;H<N;H++){F=c?O(A[H],$[H],D):A[H];if(!v){ee(F.x,F.y,o/d*Z)}else{b.copy(y.normals[Z]).multiplyScalar(F.x);_.copy(y.binormals[Z]).multiplyScalar(F.y);x.copy(m[Z]).add(b).add(_);ee(x.x,x.y,x.z)}}}for(I=h-1;I>=0;I--){k=I/h;U=l*Math.cos(k*Math.PI/2);D=u*Math.sin(k*Math.PI/2);for(H=0,V=C.length;H<V;H++){F=O(C[H],G[H],D);ee(F.x,F.y,o+U)}for(T=0,M=P.length;T<M;T++){w=P[T];q=Y[T];for(H=0,V=w.length;H<V;H++){F=O(w[H],q[H],D);if(!v){ee(F.x,F.y,o+U)}else{ee(F.x,F.y+m[d-1].y,m[d-1].x+U)}}}}J();Q();function J(){var e=r.length/3;if(c){var i=0;var n=N*i;for(H=0;H<z;H++){B=L[H];te(B[2]+n,B[1]+n,B[0]+n)}i=d+h*2;n=N*i;for(H=0;H<z;H++){B=L[H];te(B[0]+n,B[1]+n,B[2]+n)}}else{for(H=0;H<z;H++){B=L[H];te(B[2],B[1],B[0])}for(H=0;H<z;H++){B=L[H];te(B[0]+N*d,B[1]+N*d,B[2]+N*d)}}E.addGroup(e,r.length/3-e,t.material!==undefined?t.material:0)}function Q(){var e=r.length/3;var i=0;K(C,i);i+=C.length;for(T=0,M=P.length;T<M;T++){w=P[T];K(w,i);i+=w.length}E.addGroup(e,r.length/3-e,t.extrudeMaterial!==undefined?t.extrudeMaterial:1)}function K(e,t){var i,r;H=e.length;while(--H>=0){i=H;r=H-1;if(r<0)r=e.length-1;var n=0,a=d+h*2;for(n=0;n<a;n++){var s=N*n;var o=N*(n+1);var l=t+i+s,u=t+r+s,c=t+r+o,f=t+i+o;ie(l,u,c,f,e,n,a,i,r)}}}function ee(e,t,i){s.push(e);s.push(t);s.push(i)}function te(e,t,i){re(e);re(t);re(i);var n=r.length/3;var a=g.generateTopUV(E,r,n-3,n-2,n-1);ne(a[0]);ne(a[1]);ne(a[2])}function ie(e,t,i,n,a,s,o,l,u){re(e);re(t);re(n);re(t);re(i);re(n);var h=r.length/3;var c=g.generateSideWallUV(E,r,h-6,h-3,h-2,h-1);ne(c[0]);ne(c[1]);ne(c[3]);ne(c[1]);ne(c[2]);ne(c[3])}function re(e){n.push(r.length/3);r.push(s[e*3+0]);r.push(s[e*3+1]);r.push(s[e*3+2])}function ne(e){a.push(e.x);a.push(e.y)}if(!t.arrays){this.setIndex(n);this.addAttribute("position",new oa(r,3));this.addAttribute("uv",new oa(t.arrays.uv,2))}};Xs.WorldUVGenerator={generateTopUV:function(e,t,i,r,n){var a=t[i*3];var s=t[i*3+1];var o=t[r*3];var l=t[r*3+1];var u=t[n*3];var h=t[n*3+1];return[new bt(a,s),new bt(o,l),new bt(u,h)]},generateSideWallUV:function(e,t,i,r,n,a){var s=t[i*3];var o=t[i*3+1];var l=t[i*3+2];var u=t[r*3];var h=t[r*3+1];var c=t[r*3+2];var f=t[n*3];var d=t[n*3+1];var p=t[n*3+2];var m=t[a*3];var v=t[a*3+1];var g=t[a*3+2];if(Math.abs(o-h)<.01){return[new bt(s,1-l),new bt(u,1-c),new bt(f,1-p),new bt(m,1-g)]}else{return[new bt(o,1-l),new bt(h,1-c),new bt(d,1-p),new bt(v,1-g)]}}};function qs(e,t){Qn.call(this);this.type="TextGeometry";this.parameters={text:e,parameters:t};this.fromBufferGeometry(new $s(e,t));this.mergeVertices()}qs.prototype=Object.create(Qn.prototype);qs.prototype.constructor=qs;function $s(e,t){t=t||{};var i=t.font;if(!(i&&i.isFont)){console.error("THREE.TextGeometry: font parameter is not an instance of THREE.Font.");return new Qn}var r=i.generateShapes(e,t.size,t.curveSegments);t.amount=t.height!==undefined?t.height:50;if(t.bevelThickness===undefined)t.bevelThickness=10;if(t.bevelSize===undefined)t.bevelSize=8;if(t.bevelEnabled===undefined)t.bevelEnabled=false;Ys.call(this,r,t);this.type="TextBufferGeometry"}$s.prototype=Object.create(Ys.prototype);$s.prototype.constructor=$s;function Zs(e,t,i,r,n,a,s){Qn.call(this);this.type="SphereGeometry";this.parameters={radius:e,widthSegments:t,heightSegments:i,phiStart:r,phiLength:n,thetaStart:a,thetaLength:s};this.fromBufferGeometry(new Js(e,t,i,r,n,a,s));this.mergeVertices()}Zs.prototype=Object.create(Qn.prototype);Zs.prototype.constructor=Zs;function Js(e,t,i,r,n,a,s){ca.call(this);this.type="SphereBufferGeometry";this.parameters={radius:e,widthSegments:t,heightSegments:i,phiStart:r,phiLength:n,thetaStart:a,thetaLength:s};e=e||50;t=Math.max(3,Math.floor(t)||8);i=Math.max(2,Math.floor(i)||6);r=r!==undefined?r:0;n=n!==undefined?n:Math.PI*2;a=a!==undefined?a:0;s=s!==undefined?s:Math.PI;var o=a+s;var l,u;var h=0;var c=[];var f=new At;var d=new At;var p=[];var m=[];var v=[];var g=[];for(u=0;u<=i;u++){var y=[];var _=u/i;for(l=0;l<=t;l++){var b=l/t;f.x=-e*Math.cos(r+b*n)*Math.sin(a+_*s);f.y=e*Math.cos(a+_*s);f.z=e*Math.sin(r+b*n)*Math.sin(a+_*s);m.push(f.x,f.y,f.z);d.set(f.x,f.y,f.z).normalize();v.push(d.x,d.y,d.z);g.push(b,1-_);y.push(h++)}c.push(y)}for(u=0;u<i;u++){for(l=0;l<t;l++){var x=c[u][l+1];var w=c[u][l];var T=c[u+1][l];var M=c[u+1][l+1];if(u!==0||a>0)p.push(x,w,M);if(u!==i-1||o<Math.PI)p.push(w,T,M)}}this.setIndex(p);this.addAttribute("position",new oa(m,3));this.addAttribute("normal",new oa(v,3));this.addAttribute("uv",new oa(g,2))}Js.prototype=Object.create(ca.prototype);Js.prototype.constructor=Js;function Qs(e,t,i,r,n,a){Qn.call(this);this.type="RingGeometry";this.parameters={innerRadius:e,outerRadius:t,thetaSegments:i,phiSegments:r,thetaStart:n,thetaLength:a};this.fromBufferGeometry(new Ks(e,t,i,r,n,a));this.mergeVertices()}Qs.prototype=Object.create(Qn.prototype);Qs.prototype.constructor=Qs;function Ks(e,t,i,r,n,a){ca.call(this);this.type="RingBufferGeometry";this.parameters={innerRadius:e,outerRadius:t,thetaSegments:i,phiSegments:r,thetaStart:n,thetaLength:a};e=e||20;t=t||50;n=n!==undefined?n:0;a=a!==undefined?a:Math.PI*2;i=i!==undefined?Math.max(3,i):8;r=r!==undefined?Math.max(1,r):1;var s=[];var o=[];var l=[];var u=[];var h;var c=e;var f=(t-e)/r;var d=new At;var p=new bt;var m,v;for(m=0;m<=r;m++){for(v=0;v<=i;v++){h=n+v/i*a;d.x=c*Math.cos(h);d.y=c*Math.sin(h);o.push(d.x,d.y,d.z);l.push(0,0,1);p.x=(d.x/t+1)/2;p.y=(d.y/t+1)/2;u.push(p.x,p.y)}c+=f}for(m=0;m<r;m++){var g=m*(i+1);for(v=0;v<i;v++){h=v+g;var y=h;var _=h+i+1;var b=h+i+2;var x=h+1;s.push(y,_,x);s.push(_,b,x)}}this.setIndex(s);this.addAttribute("position",new oa(o,3));this.addAttribute("normal",new oa(l,3));this.addAttribute("uv",new oa(u,2))}Ks.prototype=Object.create(ca.prototype);Ks.prototype.constructor=Ks;function eo(e,t,i,r){Qn.call(this);this.type="LatheGeometry";this.parameters={points:e,segments:t,phiStart:i,phiLength:r};this.fromBufferGeometry(new to(e,t,i,r));this.mergeVertices()}eo.prototype=Object.create(Qn.prototype);eo.prototype.constructor=eo;function to(e,t,i,r){ca.call(this);this.type="LatheBufferGeometry";this.parameters={points:e,segments:t,phiStart:i,phiLength:r};t=Math.floor(t)||12;i=i||0;r=r||Math.PI*2;r=_t.clamp(r,0,Math.PI*2);var n=[];var a=[];var s=[];var o;var l=1/t;var u=new At;var h=new bt;var c,f;for(c=0;c<=t;c++){var d=i+c*l*r;var p=Math.sin(d);var m=Math.cos(d);for(f=0;f<=e.length-1;f++){u.x=e[f].x*p;u.y=e[f].y;u.z=e[f].x*m;a.push(u.x,u.y,u.z);h.x=c/t;h.y=f/(e.length-1);s.push(h.x,h.y)}}for(c=0;c<t;c++){for(f=0;f<e.length-1;f++){o=f+c*e.length;var v=o;var g=o+e.length;var y=o+e.length+1;var _=o+1;n.push(v,g,_);n.push(g,y,_)}}this.setIndex(n);this.addAttribute("position",new oa(a,3));this.addAttribute("uv",new oa(s,2));this.computeVertexNormals();if(r===Math.PI*2){var b=this.attributes.normal.array;var x=new At;var w=new At;var T=new At;o=t*e.length*3;for(c=0,f=0;c<e.length;c++,f+=3){x.x=b[f+0];x.y=b[f+1];x.z=b[f+2];w.x=b[o+f+0];w.y=b[o+f+1];w.z=b[o+f+2];T.addVectors(x,w).normalize();b[f+0]=b[o+f+0]=T.x;b[f+1]=b[o+f+1]=T.y;b[f+2]=b[o+f+2]=T.z}}}to.prototype=Object.create(ca.prototype);to.prototype.constructor=to;function io(e,t){Qn.call(this);this.type="ShapeGeometry";if(typeof t==="object"){console.warn("THREE.ShapeGeometry: Options parameter has been removed.");t=t.curveSegments}this.parameters={shapes:e,curveSegments:t};this.fromBufferGeometry(new ro(e,t));this.mergeVertices()}io.prototype=Object.create(Qn.prototype);io.prototype.constructor=io;function ro(e,t){ca.call(this);this.type="ShapeBufferGeometry";this.parameters={shapes:e,curveSegments:t};t=t||12;var i=[];var r=[];var n=[];var a=[];var s=0;var o=0;if(Array.isArray(e)===false){u(e)}else{for(var l=0;l<e.length;l++){u(e[l]);this.addGroup(s,o,l);s+=o;o=0}}this.setIndex(i);this.addAttribute("position",new oa(r,3));this.addAttribute("normal",new oa(n,3));this.addAttribute("uv",new oa(a,2));function u(e){var s,l,u;var h=r.length/3;var c=e.extractPoints(t);var f=c.shape;var d=c.holes;if(Ws.isClockWise(f)===false){f=f.reverse();for(s=0,l=d.length;s<l;s++){u=d[s];if(Ws.isClockWise(u)===true){d[s]=u.reverse()}}}var p=Ws.triangulateShape(f,d);for(s=0,l=d.length;s<l;s++){u=d[s];f=f.concat(u)}for(s=0,l=f.length;s<l;s++){var m=f[s];r.push(m.x,m.y,0);n.push(0,0,1);a.push(m.x,m.y)}for(s=0,l=p.length;s<l;s++){var v=p[s];var g=v[0]+h;var y=v[1]+h;var _=v[2]+h;i.push(g,y,_);o+=3}}}ro.prototype=Object.create(ca.prototype);ro.prototype.constructor=ro;function no(e,t){ca.call(this);this.type="EdgesGeometry";this.parameters={thresholdAngle:t};t=t!==undefined?t:1;var i=[];var r=Math.cos(_t.DEG2RAD*t);var n=[0,0],a={},s,o;var l,u=["a","b","c"];var h;if(e.isBufferGeometry){h=new Qn;h.fromBufferGeometry(e)}else{h=e.clone()}h.mergeVertices();h.computeFaceNormals();var c=h.vertices;var f=h.faces;for(var d=0,p=f.length;d<p;d++){var m=f[d];for(var v=0;v<3;v++){s=m[u[v]];o=m[u[(v+1)%3]];n[0]=Math.min(s,o);n[1]=Math.max(s,o);l=n[0]+","+n[1];if(a[l]===undefined){a[l]={index1:n[0],index2:n[1],face1:d,face2:undefined}}else{a[l].face2=d}}}for(l in a){var g=a[l];if(g.face2===undefined||f[g.face1].normal.dot(f[g.face2].normal)<=r){var y=c[g.index1];i.push(y.x,y.y,y.z);y=c[g.index2];i.push(y.x,y.y,y.z)}}this.addAttribute("position",new oa(i,3))}no.prototype=Object.create(ca.prototype);no.prototype.constructor=no;function ao(e,t,i,r,n,a,s,o){Qn.call(this);this.type="CylinderGeometry";this.parameters={radiusTop:e,radiusBottom:t,height:i,radialSegments:r,heightSegments:n,openEnded:a,thetaStart:s,thetaLength:o};this.fromBufferGeometry(new so(e,t,i,r,n,a,s,o));this.mergeVertices()}ao.prototype=Object.create(Qn.prototype);ao.prototype.constructor=ao;function so(e,t,i,r,n,a,s,o){ca.call(this);this.type="CylinderBufferGeometry";this.parameters={radiusTop:e,radiusBottom:t,height:i,radialSegments:r,heightSegments:n,openEnded:a,thetaStart:s,thetaLength:o};var l=this;e=e!==undefined?e:20;t=t!==undefined?t:20;i=i!==undefined?i:100;r=Math.floor(r)||8;n=Math.floor(n)||1;a=a!==undefined?a:false;s=s!==undefined?s:0;o=o!==undefined?o:2*Math.PI;var u=[];var h=[];var c=[];var f=[];var d=0;var p=[];var m=i/2;var v=0;g();if(a===false){if(e>0)y(true);if(t>0)y(false)}this.setIndex(u);this.addAttribute("position",new oa(h,3));this.addAttribute("normal",new oa(c,3));this.addAttribute("uv",new oa(f,2));function g(){var a,g;var y=new At;var _=new At;var b=0;var x=(t-e)/i;for(g=0;g<=n;g++){var w=[];var T=g/n;var M=T*(t-e)+e;for(a=0;a<=r;a++){var E=a/r;var S=E*o+s;var A=Math.sin(S);var P=Math.cos(S);_.x=M*A;_.y=-T*i+m;_.z=M*P;h.push(_.x,_.y,_.z);y.set(A,x,P).normalize();c.push(y.x,y.y,y.z);f.push(E,1-T);w.push(d++)}p.push(w)}for(a=0;a<r;a++){for(g=0;g<n;g++){var R=p[g][a];var L=p[g+1][a];var C=p[g+1][a+1];var O=p[g][a+1];u.push(R,L,O);u.push(L,C,O);b+=6}}l.addGroup(v,b,0);v+=b}function y(i){var n,a,p;var g=new bt;var y=new At;var _=0;var b=i===true?e:t;var x=i===true?1:-1;a=d;for(n=1;n<=r;n++){h.push(0,m*x,0);c.push(0,x,0);f.push(.5,.5);d++}p=d;for(n=0;n<=r;n++){var w=n/r;var T=w*o+s;var M=Math.cos(T);var E=Math.sin(T);y.x=b*E;y.y=m*x;y.z=b*M;h.push(y.x,y.y,y.z);c.push(0,x,0);g.x=M*.5+.5;g.y=E*.5*x+.5;f.push(g.x,g.y);d++}for(n=0;n<r;n++){var S=a+n;var A=p+n;if(i===true){u.push(A,A+1,S)}else{u.push(A+1,A,S)}_+=3}l.addGroup(v,_,i===true?1:2);v+=_}}so.prototype=Object.create(ca.prototype);so.prototype.constructor=so;function oo(e,t,i,r,n,a,s){ao.call(this,0,e,t,i,r,n,a,s);this.type="ConeGeometry";this.parameters={radius:e,height:t,radialSegments:i,heightSegments:r,openEnded:n,thetaStart:a,thetaLength:s}}oo.prototype=Object.create(ao.prototype);oo.prototype.constructor=oo;function lo(e,t,i,r,n,a,s){so.call(this,0,e,t,i,r,n,a,s);this.type="ConeBufferGeometry";this.parameters={radius:e,height:t,radialSegments:i,heightSegments:r,openEnded:n,thetaStart:a,thetaLength:s}}lo.prototype=Object.create(so.prototype);lo.prototype.constructor=lo;function uo(e,t,i,r){Qn.call(this);this.type="CircleGeometry";this.parameters={radius:e,segments:t,thetaStart:i,thetaLength:r};this.fromBufferGeometry(new ho(e,t,i,r));this.mergeVertices()}uo.prototype=Object.create(Qn.prototype);uo.prototype.constructor=uo;function ho(e,t,i,r){ca.call(this);this.type="CircleBufferGeometry";this.parameters={radius:e,segments:t,thetaStart:i,thetaLength:r};e=e||50;t=t!==undefined?Math.max(3,t):8;i=i!==undefined?i:0;r=r!==undefined?r:Math.PI*2;var n=[];var a=[];var s=[];var o=[];var l,u;var h=new At;var c=new bt;a.push(0,0,0);s.push(0,0,1);o.push(.5,.5);for(u=0,l=3;u<=t;u++,l+=3){var f=i+u/t*r;h.x=e*Math.cos(f);h.y=e*Math.sin(f);a.push(h.x,h.y,h.z);s.push(0,0,1);c.x=(a[l]/e+1)/2;c.y=(a[l+1]/e+1)/2;o.push(c.x,c.y)}for(l=1;l<=t;l++){n.push(l,l+1,0)}this.setIndex(n);this.addAttribute("position",new oa(a,3));this.addAttribute("normal",new oa(s,3));this.addAttribute("uv",new oa(o,2))}ho.prototype=Object.create(ca.prototype);ho.prototype.constructor=ho;var co=Object.freeze({WireframeGeometry:Ss,ParametricGeometry:As,ParametricBufferGeometry:Ps,TetrahedronGeometry:Cs,TetrahedronBufferGeometry:Os,OctahedronGeometry:Is,OctahedronBufferGeometry:Ds,IcosahedronGeometry:ks,IcosahedronBufferGeometry:Us,DodecahedronGeometry:Fs,DodecahedronBufferGeometry:Ns,PolyhedronGeometry:Rs,PolyhedronBufferGeometry:Ls,TubeGeometry:Bs,TubeBufferGeometry:zs,TorusKnotGeometry:js,TorusKnotBufferGeometry:Gs,TorusGeometry:Hs,TorusBufferGeometry:Vs,TextGeometry:qs,TextBufferGeometry:$s,SphereGeometry:Zs,SphereBufferGeometry:Js,RingGeometry:Qs,RingBufferGeometry:Ks,PlaneGeometry:pa,PlaneBufferGeometry:ma,LatheGeometry:eo,LatheBufferGeometry:to,ShapeGeometry:io,ShapeBufferGeometry:ro,ExtrudeGeometry:Xs,ExtrudeBufferGeometry:Ys,EdgesGeometry:no,ConeGeometry:oo,ConeBufferGeometry:lo,CylinderGeometry:ao,CylinderBufferGeometry:so,CircleGeometry:uo,CircleBufferGeometry:ho,BoxGeometry:fa,BoxBufferGeometry:da});function fo(e){Cn.call(this);this.type="ShadowMaterial";this.color=new _i(0);this.opacity=1;this.lights=true;this.transparent=true;this.setValues(e)}fo.prototype=Object.create(Cn.prototype);fo.prototype.constructor=fo;fo.prototype.isShadowMaterial=true;function po(e){On.call(this,e);this.type="RawShaderMaterial"}po.prototype=Object.create(On.prototype);po.prototype.constructor=po;po.prototype.isRawShaderMaterial=true;function mo(e){Cn.call(this);this.defines={STANDARD:""};this.type="MeshStandardMaterial";this.color=new _i(16777215);this.roughness=.5;this.metalness=.5;this.map=null;this.lightMap=null;this.lightMapIntensity=1;this.aoMap=null;this.aoMapIntensity=1;this.emissive=new _i(0);this.emissiveIntensity=1;this.emissiveMap=null;this.bumpMap=null;this.bumpScale=1;this.normalMap=null;this.normalScale=new bt(1,1);this.displacementMap=null;this.displacementScale=1;this.displacementBias=0;this.roughnessMap=null;this.metalnessMap=null;this.alphaMap=null;this.envMap=null;this.envMapIntensity=1;this.refractionRatio=.98;this.wireframe=false;this.wireframeLinewidth=1;this.wireframeLinecap="round";this.wireframeLinejoin="round";this.skinning=false;this.morphTargets=false;this.morphNormals=false;this.setValues(e)}mo.prototype=Object.create(Cn.prototype);mo.prototype.constructor=mo;mo.prototype.isMeshStandardMaterial=true;mo.prototype.copy=function(e){Cn.prototype.copy.call(this,e);this.defines={STANDARD:""};this.color.copy(e.color);this.roughness=e.roughness;this.metalness=e.metalness;this.map=e.map;this.lightMap=e.lightMap;this.lightMapIntensity=e.lightMapIntensity;this.aoMap=e.aoMap;this.aoMapIntensity=e.aoMapIntensity;this.emissive.copy(e.emissive);this.emissiveMap=e.emissiveMap;this.emissiveIntensity=e.emissiveIntensity;this.bumpMap=e.bumpMap;this.bumpScale=e.bumpScale;this.normalMap=e.normalMap;this.normalScale.copy(e.normalScale);this.displacementMap=e.displacementMap;this.displacementScale=e.displacementScale;this.displacementBias=e.displacementBias;this.roughnessMap=e.roughnessMap;this.metalnessMap=e.metalnessMap;this.alphaMap=e.alphaMap;this.envMap=e.envMap;this.envMapIntensity=e.envMapIntensity;this.refractionRatio=e.refractionRatio;this.wireframe=e.wireframe;this.wireframeLinewidth=e.wireframeLinewidth;this.wireframeLinecap=e.wireframeLinecap;this.wireframeLinejoin=e.wireframeLinejoin;this.skinning=e.skinning;this.morphTargets=e.morphTargets;this.morphNormals=e.morphNormals;return this};function vo(e){mo.call(this);this.defines={PHYSICAL:""};this.type="MeshPhysicalMaterial";this.reflectivity=.5;this.clearCoat=0;this.clearCoatRoughness=0;this.setValues(e)}vo.prototype=Object.create(mo.prototype);vo.prototype.constructor=vo;vo.prototype.isMeshPhysicalMaterial=true;vo.prototype.copy=function(e){mo.prototype.copy.call(this,e);this.defines={PHYSICAL:""};this.reflectivity=e.reflectivity;this.clearCoat=e.clearCoat;this.clearCoatRoughness=e.clearCoatRoughness;return this};function go(e){Cn.call(this);this.type="MeshPhongMaterial";this.color=new _i(16777215);this.specular=new _i(1118481);this.shininess=30;this.map=null;this.lightMap=null;this.lightMapIntensity=1;this.aoMap=null;this.aoMapIntensity=1;this.emissive=new _i(0);this.emissiveIntensity=1;this.emissiveMap=null;this.bumpMap=null;this.bumpScale=1;this.normalMap=null;this.normalScale=new bt(1,1);this.displacementMap=null;this.displacementScale=1;this.displacementBias=0;this.specularMap=null;this.alphaMap=null;this.envMap=null;this.combine=J;this.reflectivity=1;this.refractionRatio=.98;this.wireframe=false;this.wireframeLinewidth=1;this.wireframeLinecap="round";this.wireframeLinejoin="round";this.skinning=false;this.morphTargets=false;this.morphNormals=false;this.setValues(e)}go.prototype=Object.create(Cn.prototype);go.prototype.constructor=go;go.prototype.isMeshPhongMaterial=true;go.prototype.copy=function(e){Cn.prototype.copy.call(this,e);this.color.copy(e.color);this.specular.copy(e.specular);this.shininess=e.shininess;this.map=e.map;this.lightMap=e.lightMap;this.lightMapIntensity=e.lightMapIntensity;this.aoMap=e.aoMap;this.aoMapIntensity=e.aoMapIntensity;this.emissive.copy(e.emissive);this.emissiveMap=e.emissiveMap;this.emissiveIntensity=e.emissiveIntensity;this.bumpMap=e.bumpMap;this.bumpScale=e.bumpScale;this.normalMap=e.normalMap;this.normalScale.copy(e.normalScale);this.displacementMap=e.displacementMap;this.displacementScale=e.displacementScale;this.displacementBias=e.displacementBias;this.specularMap=e.specularMap;this.alphaMap=e.alphaMap;this.envMap=e.envMap;this.combine=e.combine;this.reflectivity=e.reflectivity;this.refractionRatio=e.refractionRatio;this.wireframe=e.wireframe;this.wireframeLinewidth=e.wireframeLinewidth;this.wireframeLinecap=e.wireframeLinecap;this.wireframeLinejoin=e.wireframeLinejoin;this.skinning=e.skinning;this.morphTargets=e.morphTargets;this.morphNormals=e.morphNormals;return this};function yo(e){go.call(this);this.defines={TOON:""};this.type="MeshToonMaterial";this.gradientMap=null;this.setValues(e)}yo.prototype=Object.create(go.prototype);yo.prototype.constructor=yo;yo.prototype.isMeshToonMaterial=true;yo.prototype.copy=function(e){go.prototype.copy.call(this,e);this.gradientMap=e.gradientMap;return this};function _o(e){Cn.call(this);this.type="MeshNormalMaterial";this.bumpMap=null;this.bumpScale=1;this.normalMap=null;this.normalScale=new bt(1,1);this.displacementMap=null;this.displacementScale=1;this.displacementBias=0;this.wireframe=false;this.wireframeLinewidth=1;this.fog=false;this.lights=false;this.skinning=false;this.morphTargets=false;this.morphNormals=false;this.setValues(e)}_o.prototype=Object.create(Cn.prototype);_o.prototype.constructor=_o;_o.prototype.isMeshNormalMaterial=true;_o.prototype.copy=function(e){Cn.prototype.copy.call(this,e);this.bumpMap=e.bumpMap;this.bumpScale=e.bumpScale;this.normalMap=e.normalMap;this.normalScale.copy(e.normalScale);this.displacementMap=e.displacementMap;this.displacementScale=e.displacementScale;this.displacementBias=e.displacementBias;this.wireframe=e.wireframe;this.wireframeLinewidth=e.wireframeLinewidth;this.skinning=e.skinning;this.morphTargets=e.morphTargets;this.morphNormals=e.morphNormals;return this};function bo(e){Cn.call(this);this.type="MeshLambertMaterial";this.color=new _i(16777215);this.map=null;this.lightMap=null;this.lightMapIntensity=1;this.aoMap=null;this.aoMapIntensity=1;this.emissive=new _i(0);this.emissiveIntensity=1;this.emissiveMap=null;this.specularMap=null;this.alphaMap=null;this.envMap=null;this.combine=J;this.reflectivity=1;this.refractionRatio=.98;this.wireframe=false;this.wireframeLinewidth=1;this.wireframeLinecap="round";this.wireframeLinejoin="round";this.skinning=false;this.morphTargets=false;this.morphNormals=false;this.setValues(e)}bo.prototype=Object.create(Cn.prototype);bo.prototype.constructor=bo;bo.prototype.isMeshLambertMaterial=true;bo.prototype.copy=function(e){Cn.prototype.copy.call(this,e);this.color.copy(e.color);this.map=e.map;this.lightMap=e.lightMap;this.lightMapIntensity=e.lightMapIntensity;this.aoMap=e.aoMap;this.aoMapIntensity=e.aoMapIntensity;this.emissive.copy(e.emissive);this.emissiveMap=e.emissiveMap;this.emissiveIntensity=e.emissiveIntensity;this.specularMap=e.specularMap;this.alphaMap=e.alphaMap;this.envMap=e.envMap;this.combine=e.combine;this.reflectivity=e.reflectivity;this.refractionRatio=e.refractionRatio;this.wireframe=e.wireframe;this.wireframeLinewidth=e.wireframeLinewidth;this.wireframeLinecap=e.wireframeLinecap;this.wireframeLinejoin=e.wireframeLinejoin;this.skinning=e.skinning;this.morphTargets=e.morphTargets;this.morphNormals=e.morphNormals;return this};function xo(e){vs.call(this);this.type="LineDashedMaterial";this.scale=1;this.dashSize=3;this.gapSize=1;this.setValues(e)}xo.prototype=Object.create(vs.prototype);xo.prototype.constructor=xo;xo.prototype.isLineDashedMaterial=true;xo.prototype.copy=function(e){vs.prototype.copy.call(this,e);this.scale=e.scale;this.dashSize=e.dashSize;this.gapSize=e.gapSize;return this};var wo=Object.freeze({ShadowMaterial:fo,SpriteMaterial:hs,RawShaderMaterial:po,ShaderMaterial:On,PointsMaterial:bs,MeshPhysicalMaterial:vo,MeshStandardMaterial:mo,MeshPhongMaterial:go,MeshToonMaterial:yo,MeshNormalMaterial:_o,MeshLambertMaterial:bo,MeshDepthMaterial:In,MeshDistanceMaterial:Dn,MeshBasicMaterial:va,LineDashedMaterial:xo,LineBasicMaterial:vs,Material:Cn});var To={enabled:false,files:{},add:function(e,t){if(this.enabled===false)return;this.files[e]=t},get:function(e){if(this.enabled===false)return;return this.files[e]},remove:function(e){delete this.files[e]},clear:function(){this.files={}}};function Mo(e,t,i){var r=this;var n=false,a=0,s=0;this.onStart=undefined;this.onLoad=e;this.onProgress=t;this.onError=i;this.itemStart=function(e){s++;if(n===false){if(r.onStart!==undefined){r.onStart(e,a,s)}}n=true};this.itemEnd=function(e){a++;if(r.onProgress!==undefined){r.onProgress(e,a,s)}if(a===s){n=false;if(r.onLoad!==undefined){r.onLoad()}}};this.itemError=function(e){if(r.onError!==undefined){r.onError(e)}}}var Eo=new Mo;function So(e){this.manager=e!==undefined?e:Eo}Object.assign(So.prototype,{load:function(e,t,i,r){if(e===undefined)e="";if(this.path!==undefined)e=this.path+e;var n=this;var a=To.get(e);if(a!==undefined){n.manager.itemStart(e);setTimeout(function(){if(t)t(a);n.manager.itemEnd(e)},0);return a}var s=/^data:(.*?)(;base64)?,(.*)$/;var o=e.match(s);if(o){var l=o[1];var u=!!o[2];var h=o[3];h=window.decodeURIComponent(h);if(u)h=window.atob(h);try{var c;var f=(this.responseType||"").toLowerCase();switch(f){case"arraybuffer":case"blob":c=new ArrayBuffer(h.length);var d=new Uint8Array(c);for(var p=0;p<h.length;p++){d[p]=h.charCodeAt(p)}if(f==="blob"){c=new Blob([c],{type:l})}break;case"document":var m=new DOMParser;c=m.parseFromString(h,l);break;case"json":c=JSON.parse(h);break;default:c=h;break}window.setTimeout(function(){if(t)t(c);n.manager.itemEnd(e)},0)}catch(t){window.setTimeout(function(){if(r)r(t);n.manager.itemEnd(e);n.manager.itemError(e)},0)}}else{var v=new XMLHttpRequest;v.open("GET",e,true);v.addEventListener("load",function(i){var a=i.target.response;To.add(e,a);if(this.status===200){if(t)t(a);n.manager.itemEnd(e)}else if(this.status===0){console.warn("THREE.FileLoader: HTTP Status 0 received.");if(t)t(a);n.manager.itemEnd(e)}else{if(r)r(i);n.manager.itemEnd(e);n.manager.itemError(e)}},false);if(i!==undefined){v.addEventListener("progress",function(e){i(e)},false)}v.addEventListener("error",function(t){if(r)r(t);n.manager.itemEnd(e)
;n.manager.itemError(e)},false);if(this.responseType!==undefined)v.responseType=this.responseType;if(this.withCredentials!==undefined)v.withCredentials=this.withCredentials;if(v.overrideMimeType)v.overrideMimeType(this.mimeType!==undefined?this.mimeType:"text/plain");for(var g in this.requestHeader){v.setRequestHeader(g,this.requestHeader[g])}v.send(null)}n.manager.itemStart(e);return v},setPath:function(e){this.path=e;return this},setResponseType:function(e){this.responseType=e;return this},setWithCredentials:function(e){this.withCredentials=e;return this},setMimeType:function(e){this.mimeType=e;return this},setRequestHeader:function(e){this.requestHeader=e;return this}});function Ao(e){this.manager=e!==undefined?e:Eo;this._parser=null}Object.assign(Ao.prototype,{load:function(e,t,i,r){var n=this;var a=[];var s=new Ms;s.image=a;var o=new So(this.manager);o.setPath(this.path);o.setResponseType("arraybuffer");function l(l){o.load(e[l],function(e){var i=n._parser(e,true);a[l]={width:i.width,height:i.height,format:i.format,mipmaps:i.mipmaps};u+=1;if(u===6){if(i.mipmapCount===1)s.minFilter=_e;s.format=i.format;s.needsUpdate=true;if(t)t(s)}},i,r)}if(Array.isArray(e)){var u=0;for(var h=0,c=e.length;h<c;++h){l(h)}}else{o.load(e,function(e){var i=n._parser(e,true);if(i.isCubemap){var r=i.mipmaps.length/i.mipmapCount;for(var o=0;o<r;o++){a[o]={mipmaps:[]};for(var l=0;l<i.mipmapCount;l++){a[o].mipmaps.push(i.mipmaps[o*i.mipmapCount+l]);a[o].format=i.format;a[o].width=i.width;a[o].height=i.height}}}else{s.image.width=i.width;s.image.height=i.height;s.mipmaps=i.mipmaps}if(i.mipmapCount===1){s.minFilter=_e}s.format=i.format;s.needsUpdate=true;if(t)t(s)},i,r)}return s},setPath:function(e){this.path=e;return this}});function Po(e){this.manager=e!==undefined?e:Eo;this._parser=null}Object.assign(Po.prototype,{load:function(e,t,i,r){var n=this;var a=new Rt;var s=new So(this.manager);s.setResponseType("arraybuffer");s.load(e,function(e){var i=n._parser(e);if(!i)return;if(undefined!==i.image){a.image=i.image}else if(undefined!==i.data){a.image.width=i.width;a.image.height=i.height;a.image.data=i.data}a.wrapS=undefined!==i.wrapS?i.wrapS:pe;a.wrapT=undefined!==i.wrapT?i.wrapT:pe;a.magFilter=undefined!==i.magFilter?i.magFilter:_e;a.minFilter=undefined!==i.minFilter?i.minFilter:xe;a.anisotropy=undefined!==i.anisotropy?i.anisotropy:1;if(undefined!==i.format){a.format=i.format}if(undefined!==i.type){a.type=i.type}if(undefined!==i.mipmaps){a.mipmaps=i.mipmaps}if(1===i.mipmapCount){a.minFilter=_e}a.needsUpdate=true;if(t)t(a,i)},i,r);return a}});function Ro(e){this.manager=e!==undefined?e:Eo}Object.assign(Ro.prototype,{crossOrigin:"Anonymous",load:function(e,t,i,r){if(e===undefined)e="";if(this.path!==undefined)e=this.path+e;var n=this;var a=To.get(e);if(a!==undefined){n.manager.itemStart(e);setTimeout(function(){if(t)t(a);n.manager.itemEnd(e)},0);return a}var s=document.createElementNS("http://www.w3.org/1999/xhtml","img");s.addEventListener("load",function(){To.add(e,this);if(t)t(this);n.manager.itemEnd(e)},false);s.addEventListener("error",function(t){if(r)r(t);n.manager.itemEnd(e);n.manager.itemError(e)},false);if(e.substr(0,5)!=="data:"){if(this.crossOrigin!==undefined)s.crossOrigin=this.crossOrigin}n.manager.itemStart(e);s.src=e;return s},setCrossOrigin:function(e){this.crossOrigin=e;return this},setPath:function(e){this.path=e;return this}});function Lo(e){this.manager=e!==undefined?e:Eo}Object.assign(Lo.prototype,{crossOrigin:"Anonymous",load:function(e,t,i,r){var n=new Lt;var a=new Ro(this.manager);a.setCrossOrigin(this.crossOrigin);a.setPath(this.path);var s=0;function o(i){a.load(e[i],function(e){n.images[i]=e;s++;if(s===6){n.needsUpdate=true;if(t)t(n)}},undefined,r)}for(var l=0;l<e.length;++l){o(l)}return n},setCrossOrigin:function(e){this.crossOrigin=e;return this},setPath:function(e){this.path=e;return this}});function Co(e){this.manager=e!==undefined?e:Eo}Object.assign(Co.prototype,{crossOrigin:"Anonymous",load:function(e,t,i,r){var n=new Ro(this.manager);n.setCrossOrigin(this.crossOrigin);n.setPath(this.path);var a=new wt;a.image=n.load(e,function(){var i=e.search(/\.(jpg|jpeg)$/)>0||e.search(/^data\:image\/jpeg/)===0;a.format=i?ke:Ue;a.needsUpdate=true;if(t!==undefined){t(a)}},i,r);return a},setCrossOrigin:function(e){this.crossOrigin=e;return this},setPath:function(e){this.path=e;return this}});function Oo(e,t){Wn.call(this);this.type="Light";this.color=new _i(e);this.intensity=t!==undefined?t:1;this.receiveShadow=undefined}Oo.prototype=Object.assign(Object.create(Wn.prototype),{constructor:Oo,isLight:true,copy:function(e){Wn.prototype.copy.call(this,e);this.color.copy(e.color);this.intensity=e.intensity;return this},toJSON:function(e){var t=Wn.prototype.toJSON.call(this,e);t.object.color=this.color.getHex();t.object.intensity=this.intensity;if(this.groundColor!==undefined)t.object.groundColor=this.groundColor.getHex();if(this.distance!==undefined)t.object.distance=this.distance;if(this.angle!==undefined)t.object.angle=this.angle;if(this.decay!==undefined)t.object.decay=this.decay;if(this.penumbra!==undefined)t.object.penumbra=this.penumbra;if(this.shadow!==undefined)t.object.shadow=this.shadow.toJSON();return t}});function Io(e,t,i){Oo.call(this,e,i);this.type="HemisphereLight";this.castShadow=undefined;this.position.copy(Wn.DefaultUp);this.updateMatrix();this.groundColor=new _i(t)}Io.prototype=Object.assign(Object.create(Oo.prototype),{constructor:Io,isHemisphereLight:true,copy:function(e){Oo.prototype.copy.call(this,e);this.groundColor.copy(e.groundColor);return this}});function Do(e){this.camera=e;this.bias=0;this.radius=1;this.mapSize=new bt(512,512);this.map=null;this.matrix=new Pt}Object.assign(Do.prototype,{copy:function(e){this.camera=e.camera.clone();this.bias=e.bias;this.radius=e.radius;this.mapSize.copy(e.mapSize);return this},clone:function(){return(new this.constructor).copy(this)},toJSON:function(){var e={};if(this.bias!==0)e.bias=this.bias;if(this.radius!==1)e.radius=this.radius;if(this.mapSize.x!==512||this.mapSize.y!==512)e.mapSize=this.mapSize.toArray();e.camera=this.camera.toJSON(false).object;delete e.camera.matrix;return e}});function ko(){Do.call(this,new qn(50,1,.5,500))}ko.prototype=Object.assign(Object.create(Do.prototype),{constructor:ko,isSpotLightShadow:true,update:function(e){var t=this.camera;var i=_t.RAD2DEG*2*e.angle;var r=this.mapSize.width/this.mapSize.height;var n=e.distance||t.far;if(i!==t.fov||r!==t.aspect||n!==t.far){t.fov=i;t.aspect=r;t.far=n;t.updateProjectionMatrix()}}});function Uo(e,t,i,r,n,a){Oo.call(this,e,t);this.type="SpotLight";this.position.copy(Wn.DefaultUp);this.updateMatrix();this.target=new Wn;Object.defineProperty(this,"power",{get:function(){return this.intensity*Math.PI},set:function(e){this.intensity=e/Math.PI}});this.distance=i!==undefined?i:0;this.angle=r!==undefined?r:Math.PI/3;this.penumbra=n!==undefined?n:0;this.decay=a!==undefined?a:1;this.shadow=new ko}Uo.prototype=Object.assign(Object.create(Oo.prototype),{constructor:Uo,isSpotLight:true,copy:function(e){Oo.prototype.copy.call(this,e);this.distance=e.distance;this.angle=e.angle;this.penumbra=e.penumbra;this.decay=e.decay;this.target=e.target.clone();this.shadow=e.shadow.clone();return this}});function Fo(e,t,i,r){Oo.call(this,e,t);this.type="PointLight";Object.defineProperty(this,"power",{get:function(){return this.intensity*4*Math.PI},set:function(e){this.intensity=e/(4*Math.PI)}});this.distance=i!==undefined?i:0;this.decay=r!==undefined?r:1;this.shadow=new Do(new qn(90,1,.5,500))}Fo.prototype=Object.assign(Object.create(Oo.prototype),{constructor:Fo,isPointLight:true,copy:function(e){Oo.prototype.copy.call(this,e);this.distance=e.distance;this.decay=e.decay;this.shadow=e.shadow.clone();return this}});function No(){Do.call(this,new Yn(-5,5,5,-5,.5,500))}No.prototype=Object.assign(Object.create(Do.prototype),{constructor:No});function Bo(e,t){Oo.call(this,e,t);this.type="DirectionalLight";this.position.copy(Wn.DefaultUp);this.updateMatrix();this.target=new Wn;this.shadow=new No}Bo.prototype=Object.assign(Object.create(Oo.prototype),{constructor:Bo,isDirectionalLight:true,copy:function(e){Oo.prototype.copy.call(this,e);this.target=e.target.clone();this.shadow=e.shadow.clone();return this}});function zo(e,t){Oo.call(this,e,t);this.type="AmbientLight";this.castShadow=undefined}zo.prototype=Object.assign(Object.create(Oo.prototype),{constructor:zo,isAmbientLight:true});function jo(e,t,i,r){Oo.call(this,e,t);this.type="RectAreaLight";this.position.set(0,1,0);this.updateMatrix();this.width=i!==undefined?i:10;this.height=r!==undefined?r:10}jo.prototype=Object.assign(Object.create(Oo.prototype),{constructor:jo,isRectAreaLight:true,copy:function(e){Oo.prototype.copy.call(this,e);this.width=e.width;this.height=e.height;return this},toJSON:function(e){var t=Oo.prototype.toJSON.call(this,e);t.object.width=this.width;t.object.height=this.height;return t}});var Go={arraySlice:function(e,t,i){if(Go.isTypedArray(e)){return new e.constructor(e.subarray(t,i!==undefined?i:e.length))}return e.slice(t,i)},convertArray:function(e,t,i){if(!e||!i&&e.constructor===t)return e;if(typeof t.BYTES_PER_ELEMENT==="number"){return new t(e)}return Array.prototype.slice.call(e)},isTypedArray:function(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)},getKeyframeOrder:function(e){function t(t,i){return e[t]-e[i]}var i=e.length;var r=new Array(i);for(var n=0;n!==i;++n)r[n]=n;r.sort(t);return r},sortedArray:function(e,t,i){var r=e.length;var n=new e.constructor(r);for(var a=0,s=0;s!==r;++a){var o=i[a]*t;for(var l=0;l!==t;++l){n[s++]=e[o+l]}}return n},flattenJSON:function(e,t,i,r){var n=1,a=e[0];while(a!==undefined&&a[r]===undefined){a=e[n++]}if(a===undefined)return;var s=a[r];if(s===undefined)return;if(Array.isArray(s)){do{s=a[r];if(s!==undefined){t.push(a.time);i.push.apply(i,s)}a=e[n++]}while(a!==undefined)}else if(s.toArray!==undefined){do{s=a[r];if(s!==undefined){t.push(a.time);s.toArray(i,i.length)}a=e[n++]}while(a!==undefined)}else{do{s=a[r];if(s!==undefined){t.push(a.time);i.push(s)}a=e[n++]}while(a!==undefined)}}};function Ho(e,t,i,r){this.parameterPositions=e;this._cachedIndex=0;this.resultBuffer=r!==undefined?r:new t.constructor(i);this.sampleValues=t;this.valueSize=i}Object.assign(Ho.prototype,{evaluate:function(e){var t=this.parameterPositions,i=this._cachedIndex,r=t[i],n=t[i-1];e:{t:{var a;i:{r:if(!(e<r)){for(var s=i+2;;){if(r===undefined){if(e<n)break r;i=t.length;this._cachedIndex=i;return this.afterEnd_(i-1,e,n)}if(i===s)break;n=r;r=t[++i];if(e<r){break t}}a=t.length;break i}if(!(e>=n)){var o=t[1];if(e<o){i=2;n=o}for(var s=i-2;;){if(n===undefined){this._cachedIndex=0;return this.beforeStart_(0,e,r)}if(i===s)break;r=n;n=t[--i-1];if(e>=n){break t}}a=i;i=0;break i}break e}while(i<a){var l=i+a>>>1;if(e<t[l]){a=l}else{i=l+1}}r=t[i];n=t[i-1];if(n===undefined){this._cachedIndex=0;return this.beforeStart_(0,e,r)}if(r===undefined){i=t.length;this._cachedIndex=i;return this.afterEnd_(i-1,n,e)}}this._cachedIndex=i;this.intervalChanged_(i,n,r)}return this.interpolate_(i,n,e,r)},settings:null,DefaultSettings_:{},getSettings_:function(){return this.settings||this.DefaultSettings_},copySampleValue_:function(e){var t=this.resultBuffer,i=this.sampleValues,r=this.valueSize,n=e*r;for(var a=0;a!==r;++a){t[a]=i[n+a]}return t},interpolate_:function(e,t,i,r){throw new Error("call to abstract method")},intervalChanged_:function(e,t,i){}});Object.assign(Ho.prototype,{beforeStart_:Ho.prototype.copySampleValue_,afterEnd_:Ho.prototype.copySampleValue_});function Vo(e,t,i,r){Ho.call(this,e,t,i,r);this._weightPrev=-0;this._offsetPrev=-0;this._weightNext=-0;this._offsetNext=-0}Vo.prototype=Object.assign(Object.create(Ho.prototype),{constructor:Vo,DefaultSettings_:{endingStart:rt,endingEnd:rt},intervalChanged_:function(e,t,i){var r=this.parameterPositions,n=e-2,a=e+1,s=r[n],o=r[a];if(s===undefined){switch(this.getSettings_().endingStart){case nt:n=e;s=2*t-i;break;case at:n=r.length-2;s=t+r[n]-r[n+1];break;default:n=e;s=i}}if(o===undefined){switch(this.getSettings_().endingEnd){case nt:a=e;o=2*i-t;break;case at:a=1;o=i+r[1]-r[0];break;default:a=e-1;o=t}}var l=(i-t)*.5,u=this.valueSize;this._weightPrev=l/(t-s);this._weightNext=l/(o-i);this._offsetPrev=n*u;this._offsetNext=a*u},interpolate_:function(e,t,i,r){var n=this.resultBuffer,a=this.sampleValues,s=this.valueSize,o=e*s,l=o-s,u=this._offsetPrev,h=this._offsetNext,c=this._weightPrev,f=this._weightNext,d=(i-t)/(r-t),p=d*d,m=p*d;var v=-c*m+2*c*p-c*d;var g=(1+c)*m+(-1.5-2*c)*p+(-.5+c)*d+1;var y=(-1-f)*m+(1.5+f)*p+.5*d;var _=f*m-f*p;for(var b=0;b!==s;++b){n[b]=v*a[u+b]+g*a[l+b]+y*a[o+b]+_*a[h+b]}return n}});function Wo(e,t,i,r){Ho.call(this,e,t,i,r)}Wo.prototype=Object.assign(Object.create(Ho.prototype),{constructor:Wo,interpolate_:function(e,t,i,r){var n=this.resultBuffer,a=this.sampleValues,s=this.valueSize,o=e*s,l=o-s,u=(i-t)/(r-t),h=1-u;for(var c=0;c!==s;++c){n[c]=a[l+c]*h+a[o+c]*u}return n}});function Xo(e,t,i,r){Ho.call(this,e,t,i,r)}Xo.prototype=Object.assign(Object.create(Ho.prototype),{constructor:Xo,interpolate_:function(e,t,i,r){return this.copySampleValue_(e-1)}});var Yo;Yo={TimeBufferType:Float32Array,ValueBufferType:Float32Array,DefaultInterpolation:tt,InterpolantFactoryMethodDiscrete:function(e){return new Xo(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodLinear:function(e){return new Wo(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodSmooth:function(e){return new Vo(this.times,this.values,this.getValueSize(),e)},setInterpolation:function(e){var t;switch(e){case et:t=this.InterpolantFactoryMethodDiscrete;break;case tt:t=this.InterpolantFactoryMethodLinear;break;case it:t=this.InterpolantFactoryMethodSmooth;break}if(t===undefined){var i="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===undefined){if(e!==this.DefaultInterpolation){this.setInterpolation(this.DefaultInterpolation)}else{throw new Error(i)}}console.warn("THREE.KeyframeTrackPrototype:",i);return}this.createInterpolant=t},getInterpolation:function(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return et;case this.InterpolantFactoryMethodLinear:return tt;case this.InterpolantFactoryMethodSmooth:return it}},getValueSize:function(){return this.values.length/this.times.length},shift:function(e){if(e!==0){var t=this.times;for(var i=0,r=t.length;i!==r;++i){t[i]+=e}}return this},scale:function(e){if(e!==1){var t=this.times;for(var i=0,r=t.length;i!==r;++i){t[i]*=e}}return this},trim:function(e,t){var i=this.times,r=i.length,n=0,a=r-1;while(n!==r&&i[n]<e)++n;while(a!==-1&&i[a]>t)--a;++a;if(n!==0||a!==r){if(n>=a)a=Math.max(a,1),n=a-1;var s=this.getValueSize();this.times=Go.arraySlice(i,n,a);this.values=Go.arraySlice(this.values,n*s,a*s)}return this},validate:function(){var e=true;var t=this.getValueSize();if(t-Math.floor(t)!==0){console.error("THREE.KeyframeTrackPrototype: Invalid value size in track.",this);e=false}var i=this.times,r=this.values,n=i.length;if(n===0){console.error("THREE.KeyframeTrackPrototype: Track is empty.",this);e=false}var a=null;for(var s=0;s!==n;s++){var o=i[s];if(typeof o==="number"&&isNaN(o)){console.error("THREE.KeyframeTrackPrototype: Time is not a valid number.",this,s,o);e=false;break}if(a!==null&&a>o){console.error("THREE.KeyframeTrackPrototype: Out of order keys.",this,s,o,a);e=false;break}a=o}if(r!==undefined){if(Go.isTypedArray(r)){for(var s=0,l=r.length;s!==l;++s){var u=r[s];if(isNaN(u)){console.error("THREE.KeyframeTrackPrototype: Value is not a valid number.",this,s,u);e=false;break}}}}return e},optimize:function(){var e=this.times,t=this.values,i=this.getValueSize(),r=this.getInterpolation()===it,n=1,a=e.length-1;for(var s=1;s<a;++s){var o=false;var l=e[s];var u=e[s+1];if(l!==u&&(s!==1||l!==l[0])){if(!r){var h=s*i,c=h-i,f=h+i;for(var d=0;d!==i;++d){var p=t[h+d];if(p!==t[c+d]||p!==t[f+d]){o=true;break}}}else o=true}if(o){if(s!==n){e[n]=e[s];var m=s*i,v=n*i;for(var d=0;d!==i;++d)t[v+d]=t[m+d]}++n}}if(a>0){e[n]=e[a];for(var m=a*i,v=n*i,d=0;d!==i;++d)t[v+d]=t[m+d];++n}if(n!==e.length){this.times=Go.arraySlice(e,0,n);this.values=Go.arraySlice(t,0,n*i)}return this}};function qo(e,t,i,r){if(e===undefined)throw new Error("track name is undefined");if(t===undefined||t.length===0){throw new Error("no keyframes in track named "+e)}this.name=e;this.times=Go.convertArray(t,this.TimeBufferType);this.values=Go.convertArray(i,this.ValueBufferType);this.setInterpolation(r||this.DefaultInterpolation);this.validate();this.optimize()}function $o(e,t,i,r){qo.call(this,e,t,i,r)}$o.prototype=Object.assign(Object.create(Yo),{constructor:$o,ValueTypeName:"vector"});function Zo(e,t,i,r){Ho.call(this,e,t,i,r)}Zo.prototype=Object.assign(Object.create(Ho.prototype),{constructor:Zo,interpolate_:function(e,t,i,r){var n=this.resultBuffer,a=this.sampleValues,s=this.valueSize,o=e*s,l=(i-t)/(r-t);for(var u=o+s;o!==u;o+=4){St.slerpFlat(n,0,a,o-s,a,o,l)}return n}});function Jo(e,t,i,r){qo.call(this,e,t,i,r)}Jo.prototype=Object.assign(Object.create(Yo),{constructor:Jo,ValueTypeName:"quaternion",DefaultInterpolation:tt,InterpolantFactoryMethodLinear:function(e){return new Zo(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodSmooth:undefined});function Qo(e,t,i,r){qo.call(this,e,t,i,r)}Qo.prototype=Object.assign(Object.create(Yo),{constructor:Qo,ValueTypeName:"number"});function Ko(e,t,i,r){qo.call(this,e,t,i,r)}Ko.prototype=Object.assign(Object.create(Yo),{constructor:Ko,ValueTypeName:"string",ValueBufferType:Array,DefaultInterpolation:et,InterpolantFactoryMethodLinear:undefined,InterpolantFactoryMethodSmooth:undefined});function el(e,t,i){qo.call(this,e,t,i)}el.prototype=Object.assign(Object.create(Yo),{constructor:el,ValueTypeName:"bool",ValueBufferType:Array,DefaultInterpolation:et,InterpolantFactoryMethodLinear:undefined,InterpolantFactoryMethodSmooth:undefined});function tl(e,t,i,r){qo.call(this,e,t,i,r)}tl.prototype=Object.assign(Object.create(Yo),{constructor:tl,ValueTypeName:"color"});function il(e,t,i,r){qo.apply(this,arguments)}il.prototype=Yo;Yo.constructor=il;Object.assign(il,{parse:function(e){if(e.type===undefined){throw new Error("track type undefined, can not parse")}var t=il._getTrackTypeForValueTypeName(e.type);if(e.times===undefined){var i=[],r=[];Go.flattenJSON(e.keys,i,r,"value");e.times=i;e.values=r}if(t.parse!==undefined){return t.parse(e)}else{return new t(e.name,e.times,e.values,e.interpolation)}},toJSON:function(e){var t=e.constructor;var i;if(t.toJSON!==undefined){i=t.toJSON(e)}else{i={name:e.name,times:Go.convertArray(e.times,Array),values:Go.convertArray(e.values,Array)};var r=e.getInterpolation();if(r!==e.DefaultInterpolation){i.interpolation=r}}i.type=e.ValueTypeName;return i},_getTrackTypeForValueTypeName:function(e){switch(e.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Qo;case"vector":case"vector2":case"vector3":case"vector4":return $o;case"color":return tl;case"quaternion":return Jo;case"bool":case"boolean":return el;case"string":return Ko}throw new Error("Unsupported typeName: "+e)}});function rl(e,t,i){this.name=e;this.tracks=i;this.duration=t!==undefined?t:-1;this.uuid=_t.generateUUID();if(this.duration<0){this.resetDuration()}this.optimize()}Object.assign(rl,{parse:function(e){var t=[],i=e.tracks,r=1/(e.fps||1);for(var n=0,a=i.length;n!==a;++n){t.push(il.parse(i[n]).scale(r))}return new rl(e.name,e.duration,t)},toJSON:function(e){var t=[],i=e.tracks;var r={name:e.name,duration:e.duration,tracks:t};for(var n=0,a=i.length;n!==a;++n){t.push(il.toJSON(i[n]))}return r},CreateFromMorphTargetSequence:function(e,t,i,r){var n=t.length;var a=[];for(var s=0;s<n;s++){var o=[];var l=[];o.push((s+n-1)%n,s,(s+1)%n);l.push(0,1,0);var u=Go.getKeyframeOrder(o);o=Go.sortedArray(o,1,u);l=Go.sortedArray(l,1,u);if(!r&&o[0]===0){o.push(n);l.push(l[0])}a.push(new Qo(".morphTargetInfluences["+t[s].name+"]",o,l).scale(1/i))}return new rl(e,-1,a)},findByName:function(e,t){var i=e;if(!Array.isArray(e)){var r=e;i=r.geometry&&r.geometry.animations||r.animations}for(var n=0;n<i.length;n++){if(i[n].name===t){return i[n]}}return null},CreateClipsFromMorphTargetSequences:function(e,t,i){var r={};var n=/^([\w-]*?)([\d]+)$/;for(var a=0,s=e.length;a<s;a++){var o=e[a];var l=o.name.match(n);if(l&&l.length>1){var u=l[1];var h=r[u];if(!h){r[u]=h=[]}h.push(o)}}var c=[];for(var u in r){c.push(rl.CreateFromMorphTargetSequence(u,r[u],t,i))}return c},parseAnimation:function(e,t){if(!e){console.error("THREE.AnimationClip: No animation in JSONLoader data.");return null}var i=function(e,t,i,r,n){if(i.length!==0){var a=[];var s=[];Go.flattenJSON(i,a,s,r);if(a.length!==0){n.push(new e(t,a,s))}}};var r=[];var n=e.name||"default";var a=e.length||-1;var s=e.fps||30;var o=e.hierarchy||[];for(var l=0;l<o.length;l++){var u=o[l].keys;if(!u||u.length===0)continue;if(u[0].morphTargets){var h={};for(var c=0;c<u.length;c++){if(u[c].morphTargets){for(var f=0;f<u[c].morphTargets.length;f++){h[u[c].morphTargets[f]]=-1}}}for(var d in h){var p=[];var m=[];for(var f=0;f!==u[c].morphTargets.length;++f){var v=u[c];p.push(v.time);m.push(v.morphTarget===d?1:0)}r.push(new Qo(".morphTargetInfluence["+d+"]",p,m))}a=h.length*(s||1)}else{var g=".bones["+t[l].name+"]";i($o,g+".position",u,"pos",r);i(Jo,g+".quaternion",u,"rot",r);i($o,g+".scale",u,"scl",r)}}if(r.length===0){return null}var y=new rl(n,a,r);return y}});Object.assign(rl.prototype,{resetDuration:function(){var e=this.tracks,t=0;for(var i=0,r=e.length;i!==r;++i){var n=this.tracks[i];t=Math.max(t,n.times[n.times.length-1])}this.duration=t},trim:function(){for(var e=0;e<this.tracks.length;e++){this.tracks[e].trim(0,this.duration)}return this},optimize:function(){for(var e=0;e<this.tracks.length;e++){this.tracks[e].optimize()}return this}});function nl(e){this.manager=e!==undefined?e:Eo;this.textures={}}Object.assign(nl.prototype,{load:function(e,t,i,r){var n=this;var a=new So(n.manager);a.load(e,function(e){t(n.parse(JSON.parse(e)))},i,r)},setTextures:function(e){this.textures=e},parse:function(e){var t=this.textures;function i(e){if(t[e]===undefined){console.warn("THREE.MaterialLoader: Undefined texture",e)}return t[e]}var r=new wo[e.type];if(e.uuid!==undefined)r.uuid=e.uuid;if(e.name!==undefined)r.name=e.name;if(e.color!==undefined)r.color.setHex(e.color);if(e.roughness!==undefined)r.roughness=e.roughness;if(e.metalness!==undefined)r.metalness=e.metalness;if(e.emissive!==undefined)r.emissive.setHex(e.emissive);if(e.specular!==undefined)r.specular.setHex(e.specular);if(e.shininess!==undefined)r.shininess=e.shininess;if(e.clearCoat!==undefined)r.clearCoat=e.clearCoat;if(e.clearCoatRoughness!==undefined)r.clearCoatRoughness=e.clearCoatRoughness;if(e.uniforms!==undefined)r.uniforms=e.uniforms;if(e.vertexShader!==undefined)r.vertexShader=e.vertexShader;if(e.fragmentShader!==undefined)r.fragmentShader=e.fragmentShader;if(e.vertexColors!==undefined)r.vertexColors=e.vertexColors;if(e.fog!==undefined)r.fog=e.fog;if(e.flatShading!==undefined)r.flatShading=e.flatShading;if(e.blending!==undefined)r.blending=e.blending;if(e.side!==undefined)r.side=e.side;if(e.opacity!==undefined)r.opacity=e.opacity;if(e.transparent!==undefined)r.transparent=e.transparent;if(e.alphaTest!==undefined)r.alphaTest=e.alphaTest;if(e.depthTest!==undefined)r.depthTest=e.depthTest;if(e.depthWrite!==undefined)r.depthWrite=e.depthWrite;if(e.colorWrite!==undefined)r.colorWrite=e.colorWrite;if(e.wireframe!==undefined)r.wireframe=e.wireframe;if(e.wireframeLinewidth!==undefined)r.wireframeLinewidth=e.wireframeLinewidth;if(e.wireframeLinecap!==undefined)r.wireframeLinecap=e.wireframeLinecap;if(e.wireframeLinejoin!==undefined)r.wireframeLinejoin=e.wireframeLinejoin;if(e.skinning!==undefined)r.skinning=e.skinning;if(e.morphTargets!==undefined)r.morphTargets=e.morphTargets;if(e.dithering!==undefined)r.dithering=e.dithering;if(e.visible!==undefined)r.visible=e.visible;if(e.userData!==undefined)r.userData=e.userData;if(e.shading!==undefined)r.flatShading=e.shading===1;if(e.size!==undefined)r.size=e.size;if(e.sizeAttenuation!==undefined)r.sizeAttenuation=e.sizeAttenuation;if(e.map!==undefined)r.map=i(e.map);if(e.alphaMap!==undefined){r.alphaMap=i(e.alphaMap);r.transparent=true}if(e.bumpMap!==undefined)r.bumpMap=i(e.bumpMap);if(e.bumpScale!==undefined)r.bumpScale=e.bumpScale;if(e.normalMap!==undefined)r.normalMap=i(e.normalMap);if(e.normalScale!==undefined){var n=e.normalScale;if(Array.isArray(n)===false){n=[n,n]}r.normalScale=(new bt).fromArray(n)}if(e.displacementMap!==undefined)r.displacementMap=i(e.displacementMap);if(e.displacementScale!==undefined)r.displacementScale=e.displacementScale;if(e.displacementBias!==undefined)r.displacementBias=e.displacementBias;if(e.roughnessMap!==undefined)r.roughnessMap=i(e.roughnessMap);if(e.metalnessMap!==undefined)r.metalnessMap=i(e.metalnessMap);if(e.emissiveMap!==undefined)r.emissiveMap=i(e.emissiveMap);if(e.emissiveIntensity!==undefined)r.emissiveIntensity=e.emissiveIntensity;if(e.specularMap!==undefined)r.specularMap=i(e.specularMap);if(e.envMap!==undefined)r.envMap=i(e.envMap);if(e.reflectivity!==undefined)r.reflectivity=e.reflectivity;if(e.lightMap!==undefined)r.lightMap=i(e.lightMap);if(e.lightMapIntensity!==undefined)r.lightMapIntensity=e.lightMapIntensity;if(e.aoMap!==undefined)r.aoMap=i(e.aoMap);if(e.aoMapIntensity!==undefined)r.aoMapIntensity=e.aoMapIntensity;if(e.gradientMap!==undefined)r.gradientMap=i(e.gradientMap);return r}});function al(e){this.manager=e!==undefined?e:Eo}Object.assign(al.prototype,{load:function(e,t,i,r){var n=this;var a=new So(n.manager);a.load(e,function(e){t(n.parse(JSON.parse(e)))},i,r)},parse:function(e){var t=new ca;var i=e.data.index;if(i!==undefined){var r=new sl[i.type](i.array);t.setIndex(new Kn(r,1))}var n=e.data.attributes;for(var a in n){var s=n[a];var r=new sl[s.type](s.array);t.addAttribute(a,new Kn(r,s.itemSize,s.normalized))}var o=e.data.groups||e.data.drawcalls||e.data.offsets;if(o!==undefined){for(var l=0,u=o.length;l!==u;++l){var h=o[l];t.addGroup(h.start,h.count,h.materialIndex)}}var c=e.data.boundingSphere;if(c!==undefined){var f=new At;if(c.center!==undefined){f.fromArray(c.center)}t.boundingSphere=new Un(f,c.radius)}return t}});var sl={Int8Array:Int8Array,Uint8Array:Uint8Array,Uint8ClampedArray:typeof Uint8ClampedArray!=="undefined"?Uint8ClampedArray:Uint8Array,Int16Array:Int16Array,Uint16Array:Uint16Array,Int32Array:Int32Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array};function ol(){this.onLoadStart=function(){};this.onLoadProgress=function(){};this.onLoadComplete=function(){}}ol.Handlers={handlers:[],add:function(e,t){this.handlers.push(e,t)},get:function(e){var t=this.handlers;for(var i=0,r=t.length;i<r;i+=2){var n=t[i];var a=t[i+1];if(n.test(e)){return a}}return null}};Object.assign(ol.prototype,{crossOrigin:undefined,extractUrlBase:function(e){var t=e.split("/");if(t.length===1)return"./";t.pop();return t.join("/")+"/"},initMaterials:function(e,t,i){var r=[];for(var n=0;n<e.length;++n){r[n]=this.createMaterial(e[n],t,i)}return r},createMaterial:function(){var e={NoBlending:x,NormalBlending:w,AdditiveBlending:T,SubtractiveBlending:M,MultiplyBlending:E,CustomBlending:S};var t=new _i;var i=new Co;var r=new nl;return function n(a,s,o){var l={};function u(e,t,r,n,a){var u=s+e;var h=ol.Handlers.get(u);var c;if(h!==null){c=h.load(u)}else{i.setCrossOrigin(o);c=i.load(u)}if(t!==undefined){c.repeat.fromArray(t);if(t[0]!==1)c.wrapS=de;if(t[1]!==1)c.wrapT=de}if(r!==undefined){c.offset.fromArray(r)}if(n!==undefined){if(n[0]==="repeat")c.wrapS=de;if(n[0]==="mirror")c.wrapS=me;if(n[1]==="repeat")c.wrapT=de;if(n[1]==="mirror")c.wrapT=me}if(a!==undefined){c.anisotropy=a}var f=_t.generateUUID();l[f]=c;return f}var h={uuid:_t.generateUUID(),type:"MeshLambertMaterial"};for(var c in a){var f=a[c];switch(c){case"DbgColor":case"DbgIndex":case"opticalDensity":case"illumination":break;case"DbgName":h.name=f;break;case"blending":h.blending=e[f];break;case"colorAmbient":case"mapAmbient":console.warn("THREE.Loader.createMaterial:",c,"is no longer supported.");break;case"colorDiffuse":h.color=t.fromArray(f).getHex();break;case"colorSpecular":h.specular=t.fromArray(f).getHex();break;case"colorEmissive":h.emissive=t.fromArray(f).getHex();break;case"specularCoef":h.shininess=f;break;case"shading":if(f.toLowerCase()==="basic")h.type="MeshBasicMaterial";if(f.toLowerCase()==="phong")h.type="MeshPhongMaterial";if(f.toLowerCase()==="standard")h.type="MeshStandardMaterial";break;case"mapDiffuse":h.map=u(f,a.mapDiffuseRepeat,a.mapDiffuseOffset,a.mapDiffuseWrap,a.mapDiffuseAnisotropy);break;case"mapDiffuseRepeat":case"mapDiffuseOffset":case"mapDiffuseWrap":case"mapDiffuseAnisotropy":break;case"mapEmissive":h.emissiveMap=u(f,a.mapEmissiveRepeat,a.mapEmissiveOffset,a.mapEmissiveWrap,a.mapEmissiveAnisotropy);break;case"mapEmissiveRepeat":case"mapEmissiveOffset":case"mapEmissiveWrap":case"mapEmissiveAnisotropy":break;case"mapLight":h.lightMap=u(f,a.mapLightRepeat,a.mapLightOffset,a.mapLightWrap,a.mapLightAnisotropy);break;case"mapLightRepeat":case"mapLightOffset":case"mapLightWrap":case"mapLightAnisotropy":break;case"mapAO":h.aoMap=u(f,a.mapAORepeat,a.mapAOOffset,a.mapAOWrap,a.mapAOAnisotropy);break;case"mapAORepeat":case"mapAOOffset":case"mapAOWrap":case"mapAOAnisotropy":break;case"mapBump":h.bumpMap=u(f,a.mapBumpRepeat,a.mapBumpOffset,a.mapBumpWrap,a.mapBumpAnisotropy);break;case"mapBumpScale":h.bumpScale=f;break;case"mapBumpRepeat":case"mapBumpOffset":case"mapBumpWrap":case"mapBumpAnisotropy":break;case"mapNormal":h.normalMap=u(f,a.mapNormalRepeat,a.mapNormalOffset,a.mapNormalWrap,a.mapNormalAnisotropy);break;case"mapNormalFactor":h.normalScale=[f,f];break;case"mapNormalRepeat":case"mapNormalOffset":case"mapNormalWrap":case"mapNormalAnisotropy":break;case"mapSpecular":h.specularMap=u(f,a.mapSpecularRepeat,a.mapSpecularOffset,a.mapSpecularWrap,a.mapSpecularAnisotropy);break;case"mapSpecularRepeat":case"mapSpecularOffset":case"mapSpecularWrap":case"mapSpecularAnisotropy":break;case"mapMetalness":h.metalnessMap=u(f,a.mapMetalnessRepeat,a.mapMetalnessOffset,a.mapMetalnessWrap,a.mapMetalnessAnisotropy);break;case"mapMetalnessRepeat":case"mapMetalnessOffset":case"mapMetalnessWrap":case"mapMetalnessAnisotropy":break;case"mapRoughness":h.roughnessMap=u(f,a.mapRoughnessRepeat,a.mapRoughnessOffset,a.mapRoughnessWrap,a.mapRoughnessAnisotropy);break;case"mapRoughnessRepeat":case"mapRoughnessOffset":case"mapRoughnessWrap":case"mapRoughnessAnisotropy":break;case"mapAlpha":h.alphaMap=u(f,a.mapAlphaRepeat,a.mapAlphaOffset,a.mapAlphaWrap,a.mapAlphaAnisotropy);break;case"mapAlphaRepeat":case"mapAlphaOffset":case"mapAlphaWrap":case"mapAlphaAnisotropy":break;case"flipSided":h.side=p;break;case"doubleSided":h.side=m;break;case"transparency":console.warn("THREE.Loader.createMaterial: transparency has been renamed to opacity");h.opacity=f;break;case"depthTest":case"depthWrite":case"colorWrite":case"opacity":case"reflectivity":case"transparent":case"visible":case"wireframe":h[c]=f;break;case"vertexColors":if(f===true)h.vertexColors=b;if(f==="face")h.vertexColors=_;break;default:console.error("THREE.Loader.createMaterial: Unsupported",c,f);break}}if(h.type==="MeshBasicMaterial")delete h.emissive;if(h.type!=="MeshPhongMaterial")delete h.specular;if(h.opacity<1)h.transparent=true;r.setTextures(l);return r.parse(h)}}()});function ll(e){if(typeof e==="boolean"){console.warn("THREE.JSONLoader: showStatus parameter has been removed from constructor.");e=undefined}this.manager=e!==undefined?e:Eo;this.withCredentials=false}Object.assign(ll.prototype,{load:function(e,t,i,r){var n=this;var a=this.texturePath&&typeof this.texturePath==="string"?this.texturePath:ol.prototype.extractUrlBase(e);var s=new So(this.manager);s.setWithCredentials(this.withCredentials);s.load(e,function(i){var r=JSON.parse(i);var s=r.metadata;if(s!==undefined){var o=s.type;if(o!==undefined){
if(o.toLowerCase()==="object"){console.error("THREE.JSONLoader: "+e+" should be loaded with THREE.ObjectLoader instead.");return}if(o.toLowerCase()==="scene"){console.error("THREE.JSONLoader: "+e+" should be loaded with THREE.SceneLoader instead.");return}}}var l=n.parse(r,a);t(l.geometry,l.materials)},i,r)},setTexturePath:function(e){this.texturePath=e},parse:function(){function e(e,t){function i(e,t){return e&1<<t}var r,n,a,s,o,l,u,h,c,f,d,p,m,v,g,y,_,b,x,w,T,M,E,S,A,P,R,L=e.faces,C=e.vertices,O=e.normals,I=e.colors,D=e.scale,k=0;if(e.uvs!==undefined){for(r=0;r<e.uvs.length;r++){if(e.uvs[r].length)k++}for(r=0;r<k;r++){t.faceVertexUvs[r]=[]}}s=0;o=C.length;while(s<o){b=new At;b.x=C[s++]*D;b.y=C[s++]*D;b.z=C[s++]*D;t.vertices.push(b)}s=0;o=L.length;while(s<o){f=L[s++];d=i(f,0);p=i(f,1);m=i(f,3);v=i(f,4);g=i(f,5);y=i(f,6);_=i(f,7);if(d){w=new $n;w.a=L[s];w.b=L[s+1];w.c=L[s+3];T=new $n;T.a=L[s+1];T.b=L[s+2];T.c=L[s+3];s+=4;if(p){c=L[s++];w.materialIndex=c;T.materialIndex=c}a=t.faces.length;if(m){for(r=0;r<k;r++){S=e.uvs[r];t.faceVertexUvs[r][a]=[];t.faceVertexUvs[r][a+1]=[];for(n=0;n<4;n++){h=L[s++];P=S[h*2];R=S[h*2+1];A=new bt(P,R);if(n!==2)t.faceVertexUvs[r][a].push(A);if(n!==0)t.faceVertexUvs[r][a+1].push(A)}}}if(v){u=L[s++]*3;w.normal.set(O[u++],O[u++],O[u]);T.normal.copy(w.normal)}if(g){for(r=0;r<4;r++){u=L[s++]*3;E=new At(O[u++],O[u++],O[u]);if(r!==2)w.vertexNormals.push(E);if(r!==0)T.vertexNormals.push(E)}}if(y){l=L[s++];M=I[l];w.color.setHex(M);T.color.setHex(M)}if(_){for(r=0;r<4;r++){l=L[s++];M=I[l];if(r!==2)w.vertexColors.push(new _i(M));if(r!==0)T.vertexColors.push(new _i(M))}}t.faces.push(w);t.faces.push(T)}else{x=new $n;x.a=L[s++];x.b=L[s++];x.c=L[s++];if(p){c=L[s++];x.materialIndex=c}a=t.faces.length;if(m){for(r=0;r<k;r++){S=e.uvs[r];t.faceVertexUvs[r][a]=[];for(n=0;n<3;n++){h=L[s++];P=S[h*2];R=S[h*2+1];A=new bt(P,R);t.faceVertexUvs[r][a].push(A)}}}if(v){u=L[s++]*3;x.normal.set(O[u++],O[u++],O[u])}if(g){for(r=0;r<3;r++){u=L[s++]*3;E=new At(O[u++],O[u++],O[u]);x.vertexNormals.push(E)}}if(y){l=L[s++];x.color.setHex(I[l])}if(_){for(r=0;r<3;r++){l=L[s++];x.vertexColors.push(new _i(I[l]))}}t.faces.push(x)}}}function t(e,t){var i=e.influencesPerVertex!==undefined?e.influencesPerVertex:2;if(e.skinWeights){for(var r=0,n=e.skinWeights.length;r<n;r+=i){var a=e.skinWeights[r];var s=i>1?e.skinWeights[r+1]:0;var o=i>2?e.skinWeights[r+2]:0;var l=i>3?e.skinWeights[r+3]:0;t.skinWeights.push(new Tt(a,s,o,l))}}if(e.skinIndices){for(var r=0,n=e.skinIndices.length;r<n;r+=i){var u=e.skinIndices[r];var h=i>1?e.skinIndices[r+1]:0;var c=i>2?e.skinIndices[r+2]:0;var f=i>3?e.skinIndices[r+3]:0;t.skinIndices.push(new Tt(u,h,c,f))}}t.bones=e.bones;if(t.bones&&t.bones.length>0&&(t.skinWeights.length!==t.skinIndices.length||t.skinIndices.length!==t.vertices.length)){console.warn("When skinning, number of vertices ("+t.vertices.length+"), skinIndices ("+t.skinIndices.length+"), and skinWeights ("+t.skinWeights.length+") should match.")}}function i(e,t){var i=e.scale;if(e.morphTargets!==undefined){for(var r=0,n=e.morphTargets.length;r<n;r++){t.morphTargets[r]={};t.morphTargets[r].name=e.morphTargets[r].name;t.morphTargets[r].vertices=[];var a=t.morphTargets[r].vertices;var s=e.morphTargets[r].vertices;for(var o=0,l=s.length;o<l;o+=3){var u=new At;u.x=s[o]*i;u.y=s[o+1]*i;u.z=s[o+2]*i;a.push(u)}}}if(e.morphColors!==undefined&&e.morphColors.length>0){console.warn('THREE.JSONLoader: "morphColors" no longer supported. Using them as face colors.');var h=t.faces;var c=e.morphColors[0].colors;for(var r=0,n=h.length;r<n;r++){h[r].color.fromArray(c,r*3)}}}function r(e,t){var i=[];var r=[];if(e.animation!==undefined){r.push(e.animation)}if(e.animations!==undefined){if(e.animations.length){r=r.concat(e.animations)}else{r.push(e.animations)}}for(var n=0;n<r.length;n++){var a=rl.parseAnimation(r[n],t.bones);if(a)i.push(a)}if(t.morphTargets){var s=rl.CreateClipsFromMorphTargetSequences(t.morphTargets,10);i=i.concat(s)}if(i.length>0)t.animations=i}return function(n,a){if(n.data!==undefined){n=n.data}if(n.scale!==undefined){n.scale=1/n.scale}else{n.scale=1}var s=new Qn;e(n,s);t(n,s);i(n,s);r(n,s);s.computeFaceNormals();s.computeBoundingSphere();if(n.materials===undefined||n.materials.length===0){return{geometry:s}}else{var o=ol.prototype.initMaterials(n.materials,a,this.crossOrigin);return{geometry:s,materials:o}}}}()});function ul(e){this.manager=e!==undefined?e:Eo;this.texturePath=""}Object.assign(ul.prototype,{load:function(e,t,i,r){if(this.texturePath===""){this.texturePath=e.substring(0,e.lastIndexOf("/")+1)}var n=this;var a=new So(n.manager);a.load(e,function(i){var a=null;try{a=JSON.parse(i)}catch(t){if(r!==undefined)r(t);console.error("THREE:ObjectLoader: Can't parse "+e+".",t.message);return}var s=a.metadata;if(s===undefined||s.type===undefined||s.type.toLowerCase()==="geometry"){console.error("THREE.ObjectLoader: Can't load "+e+". Use THREE.JSONLoader instead.");return}n.parse(a,t)},i,r)},setTexturePath:function(e){this.texturePath=e},setCrossOrigin:function(e){this.crossOrigin=e},parse:function(e,t){var i=this.parseGeometries(e.geometries);var r=this.parseImages(e.images,function(){if(t!==undefined)t(s)});var n=this.parseTextures(e.textures,r);var a=this.parseMaterials(e.materials,n);var s=this.parseObject(e.object,i,a);if(e.animations){s.animations=this.parseAnimations(e.animations)}if(e.images===undefined||e.images.length===0){if(t!==undefined)t(s)}return s},parseGeometries:function(e){var t={};if(e!==undefined){var i=new ll;var r=new al;for(var n=0,a=e.length;n<a;n++){var s;var o=e[n];switch(o.type){case"PlaneGeometry":case"PlaneBufferGeometry":s=new co[o.type](o.width,o.height,o.widthSegments,o.heightSegments);break;case"BoxGeometry":case"BoxBufferGeometry":case"CubeGeometry":s=new co[o.type](o.width,o.height,o.depth,o.widthSegments,o.heightSegments,o.depthSegments);break;case"CircleGeometry":case"CircleBufferGeometry":s=new co[o.type](o.radius,o.segments,o.thetaStart,o.thetaLength);break;case"CylinderGeometry":case"CylinderBufferGeometry":s=new co[o.type](o.radiusTop,o.radiusBottom,o.height,o.radialSegments,o.heightSegments,o.openEnded,o.thetaStart,o.thetaLength);break;case"ConeGeometry":case"ConeBufferGeometry":s=new co[o.type](o.radius,o.height,o.radialSegments,o.heightSegments,o.openEnded,o.thetaStart,o.thetaLength);break;case"SphereGeometry":case"SphereBufferGeometry":s=new co[o.type](o.radius,o.widthSegments,o.heightSegments,o.phiStart,o.phiLength,o.thetaStart,o.thetaLength);break;case"DodecahedronGeometry":case"IcosahedronGeometry":case"OctahedronGeometry":case"TetrahedronGeometry":s=new co[o.type](o.radius,o.detail);break;case"RingGeometry":case"RingBufferGeometry":s=new co[o.type](o.innerRadius,o.outerRadius,o.thetaSegments,o.phiSegments,o.thetaStart,o.thetaLength);break;case"TorusGeometry":case"TorusBufferGeometry":s=new co[o.type](o.radius,o.tube,o.radialSegments,o.tubularSegments,o.arc);break;case"TorusKnotGeometry":case"TorusKnotBufferGeometry":s=new co[o.type](o.radius,o.tube,o.tubularSegments,o.radialSegments,o.p,o.q);break;case"LatheGeometry":case"LatheBufferGeometry":s=new co[o.type](o.points,o.segments,o.phiStart,o.phiLength);break;case"BufferGeometry":s=r.parse(o);break;case"Geometry":s=i.parse(o,this.texturePath).geometry;break;default:console.warn('THREE.ObjectLoader: Unsupported geometry type "'+o.type+'"');continue}s.uuid=o.uuid;if(o.name!==undefined)s.name=o.name;t[o.uuid]=s}}return t},parseMaterials:function(e,t){var i={};if(e!==undefined){var r=new nl;r.setTextures(t);for(var n=0,a=e.length;n<a;n++){var s=e[n];if(s.type==="MultiMaterial"){var o=[];for(var l=0;l<s.materials.length;l++){o.push(r.parse(s.materials[l]))}i[s.uuid]=o}else{i[s.uuid]=r.parse(s)}}}return i},parseAnimations:function(e){var t=[];for(var i=0;i<e.length;i++){var r=rl.parse(e[i]);t.push(r)}return t},parseImages:function(e,t){var i=this;var r={};function n(e){i.manager.itemStart(e);return s.load(e,function(){i.manager.itemEnd(e)},undefined,function(){i.manager.itemEnd(e);i.manager.itemError(e)})}if(e!==undefined&&e.length>0){var a=new Mo(t);var s=new Ro(a);s.setCrossOrigin(this.crossOrigin);for(var o=0,l=e.length;o<l;o++){var u=e[o];var h=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(u.url)?u.url:i.texturePath+u.url;r[u.uuid]=n(h)}}return r},parseTextures:function(e,t){function i(e,t){if(typeof e==="number")return e;console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",e);return t[e]}var r={};if(e!==undefined){for(var n=0,a=e.length;n<a;n++){var s=e[n];if(s.image===undefined){console.warn('THREE.ObjectLoader: No "image" specified for',s.uuid)}if(t[s.image]===undefined){console.warn("THREE.ObjectLoader: Undefined image",s.image)}var o=new wt(t[s.image]);o.needsUpdate=true;o.uuid=s.uuid;if(s.name!==undefined)o.name=s.name;if(s.mapping!==undefined)o.mapping=i(s.mapping,hl);if(s.offset!==undefined)o.offset.fromArray(s.offset);if(s.repeat!==undefined)o.repeat.fromArray(s.repeat);if(s.wrap!==undefined){o.wrapS=i(s.wrap[0],cl);o.wrapT=i(s.wrap[1],cl)}if(s.minFilter!==undefined)o.minFilter=i(s.minFilter,fl);if(s.magFilter!==undefined)o.magFilter=i(s.magFilter,fl);if(s.anisotropy!==undefined)o.anisotropy=s.anisotropy;if(s.flipY!==undefined)o.flipY=s.flipY;r[s.uuid]=o}}return r},parseObject:function(){var e=new Pt;return function t(i,r,n){var a;function s(e){if(r[e]===undefined){console.warn("THREE.ObjectLoader: Undefined geometry",e)}return r[e]}function o(e){if(e===undefined)return undefined;if(Array.isArray(e)){var t=[];for(var i=0,r=e.length;i<r;i++){var a=e[i];if(n[a]===undefined){console.warn("THREE.ObjectLoader: Undefined material",a)}t.push(n[a])}return t}if(n[e]===undefined){console.warn("THREE.ObjectLoader: Undefined material",e)}return n[e]}switch(i.type){case"Scene":a=new ls;if(i.background!==undefined){if(Number.isInteger(i.background)){a.background=new _i(i.background)}}if(i.fog!==undefined){if(i.fog.type==="Fog"){a.fog=new os(i.fog.color,i.fog.near,i.fog.far)}else if(i.fog.type==="FogExp2"){a.fog=new ss(i.fog.color,i.fog.density)}}break;case"PerspectiveCamera":a=new qn(i.fov,i.aspect,i.near,i.far);if(i.focus!==undefined)a.focus=i.focus;if(i.zoom!==undefined)a.zoom=i.zoom;if(i.filmGauge!==undefined)a.filmGauge=i.filmGauge;if(i.filmOffset!==undefined)a.filmOffset=i.filmOffset;if(i.view!==undefined)a.view=Object.assign({},i.view);break;case"OrthographicCamera":a=new Yn(i.left,i.right,i.top,i.bottom,i.near,i.far);break;case"AmbientLight":a=new zo(i.color,i.intensity);break;case"DirectionalLight":a=new Bo(i.color,i.intensity);break;case"PointLight":a=new Fo(i.color,i.intensity,i.distance,i.decay);break;case"RectAreaLight":a=new jo(i.color,i.intensity,i.width,i.height);break;case"SpotLight":a=new Uo(i.color,i.intensity,i.distance,i.angle,i.penumbra,i.decay);break;case"HemisphereLight":a=new Io(i.color,i.groundColor,i.intensity);break;case"SkinnedMesh":console.warn("THREE.ObjectLoader.parseObject() does not support SkinnedMesh yet.");case"Mesh":var l=s(i.geometry);var u=o(i.material);if(l.bones&&l.bones.length>0){a=new ms(l,u)}else{a=new ba(l,u)}break;case"LOD":a=new fs;break;case"Line":a=new gs(s(i.geometry),o(i.material),i.mode);break;case"LineLoop":a=new _s(s(i.geometry),o(i.material));break;case"LineSegments":a=new ys(s(i.geometry),o(i.material));break;case"PointCloud":case"Points":a=new xs(s(i.geometry),o(i.material));break;case"Sprite":a=new cs(o(i.material));break;case"Group":a=new ws;break;default:a=new Wn}a.uuid=i.uuid;if(i.name!==undefined)a.name=i.name;if(i.matrix!==undefined){e.fromArray(i.matrix);e.decompose(a.position,a.quaternion,a.scale)}else{if(i.position!==undefined)a.position.fromArray(i.position);if(i.rotation!==undefined)a.rotation.fromArray(i.rotation);if(i.quaternion!==undefined)a.quaternion.fromArray(i.quaternion);if(i.scale!==undefined)a.scale.fromArray(i.scale)}if(i.castShadow!==undefined)a.castShadow=i.castShadow;if(i.receiveShadow!==undefined)a.receiveShadow=i.receiveShadow;if(i.shadow){if(i.shadow.bias!==undefined)a.shadow.bias=i.shadow.bias;if(i.shadow.radius!==undefined)a.shadow.radius=i.shadow.radius;if(i.shadow.mapSize!==undefined)a.shadow.mapSize.fromArray(i.shadow.mapSize);if(i.shadow.camera!==undefined)a.shadow.camera=this.parseObject(i.shadow.camera)}if(i.visible!==undefined)a.visible=i.visible;if(i.userData!==undefined)a.userData=i.userData;if(i.children!==undefined){var h=i.children;for(var c=0;c<h.length;c++){a.add(this.parseObject(h[c],r,n))}}if(i.type==="LOD"){var f=i.levels;for(var d=0;d<f.length;d++){var p=f[d];var m=a.getObjectByProperty("uuid",p.object);if(m!==undefined){a.addLevel(m,p.distance)}}}return a}}()});var hl={UVMapping:ae,CubeReflectionMapping:se,CubeRefractionMapping:oe,EquirectangularReflectionMapping:le,EquirectangularRefractionMapping:ue,SphericalReflectionMapping:he,CubeUVReflectionMapping:ce,CubeUVRefractionMapping:fe};var cl={RepeatWrapping:de,ClampToEdgeWrapping:pe,MirroredRepeatWrapping:me};var fl={NearestFilter:ve,NearestMipMapNearestFilter:ge,NearestMipMapLinearFilter:ye,LinearFilter:_e,LinearMipMapNearestFilter:be,LinearMipMapLinearFilter:xe};function dl(e,t,i,r,n){var a=(r-t)*.5;var s=(n-i)*.5;var o=e*e;var l=e*o;return(2*i-2*r+a+s)*l+(-3*i+3*r-2*a-s)*o+a*e+i}function pl(e,t){var i=1-e;return i*i*t}function ml(e,t){return 2*(1-e)*e*t}function vl(e,t){return e*e*t}function gl(e,t,i,r){return pl(e,t)+ml(e,i)+vl(e,r)}function yl(e,t){var i=1-e;return i*i*i*t}function _l(e,t){var i=1-e;return 3*i*i*e*t}function bl(e,t){return 3*(1-e)*e*e*t}function xl(e,t){return e*e*e*t}function wl(e,t,i,r,n){return yl(e,t)+_l(e,i)+bl(e,r)+xl(e,n)}function Tl(){this.arcLengthDivisions=200}Object.assign(Tl.prototype,{getPoint:function(){console.warn("THREE.Curve: .getPoint() not implemented.");return null},getPointAt:function(e){var t=this.getUtoTmapping(e);return this.getPoint(t)},getPoints:function(e){if(e===undefined)e=5;var t=[];for(var i=0;i<=e;i++){t.push(this.getPoint(i/e))}return t},getSpacedPoints:function(e){if(e===undefined)e=5;var t=[];for(var i=0;i<=e;i++){t.push(this.getPointAt(i/e))}return t},getLength:function(){var e=this.getLengths();return e[e.length-1]},getLengths:function(e){if(e===undefined)e=this.arcLengthDivisions;if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate){return this.cacheArcLengths}this.needsUpdate=false;var t=[];var i,r=this.getPoint(0);var n,a=0;t.push(0);for(n=1;n<=e;n++){i=this.getPoint(n/e);a+=i.distanceTo(r);t.push(a);r=i}this.cacheArcLengths=t;return t},updateArcLengths:function(){this.needsUpdate=true;this.getLengths()},getUtoTmapping:function(e,t){var i=this.getLengths();var r=0,n=i.length;var a;if(t){a=t}else{a=e*i[n-1]}var s=0,o=n-1,l;while(s<=o){r=Math.floor(s+(o-s)/2);l=i[r]-a;if(l<0){s=r+1}else if(l>0){o=r-1}else{o=r;break}}r=o;if(i[r]===a){return r/(n-1)}var u=i[r];var h=i[r+1];var c=h-u;var f=(a-u)/c;var d=(r+f)/(n-1);return d},getTangent:function(e){var t=1e-4;var i=e-t;var r=e+t;if(i<0)i=0;if(r>1)r=1;var n=this.getPoint(i);var a=this.getPoint(r);var s=a.clone().sub(n);return s.normalize()},getTangentAt:function(e){var t=this.getUtoTmapping(e);return this.getTangent(t)},computeFrenetFrames:function(e,t){var i=new At;var r=[];var n=[];var a=[];var s=new At;var o=new Pt;var l,u,h;for(l=0;l<=e;l++){u=l/e;r[l]=this.getTangentAt(u);r[l].normalize()}n[0]=new At;a[0]=new At;var c=Number.MAX_VALUE;var f=Math.abs(r[0].x);var d=Math.abs(r[0].y);var p=Math.abs(r[0].z);if(f<=c){c=f;i.set(1,0,0)}if(d<=c){c=d;i.set(0,1,0)}if(p<=c){i.set(0,0,1)}s.crossVectors(r[0],i).normalize();n[0].crossVectors(r[0],s);a[0].crossVectors(r[0],n[0]);for(l=1;l<=e;l++){n[l]=n[l-1].clone();a[l]=a[l-1].clone();s.crossVectors(r[l-1],r[l]);if(s.length()>Number.EPSILON){s.normalize();h=Math.acos(_t.clamp(r[l-1].dot(r[l]),-1,1));n[l].applyMatrix4(o.makeRotationAxis(s,h))}a[l].crossVectors(r[l],n[l])}if(t===true){h=Math.acos(_t.clamp(n[0].dot(n[e]),-1,1));h/=e;if(r[0].dot(s.crossVectors(n[0],n[e]))>0){h=-h}for(l=1;l<=e;l++){n[l].applyMatrix4(o.makeRotationAxis(r[l],h*l));a[l].crossVectors(r[l],n[l])}}return{tangents:r,normals:n,binormals:a}}});function Ml(e,t){Tl.call(this);this.v1=e;this.v2=t}Ml.prototype=Object.create(Tl.prototype);Ml.prototype.constructor=Ml;Ml.prototype.isLineCurve=true;Ml.prototype.getPoint=function(e){if(e===1){return this.v2.clone()}var t=this.v2.clone().sub(this.v1);t.multiplyScalar(e).add(this.v1);return t};Ml.prototype.getPointAt=function(e){return this.getPoint(e)};Ml.prototype.getTangent=function(e){var t=this.v2.clone().sub(this.v1);return t.normalize()};function El(){Tl.call(this);this.curves=[];this.autoClose=false}El.prototype=Object.assign(Object.create(Tl.prototype),{constructor:El,add:function(e){this.curves.push(e)},closePath:function(){var e=this.curves[0].getPoint(0);var t=this.curves[this.curves.length-1].getPoint(1);if(!e.equals(t)){this.curves.push(new Ml(t,e))}},getPoint:function(e){var t=e*this.getLength();var i=this.getCurveLengths();var r=0;while(r<i.length){if(i[r]>=t){var n=i[r]-t;var a=this.curves[r];var s=a.getLength();var o=s===0?0:1-n/s;return a.getPointAt(o)}r++}return null},getLength:function(){var e=this.getCurveLengths();return e[e.length-1]},updateArcLengths:function(){this.needsUpdate=true;this.cacheLengths=null;this.getCurveLengths()},getCurveLengths:function(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length){return this.cacheLengths}var e=[],t=0;for(var i=0,r=this.curves.length;i<r;i++){t+=this.curves[i].getLength();e.push(t)}this.cacheLengths=e;return e},getSpacedPoints:function(e){if(e===undefined)e=40;var t=[];for(var i=0;i<=e;i++){t.push(this.getPoint(i/e))}if(this.autoClose){t.push(t[0])}return t},getPoints:function(e){e=e||12;var t=[],i;for(var r=0,n=this.curves;r<n.length;r++){var a=n[r];var s=a&&a.isEllipseCurve?e*2:a&&a.isLineCurve?1:a&&a.isSplineCurve?e*a.points.length:e;var o=a.getPoints(s);for(var l=0;l<o.length;l++){var u=o[l];if(i&&i.equals(u))continue;t.push(u);i=u}}if(this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])){t.push(t[0])}return t},createPointsGeometry:function(e){var t=this.getPoints(e);return this.createGeometry(t)},createSpacedPointsGeometry:function(e){var t=this.getSpacedPoints(e);return this.createGeometry(t)},createGeometry:function(e){var t=new Qn;for(var i=0,r=e.length;i<r;i++){var n=e[i];t.vertices.push(new At(n.x,n.y,n.z||0))}return t}});function Sl(e,t,i,r,n,a,s,o){Tl.call(this);this.aX=e;this.aY=t;this.xRadius=i;this.yRadius=r;this.aStartAngle=n;this.aEndAngle=a;this.aClockwise=s;this.aRotation=o||0}Sl.prototype=Object.create(Tl.prototype);Sl.prototype.constructor=Sl;Sl.prototype.isEllipseCurve=true;Sl.prototype.getPoint=function(e){var t=Math.PI*2;var i=this.aEndAngle-this.aStartAngle;var r=Math.abs(i)<Number.EPSILON;while(i<0)i+=t;while(i>t)i-=t;if(i<Number.EPSILON){if(r){i=0}else{i=t}}if(this.aClockwise===true&&!r){if(i===t){i=-t}else{i=i-t}}var n=this.aStartAngle+e*i;var a=this.aX+this.xRadius*Math.cos(n);var s=this.aY+this.yRadius*Math.sin(n);if(this.aRotation!==0){var o=Math.cos(this.aRotation);var l=Math.sin(this.aRotation);var u=a-this.aX;var h=s-this.aY;a=u*o-h*l+this.aX;s=u*l+h*o+this.aY}return new bt(a,s)};function Al(e){Tl.call(this);this.points=e===undefined?[]:e}Al.prototype=Object.create(Tl.prototype);Al.prototype.constructor=Al;Al.prototype.isSplineCurve=true;Al.prototype.getPoint=function(e){var t=this.points;var i=(t.length-1)*e;var r=Math.floor(i);var n=i-r;var a=t[r===0?r:r-1];var s=t[r];var o=t[r>t.length-2?t.length-1:r+1];var l=t[r>t.length-3?t.length-1:r+2];return new bt(dl(n,a.x,s.x,o.x,l.x),dl(n,a.y,s.y,o.y,l.y))};function Pl(e,t,i,r){Tl.call(this);this.v0=e;this.v1=t;this.v2=i;this.v3=r}Pl.prototype=Object.create(Tl.prototype);Pl.prototype.constructor=Pl;Pl.prototype.getPoint=function(e){var t=this.v0,i=this.v1,r=this.v2,n=this.v3;return new bt(wl(e,t.x,i.x,r.x,n.x),wl(e,t.y,i.y,r.y,n.y))};function Rl(e,t,i){Tl.call(this);this.v0=e;this.v1=t;this.v2=i}Rl.prototype=Object.create(Tl.prototype);Rl.prototype.constructor=Rl;Rl.prototype.getPoint=function(e){var t=this.v0,i=this.v1,r=this.v2;return new bt(gl(e,t.x,i.x,r.x),gl(e,t.y,i.y,r.y))};var Ll=Object.assign(Object.create(El.prototype),{fromPoints:function(e){this.moveTo(e[0].x,e[0].y);for(var t=1,i=e.length;t<i;t++){this.lineTo(e[t].x,e[t].y)}},moveTo:function(e,t){this.currentPoint.set(e,t)},lineTo:function(e,t){var i=new Ml(this.currentPoint.clone(),new bt(e,t));this.curves.push(i);this.currentPoint.set(e,t)},quadraticCurveTo:function(e,t,i,r){var n=new Rl(this.currentPoint.clone(),new bt(e,t),new bt(i,r));this.curves.push(n);this.currentPoint.set(i,r)},bezierCurveTo:function(e,t,i,r,n,a){var s=new Pl(this.currentPoint.clone(),new bt(e,t),new bt(i,r),new bt(n,a));this.curves.push(s);this.currentPoint.set(n,a)},splineThru:function(e){var t=[this.currentPoint.clone()].concat(e);var i=new Al(t);this.curves.push(i);this.currentPoint.copy(e[e.length-1])},arc:function(e,t,i,r,n,a){var s=this.currentPoint.x;var o=this.currentPoint.y;this.absarc(e+s,t+o,i,r,n,a)},absarc:function(e,t,i,r,n,a){this.absellipse(e,t,i,i,r,n,a)},ellipse:function(e,t,i,r,n,a,s,o){var l=this.currentPoint.x;var u=this.currentPoint.y;this.absellipse(e+l,t+u,i,r,n,a,s,o)},absellipse:function(e,t,i,r,n,a,s,o){var l=new Sl(e,t,i,r,n,a,s,o);if(this.curves.length>0){var u=l.getPoint(0);if(!u.equals(this.currentPoint)){this.lineTo(u.x,u.y)}}this.curves.push(l);var h=l.getPoint(1);this.currentPoint.copy(h)}});function Cl(e){El.call(this);this.currentPoint=new bt;if(e){this.fromPoints(e)}}Cl.prototype=Ll;Ll.constructor=Cl;function Ol(){Cl.apply(this,arguments);this.holes=[]}Ol.prototype=Object.assign(Object.create(Ll),{constructor:Ol,getPointsHoles:function(e){var t=[];for(var i=0,r=this.holes.length;i<r;i++){t[i]=this.holes[i].getPoints(e)}return t},extractAllPoints:function(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}},extractPoints:function(e){return this.extractAllPoints(e)}});function Il(){this.subPaths=[];this.currentPath=null}Object.assign(Il.prototype,{moveTo:function(e,t){this.currentPath=new Cl;this.subPaths.push(this.currentPath);this.currentPath.moveTo(e,t)},lineTo:function(e,t){this.currentPath.lineTo(e,t)},quadraticCurveTo:function(e,t,i,r){this.currentPath.quadraticCurveTo(e,t,i,r)},bezierCurveTo:function(e,t,i,r,n,a){this.currentPath.bezierCurveTo(e,t,i,r,n,a)},splineThru:function(e){this.currentPath.splineThru(e)},toShapes:function(e,t){function i(e){var t=[];for(var i=0,r=e.length;i<r;i++){var n=e[i];var a=new Ol;a.curves=n.curves;t.push(a)}return t}function r(e,t){var i=t.length;var r=false;for(var n=i-1,a=0;a<i;n=a++){var s=t[n];var o=t[a];var l=o.x-s.x;var u=o.y-s.y;if(Math.abs(u)>Number.EPSILON){if(u<0){s=t[a];l=-l;o=t[n];u=-u}if(e.y<s.y||e.y>o.y)continue;if(e.y===s.y){if(e.x===s.x)return true}else{var h=u*(e.x-s.x)-l*(e.y-s.y);if(h===0)return true;if(h<0)continue;r=!r}}else{if(e.y!==s.y)continue;if(o.x<=e.x&&e.x<=s.x||s.x<=e.x&&e.x<=o.x)return true}}return r}var n=Ws.isClockWise;var a=this.subPaths;if(a.length===0)return[];if(t===true)return i(a);var s,o,l,u=[];if(a.length===1){o=a[0];l=new Ol;l.curves=o.curves;u.push(l);return u}var h=!n(a[0].getPoints());h=e?!h:h;var c=[];var f=[];var d=[];var p=0;var m;f[p]=undefined;d[p]=[];for(var v=0,g=a.length;v<g;v++){o=a[v];m=o.getPoints();s=n(m);s=e?!s:s;if(s){if(!h&&f[p])p++;f[p]={s:new Ol,p:m};f[p].s.curves=o.curves;if(h)p++;d[p]=[]}else{d[p].push({h:o,p:m[0]})}}if(!f[0])return i(a);if(f.length>1){var y=false;var _=[];for(var b=0,x=f.length;b<x;b++){c[b]=[]}for(var b=0,x=f.length;b<x;b++){var w=d[b];for(var T=0;T<w.length;T++){var M=w[T];var E=true;for(var S=0;S<f.length;S++){if(r(M.p,f[S].p)){if(b!==S)_.push({froms:b,tos:S,hole:T});if(E){E=false;c[S].push(M)}else{y=true}}}if(E){c[b].push(M)}}}if(_.length>0){if(!y)d=c}}var A;for(var v=0,P=f.length;v<P;v++){l=f[v].s;u.push(l);A=d[v];for(var R=0,L=A.length;R<L;R++){l.holes.push(A[R].h)}}return u}});function Dl(e){this.data=e}Object.assign(Dl.prototype,{isFont:true,generateShapes:function(e,t,i){function r(e){var i=String(e).split("");var r=t/a.resolution;var s=(a.boundingBox.yMax-a.boundingBox.yMin+a.underlineThickness)*r;var o=0,l=0;var u=[];for(var h=0;h<i.length;h++){var c=i[h];if(c==="\n"){o=0;l-=s}else{var f=n(c,r,o,l);o+=f.offsetX;u.push(f.path)}}return u}function n(e,t,r,n){var s=a.glyphs[e]||a.glyphs["?"];if(!s)return;var o=new Il;var l=[];var u,h,c,f,d,p,m,v,g,y,_;if(s.o){var b=s._cachedOutline||(s._cachedOutline=s.o.split(" "));for(var x=0,w=b.length;x<w;){var T=b[x++];switch(T){case"m":u=b[x++]*t+r;h=b[x++]*t+n;o.moveTo(u,h);break;case"l":u=b[x++]*t+r;h=b[x++]*t+n;o.lineTo(u,h);break;case"q":c=b[x++]*t+r;f=b[x++]*t+n;m=b[x++]*t+r;v=b[x++]*t+n;o.quadraticCurveTo(m,v,c,f);_=l[l.length-1];if(_){d=_.x;p=_.y;for(var M=1;M<=i;M++){var E=M/i;gl(E,d,m,c);gl(E,p,v,f)}}break;case"b":c=b[x++]*t+r;f=b[x++]*t+n;m=b[x++]*t+r;v=b[x++]*t+n;g=b[x++]*t+r;y=b[x++]*t+n;o.bezierCurveTo(m,v,g,y,c,f);_=l[l.length-1];if(_){d=_.x;p=_.y;for(var M=1;M<=i;M++){var E=M/i;wl(E,d,m,g,c);wl(E,p,v,y,f)}}break}}}return{offsetX:s.ha*t,path:o}}if(t===undefined)t=100;if(i===undefined)i=4;var a=this.data;var s=r(e);var o=[];for(var l=0,u=s.length;l<u;l++){Array.prototype.push.apply(o,s[l].toShapes())}return o}});function kl(e){this.manager=e!==undefined?e:Eo}Object.assign(kl.prototype,{load:function(e,t,i,r){var n=this;var a=new So(this.manager);a.load(e,function(e){var i;try{i=JSON.parse(e)}catch(t){console.warn("THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead.");i=JSON.parse(e.substring(65,e.length-2))}var r=n.parse(i);if(t)t(r)},i,r)},parse:function(e){return new Dl(e)}});var Ul;var Fl={getContext:function(){if(Ul===undefined){Ul=new(window.AudioContext||window.webkitAudioContext)}return Ul},setContext:function(e){Ul=e}};function Nl(e){this.manager=e!==undefined?e:Eo}Object.assign(Nl.prototype,{load:function(e,t,i,r){var n=new So(this.manager);n.setResponseType("arraybuffer");n.load(e,function(e){var i=Fl.getContext();i.decodeAudioData(e,function(e){t(e)})},i,r)}});function Bl(){this.type="StereoCamera";this.aspect=1;this.eyeSep=.064;this.cameraL=new qn;this.cameraL.layers.enable(1);this.cameraL.matrixAutoUpdate=false;this.cameraR=new qn;this.cameraR.layers.enable(2);this.cameraR.matrixAutoUpdate=false}Object.assign(Bl.prototype,{update:function(){var e,t,i,r,n,a,s,o;var l=new Pt;var u=new Pt;return function h(c){var f=e!==this||t!==c.focus||i!==c.fov||r!==c.aspect*this.aspect||n!==c.near||a!==c.far||s!==c.zoom||o!==this.eyeSep;if(f){e=this;t=c.focus;i=c.fov;r=c.aspect*this.aspect;n=c.near;a=c.far;s=c.zoom;var d=c.projectionMatrix.clone();o=this.eyeSep/2;var p=o*n/t;var m=n*Math.tan(_t.DEG2RAD*i*.5)/s;var v,g;u.elements[12]=-o;l.elements[12]=o;v=-m*r+p;g=m*r+p;d.elements[0]=2*n/(g-v);d.elements[8]=(g+v)/(g-v);this.cameraL.projectionMatrix.copy(d);v=-m*r-p;g=m*r-p;d.elements[0]=2*n/(g-v);d.elements[8]=(g+v)/(g-v);this.cameraR.projectionMatrix.copy(d)}this.cameraL.matrixWorld.copy(c.matrixWorld).multiply(u);this.cameraR.matrixWorld.copy(c.matrixWorld).multiply(l)}}()});function zl(e,t,i){Wn.call(this);this.type="CubeCamera";var r=90,n=1;var a=new qn(r,n,e,t);a.up.set(0,-1,0);a.lookAt(new At(1,0,0));this.add(a);var s=new qn(r,n,e,t);s.up.set(0,-1,0);s.lookAt(new At(-1,0,0));this.add(s);var o=new qn(r,n,e,t);o.up.set(0,0,1);o.lookAt(new At(0,1,0));this.add(o);var l=new qn(r,n,e,t);l.up.set(0,0,-1);l.lookAt(new At(0,-1,0));this.add(l);var u=new qn(r,n,e,t);u.up.set(0,-1,0);u.lookAt(new At(0,0,1));this.add(u);var h=new qn(r,n,e,t);h.up.set(0,-1,0);h.lookAt(new At(0,0,-1));this.add(h);var c={format:ke,magFilter:_e,minFilter:_e};this.renderTarget=new Et(i,i,c);this.renderTarget.texture.name="CubeCamera";this.update=function(e,t){if(this.parent===null)this.updateMatrixWorld();var i=this.renderTarget;var r=i.texture.generateMipmaps;i.texture.generateMipmaps=false;i.activeCubeFace=0;e.render(t,a,i);i.activeCubeFace=1;e.render(t,s,i);i.activeCubeFace=2;e.render(t,o,i);i.activeCubeFace=3;e.render(t,l,i);i.activeCubeFace=4;e.render(t,u,i);i.texture.generateMipmaps=r;i.activeCubeFace=5;e.render(t,h,i);e.setRenderTarget(null)};this.clear=function(e,t,i,r){var n=this.renderTarget;for(var a=0;a<6;a++){n.activeCubeFace=a;e.setRenderTarget(n);e.clear(t,i,r)}e.setRenderTarget(null)}}zl.prototype=Object.create(Wn.prototype);zl.prototype.constructor=zl;function jl(){Wn.call(this);this.type="AudioListener";this.context=Fl.getContext();this.gain=this.context.createGain();this.gain.connect(this.context.destination);this.filter=null}jl.prototype=Object.assign(Object.create(Wn.prototype),{constructor:jl,getInput:function(){return this.gain},removeFilter:function(){if(this.filter!==null){this.gain.disconnect(this.filter);this.filter.disconnect(this.context.destination);this.gain.connect(this.context.destination);this.filter=null}},getFilter:function(){return this.filter},setFilter:function(e){if(this.filter!==null){this.gain.disconnect(this.filter);this.filter.disconnect(this.context.destination)}else{this.gain.disconnect(this.context.destination)}this.filter=e;this.gain.connect(this.filter);this.filter.connect(this.context.destination)},getMasterVolume:function(){return this.gain.gain.value},setMasterVolume:function(e){this.gain.gain.value=e},updateMatrixWorld:function(){var e=new At;var t=new St;var i=new At;var r=new At;return function n(a){Wn.prototype.updateMatrixWorld.call(this,a);var s=this.context.listener;var o=this.up;this.matrixWorld.decompose(e,t,i);r.set(0,0,-1).applyQuaternion(t);if(s.positionX){s.positionX.setValueAtTime(e.x,this.context.currentTime);s.positionY.setValueAtTime(e.y,this.context.currentTime);s.positionZ.setValueAtTime(e.z,this.context.currentTime);s.forwardX.setValueAtTime(r.x,this.context.currentTime);s.forwardY.setValueAtTime(r.y,this.context.currentTime);s.forwardZ.setValueAtTime(r.z,this.context.currentTime);s.upX.setValueAtTime(o.x,this.context.currentTime);s.upY.setValueAtTime(o.y,this.context.currentTime);s.upZ.setValueAtTime(o.z,this.context.currentTime)}else{s.setPosition(e.x,e.y,e.z);s.setOrientation(r.x,r.y,r.z,o.x,o.y,o.z)}}}()});function Gl(e){Wn.call(this);this.type="Audio";this.context=e.context;this.gain=this.context.createGain();this.gain.connect(e.getInput());this.autoplay=false;this.buffer=null;this.loop=false;this.startTime=0;this.playbackRate=1;this.isPlaying=false;this.hasPlaybackControl=true;this.sourceType="empty";this.filters=[]}Gl.prototype=Object.assign(Object.create(Wn.prototype),{constructor:Gl,getOutput:function(){return this.gain},setNodeSource:function(e){this.hasPlaybackControl=false;this.sourceType="audioNode";this.source=e;this.connect();return this},setBuffer:function(e){this.buffer=e;this.sourceType="buffer";if(this.autoplay)this.play();return this},play:function(){if(this.isPlaying===true){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===false){console.warn("THREE.Audio: this Audio has no playback control.");return}var e=this.context.createBufferSource();e.buffer=this.buffer;e.loop=this.loop;e.onended=this.onEnded.bind(this);e.playbackRate.setValueAtTime(this.playbackRate,this.startTime);e.start(0,this.startTime);this.isPlaying=true;this.source=e;return this.connect()},pause:function(){if(this.hasPlaybackControl===false){console.warn("THREE.Audio: this Audio has no playback control.");return}this.source.stop();this.startTime=this.context.currentTime;this.isPlaying=false;return this},stop:function(){if(this.hasPlaybackControl===false){console.warn("THREE.Audio: this Audio has no playback control.");return}this.source.stop();this.startTime=0;this.isPlaying=false;return this},connect:function(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(var e=1,t=this.filters.length;e<t;e++){this.filters[e-1].connect(this.filters[e])}this.filters[this.filters.length-1].connect(this.getOutput())}else{this.source.connect(this.getOutput())}return this},disconnect:function(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(var e=1,t=this.filters.length;e<t;e++){
this.filters[e-1].disconnect(this.filters[e])}this.filters[this.filters.length-1].disconnect(this.getOutput())}else{this.source.disconnect(this.getOutput())}return this},getFilters:function(){return this.filters},setFilters:function(e){if(!e)e=[];if(this.isPlaying===true){this.disconnect();this.filters=e;this.connect()}else{this.filters=e}return this},getFilter:function(){return this.getFilters()[0]},setFilter:function(e){return this.setFilters(e?[e]:[])},setPlaybackRate:function(e){if(this.hasPlaybackControl===false){console.warn("THREE.Audio: this Audio has no playback control.");return}this.playbackRate=e;if(this.isPlaying===true){this.source.playbackRate.setValueAtTime(this.playbackRate,this.context.currentTime)}return this},getPlaybackRate:function(){return this.playbackRate},onEnded:function(){this.isPlaying=false},getLoop:function(){if(this.hasPlaybackControl===false){console.warn("THREE.Audio: this Audio has no playback control.");return false}return this.loop},setLoop:function(e){if(this.hasPlaybackControl===false){console.warn("THREE.Audio: this Audio has no playback control.");return}this.loop=e;if(this.isPlaying===true){this.source.loop=this.loop}return this},getVolume:function(){return this.gain.gain.value},setVolume:function(e){this.gain.gain.value=e;return this}});function Hl(e){Gl.call(this,e);this.panner=this.context.createPanner();this.panner.connect(this.gain)}Hl.prototype=Object.assign(Object.create(Gl.prototype),{constructor:Hl,getOutput:function(){return this.panner},getRefDistance:function(){return this.panner.refDistance},setRefDistance:function(e){this.panner.refDistance=e},getRolloffFactor:function(){return this.panner.rolloffFactor},setRolloffFactor:function(e){this.panner.rolloffFactor=e},getDistanceModel:function(){return this.panner.distanceModel},setDistanceModel:function(e){this.panner.distanceModel=e},getMaxDistance:function(){return this.panner.maxDistance},setMaxDistance:function(e){this.panner.maxDistance=e},updateMatrixWorld:function(){var e=new At;return function t(i){Wn.prototype.updateMatrixWorld.call(this,i);e.setFromMatrixPosition(this.matrixWorld);this.panner.setPosition(e.x,e.y,e.z)}}()});function Vl(e,t){this.analyser=e.context.createAnalyser();this.analyser.fftSize=t!==undefined?t:2048;this.data=new Uint8Array(this.analyser.frequencyBinCount);e.getOutput().connect(this.analyser)}Object.assign(Vl.prototype,{getFrequencyData:function(){this.analyser.getByteFrequencyData(this.data);return this.data},getAverageFrequency:function(){var e=0,t=this.getFrequencyData();for(var i=0;i<t.length;i++){e+=t[i]}return e/t.length}});function Wl(e,t,i){this.binding=e;this.valueSize=i;var r=Float64Array,n;switch(t){case"quaternion":n=this._slerp;break;case"string":case"bool":r=Array;n=this._select;break;default:n=this._lerp}this.buffer=new r(i*4);this._mixBufferRegion=n;this.cumulativeWeight=0;this.useCount=0;this.referenceCount=0}Object.assign(Wl.prototype,{accumulate:function(e,t){var i=this.buffer,r=this.valueSize,n=e*r+r,a=this.cumulativeWeight;if(a===0){for(var s=0;s!==r;++s){i[n+s]=i[s]}a=t}else{a+=t;var o=t/a;this._mixBufferRegion(i,n,0,o,r)}this.cumulativeWeight=a},apply:function(e){var t=this.valueSize,i=this.buffer,r=e*t+t,n=this.cumulativeWeight,a=this.binding;this.cumulativeWeight=0;if(n<1){var s=t*3;this._mixBufferRegion(i,r,s,1-n,t)}for(var o=t,l=t+t;o!==l;++o){if(i[o]!==i[o+t]){a.setValue(i,r);break}}},saveOriginalState:function(){var e=this.binding;var t=this.buffer,i=this.valueSize,r=i*3;e.getValue(t,r);for(var n=i,a=r;n!==a;++n){t[n]=t[r+n%i]}this.cumulativeWeight=0},restoreOriginalState:function(){var e=this.valueSize*3;this.binding.setValue(this.buffer,e)},_select:function(e,t,i,r,n){if(r>=.5){for(var a=0;a!==n;++a){e[t+a]=e[i+a]}}},_slerp:function(e,t,i,r){St.slerpFlat(e,t,e,t,e,i,r)},_lerp:function(e,t,i,r,n){var a=1-r;for(var s=0;s!==n;++s){var o=t+s;e[o]=e[o]*a+e[i+s]*r}}});function Xl(e,t,i){var r=i||Yl.parseTrackName(t);this._targetGroup=e;this._bindings=e.subscribe_(t,r)}Object.assign(Xl.prototype,{getValue:function(e,t){this.bind();var i=this._targetGroup.nCachedObjects_,r=this._bindings[i];if(r!==undefined)r.getValue(e,t)},setValue:function(e,t){var i=this._bindings;for(var r=this._targetGroup.nCachedObjects_,n=i.length;r!==n;++r){i[r].setValue(e,t)}},bind:function(){var e=this._bindings;for(var t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t){e[t].bind()}},unbind:function(){var e=this._bindings;for(var t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t){e[t].unbind()}}});function Yl(e,t,i){this.path=t;this.parsedPath=i||Yl.parseTrackName(t);this.node=Yl.findNode(e,this.parsedPath.nodeName)||e;this.rootNode=e}Object.assign(Yl,{Composite:Xl,create:function(e,t,i){if(!(e&&e.isAnimationObjectGroup)){return new Yl(e,t,i)}else{return new Yl.Composite(e,t,i)}},sanitizeNodeName:function(e){return e.replace(/\s/g,"_").replace(/[^\w-]/g,"")},parseTrackName:function(){var e=/((?:[\w-]+[\/:])*)/;var t=/([\w-\.]+)?/;var i=/(?:\.([\w-]+)(?:\[(.+)\])?)?/;var r=/\.([\w-]+)(?:\[(.+)\])?/;var n=new RegExp(""+"^"+e.source+t.source+i.source+r.source+"$");var a=["material","materials","bones"];return function(e){var t=n.exec(e);if(!t){throw new Error("PropertyBinding: Cannot parse trackName: "+e)}var i={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]};var r=i.nodeName&&i.nodeName.lastIndexOf(".");if(r!==undefined&&r!==-1){var s=i.nodeName.substring(r+1);if(a.indexOf(s)!==-1){i.nodeName=i.nodeName.substring(0,r);i.objectName=s}}if(i.propertyName===null||i.propertyName.length===0){throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e)}return i}}(),findNode:function(e,t){if(!t||t===""||t==="root"||t==="."||t===-1||t===e.name||t===e.uuid){return e}if(e.skeleton){var i=function(e){for(var i=0;i<e.bones.length;i++){var r=e.bones[i];if(r.name===t){return r}}return null};var r=i(e.skeleton);if(r){return r}}if(e.children){var n=function(e){for(var i=0;i<e.length;i++){var r=e[i];if(r.name===t||r.uuid===t){return r}var a=n(r.children);if(a)return a}return null};var a=n(e.children);if(a){return a}}return null}});Object.assign(Yl.prototype,{_getValue_unavailable:function(){},_setValue_unavailable:function(){},BindingType:{Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Versioning:{None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},GetterByBindingType:[function e(t,i){t[i]=this.node[this.propertyName]},function e(t,i){var r=this.resolvedProperty;for(var n=0,a=r.length;n!==a;++n){t[i++]=r[n]}},function e(t,i){t[i]=this.resolvedProperty[this.propertyIndex]},function e(t,i){this.resolvedProperty.toArray(t,i)}],SetterByBindingTypeAndVersioning:[[function e(t,i){this.node[this.propertyName]=t[i]},function e(t,i){this.node[this.propertyName]=t[i];this.targetObject.needsUpdate=true},function e(t,i){this.node[this.propertyName]=t[i];this.targetObject.matrixWorldNeedsUpdate=true}],[function e(t,i){var r=this.resolvedProperty;for(var n=0,a=r.length;n!==a;++n){r[n]=t[i++]}},function e(t,i){var r=this.resolvedProperty;for(var n=0,a=r.length;n!==a;++n){r[n]=t[i++]}this.targetObject.needsUpdate=true},function e(t,i){var r=this.resolvedProperty;for(var n=0,a=r.length;n!==a;++n){r[n]=t[i++]}this.targetObject.matrixWorldNeedsUpdate=true}],[function e(t,i){this.resolvedProperty[this.propertyIndex]=t[i]},function e(t,i){this.resolvedProperty[this.propertyIndex]=t[i];this.targetObject.needsUpdate=true},function e(t,i){this.resolvedProperty[this.propertyIndex]=t[i];this.targetObject.matrixWorldNeedsUpdate=true}],[function e(t,i){this.resolvedProperty.fromArray(t,i)},function e(t,i){this.resolvedProperty.fromArray(t,i);this.targetObject.needsUpdate=true},function e(t,i){this.resolvedProperty.fromArray(t,i);this.targetObject.matrixWorldNeedsUpdate=true}]],getValue:function e(t,i){this.bind();this.getValue(t,i)},setValue:function e(t,i){this.bind();this.setValue(t,i)},bind:function(){var e=this.node,t=this.parsedPath,i=t.objectName,r=t.propertyName,n=t.propertyIndex;if(!e){e=Yl.findNode(this.rootNode,t.nodeName)||this.rootNode;this.node=e}this.getValue=this._getValue_unavailable;this.setValue=this._setValue_unavailable;if(!e){console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");return}if(i){var a=t.objectIndex;switch(i){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(var s=0;s<e.length;s++){if(e[s].name===a){a=s;break}}break;default:if(e[i]===undefined){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[i]}if(a!==undefined){if(e[a]===undefined){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[a]}}var o=e[r];if(o===undefined){var l=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+l+"."+r+" but it wasn't found.",e);return}var u=this.Versioning.None;if(e.needsUpdate!==undefined){u=this.Versioning.NeedsUpdate;this.targetObject=e}else if(e.matrixWorldNeedsUpdate!==undefined){u=this.Versioning.MatrixWorldNeedsUpdate;this.targetObject=e}var h=this.BindingType.Direct;if(n!==undefined){if(r==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(e.geometry.isBufferGeometry){if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}for(var s=0;s<this.node.geometry.morphAttributes.position.length;s++){if(e.geometry.morphAttributes.position[s].name===n){n=s;break}}}else{if(!e.geometry.morphTargets){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphTargets.",this);return}for(var s=0;s<this.node.geometry.morphTargets.length;s++){if(e.geometry.morphTargets[s].name===n){n=s;break}}}}h=this.BindingType.ArrayElement;this.resolvedProperty=o;this.propertyIndex=n}else if(o.fromArray!==undefined&&o.toArray!==undefined){h=this.BindingType.HasFromToArray;this.resolvedProperty=o}else if(Array.isArray(o)){h=this.BindingType.EntireArray;this.resolvedProperty=o}else{this.propertyName=r}this.getValue=this.GetterByBindingType[h];this.setValue=this.SetterByBindingTypeAndVersioning[h][u]},unbind:function(){this.node=null;this.getValue=this._getValue_unbound;this.setValue=this._setValue_unbound}});Object.assign(Yl.prototype,{_getValue_unbound:Yl.prototype.getValue,_setValue_unbound:Yl.prototype.setValue});function ql(e){this.uuid=_t.generateUUID();this._objects=Array.prototype.slice.call(arguments);this.nCachedObjects_=0;var t={};this._indicesByUUID=t;for(var i=0,r=arguments.length;i!==r;++i){t[arguments[i].uuid]=i}this._paths=[];this._parsedPaths=[];this._bindings=[];this._bindingsIndicesByPath={};var n=this;this.stats={objects:{get total(){return n._objects.length},get inUse(){return this.total-n.nCachedObjects_}},get bindingsPerObject(){return n._bindings.length}}}Object.assign(ql.prototype,{isAnimationObjectGroup:true,add:function(e){var t=this._objects,i=t.length,r=this.nCachedObjects_,n=this._indicesByUUID,a=this._paths,s=this._parsedPaths,o=this._bindings,l=o.length;for(var u=0,h=arguments.length;u!==h;++u){var c=arguments[u],f=c.uuid,d=n[f],p=undefined;if(d===undefined){d=i++;n[f]=d;t.push(c);for(var m=0,v=l;m!==v;++m){o[m].push(new Yl(c,a[m],s[m]))}}else if(d<r){p=t[d];var g=--r,y=t[g];n[y.uuid]=d;t[d]=y;n[f]=g;t[g]=c;for(var m=0,v=l;m!==v;++m){var _=o[m],b=_[g],x=_[d];_[d]=b;if(x===undefined){x=new Yl(c,a[m],s[m])}_[g]=x}}else if(t[d]!==p){console.error("THREE.AnimationObjectGroup: Different objects with the same UUID "+"detected. Clean the caches or recreate your infrastructure when reloading scenes.")}}this.nCachedObjects_=r},remove:function(e){var t=this._objects,i=this.nCachedObjects_,r=this._indicesByUUID,n=this._bindings,a=n.length;for(var s=0,o=arguments.length;s!==o;++s){var l=arguments[s],u=l.uuid,h=r[u];if(h!==undefined&&h>=i){var c=i++,f=t[c];r[f.uuid]=h;t[h]=f;r[u]=c;t[c]=l;for(var d=0,p=a;d!==p;++d){var m=n[d],v=m[c],g=m[h];m[h]=v;m[c]=g}}}this.nCachedObjects_=i},uncache:function(e){var t=this._objects,i=t.length,r=this.nCachedObjects_,n=this._indicesByUUID,a=this._bindings,s=a.length;for(var o=0,l=arguments.length;o!==l;++o){var u=arguments[o],h=u.uuid,c=n[h];if(c!==undefined){delete n[h];if(c<r){var f=--r,d=t[f],p=--i,m=t[p];n[d.uuid]=c;t[c]=d;n[m.uuid]=f;t[f]=m;t.pop();for(var v=0,g=s;v!==g;++v){var y=a[v],_=y[f],b=y[p];y[c]=_;y[f]=b;y.pop()}}else{var p=--i,m=t[p];n[m.uuid]=c;t[c]=m;t.pop();for(var v=0,g=s;v!==g;++v){var y=a[v];y[c]=y[p];y.pop()}}}}this.nCachedObjects_=r},subscribe_:function(e,t){var i=this._bindingsIndicesByPath,r=i[e],n=this._bindings;if(r!==undefined)return n[r];var a=this._paths,s=this._parsedPaths,o=this._objects,l=o.length,u=this.nCachedObjects_,h=new Array(l);r=n.length;i[e]=r;a.push(e);s.push(t);n.push(h);for(var c=u,f=o.length;c!==f;++c){var d=o[c];h[c]=new Yl(d,e,t)}return h},unsubscribe_:function(e){var t=this._bindingsIndicesByPath,i=t[e];if(i!==undefined){var r=this._paths,n=this._parsedPaths,a=this._bindings,s=a.length-1,o=a[s],l=e[s];t[l]=i;a[i]=o;a.pop();n[i]=n[s];n.pop();r[i]=r[s];r.pop()}}});function $l(e,t,i){this._mixer=e;this._clip=t;this._localRoot=i||null;var r=t.tracks,n=r.length,a=new Array(n);var s={endingStart:rt,endingEnd:rt};for(var o=0;o!==n;++o){var l=r[o].createInterpolant(null);a[o]=l;l.settings=s}this._interpolantSettings=s;this._interpolants=a;this._propertyBindings=new Array(n);this._cacheIndex=null;this._byClipCacheIndex=null;this._timeScaleInterpolant=null;this._weightInterpolant=null;this.loop=Qe;this._loopCount=-1;this._startTime=null;this.time=0;this.timeScale=1;this._effectiveTimeScale=1;this.weight=1;this._effectiveWeight=1;this.repetitions=Infinity;this.paused=false;this.enabled=true;this.clampWhenFinished=false;this.zeroSlopeAtStart=true;this.zeroSlopeAtEnd=true}Object.assign($l.prototype,{play:function(){this._mixer._activateAction(this);return this},stop:function(){this._mixer._deactivateAction(this);return this.reset()},reset:function(){this.paused=false;this.enabled=true;this.time=0;this._loopCount=-1;this._startTime=null;return this.stopFading().stopWarping()},isRunning:function(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)},isScheduled:function(){return this._mixer._isActiveAction(this)},startAt:function(e){this._startTime=e;return this},setLoop:function(e,t){this.loop=e;this.repetitions=t;return this},setEffectiveWeight:function(e){this.weight=e;this._effectiveWeight=this.enabled?e:0;return this.stopFading()},getEffectiveWeight:function(){return this._effectiveWeight},fadeIn:function(e){return this._scheduleFading(e,0,1)},fadeOut:function(e){return this._scheduleFading(e,1,0)},crossFadeFrom:function(e,t,i){e.fadeOut(t);this.fadeIn(t);if(i){var r=this._clip.duration,n=e._clip.duration,a=n/r,s=r/n;e.warp(1,a,t);this.warp(s,1,t)}return this},crossFadeTo:function(e,t,i){return e.crossFadeFrom(this,t,i)},stopFading:function(){var e=this._weightInterpolant;if(e!==null){this._weightInterpolant=null;this._mixer._takeBackControlInterpolant(e)}return this},setEffectiveTimeScale:function(e){this.timeScale=e;this._effectiveTimeScale=this.paused?0:e;return this.stopWarping()},getEffectiveTimeScale:function(){return this._effectiveTimeScale},setDuration:function(e){this.timeScale=this._clip.duration/e;return this.stopWarping()},syncWith:function(e){this.time=e.time;this.timeScale=e.timeScale;return this.stopWarping()},halt:function(e){return this.warp(this._effectiveTimeScale,0,e)},warp:function(e,t,i){var r=this._mixer,n=r.time,a=this._timeScaleInterpolant,s=this.timeScale;if(a===null){a=r._lendControlInterpolant();this._timeScaleInterpolant=a}var o=a.parameterPositions,l=a.sampleValues;o[0]=n;o[1]=n+i;l[0]=e/s;l[1]=t/s;return this},stopWarping:function(){var e=this._timeScaleInterpolant;if(e!==null){this._timeScaleInterpolant=null;this._mixer._takeBackControlInterpolant(e)}return this},getMixer:function(){return this._mixer},getClip:function(){return this._clip},getRoot:function(){return this._localRoot||this._mixer._root},_update:function(e,t,i,r){if(!this.enabled){this._updateWeight(e);return}var n=this._startTime;if(n!==null){var a=(e-n)*i;if(a<0||i===0){return}this._startTime=null;t=i*a}t*=this._updateTimeScale(e);var s=this._updateTime(t);var o=this._updateWeight(e);if(o>0){var l=this._interpolants;var u=this._propertyBindings;for(var h=0,c=l.length;h!==c;++h){l[h].evaluate(s);u[h].accumulate(r,o)}}},_updateWeight:function(e){var t=0;if(this.enabled){t=this.weight;var i=this._weightInterpolant;if(i!==null){var r=i.evaluate(e)[0];t*=r;if(e>i.parameterPositions[1]){this.stopFading();if(r===0){this.enabled=false}}}}this._effectiveWeight=t;return t},_updateTimeScale:function(e){var t=0;if(!this.paused){t=this.timeScale;var i=this._timeScaleInterpolant;if(i!==null){var r=i.evaluate(e)[0];t*=r;if(e>i.parameterPositions[1]){this.stopWarping();if(t===0){this.paused=true}else{this.timeScale=t}}}}this._effectiveTimeScale=t;return t},_updateTime:function(e){var t=this.time+e;if(e===0)return t;var i=this._clip.duration,r=this.loop,n=this._loopCount;if(r===Je){if(n===-1){this._loopCount=0;this._setEndings(true,true,false)}e:{if(t>=i){t=i}else if(t<0){t=0}else break e;if(this.clampWhenFinished)this.paused=true;else this.enabled=false;this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{var a=r===Ke;if(n===-1){if(e>=0){n=0;this._setEndings(true,this.repetitions===0,a)}else{this._setEndings(this.repetitions===0,true,a)}}if(t>=i||t<0){var s=Math.floor(t/i);t-=i*s;n+=Math.abs(s);var o=this.repetitions-n;if(o<0){if(this.clampWhenFinished)this.paused=true;else this.enabled=false;t=e>0?i:0;this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1})}else{if(o===0){var l=e<0;this._setEndings(l,!l,a)}else{this._setEndings(false,false,a)}this._loopCount=n;this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:s})}}if(a&&(n&1)===1){this.time=t;return i-t}}this.time=t;return t},_setEndings:function(e,t,i){var r=this._interpolantSettings;if(i){r.endingStart=nt;r.endingEnd=nt}else{if(e){r.endingStart=this.zeroSlopeAtStart?nt:rt}else{r.endingStart=at}if(t){r.endingEnd=this.zeroSlopeAtEnd?nt:rt}else{r.endingEnd=at}}},_scheduleFading:function(e,t,i){var r=this._mixer,n=r.time,a=this._weightInterpolant;if(a===null){a=r._lendControlInterpolant();this._weightInterpolant=a}var s=a.parameterPositions,o=a.sampleValues;s[0]=n;o[0]=t;s[1]=n+e;o[1]=i;return this}});function Zl(e){this._root=e;this._initMemoryManager();this._accuIndex=0;this.time=0;this.timeScale=1}Object.assign(Zl.prototype,t.prototype,{_bindAction:function(e,t){var i=e._localRoot||this._root,r=e._clip.tracks,n=r.length,a=e._propertyBindings,s=e._interpolants,o=i.uuid,l=this._bindingsByRootAndName,u=l[o];if(u===undefined){u={};l[o]=u}for(var h=0;h!==n;++h){var c=r[h],f=c.name,d=u[f];if(d!==undefined){a[h]=d}else{d=a[h];if(d!==undefined){if(d._cacheIndex===null){++d.referenceCount;this._addInactiveBinding(d,o,f)}continue}var p=t&&t._propertyBindings[h].binding.parsedPath;d=new Wl(Yl.create(i,f,p),c.ValueTypeName,c.getValueSize());++d.referenceCount;this._addInactiveBinding(d,o,f);a[h]=d}s[h].resultBuffer=d.buffer}},_activateAction:function(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){var t=(e._localRoot||this._root).uuid,i=e._clip.uuid,r=this._actionsByClip[i];this._bindAction(e,r&&r.knownActions[0]);this._addInactiveAction(e,i,t)}var n=e._propertyBindings;for(var a=0,s=n.length;a!==s;++a){var o=n[a];if(o.useCount++===0){this._lendBinding(o);o.saveOriginalState()}}this._lendAction(e)}},_deactivateAction:function(e){if(this._isActiveAction(e)){var t=e._propertyBindings;for(var i=0,r=t.length;i!==r;++i){var n=t[i];if(--n.useCount===0){n.restoreOriginalState();this._takeBackBinding(n)}}this._takeBackAction(e)}},_initMemoryManager:function(){this._actions=[];this._nActiveActions=0;this._actionsByClip={};this._bindings=[];this._nActiveBindings=0;this._bindingsByRootAndName={};this._controlInterpolants=[];this._nActiveControlInterpolants=0;var e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}},_isActiveAction:function(e){var t=e._cacheIndex;return t!==null&&t<this._nActiveActions},_addInactiveAction:function(e,t,i){var r=this._actions,n=this._actionsByClip,a=n[t];if(a===undefined){a={knownActions:[e],actionByRoot:{}};e._byClipCacheIndex=0;n[t]=a}else{var s=a.knownActions;e._byClipCacheIndex=s.length;s.push(e)}e._cacheIndex=r.length;r.push(e);a.actionByRoot[i]=e},_removeInactiveAction:function(e){var t=this._actions,i=t[t.length-1],r=e._cacheIndex;i._cacheIndex=r;t[r]=i;t.pop();e._cacheIndex=null;var n=e._clip.uuid,a=this._actionsByClip,s=a[n],o=s.knownActions,l=o[o.length-1],u=e._byClipCacheIndex;l._byClipCacheIndex=u;o[u]=l;o.pop();e._byClipCacheIndex=null;var h=s.actionByRoot,c=(e._localRoot||this._root).uuid;delete h[c];if(o.length===0){delete a[n]}this._removeInactiveBindingsForAction(e)},_removeInactiveBindingsForAction:function(e){var t=e._propertyBindings;for(var i=0,r=t.length;i!==r;++i){var n=t[i];if(--n.referenceCount===0){this._removeInactiveBinding(n)}}},_lendAction:function(e){var t=this._actions,i=e._cacheIndex,r=this._nActiveActions++,n=t[r];e._cacheIndex=r;t[r]=e;n._cacheIndex=i;t[i]=n},_takeBackAction:function(e){var t=this._actions,i=e._cacheIndex,r=--this._nActiveActions,n=t[r];e._cacheIndex=r;t[r]=e;n._cacheIndex=i;t[i]=n},_addInactiveBinding:function(e,t,i){var r=this._bindingsByRootAndName,n=r[t],a=this._bindings;if(n===undefined){n={};r[t]=n}n[i]=e;e._cacheIndex=a.length;a.push(e)},_removeInactiveBinding:function(e){var t=this._bindings,i=e.binding,r=i.rootNode.uuid,n=i.path,a=this._bindingsByRootAndName,s=a[r],o=t[t.length-1],l=e._cacheIndex;o._cacheIndex=l;t[l]=o;t.pop();delete s[n];e:{for(var u in s)break e;delete a[r]}},_lendBinding:function(e){var t=this._bindings,i=e._cacheIndex,r=this._nActiveBindings++,n=t[r];e._cacheIndex=r;t[r]=e;n._cacheIndex=i;t[i]=n},_takeBackBinding:function(e){var t=this._bindings,i=e._cacheIndex,r=--this._nActiveBindings,n=t[r];e._cacheIndex=r;t[r]=e;n._cacheIndex=i;t[i]=n},_lendControlInterpolant:function(){var e=this._controlInterpolants,t=this._nActiveControlInterpolants++,i=e[t];if(i===undefined){i=new Wo(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer);i.__cacheIndex=t;e[t]=i}return i},_takeBackControlInterpolant:function(e){var t=this._controlInterpolants,i=e.__cacheIndex,r=--this._nActiveControlInterpolants,n=t[r];e.__cacheIndex=r;t[r]=e;n.__cacheIndex=i;t[i]=n},_controlInterpolantsResultBuffer:new Float32Array(1),clipAction:function(e,t){var i=t||this._root,r=i.uuid,n=typeof e==="string"?rl.findByName(i,e):e,a=n!==null?n.uuid:e,s=this._actionsByClip[a],o=null;if(s!==undefined){var l=s.actionByRoot[r];if(l!==undefined){return l}o=s.knownActions[0];if(n===null)n=o._clip}if(n===null)return null;var u=new $l(this,n,t);this._bindAction(u,o);this._addInactiveAction(u,a,r);return u},existingAction:function(e,t){var i=t||this._root,r=i.uuid,n=typeof e==="string"?rl.findByName(i,e):e,a=n?n.uuid:e,s=this._actionsByClip[a];if(s!==undefined){return s.actionByRoot[r]||null}return null},stopAllAction:function(){var e=this._actions,t=this._nActiveActions,i=this._bindings,r=this._nActiveBindings;this._nActiveActions=0;this._nActiveBindings=0;for(var n=0;n!==t;++n){e[n].reset()}for(var n=0;n!==r;++n){i[n].useCount=0}return this},update:function(e){e*=this.timeScale;var t=this._actions,i=this._nActiveActions,r=this.time+=e,n=Math.sign(e),a=this._accuIndex^=1;for(var s=0;s!==i;++s){var o=t[s];o._update(r,e,n,a)}var l=this._bindings,u=this._nActiveBindings;for(var s=0;s!==u;++s){l[s].apply(a)}return this},getRoot:function(){return this._root},uncacheClip:function(e){var t=this._actions,i=e.uuid,r=this._actionsByClip,n=r[i];if(n!==undefined){var a=n.knownActions;for(var s=0,o=a.length;s!==o;++s){var l=a[s];this._deactivateAction(l);var u=l._cacheIndex,h=t[t.length-1];l._cacheIndex=null;l._byClipCacheIndex=null;h._cacheIndex=u;t[u]=h;t.pop();this._removeInactiveBindingsForAction(l)}delete r[i]}},uncacheRoot:function(e){var t=e.uuid,i=this._actionsByClip;for(var r in i){var n=i[r].actionByRoot,a=n[t];if(a!==undefined){this._deactivateAction(a);this._removeInactiveAction(a)}}var s=this._bindingsByRootAndName,o=s[t];if(o!==undefined){for(var l in o){var u=o[l];u.restoreOriginalState();this._removeInactiveBinding(u)}}},uncacheAction:function(e,t){var i=this.existingAction(e,t);if(i!==null){this._deactivateAction(i);this._removeInactiveAction(i)}}});function Jl(e){if(typeof e==="string"){console.warn("THREE.Uniform: Type parameter is no longer needed.");e=arguments[1]}this.value=e}Jl.prototype.clone=function(){return new Jl(this.value.clone===undefined?this.value:this.value.clone())};function Ql(){ca.call(this);this.type="InstancedBufferGeometry";this.maxInstancedCount=undefined}Ql.prototype=Object.assign(Object.create(ca.prototype),{constructor:Ql,isInstancedBufferGeometry:true,addGroup:function(e,t,i){this.groups.push({start:e,count:t,materialIndex:i})},copy:function(e){var t=e.index;if(t!==null){this.setIndex(t.clone())}var i=e.attributes;for(var r in i){var n=i[r];this.addAttribute(r,n.clone())}var a=e.groups;for(var s=0,o=a.length;s<o;s++){var l=a[s];this.addGroup(l.start,l.count,l.materialIndex)}return this}});function Kl(e,t,i,r){this.uuid=_t.generateUUID();this.data=e;this.itemSize=t;this.offset=i;this.normalized=r===true}Object.defineProperties(Kl.prototype,{count:{get:function(){return this.data.count}},array:{get:function(){return this.data.array}}});Object.assign(Kl.prototype,{isInterleavedBufferAttribute:true,setX:function(e,t){this.data.array[e*this.data.stride+this.offset]=t;return this},setY:function(e,t){this.data.array[e*this.data.stride+this.offset+1]=t;return this},setZ:function(e,t){this.data.array[e*this.data.stride+this.offset+2]=t;return this},setW:function(e,t){this.data.array[e*this.data.stride+this.offset+3]=t;return this},getX:function(e){return this.data.array[e*this.data.stride+this.offset]},getY:function(e){return this.data.array[e*this.data.stride+this.offset+1]},getZ:function(e){return this.data.array[e*this.data.stride+this.offset+2]},getW:function(e){return this.data.array[e*this.data.stride+this.offset+3]},setXY:function(e,t,i){e=e*this.data.stride+this.offset;this.data.array[e+0]=t;this.data.array[e+1]=i;return this},setXYZ:function(e,t,i,r){e=e*this.data.stride+this.offset;this.data.array[e+0]=t;this.data.array[e+1]=i;this.data.array[e+2]=r;return this},setXYZW:function(e,t,i,r,n){e=e*this.data.stride+this.offset;this.data.array[e+0]=t;this.data.array[e+1]=i;this.data.array[e+2]=r;this.data.array[e+3]=n;return this}});function eu(e,t){this.uuid=_t.generateUUID();this.array=e;this.stride=t;this.count=e!==undefined?e.length/t:0;this.dynamic=false;this.updateRange={offset:0,count:-1};this.onUploadCallback=function(){};this.version=0}Object.defineProperty(eu.prototype,"needsUpdate",{set:function(e){if(e===true)this.version++}});Object.assign(eu.prototype,{isInterleavedBuffer:true,setArray:function(e){if(Array.isArray(e)){throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.")}this.count=e!==undefined?e.length/this.stride:0;this.array=e},setDynamic:function(e){this.dynamic=e;return this},copy:function(e){this.array=new e.array.constructor(e.array);this.count=e.count;this.stride=e.stride;this.dynamic=e.dynamic;return this},copyAt:function(e,t,i){e*=this.stride;i*=t.stride;for(var r=0,n=this.stride;r<n;r++){this.array[e+r]=t.array[i+r]}return this},set:function(e,t){if(t===undefined)t=0;this.array.set(e,t);return this},clone:function(){return(new this.constructor).copy(this)},onUpload:function(e){this.onUploadCallback=e;return this}});function tu(e,t,i){eu.call(this,e,t);this.meshPerAttribute=i||1}tu.prototype=Object.assign(Object.create(eu.prototype),{constructor:tu,isInstancedInterleavedBuffer:true,copy:function(e){eu.prototype.copy.call(this,e);this.meshPerAttribute=e.meshPerAttribute;return this}});function iu(e,t,i){Kn.call(this,e,t);this.meshPerAttribute=i||1}iu.prototype=Object.assign(Object.create(Kn.prototype),{constructor:iu,isInstancedBufferAttribute:true,copy:function(e){Kn.prototype.copy.call(this,e);this.meshPerAttribute=e.meshPerAttribute;return this}});function ru(e,t,i,r){this.ray=new ga(e,t);this.near=i||0;this.far=r||Infinity;this.params={Mesh:{},Line:{},LOD:{},Points:{threshold:1},Sprite:{}};Object.defineProperties(this.params,{PointCloud:{get:function(){console.warn("THREE.Raycaster: params.PointCloud has been renamed to params.Points.");return this.Points}}})}function nu(e,t){return e.distance-t.distance}function au(e,t,i,r){if(e.visible===false)return;e.raycast(t,i);if(r===true){var n=e.children;for(var a=0,s=n.length;a<s;a++){au(n[a],t,i,true)}}}Object.assign(ru.prototype,{linePrecision:1,set:function(e,t){this.ray.set(e,t)},setFromCamera:function(e,t){if(t&&t.isPerspectiveCamera){this.ray.origin.setFromMatrixPosition(t.matrixWorld);this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize()}else if(t&&t.isOrthographicCamera){this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t);this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld)}else{console.error("THREE.Raycaster: Unsupported camera type.")}},intersectObject:function(e,t){var i=[];au(e,this,i,t);i.sort(nu);return i},intersectObjects:function(e,t){var i=[];if(Array.isArray(e)===false){console.warn("THREE.Raycaster.intersectObjects: objects is not an Array.");return i}for(var r=0,n=e.length;r<n;r++){au(e[r],this,i,t)}i.sort(nu);return i}});function su(e){this.autoStart=e!==undefined?e:true;this.startTime=0;this.oldTime=0;this.elapsedTime=0;this.running=false}Object.assign(su.prototype,{start:function(){this.startTime=(typeof performance==="undefined"?Date:performance).now();this.oldTime=this.startTime;this.elapsedTime=0;this.running=true},stop:function(){this.getElapsedTime();this.running=false;this.autoStart=false},getElapsedTime:function(){this.getDelta();return this.elapsedTime},getDelta:function(){var e=0;if(this.autoStart&&!this.running){this.start();return 0}if(this.running){var t=(typeof performance==="undefined"?Date:performance).now();e=(t-this.oldTime)/1e3;this.oldTime=t;this.elapsedTime+=e}return e}});function ou(e,t,i){this.radius=e!==undefined?e:1;this.phi=t!==undefined?t:0;this.theta=i!==undefined?i:0;return this}Object.assign(ou.prototype,{set:function(e,t,i){this.radius=e;this.phi=t;this.theta=i;return this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){this.radius=e.radius;this.phi=e.phi;this.theta=e.theta;return this},makeSafe:function(){var e=1e-6;this.phi=Math.max(e,Math.min(Math.PI-e,this.phi));return this},setFromVector3:function(e){this.radius=e.length();if(this.radius===0){this.theta=0;this.phi=0}else{this.theta=Math.atan2(e.x,e.z);this.phi=Math.acos(_t.clamp(e.y/this.radius,-1,1))}return this}});function lu(e,t,i){this.radius=e!==undefined?e:1;this.theta=t!==undefined?t:0;this.y=i!==undefined?i:0;return this}Object.assign(lu.prototype,{set:function(e,t,i){this.radius=e;this.theta=t
;this.y=i;return this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){this.radius=e.radius;this.theta=e.theta;this.y=e.y;return this},setFromVector3:function(e){this.radius=Math.sqrt(e.x*e.x+e.z*e.z);this.theta=Math.atan2(e.x,e.z);this.y=e.y;return this}});function uu(e){Wn.call(this);this.material=e;this.render=function(e){}}uu.prototype=Object.create(Wn.prototype);uu.prototype.constructor=uu;uu.prototype.isImmediateRenderObject=true;function hu(e,t,i,r){this.object=e;this.size=t!==undefined?t:1;var n=i!==undefined?i:16711680;var a=r!==undefined?r:1;var s=0;var o=this.object.geometry;if(o&&o.isGeometry){s=o.faces.length*3}else if(o&&o.isBufferGeometry){s=o.attributes.normal.count}var l=new ca;var u=new oa(s*2*3,3);l.addAttribute("position",u);ys.call(this,l,new vs({color:n,linewidth:a}));this.matrixAutoUpdate=false;this.update()}hu.prototype=Object.create(ys.prototype);hu.prototype.constructor=hu;hu.prototype.update=function(){var e=new At;var t=new At;var i=new Fn;return function r(){var n=["a","b","c"];this.object.updateMatrixWorld(true);i.getNormalMatrix(this.object.matrixWorld);var a=this.object.matrixWorld;var s=this.geometry.attributes.position;var o=this.object.geometry;if(o&&o.isGeometry){var l=o.vertices;var u=o.faces;var h=0;for(var c=0,f=u.length;c<f;c++){var d=u[c];for(var p=0,m=d.vertexNormals.length;p<m;p++){var v=l[d[n[p]]];var g=d.vertexNormals[p];e.copy(v).applyMatrix4(a);t.copy(g).applyMatrix3(i).normalize().multiplyScalar(this.size).add(e);s.setXYZ(h,e.x,e.y,e.z);h=h+1;s.setXYZ(h,t.x,t.y,t.z);h=h+1}}}else if(o&&o.isBufferGeometry){var y=o.attributes.position;var _=o.attributes.normal;var h=0;for(var p=0,m=y.count;p<m;p++){e.set(y.getX(p),y.getY(p),y.getZ(p)).applyMatrix4(a);t.set(_.getX(p),_.getY(p),_.getZ(p));t.applyMatrix3(i).normalize().multiplyScalar(this.size).add(e);s.setXYZ(h,e.x,e.y,e.z);h=h+1;s.setXYZ(h,t.x,t.y,t.z);h=h+1}}s.needsUpdate=true}}();function cu(e,t){Wn.call(this);this.light=e;this.light.updateMatrixWorld();this.matrix=e.matrixWorld;this.matrixAutoUpdate=false;this.color=t;var i=new ca;var r=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(var n=0,a=1,s=32;n<s;n++,a++){var o=n/s*Math.PI*2;var l=a/s*Math.PI*2;r.push(Math.cos(o),Math.sin(o),1,Math.cos(l),Math.sin(l),1)}i.addAttribute("position",new oa(r,3));var u=new vs({fog:false});this.cone=new ys(i,u);this.add(this.cone);this.update()}cu.prototype=Object.create(Wn.prototype);cu.prototype.constructor=cu;cu.prototype.dispose=function(){this.cone.geometry.dispose();this.cone.material.dispose()};cu.prototype.update=function(){var e=new At;var t=new At;return function i(){this.light.updateMatrixWorld();var r=this.light.distance?this.light.distance:1e3;var n=r*Math.tan(this.light.angle);this.cone.scale.set(n,n,r);e.setFromMatrixPosition(this.light.matrixWorld);t.setFromMatrixPosition(this.light.target.matrixWorld);this.cone.lookAt(t.sub(e));if(this.color!==undefined){this.cone.material.color.set(this.color)}else{this.cone.material.color.copy(this.light.color)}}}();function fu(e){var t=[];if(e&&e.isBone){t.push(e)}for(var i=0;i<e.children.length;i++){t.push.apply(t,fu(e.children[i]))}return t}function du(e){var t=fu(e);var i=new ca;var r=[];var n=[];var a=new _i(0,0,1);var s=new _i(0,1,0);for(var o=0;o<t.length;o++){var l=t[o];if(l.parent&&l.parent.isBone){r.push(0,0,0);r.push(0,0,0);n.push(a.r,a.g,a.b);n.push(s.r,s.g,s.b)}}i.addAttribute("position",new oa(r,3));i.addAttribute("color",new oa(n,3));var u=new vs({vertexColors:b,depthTest:false,depthWrite:false,transparent:true});ys.call(this,i,u);this.root=e;this.bones=t;this.matrix=e.matrixWorld;this.matrixAutoUpdate=false;this.onBeforeRender()}du.prototype=Object.create(ys.prototype);du.prototype.constructor=du;du.prototype.onBeforeRender=function(){var e=new At;var t=new Pt;var i=new Pt;return function r(){var n=this.bones;var a=this.geometry;var s=a.getAttribute("position");i.getInverse(this.root.matrixWorld);for(var o=0,l=0;o<n.length;o++){var u=n[o];if(u.parent&&u.parent.isBone){t.multiplyMatrices(i,u.matrixWorld);e.setFromMatrixPosition(t);s.setXYZ(l,e.x,e.y,e.z);t.multiplyMatrices(i,u.parent.matrixWorld);e.setFromMatrixPosition(t);s.setXYZ(l+1,e.x,e.y,e.z);l+=2}}a.getAttribute("position").needsUpdate=true}}();function pu(e,t,i){this.light=e;this.light.updateMatrixWorld();this.color=i;var r=new Js(t,4,2);var n=new va({wireframe:true,fog:false});ba.call(this,r,n);this.matrix=this.light.matrixWorld;this.matrixAutoUpdate=false;this.update()}pu.prototype=Object.create(ba.prototype);pu.prototype.constructor=pu;pu.prototype.dispose=function(){this.geometry.dispose();this.material.dispose()};pu.prototype.update=function(){if(this.color!==undefined){this.material.color.set(this.color)}else{this.material.color.copy(this.light.color)}};function mu(e,t){Wn.call(this);this.light=e;this.light.updateMatrixWorld();this.matrix=e.matrixWorld;this.matrixAutoUpdate=false;this.color=t;var i=new vs({fog:false});var r=new ca;r.addAttribute("position",new Kn(new Float32Array(5*3),3));this.line=new gs(r,i);this.add(this.line);this.update()}mu.prototype=Object.create(Wn.prototype);mu.prototype.constructor=mu;mu.prototype.dispose=function(){this.children[0].geometry.dispose();this.children[0].material.dispose()};mu.prototype.update=function(){var e=this.light.width*.5;var t=this.light.height*.5;var i=this.line.geometry.attributes.position;var r=i.array;r[0]=e;r[1]=-t;r[2]=0;r[3]=e;r[4]=t;r[5]=0;r[6]=-e;r[7]=t;r[8]=0;r[9]=-e;r[10]=-t;r[11]=0;r[12]=e;r[13]=-t;r[14]=0;i.needsUpdate=true;if(this.color!==undefined){this.line.material.color.set(this.color)}else{this.line.material.color.copy(this.light.color)}};function vu(e,t,i){Wn.call(this);this.light=e;this.light.updateMatrixWorld();this.matrix=e.matrixWorld;this.matrixAutoUpdate=false;this.color=i;var r=new Ds(t);r.rotateY(Math.PI*.5);this.material=new va({wireframe:true,fog:false});if(this.color===undefined)this.material.vertexColors=b;var n=r.getAttribute("position");var a=new Float32Array(n.count*3);r.addAttribute("color",new Kn(a,3));this.add(new ba(r,this.material));this.update()}vu.prototype=Object.create(Wn.prototype);vu.prototype.constructor=vu;vu.prototype.dispose=function(){this.children[0].geometry.dispose();this.children[0].material.dispose()};vu.prototype.update=function(){var e=new At;var t=new _i;var i=new _i;return function r(){var n=this.children[0];if(this.color!==undefined){this.material.color.set(this.color)}else{var a=n.geometry.getAttribute("color");t.copy(this.light.color);i.copy(this.light.groundColor);for(var s=0,o=a.count;s<o;s++){var l=s<o/2?t:i;a.setXYZ(s,l.r,l.g,l.b)}a.needsUpdate=true}n.lookAt(e.setFromMatrixPosition(this.light.matrixWorld).negate())}}();function gu(e,t,i,r){e=e||10;t=t||10;i=new _i(i!==undefined?i:4473924);r=new _i(r!==undefined?r:8947848);var n=t/2;var a=e/t;var s=e/2;var o=[],l=[];for(var u=0,h=0,c=-s;u<=t;u++,c+=a){o.push(-s,0,c,s,0,c);o.push(c,0,-s,c,0,s);var f=u===n?i:r;f.toArray(l,h);h+=3;f.toArray(l,h);h+=3;f.toArray(l,h);h+=3;f.toArray(l,h);h+=3}var d=new ca;d.addAttribute("position",new oa(o,3));d.addAttribute("color",new oa(l,3));var p=new vs({vertexColors:b});ys.call(this,d,p)}gu.prototype=Object.create(ys.prototype);gu.prototype.constructor=gu;function yu(e,t,i,r,n,a){e=e||10;t=t||16;i=i||8;r=r||64;n=new _i(n!==undefined?n:4473924);a=new _i(a!==undefined?a:8947848);var s=[];var o=[];var l,u;var h,c,f,d,p;for(c=0;c<=t;c++){h=c/t*(Math.PI*2);l=Math.sin(h)*e;u=Math.cos(h)*e;s.push(0,0,0);s.push(l,0,u);p=c&1?n:a;o.push(p.r,p.g,p.b);o.push(p.r,p.g,p.b)}for(c=0;c<=i;c++){p=c&1?n:a;d=e-e/i*c;for(f=0;f<r;f++){h=f/r*(Math.PI*2);l=Math.sin(h)*d;u=Math.cos(h)*d;s.push(l,0,u);o.push(p.r,p.g,p.b);h=(f+1)/r*(Math.PI*2);l=Math.sin(h)*d;u=Math.cos(h)*d;s.push(l,0,u);o.push(p.r,p.g,p.b)}}var m=new ca;m.addAttribute("position",new oa(s,3));m.addAttribute("color",new oa(o,3));var v=new vs({vertexColors:b});ys.call(this,m,v)}yu.prototype=Object.create(ys.prototype);yu.prototype.constructor=yu;function _u(e,t,i,r){this.object=e;this.size=t!==undefined?t:1;var n=i!==undefined?i:16776960;var a=r!==undefined?r:1;var s=0;var o=this.object.geometry;if(o&&o.isGeometry){s=o.faces.length}else{console.warn("THREE.FaceNormalsHelper: only THREE.Geometry is supported. Use THREE.VertexNormalsHelper, instead.")}var l=new ca;var u=new oa(s*2*3,3);l.addAttribute("position",u);ys.call(this,l,new vs({color:n,linewidth:a}));this.matrixAutoUpdate=false;this.update()}_u.prototype=Object.create(ys.prototype);_u.prototype.constructor=_u;_u.prototype.update=function(){var e=new At;var t=new At;var i=new Fn;return function r(){this.object.updateMatrixWorld(true);i.getNormalMatrix(this.object.matrixWorld);var n=this.object.matrixWorld;var a=this.geometry.attributes.position;var s=this.object.geometry;var o=s.vertices;var l=s.faces;var u=0;for(var h=0,c=l.length;h<c;h++){var f=l[h];var d=f.normal;e.copy(o[f.a]).add(o[f.b]).add(o[f.c]).divideScalar(3).applyMatrix4(n);t.copy(d).applyMatrix3(i).normalize().multiplyScalar(this.size).add(e);a.setXYZ(u,e.x,e.y,e.z);u=u+1;a.setXYZ(u,t.x,t.y,t.z);u=u+1}a.needsUpdate=true}}();function bu(e,t,i){Wn.call(this);this.light=e;this.light.updateMatrixWorld();this.matrix=e.matrixWorld;this.matrixAutoUpdate=false;this.color=i;if(t===undefined)t=1;var r=new ca;r.addAttribute("position",new oa([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));var n=new vs({fog:false});this.lightPlane=new gs(r,n);this.add(this.lightPlane);r=new ca;r.addAttribute("position",new oa([0,0,0,0,0,1],3));this.targetLine=new gs(r,n);this.add(this.targetLine);this.update()}bu.prototype=Object.create(Wn.prototype);bu.prototype.constructor=bu;bu.prototype.dispose=function(){this.lightPlane.geometry.dispose();this.lightPlane.material.dispose();this.targetLine.geometry.dispose();this.targetLine.material.dispose()};bu.prototype.update=function(){var e=new At;var t=new At;var i=new At;return function r(){e.setFromMatrixPosition(this.light.matrixWorld);t.setFromMatrixPosition(this.light.target.matrixWorld);i.subVectors(t,e);this.lightPlane.lookAt(i);if(this.color!==undefined){this.lightPlane.material.color.set(this.color);this.targetLine.material.color.set(this.color)}else{this.lightPlane.material.color.copy(this.light.color);this.targetLine.material.color.copy(this.light.color)}this.targetLine.lookAt(i);this.targetLine.scale.z=i.length()}}();function xu(e){var t=new ca;var i=new vs({color:16777215,vertexColors:_});var r=[];var n=[];var a={};var s=new _i(16755200);var o=new _i(16711680);var l=new _i(43775);var u=new _i(16777215);var h=new _i(3355443);c("n1","n2",s);c("n2","n4",s);c("n4","n3",s);c("n3","n1",s);c("f1","f2",s);c("f2","f4",s);c("f4","f3",s);c("f3","f1",s);c("n1","f1",s);c("n2","f2",s);c("n3","f3",s);c("n4","f4",s);c("p","n1",o);c("p","n2",o);c("p","n3",o);c("p","n4",o);c("u1","u2",l);c("u2","u3",l);c("u3","u1",l);c("c","t",u);c("p","c",h);c("cn1","cn2",h);c("cn3","cn4",h);c("cf1","cf2",h);c("cf3","cf4",h);function c(e,t,i){f(e,i);f(t,i)}function f(e,t){r.push(0,0,0);n.push(t.r,t.g,t.b);if(a[e]===undefined){a[e]=[]}a[e].push(r.length/3-1)}t.addAttribute("position",new oa(r,3));t.addAttribute("color",new oa(n,3));ys.call(this,t,i);this.camera=e;if(this.camera.updateProjectionMatrix)this.camera.updateProjectionMatrix();this.matrix=e.matrixWorld;this.matrixAutoUpdate=false;this.pointMap=a;this.update()}xu.prototype=Object.create(ys.prototype);xu.prototype.constructor=xu;xu.prototype.update=function(){var e,t;var i=new At;var r=new Xn;function n(n,a,s,o){i.set(a,s,o).unproject(r);var l=t[n];if(l!==undefined){var u=e.getAttribute("position");for(var h=0,c=l.length;h<c;h++){u.setXYZ(l[h],i.x,i.y,i.z)}}}return function i(){e=this.geometry;t=this.pointMap;var a=1,s=1;r.projectionMatrix.copy(this.camera.projectionMatrix);n("c",0,0,-1);n("t",0,0,1);n("n1",-a,-s,-1);n("n2",a,-s,-1);n("n3",-a,s,-1);n("n4",a,s,-1);n("f1",-a,-s,1);n("f2",a,-s,1);n("f3",-a,s,1);n("f4",a,s,1);n("u1",a*.7,s*1.1,-1);n("u2",-a*.7,s*1.1,-1);n("u3",0,s*2,-1);n("cf1",-a,0,1);n("cf2",a,0,1);n("cf3",0,-s,1);n("cf4",0,s,1);n("cn1",-a,0,-1);n("cn2",a,0,-1);n("cn3",0,-s,-1);n("cn4",0,s,-1);e.getAttribute("position").needsUpdate=true}}();function wu(e,t){this.object=e;if(t===undefined)t=16776960;var i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]);var r=new Float32Array(8*3);var n=new ca;n.setIndex(new Kn(i,1));n.addAttribute("position",new Kn(r,3));ys.call(this,n,new vs({color:t}));this.matrixAutoUpdate=false;this.update()}wu.prototype=Object.create(ys.prototype);wu.prototype.constructor=wu;wu.prototype.update=function(){var e=new kn;return function t(i){if(i!==undefined){console.warn("THREE.BoxHelper: .update() has no longer arguments.")}if(this.object!==undefined){e.setFromObject(this.object)}if(e.isEmpty())return;var r=e.min;var n=e.max;var a=this.geometry.attributes.position;var s=a.array;s[0]=n.x;s[1]=n.y;s[2]=n.z;s[3]=r.x;s[4]=n.y;s[5]=n.z;s[6]=r.x;s[7]=r.y;s[8]=n.z;s[9]=n.x;s[10]=r.y;s[11]=n.z;s[12]=n.x;s[13]=n.y;s[14]=r.z;s[15]=r.x;s[16]=n.y;s[17]=r.z;s[18]=r.x;s[19]=r.y;s[20]=r.z;s[21]=n.x;s[22]=r.y;s[23]=r.z;a.needsUpdate=true;this.geometry.computeBoundingSphere()}}();wu.prototype.setFromObject=function(e){this.object=e;this.update();return this};function Tu(e,t){this.type="Box3Helper";this.box=e;var i=t!==undefined?t:16776960;var r=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]);var n=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1];var a=new ca;a.setIndex(new Kn(r,1));a.addAttribute("position",new oa(n,3));ys.call(this,a,new vs({color:i}));this.geometry.computeBoundingSphere();this.onBeforeRender()}Tu.prototype=Object.create(ys.prototype);Tu.prototype.constructor=Tu;Tu.prototype.onBeforeRender=function(){var e=this.box;if(e.isEmpty())return;e.getCenter(this.position);e.getSize(this.scale);this.scale.multiplyScalar(.5)};function Mu(e,t,i){this.type="PlaneHelper";this.plane=e;this.size=t===undefined?1:t;var r=i!==undefined?i:16776960;var n=[1,-1,1,-1,1,1,-1,-1,1,1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,0,0,1,0,0,0];var a=new ca;a.addAttribute("position",new oa(n,3));a.computeBoundingSphere();gs.call(this,a,new vs({color:r}));var s=[1,1,1,-1,1,1,-1,-1,1,1,1,1,-1,-1,1,1,-1,1];var o=new ca;o.addAttribute("position",new oa(s,3));o.computeBoundingSphere();this.add(new ba(o,new va({color:r,opacity:.2,transparent:true,depthWrite:false})));this.onBeforeRender()}Mu.prototype=Object.create(gs.prototype);Mu.prototype.constructor=Mu;Mu.prototype.onBeforeRender=function(){var e=-this.plane.constant;if(Math.abs(e)<1e-8)e=1e-8;this.scale.set(.5*this.size,.5*this.size,e);this.lookAt(this.plane.normal);this.updateMatrixWorld()};var Eu;var Su;function Au(e,t,i,r,n,a){Wn.call(this);if(r===undefined)r=16776960;if(i===undefined)i=1;if(n===undefined)n=.2*i;if(a===undefined)a=.2*n;if(Eu===undefined){Eu=new ca;Eu.addAttribute("position",new oa([0,0,0,0,1,0],3));Su=new so(0,.5,1,5,1);Su.translate(0,-.5,0)}this.position.copy(t);this.line=new gs(Eu,new vs({color:r}));this.line.matrixAutoUpdate=false;this.add(this.line);this.cone=new ba(Su,new va({color:r}));this.cone.matrixAutoUpdate=false;this.add(this.cone);this.setDirection(e);this.setLength(i,n,a)}Au.prototype=Object.create(Wn.prototype);Au.prototype.constructor=Au;Au.prototype.setDirection=function(){var e=new At;var t;return function i(r){if(r.y>.99999){this.quaternion.set(0,0,0,1)}else if(r.y<-.99999){this.quaternion.set(1,0,0,0)}else{e.set(r.z,0,-r.x).normalize();t=Math.acos(r.y);this.quaternion.setFromAxisAngle(e,t)}}}();Au.prototype.setLength=function(e,t,i){if(t===undefined)t=.2*e;if(i===undefined)i=.2*t;this.line.scale.set(1,Math.max(0,e-t),1);this.line.updateMatrix();this.cone.scale.set(i,t,i);this.cone.position.y=e;this.cone.updateMatrix()};Au.prototype.setColor=function(e){this.line.material.color.copy(e);this.cone.material.color.copy(e)};function Pu(e){e=e||1;var t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e];var i=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1];var r=new ca;r.addAttribute("position",new oa(t,3));r.addAttribute("color",new oa(i,3));var n=new vs({vertexColors:b});ys.call(this,r,n)}Pu.prototype=Object.create(ys.prototype);Pu.prototype.constructor=Pu;function Ru(){var e=0,t=0,i=0,r=0;function n(n,a,s,o){e=n;t=s;i=-3*n+3*a-2*s-o;r=2*n-2*a+s+o}return{initCatmullRom:function(e,t,i,r,a){n(t,i,a*(i-e),a*(r-t))},initNonuniformCatmullRom:function(e,t,i,r,a,s,o){var l=(t-e)/a-(i-e)/(a+s)+(i-t)/s;var u=(i-t)/s-(r-t)/(s+o)+(r-i)/o;l*=s;u*=s;n(t,i,l,u)},calc:function(n){var a=n*n;var s=a*n;return e+t*n+i*a+r*s}}}var Lu=new At;var Cu=new Ru;var Ou=new Ru;var Iu=new Ru;function Du(e){Tl.call(this);if(e.length<2)console.warn("THREE.CatmullRomCurve3: Points array needs at least two entries.");this.points=e||[];this.closed=false}Du.prototype=Object.create(Tl.prototype);Du.prototype.constructor=Du;Du.prototype.getPoint=function(e){var t=this.points;var i=t.length;var r=(i-(this.closed?0:1))*e;var n=Math.floor(r);var a=r-n;if(this.closed){n+=n>0?0:(Math.floor(Math.abs(n)/t.length)+1)*t.length}else if(a===0&&n===i-1){n=i-2;a=1}var s,o,l,u;if(this.closed||n>0){s=t[(n-1)%i]}else{Lu.subVectors(t[0],t[1]).add(t[0]);s=Lu}o=t[n%i];l=t[(n+1)%i];if(this.closed||n+2<i){u=t[(n+2)%i]}else{Lu.subVectors(t[i-1],t[i-2]).add(t[i-1]);u=Lu}if(this.type===undefined||this.type==="centripetal"||this.type==="chordal"){var h=this.type==="chordal"?.5:.25;var c=Math.pow(s.distanceToSquared(o),h);var f=Math.pow(o.distanceToSquared(l),h);var d=Math.pow(l.distanceToSquared(u),h);if(f<1e-4)f=1;if(c<1e-4)c=f;if(d<1e-4)d=f;Cu.initNonuniformCatmullRom(s.x,o.x,l.x,u.x,c,f,d);Ou.initNonuniformCatmullRom(s.y,o.y,l.y,u.y,c,f,d);Iu.initNonuniformCatmullRom(s.z,o.z,l.z,u.z,c,f,d)}else if(this.type==="catmullrom"){var p=this.tension!==undefined?this.tension:.5;Cu.initCatmullRom(s.x,o.x,l.x,u.x,p);Ou.initCatmullRom(s.y,o.y,l.y,u.y,p);Iu.initCatmullRom(s.z,o.z,l.z,u.z,p)}return new At(Cu.calc(a),Ou.calc(a),Iu.calc(a))};function ku(e,t,i,r){Tl.call(this);this.v0=e;this.v1=t;this.v2=i;this.v3=r}ku.prototype=Object.create(Tl.prototype);ku.prototype.constructor=ku;ku.prototype.getPoint=function(e){var t=this.v0,i=this.v1,r=this.v2,n=this.v3;return new At(wl(e,t.x,i.x,r.x,n.x),wl(e,t.y,i.y,r.y,n.y),wl(e,t.z,i.z,r.z,n.z))};function Uu(e,t,i){Tl.call(this);this.v0=e;this.v1=t;this.v2=i}Uu.prototype=Object.create(Tl.prototype);Uu.prototype.constructor=Uu;Uu.prototype.getPoint=function(e){var t=this.v0,i=this.v1,r=this.v2;return new At(gl(e,t.x,i.x,r.x),gl(e,t.y,i.y,r.y),gl(e,t.z,i.z,r.z))};function Fu(e,t){Tl.call(this);this.v1=e;this.v2=t}Fu.prototype=Object.create(Tl.prototype);Fu.prototype.constructor=Fu;Fu.prototype.getPoint=function(e){if(e===1){return this.v2.clone()}var t=new At;t.subVectors(this.v2,this.v1);t.multiplyScalar(e);t.add(this.v1);return t};function Nu(e,t,i,r,n,a){Sl.call(this,e,t,i,i,r,n,a)}Nu.prototype=Object.create(Sl.prototype);Nu.prototype.constructor=Nu;var Bu={createMultiMaterialObject:function(e,t){var i=new ws;for(var r=0,n=t.length;r<n;r++){i.add(new ba(e,t[r]))}return i},detach:function(e,t,i){e.applyMatrix(t.matrixWorld);t.remove(e);i.add(e)},attach:function(e,t,i){e.applyMatrix((new Pt).getInverse(i.matrixWorld));t.remove(e);i.add(e)}};function zu(e,t,i,r,n,a,s){console.warn("THREE.Face4 has been removed. A THREE.Face3 will be created instead.");return new $n(e,t,i,n,a,s)}var ju=0;var Gu=1;function Hu(e){console.warn("THREE.MeshFaceMaterial has been removed. Use an Array instead.");return e}function Vu(e){if(e===undefined)e=[];console.warn("THREE.MultiMaterial has been removed. Use an Array instead.");e.isMultiMaterial=true;e.materials=e;e.clone=function(){return e.slice()};return e}function Wu(e,t){console.warn("THREE.PointCloud has been renamed to THREE.Points.");return new xs(e,t)}function Xu(e){console.warn("THREE.Particle has been renamed to THREE.Sprite.");return new cs(e)}function Yu(e,t){console.warn("THREE.ParticleSystem has been renamed to THREE.Points.");return new xs(e,t)}function qu(e){console.warn("THREE.PointCloudMaterial has been renamed to THREE.PointsMaterial.");return new bs(e)}function $u(e){console.warn("THREE.ParticleBasicMaterial has been renamed to THREE.PointsMaterial.");return new bs(e)}function Zu(e){console.warn("THREE.ParticleSystemMaterial has been renamed to THREE.PointsMaterial.");return new bs(e)}function Ju(e,t,i){console.warn("THREE.Vertex has been removed. Use THREE.Vector3 instead.");return new At(e,t,i)}function Qu(e,t){console.warn("THREE.DynamicBufferAttribute has been removed. Use new THREE.BufferAttribute().setDynamic( true ) instead.");return new Kn(e,t).setDynamic(true)}function Ku(e,t){console.warn("THREE.Int8Attribute has been removed. Use new THREE.Int8BufferAttribute() instead.");return new ea(e,t)}function eh(e,t){console.warn("THREE.Uint8Attribute has been removed. Use new THREE.Uint8BufferAttribute() instead.");return new ta(e,t)}function th(e,t){console.warn("THREE.Uint8ClampedAttribute has been removed. Use new THREE.Uint8ClampedBufferAttribute() instead.");return new ia(e,t)}function ih(e,t){console.warn("THREE.Int16Attribute has been removed. Use new THREE.Int16BufferAttribute() instead.");return new ra(e,t)}function rh(e,t){console.warn("THREE.Uint16Attribute has been removed. Use new THREE.Uint16BufferAttribute() instead.");return new na(e,t)}function nh(e,t){console.warn("THREE.Int32Attribute has been removed. Use new THREE.Int32BufferAttribute() instead.");return new aa(e,t)}function ah(e,t){console.warn("THREE.Uint32Attribute has been removed. Use new THREE.Uint32BufferAttribute() instead.");return new sa(e,t)}function sh(e,t){console.warn("THREE.Float32Attribute has been removed. Use new THREE.Float32BufferAttribute() instead.");return new oa(e,t)}function oh(e,t){console.warn("THREE.Float64Attribute has been removed. Use new THREE.Float64BufferAttribute() instead.");return new la(e,t)}Tl.create=function(e,t){console.log("THREE.Curve.create() has been deprecated");e.prototype=Object.create(Tl.prototype);e.prototype.constructor=e;e.prototype.getPoint=t;return e};function lh(e){console.warn("THREE.ClosedSplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead.");Du.call(this,e);this.type="catmullrom";this.closed=true}lh.prototype=Object.create(Du.prototype);function uh(e){console.warn("THREE.SplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead.");Du.call(this,e);this.type="catmullrom"}uh.prototype=Object.create(Du.prototype);function hh(e){console.warn("THREE.Spline has been removed. Use THREE.CatmullRomCurve3 instead.");Du.call(this,e);this.type="catmullrom"}hh.prototype=Object.create(Du.prototype);Object.assign(hh.prototype,{initFromArray:function(e){console.error("THREE.Spline: .initFromArray() has been removed.")},getControlPointsArray:function(e){console.error("THREE.Spline: .getControlPointsArray() has been removed.")},reparametrizeByArcLength:function(e){console.error("THREE.Spline: .reparametrizeByArcLength() has been removed.")}});function ch(e,t){console.warn("THREE.BoundingBoxHelper has been deprecated. Creating a THREE.BoxHelper instead.");return new wu(e,t)}function fh(e,t){console.warn("THREE.EdgesHelper has been removed. Use THREE.EdgesGeometry instead.");return new ys(new no(e.geometry),new vs({color:t!==undefined?t:16777215}))}gu.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")};du.prototype.update=function(){console.error("THREE.SkeletonHelper: update() no longer needs to be called.")};function dh(e,t){console.warn("THREE.WireframeHelper has been removed. Use THREE.WireframeGeometry instead.");return new ys(new Ss(e.geometry),new vs({color:t!==undefined?t:16777215}))}function ph(e){console.warn("THREE.XHRLoader has been renamed to THREE.FileLoader.");return new So(e)}function mh(e){console.warn("THREE.BinaryTextureLoader has been renamed to THREE.DataTextureLoader.");return new Po(e)}Object.assign(Sn.prototype,{center:function(e){console.warn("THREE.Box2: .center() has been renamed to .getCenter().");return this.getCenter(e)},empty:function(){console.warn("THREE.Box2: .empty() has been renamed to .isEmpty().");return this.isEmpty()},isIntersectionBox:function(e){console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox().");return this.intersectsBox(e)},size:function(e){console.warn("THREE.Box2: .size() has been renamed to .getSize().");return this.getSize(e)}});Object.assign(kn.prototype,{center:function(e){console.warn("THREE.Box3: .center() has been renamed to .getCenter().");return this.getCenter(e)},empty:function(){console.warn("THREE.Box3: .empty() has been renamed to .isEmpty().");return this.isEmpty()},isIntersectionBox:function(e){console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox().");return this.intersectsBox(e)},isIntersectionSphere:function(e){console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere().");return this.intersectsSphere(e)},size:function(e){console.warn("THREE.Box3: .size() has been renamed to .getSize().");return this.getSize(e)}});ya.prototype.center=function(e){console.warn("THREE.Line3: .center() has been renamed to .getCenter().");return this.getCenter(e)};_t.random16=function(){console.warn("THREE.Math.random16() has been deprecated. Use Math.random() instead.");return Math.random()};Object.assign(Fn.prototype,{flattenToArrayOffset:function(e,t){console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead.");return this.toArray(e,t)},multiplyVector3:function(e){console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead.");return e.applyMatrix3(this)},multiplyVector3Array:function(e){console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")},applyToBuffer:function(e,t,i){console.warn("THREE.Matrix3: .applyToBuffer() has been removed. Use matrix.applyToBufferAttribute( attribute ) instead.");return this.applyToBufferAttribute(e)},applyToVector3Array:function(e,t,i){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")}});Object.assign(Pt.prototype,{extractPosition:function(e){console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition().");return this.copyPosition(e)},flattenToArrayOffset:function(e,t){console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead.");return this.toArray(e,t)},getPosition:function(){var e;return function t(){if(e===undefined)e=new At;console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead.");return e.setFromMatrixColumn(this,3)}}(),setRotationFromQuaternion:function(e){console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion().");return this.makeRotationFromQuaternion(e)},multiplyToArray:function(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")},multiplyVector3:function(e){console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead.");return e.applyMatrix4(this)},multiplyVector4:function(e){console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead.");return e.applyMatrix4(this)},multiplyVector3Array:function(e){console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")},rotateAxis:function(e){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead.");e.transformDirection(this)},crossVector:function(e){console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead.");return e.applyMatrix4(this)},translate:function(){console.error("THREE.Matrix4: .translate() has been removed.")},rotateX:function(){console.error("THREE.Matrix4: .rotateX() has been removed.")},rotateY:function(){console.error("THREE.Matrix4: .rotateY() has been removed.")},rotateZ:function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")},rotateByAxis:function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")},applyToBuffer:function(e,t,i){console.warn("THREE.Matrix4: .applyToBuffer() has been removed. Use matrix.applyToBufferAttribute( attribute ) instead.");return this.applyToBufferAttribute(e)},applyToVector3Array:function(e,t,i){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")},makeFrustum:function(e,t,i,r,n,a){console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead.");return this.makePerspective(e,t,r,i,n,a)}});Nn.prototype.isIntersectionLine=function(e){console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine().");return this.intersectsLine(e)};St.prototype.multiplyVector3=function(e){console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead.");return e.applyQuaternion(this)};Object.assign(ga.prototype,{isIntersectionBox:function(e){console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox().");return this.intersectsBox(e)},isIntersectionPlane:function(e){console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane().");return this.intersectsPlane(e)},isIntersectionSphere:function(e){console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere().");return this.intersectsSphere(e)}});Object.assign(Ol.prototype,{extrude:function(e){console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead.");return new Xs(this,e)},makeGeometry:function(e){console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead.");return new io(this,e)}});Object.assign(bt.prototype,{fromAttribute:function(e,t,i){console.error("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute().");return this.fromBufferAttribute(e,t,i)}});Object.assign(At.prototype,{setEulerFromRotationMatrix:function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},setEulerFromQuaternion:function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},getPositionFromMatrix:function(e){console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition().");return this.setFromMatrixPosition(e)},getScaleFromMatrix:function(e){console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale().");return this.setFromMatrixScale(e)},getColumnFromMatrix:function(e,t){console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn().");return this.setFromMatrixColumn(t,e)},applyProjection:function(e){console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead.");return this.applyMatrix4(e)},fromAttribute:function(e,t,i){console.error("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute().");return this.fromBufferAttribute(e,t,i)}});Object.assign(Tt.prototype,{fromAttribute:function(e,t,i){console.error("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute().");return this.fromBufferAttribute(e,t,i)}});Qn.prototype.computeTangents=function(){console.warn("THREE.Geometry: .computeTangents() has been removed.")};Object.assign(Wn.prototype,{getChildByName:function(e){console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName().");return this.getObjectByName(e)},renderDepth:function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},translate:function(e,t){console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead.");return this.translateOnAxis(t,e)}});Object.defineProperties(Wn.prototype,{eulerOrder:{get:function(){
console.warn("THREE.Object3D: .eulerOrder is now .rotation.order.");return this.rotation.order},set:function(e){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order.");this.rotation.order=e}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}});Object.defineProperties(fs.prototype,{objects:{get:function(){console.warn("THREE.LOD: .objects has been renamed to .levels.");return this.levels}}});Object.defineProperty(ds.prototype,"useVertexTexture",{get:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")},set:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")}});Object.defineProperty(Tl.prototype,"__arcLengthDivisions",{get:function(){console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions.");return this.arcLengthDivisions},set:function(e){console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions.");this.arcLengthDivisions=e}});qn.prototype.setLens=function(e,t){console.warn("THREE.PerspectiveCamera.setLens is deprecated. "+"Use .setFocalLength and .filmGauge for a photographic setup.");if(t!==undefined)this.filmGauge=t;this.setFocalLength(e)};Object.defineProperties(Oo.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(e){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov.");this.shadow.camera.fov=e}},shadowCameraLeft:{set:function(e){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left.");this.shadow.camera.left=e}},shadowCameraRight:{set:function(e){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right.");this.shadow.camera.right=e}},shadowCameraTop:{set:function(e){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top.");this.shadow.camera.top=e}},shadowCameraBottom:{set:function(e){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom.");this.shadow.camera.bottom=e}},shadowCameraNear:{set:function(e){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near.");this.shadow.camera.near=e}},shadowCameraFar:{set:function(e){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far.");this.shadow.camera.far=e}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(e){console.warn("THREE.Light: .shadowBias is now .shadow.bias.");this.shadow.bias=e}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(e){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width.");this.shadow.mapSize.width=e}},shadowMapHeight:{set:function(e){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height.");this.shadow.mapSize.height=e}}});Object.defineProperties(Kn.prototype,{length:{get:function(){console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead.");return this.array.length}}});Object.assign(ca.prototype,{addIndex:function(e){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex().");this.setIndex(e)},addDrawCall:function(e,t,i){if(i!==undefined){console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset.")}console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup().");this.addGroup(e,t)},clearDrawCalls:function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups().");this.clearGroups()},computeTangents:function(){console.warn("THREE.BufferGeometry: .computeTangents() has been removed.")},computeOffsets:function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")}});Object.defineProperties(ca.prototype,{drawcalls:{get:function(){console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups.");return this.groups}},offsets:{get:function(){console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups.");return this.groups}}});Object.defineProperties(Jl.prototype,{dynamic:{set:function(){console.warn("THREE.Uniform: .dynamic has been removed. Use object.onBeforeRender() instead.")}},onUpdate:{value:function(){console.warn("THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead.");return this}}});Object.defineProperties(Cn.prototype,{wrapAround:{get:function(){console.warn("THREE.Material: .wrapAround has been removed.")},set:function(){console.warn("THREE.Material: .wrapAround has been removed.")}},wrapRGB:{get:function(){console.warn("THREE.Material: .wrapRGB has been removed.");return new _i}},shading:{get:function(){console.error("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.")},set:function(e){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.");this.flatShading=e===v}}});Object.defineProperties(go.prototype,{metal:{get:function(){console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead.");return false},set:function(){console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead")}}});Object.defineProperties(On.prototype,{derivatives:{get:function(){console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives.");return this.extensions.derivatives},set:function(e){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives.");this.extensions.derivatives=e}}});Object.assign(as.prototype,{getCurrentRenderTarget:function(){console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget().");return this.getRenderTarget()},getMaxAnisotropy:function(){console.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy().");return this.capabilities.getMaxAnisotropy()},getPrecision:function(){console.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision.");return this.capabilities.precision},supportsFloatTextures:function(){console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' ).");return this.extensions.get("OES_texture_float")},supportsHalfFloatTextures:function(){console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' ).");return this.extensions.get("OES_texture_half_float")},supportsStandardDerivatives:function(){console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' ).");return this.extensions.get("OES_standard_derivatives")},supportsCompressedTextureS3TC:function(){console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' ).");return this.extensions.get("WEBGL_compressed_texture_s3tc")},supportsCompressedTexturePVRTC:function(){console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' ).");return this.extensions.get("WEBGL_compressed_texture_pvrtc")},supportsBlendMinMax:function(){console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' ).");return this.extensions.get("EXT_blend_minmax")},supportsVertexTextures:function(){console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures.");return this.capabilities.vertexTextures},supportsInstancedArrays:function(){console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' ).");return this.extensions.get("ANGLE_instanced_arrays")},enableScissorTest:function(e){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest().");this.setScissorTest(e)},initMaterial:function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},addPrePlugin:function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},addPostPlugin:function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},updateShadowMap:function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")}});Object.defineProperties(as.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(e){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled.");this.shadowMap.enabled=e}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(e){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type.");this.shadowMap.type=e}},shadowMapCullFace:{get:function(){return this.shadowMap.cullFace},set:function(e){console.warn("THREE.WebGLRenderer: .shadowMapCullFace is now .shadowMap.cullFace.");this.shadowMap.cullFace=e}}});Object.defineProperties(zn.prototype,{cullFace:{get:function(){return this.renderReverseSided?s:a},set:function(e){var t=e!==a;console.warn("WebGLRenderer: .shadowMap.cullFace is deprecated. Set .shadowMap.renderReverseSided to "+t+".");this.renderReverseSided=t}}});Object.defineProperties(Mt.prototype,{wrapS:{get:function(){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS.");return this.texture.wrapS},set:function(e){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS.");this.texture.wrapS=e}},wrapT:{get:function(){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT.");return this.texture.wrapT},set:function(e){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT.");this.texture.wrapT=e}},magFilter:{get:function(){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter.");return this.texture.magFilter},set:function(e){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter.");this.texture.magFilter=e}},minFilter:{get:function(){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter.");return this.texture.minFilter},set:function(e){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter.");this.texture.minFilter=e}},anisotropy:{get:function(){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy.");return this.texture.anisotropy},set:function(e){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy.");this.texture.anisotropy=e}},offset:{get:function(){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset.");return this.texture.offset},set:function(e){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset.");this.texture.offset=e}},repeat:{get:function(){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat.");return this.texture.repeat},set:function(e){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat.");this.texture.repeat=e}},format:{get:function(){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format.");return this.texture.format},set:function(e){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format.");this.texture.format=e}},type:{get:function(){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type.");return this.texture.type},set:function(e){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type.");this.texture.type=e}},generateMipmaps:{get:function(){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps.");return this.texture.generateMipmaps},set:function(e){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps.");this.texture.generateMipmaps=e}}});Gl.prototype.load=function(e){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");var t=this;var i=new Nl;i.load(e,function(e){t.setBuffer(e)});return this};Vl.prototype.getData=function(){console.warn("THREE.AudioAnalyser: .getData() is now .getFrequencyData().");return this.getFrequencyData()};zl.prototype.updateCubeMap=function(e,t){console.warn("THREE.CubeCamera: .updateCubeMap() is now .update().");return this.update(e,t)};var vh={merge:function(e,t,i){console.warn("THREE.GeometryUtils: .merge() has been moved to Geometry. Use geometry.merge( geometry2, matrix, materialIndexOffset ) instead.");var r;if(t.isMesh){t.matrixAutoUpdate&&t.updateMatrix();r=t.matrix;t=t.geometry}e.merge(t,r,i)},center:function(e){console.warn("THREE.GeometryUtils: .center() has been moved to Geometry. Use geometry.center() instead.");return e.center()}};var gh={crossOrigin:undefined,loadTexture:function(e,t,i,r){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");var n=new Co;n.setCrossOrigin(this.crossOrigin);var a=n.load(e,i,undefined,r);if(t)a.mapping=t;return a},loadTextureCube:function(e,t,i,r){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");var n=new Lo;n.setCrossOrigin(this.crossOrigin);var a=n.load(e,i,undefined,r);if(t)a.mapping=t;return a},loadCompressedTexture:function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")},loadCompressedTextureCube:function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")}};function yh(){console.error("THREE.Projector has been moved to /examples/js/renderers/Projector.js.");this.projectVector=function(e,t){console.warn("THREE.Projector: .projectVector() is now vector.project().");e.project(t)};this.unprojectVector=function(e,t){console.warn("THREE.Projector: .unprojectVector() is now vector.unproject().");e.unproject(t)};this.pickingRay=function(){console.error("THREE.Projector: .pickingRay() is now raycaster.setFromCamera().")}}function _h(){console.error("THREE.CanvasRenderer has been moved to /examples/js/renderers/CanvasRenderer.js");this.domElement=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");this.clear=function(){};this.render=function(){};this.setClearColor=function(){};this.setSize=function(){}}e.WebGLRenderTargetCube=Et;e.WebGLRenderTarget=Mt;e.WebGLRenderer=as;e.ShaderLib=En;e.UniformsLib=bi;e.UniformsUtils=xi;e.ShaderChunk=Mn;e.FogExp2=ss;e.Fog=os;e.Scene=ls;e.LensFlare=us;e.Sprite=cs;e.LOD=fs;e.SkinnedMesh=ms;e.Skeleton=ds;e.Bone=ps;e.Mesh=ba;e.LineSegments=ys;e.LineLoop=_s;e.Line=gs;e.Points=xs;e.Group=ws;e.VideoTexture=Ts;e.DataTexture=Rt;e.CompressedTexture=Ms;e.CubeTexture=Lt;e.CanvasTexture=Pn;e.DepthTexture=Es;e.Texture=wt;e.CompressedTextureLoader=Ao;e.DataTextureLoader=Po;e.CubeTextureLoader=Lo;e.TextureLoader=Co;e.ObjectLoader=ul;e.MaterialLoader=nl;e.BufferGeometryLoader=al;e.DefaultLoadingManager=Eo;e.LoadingManager=Mo;e.JSONLoader=ll;e.ImageLoader=Ro;e.FontLoader=kl;e.FileLoader=So;e.Loader=ol;e.Cache=To;e.AudioLoader=Nl;e.SpotLightShadow=ko;e.SpotLight=Uo;e.PointLight=Fo;e.RectAreaLight=jo;e.HemisphereLight=Io;e.DirectionalLightShadow=No;e.DirectionalLight=Bo;e.AmbientLight=zo;e.LightShadow=Do;e.Light=Oo;e.StereoCamera=Bl;e.PerspectiveCamera=qn;e.OrthographicCamera=Yn;e.CubeCamera=zl;e.ArrayCamera=es;e.Camera=Xn;e.AudioListener=jl;e.PositionalAudio=Hl;e.AudioContext=Fl;e.AudioAnalyser=Vl;e.Audio=Gl;e.VectorKeyframeTrack=$o;e.StringKeyframeTrack=Ko;e.QuaternionKeyframeTrack=Jo;e.NumberKeyframeTrack=Qo;e.ColorKeyframeTrack=tl;e.BooleanKeyframeTrack=el;e.PropertyMixer=Wl;e.PropertyBinding=Yl;e.KeyframeTrack=il;e.AnimationUtils=Go;e.AnimationObjectGroup=ql;e.AnimationMixer=Zl;e.AnimationClip=rl;e.Uniform=Jl;e.InstancedBufferGeometry=Ql;e.BufferGeometry=ca;e.GeometryIdCount=Jn;e.Geometry=Qn;e.InterleavedBufferAttribute=Kl;e.InstancedInterleavedBuffer=tu;e.InterleavedBuffer=eu;e.InstancedBufferAttribute=iu;e.Face3=$n;e.Object3D=Wn;e.Raycaster=ru;e.Layers=Hn;e.EventDispatcher=t;e.Clock=su;e.QuaternionLinearInterpolant=Zo;e.LinearInterpolant=Wo;e.DiscreteInterpolant=Xo;e.CubicInterpolant=Vo;e.Interpolant=Ho;e.Triangle=_a;e.Math=_t;e.Spherical=ou;e.Cylindrical=lu;e.Plane=Nn;e.Frustum=Bn;e.Sphere=Un;e.Ray=ga;e.Matrix4=Pt;e.Matrix3=Fn;e.Box3=kn;e.Box2=Sn;e.Line3=ya;e.Euler=Gn;e.Vector4=Tt;e.Vector3=At;e.Vector2=bt;e.Quaternion=St;e.Color=_i;e.ImmediateRenderObject=uu;e.VertexNormalsHelper=hu;e.SpotLightHelper=cu;e.SkeletonHelper=du;e.PointLightHelper=pu;e.RectAreaLightHelper=mu;e.HemisphereLightHelper=vu;e.GridHelper=gu;e.PolarGridHelper=yu;e.FaceNormalsHelper=_u;e.DirectionalLightHelper=bu;e.CameraHelper=xu;e.BoxHelper=wu;e.Box3Helper=Tu;e.PlaneHelper=Mu;e.ArrowHelper=Au;e.AxisHelper=Pu;e.CatmullRomCurve3=Du;e.CubicBezierCurve3=ku;e.QuadraticBezierCurve3=Uu;e.LineCurve3=Fu;e.ArcCurve=Nu;e.EllipseCurve=Sl;e.SplineCurve=Al;e.CubicBezierCurve=Pl;e.QuadraticBezierCurve=Rl;e.LineCurve=Ml;e.Shape=Ol;e.Path=Cl;e.ShapePath=Il;e.Font=Dl;e.CurvePath=El;e.Curve=Tl;e.ShapeUtils=Ws;e.SceneUtils=Bu;e.WebGLUtils=ns;e.WireframeGeometry=Ss;e.ParametricGeometry=As;e.ParametricBufferGeometry=Ps;e.TetrahedronGeometry=Cs;e.TetrahedronBufferGeometry=Os;e.OctahedronGeometry=Is;e.OctahedronBufferGeometry=Ds;e.IcosahedronGeometry=ks;e.IcosahedronBufferGeometry=Us;e.DodecahedronGeometry=Fs;e.DodecahedronBufferGeometry=Ns;e.PolyhedronGeometry=Rs;e.PolyhedronBufferGeometry=Ls;e.TubeGeometry=Bs;e.TubeBufferGeometry=zs;e.TorusKnotGeometry=js;e.TorusKnotBufferGeometry=Gs;e.TorusGeometry=Hs;e.TorusBufferGeometry=Vs;e.TextGeometry=qs;e.TextBufferGeometry=$s;e.SphereGeometry=Zs;e.SphereBufferGeometry=Js;e.RingGeometry=Qs;e.RingBufferGeometry=Ks;e.PlaneGeometry=pa;e.PlaneBufferGeometry=ma;e.LatheGeometry=eo;e.LatheBufferGeometry=to;e.ShapeGeometry=io;e.ShapeBufferGeometry=ro;e.ExtrudeGeometry=Xs;e.ExtrudeBufferGeometry=Ys;e.EdgesGeometry=no;e.ConeGeometry=oo;e.ConeBufferGeometry=lo;e.CylinderGeometry=ao;e.CylinderBufferGeometry=so;e.CircleGeometry=uo;e.CircleBufferGeometry=ho;e.BoxGeometry=fa;e.BoxBufferGeometry=da;e.ShadowMaterial=fo;e.SpriteMaterial=hs;e.RawShaderMaterial=po;e.ShaderMaterial=On;e.PointsMaterial=bs;e.MeshPhysicalMaterial=vo;e.MeshStandardMaterial=mo;e.MeshPhongMaterial=go;e.MeshToonMaterial=yo;e.MeshNormalMaterial=_o;e.MeshLambertMaterial=bo;e.MeshDepthMaterial=In;e.MeshDistanceMaterial=Dn;e.MeshBasicMaterial=va;e.LineDashedMaterial=xo;e.LineBasicMaterial=vs;e.Material=Cn;e.Float64BufferAttribute=la;e.Float32BufferAttribute=oa;e.Uint32BufferAttribute=sa;e.Int32BufferAttribute=aa;e.Uint16BufferAttribute=na;e.Int16BufferAttribute=ra;e.Uint8ClampedBufferAttribute=ia;e.Uint8BufferAttribute=ta;e.Int8BufferAttribute=ea;e.BufferAttribute=Kn;e.REVISION=i;e.MOUSE=r;e.CullFaceNone=n;e.CullFaceBack=a;e.CullFaceFront=s;e.CullFaceFrontBack=o;e.FrontFaceDirectionCW=l;e.FrontFaceDirectionCCW=u;e.BasicShadowMap=h;e.PCFShadowMap=c;e.PCFSoftShadowMap=f;e.FrontSide=d;e.BackSide=p;e.DoubleSide=m;e.FlatShading=v;e.SmoothShading=g;e.NoColors=y;e.FaceColors=_;e.VertexColors=b;e.NoBlending=x;e.NormalBlending=w;e.AdditiveBlending=T;e.SubtractiveBlending=M;e.MultiplyBlending=E;e.CustomBlending=S;e.AddEquation=A;e.SubtractEquation=P;e.ReverseSubtractEquation=R;e.MinEquation=L;e.MaxEquation=C;e.ZeroFactor=O;e.OneFactor=I;e.SrcColorFactor=D;e.OneMinusSrcColorFactor=k;e.SrcAlphaFactor=U;e.OneMinusSrcAlphaFactor=F;e.DstAlphaFactor=N;e.OneMinusDstAlphaFactor=B;e.DstColorFactor=z;e.OneMinusDstColorFactor=j;e.SrcAlphaSaturateFactor=G;e.NeverDepth=H;e.AlwaysDepth=V;e.LessDepth=W;e.LessEqualDepth=X;e.EqualDepth=Y;e.GreaterEqualDepth=q;e.GreaterDepth=$;e.NotEqualDepth=Z;e.MultiplyOperation=J;e.MixOperation=Q;e.AddOperation=K;e.NoToneMapping=ee;e.LinearToneMapping=te;e.ReinhardToneMapping=ie;e.Uncharted2ToneMapping=re;e.CineonToneMapping=ne;e.UVMapping=ae;e.CubeReflectionMapping=se;e.CubeRefractionMapping=oe;e.EquirectangularReflectionMapping=le;e.EquirectangularRefractionMapping=ue;e.SphericalReflectionMapping=he;e.CubeUVReflectionMapping=ce;e.CubeUVRefractionMapping=fe;e.RepeatWrapping=de;e.ClampToEdgeWrapping=pe;e.MirroredRepeatWrapping=me;e.NearestFilter=ve;e.NearestMipMapNearestFilter=ge;e.NearestMipMapLinearFilter=ye;e.LinearFilter=_e;e.LinearMipMapNearestFilter=be;e.LinearMipMapLinearFilter=xe;e.UnsignedByteType=we;e.ByteType=Te;e.ShortType=Me;e.UnsignedShortType=Ee;e.IntType=Se;e.UnsignedIntType=Ae;e.FloatType=Pe;e.HalfFloatType=Re;e.UnsignedShort4444Type=Le;e.UnsignedShort5551Type=Ce;e.UnsignedShort565Type=Oe;e.UnsignedInt248Type=Ie;e.AlphaFormat=De;e.RGBFormat=ke;e.RGBAFormat=Ue;e.LuminanceFormat=Fe;e.LuminanceAlphaFormat=Ne;e.RGBEFormat=Be;e.DepthFormat=ze;e.DepthStencilFormat=je;e.RGB_S3TC_DXT1_Format=Ge;e.RGBA_S3TC_DXT1_Format=He;e.RGBA_S3TC_DXT3_Format=Ve;e.RGBA_S3TC_DXT5_Format=We;e.RGB_PVRTC_4BPPV1_Format=Xe;e.RGB_PVRTC_2BPPV1_Format=Ye;e.RGBA_PVRTC_4BPPV1_Format=qe;e.RGBA_PVRTC_2BPPV1_Format=$e;e.RGB_ETC1_Format=Ze;e.LoopOnce=Je;e.LoopRepeat=Qe;e.LoopPingPong=Ke;e.InterpolateDiscrete=et;e.InterpolateLinear=tt;e.InterpolateSmooth=it;e.ZeroCurvatureEnding=rt;e.ZeroSlopeEnding=nt;e.WrapAroundEnding=at;e.TrianglesDrawMode=st;e.TriangleStripDrawMode=ot;e.TriangleFanDrawMode=lt;e.LinearEncoding=ut;e.sRGBEncoding=ht;e.GammaEncoding=ct;e.RGBEEncoding=ft;e.LogLuvEncoding=dt;e.RGBM7Encoding=pt;e.RGBM16Encoding=mt;e.RGBDEncoding=vt;e.BasicDepthPacking=gt;e.RGBADepthPacking=yt;e.CubeGeometry=fa;e.Face4=zu;e.LineStrip=ju;e.LinePieces=Gu;e.MeshFaceMaterial=Hu;e.MultiMaterial=Vu;e.PointCloud=Wu;e.Particle=Xu;e.ParticleSystem=Yu;e.PointCloudMaterial=qu;e.ParticleBasicMaterial=$u;e.ParticleSystemMaterial=Zu;e.Vertex=Ju;e.DynamicBufferAttribute=Qu;e.Int8Attribute=Ku;e.Uint8Attribute=eh;e.Uint8ClampedAttribute=th;e.Int16Attribute=ih;e.Uint16Attribute=rh;e.Int32Attribute=nh;e.Uint32Attribute=ah;e.Float32Attribute=sh;e.Float64Attribute=oh;e.ClosedSplineCurve3=lh;e.SplineCurve3=uh;e.Spline=hh;e.BoundingBoxHelper=ch;e.EdgesHelper=fh;e.WireframeHelper=dh;e.XHRLoader=ph;e.BinaryTextureLoader=mh;e.GeometryUtils=vh;e.ImageUtils=gh;e.Projector=yh;e.CanvasRenderer=_h;Object.defineProperty(e,"__esModule",{value:true})})},{}],33:[function(e,t,i){var r=e("process/browser.js").nextTick;var n=Function.prototype.apply;var a=Array.prototype.slice;var s={};var o=0;i.setTimeout=function(){return new l(n.call(setTimeout,window,arguments),clearTimeout)};i.setInterval=function(){return new l(n.call(setInterval,window,arguments),clearInterval)};i.clearTimeout=i.clearInterval=function(e){e.close()};function l(e,t){this._id=e;this._clearFn=t}l.prototype.unref=l.prototype.ref=function(){};l.prototype.close=function(){this._clearFn.call(window,this._id)};i.enroll=function(e,t){clearTimeout(e._idleTimeoutId);e._idleTimeout=t};i.unenroll=function(e){clearTimeout(e._idleTimeoutId);e._idleTimeout=-1};i._unrefActive=i.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;if(t>=0){e._idleTimeoutId=setTimeout(function t(){if(e._onTimeout)e._onTimeout()},t)}};i.setImmediate=typeof setImmediate==="function"?setImmediate:function(e){var t=o++;var n=arguments.length<2?false:a.call(arguments,1);s[t]=true;r(function r(){if(s[t]){if(n){e.apply(null,n)}else{e.call(null)}i.clearImmediate(t)}});return t};i.clearImmediate=typeof clearImmediate==="function"?clearImmediate:function(e){delete s[e]}},{"process/browser.js":27}],34:[function(e,t,i){"use strict";var r=e("parse-unit");t.exports=o;var n=96;function a(e,t){var i=r(getComputedStyle(e).getPropertyValue(t));return i[0]*o(i[1],e)}function s(e,t){var i=document.createElement("div");i.style["font-size"]="128"+e;t.appendChild(i);var r=a(i,"font-size")/128;t.removeChild(i);return r}function o(e,t){t=t||document.body;e=(e||"px").trim().toLowerCase();if(t===window||t===document){t=document.body}switch(e){case"%":return t.clientHeight/100;case"ch":case"ex":return s(e,t);case"em":return a(t,"font-size");case"rem":return a(document.body,"font-size");case"vw":return window.innerWidth/100;case"vh":return window.innerHeight/100;case"vmin":return Math.min(window.innerWidth,window.innerHeight)/100;case"vmax":return Math.max(window.innerWidth,window.innerHeight)/100;case"in":return n;case"cm":return n/2.54;case"mm":return n/25.4;case"pt":return n/72;case"pc":return n/6}return 1}},{"parse-unit":26}],35:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:true});var r=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r)r.writable=true;Object.defineProperty(e,r.key,r)}}return function(t,i,r){if(i)e(t.prototype,i);if(r)e(t,r);return t}}();var n=e("./OrbitControls");var a=l(n);var s=e("brindille-resize");var o=l(s);function l(e){return e&&e.__esModule?e:{default:e}}function u(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var h=function(){function e(t,i){var r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;u(this,e);this.onMouseMove=this.onMouseMove.bind(this);this.debug=r;this.autoMode=false;this.enableManual=true;this.distance=o.default.width<o.default.height?500:320;if(this.debug){this.engine=new a.default(t,{element:i,distance:this.distance})}else{this.engine=new a.default(t,{element:i,parent:i,damping:.05,distance:this.distance,phi:Math.PI*.5,phiBounds:[Math.PI*.4,Math.PI*.6],thetaBounds:[-Math.PI*.1,Math.PI*.1],distanceBounds:[this.distance-20,this.distance+20],zoom:true})}this.engine.rotateTo(-.03665,1.9446);this.phi=this.engine.phi;this.theta=this.engine.phi;this.mouseY=.5;this.mouseX=.5;window.addEventListener("mousemove",this.onMouseMove)}r(e,[{key:"setAutoMode",value:function e(t){this.autoMode=t;if(t){this.theta=this.engine.theta}}},{key:"onMouseMove",value:function e(t){this.mouseY=t.clientY/o.default.height;this.mouseX=t.clientX/o.default.width}},{key:"update",value:function e(){if(this.enableManual){this.engine.update()}if(this.debug)return;if(this.enableManual){this.phi+=(this.mouseY*(this.engine.phiBounds[1]-this.engine.phiBounds[0])+this.engine.phiBounds[0]-this.phi)*.1;this.theta+=(this.mouseX*(this.engine.thetaBounds[1]-this.engine.thetaBounds[0])+this.engine.thetaBounds[0]-this.theta)*.1}this.engine.rotateTo(this.autoMode?this.theta:this.theta,this.phi)}}]);return e}();i.default=h},{"./OrbitControls":36,"brindille-resize":14}],36:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:true});var r=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r)r.writable=true;Object.defineProperty(e,r.key,r)}}return function(t,i,r){if(i)e(t.prototype,i);if(r)e(t,r);return t}}();var n=e("three");var a=e("mouse-event-offset");var s=c(a);var o=e("mouse-wheel");var l=c(o);var u=e("clamp");var h=c(u);function c(e){return e&&e.__esModule?e:{default:e}}function f(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var d=new n.Vector3(0,1,0);var p=1e-10;var m=function(){function e(t){var i=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};f(this,e);this.onInputDown=this.onInputDown.bind(this);this.onInputMove=this.onInputMove.bind(this);this.onInputUp=this.onInputUp.bind(this);this.handleZoom=this.handleZoom.bind(this);this.preventDefault=this.preventDefault.bind(this);this.update=this.update.bind(this);this.object=t;this.inputDelta=new n.Vector3;this.offset=new n.Vector3;this.upQuat=new n.Quaternion;this.upQuatInverse=new n.Quaternion;this.enabled=true;this.target=i.target||new n.Vector3;this.distance=i.distance||1;this.damping=i.damping||.25;this.rotateSpeed=i.rotateSpeed||.28;this.zoomSpeed=i.zoomSpeed||.0075;this.rotate=i.rotate!==false;this.zoom=i.zoom!==false;this._theta=i.theta||0;this._phi=i.phi||Math.PI*.5;this.phiBounds=i.phiBounds||[0,Math.PI];this.thetaBounds=i.thetaBounds||[-Infinity,Infinity];this.distanceBounds=i.distanceBounds||[1,Infinity];this.parent=i.parent||window;this.element=i.element;this.pinchHandler;this.mouseStart=new n.Vector2;this.clientSize=new n.Vector2;this.tmp=[0,0];this.dragging=true;this.addEvents();this.rotateTo(this._theta,this._phi)}r(e,[{key:"dispose",value:function e(){this.removeEvents()}},{key:"reset",value:function e(){this.inputDelta=new n.Vector3;this.mouseStart=new n.Vector2;this.theta=0;this.phi=Math.PI*.5}},{key:"addEvents",value:function e(){if(this.rotate){this.parent.addEventListener("mousemove",this.onInputMove)}if(this.zoom){(0,l.default)(window,this.handleZoom,true)}}},{key:"removeEvents",value:function e(){this.parent.removeEventListener("mousedown",this.onInputDown);this.parent.removeEventListener("mousemove",this.onInputMove);this.parent.removeEventListener("mouseup",this.onInputUp)}},{key:"preventDefault",value:function e(t){t.preventDefault()}},{key:"onInputDown",value:function e(t){if(!this.enabled)return;var i=(0,s.default)(t,this.element);this.mouseStart.set(i[0],i[1]);if(this.insideBounds(this.mouseStart)){this.dragging=true}}},{key:"onInputUp",value:function e(){if(!this.enabled)return;this.dragging=false}},{key:"onInputMove",value:function e(t){if(!this.enabled)return;var i=(0,s.default)(t,this.element);if(!this.dragging)return;var r=this.getClientSize();var n=(i[0]-this.mouseStart.x)/r.x;var a=(i[1]-this.mouseStart.y)/r.y;this.handleRotate(n,a);this.mouseStart.set(i[0],i[1])}},{key:"insideBounds",value:function e(t){if(this.element===window||this.element===document||this.element===document.body){return true}else{var i=this.element.getBoundingClientRect();return t.x>=0&&t.y>=0&&t.x<i.width&&t.y<i.height}}},{key:"getClientSize",value:function e(){var t=this.element;if(t===window||t===document||t===document.body){t=document.documentElement}return this.clientSize.set(t.clientWidth,t.clientHeight)}},{key:"handleRotate",value:function e(t,i){var r=Math.PI*2;this.inputDelta.x-=r*t*this.rotateSpeed;this.inputDelta.y-=r*i*this.rotateSpeed}},{key:"handleZoom",value:function e(t,i){this.inputDelta.z+=i*this.zoomSpeed}},{key:"rotateTo",value:function e(t,i){this._prepareOffset();this.theta=t;this.phi=i;this._computeOffset();this._applyTransformation()}},{key:"_prepareOffset",value:function e(){this.upQuat.setFromUnitVectors(this.object.up,d);this.upQuatInverse.copy(this.upQuat).inverse();this.offset.subVectors(this.object.position,this.target);this.offset.applyQuaternion(this.upQuat)}},{key:"_computeOffset",value:function e(){var t=Math.abs(this.distance)<=p?p:this.distance;this.offset.x=t*Math.sin(this.phi)*Math.sin(this.theta);this.offset.y=t*Math.cos(this.phi);this.offset.z=t*Math.sin(this.phi)*Math.cos(this.theta)}},{key:"_applyTransformation",value:function e(){this.offset.applyQuaternion(this.upQuatInverse);this.object.position.addVectors(this.target,this.offset);this.object.lookAt(this.target)}},{key:"_applyDamping",value:function e(){var t=typeof this.damping==="number"?this.damping:1;this.inputDelta.x*=1-t;this.inputDelta.y*=1-t;this.inputDelta.z*=1-t}},{key:"update",value:function e(){this._prepareOffset();var t=Math.atan2(this.offset.x,this.offset.z);var i=Math.atan2(Math.sqrt(this.offset.x*this.offset.x+this.offset.z*this.offset.z),this.offset.y);t+=this.inputDelta.x;i+=this.inputDelta.y;this.theta=t;this.phi=i;this.distance+=this.inputDelta.z;this.distance=(0,h.default)(this.distance,this.distanceBounds[0],this.distanceBounds[1]);this._computeOffset();this._applyTransformation();this._applyDamping()}},{key:"theta",get:function e(){return this._theta},set:function e(t){this._theta=(0,h.default)(t,this.thetaBounds[0],this.thetaBounds[1])}},{key:"phi",get:function e(){return this._phi},set:function e(t){this._phi=(0,h.default)(t,this.phiBounds[0],this.phiBounds[1]);this._phi=(0,h.default)(this._phi,p,Math.PI-p)}}]);return e}();i.default=m},{clamp:15,"mouse-event-offset":24,"mouse-wheel":25,three:32}],37:[function(e,t,i){"use strict";var r=e("three");var n=e("raf-loop");var a=D(n);e("gsap");var s=e("./utils/debug");var o=e("brindille-resize");var l=D(o);var u=e("./utils/preloader");var h=D(u);var c=e("./utils/manifest")
;var f=D(c);var d=e("@superguigui/wagner");var p=D(d);var m=e("@superguigui/wagner/src/passes/bloom/MultiPassBloomPass");var v=D(m);var g=e("./postfx/general/GeneralPass2");var y=D(g);var _=e("./postfx/frozen/FrozenPass");var b=D(_);var x=e("@superguigui/wagner/src/passes/fxaa/FXAAPass");var w=D(x);var T=e("./scenes/UIScene");var M=D(T);var E=e("./scenes/GameScene");var S=D(E);var A=e("./scenes/FusionScene");var P=D(A);var R=e("./ui/Tuto");var L=D(R);var C=e("dom-classes");var O=D(C);var I=e("timers");function D(e){return e&&e.__esModule?e:{default:e}}var k={useFXAA:true,useBloom:true,useFrozen:true,showTuto:false,isWindy:false};var U=document.body.querySelector(".TutoBtn");var F={x:0,y:0};var N=document.body.querySelector(".Canvas");var B=new r.WebGLRenderer({antialias:true,alpha:true});B.setClearColor(3289650,0);N.style.overflow="hidden";N.style.margin=0;N.appendChild(B.domElement);var z=new p.default.Composer(B);var j=new y.default;j.params.gamma=k.useBloom?.36:.7;var G=new w.default;var H=new b.default;var V=new v.default({blurAmount:.15,applyZoomBlur:false,width:l.default.width,height:l.default.height});var W=new M.default(B.domElement);var X=new S.default(B.domElement);var Y=new P.default(B.domElement);var q=new TimelineMax;var $=ee();h.default.load(f.default,J);var Z=(0,a.default)(ce);function J(){X.onLoadComplete(B.domElement);W.onLoadComplete(B.domElement);Y.onLoadComplete(B.domElement);var e=h.default.getTexture("FrozTexture");e.wrapS=e.wrapT=r.RepeatWrapping;e.offset.set(0,0);e.repeat.set(2,2);H.params.tMask=e;l.default.addListener(ne);Z.start();setTimeout(function(){ne();Q()},200);ie()}function Q(){console.log("hi");re();setTimeout(function(){K()},6e3)}function K(){re();X.setIntro();window.addEventListener("click",re);window.addEventListener("keydown",he);window.addEventListener("touchstart",ae);window.addEventListener("touchend",ue)}function ee(){clearTimeout($);if(q)q.kill();$=setTimeout(te,Math.random()*14e3+4e3)}function te(){if(k.showTuto)return;H.params.thresold=1;k.isWindy=true;q=new TimelineMax({onComplete:function e(){k.isWindy=false;ee();q.kill()}});var e=Math.random()*20+10;q.fromTo(H.params,e,{spreadThresold:-1},{spreadThresold:1,ease:Expo.easeNone},0);q.fromTo(j.params,e,{vignetteAmount:.6},{vignetteAmount:.8,ease:Expo.easeNone},0)}function ie(){s.gui.add(k,"showTuto").on("update",function(){re(k.showTuto)});var e=s.panelFX.addFolder("postfx");e.open();e.add(k,"useComposer");e.add(k,"useFXAA");e.add(k,"useFrozen");e.add(k,"useBloom").on("update",function(){j.params.gamma=k.useBloom?.32:.7});e.add(V.params,"blurAmount",{min:0,max:5,step:.01})}function re(){if(q)q.kill();k.showTuto=!k.showTuto;var e=new TimelineMax;if(k.showTuto){O.default.add(U,"TutoBtn--open");e.fromTo(H.params,.8,{thresold:0},{thresold:1,ease:Expo.easeNone},0);e.fromTo(j.params,.6,{brightness:.06},{brightness:.15,ease:Expo.easeOut},0);e.fromTo(j.params,.8,{vignetteFallOff:.2},{vignetteFallOff:.3,ease:Expo.easeNone},0);e.fromTo(j.params,.8,{vignetteAmount:.6},{vignetteAmount:.7,ease:Expo.easeNone},0);e.add(L.default.show(),.8)}else{O.default.remove(U,"TutoBtn--open");e.fromTo(H.params,.6,{thresold:1},{thresold:0,ease:Expo.easeOut},0);e.to(j.params,.6,{brightness:.06,ease:Expo.easeOut},0);e.to(j.params,.6,{vignetteFallOff:.2,ease:Expo.easeOut},0);e.to(j.params,.6,{vignetteAmount:.6,ease:Expo.easeOut},0);e.add(L.default.hide(),0)}}function ne(){W.resize(l.default.width,l.default.height);X.resize(l.default.width,l.default.height);Y.resize(l.default.width,l.default.height);B.setSize(l.default.width,l.default.height);z.setSize(l.default.width,l.default.height)}function ae(e){X.spawnComponent()}var se=function e(){X.spawnComponent()};var oe;var le=200;function ae(){if(oe)(0,I.clearInterval)(oe);X.spawnComponent();oe=(0,I.setInterval)(se,le)}function ue(){if(oe)(0,I.clearInterval)(oe)}function he(e){var t=true;var i=undefined;switch(e.keyCode){case 0:case 32:X.spawnComponent();i=0;break;case 49:X.spawnComponent(0);i=1;break;case 50:X.spawnComponent(1);i=2;break;case 51:X.spawnComponent(2);i=3;break;case 52:X.spawnComponent(3);i=4;break;case 53:X.spawnComponent(4);i=5;break;case 54:X.spawnComponent(5);i=6;break;case 55:X.spawnComponent(6);i=7;break;default:t=false;break}if(k.showTuto)L.default.onKeyPress(i);if(t){}}function ce(e){if(Y){W.update(e,F);X.update(e);Y.update(e)}if(k.showTuto===false&&k.isWindy===false){if(X.speed<.09){ee();j.params.brightness+=(.3-j.params.brightness)*X.speed;H.params.thresold+=(1-H.params.thresold)*X.speed;H.params.spreadThresold+=(0-H.params.thresold)*X.speed}else{H.params.spreadThresold+=(1-H.params.thresold)*X.speed;H.params.thresold+=(1e-4-H.params.thresold)*.04;j.params.brightness+=(.06-j.params.brightness)*.1}}z.reset();B.render(X,X.camera,Y.rtTexture2,true);B.render(W,W.camera,Y.rtTexture,true);z.render(Y,Y.camera);z.pass(j);if(k.useFrozen)z.pass(H);if(k.useFXAA)z.pass(G);if(k.useBloom)z.pass(V);z.toScreen()}},{"./postfx/frozen/FrozenPass":51,"./postfx/general/GeneralPass2":52,"./scenes/FusionScene":53,"./scenes/GameScene":54,"./scenes/UIScene":55,"./ui/Tuto":56,"./utils/debug":57,"./utils/manifest":58,"./utils/preloader":59,"@superguigui/wagner":1,"@superguigui/wagner/src/passes/bloom/MultiPassBloomPass":6,"@superguigui/wagner/src/passes/fxaa/FXAAPass":11,"brindille-resize":14,"dom-classes":18,gsap:20,"raf-loop":28,three:32,timers:33}],38:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:true});var r=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r)r.writable=true;Object.defineProperty(e,r.key,r)}}return function(t,i,r){if(i)e(t.prototype,i);if(r)e(t,r);return t}}();var n=e("three");var a=e("../../utils/debug");function s(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function o(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function l(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}var u=function(e){l(t,e);function t(e){s(this,t);var i=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));i.uniforms=n.UniformsUtils.merge([n.ShaderLib.physical.uniforms,n.ShaderLib.standard.uniforms,{time:{value:1}}]);i.setFlags(i);i.setValues(e);i.isMeshStandardMaterial=true;i.lights=true;i.setGui();return i}r(t,[{key:"setFlags",value:function e(t){t.vertexShader="#define GLSLIFY 1\n#define LAMBERT\n\nvarying vec3 vLightFront;\n\n#ifdef DOUBLE_SIDED\n\n\tvarying vec3 vLightBack;\n\n#endif\nvarying vec2 vUv;\n\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n\nvoid main() {\n  vUv = uv;\n\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n\n}";t.fragmentShader="#define GLSLIFY 1\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n\nvarying vec3 vLightFront;\n\n#ifdef DOUBLE_SIDED\n\n\tvarying vec3 vLightBack;\n\n#endif\n\nvarying vec2 vUv;\n\nuniform float time;\n\n/*\n * This function will function like an array.\n */\nvec2 getWaveSource(int ws)\n{\n\tvec2 outp;\n\tif (ws == 0)\n\t{\n\t\toutp = vec2(-100,-100);\n\t}\n\telse if (ws == 1)\n\t{\n\t\toutp = vec2(-100,500);\n\t}\n\telse\n\t{\n\t\toutp = vec2(500,-500);\n\t}\n\treturn outp;\n}\n/*\n * Don't need an expensive square root operation.\n * This returns distance squared, not distance.\n */\nfloat distanceSq(vec2 a, vec2 b)\n{\n\tvec2 diff = a - b;\n\treturn dot(diff, diff);\n}\n\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <bsdfs>\n#include <lights_pars>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\n\nvoid main() {\n\n\t#include <clipping_planes_fragment>\n\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\n\tconst int wsCount = 3;\n\t\n\tvec2 uv = vUv;\n\t// vec2 uv = fragCoord.xy / iResolution.xy;\n\t\n\tfloat wavePower = 0.0;\n\tfor(int i=0; i<wsCount; i++)\n\t{\n\t\tvec2 src = getWaveSource(i);\n\t\tfloat dist = distanceSq(src, uv) / 500.0;\n\t\twavePower += sin((dist + time));\n\t\t\n\t}\n\n\tdiffuseColor  = vec4(\n\t\t0.8 + 0.2 * sin(wavePower),\n\t\t0.5 + 0.2 * cos(wavePower), \n\t\t0.8 + 0.3 * cos(time),\n\t\topacity\n\t);\n\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\n\t// accumulation\n\treflectedLight.indirectDiffuse = getAmbientLightIrradiance( ambientLightColor );\n\n\t#include <lightmap_fragment>\n\n\treflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );\n\n\t#ifdef DOUBLE_SIDED\n\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\n\t#else\n\n\t\treflectedLight.directDiffuse = vLightFront;\n\n\t#endif\n\n\treflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();\n\n\t// modulation\n\t#include <aomap_fragment>\n\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\n\t#include <envmap_fragment>\n\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n\n}";t.type="IceMaterial"}},{key:"setGui",value:function e(){var t=a.gui.addFolder("iceMaterial");t.addColorPicker(this,"color");t.addColorPicker(this,"emissive");t.add(this,"transparent");t.add(this,"opacity",{max:1,min:0,step:.01});t.add(this,"refractionRatio",{max:2,min:0,step:.01});t.add(this,"reflectivity",{max:2,min:0,step:.01})}}]);return t}(n.MeshLambertMaterial);i.default=u},{"../../utils/debug":57,three:32}],39:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:true});var r=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r)r.writable=true;Object.defineProperty(e,r.key,r)}}return function(t,i,r){if(i)e(t.prototype,i);if(r)e(t,r);return t}}();var n=e("three");var a=e("./SnowPhysic");var s=u(a);var o=e("../utils/preloader");var l=u(o);function u(e){return e&&e.__esModule?e:{default:e}}function h(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function c(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function f(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}var d=function(e){f(t,e);function t(){h(this,t);var e=c(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));e.particlesPhysics=[];e.nbParticles=800;e.initBuffer();return e}r(t,[{key:"initBuffer",value:function e(){this.snowMaterial=new n.PointsMaterial({color:16777215,map:l.default.getTexture("SnowTexture"),size:8,blending:n.AdditiveBlending,transparent:true,depthTest:false});this.particles=new n.BufferGeometry;this.particlePositions=new Float32Array(this.nbParticles*3);for(var t=0;t<this.nbParticles;t++){this.particlePositions[t*3+0]=Math.random()*2e3-1e3;this.particlePositions[t*3+1]=Math.random()*2e3-1e3;this.particlePositions[t*3+2]=1e3;var i=new s.default(this.particlePositions[t*3+0],this.particlePositions[t*3+1],this.particlePositions[t*3+2]);this.particlesPhysics.push(i)}this.particles.setDrawRange(0,this.nbParticles*3);this.particles.addAttribute("position",new n.BufferAttribute(this.particlePositions,3).setDynamic(true));this.pointCloud=new n.Points(this.particles,this.snowMaterial);this.add(this.pointCloud)}},{key:"evolveSnow",value:function e(){for(var t=0;t<this.nbParticles;t++){var i=this.particlesPhysics[t];i.updatePhysics();this.particlePositions[t*3+0]=i.position.x;this.particlePositions[t*3+1]=i.position.y;this.particlePositions[t*3+2]=i.position.z}this.pointCloud.geometry.attributes.position.needsUpdate=true}},{key:"update",value:function e(){this.evolveSnow()}}]);return t}(n.Object3D);i.default=d},{"../utils/preloader":59,"./SnowPhysic":40,three:32}],40:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:true});var r=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r)r.writable=true;Object.defineProperty(e,r.key,r)}}return function(t,i,r){if(i)e(t.prototype,i);if(r)e(t,r);return t}}();var n=e("three");function a(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var s=Math.PI/180;var o=function(){function e(t,i,r){a(this,e);this.velocity=new n.Vector3(0,-4,0);this.vRotateX(l(-45,45));this.vRotateY(l(0,360));this.gravity=new n.Vector3(0,0,0);this.drag=1;this.position=new n.Vector3(t,i,r)}r(e,[{key:"updatePhysics",value:function e(){this.velocity.multiplyScalar(this.drag);this.velocity.add(this.gravity);this.position.add(this.velocity);if(this.position.y<-1e3)this.position.y+=2e3;if(this.position.x>1e3)this.position.x-=2e3;else if(this.position.x<-1e3)this.position.x+=2e3;if(this.position.z>1e3)this.position.z-=2e3;else if(this.position.z<-1e3)this.position.z+=2e3}},{key:"vRotateY",value:function e(t){var i=Math.cos(t*s);var r=Math.sin(t*s);var n=this.velocity.z;var a=this.velocity.x;this.velocity.x=a*i+n*r;this.velocity.z=a*-r+n*i}},{key:"vRotateX",value:function e(t){var i=Math.cos(t*s);var r=Math.sin(t*s);var n=this.velocity.z;var a=this.velocity.y;this.velocity.y=a*i+n*r;this.velocity.z=a*-r+n*i}},{key:"vRotateZ",value:function e(t){var i=Math.cos(t*s);var r=Math.sin(t*s);var n=this.velocity.x;var a=this.velocity.y;this.velocity.y=a*i+n*r;this.velocity.x=a*-r+n*i}}]);return e}();i.default=o;function l(e,t){return Math.random()*(t-e)+e}},{three:32}],41:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:true});var r=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r)r.writable=true;Object.defineProperty(e,r.key,r)}}return function(t,i,r){if(i)e(t.prototype,i);if(r)e(t,r);return t}}();var n=e("three");function a(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function s(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function o(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}var l=function(e){o(t,e);function t(e){a(this,t);var i=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));i.geometry=new n.CylinderGeometry(6,6,10,6);i.material=e||new n.MeshStandardMaterial({color:16711920});var r=new n.MeshStandardMaterial({color:15728880,transparent:true,opacity:.5});var o=new n.Mesh(i.geometry,i.material);o.scale.set(.8,.8,.8);var l=new n.Mesh(i.geometry,r);i.add(o);i.rotation.z=Math.PI*.5;return i}r(t,[{key:"destroy",value:function e(){this.material.dispose();this.geometry.dispose()}},{key:"update",value:function e(){this.rotation.x+=.01}}]);return t}(n.Object3D);i.default=l},{three:32}],42:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:true});var r=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r)r.writable=true;Object.defineProperty(e,r.key,r)}}return function(t,i,r){if(i)e(t.prototype,i);if(r)e(t,r);return t}}();var n=e("three");function a(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function s(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function o(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}var l=function(e){o(t,e);function t(e){a(this,t);var i=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));var r=Math.random()*20+10;i.gBig=new n.SphereGeometry(r,6,2);i.material=e||new n.MeshStandardMaterial({color:16711920});i.mesh=new n.Mesh(i.gBig,i.material);i.soundId="DoSound";i.add(i.mesh);var o=(new n.Box3).setFromObject(i.mesh);i.size=o.getSize().x;i.rotation.z=Math.PI*.5;return i}r(t,[{key:"destroy",value:function e(){this.material.dispose();this.gBig.dispose();this.remove(this.mesh)}}]);return t}(n.Object3D);i.default=l},{three:32}],43:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:true});var r=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r)r.writable=true;Object.defineProperty(e,r.key,r)}}return function(t,i,r){if(i)e(t.prototype,i);if(r)e(t,r);return t}}();var n=e("three");var a=e("../../utils/preloader");var s=o(a);function o(e){return e&&e.__esModule?e:{default:e}}function l(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function u(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function h(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}var c=function(e){h(t,e);function t(e){l(this,t);var i=u(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));i.geometry=s.default.getGeometry("crystalModel");i.material=e||new n.MeshStandardMaterial({color:16711920});var r=Math.random()*1+.4;i.soundId="FaSound";var a=new n.Mesh(i.geometry,i.material);a.scale.set(r,r,r);i.add(a);var o=(new n.Box3).setFromObject(a);i.size=o.getSize().y;i.rotation.z=Math.PI*.5;return i}r(t,[{key:"destroy",value:function e(){this.material.dispose();this.geometry.dispose()}}]);return t}(n.Object3D);i.default=c},{"../../utils/preloader":59,three:32}],44:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:true});var r=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r)r.writable=true;Object.defineProperty(e,r.key,r)}}return function(t,i,r){if(i)e(t.prototype,i);if(r)e(t,r);return t}}();var n=e("three");var a=e("../../utils/debug");function s(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function o(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function l(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}var u=function(e){l(t,e);function t(e){s(this,t);var i=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));i.geometry=new n.CylinderGeometry(6,6,10,6);i.branchGeometry=new n.CylinderGeometry(2,2,30,6);i.material=e||new n.MeshStandardMaterial({color:16711920});var r=new n.Mesh(i.geometry,i.material);var a=new n.Mesh(i.branchGeometry,i.material);var l=new n.Mesh(i.branchGeometry,i.material);r.scale.set(.8,.8,.8);l.position.set(4,0,0);l.rotation.set(0,0,Math.PI*.25);a.rotation.set(0,0,-Math.PI*.25);a.position.set(-4,0,0);i.add(a);i.add(l);i.rotation.z=Math.PI*.5;return i}r(t,[{key:"destroy",value:function e(){this.material.dispose();this.geometry.dispose()}},{key:"update",value:function e(){this.rotation.x+=.01}}]);return t}(n.Object3D);i.default=u},{"../../utils/debug":57,three:32}],45:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:true});var r=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r)r.writable=true;Object.defineProperty(e,r.key,r)}}return function(t,i,r){if(i)e(t.prototype,i);if(r)e(t,r);return t}}();var n=e("three");var a=e("../../utils/preloader");var s=o(a);function o(e){return e&&e.__esModule?e:{default:e}}function l(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function u(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function h(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}var c=function(e){h(t,e);function t(e){l(this,t);var i=u(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));i.geometry=s.default.getGeometry("crystal3Model");i.material=e||new n.MeshStandardMaterial({color:16711920});i.soundId="LaSound";var r=Math.random()*1.5+.4;var a=new n.Mesh(i.geometry,i.material);a.scale.set(r,r,r);i.add(a);var o=(new n.Box3).setFromObject(i);i.size=o.getSize().x;return i}r(t,[{key:"destroy",value:function e(){this.material.dispose();this.geometry.dispose()}}]);return t}(n.Object3D);i.default=c},{"../../utils/preloader":59,three:32}],46:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:true});var r=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r)r.writable=true;Object.defineProperty(e,r.key,r)}}return function(t,i,r){if(i)e(t.prototype,i);if(r)e(t,r);return t}}();var n=e("three");var a=e("../../utils/debug");function s(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function o(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function l(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}var u=function(e){l(t,e);function t(e){s(this,t);var i=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));var r=Math.random()*40+10;i.branchGeometry=new n.CylinderGeometry(2,2,r,6);i.size=20;i.soundId="MiSound";i.material=e||new n.MeshStandardMaterial({color:16711920});i.mesh=new n.Mesh(i.branchGeometry,i.material);i.mesh.rotation.set(0,0,-Math.PI*.25);i.mesh.position.set(-5,0,0);i.add(i.mesh);i.rotation.z=Math.PI*.5;return i}r(t,[{key:"destroy",value:function e(){this.material.dispose();this.branchGeometry.dispose();this.remove(this.mesh)}}]);return t}(n.Object3D);i.default=u},{"../../utils/debug":57,three:32}],47:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:true});var r=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r)r.writable=true;Object.defineProperty(e,r.key,r)}}return function(t,i,r){if(i)e(t.prototype,i);if(r)e(t,r);return t}}();var n=e("three");function a(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function s(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function o(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}var l=function(e){o(t,e);function t(e){a(this,t);var i=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));var r=Math.random()*30+10;i.gBig=new n.CylinderGeometry(3,3,r,6);i.size=r;i.material=e||new n.MeshStandardMaterial({color:16711920});i.mesh=new n.Mesh(i.gBig,i.material);i.soundId="ReSound";i.add(i.mesh);i.rotation.z=Math.PI*.5;return i}r(t,[{key:"destroy",value:function e(){this.material.dispose();this.gBig.dispose();this.remove(this.mesh)}}]);return t}(n.Object3D);i.default=l},{three:32}],48:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:true});var r=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r)r.writable=true;Object.defineProperty(e,r.key,r)}}return function(t,i,r){if(i)e(t.prototype,i);if(r)e(t,r);return t}}();var n=e("three");var a=e("../../utils/preloader");var s=o(a);function o(e){return e&&e.__esModule?e:{default:e}}function l(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function u(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function h(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}var c=function(e){h(t,e);function t(e){l(this,t);var i=u(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));i.gBranch=s.default.getGeometry("crystal3Model");i.material=e||new n.MeshStandardMaterial({color:16711920});var r=Math.random()*1.5+1;i.size=20*r;i.soundId="SiSound";var a=new n.Mesh(i.gBranch,i.material);a.scale.x=r;a.position.x=15*r;i.branch=new n.Object3D;i.branch.rotation.z=-Math.PI*.75;i.branch.add(a);i.add(i.branch);return i}r(t,[{key:"destroy",value:function e(){this.material.dispose();this.gBranch.dispose();this.remove(this.branch)}}]);return t}(n.Object3D);i.default=c},{"../../utils/preloader":59,three:32}],49:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:true});var r=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r)r.writable=true;Object.defineProperty(e,r.key,r)}}return function(t,i,r){if(i)e(t.prototype,i);if(r)e(t,r);return t}}();var n=e("three");var a=e("../../utils/preloader");var s=o(a);function o(e){return e&&e.__esModule?e:{default:e}}function l(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function u(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function h(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}var c=function(e){h(t,e);function t(e){l(this,t);var i=u(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));i.geometry=s.default.getGeometry("crystalModel");i.material=e||new n.MeshStandardMaterial({color:16711920});var r=new n.Mesh(i.geometry,i.material);var a=new n.Mesh(i.geometry,i.material);i.add(r);i.add(a);r.position.set(-5,-5,0);r.scale.set(.7,.7,.7);r.rotation.z=Math.PI*.15;a.position.x=5;a.rotation.z=Math.PI*.5;i.soundId="SolSound";var o=(new n.Box3).setFromObject(i);i.size=o.getSize().x;return i}r(t,[{key:"destroy",value:function e(){this.material.dispose();this.geometry.dispose()}}]);return t}(n.Object3D);i.default=c},{"../../utils/preloader":59,three:32}],50:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:true});i.default=M;var r=e("./Cylo");var n=x(r);var a=e("./Fork");var s=x(a);var o=e("./Do");var l=x(o);var u=e("./Re");var h=x(u);var c=e("./Mi");var f=x(c);var d=e("./Fa");var p=x(d);var m=e("./Sol");var v=x(m);var g=e("./La");var y=x(g);var _=e("./Si");var b=x(_);function x(e){return e&&e.__esModule?e:{default:e}}var w={Do:l.default,Re:h.default,Mi:f.default,Fa:p.default,Sol:v.default,La:y.default,Si:b.default};var T=Object.keys(w).map(function(e){return w[e]});function M(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;var t=e!==null&&e<T.length?e:Math.floor(Math.random()*T.length);return T[t]}},{"./Cylo":41,"./Do":42,"./Fa":43,"./Fork":44,"./La":45,"./Mi":46,"./Re":47,"./Si":48,"./Sol":49}],51:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:true});var r=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r)r.writable=true;Object.defineProperty(e,r.key,r)}}return function(t,i,r){if(i)e(t.prototype,i);if(r)e(t,r);return t}}();var n=e("../../utils/debug");function a(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function s(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function o(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,
configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}var l=e("@superguigui/wagner/src/Pass");var u="#define GLSLIFY 1\nvarying vec2 vUv;\n\nvoid main() {\n\n  vUv = uv;\n  gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n}";var h="#define GLSLIFY 1\nuniform sampler2D tInput;\nuniform sampler2D tMask;\nuniform float thresold;\nuniform mediump float spreadThresold;\nuniform mediump float fallOffThresold;\n\nvarying vec2 vUv;\n\nvoid main()\n{\n  mediump float vignetteFallOff = fallOffThresold;\n  mediump float vignetteAmount = spreadThresold;\n  // color = texture2D(tInput, vUv);\n\n\tvec4 texelMask = texture2D(tMask, vUv);\n  float amount = thresold;\n  // lowp float dist = distance(vUv, vec2(0.5, 0.5));\n\t// texelMask *= smoothstep(0.2, vignetteFallOff * 0.799, dist * (vignetteAmount + vignetteFallOff));\n  lowp float dist = distance(vUv, vec2(0.5, 0.5));\n\ttexelMask *= smoothstep(0., 1., dist * (vignetteAmount + 1.));\n\n  if (texelMask.r > thresold) {\n    amount = 0.0;\n  }\n  texelMask.a = amount;\n  vec4 transparent = vec4(0.0, 0.0, 0.0, 0.0);\n  texelMask *= mix(transparent, texelMask, amount);\n\n\tvec3 mask = texelMask.rgb/8.0;\n\tvec2 where = (vUv.xy - mask.xy);\n\tvec3 result  = texture2D(tInput, vec2(where.x, where.y)).rgb;\n\tvec4 newColor = vec4(result , 1.0);\n\n  // vec4 initialColor = texture2D(tInput, vUv);\n  // vec4 texelColor = texture2D(tMask, vUv);\n\n  // texelColor = mapTexelToLinear( texelColor );\n  // float amount = thresold;\n  // if (texelColor.r > thresold) {\n  //   amount = 0.0;\n  // }\n  // vec4 transparent = vec4(0.0, 0.0, 0.0, 0.0);\n  // newColor *= mix(transparent, newColor, amount);\n\n  // vec4 mergeColor = vec4(blendLighten(initialColor.rgb, newColor.rgb), 1.0);\n  \t//Vignette\n\n  gl_FragColor = newColor;\n  // gl_FragColor = initialColor;\n}";var c=function(e){o(t,e);function t(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};a(this,t);var i=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));i.setShader(u,h);i.params.thresold=0;i.params.spreadThresold=0;i.params.fallOffThresold=0;i.params.tMask=e.mask;i.createGui(n.gui);return i}r(t,[{key:"createGui",value:function e(t){var i=t.addFolder("FrozenPass");i.add(this.params,"thresold",{min:0,max:1,step:.01,watch:true});i.add(this.params,"spreadThresold",{min:-1,max:20,step:.01,watch:true});i.add(this.params,"fallOffThresold",{min:0,max:1,step:.01,watch:true})}},{key:"run",value:function e(t){if(!this.shader){return}this.shader.uniforms.spreadThresold.value=this.params.spreadThresold;this.shader.uniforms.thresold.value=this.params.thresold;this.shader.uniforms.fallOffThresold.value=this.params.fallOffThresold;this.shader.uniforms.tMask.value=this.params.tMask;t.pass(this.shader)}}]);return t}(l);i.default=c},{"../../utils/debug":57,"@superguigui/wagner/src/Pass":3}],52:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:true});var r=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r)r.writable=true;Object.defineProperty(e,r.key,r)}}return function(t,i,r){if(i)e(t.prototype,i);if(r)e(t,r);return t}}();var n=e("../../utils/debug");function a(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function s(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function o(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}var l=e("@superguigui/wagner/src/Pass");var u="#define GLSLIFY 1\nvarying vec2 vUv;\n\nvoid main() {\n\n  vUv = uv;\n  gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n}";var h="#define GLSLIFY 1\nuniform sampler2D tInput;\nuniform sampler2D tVignette;\n// uniform sampler2D tTorch;\nvarying vec2 vUv;\n\nuniform mediump float gamma;\nuniform float contrast;\nuniform mediump float brightness;\nuniform mediump float vignetteFallOff;\nuniform mediump float vignetteAmount;\nuniform mediump float time;\nuniform mediump float noiseStrength;\nuniform mediump float black;\nuniform float bw;\n\nvec3 blendNormal(vec3 base, vec3 blend) {\n\treturn blend;\n}\n\nvec3 blendNormal(vec3 base, vec3 blend, float opacity) {\n\treturn (blendNormal(base, blend) * opacity + base * (1.0 - opacity));\n}\n\nfloat blendScreen(float base, float blend) {\n\treturn 1.0-((1.0-base)*(1.0-blend));\n}\n\nvec3 blendScreen(vec3 base, vec3 blend) {\n\treturn vec3(blendScreen(base.r,blend.r),blendScreen(base.g,blend.g),blendScreen(base.b,blend.b));\n}\n\nvec3 blendScreen(vec3 base, vec3 blend, float opacity) {\n\treturn (blendScreen(base, blend) * opacity + base * (1.0 - opacity));\n}\n\nvec3 toGamma( vec3 rgb ) {\n  return pow( rgb, vec3( 1.0 / gamma ) );\n}\n\nvoid main() {\n\tlowp vec3 rgb = texture2D(tInput, vUv).rgb;\n\tlowp vec4 vignette = texture2D(tVignette, vUv);\n\t// lowp vec4 torch = texture2D(tTorch, vUv);\n\n\t//noise\n  lowp float x = (vUv.x + 4.0 ) * (vUv.y + 4.0 ) * (time * 10.0);\n\tlowp float grain = 1.-(mod((mod(x, 13.0) + 1.0) * (mod(x, 123.0) + 1.0), 0.01)-0.005) * noiseStrength;\n\trgb *= grain;\n\n\t//Color Correction\n\trgb = ((toGamma( rgb ) - .5) * contrast + .5 + vec3( brightness )) * black;\n\n\t//Vignette\n\tlowp float dist = distance(vUv, vec2(0.5, 0.5));\n\trgb /= smoothstep(0.8, vignetteFallOff * 0.799, dist * (vignetteAmount + vignetteFallOff));\n\n\t//BW\n\trgb = mix(rgb,vec3( dot( rgb, vec3( .299, 0.587, 0.114 ) ) ), bw);\n\n\tlowp vec4 color = vec4(blendNormal(rgb, vignette.rgb, vignette.a), 1.);\n\n\t// color = vec4(blendScreen(color.rgb, torch.rgb, 1.), 1.);\n\n\t// gl_FragColor = vec4(rgb, 1.);\n\tgl_FragColor = color;\n}\n";var c=function(e){o(t,e);function t(e){a(this,t);var i=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));i.setShader(u,h);e=e||{};i.params.time=1e-4;i.params.gamma=e.gamma||.7;i.params.contrast=e.contrast||1;i.params.brightness=e.brightness||.06;i.params.vignetteFallOff=e.vignetteFallOff||.2;i.params.vignetteAmount=e.vignetteAmount||.6;i.params.noiseStrength=e.noiseStrength||e.noise||.001;i.params.black=e.black||1;i.params.bw=e.bw||0;i.createGui(n.gui);return i}r(t,[{key:"createGui",value:function e(t){var i=t.addFolder("GeneralPass");i.add(this.params,"vignetteFallOff",{min:0,max:1,step:.1,watch:true});i.add(this.params,"vignetteAmount",{min:0,max:1,step:.1,watch:true});i.add(this.params,"contrast",{min:0,max:1,step:.01,watch:true});i.add(this.params,"gamma",{min:0,max:1,step:.01,watch:true});i.add(this.params,"brightness",{min:0,max:1,step:.01,watch:true});i.add(this.params,"noiseStrength",{min:0,max:30,step:.01,watch:true});i.add(this.params,"black",{min:0,max:1,step:.01,watch:true});i.add(this.params,"bw",{min:0,max:1,step:.001,watch:true})}},{key:"run",value:function e(t){if(!this.shader){return}this.shader.uniforms.time.value=this.params.time;this.shader.uniforms.black.value=this.params.black;this.shader.uniforms.noiseStrength.value=0;this.shader.uniforms.gamma.value=this.params.gamma;this.shader.uniforms.contrast.value=this.params.contrast;this.shader.uniforms.brightness.value=this.params.brightness;this.shader.uniforms.vignetteFallOff.value=this.params.vignetteFallOff;this.shader.uniforms.vignetteAmount.value=this.params.vignetteAmount;this.shader.uniforms.bw.value=this.params.bw;t.pass(this.shader)}}]);return t}(l);i.default=c},{"../../utils/debug":57,"@superguigui/wagner/src/Pass":3}],53:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:true});var r=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r)r.writable=true;Object.defineProperty(e,r.key,r)}}return function(t,i,r){if(i)e(t.prototype,i);if(r)e(t,r);return t}}();var n=e("three");var a=e("brindille-resize");var s=f(a);var o=e("../utils/debug");var l=e("../utils/preloader");var u=f(l);var h=e("../objects/Snow");var c=f(h);function f(e){return e&&e.__esModule?e:{default:e}}function d(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function p(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function m(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}var v={useKaleido:true,useAlphaKaleido:true};var g=function(e){m(t,e);function t(e){d(this,t);var i=p(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));i.width=e.offsetWidth;i.height=e.offsetHeight;i.camera=new n.OrthographicCamera(i.width/-2,i.width/2,i.height/2,i.height/-2,-100,100);i.add(i.camera);return i}r(t,[{key:"onLoadComplete",value:function e(){this.setBGPlasma();this.setXPScene();this.setGameSceneToBg();this.listener=new n.AudioListener;this.camera.add(this.listener);this.sound=new n.Audio(this.listener);this.sound.setBuffer(u.default.getAudio("AmbientSound"));this.sound.setLoop(true);this.sound.setVolume(.3);this.sound.play();this.setGui()}},{key:"setGui",value:function e(){var t=this;var i=o.gui.addFolder("Kaleido");i.open();i.add(v,"useKaleido").on("update",function(e){t.materialScreen.uniforms.kaleido.value=e===true?1:0});var r=o.gui.addFolder("Sky");var n={x:0,y:0};if(this.bgMaterial){r.addColorPicker(this.bgMaterial.uniforms.blueSky,"value").on("update",function(){t.isSkyDebug=true});r.addColorPicker(this.bgMaterial.uniforms.redSky,"value");r.add(n,"x",{min:-10,max:10,step:.01}).on("update",function(){t.bgMaterial.uniforms.mouse.value=n});r.add(n,"y",{min:-10,max:10,step:.01}).on("update",function(){t.bgMaterial.uniforms.mouse.value=n})}}},{key:"setBGPlasma",value:function e(){var t=u.default.getTexture("NoiseTexture");t.wrapS=t.wrapT=n.RepeatWrapping;t.offset.set(0,0);t.repeat.set(2,2);this.bgMaterial=new n.ShaderMaterial({uniforms:{time:{value:1},tNoise:{value:t},resolution:{value:new n.Vector2(800,600)},mouse:{value:new n.Vector2(1.25,.65)},blueSky:{value:new n.Color(2722283)},redSky:{value:new n.Color(8535178)}},vertexShader:"#define GLSLIFY 1\nvarying vec2 vUv;\n\nvoid main() {\n  vUv = uv;\n  gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}\n",fragmentShader:"#define GLSLIFY 1\nuniform float time;\nuniform sampler2D tNoise;\nuniform vec2 resolution;\nuniform vec2 mouse;\nuniform vec3 blueSky;\nuniform vec3 redSky;\n\n// const vec2 mouse = vec2(-3600, -1000);\n\nvarying vec2 vUv;\n\nconst mat2 m2 = mat2(0.8, -0.6, 0.6, 0.8);\n\nfloat fbm( vec2 p )\n{\n    float f = 0.0;\n    f += 0.5000*texture2D( tNoise, p/256.0, -100. ).x; p = m2*p*2.02;\n    f += 0.2500*texture2D( tNoise, p/256.0, -100. ).x; p = m2*p*2.03;\n    f += 0.1250*texture2D( tNoise, p/256.0, -100. ).x; p = m2*p*2.01;\n    f += 0.0625*texture2D( tNoise, p/256.0, -100. ).x;\n    return f/0.9375;\n}\n\nvoid main()\n{\n\tvec2 q = vUv;\n  vec2 p = -1.0 + 2.0 * q;\n  p.x *= resolution.x/resolution.y;\n  // vec2 mo = mouse.xy/resolution.xy;\n  vec2 mo = mouse.xy;\n\t\n    // camera\n\tfloat an1 = time * 0.1;\n\tfloat an2 = cos(time * 0.8) * 0.1 + .5;\n  vec3 ro = 10.0*normalize(vec3(sin(an2)*cos(an1), cos(an2)-0.5, sin(an2)*sin(an1) ));\n  vec3 ww = normalize(vec3(0.0,0.0,0.0) - ro);\n  vec3 uu = normalize(cross( vec3(0.0,1.0,0.0), ww ));\n  vec3 vv = normalize(cross(ww,uu));\n  vec3 rd = normalize( p.x*uu + p.y*vv - 1.4*ww );\n\n  // raymarch\n  vec3 col =  vec3(0.);//texture( iChannel0, rd ).xyz;\n  \n  vec3 light = normalize(vec3(0.9, 0.2, 0.9));\n  //vec3 ambient = 5. * vec3(0.1, 0.9, 0.2);\n  float sundot = clamp(dot(rd * 0.95,light),0.,1.);\n  vec3 pos = uu;\n    \n    \n// sky\n\n  // sky colour        \n  // vec3 blueSky = vec3(0.3,.55,0.8);\n  // vec3 redSky = vec3(0.7,0.7,0.6);\n  \n  vec3 sky = mix(blueSky, redSky, pow(sundot, 8.));\n  \n  col =  sky*(1.0-0.8*rd.y);\n  \n  // stars\n  float s = texture2D( tNoise, rd.xz * 1.25, -100. ).x;\n  s += texture2D( tNoise, rd.xz * 4., -100. ).x;\n  \n  s = pow(s, 18.0) * 0.00005 * max(rd.y, - 0.6) * pow((1. - max(sundot, 0.)), 1.); \n  if (s > .0)\n  {\n    vec3 backStars = vec3(s);\n    col += backStars;\n  }\n  \n  // sun\n  col += 0.1*vec3(0.9, 0.3, 0.9)*pow(sundot, 0.5);\n  col += 0.2*vec3(1., 0.7, 0.7)*pow(sundot, 1.);\n  col += 0.95*vec3(1.)*pow(sundot, 256.);\n\n  // clouds\n  float cloudSpeed = 0.01 * sin(time);\n  float cloudFlux = 1.4;\n\n  // layer 1\n  vec3 cloudColour = mix(vec3(1.0,0.95,1.0), 0.35*redSky, 0.);\n      \n  vec2 sc = cloudSpeed * 50.*time * ro.xz + rd.xz*(1000.0-ro.y)/rd.y;\n  col = mix( col, cloudColour, 0.5*smoothstep(0.5,0.8,fbm(0.0005*sc+fbm(0.0005*sc+time*cloudFlux))));\n      \n  // cloud layer 2\n  sc = cloudSpeed * 30.*time * ro.xz + rd.xz*(600.0-ro.y)/rd.y;\n  col = mix( col, cloudColour, 0.5*smoothstep(0.5,0.8,fbm(0.0002*sc+fbm(0.0005*sc+time*cloudFlux))));\n\n  // horizon        \n  //col = mix( col, 0.9*vec3(0.9,0.75,0.8), pow( 1.-max(rd.y+0.1,0.0), 5.0));\n      \n      \n  \n  // contrast\n  col = clamp(col, 0., 1.);\n  col = col*col*(3.0-2.0*col);\n  \n  \n  // saturation (amplify colour, subtract grayscale)\n  float sat = 0.2;\n  col = col * (1. + sat) - sat*dot(col, vec3(0.33));\n  \n  // vignette\n  //col = col * (1.0 - dot(p, p) * 0.1);\n    \n\tgl_FragColor = vec4(col, 1.0);\n}"});this.bgMaterial.needsUpdate=true;var i=new n.PlaneBufferGeometry(1,1,32);this.bgPlasma=new n.Mesh(i,this.bgMaterial);this.bgPlasma.position.set(0,0,0);this.add(this.bgPlasma)}},{key:"setGameSceneToBg",value:function e(){this.rtTexture2=new n.WebGLRenderTarget(s.default.width,s.default.height,{minFilter:n.LinearFilter,magFilter:n.LinearFilter,format:n.RGBAFormat});this.materialScreen=new n.ShaderMaterial({uniforms:{tDiffuse:{value:this.rtTexture2.texture},resolution:{value:new n.Vector2},sides:{value:6},angles:{value:90*Math.PI/180},alpha:{value:1},kaleido:{value:1}},transparent:true,vertexShader:"#define GLSLIFY 1\nvarying vec2 vUv;\n\nvoid main() {\n\n  vUv = uv;\n  gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n}\n",fragmentShader:"#define GLSLIFY 1\nuniform sampler2D tDiffuse;\nuniform vec2 resolution;\nvarying vec2 vUv;\n\nuniform float sides;\nuniform float angle;\n\nuniform float alpha;\nuniform float kaleido;\n\nvoid main() {\n  \n  // vec2 p (vUv-.5*resolution) * 7.2 / resolution.y;\n  vec2 R = resolution;\n  vec2 U = vUv;\n  // vec2 p = (U / R.y-vec2(0.5 * R.x / R.y, 0.5));\n\t// vec2 ratio = resolution.xy / min( resolution.x, resolution.y );\n\t// vec2 uv = ( vUv.xy * 2.0 - resolution.xy ) / min( resolution.x, resolution.y );\n  vec2 p = (vUv) - (0.5);\n  // vec2 p = vUv / resolution;\n\n  // vec2 p = (vUv / resolution.xy -.5) * 2.;\n  // p.x *= resolution.x/resolution.y;\n\t\n  float r = length(p);\n  float a = atan(p.y, p.x) + angle;\n  float tau = 2. * 3.1416;\n  a = mod(a, tau/sides);\n  a = abs(a - tau/sides/2.);\n  p = r * vec2(cos(a), sin(a));\n\n  vec4 color;\n  \n  if (kaleido == 1.0) {\n    color = texture2D(tDiffuse, p + 0.5);\n  } else {\n    color = texture2D(tDiffuse, vUv);\n  }\n  \n  // if (alpha == 1.0) {\n  //   float blackness = (color.r + color.g + color.b) / 3.0;\n    // gl_FragColor = vec4( color.r, color.g , color.b, blackness);\n  // } else {\n  // }\n    gl_FragColor = color;\n\n}",depthWrite:false,blending:1});var t=new n.PlaneBufferGeometry(1,1);this.snowflakeContainer=new n.Mesh(t,this.materialScreen);this.snowflakeContainer.position.set(0,0,0);if(s.default.width<s.default.height&&s.default.width<500){this.snowflakeContainer.position.set(0,-50,0)}this.add(this.snowflakeContainer)}},{key:"setXPScene",value:function e(){this.rtTexture=new n.WebGLRenderTarget(s.default.width,s.default.height,{minFilter:n.LinearFilter,magFilter:n.LinearFilter,format:n.RGBAFormat});this.materialScreen=new n.ShaderMaterial({uniforms:{tDiffuse:{value:this.rtTexture.texture}},transparent:true,vertexShader:"#define GLSLIFY 1\nvarying vec2 vUv;\n\nvoid main() {\n\tvUv = uv;\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n}\n",fragmentShader:"#define GLSLIFY 1\nvarying vec2 vUv;\nuniform sampler2D tDiffuse;\n\nvoid main() {\n\tgl_FragColor = texture2D(tDiffuse, vUv);\n}\n",depthWrite:false,blending:1});var t=new n.PlaneBufferGeometry(1,1);this.fullContainer=new n.Mesh(t,this.materialScreen);this.fullContainer.position.set(0,0,0);this.add(this.fullContainer)}},{key:"resize",value:function e(){this.width=s.default.width;this.height=s.default.height;this.camera.left=this.width/-2;this.camera.right=this.width/2;this.camera.top=this.height/2;this.camera.bottom=this.height/-2;this.camera.updateProjectionMatrix();this.rtTexture2.setSize(1920,1080);this.rtTexture.setSize(this.width,this.height);this.fullContainer.scale.set(this.width,this.height,1);this.snowflakeContainer.scale.set(this.height*1.3,this.height*1.3,1);this.bgPlasma.scale.set(this.width,this.height,1)}},{key:"update",value:function e(t){if(this.bgMaterial){this.bgMaterial.uniforms.time.value+=.01}}}]);return t}(n.Scene);i.default=g},{"../objects/Snow":39,"../utils/debug":57,"../utils/preloader":59,"brindille-resize":14,three:32}],54:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:true});var r=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r)r.writable=true;Object.defineProperty(e,r.key,r)}}return function(t,i,r){if(i)e(t.prototype,i);if(r)e(t,r);return t}}();var n=e("three");var a=e("brindille-resize");var s=v(a);var o=e("../controls/Controls");var l=v(o);var u=e("../utils/debug");var h=e("../objects/parts/partsFactory");var c=v(h);var f=e("../materials/ice-material/IceMaterial");var d=v(f);var p=e("../utils/preloader");var m=v(p);function v(e){return e&&e.__esModule?e:{default:e}}function g(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function y(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function _(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}var b=6;var x=0;var w=s.default.width<s.default.height?60:160;var T=function(e){_(t,e);function t(e){g(this,t);var i=y(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));i.onLoadComplete=i.onLoadComplete.bind(i);i.offset=0;i.currentBranchSize=0;i.maxDuration=.6;i.speed=i.maxDuration;i.camera=new n.PerspectiveCamera(50,s.default.width/s.default.height,.1,1e3);i.add(i.camera);i.controls=new l.default(i.camera,e,false);return i}r(t,[{key:"setGui",value:function e(){var t=u.gui.addFolder("Flights");t.add(this.frontLight.position,"x",{max:100,min:-100,step:.01});t.add(this.frontLight.position,"y",{max:100,min:-100,step:.01});t.add(this.frontLight.position,"z",{max:100,min:-100,step:.01});t.add(this.frontLight,"intensity",{max:1,min:0,step:.01});var i=u.gui.addFolder("Blights");i.add(this.backLight.position,"x",{max:100,min:-100,step:.01});i.add(this.backLight.position,"y",{max:100,min:-100,step:.01});i.add(this.backLight.position,"z",{max:100,min:-100,step:.01});i.add(this.backLight,"intensity",{max:1,min:0,step:.01})}},{key:"onLoadComplete",value:function e(t){var i=new n.AmbientLight(16777215,1);this.frontLight=new n.PointLight(16777215,1);this.backLight=new n.PointLight(16777215,.9);this.frontLight.position.z=20;this.backLight.position.set(-34.27,9.09,17.48);this.add(this.frontLight);this.add(i);this.branch=new n.Object3D;this.add(this.branch);this.listener=new n.AudioListener;this.camera.add(this.listener);this.sound=new n.Audio(this.listener);var r=m.default.getTexture("ReflectionTexture");r.mapping=n.EquirectangularReflectionMapping;r.minFilter=n.LinearFilter;r.magFilter=n.LinearFilter;this.iceMaterial=new d.default({envMap:r,reflectivity:1.6,opacity:1});this.elements=[];this.offset=0;this.initTime=Date.now();this.deltaTime=0;var a=0;this.setGui()}},{key:"setIntro",value:function e(){var t=this;while(this.currentBranchSize<w){this.generateFirst()}this.speed=this.maxDuration;this.tlIn=new TimelineMax({onComplete:function e(){t.isIntroFinished=true}});this.tlIn.fromTo(this.frontLight.position,.6,{x:0},{x:w*1.4});this.elements.forEach(function(e,i){var r=e.position.x;t.tlIn.fromTo(e.position,.6,{x:0},{x:r,ease:Linear.easeOut},i*.1);t.tlIn.fromTo(e.scale,.6,{x:.01,y:.01,z:.01},{x:1,y:1,z:1,ease:Expo.easeOut},i*.1+.6);t.tlIn.fromTo(e.rotation,.8,{x:0},{x:Math.PI,ease:Expo.easeNone},i*.1+.6)})}},{key:"generateFirst",value:function e(){var t=(0,c.default)();var i=new t(this.iceMaterial);if(this.elements.length>0){var r=this.elements[this.elements.length-1];i.position.x=r.position.x+r.size*.5+x+i.size*.5}this.elements.push(i);this.branch.add(i);this.cleanScene();this.currentBranchSize=i.position.x+i.size*.5}},{key:"spawnComponent",value:function e(){var t=this;var i=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;if(this.speedTimeout)clearTimeout(this.speedTimeout);var r=0;var n=(0,c.default)(i);var a=new n(this.iceMaterial);if(this.elements.length>0){var s=this.elements[this.elements.length-1];a.position.x=s.position.x+s.size*.5+x+a.size*.5}this.elements.push(a);this.branch.add(a);TweenMax.fromTo(a.scale,.6,{x:.1,y:.1,z:.1,delay:r},{x:1,y:1,z:1,ease:Expo.easeOut});TweenMax.fromTo(a.rotation,1.2,{x:0},{x:Math.PI,ease:Expo.easeOut},0);if(a.soundId){this.sound.setBuffer(m.default.getAudio(a.soundId));if(this.sound.isPlaying)this.sound.stop();this.sound.setVolume(.5);this.sound.play()}this.deltaTime=(Date.now()-this.initTime)*.001;this.initTime=Date.now();this.speed=this.deltaTime>this.maxDuration?this.maxDuration:this.deltaTime;this.cleanScene();this.currentBranchSize=a.position.x+a.size*.5;this.offset=this.currentBranchSize>w?this.currentBranchSize-w:a.size*.5;this.tl=new TimelineMax;this.tl.fromTo(this.frontLight.position,this.speed,{x:0},{x:w*1.4});this.elements.forEach(function(e){t.tl.to(e.position,t.speed,{x:"-="+t.offset,ease:Linear.easeNone},0)});this.speedTimeout=setTimeout(function(){t.speed=t.maxDuration},300)}},{key:"cleanScene",value:function e(){var t=this;this.elements.forEach(function(e){if(e.position.x<-e.size*.5){t.branch.remove(e);if(e.destroy)e.destroy();t.elements.splice(0,1)}})}},{key:"resize",value:function e(){this.camera.aspect=s.default.width/s.default.height;this.camera.updateProjectionMatrix()}},{key:"update",value:function e(t){if(this.controls)this.controls.update();if(this.iceMaterial)this.iceMaterial.uniforms.time.value+=.02}}]);return t}(n.Scene);i.default=T},{"../controls/Controls":35,"../materials/ice-material/IceMaterial":38,"../objects/parts/partsFactory":50,"../utils/debug":57,"../utils/preloader":59,"brindille-resize":14,three:32}],55:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:true});var r=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r)r.writable=true;Object.defineProperty(e,r.key,r)}}return function(t,i,r){if(i)e(t.prototype,i);if(r)e(t,r);return t}}();var n=e("three");var a=e("brindille-resize");var s=f(a);var o=e("../utils/debug");var l=e("../objects/Snow");var u=f(l);var h=e("../utils/preloader");var c=f(h);function f(e){return e&&e.__esModule?e:{default:e}}function d(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function p(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function m(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}var v=function(e){m(t,e);function t(){d(this,t);var e=p(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));e.isSkyDebug=false;return e}r(t,[{key:"onLoadComplete",value:function e(t){this.camera=new n.PerspectiveCamera(75,s.default.width/s.default.height,.1,1e3);this.add(this.camera);this.camera.position.z=800;var i=new n.PointLight(16777215,1);var r=new n.PointLight(16777215,.5);i.position.x=20;r.position.x=-20;i.position.z=20;r.position.z=-20;this.snow=new u.default;this.add(this.snow)}},{key:"resize",value:function e(){this.camera.aspect=s.default.width/s.default.height;this.camera.updateProjectionMatrix()}},{key:"update",value:function e(t,i){if(this.snow)this.snow.update()}}]);return t}(n.Scene);i.default=v},{"../objects/Snow":39,"../utils/debug":57,"../utils/preloader":59,"brindille-resize":14,three:32}],56:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:true});var r=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r)r.writable=true;Object.defineProperty(e,r.key,r)}}return function(t,i,r){if(i)e(t.prototype,i);if(r)e(t,r);return t}}();var n=e("dom-classes");var a=s(n);function s(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var l=function(){function e(){o(this,e);this.onKeyUp=this.onKeyUp.bind(this);this.isVisible=false;this.$el=document.body.querySelector(".Tuto");this.$keys=[].slice.call(this.$el.querySelectorAll(".Tuto-keyboard"));window.addEventListener("keyup",this.onKeyUp)}r(e,[{key:"onKeyUp",value:function e(){this.$keys.forEach(function(e){if(a.default.has(e,"is-pressed")){a.default.remove(e,"is-pressed")}})}},{key:"onKeyPress",value:function e(t){if(!this.isVisible)return;this.$keys.forEach(function(e){if(parseInt(e.getAttribute("data-id"))===t){a.default.add(e,"is-pressed")}else{a.default.remove(e,"is-pressed")}})}},{key:"show",value:function e(){if(this.tlOut)this.tlOut.kill();this.isVisible=true;this.$el.style.display="block";this.tlIn=new TimelineMax;this.tlIn.fromTo(this.$el,.6,{alpha:0},{alpha:1,ease:Expo.easeOut},0);this.tlIn.staggerFromTo(this.$keys,.6,{alpha:0,y:-10},{alpha:1,y:0,ease:Expo.easeOut},.1,.6);return this.tlIn}},{key:"hide",value:function e(){var t=this;if(this.tlIn)this.tlIn.kill();this.tlOut=new TimelineMax;this.tlOut.to(this.$el,.6,{alpha:0,ease:Expo.easeOut,onComplete:function e(){t.isVisible=false}});this.tlOut.staggerTo(this.$keys,.6,{alpha:0,y:-10,ease:Expo.easeOut},0);return this.tlOut}}]);return e}();i.default=new l},{"dom-classes":18}],57:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:true});i.panelFX=i.gui=undefined;var r=e("guigui");var n=a(r);function a(e){return e&&e.__esModule?e:{default:e}}var s=i.gui=n.default.addPanel("Settings");var o=i.panelFX=n.default.addPanel("PostFX")},{guigui:21}],58:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:true});var r=[{type:"JsonModel",url:"./assets/models/merryxmas.js",id:"merryxmasModel"},{type:"JsonModel",url:"./assets/models/crystal.js",id:"crystalModel"},{type:"JsonModel",url:"./assets/models/crystal2.js",id:"crystal2Model"},{type:"JsonModel",url:"./assets/models/crystal3.js",id:"crystal3Model"},{type:"Audio",url:"./assets/sounds/ambient.mp3",id:"AmbientSound"},{type:"Audio",url:"./assets/sounds/Do.mp3",id:"DoSound"},{type:"Audio",url:"./assets/sounds/Re.mp3",id:"ReSound"},{type:"Audio",url:"./assets/sounds/Mi.mp3",id:"MiSound"},{type:"Audio",url:"./assets/sounds/Fa.mp3",id:"FaSound"},{type:"Audio",url:"./assets/sounds/Sol.mp3",id:"SolSound"},{type:"Audio",url:"./assets/sounds/La.mp3",id:"LaSound"},{type:"Audio",url:"./assets/sounds/Si.mp3",id:"SiSound"},{type:"Texture",url:"./assets/textures/titletexture.jpg",id:"TitleTexture"},{type:"Texture",url:"./assets/textures/cloud2.png",id:"CloudTexture"},{type:"Texture",url:"./assets/textures/snow.png",id:"SnowTexture"},{type:"Texture",url:"./assets/textures/ice-crystals.jpg",id:"FrozTexture"},{type:"Texture",url:"./assets/textures/noise.jpg",id:"NoiseTexture"},{type:"Texture",url:"./assets/textures/envmap3.jpg",id:"ReflectionTexture"}];i.default=r},{}],59:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:true});var r=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r)r.writable=true;Object.defineProperty(e,r.key,r)}}return function(t,i,r){if(i)e(t.prototype,i);if(r)e(t,r);return t}}();var n=e("three");function a(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var s=function(){function e(){a(this,e);this.jsonLoader=new n.JSONLoader;this.textureLoader=new n.TextureLoader;this.audioLoader=new n.AudioLoader;this.isLoaded=false}r(e,[{key:"load",value:function e(t,i){if(!t||!t.length)return;this.manifest=t;this.start(i)}},{key:"start",value:function e(t){var i=this;this.getManifestByType("JsonModel").forEach(function(e){e.isLoaded=false;i.jsonLoader.load(e.url,function(r){e.isLoaded=true;e.geometry=r;if(i.checkManifestCompletion()){t()}})});this.getManifestByType("Audio").forEach(function(e){e.isLoaded=false;i.audioLoader.load(e.url,function(r){e.isLoaded=true;e.audio=r;if(i.checkManifestCompletion()){t()}})});this.getManifestByType("Texture").forEach(function(e){e.isLoaded=false;i.textureLoader.load(e.url,function(r){e.isLoaded=true;e.texture=r;if(i.checkManifestCompletion()){t()}})});this.getManifestByType("Image").forEach(function(e){e.isLoaded=false;var r=new Image;r.addEventListener("load",function(){e.isLoaded=true;e.image=r;console.log("k",e);if(i.checkManifestCompletion()){t()}});r.src=e.url})}},{key:"getManifestByType",value:function e(t){return this.manifest.filter(function(e){return e.type===t})}},{key:"checkManifestCompletion",value:function e(){for(var t=0,i=this.manifest.length;t<i;t++){if(!this.manifest[t].isLoaded)return false}return true}},{key:"getGeometry",value:function e(t){var i=this.manifest.filter(function(e){return e.id===t})[0];if(i&&i.geometry){return i.geometry}return null}},{key:"getTexture",value:function e(t){var i=this.manifest.filter(function(e){return e.id===t})[0];if(i&&i.texture){return i.texture}return null}},{key:"getImage",value:function e(t){var i=this.manifest.filter(function(e){return e.id===t})[0];if(i&&i.image){return i.image}return null}},{key:"getAudio",value:function e(t){var i=this.manifest.filter(function(e){return e.id===t})[0];if(i&&i.audio){return i.audio}return null}}]);return e}();i.default=new s},{three:32}]},{},[37]);
