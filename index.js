(function e(t,i,r){function n(o,s){if(!i[o]){if(!t[o]){var l=typeof require=="function"&&require;if(!s&&l)return l(o,!0);if(a)return a(o,!0);var u=new Error("Cannot find module '"+o+"'");throw u.code="MODULE_NOT_FOUND",u}var c=i[o]={exports:{}};t[o][0].call(c.exports,function(e){var i=t[o][1][e];return n(i?i:e)},c,c.exports,e,t,i,r)}return i[o].exports}var a=typeof require=="function"&&require;for(var o=0;o<r.length;o++)n(r[o]);return n})({1:[function(e,t,i){"use strict";t.exports.Composer=e("./src/Composer");t.exports.CopyPass=e("./src/passes/copy/CopyPass");t.exports.BlendMode={Normal:1,Dissolve:2,Darken:3,Multiply:4,ColorBurn:5,LinearBurn:6,DarkerColor:7,Lighten:8,Screen:9,ColorDodge:10,LinearDodge:11,LighterColor:12,Overlay:13,SoftLight:14,HardLight:15,VividLight:16,LinearLight:17,PinLight:18,HardMix:19,Difference:20,Exclusion:21,Substract:22,Divide:23}},{"./src/Composer":2,"./src/passes/copy/CopyPass":5}],2:[function(e,t,i){"use strict";var r=e("three");var n=e("./passes/copy/CopyPass");var a=e("./Stack");var o=e("./Pass");function s(e,t){var i=e.getPixelRatio();this.width=Math.floor(e.context.canvas.width/i)||1;this.height=Math.floor(e.context.canvas.height/i)||1;this.output=null;this.input=null;this.read=null;this.write=null;this.settings=t||{};this.useRGBA=this.settings.useRGBA||false;this.renderer=e;this.copyPass=new n(this.settings);this.defaultMaterial=new r.MeshBasicMaterial({color:65280,wireframe:false});this.scene=new r.Scene;this.quad=new r.Mesh(new r.PlaneBufferGeometry(1,1),this.defaultMaterial);this.scene.add(this.quad);this.camera=new r.OrthographicCamera(1,1,1,1,-1e4,1e4);this.front=new r.WebGLRenderTarget(1,1,{minFilter:this.settings.minFilter!==undefined?this.settings.minFilter:r.LinearFilter,magFilter:this.settings.magFilter!==undefined?this.settings.magFilter:r.LinearFilter,wrapS:this.settings.wrapS!==undefined?this.settings.wrapS:r.ClampToEdgeWrapping,wrapT:this.settings.wrapT!==undefined?this.settings.wrapT:r.ClampToEdgeWrapping,format:this.useRGBA?r.RGBAFormat:r.RGBFormat,type:this.settings.type!==undefined?this.settings.type:r.UnsignedByteType,stencilBuffer:this.settings.stencilBuffer!==undefined?this.settings.stencilBuffer:true});this.back=this.front.clone();this.startTime=Date.now();this.passes={};this.setSize(this.width,this.height)}t.exports=s;s.prototype.swapBuffers=function(){this.output=this.write;this.input=this.read;var e=this.write;this.write=this.read;this.read=e};s.prototype.render=function(e,t,i,r){if(i)this.swapBuffers();this.renderer.render(e,t,r?r:this.write,true);if(!r)this.swapBuffers()};s.prototype.toScreen=function(e){this.quad.material=e?e.shader:this.copyPass.shader;this.quad.material.uniforms.tInput.value=this.read.texture;this.quad.material.uniforms.resolution.value.set(this.width,this.height);this.renderer.render(this.scene,this.camera)};s.prototype.toTexture=function(e,t){this.quad.material=t?t.shader:this.copyPass.shader;this.quad.material.uniforms.tInput.value=this.read.texture;this.renderer.render(this.scene,this.camera,e,false)};s.prototype.pass=function(e){if(e instanceof a){this.passStack(e)}else{if(e instanceof r.ShaderMaterial){this.quad.material=e}if(e instanceof o){e.run(this);return}if(!e.isSim){this.quad.material.uniforms.tInput.value=this.read.texture}this.quad.material.uniforms.resolution.value.set(this.width,this.height);this.quad.material.uniforms.time.value=.001*(Date.now()-this.startTime);this.renderer.render(this.scene,this.camera,this.write,false);this.swapBuffers()}};s.prototype.passStack=function(e){e.getPasses().forEach(function(e){this.pass(e)}.bind(this))};s.prototype.reset=function(){this.read=this.front;this.write=this.back;this.output=this.write;this.input=this.read};s.prototype.setSource=function(e){this.quad.material=this.copyPass.shader;this.quad.material.uniforms.tInput.value=e;this.renderer.render(this.scene,this.camera,this.write,true);this.swapBuffers()};s.prototype.setSize=function(e,t){this.width=e;this.height=t;this.camera.projectionMatrix.makeOrthographic(e/-2,e/2,t/2,t/-2,this.camera.near,this.camera.far);this.quad.scale.set(e,t,1);this.front.setSize(e,t);this.back.setSize(e,t)}},{"./Pass":3,"./Stack":4,"./passes/copy/CopyPass":5,three:27}],3:[function(e,t,i){"use strict";var r=e("three");var n=e("./utils/processShader");function a(){this.shader=null;this.loaded=null;this.params={};this.isSim=false}t.exports=a;a.prototype.setShader=function(e,t){this.shader=n(e,t)};a.prototype.run=function(e){e.pass(this.shader)};a.prototype.getOfflineTexture=function(e,t,i){return new r.WebGLRenderTarget(e,t,{minFilter:r.LinearFilter,magFilter:r.LinearFilter,format:i?r.RGBAFormat:r.RGBFormat})}},{"./utils/processShader":7,three:27}],4:[function(e,t,i){"use strict";function r(e){this.passItems=[];this.shadersPool=e;this.passes=[]}t.exports=r;r.prototype.addPass=function(e,t,i,r){var n=0;var a={shaderName:e,enabled:t||false};this.passItems.push(a);n=this.passItems.length;this.updatePasses();if(r){return this.movePassToIndex(this.passItems[n],r)}else{return n-1}};r.prototype.removePass=function(e){this.passItems.splice(e,1);this.updatePasses()};r.prototype.enablePass=function(e){this.passItems[e].enabled=true;this.updatePasses()};r.prototype.disablePass=function(e){this.passItems[e].enabled=false;this.updatePasses()};r.prototype.isPassEnabled=function(e){return this.passItems[e].enabled};r.prototype.movePassToIndex=function(e,t){this.passItems.splice(t,0,this.passItems.splice(e,1)[0]);this.updatePasses();return t};r.prototype.reverse=function(){this.passItems.reverse();this.updatePasses()};r.prototype.updatePasses=function(){this.passes=this.shadersPool.getPasses(this.passItems);this.passItems.forEach(function(e,t){if(e.params===undefined){e.params=JSON.parse(JSON.stringify(this.passes[t].params))}}.bind(this))};r.prototype.getPasses=function(){return this.passes}},{}],5:[function(e,t,i){"use strict";var r=e("../../Pass");var n="#define GLSLIFY 1\nvarying vec2 vUv;\n\nvoid main() {\n\n  vUv = uv;\n  gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n}";var a="#define GLSLIFY 1\nvarying vec2 vUv;\nuniform sampler2D tInput;\n\nvoid main() {\n  gl_FragColor = texture2D( tInput, vUv );\n\n}";function o(){r.call(this);this.setShader(n,a)}t.exports=o;o.prototype=Object.create(r.prototype);o.prototype.constructor=o},{"../../Pass":3}],6:[function(e,t,i){"use strict";var r=e("../../Pass");var n="#define GLSLIFY 1\nvarying vec2 vUv;\n\nvoid main() {\n\n  vUv = uv;\n  gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n}";var a="#define GLSLIFY 1\nuniform sampler2D tInput;\nuniform vec2 resolution;\nvarying vec2 vUv;\n\n#define FXAA_REDUCE_MIN   (1.0/128.0)\n#define FXAA_REDUCE_MUL   (1.0/8.0)\n#define FXAA_SPAN_MAX     8.0\n\nvoid main() {\n\n    vec2 res = 1. / resolution;\n\n    vec3 rgbNW = texture2D( tInput, ( vUv.xy + vec2( -1.0, -1.0 ) * res ) ).xyz;\n    vec3 rgbNE = texture2D( tInput, ( vUv.xy + vec2( 1.0, -1.0 ) * res ) ).xyz;\n    vec3 rgbSW = texture2D( tInput, ( vUv.xy + vec2( -1.0, 1.0 ) * res ) ).xyz;\n    vec3 rgbSE = texture2D( tInput, ( vUv.xy + vec2( 1.0, 1.0 ) * res ) ).xyz;\n    vec4 rgbaM  = texture2D( tInput,  vUv.xy  * res );\n    vec3 rgbM  = rgbaM.xyz;\n    vec3 luma = vec3( 0.299, 0.587, 0.114 );\n\n    float lumaNW = dot( rgbNW, luma );\n    float lumaNE = dot( rgbNE, luma );\n    float lumaSW = dot( rgbSW, luma );\n    float lumaSE = dot( rgbSE, luma );\n    float lumaM  = dot( rgbM,  luma );\n    float lumaMin = min( lumaM, min( min( lumaNW, lumaNE ), min( lumaSW, lumaSE ) ) );\n    float lumaMax = max( lumaM, max( max( lumaNW, lumaNE) , max( lumaSW, lumaSE ) ) );\n\n    vec2 dir;\n    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));\n    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));\n\n    float dirReduce = max( ( lumaNW + lumaNE + lumaSW + lumaSE ) * ( 0.25 * FXAA_REDUCE_MUL ), FXAA_REDUCE_MIN );\n\n    float rcpDirMin = 1.0 / ( min( abs( dir.x ), abs( dir.y ) ) + dirReduce );\n    dir = min( vec2( FXAA_SPAN_MAX,  FXAA_SPAN_MAX),\n          max( vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),\n                dir * rcpDirMin)) * res;\n    vec4 rgbA = (1.0/2.0) * (\n    texture2D(tInput,  vUv.xy + dir * (1.0/3.0 - 0.5)) +\n    texture2D(tInput,  vUv.xy + dir * (2.0/3.0 - 0.5)));\n    vec4 rgbB = rgbA * (1.0/2.0) + (1.0/4.0) * (\n    texture2D(tInput,  vUv.xy + dir * (0.0/3.0 - 0.5)) +\n    texture2D(tInput,  vUv.xy + dir * (3.0/3.0 - 0.5)));\n    float lumaB = dot(rgbB, vec4(luma, 0.0));\n\n    if ( ( lumaB < lumaMin ) || ( lumaB > lumaMax ) ) {\n        gl_FragColor = rgbA;\n    } else {\n        gl_FragColor = rgbB;\n    }\n\n    //gl_FragColor = vec4( texture2D( tInput,vUv ).xyz, 1. );\n}";function o(){r.call(this);this.setShader(n,a)}t.exports=o;o.prototype=Object.create(r.prototype);o.prototype.constructor=o},{"../../Pass":3}],7:[function(e,t,i){"use strict";var r=e("three");t.exports=function e(t,i){var n=/uniform\s+(lowp|mediump|highp)?\s*([^\s]+)\s+([^\s]+)\s*;/gi;var a=/uniform\s+([^\s]+)\s+([^\s]+)\s*\[\s*(\w+)\s*\]*\s*;/gi;var o={sampler2D:{type:"t",value:function(){return new r.Texture}},samplerCube:{type:"t",value:function(){}},bool:{type:"b",value:function(){return 0}},int:{type:"i",value:function(){return 0}},float:{type:"f",value:function(){return 0}},vec2:{type:"v2",value:function(){return new r.Vector2}},vec3:{type:"v3",value:function(){return new r.Vector3}},vec4:{type:"v4",value:function(){return new r.Vector4}},bvec2:{type:"v2",value:function(){return new r.Vector2}},bvec3:{type:"v3",value:function(){return new r.Vector3}},bvec4:{type:"v4",value:function(){return new r.Vector4}},ivec2:{type:"v2",value:function(){return new r.Vector2}},ivec3:{type:"v3",value:function(){return new r.Vector3}},ivec4:{type:"v4",value:function(){return new r.Vector4}},mat2:{type:"v2",value:function(){return new r.Matrix2}},mat3:{type:"v3",value:function(){return new r.Matrix3}},mat4:{type:"v4",value:function(){return new r.Matrix4}}};var s={float:{type:"fv",value:function(){return[]}},vec3:{type:"v3v",value:function(){return[]}}};var l;var u={resolution:{type:"v2",value:new r.Vector2(1,1),default:true},time:{type:"f",value:Date.now(),default:true},tInput:{type:"t",value:new r.Texture,default:true}};var c,h,f;while((l=n.exec(i))!==null){if(l.index===n.lastIndex){n.lastIndex++}c=l[2];h=l[3];u[h]={type:o[c].type,value:o[c].value()}}while((l=a.exec(i))!==null){if(l.index===n.lastIndex){n.lastIndex++}c=l[1];h=l[2];f=l[3];u[h]={type:s[c].type,value:s[c].value()}}var d=new r.ShaderMaterial({uniforms:u,vertexShader:t,fragmentShader:i,depthWrite:false,depthTest:false,transparent:true});if(parseInt(r.REVISION)<87){d.shading=r.FlatShading}else{d.flatShading=true}return d}},{three:27}],8:[function(e,t,i){"use strict";var r=e("component-emitter");var n=e("debounce");var a=t.exports;r(a);a.debounceDelay=50;a.onGlobalResize=function(){this.width=window.innerWidth;this.height=window.innerHeight;this.halfWidth=.5*this.width;this.halfHeight=.5*this.height;this.applyResize();if(this.debounceDelay>0){this.debounceResize()}else{this.applyResizeDebounce()}};a.applyResizeDebounce=function(){this.emit("resizeDebounce")};a.applyResize=function(){this.emit("resize")};a.addListener=function(e,t){this.on(t?"resize":"resizeDebounce",e)};a.removeListener=function(e){if(e){this.off("resize",e);this.off("resizeDebounce",e)}};a.debounceResize=n(a.applyResizeDebounce.bind(a),a.debounceDelay);a.onGlobalResize();window.addEventListener("resize",a.onGlobalResize.bind(a))},{"component-emitter":10,debounce:11}],9:[function(e,t,i){t.exports=r;function r(e,t,i){return t<i?e<t?t:e>i?i:e:e<i?i:e>t?t:e}},{}],10:[function(e,t,i){if(typeof t!=="undefined"){t.exports=r}function r(e){if(e)return n(e)}function n(e){for(var t in r.prototype){e[t]=r.prototype[t]}return e}r.prototype.on=r.prototype.addEventListener=function(e,t){this._callbacks=this._callbacks||{};(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t);return this};r.prototype.once=function(e,t){function i(){this.off(e,i);t.apply(this,arguments)}i.fn=t;this.on(e,i);return this};r.prototype.off=r.prototype.removeListener=r.prototype.removeAllListeners=r.prototype.removeEventListener=function(e,t){this._callbacks=this._callbacks||{};if(0==arguments.length){this._callbacks={};return this}var i=this._callbacks["$"+e];if(!i)return this;if(1==arguments.length){delete this._callbacks["$"+e];return this}var r;for(var n=0;n<i.length;n++){r=i[n];if(r===t||r.fn===t){i.splice(n,1);break}}return this};r.prototype.emit=function(e){this._callbacks=this._callbacks||{};var t=[].slice.call(arguments,1),i=this._callbacks["$"+e];if(i){i=i.slice(0);for(var r=0,n=i.length;r<n;++r){i[r].apply(this,t)}}return this};r.prototype.listeners=function(e){this._callbacks=this._callbacks||{};return this._callbacks["$"+e]||[]};r.prototype.hasListeners=function(e){return!!this.listeners(e).length}},{}],11:[function(e,t,i){t.exports=function e(t,i,r){var n,a,o,s,l;if(null==i)i=100;function u(){var e=Date.now()-s;if(e<i&&e>=0){n=setTimeout(u,i-e)}else{n=null;if(!r){l=t.apply(o,a);o=a=null}}}var c=function(){o=this;a=arguments;s=Date.now();var e=r&&!n;if(!n)n=setTimeout(u,i);if(e){l=t.apply(o,a);o=a=null}return l};c.clear=function(){if(n){clearTimeout(n);n=null}};c.flush=function(){if(n){l=t.apply(o,a);o=a=null;clearTimeout(n);n=null}};return c}},{}],12:[function(e,t,i){var r=e("indexof");var n=/\s+/;var a=Object.prototype.toString;t.exports=o;t.exports.add=s;t.exports.contains=l;t.exports.has=l;t.exports.toggle=h;t.exports.remove=u;t.exports.removeMatching=c;function o(e){if(e.classList){return e.classList}var t=e.className.replace(/^\s+|\s+$/g,"");var i=t.split(n);if(""===i[0])i.shift();return i}function s(e,t){if(e.classList){e.classList.add(t);return}var i=o(e);var n=r(i,t);if(!~n)i.push(t);e.className=i.join(" ")}function l(e,t){return e.classList?e.classList.contains(t):!!~r(o(e),t)}function u(e,t){if("[object RegExp]"==a.call(t)){return c(e,t)}if(e.classList){e.classList.remove(t);return}var i=o(e);var n=r(i,t);if(~n)i.splice(n,1);e.className=i.join(" ")}function c(e,t,i){var r=Array.prototype.slice.call(o(e));for(var n=0;n<r.length;n++){if(t.test(r[n])){u(e,r[n])}}}function h(e,t){if(e.classList){return e.classList.toggle(t)}if(l(e,t)){u(e,t)}else{s(e,t)}}},{indexof:16}],13:[function(e,t,i){function r(){this._events=this._events||{};this._maxListeners=this._maxListeners||undefined}t.exports=r;r.EventEmitter=r;r.prototype._events=undefined;r.prototype._maxListeners=undefined;r.defaultMaxListeners=10;r.prototype.setMaxListeners=function(e){if(!a(e)||e<0||isNaN(e))throw TypeError("n must be a positive number");this._maxListeners=e;return this};r.prototype.emit=function(e){var t,i,r,a,l,u;if(!this._events)this._events={};if(e==="error"){if(!this._events.error||o(this._events.error)&&!this._events.error.length){t=arguments[1];if(t instanceof Error){throw t}else{var c=new Error('Uncaught, unspecified "error" event. ('+t+")");c.context=t;throw c}}}i=this._events[e];if(s(i))return false;if(n(i)){switch(arguments.length){case 1:i.call(this);break;case 2:i.call(this,arguments[1]);break;case 3:i.call(this,arguments[1],arguments[2]);break;default:a=Array.prototype.slice.call(arguments,1);i.apply(this,a)}}else if(o(i)){a=Array.prototype.slice.call(arguments,1);u=i.slice();r=u.length;for(l=0;l<r;l++)u[l].apply(this,a)}return true};r.prototype.addListener=function(e,t){var i;if(!n(t))throw TypeError("listener must be a function");if(!this._events)this._events={};if(this._events.newListener)this.emit("newListener",e,n(t.listener)?t.listener:t);if(!this._events[e])this._events[e]=t;else if(o(this._events[e]))this._events[e].push(t);else this._events[e]=[this._events[e],t];if(o(this._events[e])&&!this._events[e].warned){if(!s(this._maxListeners)){i=this._maxListeners}else{i=r.defaultMaxListeners}if(i&&i>0&&this._events[e].length>i){this._events[e].warned=true;console.error("(node) warning: possible EventEmitter memory "+"leak detected. %d listeners added. "+"Use emitter.setMaxListeners() to increase limit.",this._events[e].length);if(typeof console.trace==="function"){console.trace()}}}return this};r.prototype.on=r.prototype.addListener;r.prototype.once=function(e,t){if(!n(t))throw TypeError("listener must be a function");var i=false;function r(){this.removeListener(e,r);if(!i){i=true;t.apply(this,arguments)}}r.listener=t;this.on(e,r);return this};r.prototype.removeListener=function(e,t){var i,r,a,s;if(!n(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;i=this._events[e];a=i.length;r=-1;if(i===t||n(i.listener)&&i.listener===t){delete this._events[e];if(this._events.removeListener)this.emit("removeListener",e,t)}else if(o(i)){for(s=a;s-- >0;){if(i[s]===t||i[s].listener&&i[s].listener===t){r=s;break}}if(r<0)return this;if(i.length===1){i.length=0;delete this._events[e]}else{i.splice(r,1)}if(this._events.removeListener)this.emit("removeListener",e,t)}return this};r.prototype.removeAllListeners=function(e){var t,i;if(!this._events)return this;if(!this._events.removeListener){if(arguments.length===0)this._events={};else if(this._events[e])delete this._events[e];return this}if(arguments.length===0){for(t in this._events){if(t==="removeListener")continue;this.removeAllListeners(t)}this.removeAllListeners("removeListener");this._events={};return this}i=this._events[e];if(n(i)){this.removeListener(e,i)}else if(i){while(i.length)this.removeListener(e,i[i.length-1])}delete this._events[e];return this};r.prototype.listeners=function(e){var t;if(!this._events||!this._events[e])t=[];else if(n(this._events[e]))t=[this._events[e]];else t=this._events[e].slice();return t};r.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(n(t))return 1;else if(t)return t.length}return 0};r.listenerCount=function(e,t){return e.listenerCount(t)};function n(e){return typeof e==="function"}function a(e){return typeof e==="number"}function o(e){return typeof e==="object"&&e!==null}function s(e){return e===void 0}},{}],14:[function(e,t,i){(function(e){var i=typeof t!=="undefined"&&t.exports&&typeof e!=="undefined"?e:this||window;(i._gsQueue||(i._gsQueue=[])).push(function(){"use strict";i._gsDefine("TweenMax",["core.Animation","core.SimpleTimeline","TweenLite"],function(e,t,i){var r=function(e){var t=[],i=e.length,r;for(r=0;r!==i;t.push(e[r++]));return t},n=function(e,t,i){var r=e.cycle,n,a;for(n in r){a=r[n];e[n]=typeof a==="function"?a(i,t[i]):a[i%a.length]}delete e.cycle},a=function(e,t,r){i.call(this,e,t,r);this._cycle=0;this._yoyo=this.vars.yoyo===true||!!this.vars.yoyoEase;this._repeat=this.vars.repeat||0;this._repeatDelay=this.vars.repeatDelay||0;if(this._repeat){this._uncache(true)}this.render=a.prototype.render},o=1e-10,s=i._internals,l=s.isSelector,u=s.isArray,c=a.prototype=i.to({},.1,{}),h=[];a.version="1.20.3";c.constructor=a;c.kill()._gc=false;a.killTweensOf=a.killDelayedCallsTo=i.killTweensOf;a.getTweensOf=i.getTweensOf;a.lagSmoothing=i.lagSmoothing;a.ticker=i.ticker;a.render=i.render;c.invalidate=function(){this._yoyo=this.vars.yoyo===true||!!this.vars.yoyoEase;this._repeat=this.vars.repeat||0;this._repeatDelay=this.vars.repeatDelay||0;this._yoyoEase=null;this._uncache(true);return i.prototype.invalidate.call(this)};c.updateTo=function(e,t){var r=this.ratio,n=this.vars.immediateRender||e.immediateRender,a;if(t&&this._startTime<this._timeline._time){this._startTime=this._timeline._time;this._uncache(false);if(this._gc){this._enabled(true,false)}else{this._timeline.insert(this,this._startTime-this._delay)}}for(a in e){this.vars[a]=e[a]}if(this._initted||n){if(t){this._initted=false;if(n){this.render(0,true,true)}}else{if(this._gc){this._enabled(true,false)}if(this._notifyPluginsOfEnabled&&this._firstPT){i._onPluginEvent("_onDisable",this)}if(this._time/this._duration>.998){var o=this._totalTime;this.render(0,true,false);this._initted=false;this.render(o,true,false)}else{this._initted=false;this._init();if(this._time>0||n){var s=1/(1-r),l=this._firstPT,u;while(l){u=l.s+l.c;l.c*=s;l.s=u-l.c;l=l._next}}}}}return this};c.render=function(e,t,r){if(!this._initted)if(this._duration===0&&this.vars.repeat){this.invalidate()}var n=!this._dirty?this._totalDuration:this.totalDuration(),a=this._time,l=this._totalTime,u=this._cycle,c=this._duration,h=this._rawPrevTime,f,d,p,m,v,g,y,b,_;if(e>=n-1e-7&&e>=0){this._totalTime=n;this._cycle=this._repeat;if(this._yoyo&&(this._cycle&1)!==0){this._time=0;this.ratio=this._ease._calcEnd?this._ease.getRatio(0):0}else{this._time=c;this.ratio=this._ease._calcEnd?this._ease.getRatio(1):1}if(!this._reversed){f=true;d="onComplete";r=r||this._timeline.autoRemoveChildren}if(c===0)if(this._initted||!this.vars.lazy||r){if(this._startTime===this._timeline._duration){e=0}if(h<0||e<=0&&e>=-1e-7||h===o&&this.data!=="isPause")if(h!==e){r=true;if(h>o){d="onReverseComplete"}}this._rawPrevTime=b=!t||e||h===e?e:o}}else if(e<1e-7){this._totalTime=this._time=this._cycle=0;this.ratio=this._ease._calcEnd?this._ease.getRatio(0):0;if(l!==0||c===0&&h>0){d="onReverseComplete";f=this._reversed}if(e<0){this._active=false;if(c===0)if(this._initted||!this.vars.lazy||r){if(h>=0){r=true}this._rawPrevTime=b=!t||e||h===e?e:o}}if(!this._initted){r=true}}else{this._totalTime=this._time=e;if(this._repeat!==0){m=c+this._repeatDelay;this._cycle=this._totalTime/m>>0;if(this._cycle!==0)if(this._cycle===this._totalTime/m&&l<=e){this._cycle--}this._time=this._totalTime-this._cycle*m;if(this._yoyo)if((this._cycle&1)!==0){this._time=c-this._time;_=this._yoyoEase||this.vars.yoyoEase;if(_){if(!this._yoyoEase){if(_===true&&!this._initted){_=this.vars.ease;this._yoyoEase=_=!_?i.defaultEase:_ instanceof Ease?_:typeof _==="function"?new Ease(_,this.vars.easeParams):Ease.map[_]||i.defaultEase}else{this._yoyoEase=_=_===true?this._ease:_ instanceof Ease?_:Ease.map[_]}}this.ratio=_?1-_.getRatio((c-this._time)/c):0}}if(this._time>c){this._time=c}else if(this._time<0){this._time=0}}if(this._easeType&&!_){v=this._time/c;g=this._easeType;y=this._easePower;if(g===1||g===3&&v>=.5){v=1-v}if(g===3){v*=2}if(y===1){v*=v}else if(y===2){v*=v*v}else if(y===3){v*=v*v*v}else if(y===4){v*=v*v*v*v}if(g===1){this.ratio=1-v}else if(g===2){this.ratio=v}else if(this._time/c<.5){this.ratio=v/2}else{this.ratio=1-v/2}}else if(!_){this.ratio=this._ease.getRatio(this._time/c)}}if(a===this._time&&!r&&u===this._cycle){if(l!==this._totalTime)if(this._onUpdate)if(!t){this._callback("onUpdate")}return}else if(!this._initted){this._init();if(!this._initted||this._gc){return}else if(!r&&this._firstPT&&(this.vars.lazy!==false&&this._duration||this.vars.lazy&&!this._duration)){this._time=a;this._totalTime=l;this._rawPrevTime=h;this._cycle=u;s.lazyTweens.push(this);this._lazy=[e,t];return}if(this._time&&!f&&!_){this.ratio=this._ease.getRatio(this._time/c)}else if(f&&this._ease._calcEnd&&!_){this.ratio=this._ease.getRatio(this._time===0?0:1)}}if(this._lazy!==false){this._lazy=false}if(!this._active)if(!this._paused&&this._time!==a&&e>=0){this._active=true}if(l===0){if(this._initted===2&&e>0){this._init()}if(this._startAt){if(e>=0){this._startAt.render(e,true,r)}else if(!d){d="_dummyGS"}}if(this.vars.onStart)if(this._totalTime!==0||c===0)if(!t){this._callback("onStart")}}p=this._firstPT;while(p){if(p.f){p.t[p.p](p.c*this.ratio+p.s)}else{p.t[p.p]=p.c*this.ratio+p.s}p=p._next}if(this._onUpdate){if(e<0)if(this._startAt&&this._startTime){this._startAt.render(e,true,r)}if(!t)if(this._totalTime!==l||d){this._callback("onUpdate")}}if(this._cycle!==u)if(!t)if(!this._gc)if(this.vars.onRepeat){this._callback("onRepeat")}if(d)if(!this._gc||r){if(e<0&&this._startAt&&!this._onUpdate&&this._startTime){this._startAt.render(e,true,r)}if(f){if(this._timeline.autoRemoveChildren){this._enabled(false,false)}this._active=false}if(!t&&this.vars[d]){this._callback(d)}if(c===0&&this._rawPrevTime===o&&b!==o){this._rawPrevTime=0}}};a.to=function(e,t,i){return new a(e,t,i)};a.from=function(e,t,i){i.runBackwards=true;i.immediateRender=i.immediateRender!=false;return new a(e,t,i)};a.fromTo=function(e,t,i,r){r.startAt=i;r.immediateRender=r.immediateRender!=false&&i.immediateRender!=false;return new a(e,t,r)};a.staggerTo=a.allTo=function(e,t,o,s,c,f,d){s=s||0;var p=0,m=[],v=function(){if(o.onComplete){o.onComplete.apply(o.onCompleteScope||this,arguments)}c.apply(d||o.callbackScope||this,f||h)},g=o.cycle,y=o.startAt&&o.startAt.cycle,b,_,x,w;if(!u(e)){if(typeof e==="string"){e=i.selector(e)||e}if(l(e)){e=r(e)}}e=e||[];if(s<0){e=r(e);e.reverse();s*=-1}b=e.length-1;for(x=0;x<=b;x++){_={};for(w in o){_[w]=o[w]}if(g){n(_,e,x);if(_.duration!=null){t=_.duration;delete _.duration}}if(y){y=_.startAt={};for(w in o.startAt){y[w]=o.startAt[w]}n(_.startAt,e,x)}_.delay=p+(_.delay||0);if(x===b&&c){_.onComplete=v}m[x]=new a(e[x],t,_);p+=s}return m};a.staggerFrom=a.allFrom=function(e,t,i,r,n,o,s){i.runBackwards=true;i.immediateRender=i.immediateRender!=false;return a.staggerTo(e,t,i,r,n,o,s)};a.staggerFromTo=a.allFromTo=function(e,t,i,r,n,o,s,l){r.startAt=i;r.immediateRender=r.immediateRender!=false&&i.immediateRender!=false;return a.staggerTo(e,t,r,n,o,s,l)};a.delayedCall=function(e,t,i,r,n){return new a(t,0,{delay:e,onComplete:t,onCompleteParams:i,callbackScope:r,onReverseComplete:t,onReverseCompleteParams:i,immediateRender:false,useFrames:n,overwrite:0})};a.set=function(e,t){return new a(e,0,t)};a.isTweening=function(e){return i.getTweensOf(e,true).length>0};var f=function(e,t){var r=[],n=0,a=e._first;while(a){if(a instanceof i){r[n++]=a}else{if(t){r[n++]=a}r=r.concat(f(a,t));n=r.length}a=a._next}return r},d=a.getAllTweens=function(t){return f(e._rootTimeline,t).concat(f(e._rootFramesTimeline,t))};a.killAll=function(e,i,r,n){if(i==null){i=true}if(r==null){r=true}var a=d(n!=false),o=a.length,s=i&&r&&n,l,u,c;for(c=0;c<o;c++){u=a[c];if(s||u instanceof t||(l=u.target===u.vars.onComplete)&&r||i&&!l){if(e){u.totalTime(u._reversed?0:u.totalDuration())}else{u._enabled(false,false)}}}};a.killChildTweensOf=function(e,t){if(e==null){return}var n=s.tweenLookup,o,c,h,f,d;if(typeof e==="string"){e=i.selector(e)||e}if(l(e)){e=r(e)}if(u(e)){f=e.length;while(--f>-1){a.killChildTweensOf(e[f],t)}return}o=[];for(h in n){c=n[h].target.parentNode;while(c){if(c===e){o=o.concat(n[h].tweens)}c=c.parentNode}}d=o.length;for(f=0;f<d;f++){if(t){o[f].totalTime(o[f].totalDuration())}o[f]._enabled(false,false)}};var p=function(e,i,r,n){i=i!==false;r=r!==false;n=n!==false;var a=d(n),o=i&&r&&n,s=a.length,l,u;while(--s>-1){u=a[s];if(o||u instanceof t||(l=u.target===u.vars.onComplete)&&r||i&&!l){u.paused(e)}}};a.pauseAll=function(e,t,i){p(true,e,t,i)};a.resumeAll=function(e,t,i){p(false,e,t,i)};a.globalTimeScale=function(t){var r=e._rootTimeline,n=i.ticker.time;if(!arguments.length){return r._timeScale}t=t||o;r._startTime=n-(n-r._startTime)*r._timeScale/t;r=e._rootFramesTimeline;n=i.ticker.frame;r._startTime=n-(n-r._startTime)*r._timeScale/t;r._timeScale=e._rootTimeline._timeScale=t;return t};c.progress=function(e,t){return!arguments.length?this._time/this.duration():this.totalTime(this.duration()*(this._yoyo&&(this._cycle&1)!==0?1-e:e)+this._cycle*(this._duration+this._repeatDelay),t)};c.totalProgress=function(e,t){return!arguments.length?this._totalTime/this.totalDuration():this.totalTime(this.totalDuration()*e,t)};c.time=function(e,t){if(!arguments.length){return this._time}if(this._dirty){this.totalDuration()}if(e>this._duration){e=this._duration}if(this._yoyo&&(this._cycle&1)!==0){e=this._duration-e+this._cycle*(this._duration+this._repeatDelay)}else if(this._repeat!==0){e+=this._cycle*(this._duration+this._repeatDelay)}return this.totalTime(e,t)};c.duration=function(t){if(!arguments.length){return this._duration}return e.prototype.duration.call(this,t)};c.totalDuration=function(e){if(!arguments.length){if(this._dirty){this._totalDuration=this._repeat===-1?999999999999:this._duration*(this._repeat+1)+this._repeatDelay*this._repeat;this._dirty=false}return this._totalDuration}return this._repeat===-1?this:this.duration((e-this._repeat*this._repeatDelay)/(this._repeat+1))};c.repeat=function(e){if(!arguments.length){return this._repeat}this._repeat=e;return this._uncache(true)};c.repeatDelay=function(e){if(!arguments.length){return this._repeatDelay}this._repeatDelay=e;return this._uncache(true)};c.yoyo=function(e){if(!arguments.length){return this._yoyo}this._yoyo=e;return this};return a},true);i._gsDefine("TimelineLite",["core.Animation","core.SimpleTimeline","TweenLite"],function(e,t,r){var n=function(e){t.call(this,e);this._labels={};this.autoRemoveChildren=this.vars.autoRemoveChildren===true;this.smoothChildTiming=this.vars.smoothChildTiming===true;this._sortChildren=true;this._onUpdate=this.vars.onUpdate;var i=this.vars,r,n;for(n in i){r=i[n];if(u(r))if(r.join("").indexOf("{self}")!==-1){i[n]=this._swapSelfInParams(r)}}if(u(i.tweens)){this.add(i.tweens,0,i.align,i.stagger)}},a=1e-10,o=r._internals,s=n._internals={},l=o.isSelector,u=o.isArray,c=o.lazyTweens,h=o.lazyRender,f=i._gsDefine.globals,d=function(e){var t={},i;for(i in e){t[i]=e[i]}return t},p=function(e,t,i){var r=e.cycle,n,a;for(n in r){a=r[n];e[n]=typeof a==="function"?a(i,t[i]):a[i%a.length]}delete e.cycle},m=s.pauseCallback=function(){},v=function(e){var t=[],i=e.length,r;for(r=0;r!==i;t.push(e[r++]));return t},g=n.prototype=new t;n.version="1.20.3";g.constructor=n;g.kill()._gc=g._forcingPlayhead=g._hasPause=false;g.to=function(e,t,i,n){var a=i.repeat&&f.TweenMax||r;return t?this.add(new a(e,t,i),n):this.set(e,i,n)};g.from=function(e,t,i,n){return this.add((i.repeat&&f.TweenMax||r).from(e,t,i),n)};g.fromTo=function(e,t,i,n,a){var o=n.repeat&&f.TweenMax||r;return t?this.add(o.fromTo(e,t,i,n),a):this.set(e,n,a)};g.staggerTo=function(e,t,i,a,o,s,u,c){var h=new n({onComplete:s,onCompleteParams:u,callbackScope:c,smoothChildTiming:this.smoothChildTiming}),f=i.cycle,m,g;if(typeof e==="string"){e=r.selector(e)||e}e=e||[];if(l(e)){e=v(e)}a=a||0;if(a<0){e=v(e);e.reverse();a*=-1}for(g=0;g<e.length;g++){m=d(i);if(m.startAt){m.startAt=d(m.startAt);if(m.startAt.cycle){p(m.startAt,e,g)}}if(f){p(m,e,g);if(m.duration!=null){t=m.duration;delete m.duration}}h.to(e[g],t,m,g*a)}return this.add(h,o)};g.staggerFrom=function(e,t,i,r,n,a,o,s){i.immediateRender=i.immediateRender!=false;i.runBackwards=true;return this.staggerTo(e,t,i,r,n,a,o,s)};g.staggerFromTo=function(e,t,i,r,n,a,o,s,l){r.startAt=i;r.immediateRender=r.immediateRender!=false&&i.immediateRender!=false;return this.staggerTo(e,t,r,n,a,o,s,l)};g.call=function(e,t,i,n){return this.add(r.delayedCall(0,e,t,i),n)};g.set=function(e,t,i){i=this._parseTimeOrLabel(i,0,true);if(t.immediateRender==null){t.immediateRender=i===this._time&&!this._paused}return this.add(new r(e,0,t),i)};n.exportRoot=function(e,t){e=e||{};if(e.smoothChildTiming==null){e.smoothChildTiming=true}var i=new n(e),a=i._timeline,o,s,l,u;if(t==null){t=true}a._remove(i,true);i._startTime=0;i._rawPrevTime=i._time=i._totalTime=a._time;l=a._first;while(l){u=l._next;if(!t||!(l instanceof r&&l.target===l.vars.onComplete)){s=l._startTime-l._delay;if(s<0){o=1}i.add(l,s)}l=u}a.add(i,0);if(o){i.totalDuration()}return i};g.add=function(i,a,o,s){var l,c,h,f,d,p;if(typeof a!=="number"){a=this._parseTimeOrLabel(a,0,true,i)}if(!(i instanceof e)){if(i instanceof Array||i&&i.push&&u(i)){o=o||"normal";s=s||0;l=a;c=i.length;for(h=0;h<c;h++){if(u(f=i[h])){f=new n({tweens:f})}this.add(f,l);if(typeof f!=="string"&&typeof f!=="function"){if(o==="sequence"){l=f._startTime+f.totalDuration()/f._timeScale}else if(o==="start"){f._startTime-=f.delay()}}l+=s}return this._uncache(true)}else if(typeof i==="string"){return this.addLabel(i,a)}else if(typeof i==="function"){i=r.delayedCall(0,i)}else{throw"Cannot add "+i+" into the timeline; it is not a tween, timeline, function, or string."}}t.prototype.add.call(this,i,a);if(i._time){i.render((this.rawTime()-i._startTime)*i._timeScale,false,false)}if(this._gc||this._time===this._duration)if(!this._paused)if(this._duration<this.duration()){d=this;p=d.rawTime()>i._startTime
;while(d._timeline){if(p&&d._timeline.smoothChildTiming){d.totalTime(d._totalTime,true)}else if(d._gc){d._enabled(true,false)}d=d._timeline}}return this};g.remove=function(t){if(t instanceof e){this._remove(t,false);var i=t._timeline=t.vars.useFrames?e._rootFramesTimeline:e._rootTimeline;t._startTime=(t._paused?t._pauseTime:i._time)-(!t._reversed?t._totalTime:t.totalDuration()-t._totalTime)/t._timeScale;return this}else if(t instanceof Array||t&&t.push&&u(t)){var r=t.length;while(--r>-1){this.remove(t[r])}return this}else if(typeof t==="string"){return this.removeLabel(t)}return this.kill(null,t)};g._remove=function(e,i){t.prototype._remove.call(this,e,i);var r=this._last;if(!r){this._time=this._totalTime=this._duration=this._totalDuration=0}else if(this._time>this.duration()){this._time=this._duration;this._totalTime=this._totalDuration}return this};g.append=function(e,t){return this.add(e,this._parseTimeOrLabel(null,t,true,e))};g.insert=g.insertMultiple=function(e,t,i,r){return this.add(e,t||0,i,r)};g.appendMultiple=function(e,t,i,r){return this.add(e,this._parseTimeOrLabel(null,t,true,e),i,r)};g.addLabel=function(e,t){this._labels[e]=this._parseTimeOrLabel(t);return this};g.addPause=function(e,t,i,n){var a=r.delayedCall(0,m,i,n||this);a.vars.onComplete=a.vars.onReverseComplete=t;a.data="isPause";this._hasPause=true;return this.add(a,e)};g.removeLabel=function(e){delete this._labels[e];return this};g.getLabelTime=function(e){return this._labels[e]!=null?this._labels[e]:-1};g._parseTimeOrLabel=function(t,i,r,n){var a,o;if(n instanceof e&&n.timeline===this){this.remove(n)}else if(n&&(n instanceof Array||n.push&&u(n))){o=n.length;while(--o>-1){if(n[o]instanceof e&&n[o].timeline===this){this.remove(n[o])}}}a=typeof t==="number"&&!i?0:this.duration()>99999999999?this.recent().endTime(false):this._duration;if(typeof i==="string"){return this._parseTimeOrLabel(i,r&&typeof t==="number"&&this._labels[i]==null?t-a:0,r)}i=i||0;if(typeof t==="string"&&(isNaN(t)||this._labels[t]!=null)){o=t.indexOf("=");if(o===-1){if(this._labels[t]==null){return r?this._labels[t]=a+i:i}return this._labels[t]+i}i=parseInt(t.charAt(o-1)+"1",10)*Number(t.substr(o+1));t=o>1?this._parseTimeOrLabel(t.substr(0,o-1),0,r):a}else if(t==null){t=a}return Number(t)+i};g.seek=function(e,t){return this.totalTime(typeof e==="number"?e:this._parseTimeOrLabel(e),t!==false)};g.stop=function(){return this.paused(true)};g.gotoAndPlay=function(e,t){return this.play(e,t)};g.gotoAndStop=function(e,t){return this.pause(e,t)};g.render=function(e,t,i){if(this._gc){this._enabled(true,false)}var r=this._time,n=!this._dirty?this._totalDuration:this.totalDuration(),o=this._startTime,s=this._timeScale,l=this._paused,u,f,d,p,m,v,g;if(r!==this._time){e+=this._time-r}if(e>=n-1e-7&&e>=0){this._totalTime=this._time=n;if(!this._reversed)if(!this._hasPausedChild()){f=true;p="onComplete";m=!!this._timeline.autoRemoveChildren;if(this._duration===0)if(e<=0&&e>=-1e-7||this._rawPrevTime<0||this._rawPrevTime===a)if(this._rawPrevTime!==e&&this._first){m=true;if(this._rawPrevTime>a){p="onReverseComplete"}}}this._rawPrevTime=this._duration||!t||e||this._rawPrevTime===e?e:a;e=n+1e-4}else if(e<1e-7){this._totalTime=this._time=0;if(r!==0||this._duration===0&&this._rawPrevTime!==a&&(this._rawPrevTime>0||e<0&&this._rawPrevTime>=0)){p="onReverseComplete";f=this._reversed}if(e<0){this._active=false;if(this._timeline.autoRemoveChildren&&this._reversed){m=f=true;p="onReverseComplete"}else if(this._rawPrevTime>=0&&this._first){m=true}this._rawPrevTime=e}else{this._rawPrevTime=this._duration||!t||e||this._rawPrevTime===e?e:a;if(e===0&&f){u=this._first;while(u&&u._startTime===0){if(!u._duration){f=false}u=u._next}}e=0;if(!this._initted){m=true}}}else{if(this._hasPause&&!this._forcingPlayhead&&!t){if(e>=r){u=this._first;while(u&&u._startTime<=e&&!v){if(!u._duration)if(u.data==="isPause"&&!u.ratio&&!(u._startTime===0&&this._rawPrevTime===0)){v=u}u=u._next}}else{u=this._last;while(u&&u._startTime>=e&&!v){if(!u._duration)if(u.data==="isPause"&&u._rawPrevTime>0){v=u}u=u._prev}}if(v){this._time=e=v._startTime;this._totalTime=e+this._cycle*(this._totalDuration+this._repeatDelay)}}this._totalTime=this._time=this._rawPrevTime=e}if((this._time===r||!this._first)&&!i&&!m&&!v){return}else if(!this._initted){this._initted=true}if(!this._active)if(!this._paused&&this._time!==r&&e>0){this._active=true}if(r===0)if(this.vars.onStart)if(this._time!==0||!this._duration)if(!t){this._callback("onStart")}g=this._time;if(g>=r){u=this._first;while(u){d=u._next;if(g!==this._time||this._paused&&!l){break}else if(u._active||u._startTime<=g&&!u._paused&&!u._gc){if(v===u){this.pause()}if(!u._reversed){u.render((e-u._startTime)*u._timeScale,t,i)}else{u.render((!u._dirty?u._totalDuration:u.totalDuration())-(e-u._startTime)*u._timeScale,t,i)}}u=d}}else{u=this._last;while(u){d=u._prev;if(g!==this._time||this._paused&&!l){break}else if(u._active||u._startTime<=r&&!u._paused&&!u._gc){if(v===u){v=u._prev;while(v&&v.endTime()>this._time){v.render(v._reversed?v.totalDuration()-(e-v._startTime)*v._timeScale:(e-v._startTime)*v._timeScale,t,i);v=v._prev}v=null;this.pause()}if(!u._reversed){u.render((e-u._startTime)*u._timeScale,t,i)}else{u.render((!u._dirty?u._totalDuration:u.totalDuration())-(e-u._startTime)*u._timeScale,t,i)}}u=d}}if(this._onUpdate)if(!t){if(c.length){h()}this._callback("onUpdate")}if(p)if(!this._gc)if(o===this._startTime||s!==this._timeScale)if(this._time===0||n>=this.totalDuration()){if(f){if(c.length){h()}if(this._timeline.autoRemoveChildren){this._enabled(false,false)}this._active=false}if(!t&&this.vars[p]){this._callback(p)}}};g._hasPausedChild=function(){var e=this._first;while(e){if(e._paused||e instanceof n&&e._hasPausedChild()){return true}e=e._next}return false};g.getChildren=function(e,t,i,n){n=n||-9999999999;var a=[],o=this._first,s=0;while(o){if(o._startTime<n){}else if(o instanceof r){if(t!==false){a[s++]=o}}else{if(i!==false){a[s++]=o}if(e!==false){a=a.concat(o.getChildren(true,t,i));s=a.length}}o=o._next}return a};g.getTweensOf=function(e,t){var i=this._gc,n=[],a=0,o,s;if(i){this._enabled(true,true)}o=r.getTweensOf(e);s=o.length;while(--s>-1){if(o[s].timeline===this||t&&this._contains(o[s])){n[a++]=o[s]}}if(i){this._enabled(false,true)}return n};g.recent=function(){return this._recent};g._contains=function(e){var t=e.timeline;while(t){if(t===this){return true}t=t.timeline}return false};g.shiftChildren=function(e,t,i){i=i||0;var r=this._first,n=this._labels,a;while(r){if(r._startTime>=i){r._startTime+=e}r=r._next}if(t){for(a in n){if(n[a]>=i){n[a]+=e}}}return this._uncache(true)};g._kill=function(e,t){if(!e&&!t){return this._enabled(false,false)}var i=!t?this.getChildren(true,true,false):this.getTweensOf(t),r=i.length,n=false;while(--r>-1){if(i[r]._kill(e,t)){n=true}}return n};g.clear=function(e){var t=this.getChildren(false,true,true),i=t.length;this._time=this._totalTime=0;while(--i>-1){t[i]._enabled(false,false)}if(e!==false){this._labels={}}return this._uncache(true)};g.invalidate=function(){var t=this._first;while(t){t.invalidate();t=t._next}return e.prototype.invalidate.call(this)};g._enabled=function(e,i){if(e===this._gc){var r=this._first;while(r){r._enabled(e,true);r=r._next}}return t.prototype._enabled.call(this,e,i)};g.totalTime=function(t,i,r){this._forcingPlayhead=true;var n=e.prototype.totalTime.apply(this,arguments);this._forcingPlayhead=false;return n};g.duration=function(e){if(!arguments.length){if(this._dirty){this.totalDuration()}return this._duration}if(this.duration()!==0&&e!==0){this.timeScale(this._duration/e)}return this};g.totalDuration=function(e){if(!arguments.length){if(this._dirty){var t=0,i=this._last,r=999999999999,n,a;while(i){n=i._prev;if(i._dirty){i.totalDuration()}if(i._startTime>r&&this._sortChildren&&!i._paused&&!this._calculatingDuration){this._calculatingDuration=1;this.add(i,i._startTime-i._delay);this._calculatingDuration=0}else{r=i._startTime}if(i._startTime<0&&!i._paused){t-=i._startTime;if(this._timeline.smoothChildTiming){this._startTime+=i._startTime/this._timeScale;this._time-=i._startTime;this._totalTime-=i._startTime;this._rawPrevTime-=i._startTime}this.shiftChildren(-i._startTime,false,-9999999999);r=0}a=i._startTime+i._totalDuration/i._timeScale;if(a>t){t=a}i=n}this._duration=this._totalDuration=t;this._dirty=false}return this._totalDuration}return e&&this.totalDuration()?this.timeScale(this._totalDuration/e):this};g.paused=function(t){if(!t){var i=this._first,r=this._time;while(i){if(i._startTime===r&&i.data==="isPause"){i._rawPrevTime=0}i=i._next}}return e.prototype.paused.apply(this,arguments)};g.usesFrames=function(){var t=this._timeline;while(t._timeline){t=t._timeline}return t===e._rootFramesTimeline};g.rawTime=function(e){return e&&(this._paused||this._repeat&&this.time()>0&&this.totalProgress()<1)?this._totalTime%(this._duration+this._repeatDelay):this._paused?this._totalTime:(this._timeline.rawTime(e)-this._startTime)*this._timeScale};return n},true);i._gsDefine("TimelineMax",["TimelineLite","TweenLite","easing.Ease"],function(e,t,r){var n=function(t){e.call(this,t);this._repeat=this.vars.repeat||0;this._repeatDelay=this.vars.repeatDelay||0;this._cycle=0;this._yoyo=this.vars.yoyo===true;this._dirty=true},a=1e-10,o=t._internals,s=o.lazyTweens,l=o.lazyRender,u=i._gsDefine.globals,c=new r(null,null,1,0),h=n.prototype=new e;h.constructor=n;h.kill()._gc=false;n.version="1.20.3";h.invalidate=function(){this._yoyo=this.vars.yoyo===true;this._repeat=this.vars.repeat||0;this._repeatDelay=this.vars.repeatDelay||0;this._uncache(true);return e.prototype.invalidate.call(this)};h.addCallback=function(e,i,r,n){return this.add(t.delayedCall(0,e,r,n),i)};h.removeCallback=function(e,t){if(e){if(t==null){this._kill(null,e)}else{var i=this.getTweensOf(e,false),r=i.length,n=this._parseTimeOrLabel(t);while(--r>-1){if(i[r]._startTime===n){i[r]._enabled(false,false)}}}}return this};h.removePause=function(t){return this.removeCallback(e._internals.pauseCallback,t)};h.tweenTo=function(e,i){i=i||{};var r={ease:c,useFrames:this.usesFrames(),immediateRender:false},n=i.repeat&&u.TweenMax||t,a,o,s;for(o in i){r[o]=i[o]}r.time=this._parseTimeOrLabel(e);a=Math.abs(Number(r.time)-this._time)/this._timeScale||.001;s=new n(this,a,r);r.onStart=function(){s.target.paused(true);if(s.vars.time!==s.target.time()&&a===s.duration()){s.duration(Math.abs(s.vars.time-s.target.time())/s.target._timeScale)}if(i.onStart){i.onStart.apply(i.onStartScope||i.callbackScope||s,i.onStartParams||[])}};return s};h.tweenFromTo=function(e,t,i){i=i||{};e=this._parseTimeOrLabel(e);i.startAt={onComplete:this.seek,onCompleteParams:[e],callbackScope:this};i.immediateRender=i.immediateRender!==false;var r=this.tweenTo(t,i);return r.duration(Math.abs(r.vars.time-e)/this._timeScale||.001)};h.render=function(e,t,i){if(this._gc){this._enabled(true,false)}var r=this._time,n=!this._dirty?this._totalDuration:this.totalDuration(),o=this._duration,u=this._totalTime,c=this._startTime,h=this._timeScale,f=this._rawPrevTime,d=this._paused,p=this._cycle,m,v,g,y,b,_,x,w;if(r!==this._time){e+=this._time-r}if(e>=n-1e-7&&e>=0){if(!this._locked){this._totalTime=n;this._cycle=this._repeat}if(!this._reversed)if(!this._hasPausedChild()){v=true;y="onComplete";b=!!this._timeline.autoRemoveChildren;if(this._duration===0)if(e<=0&&e>=-1e-7||f<0||f===a)if(f!==e&&this._first){b=true;if(f>a){y="onReverseComplete"}}}this._rawPrevTime=this._duration||!t||e||this._rawPrevTime===e?e:a;if(this._yoyo&&(this._cycle&1)!==0){this._time=e=0}else{this._time=o;e=o+1e-4}}else if(e<1e-7){if(!this._locked){this._totalTime=this._cycle=0}this._time=0;if(r!==0||o===0&&f!==a&&(f>0||e<0&&f>=0)&&!this._locked){y="onReverseComplete";v=this._reversed}if(e<0){this._active=false;if(this._timeline.autoRemoveChildren&&this._reversed){b=v=true;y="onReverseComplete"}else if(f>=0&&this._first){b=true}this._rawPrevTime=e}else{this._rawPrevTime=o||!t||e||this._rawPrevTime===e?e:a;if(e===0&&v){m=this._first;while(m&&m._startTime===0){if(!m._duration){v=false}m=m._next}}e=0;if(!this._initted){b=true}}}else{if(o===0&&f<0){b=true}this._time=this._rawPrevTime=e;if(!this._locked){this._totalTime=e;if(this._repeat!==0){_=o+this._repeatDelay;this._cycle=this._totalTime/_>>0;if(this._cycle!==0)if(this._cycle===this._totalTime/_&&u<=e){this._cycle--}this._time=this._totalTime-this._cycle*_;if(this._yoyo)if((this._cycle&1)!==0){this._time=o-this._time}if(this._time>o){this._time=o;e=o+1e-4}else if(this._time<0){this._time=e=0}else{e=this._time}}}if(this._hasPause&&!this._forcingPlayhead&&!t){e=this._time;if(e>=r||this._repeat&&p!==this._cycle){m=this._first;while(m&&m._startTime<=e&&!x){if(!m._duration)if(m.data==="isPause"&&!m.ratio&&!(m._startTime===0&&this._rawPrevTime===0)){x=m}m=m._next}}else{m=this._last;while(m&&m._startTime>=e&&!x){if(!m._duration)if(m.data==="isPause"&&m._rawPrevTime>0){x=m}m=m._prev}}if(x&&x._startTime<o){this._time=e=x._startTime;this._totalTime=e+this._cycle*(this._totalDuration+this._repeatDelay)}}}if(this._cycle!==p)if(!this._locked){var T=this._yoyo&&(p&1)!==0,M=T===(this._yoyo&&(this._cycle&1)!==0),S=this._totalTime,E=this._cycle,P=this._rawPrevTime,A=this._time;this._totalTime=p*o;if(this._cycle<p){T=!T}else{this._totalTime+=o}this._time=r;this._rawPrevTime=o===0?f-1e-4:f;this._cycle=p;this._locked=true;r=T?0:o;this.render(r,t,o===0);if(!t)if(!this._gc){if(this.vars.onRepeat){this._cycle=E;this._locked=false;this._callback("onRepeat")}}if(r!==this._time){return}if(M){this._cycle=p;this._locked=true;r=T?o+1e-4:-1e-4;this.render(r,true,false)}this._locked=false;if(this._paused&&!d){return}this._time=A;this._totalTime=S;this._cycle=E;this._rawPrevTime=P}if((this._time===r||!this._first)&&!i&&!b&&!x){if(u!==this._totalTime)if(this._onUpdate)if(!t){this._callback("onUpdate")}return}else if(!this._initted){this._initted=true}if(!this._active)if(!this._paused&&this._totalTime!==u&&e>0){this._active=true}if(u===0)if(this.vars.onStart)if(this._totalTime!==0||!this._totalDuration)if(!t){this._callback("onStart")}w=this._time;if(w>=r){m=this._first;while(m){g=m._next;if(w!==this._time||this._paused&&!d){break}else if(m._active||m._startTime<=this._time&&!m._paused&&!m._gc){if(x===m){this.pause()}if(!m._reversed){m.render((e-m._startTime)*m._timeScale,t,i)}else{m.render((!m._dirty?m._totalDuration:m.totalDuration())-(e-m._startTime)*m._timeScale,t,i)}}m=g}}else{m=this._last;while(m){g=m._prev;if(w!==this._time||this._paused&&!d){break}else if(m._active||m._startTime<=r&&!m._paused&&!m._gc){if(x===m){x=m._prev;while(x&&x.endTime()>this._time){x.render(x._reversed?x.totalDuration()-(e-x._startTime)*x._timeScale:(e-x._startTime)*x._timeScale,t,i);x=x._prev}x=null;this.pause()}if(!m._reversed){m.render((e-m._startTime)*m._timeScale,t,i)}else{m.render((!m._dirty?m._totalDuration:m.totalDuration())-(e-m._startTime)*m._timeScale,t,i)}}m=g}}if(this._onUpdate)if(!t){if(s.length){l()}this._callback("onUpdate")}if(y)if(!this._locked)if(!this._gc)if(c===this._startTime||h!==this._timeScale)if(this._time===0||n>=this.totalDuration()){if(v){if(s.length){l()}if(this._timeline.autoRemoveChildren){this._enabled(false,false)}this._active=false}if(!t&&this.vars[y]){this._callback(y)}}};h.getActive=function(e,t,i){if(e==null){e=true}if(t==null){t=true}if(i==null){i=false}var r=[],n=this.getChildren(e,t,i),a=0,o=n.length,s,l;for(s=0;s<o;s++){l=n[s];if(l.isActive()){r[a++]=l}}return r};h.getLabelAfter=function(e){if(!e)if(e!==0){e=this._time}var t=this.getLabelsArray(),i=t.length,r;for(r=0;r<i;r++){if(t[r].time>e){return t[r].name}}return null};h.getLabelBefore=function(e){if(e==null){e=this._time}var t=this.getLabelsArray(),i=t.length;while(--i>-1){if(t[i].time<e){return t[i].name}}return null};h.getLabelsArray=function(){var e=[],t=0,i;for(i in this._labels){e[t++]={time:this._labels[i],name:i}}e.sort(function(e,t){return e.time-t.time});return e};h.invalidate=function(){this._locked=false;return e.prototype.invalidate.call(this)};h.progress=function(e,t){return!arguments.length?this._time/this.duration()||0:this.totalTime(this.duration()*(this._yoyo&&(this._cycle&1)!==0?1-e:e)+this._cycle*(this._duration+this._repeatDelay),t)};h.totalProgress=function(e,t){return!arguments.length?this._totalTime/this.totalDuration()||0:this.totalTime(this.totalDuration()*e,t)};h.totalDuration=function(t){if(!arguments.length){if(this._dirty){e.prototype.totalDuration.call(this);this._totalDuration=this._repeat===-1?999999999999:this._duration*(this._repeat+1)+this._repeatDelay*this._repeat}return this._totalDuration}return this._repeat===-1||!t?this:this.timeScale(this.totalDuration()/t)};h.time=function(e,t){if(!arguments.length){return this._time}if(this._dirty){this.totalDuration()}if(e>this._duration){e=this._duration}if(this._yoyo&&(this._cycle&1)!==0){e=this._duration-e+this._cycle*(this._duration+this._repeatDelay)}else if(this._repeat!==0){e+=this._cycle*(this._duration+this._repeatDelay)}return this.totalTime(e,t)};h.repeat=function(e){if(!arguments.length){return this._repeat}this._repeat=e;return this._uncache(true)};h.repeatDelay=function(e){if(!arguments.length){return this._repeatDelay}this._repeatDelay=e;return this._uncache(true)};h.yoyo=function(e){if(!arguments.length){return this._yoyo}this._yoyo=e;return this};h.currentLabel=function(e){if(!arguments.length){return this.getLabelBefore(this._time+1e-8)}return this.seek(e,true)};return n},true);(function(){var e=180/Math.PI,t=[],r=[],n=[],a={},o=i._gsDefine.globals,s=function(e,t,i,r){if(i===r){i=r-(r-t)/1e6}if(e===t){t=e+(i-e)/1e6}this.a=e;this.b=t;this.c=i;this.d=r;this.da=r-e;this.ca=i-e;this.ba=t-e},l=",x,y,z,left,top,right,bottom,marginTop,marginLeft,marginRight,marginBottom,paddingLeft,paddingTop,paddingRight,paddingBottom,backgroundPosition,backgroundPosition_y,",u=function(e,t,i,r){var n={a:e},a={},o={},s={c:r},l=(e+t)/2,u=(t+i)/2,c=(i+r)/2,h=(l+u)/2,f=(u+c)/2,d=(f-h)/8;n.b=l+(e-l)/4;a.b=h+d;n.c=a.a=(n.b+a.b)/2;a.c=o.a=(h+f)/2;o.b=f-d;s.b=c+(r-c)/4;o.c=s.a=(o.b+s.b)/2;return[n,a,o,s]},c=function(e,i,a,o,s){var l=e.length-1,c=0,h=e[0].a,f,d,p,m,v,g,y,b,_,x,w,T,M;for(f=0;f<l;f++){v=e[c];d=v.a;p=v.d;m=e[c+1].d;if(s){w=t[f];T=r[f];M=(T+w)*i*.25/(o?.5:n[f]||.5);g=p-(p-d)*(o?i*.5:w!==0?M/w:0);y=p+(m-p)*(o?i*.5:T!==0?M/T:0);b=p-(g+((y-g)*(w*3/(w+T)+.5)/4||0))}else{g=p-(p-d)*i*.5;y=p+(m-p)*i*.5;b=p-(g+y)/2}g+=b;y+=b;v.c=_=g;if(f!==0){v.b=h}else{v.b=h=v.a+(v.c-v.a)*.6}v.da=p-d;v.ca=_-d;v.ba=h-d;if(a){x=u(d,h,_,p);e.splice(c,1,x[0],x[1],x[2],x[3]);c+=4}else{c++}h=y}v=e[c];v.b=h;v.c=h+(v.d-h)*.4;v.da=v.d-v.a;v.ca=v.c-v.a;v.ba=h-v.a;if(a){x=u(v.a,h,v.c,v.d);e.splice(c,1,x[0],x[1],x[2],x[3])}},h=function(e,i,n,a){var o=[],l,u,c,h,f,d;if(a){e=[a].concat(e);u=e.length;while(--u>-1){if(typeof(d=e[u][i])==="string")if(d.charAt(1)==="="){e[u][i]=a[i]+Number(d.charAt(0)+d.substr(2))}}}l=e.length-2;if(l<0){o[0]=new s(e[0][i],0,0,e[0][i]);return o}for(u=0;u<l;u++){c=e[u][i];h=e[u+1][i];o[u]=new s(c,0,0,h);if(n){f=e[u+2][i];t[u]=(t[u]||0)+(h-c)*(h-c);r[u]=(r[u]||0)+(f-h)*(f-h)}}o[u]=new s(e[u][i],0,0,e[u+1][i]);return o},f=function(e,i,o,s,u,f){var d={},p=[],m=f||e[0],v,g,y,b,_,x,w,T;u=typeof u==="string"?","+u+",":l;if(i==null){i=1}for(g in e[0]){p.push(g)}if(e.length>1){T=e[e.length-1];w=true;v=p.length;while(--v>-1){g=p[v];if(Math.abs(m[g]-T[g])>.05){w=false;break}}if(w){e=e.concat();if(f){e.unshift(f)}e.push(e[1]);f=e[e.length-3]}}t.length=r.length=n.length=0;v=p.length;while(--v>-1){g=p[v];a[g]=u.indexOf(","+g+",")!==-1;d[g]=h(e,g,a[g],f)}v=t.length;while(--v>-1){t[v]=Math.sqrt(t[v]);r[v]=Math.sqrt(r[v])}if(!s){v=p.length;while(--v>-1){if(a[g]){y=d[p[v]];x=y.length-1;for(b=0;b<x;b++){_=y[b+1].da/r[b]+y[b].da/t[b]||0;n[b]=(n[b]||0)+_*_}}}v=n.length;while(--v>-1){n[v]=Math.sqrt(n[v])}}v=p.length;b=o?4:1;while(--v>-1){g=p[v];y=d[g];c(y,i,o,s,a[g]);if(w){y.splice(0,b);y.splice(y.length-b,b)}}return d},d=function(e,t,i){t=t||"soft";var r={},n=t==="cubic"?3:2,a=t==="soft",o=[],l,u,c,h,f,d,p,m,v,g,y;if(a&&i){e=[i].concat(e)}if(e==null||e.length<n+1){throw"invalid Bezier data"}for(v in e[0]){o.push(v)}d=o.length;while(--d>-1){v=o[d];r[v]=f=[];g=0;m=e.length;for(p=0;p<m;p++){l=i==null?e[p][v]:typeof(y=e[p][v])==="string"&&y.charAt(1)==="="?i[v]+Number(y.charAt(0)+y.substr(2)):Number(y);if(a)if(p>1)if(p<m-1){f[g++]=(l+f[g-2])/2}f[g++]=l}m=g-n+1;g=0;for(p=0;p<m;p+=n){l=f[p];u=f[p+1];c=f[p+2];h=n===2?0:f[p+3];f[g++]=y=n===3?new s(l,u,c,h):new s(l,(2*u+l)/3,(2*u+c)/3,c)}f.length=g}return r},p=function(e,t,i){var r=1/i,n=e.length,a,o,s,l,u,c,h,f,d,p,m;while(--n>-1){p=e[n];s=p.a;l=p.d-s;u=p.c-s;c=p.b-s;a=o=0;for(f=1;f<=i;f++){h=r*f;d=1-h;a=o-(o=(h*h*l+3*d*(h*u+d*c))*h);m=n*i+f-1;t[m]=(t[m]||0)+a*a}}},m=function(e,t){t=t>>0||6;var i=[],r=[],n=0,a=0,o=t-1,s=[],l=[],u,c,h,f;for(u in e){p(e[u],i,t)}h=i.length;for(c=0;c<h;c++){n+=Math.sqrt(i[c]);f=c%t;l[f]=n;if(f===o){a+=n;f=c/t>>0;s[f]=l;r[f]=a;n=0;l=[]}}return{length:a,lengths:r,segments:s}},v=i._gsDefine.plugin({propName:"bezier",priority:-1,version:"1.3.8",API:2,global:true,init:function(e,t,i){this._target=e;if(t instanceof Array){t={values:t}}this._func={};this._mod={};this._props=[];this._timeRes=t.timeResolution==null?6:parseInt(t.timeResolution,10);var r=t.values||[],n={},a=r[0],o=t.autoRotate||i.vars.orientToBezier,s,l,u,c,h;this._autoRotate=o?o instanceof Array?o:[["x","y","rotation",o===true?0:Number(o)||0]]:null;for(s in a){this._props.push(s)}u=this._props.length;while(--u>-1){s=this._props[u];this._overwriteProps.push(s);l=this._func[s]=typeof e[s]==="function";n[s]=!l?parseFloat(e[s]):e[s.indexOf("set")||typeof e["get"+s.substr(3)]!=="function"?s:"get"+s.substr(3)]();if(!h)if(n[s]!==r[0][s]){h=n}}this._beziers=t.type!=="cubic"&&t.type!=="quadratic"&&t.type!=="soft"?f(r,isNaN(t.curviness)?1:t.curviness,false,t.type==="thruBasic",t.correlate,h):d(r,t.type,n);this._segCount=this._beziers[s].length;if(this._timeRes){var p=m(this._beziers,this._timeRes);this._length=p.length;this._lengths=p.lengths;this._segments=p.segments;this._l1=this._li=this._s1=this._si=0;this._l2=this._lengths[0];this._curSeg=this._segments[0];this._s2=this._curSeg[0];this._prec=1/this._curSeg.length}if(o=this._autoRotate){this._initialRotations=[];if(!(o[0]instanceof Array)){this._autoRotate=o=[o]}u=o.length;while(--u>-1){for(c=0;c<3;c++){s=o[u][c];this._func[s]=typeof e[s]==="function"?e[s.indexOf("set")||typeof e["get"+s.substr(3)]!=="function"?s:"get"+s.substr(3)]:false}s=o[u][2];this._initialRotations[u]=(this._func[s]?this._func[s].call(this._target):this._target[s])||0;this._overwriteProps.push(s)}}this._startRatio=i.vars.runBackwards?1:0;return true},set:function(t){var i=this._segCount,r=this._func,n=this._target,a=t!==this._startRatio,o,s,l,u,c,h,f,d,p,m;if(!this._timeRes){o=t<0?0:t>=1?i-1:i*t>>0;h=(t-o*(1/i))*i}else{p=this._lengths;m=this._curSeg;t*=this._length;l=this._li;if(t>this._l2&&l<i-1){d=i-1;while(l<d&&(this._l2=p[++l])<=t){}this._l1=p[l-1];this._li=l;this._curSeg=m=this._segments[l];this._s2=m[this._s1=this._si=0]}else if(t<this._l1&&l>0){while(l>0&&(this._l1=p[--l])>=t){}if(l===0&&t<this._l1){this._l1=0}else{l++}this._l2=p[l];this._li=l;this._curSeg=m=this._segments[l];this._s1=m[(this._si=m.length-1)-1]||0;this._s2=m[this._si]}o=l;t-=this._l1;l=this._si;if(t>this._s2&&l<m.length-1){d=m.length-1;while(l<d&&(this._s2=m[++l])<=t){}this._s1=m[l-1];this._si=l}else if(t<this._s1&&l>0){while(l>0&&(this._s1=m[--l])>=t){}if(l===0&&t<this._s1){this._s1=0}else{l++}this._s2=m[l];this._si=l}h=(l+(t-this._s1)/(this._s2-this._s1))*this._prec||0}s=1-h;l=this._props.length;while(--l>-1){u=this._props[l];c=this._beziers[u][o];f=(h*h*c.da+3*s*(h*c.ca+s*c.ba))*h+c.a;if(this._mod[u]){f=this._mod[u](f,n)}if(r[u]){n[u](f)}else{n[u]=f}}if(this._autoRotate){var v=this._autoRotate,g,y,b,_,x,w,T;l=v.length;while(--l>-1){u=v[l][2];w=v[l][3]||0;T=v[l][4]===true?1:e;c=this._beziers[v[l][0]];g=this._beziers[v[l][1]];if(c&&g){c=c[o];g=g[o];y=c.a+(c.b-c.a)*h;_=c.b+(c.c-c.b)*h;y+=(_-y)*h;_+=(c.c+(c.d-c.c)*h-_)*h;b=g.a+(g.b-g.a)*h;x=g.b+(g.c-g.b)*h;b+=(x-b)*h;x+=(g.c+(g.d-g.c)*h-x)*h;f=a?Math.atan2(x-b,_-y)*T+w:this._initialRotations[l];if(this._mod[u]){f=this._mod[u](f,n)}if(r[u]){n[u](f)}else{n[u]=f}}}}}}),g=v.prototype;v.bezierThrough=f;v.cubicToQuadratic=u;v._autoCSS=true;v.quadraticToCubic=function(e,t,i){return new s(e,(2*t+e)/3,(2*t+i)/3,i)};v._cssRegister=function(){var e=o.CSSPlugin;if(!e){return}var t=e._internals,i=t._parseToProxy,r=t._setPluginRatio,n=t.CSSPropTween;t._registerComplexSpecialProp("bezier",{parser:function(e,t,a,o,s,l){if(t instanceof Array){t={values:t}}l=new v;var u=t.values,c=u.length-1,h=[],f={},d,p,m;if(c<0){return s}for(d=0;d<=c;d++){m=i(e,u[d],o,s,l,c!==d);h[d]=m.end}for(p in t){f[p]=t[p]}f.values=h;s=new n(e,"bezier",0,0,m.pt,2);s.data=m;s.plugin=l;s.setRatio=r;if(f.autoRotate===0){f.autoRotate=true}if(f.autoRotate&&!(f.autoRotate instanceof Array)){d=f.autoRotate===true?0:Number(f.autoRotate);f.autoRotate=m.end.left!=null?[["left","top","rotation",d,false]]:m.end.x!=null?[["x","y","rotation",d,false]]:false}if(f.autoRotate){if(!o._transform){o._enableTransforms(false)}m.autoRotate=o._target._gsTransform;m.proxy.rotation=m.autoRotate.rotation||0;o._overwriteProps.push("rotation")}l._onInitTween(m.proxy,f,o._tween);return s}})};g._mod=function(e){var t=this._overwriteProps,i=t.length,r;while(--i>-1){r=e[t[i]];if(r&&typeof r==="function"){this._mod[t[i]]=r}}};g._kill=function(e){var t=this._props,i,r;for(i in this._beziers){if(i in e){delete this._beziers[i];delete this._func[i];r=t.length;while(--r>-1){if(t[r]===i){t.splice(r,1)}}}}t=this._autoRotate;if(t){r=t.length;while(--r>-1){if(e[t[r][2]]){t.splice(r,1)}}}return this._super._kill.call(this,e)}})();i._gsDefine("plugins.CSSPlugin",["plugins.TweenPlugin","TweenLite"],function(e,t){var r=function(){e.call(this,"css");this._overwriteProps.length=0;this.setRatio=r.prototype.setRatio},n=i._gsDefine.globals,a,o,s,l,u={},c=r.prototype=new e("css");c.constructor=r;r.version="1.20.3";r.API=2;r.defaultTransformPerspective=0;r.defaultSkewType="compensated";r.defaultSmoothOrigin=true;c="px";r.suffixMap={top:c,right:c,bottom:c,left:c,width:c,height:c,fontSize:c,padding:c,margin:c,perspective:c,lineHeight:""};var h=/(?:\-|\.|\b)(\d|\.|e\-)+/g,f=/(?:\d|\-\d|\.\d|\-\.\d|\+=\d|\-=\d|\+=.\d|\-=\.\d)+/g,d=/(?:\+=|\-=|\-|\b)[\d\-\.]+[a-zA-Z0-9]*(?:%|\b)/gi,p=/(?![+-]?\d*\.?\d+|[+-]|e[+-]\d+)[^0-9]/g,m=/(?:\d|\-|\+|=|#|\.)*/g,v=/opacity *= *([^)]*)/i,g=/opacity:([^;]*)/i,y=/alpha\(opacity *=.+?\)/i,b=/^(rgb|hsl)/,_=/([A-Z])/g,x=/-([a-z])/gi,w=/(^(?:url\(\"|url\())|(?:(\"\))$|\)$)/gi,T=function(e,t){return t.toUpperCase()},M=/(?:Left|Right|Width)/i,S=/(M11|M12|M21|M22)=[\d\-\.e]+/gi,E=/progid\:DXImageTransform\.Microsoft\.Matrix\(.+?\)/i,P=/,(?=[^\)]*(?:\(|$))/gi,A=/[\s,\(]/i,C=Math.PI/180,L=180/Math.PI,R={},O={style:{}},I=i.document||{createElement:function(){return O}},D=function(e,t){return I.createElementNS?I.createElementNS(t||"http://www.w3.org/1999/xhtml",e):I.createElement(e)},B=D("div"),G=D("img"),k=r._internals={_specialProps:u},N=(i.navigator||{}).userAgent||"",U,F,H,z,V,j,W=function(){var e=N.indexOf("Android"),t=D("a");H=N.indexOf("Safari")!==-1&&N.indexOf("Chrome")===-1&&(e===-1||parseFloat(N.substr(e+8,2))>3);V=H&&parseFloat(N.substr(N.indexOf("Version/")+8,2))<6;z=N.indexOf("Firefox")!==-1;if(/MSIE ([0-9]{1,}[\.0-9]{0,})/.exec(N)||/Trident\/.*rv:([0-9]{1,}[\.0-9]{0,})/.exec(N)){j=parseFloat(RegExp.$1)}if(!t){return false}t.style.cssText="top:1px;opacity:.55;";return/^0.55/.test(t.style.opacity)}(),X=function(e){return v.test(typeof e==="string"?e:(e.currentStyle?e.currentStyle.filter:e.style.filter)||"")?parseFloat(RegExp.$1)/100:1},Y=function(e){if(i.console){console.log(e)}},q,Z,K="",$="",Q=function(e,t){t=t||B;var i=t.style,r,n;if(i[e]!==undefined){return e}e=e.charAt(0).toUpperCase()+e.substr(1);r=["O","Moz","ms","Ms","Webkit"];n=5;while(--n>-1&&i[r[n]+e]===undefined){}if(n>=0){$=n===3?"ms":r[n];K="-"+$.toLowerCase()+"-";return $+e}return null},J=I.defaultView?I.defaultView.getComputedStyle:function(){},ee=r.getStyle=function(e,t,i,r,n){var a;if(!W)if(t==="opacity"){return X(e)}if(!r&&e.style[t]){a=e.style[t]}else if(i=i||J(e)){a=i[t]||i.getPropertyValue(t)||i.getPropertyValue(t.replace(_,"-$1").toLowerCase())}else if(e.currentStyle){a=e.currentStyle[t]}return n!=null&&(!a||a==="none"||a==="auto"||a==="auto auto")?n:a},te=k.convertToPixels=function(e,i,n,a,o){if(a==="px"||!a&&i!=="lineHeight"){return n}if(a==="auto"||!n){return 0}var s=M.test(i),l=e,u=B.style,c=n<0,h=n===1,f,d,p;if(c){n=-n}if(h){n*=100}if(i==="lineHeight"&&!a){d=J(e).lineHeight;e.style.lineHeight=n;f=parseFloat(J(e).lineHeight);e.style.lineHeight=d}else if(a==="%"&&i.indexOf("border")!==-1){f=n/100*(s?e.clientWidth:e.clientHeight)}else{u.cssText="border:0 solid red;position:"+ee(e,"position")+";line-height:0;";if(a==="%"||!l.appendChild||a.charAt(0)==="v"||a==="rem"){l=e.parentNode||I.body;if(ee(l,"display").indexOf("flex")!==-1){u.position="absolute"}d=l._gsCache;p=t.ticker.frame;if(d&&s&&d.time===p){return d.width*n/100}u[s?"width":"height"]=n+a}else{u[s?"borderLeftWidth":"borderTopWidth"]=n+a}l.appendChild(B);f=parseFloat(B[s?"offsetWidth":"offsetHeight"]);l.removeChild(B);if(s&&a==="%"&&r.cacheWidths!==false){d=l._gsCache=l._gsCache||{};d.time=p;d.width=f/n*100}if(f===0&&!o){f=te(e,i,n,a,true)}}if(h){f/=100}return c?-f:f},ie=k.calculateOffset=function(e,t,i){if(ee(e,"position",i)!=="absolute"){return 0}var r=t==="left"?"Left":"Top",n=ee(e,"margin"+r,i);return e["offset"+r]-(te(e,t,parseFloat(n),n.replace(m,""))||0)},re=function(e,t){var i={},r,n,a;if(t=t||J(e,null)){if(r=t.length){while(--r>-1){a=t[r];if(a.indexOf("-transform")===-1||Re===a){i[a.replace(x,T)]=t.getPropertyValue(a)}}}else{for(r in t){if(r.indexOf("Transform")===-1||Le===r){i[r]=t[r]}}}}else if(t=e.currentStyle||e.style){for(r in t){if(typeof r==="string"&&i[r]===undefined){i[r.replace(x,T)]=t[r]}}}if(!W){i.opacity=X(e)}n=Xe(e,t,false);i.rotation=n.rotation;i.skewX=n.skewX;i.scaleX=n.scaleX;i.scaleY=n.scaleY;i.x=n.x;i.y=n.y;if(Ie){i.z=n.z;i.rotationX=n.rotationX;i.rotationY=n.rotationY;i.scaleZ=n.scaleZ}if(i.filters){delete i.filters}return i},ne=function(e,t,i,r,n){var a={},o=e.style,s,l,u;for(l in i){if(l!=="cssText")if(l!=="length")if(isNaN(l))if(t[l]!==(s=i[l])||n&&n[l])if(l.indexOf("Origin")===-1)if(typeof s==="number"||typeof s==="string"){a[l]=s==="auto"&&(l==="left"||l==="top")?ie(e,l):(s===""||s==="auto"||s==="none")&&typeof t[l]==="string"&&t[l].replace(p,"")!==""?0:s;if(o[l]!==undefined){u=new _e(o,l,o[l],u)}}}if(r){for(l in r){if(l!=="className"){a[l]=r[l]}}}return{difs:a,firstMPT:u}},ae={width:["Left","Right"],height:["Top","Bottom"]},oe=["marginLeft","marginRight","marginTop","marginBottom"],se=function(e,t,i){if((e.nodeName+"").toLowerCase()==="svg"){return(i||J(e))[t]||0}else if(e.getCTM&&Ve(e)){return e.getBBox()[t]||0}var r=parseFloat(t==="width"?e.offsetWidth:e.offsetHeight),n=ae[t],a=n.length;i=i||J(e,null);while(--a>-1){r-=parseFloat(ee(e,"padding"+n[a],i,true))||0;r-=parseFloat(ee(e,"border"+n[a]+"Width",i,true))||0}return r},le=function(e,t){if(e==="contain"||e==="auto"||e==="auto auto"){return e+" "}if(e==null||e===""){e="0 0"}var i=e.split(" "),r=e.indexOf("left")!==-1?"0%":e.indexOf("right")!==-1?"100%":i[0],n=e.indexOf("top")!==-1?"0%":e.indexOf("bottom")!==-1?"100%":i[1],a;if(i.length>3&&!t){i=e.split(", ").join(",").split(",");e=[];for(a=0;a<i.length;a++){e.push(le(i[a]))}return e.join(",")}if(n==null){n=r==="center"?"50%":"0"}else if(n==="center"){n="50%"}if(r==="center"||isNaN(parseFloat(r))&&(r+"").indexOf("=")===-1){r="50%"}e=r+" "+n+(i.length>2?" "+i[2]:"");if(t){t.oxp=r.indexOf("%")!==-1;t.oyp=n.indexOf("%")!==-1;t.oxr=r.charAt(1)==="=";t.oyr=n.charAt(1)==="=";t.ox=parseFloat(r.replace(p,""));t.oy=parseFloat(n.replace(p,""));t.v=e}return t||e},ue=function(e,t){if(typeof e==="function"){e=e(Z,q)}return typeof e==="string"&&e.charAt(1)==="="?parseInt(e.charAt(0)+"1",10)*parseFloat(e.substr(2)):parseFloat(e)-parseFloat(t)||0},ce=function(e,t){
if(typeof e==="function"){e=e(Z,q)}return e==null?t:typeof e==="string"&&e.charAt(1)==="="?parseInt(e.charAt(0)+"1",10)*parseFloat(e.substr(2))+t:parseFloat(e)||0},he=function(e,t,i,r){var n=1e-6,a,o,s,l,u;if(typeof e==="function"){e=e(Z,q)}if(e==null){l=t}else if(typeof e==="number"){l=e}else{a=360;o=e.split("_");u=e.charAt(1)==="=";s=(u?parseInt(e.charAt(0)+"1",10)*parseFloat(o[0].substr(2)):parseFloat(o[0]))*(e.indexOf("rad")===-1?1:L)-(u?0:t);if(o.length){if(r){r[i]=t+s}if(e.indexOf("short")!==-1){s=s%a;if(s!==s%(a/2)){s=s<0?s+a:s-a}}if(e.indexOf("_cw")!==-1&&s<0){s=(s+a*9999999999)%a-(s/a|0)*a}else if(e.indexOf("ccw")!==-1&&s>0){s=(s-a*9999999999)%a-(s/a|0)*a}}l=t+s}if(l<n&&l>-n){l=0}return l},fe={aqua:[0,255,255],lime:[0,255,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,255],navy:[0,0,128],white:[255,255,255],fuchsia:[255,0,255],olive:[128,128,0],yellow:[255,255,0],orange:[255,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[255,0,0],pink:[255,192,203],cyan:[0,255,255],transparent:[255,255,255,0]},de=function(e,t,i){e=e<0?e+1:e>1?e-1:e;return(e*6<1?t+(i-t)*e*6:e<.5?i:e*3<2?t+(i-t)*(2/3-e)*6:t)*255+.5|0},pe=r.parseColor=function(e,t){var i,r,n,a,o,s,l,u,c,d,p;if(!e){i=fe.black}else if(typeof e==="number"){i=[e>>16,e>>8&255,e&255]}else{if(e.charAt(e.length-1)===","){e=e.substr(0,e.length-1)}if(fe[e]){i=fe[e]}else if(e.charAt(0)==="#"){if(e.length===4){r=e.charAt(1);n=e.charAt(2);a=e.charAt(3);e="#"+r+r+n+n+a+a}e=parseInt(e.substr(1),16);i=[e>>16,e>>8&255,e&255]}else if(e.substr(0,3)==="hsl"){i=p=e.match(h);if(!t){o=Number(i[0])%360/360;s=Number(i[1])/100;l=Number(i[2])/100;n=l<=.5?l*(s+1):l+s-l*s;r=l*2-n;if(i.length>3){i[3]=Number(i[3])}i[0]=de(o+1/3,r,n);i[1]=de(o,r,n);i[2]=de(o-1/3,r,n)}else if(e.indexOf("=")!==-1){return e.match(f)}}else{i=e.match(h)||fe.transparent}i[0]=Number(i[0]);i[1]=Number(i[1]);i[2]=Number(i[2]);if(i.length>3){i[3]=Number(i[3])}}if(t&&!p){r=i[0]/255;n=i[1]/255;a=i[2]/255;u=Math.max(r,n,a);c=Math.min(r,n,a);l=(u+c)/2;if(u===c){o=s=0}else{d=u-c;s=l>.5?d/(2-u-c):d/(u+c);o=u===r?(n-a)/d+(n<a?6:0):u===n?(a-r)/d+2:(r-n)/d+4;o*=60}i[0]=o+.5|0;i[1]=s*100+.5|0;i[2]=l*100+.5|0}return i},me=function(e,t){var i=e.match(ve)||[],r=0,n="",a,o,s;if(!i.length){return e}for(a=0;a<i.length;a++){o=i[a];s=e.substr(r,e.indexOf(o,r)-r);r+=s.length+o.length;o=pe(o,t);if(o.length===3){o.push(1)}n+=s+(t?"hsla("+o[0]+","+o[1]+"%,"+o[2]+"%,"+o[3]:"rgba("+o.join(","))+")"}return n+e.substr(r)},ve="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3}){1,2}\\b";for(c in fe){ve+="|"+c+"\\b"}ve=new RegExp(ve+")","gi");r.colorStringFilter=function(e){var t=e[0]+" "+e[1],i;if(ve.test(t)){i=t.indexOf("hsl(")!==-1||t.indexOf("hsla(")!==-1;e[0]=me(e[0],i);e[1]=me(e[1],i)}ve.lastIndex=0};if(!t.defaultStringFilter){t.defaultStringFilter=r.colorStringFilter}var ge=function(e,t,i,r){if(e==null){return function(e){return e}}var n=t?(e.match(ve)||[""])[0]:"",a=e.split(n).join("").match(d)||[],o=e.substr(0,e.indexOf(a[0])),s=e.charAt(e.length-1)===")"?")":"",l=e.indexOf(" ")!==-1?" ":",",u=a.length,c=u>0?a[0].replace(h,""):"",f;if(!u){return function(e){return e}}if(t){f=function(e){var t,h,p,m;if(typeof e==="number"){e+=c}else if(r&&P.test(e)){m=e.replace(P,"|").split("|");for(p=0;p<m.length;p++){m[p]=f(m[p])}return m.join(",")}t=(e.match(ve)||[n])[0];h=e.split(t).join("").match(d)||[];p=h.length;if(u>p--){while(++p<u){h[p]=i?h[(p-1)/2|0]:a[p]}}return o+h.join(l)+l+t+s+(e.indexOf("inset")!==-1?" inset":"")};return f}f=function(e){var t,n,h;if(typeof e==="number"){e+=c}else if(r&&P.test(e)){n=e.replace(P,"|").split("|");for(h=0;h<n.length;h++){n[h]=f(n[h])}return n.join(",")}t=e.match(d)||[];h=t.length;if(u>h--){while(++h<u){t[h]=i?t[(h-1)/2|0]:a[h]}}return o+t.join(l)+s};return f},ye=function(e){e=e.split(",");return function(t,i,r,n,a,o,s){var l=(i+"").split(" "),u;s={};for(u=0;u<4;u++){s[e[u]]=l[u]=l[u]||l[(u-1)/2>>0]}return n.parse(t,s,a,o)}},be=k._setPluginRatio=function(e){this.plugin.setRatio(e);var t=this.data,i=t.proxy,r=t.firstMPT,n=1e-6,a,o,s,l,u;while(r){a=i[r.v];if(r.r){a=Math.round(a)}else if(a<n&&a>-n){a=0}r.t[r.p]=a;r=r._next}if(t.autoRotate){t.autoRotate.rotation=t.mod?t.mod(i.rotation,this.t):i.rotation}if(e===1||e===0){r=t.firstMPT;u=e===1?"e":"b";while(r){o=r.t;if(!o.type){o[u]=o.s+o.xs0}else if(o.type===1){l=o.xs0+o.s+o.xs1;for(s=1;s<o.l;s++){l+=o["xn"+s]+o["xs"+(s+1)]}o[u]=l}r=r._next}}},_e=function(e,t,i,r,n){this.t=e;this.p=t;this.v=i;this.r=n;if(r){r._prev=this;this._next=r}},xe=k._parseToProxy=function(e,t,i,r,n,a){var o=r,s={},l={},u=i._transform,c=R,h,f,d,p,m;i._transform=null;R=t;r=m=i.parse(e,t,r,n);R=c;if(a){i._transform=u;if(o){o._prev=null;if(o._prev){o._prev._next=null}}}while(r&&r!==o){if(r.type<=1){f=r.p;l[f]=r.s+r.c;s[f]=r.s;if(!a){p=new _e(r,"s",f,p,r.r);r.c=0}if(r.type===1){h=r.l;while(--h>0){d="xn"+h;f=r.p+"_"+d;l[f]=r.data[d];s[f]=r[d];if(!a){p=new _e(r,d,f,p,r.rxp[d])}}}}r=r._next}return{proxy:s,end:l,firstMPT:p,pt:m}},we=k.CSSPropTween=function(e,t,i,r,n,o,s,u,c,h,f){this.t=e;this.p=t;this.s=i;this.c=r;this.n=s||t;if(!(e instanceof we)){l.push(this.n)}this.r=u;this.type=o||0;if(c){this.pr=c;a=true}this.b=h===undefined?i:h;this.e=f===undefined?i+r:f;if(n){this._next=n;n._prev=this}},Te=function(e,t,i,r,n,a){var o=new we(e,t,i,r-i,n,-1,a);o.b=i;o.e=o.xs0=r;return o},Me=r.parseComplex=function(e,t,i,n,a,o,s,l,u,c){i=i||o||"";if(typeof n==="function"){n=n(Z,q)}s=new we(e,t,0,0,s,c?2:1,null,false,l,i,n);n+="";if(a&&ve.test(n+i)){n=[i,n];r.colorStringFilter(n);i=n[0];n=n[1]}var d=i.split(", ").join(",").split(" "),p=n.split(", ").join(",").split(" "),m=d.length,v=U!==false,g,y,b,_,x,w,T,M,S,E,A,C,L;if(n.indexOf(",")!==-1||i.indexOf(",")!==-1){if((n+i).indexOf("rgb")!==-1||(n+i).indexOf("hsl")!==-1){d=d.join(" ").replace(P,", ").split(" ");p=p.join(" ").replace(P,", ").split(" ")}else{d=d.join(" ").split(",").join(", ").split(" ");p=p.join(" ").split(",").join(", ").split(" ")}m=d.length}if(m!==p.length){d=(o||"").split(" ");m=d.length}s.plugin=u;s.setRatio=c;ve.lastIndex=0;for(g=0;g<m;g++){_=d[g];x=p[g];M=parseFloat(_);if(M||M===0){s.appendXtra("",M,ue(x,M),x.replace(f,""),v&&x.indexOf("px")!==-1,true)}else if(a&&ve.test(_)){C=x.indexOf(")")+1;C=")"+(C?x.substr(C):"");L=x.indexOf("hsl")!==-1&&W;E=x;_=pe(_,L);x=pe(x,L);S=_.length+x.length>6;if(S&&!W&&x[3]===0){s["xs"+s.l]+=s.l?" transparent":"transparent";s.e=s.e.split(p[g]).join("transparent")}else{if(!W){S=false}if(L){s.appendXtra(E.substr(0,E.indexOf("hsl"))+(S?"hsla(":"hsl("),_[0],ue(x[0],_[0]),",",false,true).appendXtra("",_[1],ue(x[1],_[1]),"%,",false).appendXtra("",_[2],ue(x[2],_[2]),S?"%,":"%"+C,false)}else{s.appendXtra(E.substr(0,E.indexOf("rgb"))+(S?"rgba(":"rgb("),_[0],x[0]-_[0],",",true,true).appendXtra("",_[1],x[1]-_[1],",",true).appendXtra("",_[2],x[2]-_[2],S?",":C,true)}if(S){_=_.length<4?1:_[3];s.appendXtra("",_,(x.length<4?1:x[3])-_,C,false)}}ve.lastIndex=0}else{w=_.match(h);if(!w){s["xs"+s.l]+=s.l||s["xs"+s.l]?" "+x:x}else{T=x.match(f);if(!T||T.length!==w.length){return s}b=0;for(y=0;y<w.length;y++){A=w[y];E=_.indexOf(A,b);s.appendXtra(_.substr(b,E-b),Number(A),ue(T[y],A),"",v&&_.substr(E+A.length,2)==="px",y===0);b=E+A.length}s["xs"+s.l]+=_.substr(b)}}}if(n.indexOf("=")!==-1)if(s.data){C=s.xs0+s.data.s;for(g=1;g<s.l;g++){C+=s["xs"+g]+s.data["xn"+g]}s.e=C+s["xs"+g]}if(!s.l){s.type=-1;s.xs0=s.e}return s.xfirst||s},Se=9;c=we.prototype;c.l=c.pr=0;while(--Se>0){c["xn"+Se]=0;c["xs"+Se]=""}c.xs0="";c._next=c._prev=c.xfirst=c.data=c.plugin=c.setRatio=c.rxp=null;c.appendXtra=function(e,t,i,r,n,a){var o=this,s=o.l;o["xs"+s]+=a&&(s||o["xs"+s])?" "+e:e||"";if(!i)if(s!==0&&!o.plugin){o["xs"+s]+=t+(r||"");return o}o.l++;o.type=o.setRatio?2:1;o["xs"+o.l]=r||"";if(s>0){o.data["xn"+s]=t+i;o.rxp["xn"+s]=n;o["xn"+s]=t;if(!o.plugin){o.xfirst=new we(o,"xn"+s,t,i,o.xfirst||o,0,o.n,n,o.pr);o.xfirst.xs0=0}return o}o.data={s:t+i};o.rxp={};o.s=t;o.c=i;o.r=n;return o};var Ee=function(e,t){t=t||{};this.p=t.prefix?Q(e)||e:e;u[e]=u[this.p]=this;this.format=t.formatter||ge(t.defaultValue,t.color,t.collapsible,t.multi);if(t.parser){this.parse=t.parser}this.clrs=t.color;this.multi=t.multi;this.keyword=t.keyword;this.dflt=t.defaultValue;this.pr=t.priority||0},Pe=k._registerComplexSpecialProp=function(e,t,i){if(typeof t!=="object"){t={parser:i}}var r=e.split(","),n=t.defaultValue,a,o;i=i||[n];for(a=0;a<r.length;a++){t.prefix=a===0&&t.prefix;t.defaultValue=i[a]||n;o=new Ee(r[a],t)}},Ae=k._registerPluginProp=function(e){if(!u[e]){var t=e.charAt(0).toUpperCase()+e.substr(1)+"Plugin";Pe(e,{parser:function(e,i,r,a,o,s,l){var c=n.com.greensock.plugins[t];if(!c){Y("Error: "+t+" js file not loaded.");return o}c._cssRegister();return u[r].parse(e,i,r,a,o,s,l)}})}};c=Ee.prototype;c.parseComplex=function(e,t,i,r,n,a){var o=this.keyword,s,l,u,c,h,f;if(this.multi)if(P.test(i)||P.test(t)){l=t.replace(P,"|").split("|");u=i.replace(P,"|").split("|")}else if(o){l=[t];u=[i]}if(u){c=u.length>l.length?u.length:l.length;for(s=0;s<c;s++){t=l[s]=l[s]||this.dflt;i=u[s]=u[s]||this.dflt;if(o){h=t.indexOf(o);f=i.indexOf(o);if(h!==f){if(f===-1){l[s]=l[s].split(o).join("")}else if(h===-1){l[s]+=" "+o}}}}t=l.join(", ");i=u.join(", ")}return Me(e,this.p,t,i,this.clrs,this.dflt,r,this.pr,n,a)};c.parse=function(e,t,i,r,n,a,o){return this.parseComplex(e.style,this.format(ee(e,this.p,s,false,this.dflt)),this.format(t),n,a)};r.registerSpecialProp=function(e,t,i){Pe(e,{parser:function(e,r,n,a,o,s,l){var u=new we(e,n,0,0,o,2,n,false,i);u.plugin=s;u.setRatio=t(e,r,a._tween,n);return u},priority:i})};r.useSVGTransformAttr=true;var Ce="scaleX,scaleY,scaleZ,x,y,z,skewX,skewY,rotation,rotationX,rotationY,perspective,xPercent,yPercent".split(","),Le=Q("transform"),Re=K+"transform",Oe=Q("transformOrigin"),Ie=Q("perspective")!==null,De=k.Transform=function(){this.perspective=parseFloat(r.defaultTransformPerspective)||0;this.force3D=r.defaultForce3D===false||!Ie?false:r.defaultForce3D||"auto"},Be=i.SVGElement,Ge,ke=function(e,t,i){var r=I.createElementNS("http://www.w3.org/2000/svg",e),n=/([a-z])([A-Z])/g,a;for(a in i){r.setAttributeNS(null,a.replace(n,"$1-$2").toLowerCase(),i[a])}t.appendChild(r);return r},Ne=I.documentElement||{},Ue=function(){var e=j||/Android/i.test(N)&&!i.chrome,t,r,n;if(I.createElementNS&&!e){t=ke("svg",Ne);r=ke("rect",t,{width:100,height:50,x:100});n=r.getBoundingClientRect().width;r.style[Oe]="50% 50%";r.style[Le]="scaleX(0.5)";e=n===r.getBoundingClientRect().width&&!(z&&Ie);Ne.removeChild(t)}return e}(),Fe=function(e,t,i,n,a,o){var s=e._gsTransform,l=We(e,true),u,c,h,f,d,p,m,v,g,y,b,_,x,w;if(s){x=s.xOrigin;w=s.yOrigin}if(!n||(u=n.split(" ")).length<2){m=e.getBBox();if(m.x===0&&m.y===0&&m.width+m.height===0){m={x:parseFloat(e.hasAttribute("x")?e.getAttribute("x"):e.hasAttribute("cx")?e.getAttribute("cx"):0)||0,y:parseFloat(e.hasAttribute("y")?e.getAttribute("y"):e.hasAttribute("cy")?e.getAttribute("cy"):0)||0,width:0,height:0}}t=le(t).split(" ");u=[(t[0].indexOf("%")!==-1?parseFloat(t[0])/100*m.width:parseFloat(t[0]))+m.x,(t[1].indexOf("%")!==-1?parseFloat(t[1])/100*m.height:parseFloat(t[1]))+m.y]}i.xOrigin=f=parseFloat(u[0]);i.yOrigin=d=parseFloat(u[1]);if(n&&l!==je){p=l[0];m=l[1];v=l[2];g=l[3];y=l[4];b=l[5];_=p*g-m*v;if(_){c=f*(g/_)+d*(-v/_)+(v*b-g*y)/_;h=f*(-m/_)+d*(p/_)-(p*b-m*y)/_;f=i.xOrigin=u[0]=c;d=i.yOrigin=u[1]=h}}if(s){if(o){i.xOffset=s.xOffset;i.yOffset=s.yOffset;s=i}if(a||a!==false&&r.defaultSmoothOrigin!==false){c=f-x;h=d-w;s.xOffset+=c*l[0]+h*l[2]-c;s.yOffset+=c*l[1]+h*l[3]-h}else{s.xOffset=s.yOffset=0}}if(!o){e.setAttribute("data-svg-origin",u.join(" "))}},He=function(e){var t=D("svg",this.ownerSVGElement&&this.ownerSVGElement.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),i=this.parentNode,r=this.nextSibling,n=this.style.cssText,a;Ne.appendChild(t);t.appendChild(this);this.style.display="block";if(e){try{a=this.getBBox();this._originalGetBBox=this.getBBox;this.getBBox=He}catch(e){}}else if(this._originalGetBBox){a=this._originalGetBBox()}if(r){i.insertBefore(this,r)}else{i.appendChild(this)}Ne.removeChild(t);this.style.cssText=n;return a},ze=function(e){try{return e.getBBox()}catch(t){return He.call(e,true)}},Ve=function(e){return!!(Be&&e.getCTM&&(!e.parentNode||e.ownerSVGElement)&&ze(e))},je=[1,0,0,1,0,0],We=function(e,t){var i=e._gsTransform||new De,r=1e5,n=e.style,a,o,s,l,u,c;if(Le){o=ee(e,Re,null,true)}else if(e.currentStyle){o=e.currentStyle.filter.match(S);o=o&&o.length===4?[o[0].substr(4),Number(o[2].substr(4)),Number(o[1].substr(4)),o[3].substr(4),i.x||0,i.y||0].join(","):""}a=!o||o==="none"||o==="matrix(1, 0, 0, 1, 0, 0)";if(Le&&((c=!J(e)||J(e).display==="none")||!e.parentNode)){if(c){l=n.display;n.display="block"}if(!e.parentNode){u=1;Ne.appendChild(e)}o=ee(e,Re,null,true);a=!o||o==="none"||o==="matrix(1, 0, 0, 1, 0, 0)";if(l){n.display=l}else if(c){Ke(n,"display")}if(u){Ne.removeChild(e)}}if(i.svg||e.getCTM&&Ve(e)){if(a&&(n[Le]+"").indexOf("matrix")!==-1){o=n[Le];a=0}s=e.getAttribute("transform");if(a&&s){if(s.indexOf("matrix")!==-1){o=s;a=0}else if(s.indexOf("translate")!==-1){o="matrix(1,0,0,1,"+s.match(/(?:\-|\b)[\d\-\.e]+\b/gi).join(",")+")";a=0}}}if(a){return je}s=(o||"").match(h)||[];Se=s.length;while(--Se>-1){l=Number(s[Se]);s[Se]=(u=l-(l|=0))?(u*r+(u<0?-.5:.5)|0)/r+l:l}return t&&s.length>6?[s[0],s[1],s[4],s[5],s[12],s[13]]:s},Xe=k.getTransform=function(e,i,n,a){if(e._gsTransform&&n&&!a){return e._gsTransform}var o=n?e._gsTransform||new De:new De,s=o.scaleX<0,l=2e-5,u=1e5,c=Ie?parseFloat(ee(e,Oe,i,false,"0 0 0").split(" ")[2])||o.zOrigin||0:0,h=parseFloat(r.defaultTransformPerspective)||0,f,d,p,m,v,g;o.svg=!!(e.getCTM&&Ve(e));if(o.svg){Fe(e,ee(e,Oe,i,false,"50% 50%")+"",o,e.getAttribute("data-svg-origin"));Ge=r.useSVGTransformAttr||Ue}f=We(e);if(f!==je){if(f.length===16){var y=f[0],b=f[1],_=f[2],x=f[3],w=f[4],T=f[5],M=f[6],S=f[7],E=f[8],P=f[9],A=f[10],C=f[12],R=f[13],O=f[14],I=f[11],D=Math.atan2(M,A),B,G,k,N,U,F;if(o.zOrigin){O=-o.zOrigin;C=E*O-f[12];R=P*O-f[13];O=A*O+o.zOrigin-f[14]}o.rotationX=D*L;if(D){U=Math.cos(-D);F=Math.sin(-D);B=w*U+E*F;G=T*U+P*F;k=M*U+A*F;E=w*-F+E*U;P=T*-F+P*U;A=M*-F+A*U;I=S*-F+I*U;w=B;T=G;M=k}D=Math.atan2(-_,A);o.rotationY=D*L;if(D){U=Math.cos(-D);F=Math.sin(-D);B=y*U-E*F;G=b*U-P*F;k=_*U-A*F;P=b*F+P*U;A=_*F+A*U;I=x*F+I*U;y=B;b=G;_=k}D=Math.atan2(b,y);o.rotation=D*L;if(D){U=Math.cos(D);F=Math.sin(D);B=y*U+b*F;G=w*U+T*F;k=E*U+P*F;b=b*U-y*F;T=T*U-w*F;P=P*U-E*F;y=B;w=G;E=k}if(o.rotationX&&Math.abs(o.rotationX)+Math.abs(o.rotation)>359.9){o.rotationX=o.rotation=0;o.rotationY=180-o.rotationY}D=Math.atan2(w,T);o.scaleX=(Math.sqrt(y*y+b*b+_*_)*u+.5|0)/u;o.scaleY=(Math.sqrt(T*T+M*M)*u+.5|0)/u;o.scaleZ=(Math.sqrt(E*E+P*P+A*A)*u+.5|0)/u;y/=o.scaleX;w/=o.scaleY;b/=o.scaleX;T/=o.scaleY;if(Math.abs(D)>l){o.skewX=D*L;w=0;if(o.skewType!=="simple"){o.scaleY*=1/Math.cos(D)}}else{o.skewX=0}o.perspective=I?1/(I<0?-I:I):0;o.x=C;o.y=R;o.z=O;if(o.svg){o.x-=o.xOrigin-(o.xOrigin*y-o.yOrigin*w);o.y-=o.yOrigin-(o.yOrigin*b-o.xOrigin*T)}}else if(!Ie||a||!f.length||o.x!==f[4]||o.y!==f[5]||!o.rotationX&&!o.rotationY){var H=f.length>=6,z=H?f[0]:1,V=f[1]||0,j=f[2]||0,W=H?f[3]:1;o.x=f[4]||0;o.y=f[5]||0;p=Math.sqrt(z*z+V*V);m=Math.sqrt(W*W+j*j);v=z||V?Math.atan2(V,z)*L:o.rotation||0;g=j||W?Math.atan2(j,W)*L+v:o.skewX||0;o.scaleX=p;o.scaleY=m;o.rotation=v;o.skewX=g;if(Ie){o.rotationX=o.rotationY=o.z=0;o.perspective=h;o.scaleZ=1}if(o.svg){o.x-=o.xOrigin-(o.xOrigin*z+o.yOrigin*j);o.y-=o.yOrigin-(o.xOrigin*V+o.yOrigin*W)}}if(Math.abs(o.skewX)>90&&Math.abs(o.skewX)<270){if(s){o.scaleX*=-1;o.skewX+=o.rotation<=0?180:-180;o.rotation+=o.rotation<=0?180:-180}else{o.scaleY*=-1;o.skewX+=o.skewX<=0?180:-180}}o.zOrigin=c;for(d in o){if(o[d]<l)if(o[d]>-l){o[d]=0}}}if(n){e._gsTransform=o;if(o.svg){if(Ge&&e.style[Le]){t.delayedCall(.001,function(){Ke(e.style,Le)})}else if(!Ge&&e.getAttribute("transform")){t.delayedCall(.001,function(){e.removeAttribute("transform")})}}}return o},Ye=function(e){var t=this.data,i=-t.rotation*C,r=i+t.skewX*C,n=1e5,a=(Math.cos(i)*t.scaleX*n|0)/n,o=(Math.sin(i)*t.scaleX*n|0)/n,s=(Math.sin(r)*-t.scaleY*n|0)/n,l=(Math.cos(r)*t.scaleY*n|0)/n,u=this.t.style,c=this.t.currentStyle,h,f;if(!c){return}f=o;o=-s;s=-f;h=c.filter;u.filter="";var d=this.t.offsetWidth,p=this.t.offsetHeight,g=c.position!=="absolute",y="progid:DXImageTransform.Microsoft.Matrix(M11="+a+", M12="+o+", M21="+s+", M22="+l,b=t.x+d*t.xPercent/100,_=t.y+p*t.yPercent/100,x,w;if(t.ox!=null){x=(t.oxp?d*t.ox*.01:t.ox)-d/2;w=(t.oyp?p*t.oy*.01:t.oy)-p/2;b+=x-(x*a+w*o);_+=w-(x*s+w*l)}if(!g){y+=", sizingMethod='auto expand')"}else{x=d/2;w=p/2;y+=", Dx="+(x-(x*a+w*o)+b)+", Dy="+(w-(x*s+w*l)+_)+")"}if(h.indexOf("DXImageTransform.Microsoft.Matrix(")!==-1){u.filter=h.replace(E,y)}else{u.filter=y+" "+h}if(e===0||e===1)if(a===1)if(o===0)if(s===0)if(l===1)if(!g||y.indexOf("Dx=0, Dy=0")!==-1)if(!v.test(h)||parseFloat(RegExp.$1)===100)if(h.indexOf("gradient("&&h.indexOf("Alpha"))===-1){u.removeAttribute("filter")}if(!g){var T=j<8?1:-1,M,S,P;x=t.ieOffsetX||0;w=t.ieOffsetY||0;t.ieOffsetX=Math.round((d-((a<0?-a:a)*d+(o<0?-o:o)*p))/2+b);t.ieOffsetY=Math.round((p-((l<0?-l:l)*p+(s<0?-s:s)*d))/2+_);for(Se=0;Se<4;Se++){S=oe[Se];M=c[S];f=M.indexOf("px")!==-1?parseFloat(M):te(this.t,S,parseFloat(M),M.replace(m,""))||0;if(f!==t[S]){P=Se<2?-t.ieOffsetX:-t.ieOffsetY}else{P=Se<2?x-t.ieOffsetX:w-t.ieOffsetY}u[S]=(t[S]=Math.round(f-P*(Se===0||Se===2?1:T)))+"px"}}},qe=k.set3DTransformRatio=k.setTransformRatio=function(e){var t=this.data,i=this.t.style,r=t.rotation,n=t.rotationX,a=t.rotationY,o=t.scaleX,s=t.scaleY,l=t.scaleZ,u=t.x,c=t.y,h=t.z,f=t.svg,d=t.perspective,p=t.force3D,m=t.skewY,v=t.skewX,g,y,b,_,x,w,T,M,S,E,P,A,L,R,O,I,D,B,G,k,N,U,F;if(m){v+=m;r+=m}if(((e===1||e===0)&&p==="auto"&&(this.tween._totalTime===this.tween._totalDuration||!this.tween._totalTime)||!p)&&!h&&!d&&!a&&!n&&l===1||Ge&&f||!Ie){if(r||v||f){r*=C;U=v*C;F=1e5;y=Math.cos(r)*o;x=Math.sin(r)*o;b=Math.sin(r-U)*-s;w=Math.cos(r-U)*s;if(U&&t.skewType==="simple"){g=Math.tan(U-m*C);g=Math.sqrt(1+g*g);b*=g;w*=g;if(m){g=Math.tan(m*C);g=Math.sqrt(1+g*g);y*=g;x*=g}}if(f){u+=t.xOrigin-(t.xOrigin*y+t.yOrigin*b)+t.xOffset;c+=t.yOrigin-(t.xOrigin*x+t.yOrigin*w)+t.yOffset;if(Ge&&(t.xPercent||t.yPercent)){O=this.t.getBBox();u+=t.xPercent*.01*O.width;c+=t.yPercent*.01*O.height}O=1e-6;if(u<O)if(u>-O){u=0}if(c<O)if(c>-O){c=0}}G=(y*F|0)/F+","+(x*F|0)/F+","+(b*F|0)/F+","+(w*F|0)/F+","+u+","+c+")";if(f&&Ge){this.t.setAttribute("transform","matrix("+G)}else{i[Le]=(t.xPercent||t.yPercent?"translate("+t.xPercent+"%,"+t.yPercent+"%) matrix(":"matrix(")+G}}else{i[Le]=(t.xPercent||t.yPercent?"translate("+t.xPercent+"%,"+t.yPercent+"%) matrix(":"matrix(")+o+",0,0,"+s+","+u+","+c+")"}return}if(z){O=1e-4;if(o<O&&o>-O){o=l=2e-5}if(s<O&&s>-O){s=l=2e-5}if(d&&!t.z&&!t.rotationX&&!t.rotationY){d=0}}if(r||v){r*=C;I=y=Math.cos(r);D=x=Math.sin(r);if(v){r-=v*C;I=Math.cos(r);D=Math.sin(r);if(t.skewType==="simple"){g=Math.tan((v-m)*C);g=Math.sqrt(1+g*g);I*=g;D*=g;if(t.skewY){g=Math.tan(m*C);g=Math.sqrt(1+g*g);y*=g;x*=g}}}b=-D;w=I}else if(!a&&!n&&l===1&&!d&&!f){i[Le]=(t.xPercent||t.yPercent?"translate("+t.xPercent+"%,"+t.yPercent+"%) translate3d(":"translate3d(")+u+"px,"+c+"px,"+h+"px)"+(o!==1||s!==1?" scale("+o+","+s+")":"");return}else{y=w=1;b=x=0}E=1;_=T=M=S=P=A=0;L=d?-1/d:0;R=t.zOrigin;O=1e-6;k=",";N="0";r=a*C;if(r){I=Math.cos(r);D=Math.sin(r);M=-D;P=L*-D;_=y*D;T=x*D;E=I;L*=I;y*=I;x*=I}r=n*C;if(r){I=Math.cos(r);D=Math.sin(r);g=b*I+_*D;B=w*I+T*D;S=E*D;A=L*D;_=b*-D+_*I;T=w*-D+T*I;E=E*I;L=L*I;b=g;w=B}if(l!==1){_*=l;T*=l;E*=l;L*=l}if(s!==1){b*=s;w*=s;S*=s;A*=s}if(o!==1){y*=o;x*=o;M*=o;P*=o}if(R||f){if(R){u+=_*-R;c+=T*-R;h+=E*-R+R}if(f){u+=t.xOrigin-(t.xOrigin*y+t.yOrigin*b)+t.xOffset;c+=t.yOrigin-(t.xOrigin*x+t.yOrigin*w)+t.yOffset}if(u<O&&u>-O){u=N}if(c<O&&c>-O){c=N}if(h<O&&h>-O){h=0}}G=t.xPercent||t.yPercent?"translate("+t.xPercent+"%,"+t.yPercent+"%) matrix3d(":"matrix3d(";G+=(y<O&&y>-O?N:y)+k+(x<O&&x>-O?N:x)+k+(M<O&&M>-O?N:M);G+=k+(P<O&&P>-O?N:P)+k+(b<O&&b>-O?N:b)+k+(w<O&&w>-O?N:w);if(n||a||l!==1){G+=k+(S<O&&S>-O?N:S)+k+(A<O&&A>-O?N:A)+k+(_<O&&_>-O?N:_);G+=k+(T<O&&T>-O?N:T)+k+(E<O&&E>-O?N:E)+k+(L<O&&L>-O?N:L)+k}else{G+=",0,0,0,0,1,0,"}G+=u+k+c+k+h+k+(d?1+-h/d:1)+")";i[Le]=G};c=De.prototype;c.x=c.y=c.z=c.skewX=c.skewY=c.rotation=c.rotationX=c.rotationY=c.zOrigin=c.xPercent=c.yPercent=c.xOffset=c.yOffset=0;c.scaleX=c.scaleY=c.scaleZ=1;Pe("transform,scale,scaleX,scaleY,scaleZ,x,y,z,rotation,rotationX,rotationY,rotationZ,skewX,skewY,shortRotation,shortRotationX,shortRotationY,shortRotationZ,transformOrigin,svgOrigin,transformPerspective,directionalRotation,parseTransform,force3D,skewType,xPercent,yPercent,smoothOrigin",{parser:function(e,t,i,n,a,o,l){if(n._lastParsedTransform===l){return a}n._lastParsedTransform=l;var u=l.scale&&typeof l.scale==="function"?l.scale:0,c;if(typeof l[i]==="function"){c=l[i];l[i]=t}if(u){l.scale=u(Z,e)}var h=e._gsTransform,f=e.style,d=1e-6,p=Ce.length,m=l,v={},g="transformOrigin",y=Xe(e,s,true,m.parseTransform),b=m.transform&&(typeof m.transform==="function"?m.transform(Z,q):m.transform),_,x,w,T,M,S,E,P,A;y.skewType=m.skewType||y.skewType||r.defaultSkewType;n._transform=y;if(b&&typeof b==="string"&&Le){x=B.style;x[Le]=b;x.display="block";x.position="absolute";I.body.appendChild(B);_=Xe(B,null,false);if(y.skewType==="simple"){_.scaleY*=Math.cos(_.skewX*C)}if(y.svg){S=y.xOrigin;E=y.yOrigin;_.x-=y.xOffset;_.y-=y.yOffset;if(m.transformOrigin||m.svgOrigin){b={};Fe(e,le(m.transformOrigin),b,m.svgOrigin,m.smoothOrigin,true);S=b.xOrigin;E=b.yOrigin;_.x-=b.xOffset-y.xOffset;_.y-=b.yOffset-y.yOffset}if(S||E){P=We(B,true);_.x-=S-(S*P[0]+E*P[2]);_.y-=E-(S*P[1]+E*P[3])}}I.body.removeChild(B);if(!_.perspective){_.perspective=y.perspective}if(m.xPercent!=null){_.xPercent=ce(m.xPercent,y.xPercent)}if(m.yPercent!=null){_.yPercent=ce(m.yPercent,y.yPercent)}}else if(typeof m==="object"){_={scaleX:ce(m.scaleX!=null?m.scaleX:m.scale,y.scaleX),scaleY:ce(m.scaleY!=null?m.scaleY:m.scale,y.scaleY),scaleZ:ce(m.scaleZ,y.scaleZ),x:ce(m.x,y.x),y:ce(m.y,y.y),z:ce(m.z,y.z),xPercent:ce(m.xPercent,y.xPercent),yPercent:ce(m.yPercent,y.yPercent),perspective:ce(m.transformPerspective,y.perspective)};M=m.directionalRotation;if(M!=null){if(typeof M==="object"){for(x in M){m[x]=M[x]}}else{m.rotation=M}}if(typeof m.x==="string"&&m.x.indexOf("%")!==-1){_.x=0;_.xPercent=ce(m.x,y.xPercent)}if(typeof m.y==="string"&&m.y.indexOf("%")!==-1){_.y=0;_.yPercent=ce(m.y,y.yPercent)}_.rotation=he("rotation"in m?m.rotation:"shortRotation"in m?m.shortRotation+"_short":"rotationZ"in m?m.rotationZ:y.rotation,y.rotation,"rotation",v);if(Ie){_.rotationX=he("rotationX"in m?m.rotationX:"shortRotationX"in m?m.shortRotationX+"_short":y.rotationX||0,y.rotationX,"rotationX",v);_.rotationY=he("rotationY"in m?m.rotationY:"shortRotationY"in m?m.shortRotationY+"_short":y.rotationY||0,y.rotationY,"rotationY",v)}_.skewX=he(m.skewX,y.skewX);_.skewY=he(m.skewY,y.skewY)}if(Ie&&m.force3D!=null){y.force3D=m.force3D;T=true}w=y.force3D||y.z||y.rotationX||y.rotationY||_.z||_.rotationX||_.rotationY||_.perspective;if(!w&&m.scale!=null){_.scaleZ=1}while(--p>-1){A=Ce[p];b=_[A]-y[A];if(b>d||b<-d||m[A]!=null||R[A]!=null){T=true;a=new we(y,A,y[A],b,a);if(A in v){a.e=v[A]}a.xs0=0;a.plugin=o;n._overwriteProps.push(a.n)}}b=m.transformOrigin;if(y.svg&&(b||m.svgOrigin)){S=y.xOffset;E=y.yOffset;Fe(e,le(b),_,m.svgOrigin,m.smoothOrigin);a=Te(y,"xOrigin",(h?y:_).xOrigin,_.xOrigin,a,g);a=Te(y,"yOrigin",(h?y:_).yOrigin,_.yOrigin,a,g);if(S!==y.xOffset||E!==y.yOffset){a=Te(y,"xOffset",h?S:y.xOffset,y.xOffset,a,g);a=Te(y,"yOffset",h?E:y.yOffset,y.yOffset,a,g)}b="0px 0px"}if(b||Ie&&w&&y.zOrigin){if(Le){T=true;A=Oe;b=(b||ee(e,A,s,false,"50% 50%"))+"";a=new we(f,A,0,0,a,-1,g);a.b=f[A];a.plugin=o;if(Ie){x=y.zOrigin;b=b.split(" ");y.zOrigin=(b.length>2&&!(x!==0&&b[2]==="0px")?parseFloat(b[2]):x)||0;a.xs0=a.e=b[0]+" "+(b[1]||"50%")+" 0px";a=new we(y,"zOrigin",0,0,a,-1,a.n);a.b=x;a.xs0=a.e=y.zOrigin}else{a.xs0=a.e=b}}else{le(b+"",y)}}if(T){n._transformType=!(y.svg&&Ge)&&(w||this._transformType===3)?3:2}if(c){l[i]=c}if(u){l.scale=u}return a},prefix:true});Pe("boxShadow",{defaultValue:"0px 0px 0px 0px #999",prefix:true,color:true,multi:true,keyword:"inset"});Pe("borderRadius",{defaultValue:"0px",parser:function(e,t,i,r,n,a){t=this.format(t);var l=["borderTopLeftRadius","borderTopRightRadius","borderBottomRightRadius","borderBottomLeftRadius"],u=e.style,c,h,f,d,p,m,v,g,y,b,_,x,w,T,M,S;y=parseFloat(e.offsetWidth);b=parseFloat(e.offsetHeight);c=t.split(" ");for(h=0;h<l.length;h++){if(this.p.indexOf("border")){l[h]=Q(l[h])}p=d=ee(e,l[h],s,false,"0px");if(p.indexOf(" ")!==-1){d=p.split(" ");p=d[0];d=d[1]}m=f=c[h];v=parseFloat(p);x=p.substr((v+"").length);w=m.charAt(1)==="=";if(w){g=parseInt(m.charAt(0)+"1",10);m=m.substr(2);g*=parseFloat(m);_=m.substr((g+"").length-(g<0?1:0))||""}else{g=parseFloat(m);_=m.substr((g+"").length)}if(_===""){_=o[i]||x}if(_!==x){T=te(e,"borderLeft",v,x);M=te(e,"borderTop",v,x);if(_==="%"){p=T/y*100+"%";d=M/b*100+"%"}else if(_==="em"){S=te(e,"borderLeft",1,"em");p=T/S+"em";d=M/S+"em"}else{p=T+"px";d=M+"px"}if(w){m=parseFloat(p)+g+_;f=parseFloat(d)+g+_}}n=Me(u,l[h],p+" "+d,m+" "+f,false,"0px",n)}return n},prefix:true,formatter:ge("0px 0px 0px 0px",false,true)});Pe("borderBottomLeftRadius,borderBottomRightRadius,borderTopLeftRadius,borderTopRightRadius",{defaultValue:"0px",parser:function(e,t,i,r,n,a){return Me(e.style,i,this.format(ee(e,i,s,false,"0px 0px")),this.format(t),false,"0px",n)},prefix:true,formatter:ge("0px 0px",false,true)});Pe("backgroundPosition",{defaultValue:"0 0",parser:function(e,t,i,r,n,a){var o="background-position",l=s||J(e,null),u=this.format((l?j?l.getPropertyValue(o+"-x")+" "+l.getPropertyValue(o+"-y"):l.getPropertyValue(o):e.currentStyle.backgroundPositionX+" "+e.currentStyle.backgroundPositionY)||"0 0"),c=this.format(t),h,f,d,p,m,v;if(u.indexOf("%")!==-1!==(c.indexOf("%")!==-1)&&c.split(",").length<2){v=ee(e,"backgroundImage").replace(w,"");if(v&&v!=="none"){h=u.split(" ");f=c.split(" ");G.setAttribute("src",v);d=2;while(--d>-1){u=h[d];p=u.indexOf("%")!==-1;if(p!==(f[d].indexOf("%")!==-1)){m=d===0?e.offsetWidth-G.width:e.offsetHeight-G.height;h[d]=p?parseFloat(u)/100*m+"px":parseFloat(u)/m*100+"%"}}u=h.join(" ")}}return this.parseComplex(e.style,u,c,n,a)},formatter:le});Pe("backgroundSize",{defaultValue:"0 0",formatter:function(e){e+="";return le(e.indexOf(" ")===-1?e+" "+e:e)}});Pe("perspective",{defaultValue:"0px",prefix:true});Pe("perspectiveOrigin",{defaultValue:"50% 50%",prefix:true});Pe("transformStyle",{prefix:true});Pe("backfaceVisibility",{prefix:true});Pe("userSelect",{prefix:true});Pe("margin",{parser:ye("marginTop,marginRight,marginBottom,marginLeft")});Pe("padding",{parser:ye("paddingTop,paddingRight,paddingBottom,paddingLeft")});Pe("clip",{defaultValue:"rect(0px,0px,0px,0px)",parser:function(e,t,i,r,n,a){var o,l,u;if(j<9){l=e.currentStyle;u=j<8?" ":",";o="rect("+l.clipTop+u+l.clipRight+u+l.clipBottom+u+l.clipLeft+")";t=this.format(t).split(",").join(u)}else{o=this.format(ee(e,this.p,s,false,this.dflt));t=this.format(t)}return this.parseComplex(e.style,o,t,n,a)}});Pe("textShadow",{defaultValue:"0px 0px 0px #999",color:true,multi:true});Pe("autoRound,strictUnits",{parser:function(e,t,i,r,n){return n}});Pe("border",{defaultValue:"0px solid #000",parser:function(e,t,i,r,n,a){var o=ee(e,"borderTopWidth",s,false,"0px"),l=this.format(t).split(" "),u=l[0].replace(m,"");if(u!=="px"){o=parseFloat(o)/te(e,"borderTopWidth",1,u)+u}return this.parseComplex(e.style,this.format(o+" "+ee(e,"borderTopStyle",s,false,"solid")+" "+ee(e,"borderTopColor",s,false,"#000")),l.join(" "),n,a)},color:true,formatter:function(e){var t=e.split(" ");return t[0]+" "+(t[1]||"solid")+" "+(e.match(ve)||["#000"])[0]}});Pe("borderWidth",{parser:ye("borderTopWidth,borderRightWidth,borderBottomWidth,borderLeftWidth")});Pe("float,cssFloat,styleFloat",{parser:function(e,t,i,r,n,a){var o=e.style,s="cssFloat"in o?"cssFloat":"styleFloat";return new we(o,s,0,0,n,-1,i,false,0,o[s],t)}});var Ze=function(e){var t=this.t,i=t.filter||ee(this.data,"filter")||"",r=this.s+this.c*e|0,n;if(r===100){if(i.indexOf("atrix(")===-1&&i.indexOf("radient(")===-1&&i.indexOf("oader(")===-1){t.removeAttribute("filter");n=!ee(this.data,"filter")}else{t.filter=i.replace(y,"");n=true}}if(!n){if(this.xn1){t.filter=i=i||"alpha(opacity="+r+")"}if(i.indexOf("pacity")===-1){if(r!==0||!this.xn1){t.filter=i+" alpha(opacity="+r+")"}}else{t.filter=i.replace(v,"opacity="+r)}}};Pe("opacity,alpha,autoAlpha",{defaultValue:"1",parser:function(e,t,i,r,n,a){var o=parseFloat(ee(e,"opacity",s,false,"1")),l=e.style,u=i==="autoAlpha";if(typeof t==="string"&&t.charAt(1)==="="){t=(t.charAt(0)==="-"?-1:1)*parseFloat(t.substr(2))+o}if(u&&o===1&&ee(e,"visibility",s)==="hidden"&&t!==0){o=0}if(W){n=new we(l,"opacity",o,t-o,n)}else{n=new we(l,"opacity",o*100,(t-o)*100,n);n.xn1=u?1:0;l.zoom=1;n.type=2;n.b="alpha(opacity="+n.s+")";n.e="alpha(opacity="+(n.s+n.c)+")";n.data=e;n.plugin=a;n.setRatio=Ze}if(u){n=new we(l,"visibility",0,0,n,-1,null,false,0,o!==0?"inherit":"hidden",t===0?"hidden":"inherit");n.xs0="inherit";r._overwriteProps.push(n.n);r._overwriteProps.push(i)}return n}});var Ke=function(e,t){if(t){if(e.removeProperty){if(t.substr(0,2)==="ms"||t.substr(0,6)==="webkit"){t="-"+t}e.removeProperty(t.replace(_,"-$1").toLowerCase())}else{e.removeAttribute(t)}}},$e=function(e){this.t._gsClassPT=this;if(e===1||e===0){this.t.setAttribute("class",e===0?this.b:this.e);var t=this.data,i=this.t.style;while(t){if(!t.v){Ke(i,t.p)}else{i[t.p]=t.v}t=t._next}if(e===1&&this.t._gsClassPT===this){this.t._gsClassPT=null}}else if(this.t.getAttribute("class")!==this.e){this.t.setAttribute("class",this.e)}};Pe("className",{parser:function(e,t,i,r,n,o,l){var u=e.getAttribute("class")||"",c=e.style.cssText,h,f,d,p,m;n=r._classNamePT=new we(e,i,0,0,n,2);n.setRatio=$e;n.pr=-11;a=true;n.b=u;f=re(e,s);d=e._gsClassPT;if(d){p={};m=d.data;while(m){p[m.p]=1;m=m._next}d.setRatio(1)}e._gsClassPT=n;n.e=t.charAt(1)!=="="?t:u.replace(new RegExp("(?:\\s|^)"+t.substr(2)+"(?![\\w-])"),"")+(t.charAt(0)==="+"?" "+t.substr(2):"");e.setAttribute("class",n.e);h=ne(e,f,re(e),l,p);e.setAttribute("class",u);n.data=h.firstMPT;e.style.cssText=c;n=n.xfirst=r.parse(e,h.difs,n,o);return n}});var Qe=function(e){if(e===1||e===0)if(this.data._totalTime===this.data._totalDuration&&this.data.data!=="isFromStart"){var t=this.t.style,i=u.transform.parse,r,n,a,o,s;if(this.e==="all"){t.cssText="";o=true}else{r=this.e.split(" ").join("").split(",");a=r.length;while(--a>-1){n=r[a];if(u[n]){if(u[n].parse===i){o=true}else{n=n==="transformOrigin"?Oe:u[n].p}}Ke(t,n)}}if(o){Ke(t,Le);s=this.t._gsTransform;if(s){if(s.svg){this.t.removeAttribute("data-svg-origin");this.t.removeAttribute("transform")}delete this.t._gsTransform}}}};Pe("clearProps",{parser:function(e,t,i,r,n){n=new we(e,i,0,0,n,2);n.setRatio=Qe;n.e=t;n.pr=-10;n.data=r._tween;a=true;return n}});c="bezier,throwProps,physicsProps,physics2D".split(",");Se=c.length;while(Se--){Ae(c[Se])}c=r.prototype;c._firstPT=c._lastParsedTransform=c._transform=null;c._onInitTween=function(e,t,i,n){if(!e.nodeType){return false}this._target=q=e;this._tween=i;this._vars=t;Z=n;U=t.autoRound;a=false;o=t.suffixMap||r.suffixMap;s=J(e,"");l=this._overwriteProps;var c=e.style,h,f,d,p,m,v,y,b,_;if(F)if(c.zIndex===""){h=ee(e,"zIndex",s);if(h==="auto"||h===""){this._addLazySet(c,"zIndex",0)}}if(typeof t==="string"){p=c.cssText;h=re(e,s);c.cssText=p+";"+t;h=ne(e,h,re(e)).difs;if(!W&&g.test(t)){h.opacity=parseFloat(RegExp.$1)}t=h;c.cssText=p}if(t.className){this._firstPT=f=u.className.parse(e,t.className,"className",this,null,null,t)}else{this._firstPT=f=this.parse(e,t,null)}if(this._transformType){_=this._transformType===3;if(!Le){c.zoom=1}else if(H){F=true;if(c.zIndex===""){y=ee(e,"zIndex",s);if(y==="auto"||y===""){this._addLazySet(c,"zIndex",0)}}if(V){this._addLazySet(c,"WebkitBackfaceVisibility",this._vars.WebkitBackfaceVisibility||(_?"visible":"hidden"))}}d=f;while(d&&d._next){d=d._next}b=new we(e,"transform",0,0,null,2)
;this._linkCSSP(b,null,d);b.setRatio=Le?qe:Ye;b.data=this._transform||Xe(e,s,true);b.tween=i;b.pr=-1;l.pop()}if(a){while(f){v=f._next;d=p;while(d&&d.pr>f.pr){d=d._next}if(f._prev=d?d._prev:m){f._prev._next=f}else{p=f}if(f._next=d){d._prev=f}else{m=f}f=v}this._firstPT=p}return true};c.parse=function(e,t,i,r){var n=e.style,a,l,c,h,f,d,p,v,g,y;for(a in t){d=t[a];if(typeof d==="function"){d=d(Z,q)}l=u[a];if(l){i=l.parse(e,d,a,this,i,r,t)}else if(a.substr(0,2)==="--"){this._tween._propLookup[a]=this._addTween.call(this._tween,e.style,"setProperty",J(e).getPropertyValue(a)+"",d+"",a,false,a);continue}else{f=ee(e,a,s)+"";g=typeof d==="string";if(a==="color"||a==="fill"||a==="stroke"||a.indexOf("Color")!==-1||g&&b.test(d)){if(!g){d=pe(d);d=(d.length>3?"rgba(":"rgb(")+d.join(",")+")"}i=Me(n,a,f,d,true,"transparent",i,0,r)}else if(g&&A.test(d)){i=Me(n,a,f,d,true,null,i,0,r)}else{c=parseFloat(f);p=c||c===0?f.substr((c+"").length):"";if(f===""||f==="auto"){if(a==="width"||a==="height"){c=se(e,a,s);p="px"}else if(a==="left"||a==="top"){c=ie(e,a,s);p="px"}else{c=a!=="opacity"?0:1;p=""}}y=g&&d.charAt(1)==="=";if(y){h=parseInt(d.charAt(0)+"1",10);d=d.substr(2);h*=parseFloat(d);v=d.replace(m,"")}else{h=parseFloat(d);v=g?d.replace(m,""):""}if(v===""){v=a in o?o[a]:p}d=h||h===0?(y?h+c:h)+v:t[a];if(p!==v)if(v!==""||a==="lineHeight")if(h||h===0)if(c){c=te(e,a,c,p);if(v==="%"){c/=te(e,a,100,"%")/100;if(t.strictUnits!==true){f=c+"%"}}else if(v==="em"||v==="rem"||v==="vw"||v==="vh"){c/=te(e,a,1,v)}else if(v!=="px"){h=te(e,a,h,v);v="px"}if(y)if(h||h===0){d=h+c+v}}if(y){h+=c}if((c||c===0)&&(h||h===0)){i=new we(n,a,c,h-c,i,0,a,U!==false&&(v==="px"||a==="zIndex"),0,f,d);i.xs0=v}else if(n[a]===undefined||!d&&(d+""==="NaN"||d==null)){Y("invalid "+a+" tween value: "+t[a])}else{i=new we(n,a,h||c||0,0,i,-1,a,false,0,f,d);i.xs0=d==="none"&&(a==="display"||a.indexOf("Style")!==-1)?f:d}}}if(r)if(i&&!i.plugin){i.plugin=r}}return i};c.setRatio=function(e){var t=this._firstPT,i=1e-6,r,n,a;if(e===1&&(this._tween._time===this._tween._duration||this._tween._time===0)){while(t){if(t.type!==2){if(t.r&&t.type!==-1){r=Math.round(t.s+t.c);if(!t.type){t.t[t.p]=r+t.xs0}else if(t.type===1){a=t.l;n=t.xs0+r+t.xs1;for(a=1;a<t.l;a++){n+=t["xn"+a]+t["xs"+(a+1)]}t.t[t.p]=n}}else{t.t[t.p]=t.e}}else{t.setRatio(e)}t=t._next}}else if(e||!(this._tween._time===this._tween._duration||this._tween._time===0)||this._tween._rawPrevTime===-1e-6){while(t){r=t.c*e+t.s;if(t.r){r=Math.round(r)}else if(r<i)if(r>-i){r=0}if(!t.type){t.t[t.p]=r+t.xs0}else if(t.type===1){a=t.l;if(a===2){t.t[t.p]=t.xs0+r+t.xs1+t.xn1+t.xs2}else if(a===3){t.t[t.p]=t.xs0+r+t.xs1+t.xn1+t.xs2+t.xn2+t.xs3}else if(a===4){t.t[t.p]=t.xs0+r+t.xs1+t.xn1+t.xs2+t.xn2+t.xs3+t.xn3+t.xs4}else if(a===5){t.t[t.p]=t.xs0+r+t.xs1+t.xn1+t.xs2+t.xn2+t.xs3+t.xn3+t.xs4+t.xn4+t.xs5}else{n=t.xs0+r+t.xs1;for(a=1;a<t.l;a++){n+=t["xn"+a]+t["xs"+(a+1)]}t.t[t.p]=n}}else if(t.type===-1){t.t[t.p]=t.xs0}else if(t.setRatio){t.setRatio(e)}t=t._next}}else{while(t){if(t.type!==2){t.t[t.p]=t.b}else{t.setRatio(e)}t=t._next}}};c._enableTransforms=function(e){this._transform=this._transform||Xe(this._target,s,true);this._transformType=!(this._transform.svg&&Ge)&&(e||this._transformType===3)?3:2};var Je=function(e){this.t[this.p]=this.e;this.data._linkCSSP(this,this._next,null,true)};c._addLazySet=function(e,t,i){var r=this._firstPT=new we(e,t,0,0,this._firstPT,2);r.e=i;r.setRatio=Je;r.data=this};c._linkCSSP=function(e,t,i,r){if(e){if(t){t._prev=e}if(e._next){e._next._prev=e._prev}if(e._prev){e._prev._next=e._next}else if(this._firstPT===e){this._firstPT=e._next;r=true}if(i){i._next=e}else if(!r&&this._firstPT===null){this._firstPT=e}e._next=t;e._prev=i}return e};c._mod=function(e){var t=this._firstPT;while(t){if(typeof e[t.p]==="function"&&e[t.p]===Math.round){t.r=1}t=t._next}};c._kill=function(t){var i=t,r,n,a;if(t.autoAlpha||t.alpha){i={};for(n in t){i[n]=t[n]}i.opacity=1;if(i.autoAlpha){i.visibility=1}}if(t.className&&(r=this._classNamePT)){a=r.xfirst;if(a&&a._prev){this._linkCSSP(a._prev,r._next,a._prev._prev)}else if(a===this._firstPT){this._firstPT=r._next}if(r._next){this._linkCSSP(r._next,r._next._next,a._prev)}this._classNamePT=null}r=this._firstPT;while(r){if(r.plugin&&r.plugin!==n&&r.plugin._kill){r.plugin._kill(t);n=r.plugin}r=r._next}return e.prototype._kill.call(this,i)};var et=function(e,t,i){var r,n,a,o;if(e.slice){n=e.length;while(--n>-1){et(e[n],t,i)}return}r=e.childNodes;n=r.length;while(--n>-1){a=r[n];o=a.type;if(a.style){t.push(re(a));if(i){i.push(a)}}if((o===1||o===9||o===11)&&a.childNodes.length){et(a,t,i)}}};r.cascadeTo=function(e,i,r){var n=t.to(e,i,r),a=[n],o=[],s=[],l=[],u=t._internals.reservedProps,c,h,f,d;e=n._targets||n.target;et(e,o,l);n.render(i,true,true);et(e,s);n.render(0,true,true);n._enabled(true);c=l.length;while(--c>-1){h=ne(l[c],o[c],s[c]);if(h.firstMPT){h=h.difs;for(f in r){if(u[f]){h[f]=r[f]}}d={};for(f in h){d[f]=o[c][f]}a.push(t.fromTo(l[c],i,d,h))}}return a};e.activate([r]);return r},true);(function(){var e=i._gsDefine.plugin({propName:"roundProps",version:"1.6.0",priority:-1,API:2,init:function(e,t,i){this._tween=i;return true}}),t=function(e){while(e){if(!e.f&&!e.blob){e.m=Math.round}e=e._next}},r=e.prototype;r._onInitAllProps=function(){var e=this._tween,i=e.vars.roundProps.join?e.vars.roundProps:e.vars.roundProps.split(","),r=i.length,n={},a=e._propLookup.roundProps,o,s,l;while(--r>-1){n[i[r]]=Math.round}r=i.length;while(--r>-1){o=i[r];s=e._firstPT;while(s){l=s._next;if(s.pg){s.t._mod(n)}else if(s.n===o){if(s.f===2&&s.t){t(s.t._firstPT)}else{this._add(s.t,o,s.s,s.c);if(l){l._prev=s._prev}if(s._prev){s._prev._next=l}else if(e._firstPT===s){e._firstPT=l}s._next=s._prev=null;e._propLookup[o]=a}}s=l}}return false};r._add=function(e,t,i,r){this._addTween(e,t,i,i+r,t,Math.round);this._overwriteProps.push(t)}})();(function(){i._gsDefine.plugin({propName:"attr",API:2,version:"0.6.1",init:function(e,t,i,r){var n,a;if(typeof e.setAttribute!=="function"){return false}for(n in t){a=t[n];if(typeof a==="function"){a=a(r,e)}this._addTween(e,"setAttribute",e.getAttribute(n)+"",a+"",n,false,n);this._overwriteProps.push(n)}return true}})})();i._gsDefine.plugin({propName:"directionalRotation",version:"0.3.1",API:2,init:function(e,t,i,r){if(typeof t!=="object"){t={rotation:t}}this.finals={};var n=t.useRadians===true?Math.PI*2:360,a=1e-6,o,s,l,u,c,h;for(o in t){if(o!=="useRadians"){u=t[o];if(typeof u==="function"){u=u(r,e)}h=(u+"").split("_");s=h[0];l=parseFloat(typeof e[o]!=="function"?e[o]:e[o.indexOf("set")||typeof e["get"+o.substr(3)]!=="function"?o:"get"+o.substr(3)]());u=this.finals[o]=typeof s==="string"&&s.charAt(1)==="="?l+parseInt(s.charAt(0)+"1",10)*Number(s.substr(2)):Number(s)||0;c=u-l;if(h.length){s=h.join("_");if(s.indexOf("short")!==-1){c=c%n;if(c!==c%(n/2)){c=c<0?c+n:c-n}}if(s.indexOf("_cw")!==-1&&c<0){c=(c+n*9999999999)%n-(c/n|0)*n}else if(s.indexOf("ccw")!==-1&&c>0){c=(c-n*9999999999)%n-(c/n|0)*n}}if(c>a||c<-a){this._addTween(e,o,l,l+c,o);this._overwriteProps.push(o)}}}return true},set:function(e){var t;if(e!==1){this._super.setRatio.call(this,e)}else{t=this._firstPT;while(t){if(t.f){t.t[t.p](this.finals[t.p])}else{t.t[t.p]=this.finals[t.p]}t=t._next}}}})._autoCSS=true;i._gsDefine("easing.Back",["easing.Ease"],function(e){var t=i.GreenSockGlobals||i,r=t.com.greensock,n=Math.PI*2,a=Math.PI/2,o=r._class,s=function(t,i){var r=o("easing."+t,function(){},true),n=r.prototype=new e;n.constructor=r;n.getRatio=i;return r},l=e.register||function(){},u=function(e,t,i,r,n){var a=o("easing."+e,{easeOut:new t,easeIn:new i,easeInOut:new r},true);l(a,e);return a},c=function(e,t,i){this.t=e;this.v=t;if(i){this.next=i;i.prev=this;this.c=i.v-t;this.gap=i.t-e}},h=function(t,i){var r=o("easing."+t,function(e){this._p1=e||e===0?e:1.70158;this._p2=this._p1*1.525},true),n=r.prototype=new e;n.constructor=r;n.getRatio=i;n.config=function(e){return new r(e)};return r},f=u("Back",h("BackOut",function(e){return(e=e-1)*e*((this._p1+1)*e+this._p1)+1}),h("BackIn",function(e){return e*e*((this._p1+1)*e-this._p1)}),h("BackInOut",function(e){return(e*=2)<1?.5*e*e*((this._p2+1)*e-this._p2):.5*((e-=2)*e*((this._p2+1)*e+this._p2)+2)})),d=o("easing.SlowMo",function(e,t,i){t=t||t===0?t:.7;if(e==null){e=.7}else if(e>1){e=1}this._p=e!==1?t:0;this._p1=(1-e)/2;this._p2=e;this._p3=this._p1+this._p2;this._calcEnd=i===true},true),p=d.prototype=new e,m,v,g;p.constructor=d;p.getRatio=function(e){var t=e+(.5-e)*this._p;if(e<this._p1){return this._calcEnd?1-(e=1-e/this._p1)*e:t-(e=1-e/this._p1)*e*e*e*t}else if(e>this._p3){return this._calcEnd?e===1?0:1-(e=(e-this._p3)/this._p1)*e:t+(e-t)*(e=(e-this._p3)/this._p1)*e*e*e}return this._calcEnd?1:t};d.ease=new d(.7,.7);p.config=d.config=function(e,t,i){return new d(e,t,i)};m=o("easing.SteppedEase",function(e,t){e=e||1;this._p1=1/e;this._p2=e+(t?0:1);this._p3=t?1:0},true);p=m.prototype=new e;p.constructor=m;p.getRatio=function(e){if(e<0){e=0}else if(e>=1){e=.999999999}return((this._p2*e|0)+this._p3)*this._p1};p.config=m.config=function(e,t){return new m(e,t)};v=o("easing.RoughEase",function(t){t=t||{};var i=t.taper||"none",r=[],n=0,a=(t.points||20)|0,o=a,s=t.randomize!==false,l=t.clamp===true,u=t.template instanceof e?t.template:null,h=typeof t.strength==="number"?t.strength*.4:.4,f,d,p,m,v,g;while(--o>-1){f=s?Math.random():1/a*o;d=u?u.getRatio(f):f;if(i==="none"){p=h}else if(i==="out"){m=1-f;p=m*m*h}else if(i==="in"){p=f*f*h}else if(f<.5){m=f*2;p=m*m*.5*h}else{m=(1-f)*2;p=m*m*.5*h}if(s){d+=Math.random()*p-p*.5}else if(o%2){d+=p*.5}else{d-=p*.5}if(l){if(d>1){d=1}else if(d<0){d=0}}r[n++]={x:f,y:d}}r.sort(function(e,t){return e.x-t.x});g=new c(1,1,null);o=a;while(--o>-1){v=r[o];g=new c(v.x,v.y,g)}this._prev=new c(0,0,g.t!==0?g:g.next)},true);p=v.prototype=new e;p.constructor=v;p.getRatio=function(e){var t=this._prev;if(e>t.t){while(t.next&&e>=t.t){t=t.next}t=t.prev}else{while(t.prev&&e<=t.t){t=t.prev}}this._prev=t;return t.v+(e-t.t)/t.gap*t.c};p.config=function(e){return new v(e)};v.ease=new v;u("Bounce",s("BounceOut",function(e){if(e<1/2.75){return 7.5625*e*e}else if(e<2/2.75){return 7.5625*(e-=1.5/2.75)*e+.75}else if(e<2.5/2.75){return 7.5625*(e-=2.25/2.75)*e+.9375}return 7.5625*(e-=2.625/2.75)*e+.984375}),s("BounceIn",function(e){if((e=1-e)<1/2.75){return 1-7.5625*e*e}else if(e<2/2.75){return 1-(7.5625*(e-=1.5/2.75)*e+.75)}else if(e<2.5/2.75){return 1-(7.5625*(e-=2.25/2.75)*e+.9375)}return 1-(7.5625*(e-=2.625/2.75)*e+.984375)}),s("BounceInOut",function(e){var t=e<.5;if(t){e=1-e*2}else{e=e*2-1}if(e<1/2.75){e=7.5625*e*e}else if(e<2/2.75){e=7.5625*(e-=1.5/2.75)*e+.75}else if(e<2.5/2.75){e=7.5625*(e-=2.25/2.75)*e+.9375}else{e=7.5625*(e-=2.625/2.75)*e+.984375}return t?(1-e)*.5:e*.5+.5}));u("Circ",s("CircOut",function(e){return Math.sqrt(1-(e=e-1)*e)}),s("CircIn",function(e){return-(Math.sqrt(1-e*e)-1)}),s("CircInOut",function(e){return(e*=2)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)}));g=function(t,i,r){var a=o("easing."+t,function(e,t){this._p1=e>=1?e:1;this._p2=(t||r)/(e<1?e:1);this._p3=this._p2/n*(Math.asin(1/this._p1)||0);this._p2=n/this._p2},true),s=a.prototype=new e;s.constructor=a;s.getRatio=i;s.config=function(e,t){return new a(e,t)};return a};u("Elastic",g("ElasticOut",function(e){return this._p1*Math.pow(2,-10*e)*Math.sin((e-this._p3)*this._p2)+1},.3),g("ElasticIn",function(e){return-(this._p1*Math.pow(2,10*(e-=1))*Math.sin((e-this._p3)*this._p2))},.3),g("ElasticInOut",function(e){return(e*=2)<1?-.5*(this._p1*Math.pow(2,10*(e-=1))*Math.sin((e-this._p3)*this._p2)):this._p1*Math.pow(2,-10*(e-=1))*Math.sin((e-this._p3)*this._p2)*.5+1},.45));u("Expo",s("ExpoOut",function(e){return 1-Math.pow(2,-10*e)}),s("ExpoIn",function(e){return Math.pow(2,10*(e-1))-.001}),s("ExpoInOut",function(e){return(e*=2)<1?.5*Math.pow(2,10*(e-1)):.5*(2-Math.pow(2,-10*(e-1)))}));u("Sine",s("SineOut",function(e){return Math.sin(e*a)}),s("SineIn",function(e){return-Math.cos(e*a)+1}),s("SineInOut",function(e){return-.5*(Math.cos(Math.PI*e)-1)}));o("easing.EaseLookup",{find:function(t){return e.map[t]}},true);l(t.SlowMo,"SlowMo","ease,");l(v,"RoughEase","ease,");l(m,"SteppedEase","ease,");return f},true)});if(i._gsDefine){i._gsQueue.pop()()}(function(e,i){"use strict";var r={},n=e.document,a=e.GreenSockGlobals=e.GreenSockGlobals||e;if(a.TweenLite){return}var o=function(e){var t=e.split("."),i=a,r;for(r=0;r<t.length;r++){i[t[r]]=i=i[t[r]]||{}}return i},s=o("com.greensock"),l=1e-10,u=function(e){var t=[],i=e.length,r;for(r=0;r!==i;t.push(e[r++])){}return t},c=function(){},h=function(){var e=Object.prototype.toString,t=e.call([]);return function(i){return i!=null&&(i instanceof Array||typeof i==="object"&&!!i.push&&e.call(i)===t)}}(),f,d,p,m,v,g={},y=function(n,s,l,u){this.sc=g[n]?g[n].sc:[];g[n]=this;this.gsClass=null;this.func=l;var c=[];this.check=function(h){var f=s.length,d=f,p,m,v,b;while(--f>-1){if((p=g[s[f]]||new y(s[f],[])).gsClass){c[f]=p.gsClass;d--}else if(h){p.sc.push(this)}}if(d===0&&l){m=("com.greensock."+n).split(".");v=m.pop();b=o(m.join("."))[v]=this.gsClass=l.apply(l,c);if(u){a[v]=r[v]=b;if(typeof t!=="undefined"&&t.exports){if(n===i){t.exports=r[i]=b;for(f in r){b[f]=r[f]}}else if(r[i]){r[i][v]=b}}else if(typeof define==="function"&&define.amd){define((e.GreenSockAMDPath?e.GreenSockAMDPath+"/":"")+n.split(".").pop(),[],function(){return b})}}for(f=0;f<this.sc.length;f++){this.sc[f].check()}}};this.check(true)},b=e._gsDefine=function(e,t,i,r){return new y(e,t,i,r)},_=s._class=function(e,t,i){t=t||function(){};b(e,[],function(){return t},i);return t};b.globals=a;var x=[0,0,1,1],w=_("easing.Ease",function(e,t,i,r){this._func=e;this._type=i||0;this._power=r||0;this._params=t?x.concat(t):x},true),T=w.map={},M=w.register=function(e,t,i,r){var n=t.split(","),a=n.length,o=(i||"easeIn,easeOut,easeInOut").split(","),l,u,c,h;while(--a>-1){u=n[a];l=r?_("easing."+u,null,true):s.easing[u]||{};c=o.length;while(--c>-1){h=o[c];T[u+"."+h]=T[h+u]=l[h]=e.getRatio?e:e[h]||new e}}};p=w.prototype;p._calcEnd=false;p.getRatio=function(e){if(this._func){this._params[0]=e;return this._func.apply(null,this._params)}var t=this._type,i=this._power,r=t===1?1-e:t===2?e:e<.5?e*2:(1-e)*2;if(i===1){r*=r}else if(i===2){r*=r*r}else if(i===3){r*=r*r*r}else if(i===4){r*=r*r*r*r}return t===1?1-r:t===2?r:e<.5?r/2:1-r/2};f=["Linear","Quad","Cubic","Quart","Quint,Strong"];d=f.length;while(--d>-1){p=f[d]+",Power"+d;M(new w(null,null,1,d),p,"easeOut",true);M(new w(null,null,2,d),p,"easeIn"+(d===0?",easeNone":""));M(new w(null,null,3,d),p,"easeInOut")}T.linear=s.easing.Linear.easeIn;T.swing=s.easing.Quad.easeInOut;var S=_("events.EventDispatcher",function(e){this._listeners={};this._eventTarget=e||this});p=S.prototype;p.addEventListener=function(e,t,i,r,n){n=n||0;var a=this._listeners[e],o=0,s,l;if(this===m&&!v){m.wake()}if(a==null){this._listeners[e]=a=[]}l=a.length;while(--l>-1){s=a[l];if(s.c===t&&s.s===i){a.splice(l,1)}else if(o===0&&s.pr<n){o=l+1}}a.splice(o,0,{c:t,s:i,up:r,pr:n})};p.removeEventListener=function(e,t){var i=this._listeners[e],r;if(i){r=i.length;while(--r>-1){if(i[r].c===t){i.splice(r,1);return}}}};p.dispatchEvent=function(e){var t=this._listeners[e],i,r,n;if(t){i=t.length;if(i>1){t=t.slice(0)}r=this._eventTarget;while(--i>-1){n=t[i];if(n){if(n.up){n.c.call(n.s||r,{type:e,target:r})}else{n.c.call(n.s||r)}}}}};var E=e.requestAnimationFrame,P=e.cancelAnimationFrame,A=Date.now||function(){return(new Date).getTime()},C=A();f=["ms","moz","webkit","o"];d=f.length;while(--d>-1&&!E){E=e[f[d]+"RequestAnimationFrame"];P=e[f[d]+"CancelAnimationFrame"]||e[f[d]+"CancelRequestAnimationFrame"]}_("Ticker",function(e,t){var i=this,r=A(),a=t!==false&&E?"auto":false,o=500,s=33,u="tick",h,f,d,p,g,y=function(e){var t=A()-C,n,a;if(t>o){r+=t-s}C+=t;i.time=(C-r)/1e3;n=i.time-g;if(!h||n>0||e===true){i.frame++;g+=n+(n>=p?.004:p-n);a=true}if(e!==true){d=f(y)}if(a){i.dispatchEvent(u)}};S.call(i);i.time=i.frame=0;i.tick=function(){y(true)};i.lagSmoothing=function(e,t){if(!arguments.length){return o<1/l}o=e||1/l;s=Math.min(t,o,0)};i.sleep=function(){if(d==null){return}if(!a||!P){clearTimeout(d)}else{P(d)}f=c;d=null;if(i===m){v=false}};i.wake=function(e){if(d!==null){i.sleep()}else if(e){r+=-C+(C=A())}else if(i.frame>10){C=A()-o+5}f=h===0?c:!a||!E?function(e){return setTimeout(e,(g-i.time)*1e3+1|0)}:E;if(i===m){v=true}y(2)};i.fps=function(e){if(!arguments.length){return h}h=e;p=1/(h||60);g=this.time+p;i.wake()};i.useRAF=function(e){if(!arguments.length){return a}i.sleep();a=e;i.fps(h)};i.fps(e);setTimeout(function(){if(a==="auto"&&i.frame<5&&n.visibilityState!=="hidden"){i.useRAF(false)}},1500)});p=s.Ticker.prototype=new s.events.EventDispatcher;p.constructor=s.Ticker;var L=_("core.Animation",function(e,t){this.vars=t=t||{};this._duration=this._totalDuration=e||0;this._delay=Number(t.delay)||0;this._timeScale=1;this._active=t.immediateRender===true;this.data=t.data;this._reversed=t.reversed===true;if(!K){return}if(!v){m.wake()}var i=this.vars.useFrames?Z:K;i.add(this,i._time);if(this.vars.paused){this.paused(true)}});m=L.ticker=new s.Ticker;p=L.prototype;p._dirty=p._gc=p._initted=p._paused=false;p._totalTime=p._time=0;p._rawPrevTime=-1;p._next=p._last=p._onUpdate=p._timeline=p.timeline=null;p._paused=false;var R=function(){if(v&&A()-C>2e3&&(n.visibilityState!=="hidden"||!m.lagSmoothing())){m.wake()}var e=setTimeout(R,2e3);if(e.unref){e.unref()}};R();p.play=function(e,t){if(e!=null){this.seek(e,t)}return this.reversed(false).paused(false)};p.pause=function(e,t){if(e!=null){this.seek(e,t)}return this.paused(true)};p.resume=function(e,t){if(e!=null){this.seek(e,t)}return this.paused(false)};p.seek=function(e,t){return this.totalTime(Number(e),t!==false)};p.restart=function(e,t){return this.reversed(false).paused(false).totalTime(e?-this._delay:0,t!==false,true)};p.reverse=function(e,t){if(e!=null){this.seek(e||this.totalDuration(),t)}return this.reversed(true).paused(false)};p.render=function(e,t,i){};p.invalidate=function(){this._time=this._totalTime=0;this._initted=this._gc=false;this._rawPrevTime=-1;if(this._gc||!this.timeline){this._enabled(true)}return this};p.isActive=function(){var e=this._timeline,t=this._startTime,i;return!e||!this._gc&&!this._paused&&e.isActive()&&(i=e.rawTime(true))>=t&&i<t+this.totalDuration()/this._timeScale-1e-7};p._enabled=function(e,t){if(!v){m.wake()}this._gc=!e;this._active=this.isActive();if(t!==true){if(e&&!this.timeline){this._timeline.add(this,this._startTime-this._delay)}else if(!e&&this.timeline){this._timeline._remove(this,true)}}return false};p._kill=function(e,t){return this._enabled(false,false)};p.kill=function(e,t){this._kill(e,t);return this};p._uncache=function(e){var t=e?this:this.timeline;while(t){t._dirty=true;t=t.timeline}return this};p._swapSelfInParams=function(e){var t=e.length,i=e.concat();while(--t>-1){if(e[t]==="{self}"){i[t]=this}}return i};p._callback=function(e){var t=this.vars,i=t[e],r=t[e+"Params"],n=t[e+"Scope"]||t.callbackScope||this,a=r?r.length:0;switch(a){case 0:i.call(n);break;case 1:i.call(n,r[0]);break;case 2:i.call(n,r[0],r[1]);break;default:i.apply(n,r)}};p.eventCallback=function(e,t,i,r){if((e||"").substr(0,2)==="on"){var n=this.vars;if(arguments.length===1){return n[e]}if(t==null){delete n[e]}else{n[e]=t;n[e+"Params"]=h(i)&&i.join("").indexOf("{self}")!==-1?this._swapSelfInParams(i):i;n[e+"Scope"]=r}if(e==="onUpdate"){this._onUpdate=t}}return this};p.delay=function(e){if(!arguments.length){return this._delay}if(this._timeline.smoothChildTiming){this.startTime(this._startTime+e-this._delay)}this._delay=e;return this};p.duration=function(e){if(!arguments.length){this._dirty=false;return this._duration}this._duration=this._totalDuration=e;this._uncache(true);if(this._timeline.smoothChildTiming)if(this._time>0)if(this._time<this._duration)if(e!==0){this.totalTime(this._totalTime*(e/this._duration),true)}return this};p.totalDuration=function(e){this._dirty=false;return!arguments.length?this._totalDuration:this.duration(e)};p.time=function(e,t){if(!arguments.length){return this._time}if(this._dirty){this.totalDuration()}return this.totalTime(e>this._duration?this._duration:e,t)};p.totalTime=function(e,t,i){if(!v){m.wake()}if(!arguments.length){return this._totalTime}if(this._timeline){if(e<0&&!i){e+=this.totalDuration()}if(this._timeline.smoothChildTiming){if(this._dirty){this.totalDuration()}var r=this._totalDuration,n=this._timeline;if(e>r&&!i){e=r}this._startTime=(this._paused?this._pauseTime:n._time)-(!this._reversed?e:r-e)/this._timeScale;if(!n._dirty){this._uncache(false)}if(n._timeline){while(n._timeline){if(n._timeline._time!==(n._startTime+n._totalTime)/n._timeScale){n.totalTime(n._totalTime,true)}n=n._timeline}}}if(this._gc){this._enabled(true,false)}if(this._totalTime!==e||this._duration===0){if(G.length){Q()}this.render(e,t,false);if(G.length){Q()}}}return this};p.progress=p.totalProgress=function(e,t){var i=this.duration();return!arguments.length?i?this._time/i:this.ratio:this.totalTime(i*e,t)};p.startTime=function(e){if(!arguments.length){return this._startTime}if(e!==this._startTime){this._startTime=e;if(this.timeline)if(this.timeline._sortChildren){this.timeline.add(this,e-this._delay)}}return this};p.endTime=function(e){return this._startTime+(e!=false?this.totalDuration():this.duration())/this._timeScale};p.timeScale=function(e){if(!arguments.length){return this._timeScale}var t,i;e=e||l;if(this._timeline&&this._timeline.smoothChildTiming){t=this._pauseTime;i=t||t===0?t:this._timeline.totalTime();this._startTime=i-(i-this._startTime)*this._timeScale/e}this._timeScale=e;i=this.timeline;while(i&&i.timeline){i._dirty=true;i.totalDuration();i=i.timeline}return this};p.reversed=function(e){if(!arguments.length){return this._reversed}if(e!=this._reversed){this._reversed=e;this.totalTime(this._timeline&&!this._timeline.smoothChildTiming?this.totalDuration()-this._totalTime:this._totalTime,true)}return this};p.paused=function(e){if(!arguments.length){return this._paused}var t=this._timeline,i,r;if(e!=this._paused)if(t){if(!v&&!e){m.wake()}i=t.rawTime();r=i-this._pauseTime;if(!e&&t.smoothChildTiming){this._startTime+=r;this._uncache(false)}this._pauseTime=e?i:null;this._paused=e;this._active=this.isActive();if(!e&&r!==0&&this._initted&&this.duration()){i=t.smoothChildTiming?this._totalTime:(i-this._startTime)/this._timeScale;this.render(i,i===this._totalTime,true)}}if(this._gc&&!e){this._enabled(true,false)}return this};var O=_("core.SimpleTimeline",function(e){L.call(this,0,e);this.autoRemoveChildren=this.smoothChildTiming=true});p=O.prototype=new L;p.constructor=O;p.kill()._gc=false;p._first=p._last=p._recent=null;p._sortChildren=false;p.add=p.insert=function(e,t,i,r){var n,a;e._startTime=Number(t||0)+e._delay;if(e._paused)if(this!==e._timeline){e._pauseTime=e._startTime+(this.rawTime()-e._startTime)/e._timeScale}if(e.timeline){e.timeline._remove(e,true)}e.timeline=e._timeline=this;if(e._gc){e._enabled(true,true)}n=this._last;if(this._sortChildren){a=e._startTime;while(n&&n._startTime>a){n=n._prev}}if(n){e._next=n._next;n._next=e}else{e._next=this._first;this._first=e}if(e._next){e._next._prev=e}else{this._last=e}e._prev=n;this._recent=e;if(this._timeline){this._uncache(true)}return this};p._remove=function(e,t){if(e.timeline===this){if(!t){e._enabled(false,true)}if(e._prev){e._prev._next=e._next}else if(this._first===e){this._first=e._next}if(e._next){e._next._prev=e._prev}else if(this._last===e){this._last=e._prev}e._next=e._prev=e.timeline=null;if(e===this._recent){this._recent=this._last}if(this._timeline){this._uncache(true)}}return this};p.render=function(e,t,i){var r=this._first,n;this._totalTime=this._time=this._rawPrevTime=e;while(r){n=r._next;if(r._active||e>=r._startTime&&!r._paused&&!r._gc){if(!r._reversed){r.render((e-r._startTime)*r._timeScale,t,i)}else{r.render((!r._dirty?r._totalDuration:r.totalDuration())-(e-r._startTime)*r._timeScale,t,i)}}r=n}};p.rawTime=function(){if(!v){m.wake()}return this._totalTime};var I=_("TweenLite",function(t,i,r){L.call(this,i,r);this.render=I.prototype.render;if(t==null){throw"Cannot tween a null target."}this.target=t=typeof t!=="string"?t:I.selector(t)||t;var n=t.jquery||t.length&&t!==e&&t[0]&&(t[0]===e||t[0].nodeType&&t[0].style&&!t.nodeType),a=this.vars.overwrite,o,s,c;this._overwrite=a=a==null?q[I.defaultOverwrite]:typeof a==="number"?a>>0:q[a];if((n||t instanceof Array||t.push&&h(t))&&typeof t[0]!=="number"){this._targets=c=u(t);this._propLookup=[];this._siblings=[];for(o=0;o<c.length;o++){s=c[o];if(!s){c.splice(o--,1);continue}else if(typeof s==="string"){s=c[o--]=I.selector(s);if(typeof s==="string"){c.splice(o+1,1)}continue}else if(s.length&&s!==e&&s[0]&&(s[0]===e||s[0].nodeType&&s[0].style&&!s.nodeType)){c.splice(o--,1);this._targets=c=c.concat(u(s));continue}this._siblings[o]=J(s,this,false);if(a===1)if(this._siblings[o].length>1){te(s,this,null,1,this._siblings[o])}}}else{this._propLookup={};this._siblings=J(t,this,false);if(a===1)if(this._siblings.length>1){te(t,this,null,1,this._siblings)}}if(this.vars.immediateRender||i===0&&this._delay===0&&this.vars.immediateRender!==false){this._time=-l;this.render(Math.min(0,-this._delay))}},true),D=function(t){return t&&t.length&&t!==e&&t[0]&&(t[0]===e||t[0].nodeType&&t[0].style&&!t.nodeType)},B=function(e,t){var i={},r;for(r in e){if(!Y[r]&&(!(r in t)||r==="transform"||r==="x"||r==="y"||r==="width"||r==="height"||r==="className"||r==="border")&&(!j[r]||j[r]&&j[r]._autoCSS)){i[r]=e[r];delete e[r]}}e.css=i};p=I.prototype=new L;p.constructor=I;p.kill()._gc=false;p.ratio=0;p._firstPT=p._targets=p._overwrittenProps=p._startAt=null;p._notifyPluginsOfEnabled=p._lazy=false;I.version="1.20.3";I.defaultEase=p._ease=new w(null,null,1,1);I.defaultOverwrite="auto";I.ticker=m;I.autoSleep=120;I.lagSmoothing=function(e,t){m.lagSmoothing(e,t)};I.selector=e.$||e.jQuery||function(t){var i=e.$||e.jQuery;if(i){I.selector=i;return i(t)}return typeof n==="undefined"?t:n.querySelectorAll?n.querySelectorAll(t):n.getElementById(t.charAt(0)==="#"?t.substr(1):t)};var G=[],k={},N=/(?:(-|-=|\+=)?\d*\.?\d*(?:e[\-+]?\d+)?)[0-9]/gi,U=/[\+-]=-?[\.\d]/,F=function(e){var t=this._firstPT,i=1e-6,r;while(t){r=!t.blob?t.c*e+t.s:e===1&&this.end!=null?this.end:e?this.join(""):this.start;if(t.m){r=t.m(r,this._target||t.t)}else if(r<i)if(r>-i&&!t.blob){r=0}if(!t.f){t.t[t.p]=r}else if(t.fp){t.t[t.p](t.fp,r)}else{t.t[t.p](r)}t=t._next}},H=function(e,t,i,r){var n=[],a=0,o="",s=0,l,u,c,h,f,d,p;n.start=e;n.end=t;e=n[0]=e+"";t=n[1]=t+"";if(i){i(n);e=n[0];t=n[1]}n.length=0;l=e.match(N)||[];u=t.match(N)||[];if(r){r._next=null;r.blob=1;n._firstPT=n._applyPT=r}f=u.length;for(h=0;h<f;h++){p=u[h];d=t.substr(a,t.indexOf(p,a)-a);o+=d||!h?d:",";a+=d.length;if(s){s=(s+1)%5}else if(d.substr(-5)==="rgba("){s=1}if(p===l[h]||l.length<=h){o+=p}else{if(o){n.push(o);o=""}c=parseFloat(l[h]);n.push(c);n._firstPT={_next:n._firstPT,t:n,p:n.length-1,s:c,c:(p.charAt(1)==="="?parseInt(p.charAt(0)+"1",10)*parseFloat(p.substr(2)):parseFloat(p)-c)||0,f:0,m:s&&s<4?Math.round:0}}a+=p.length}o+=t.substr(a);if(o){n.push(o)}n.setRatio=F;if(U.test(t)){n.end=null}return n},z=function(e,t,i,r,n,a,o,s,l){if(typeof r==="function"){r=r(l||0,e)}var u=typeof e[t],c=u!=="function"?"":t.indexOf("set")||typeof e["get"+t.substr(3)]!=="function"?t:"get"+t.substr(3),h=i!=="get"?i:!c?e[t]:o?e[c](o):e[c](),f=typeof r==="string"&&r.charAt(1)==="=",d={t:e,p:t,s:h,f:u==="function",pg:0,n:n||t,m:!a?0:typeof a==="function"?a:Math.round,pr:0,c:f?parseInt(r.charAt(0)+"1",10)*parseFloat(r.substr(2)):parseFloat(r)-h||0},p;if(typeof h!=="number"||typeof r!=="number"&&!f){if(o||isNaN(h)||!f&&isNaN(r)||typeof h==="boolean"||typeof r==="boolean"){d.fp=o;p=H(h,f?parseFloat(d.s)+d.c:r,s||I.defaultStringFilter,d);d={t:p,p:"setRatio",s:0,c:1,f:2,pg:0,n:n||t,pr:0,m:0}}else{d.s=parseFloat(h);if(!f){d.c=parseFloat(r)-d.s||0}}}if(d.c){if(d._next=this._firstPT){d._next._prev=d}this._firstPT=d;return d}},V=I._internals={isArray:h,isSelector:D,lazyTweens:G,blobDif:H},j=I._plugins={},W=V.tweenLookup={},X=0,Y=V.reservedProps={ease:1,delay:1,overwrite:1,onComplete:1,onCompleteParams:1,onCompleteScope:1,useFrames:1,runBackwards:1,startAt:1,onUpdate:1,onUpdateParams:1,onUpdateScope:1,onStart:1,onStartParams:1,onStartScope:1,onReverseComplete:1,onReverseCompleteParams:1,onReverseCompleteScope:1,onRepeat:1,onRepeatParams:1,onRepeatScope:1,easeParams:1,yoyo:1,immediateRender:1,repeat:1,repeatDelay:1,data:1,paused:1,reversed:1,autoCSS:1,lazy:1,onOverwrite:1,callbackScope:1,stringFilter:1,id:1,yoyoEase:1},q={none:0,all:1,auto:2,concurrent:3,allOnStart:4,preexisting:5,true:1,false:0},Z=L._rootFramesTimeline=new O,K=L._rootTimeline=new O,$=30,Q=V.lazyRender=function(){var e=G.length,t;k={};while(--e>-1){t=G[e];if(t&&t._lazy!==false){t.render(t._lazy[0],t._lazy[1],true);t._lazy=false}}G.length=0};K._startTime=m.time;Z._startTime=m.frame;K._active=Z._active=true;setTimeout(Q,1);L._updateRoot=I.render=function(){var e,t,i;if(G.length){Q()}K.render((m.time-K._startTime)*K._timeScale,false,false);Z.render((m.frame-Z._startTime)*Z._timeScale,false,false);if(G.length){Q()}if(m.frame>=$){$=m.frame+(parseInt(I.autoSleep,10)||120);for(i in W){t=W[i].tweens;e=t.length;while(--e>-1){if(t[e]._gc){t.splice(e,1)}}if(t.length===0){delete W[i]}}i=K._first;if(!i||i._paused)if(I.autoSleep&&!Z._first&&m._listeners.tick.length===1){while(i&&i._paused){i=i._next}if(!i){m.sleep()}}}};m.addEventListener("tick",L._updateRoot);var J=function(e,t,i){var r=e._gsTweenID,n,a;if(!W[r||(e._gsTweenID=r="t"+X++)]){W[r]={target:e,tweens:[]}}if(t){n=W[r].tweens;n[a=n.length]=t;if(i){while(--a>-1){if(n[a]===t){n.splice(a,1)}}}}return W[r].tweens},ee=function(e,t,i,r){var n=e.vars.onOverwrite,a,o;if(n){a=n(e,t,i,r)}n=I.onOverwrite;if(n){o=n(e,t,i,r)}return a!==false&&o!==false},te=function(e,t,i,r,n){var a,o,s,u;if(r===1||r>=4){u=n.length;for(a=0;a<u;a++){if((s=n[a])!==t){if(!s._gc){if(s._kill(null,e,t)){o=true}}}else if(r===5){break}}return o}var c=t._startTime+l,h=[],f=0,d=t._duration===0,p;a=n.length;while(--a>-1){if((s=n[a])===t||s._gc||s._paused){}else if(s._timeline!==t._timeline){p=p||ie(t,0,d);if(ie(s,p,d)===0){h[f++]=s}}else if(s._startTime<=c)if(s._startTime+s.totalDuration()/s._timeScale>c)if(!((d||!s._initted)&&c-s._startTime<=2e-10)){h[f++]=s}}a=f;while(--a>-1){s=h[a];if(r===2)if(s._kill(i,e,t)){o=true}if(r!==2||!s._firstPT&&s._initted){if(r!==2&&!ee(s,t)){continue}if(s._enabled(false,false)){o=true}}}return o},ie=function(e,t,i){var r=e._timeline,n=r._timeScale,a=e._startTime;while(r._timeline){a+=r._startTime;n*=r._timeScale;if(r._paused){return-100}r=r._timeline}a/=n;return a>t?a-t:i&&a===t||!e._initted&&a-t<2*l?l:(a+=e.totalDuration()/e._timeScale/n)>t+l?0:a-t-l};p._init=function(){var e=this.vars,t=this._overwrittenProps,i=this._duration,r=!!e.immediateRender,n=e.ease,a,o,s,l,u,c;if(e.startAt){if(this._startAt){this._startAt.render(-1,true);this._startAt.kill()}u={};for(l in e.startAt){u[l]=e.startAt[l]}u.data="isStart";u.overwrite=false;u.immediateRender=true;u.lazy=r&&e.lazy!==false;u.startAt=u.delay=null;u.onUpdate=e.onUpdate;u.onUpdateParams=e.onUpdateParams;u.onUpdateScope=e.onUpdateScope||e.callbackScope||this;this._startAt=I.to(this.target,0,u);if(r){if(this._time>0){this._startAt=null}else if(i!==0){return}}}else if(e.runBackwards&&i!==0){if(this._startAt){this._startAt.render(-1,true);this._startAt.kill();this._startAt=null}else{if(this._time!==0){r=false}s={};for(l in e){if(!Y[l]||l==="autoCSS"){s[l]=e[l]}}s.overwrite=0;s.data="isFromStart";s.lazy=r&&e.lazy!==false;s.immediateRender=r;this._startAt=I.to(this.target,0,s);if(!r){this._startAt._init();this._startAt._enabled(false);if(this.vars.immediateRender){this._startAt=null}}else if(this._time===0){return}}}this._ease=n=!n?I.defaultEase:n instanceof w?n:typeof n==="function"?new w(n,e.easeParams):T[n]||I.defaultEase;if(e.easeParams instanceof Array&&n.config){this._ease=n.config.apply(n,e.easeParams)}this._easeType=this._ease._type;this._easePower=this._ease._power;this._firstPT=null;if(this._targets){c=this._targets.length
;for(a=0;a<c;a++){if(this._initProps(this._targets[a],this._propLookup[a]={},this._siblings[a],t?t[a]:null,a)){o=true}}}else{o=this._initProps(this.target,this._propLookup,this._siblings,t,0)}if(o){I._onPluginEvent("_onInitAllProps",this)}if(t)if(!this._firstPT)if(typeof this.target!=="function"){this._enabled(false,false)}if(e.runBackwards){s=this._firstPT;while(s){s.s+=s.c;s.c=-s.c;s=s._next}}this._onUpdate=e.onUpdate;this._initted=true};p._initProps=function(t,i,r,n,a){var o,s,l,u,c,f;if(t==null){return false}if(k[t._gsTweenID]){Q()}if(!this.vars.css)if(t.style)if(t!==e&&t.nodeType)if(j.css)if(this.vars.autoCSS!==false){B(this.vars,t)}for(o in this.vars){f=this.vars[o];if(Y[o]){if(f)if(f instanceof Array||f.push&&h(f))if(f.join("").indexOf("{self}")!==-1){this.vars[o]=f=this._swapSelfInParams(f,this)}}else if(j[o]&&(u=new j[o])._onInitTween(t,this.vars[o],this,a)){this._firstPT=c={_next:this._firstPT,t:u,p:"setRatio",s:0,c:1,f:1,n:o,pg:1,pr:u._priority,m:0};s=u._overwriteProps.length;while(--s>-1){i[u._overwriteProps[s]]=this._firstPT}if(u._priority||u._onInitAllProps){l=true}if(u._onDisable||u._onEnable){this._notifyPluginsOfEnabled=true}if(c._next){c._next._prev=c}}else{i[o]=z.call(this,t,o,"get",f,o,0,null,this.vars.stringFilter,a)}}if(n)if(this._kill(n,t)){return this._initProps(t,i,r,n,a)}if(this._overwrite>1)if(this._firstPT)if(r.length>1)if(te(t,this,i,this._overwrite,r)){this._kill(i,t);return this._initProps(t,i,r,n,a)}if(this._firstPT)if(this.vars.lazy!==false&&this._duration||this.vars.lazy&&!this._duration){k[t._gsTweenID]=true}return l};p.render=function(e,t,i){var r=this._time,n=this._duration,a=this._rawPrevTime,o,s,u,c;if(e>=n-1e-7&&e>=0){this._totalTime=this._time=n;this.ratio=this._ease._calcEnd?this._ease.getRatio(1):1;if(!this._reversed){o=true;s="onComplete";i=i||this._timeline.autoRemoveChildren}if(n===0)if(this._initted||!this.vars.lazy||i){if(this._startTime===this._timeline._duration){e=0}if(a<0||e<=0&&e>=-1e-7||a===l&&this.data!=="isPause")if(a!==e){i=true;if(a>l){s="onReverseComplete"}}this._rawPrevTime=c=!t||e||a===e?e:l}}else if(e<1e-7){this._totalTime=this._time=0;this.ratio=this._ease._calcEnd?this._ease.getRatio(0):0;if(r!==0||n===0&&a>0){s="onReverseComplete";o=this._reversed}if(e<0){this._active=false;if(n===0)if(this._initted||!this.vars.lazy||i){if(a>=0&&!(a===l&&this.data==="isPause")){i=true}this._rawPrevTime=c=!t||e||a===e?e:l}}if(!this._initted||this._startAt&&this._startAt.progress()){i=true}}else{this._totalTime=this._time=e;if(this._easeType){var h=e/n,f=this._easeType,d=this._easePower;if(f===1||f===3&&h>=.5){h=1-h}if(f===3){h*=2}if(d===1){h*=h}else if(d===2){h*=h*h}else if(d===3){h*=h*h*h}else if(d===4){h*=h*h*h*h}if(f===1){this.ratio=1-h}else if(f===2){this.ratio=h}else if(e/n<.5){this.ratio=h/2}else{this.ratio=1-h/2}}else{this.ratio=this._ease.getRatio(e/n)}}if(this._time===r&&!i){return}else if(!this._initted){this._init();if(!this._initted||this._gc){return}else if(!i&&this._firstPT&&(this.vars.lazy!==false&&this._duration||this.vars.lazy&&!this._duration)){this._time=this._totalTime=r;this._rawPrevTime=a;G.push(this);this._lazy=[e,t];return}if(this._time&&!o){this.ratio=this._ease.getRatio(this._time/n)}else if(o&&this._ease._calcEnd){this.ratio=this._ease.getRatio(this._time===0?0:1)}}if(this._lazy!==false){this._lazy=false}if(!this._active)if(!this._paused&&this._time!==r&&e>=0){this._active=true}if(r===0){if(this._startAt){if(e>=0){this._startAt.render(e,true,i)}else if(!s){s="_dummyGS"}}if(this.vars.onStart)if(this._time!==0||n===0)if(!t){this._callback("onStart")}}u=this._firstPT;while(u){if(u.f){u.t[u.p](u.c*this.ratio+u.s)}else{u.t[u.p]=u.c*this.ratio+u.s}u=u._next}if(this._onUpdate){if(e<0)if(this._startAt&&e!==-1e-4){this._startAt.render(e,true,i)}if(!t)if(this._time!==r||o||i){this._callback("onUpdate")}}if(s)if(!this._gc||i){if(e<0&&this._startAt&&!this._onUpdate&&e!==-1e-4){this._startAt.render(e,true,i)}if(o){if(this._timeline.autoRemoveChildren){this._enabled(false,false)}this._active=false}if(!t&&this.vars[s]){this._callback(s)}if(n===0&&this._rawPrevTime===l&&c!==l){this._rawPrevTime=0}}};p._kill=function(e,t,i){if(e==="all"){e=null}if(e==null)if(t==null||t===this.target){this._lazy=false;return this._enabled(false,false)}t=typeof t!=="string"?t||this._targets||this.target:I.selector(t)||t;var r=i&&this._time&&i._startTime===this._startTime&&this._timeline===i._timeline,n,a,o,s,l,u,c,f,d;if((h(t)||D(t))&&typeof t[0]!=="number"){n=t.length;while(--n>-1){if(this._kill(e,t[n],i)){u=true}}}else{if(this._targets){n=this._targets.length;while(--n>-1){if(t===this._targets[n]){l=this._propLookup[n]||{};this._overwrittenProps=this._overwrittenProps||[];a=this._overwrittenProps[n]=e?this._overwrittenProps[n]||{}:"all";break}}}else if(t!==this.target){return false}else{l=this._propLookup;a=this._overwrittenProps=e?this._overwrittenProps||{}:"all"}if(l){c=e||l;f=e!==a&&a!=="all"&&e!==l&&(typeof e!=="object"||!e._tempKill);if(i&&(I.onOverwrite||this.vars.onOverwrite)){for(o in c){if(l[o]){if(!d){d=[]}d.push(o)}}if((d||!e)&&!ee(this,i,t,d)){return false}}for(o in c){if(s=l[o]){if(r){if(s.f){s.t[s.p](s.s)}else{s.t[s.p]=s.s}u=true}if(s.pg&&s.t._kill(c)){u=true}if(!s.pg||s.t._overwriteProps.length===0){if(s._prev){s._prev._next=s._next}else if(s===this._firstPT){this._firstPT=s._next}if(s._next){s._next._prev=s._prev}s._next=s._prev=null}delete l[o]}if(f){a[o]=1}}if(!this._firstPT&&this._initted){this._enabled(false,false)}}}return u};p.invalidate=function(){if(this._notifyPluginsOfEnabled){I._onPluginEvent("_onDisable",this)}this._firstPT=this._overwrittenProps=this._startAt=this._onUpdate=null;this._notifyPluginsOfEnabled=this._active=this._lazy=false;this._propLookup=this._targets?{}:[];L.prototype.invalidate.call(this);if(this.vars.immediateRender){this._time=-l;this.render(Math.min(0,-this._delay))}return this};p._enabled=function(e,t){if(!v){m.wake()}if(e&&this._gc){var i=this._targets,r;if(i){r=i.length;while(--r>-1){this._siblings[r]=J(i[r],this,true)}}else{this._siblings=J(this.target,this,true)}}L.prototype._enabled.call(this,e,t);if(this._notifyPluginsOfEnabled)if(this._firstPT){return I._onPluginEvent(e?"_onEnable":"_onDisable",this)}return false};I.to=function(e,t,i){return new I(e,t,i)};I.from=function(e,t,i){i.runBackwards=true;i.immediateRender=i.immediateRender!=false;return new I(e,t,i)};I.fromTo=function(e,t,i,r){r.startAt=i;r.immediateRender=r.immediateRender!=false&&i.immediateRender!=false;return new I(e,t,r)};I.delayedCall=function(e,t,i,r,n){return new I(t,0,{delay:e,onComplete:t,onCompleteParams:i,callbackScope:r,onReverseComplete:t,onReverseCompleteParams:i,immediateRender:false,lazy:false,useFrames:n,overwrite:0})};I.set=function(e,t){return new I(e,0,t)};I.getTweensOf=function(e,t){if(e==null){return[]}e=typeof e!=="string"?e:I.selector(e)||e;var i,r,n,a;if((h(e)||D(e))&&typeof e[0]!=="number"){i=e.length;r=[];while(--i>-1){r=r.concat(I.getTweensOf(e[i],t))}i=r.length;while(--i>-1){a=r[i];n=i;while(--n>-1){if(a===r[n]){r.splice(i,1)}}}}else if(e._gsTweenID){r=J(e).concat();i=r.length;while(--i>-1){if(r[i]._gc||t&&!r[i].isActive()){r.splice(i,1)}}}return r||[]};I.killTweensOf=I.killDelayedCallsTo=function(e,t,i){if(typeof t==="object"){i=t;t=false}var r=I.getTweensOf(e,t),n=r.length;while(--n>-1){r[n]._kill(i,e)}};var re=_("plugins.TweenPlugin",function(e,t){this._overwriteProps=(e||"").split(",");this._propName=this._overwriteProps[0];this._priority=t||0;this._super=re.prototype},true);p=re.prototype;re.version="1.19.0";re.API=2;p._firstPT=null;p._addTween=z;p.setRatio=F;p._kill=function(e){var t=this._overwriteProps,i=this._firstPT,r;if(e[this._propName]!=null){this._overwriteProps=[]}else{r=t.length;while(--r>-1){if(e[t[r]]!=null){t.splice(r,1)}}}while(i){if(e[i.n]!=null){if(i._next){i._next._prev=i._prev}if(i._prev){i._prev._next=i._next;i._prev=null}else if(this._firstPT===i){this._firstPT=i._next}}i=i._next}return false};p._mod=p._roundProps=function(e){var t=this._firstPT,i;while(t){i=e[this._propName]||t.n!=null&&e[t.n.split(this._propName+"_").join("")];if(i&&typeof i==="function"){if(t.f===2){t.t._applyPT.m=i}else{t.m=i}}t=t._next}};I._onPluginEvent=function(e,t){var i=t._firstPT,r,n,a,o,s;if(e==="_onInitAllProps"){while(i){s=i._next;n=a;while(n&&n.pr>i.pr){n=n._next}if(i._prev=n?n._prev:o){i._prev._next=i}else{a=i}if(i._next=n){n._prev=i}else{o=i}i=s}i=t._firstPT=a}while(i){if(i.pg)if(typeof i.t[e]==="function")if(i.t[e]()){r=true}i=i._next}return r};re.activate=function(e){var t=e.length;while(--t>-1){if(e[t].API===re.API){j[(new e[t])._propName]=e[t]}}return true};b.plugin=function(e){if(!e||!e.propName||!e.init||!e.API){throw"illegal plugin definition."}var t=e.propName,i=e.priority||0,r=e.overwriteProps,n={init:"_onInitTween",set:"setRatio",kill:"_kill",round:"_mod",mod:"_mod",initAll:"_onInitAllProps"},a=_("plugins."+t.charAt(0).toUpperCase()+t.substr(1)+"Plugin",function(){re.call(this,t,i);this._overwriteProps=r||[]},e.global===true),o=a.prototype=new re(t),s;o.constructor=a;a.API=e.API;for(s in n){if(typeof e[s]==="function"){o[n[s]]=e[s]}}a.version=e.version;re.activate([a]);return a};f=e._gsQueue;if(f){for(d=0;d<f.length;d++){f[d]()}for(p in g){if(!g[p].func){e.console.log("GSAP encountered missing dependency: "+p)}}}v=false})(typeof t!=="undefined"&&t.exports&&typeof e!=="undefined"?e:this||window,"TweenMax")}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{}],15:[function(e,t,i){t.exports=function(e){function t(r){if(i[r])return i[r].exports;var n=i[r]={i:r,l:!1,exports:{}};return e[r].call(n.exports,n,n.exports,t),n.l=!0,n.exports}var i={};return t.m=e,t.c=i,t.i=function(e){return e},t.d=function(e,i,r){t.o(e,i)||Object.defineProperty(e,i,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var i=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(i,"a",i),i},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=50)}([function(e,t,i){"use strict";function r(e){for(var t=document.createElement(e),i=arguments.length,r=Array(i>1?i-1:0),n=1;n<i;n++)r[n-1]=arguments[n];return o.apply(void 0,[t].concat(r)),t}function n(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document.body;t.appendChild(e)}function a(e){var t={left:0,top:0};if(e.offsetParent)do{t.left+=e.offsetLeft,t.top+=e.offsetTop}while(e=e.offsetParent);return t}function o(e){for(var t=arguments.length,i=Array(t>1?t-1:0),r=1;r<t;r++)i[r-1]=arguments[r];i.forEach(function(t){return s(e,t)})}function s(e,t){l(e,t)||(e.classList?e.classList.add(t):e.className+=" "+t)}function l(e,t){return e.classList?e.classList.contains(t):new RegExp("(^| )"+t+"( |$)","gi").test(e.className)}function u(e,t){l(e,t)&&(e.classList?e.classList.remove(t):e.className=e.className.replace(new RegExp("(^|\\b)"+t.split(" ").join("|")+"(\\b|$)","gi")," "))}function c(e,t){l(e,t)?u(e,t):s(e,t)}Object.defineProperty(t,"__esModule",{value:!0}),t.createElement=r,t.appendElement=n,t.offset=a,t.addClasses=o,t.addClass=s,t.hasClass=l,t.removeClass=u,t.toggleClass=c},function(e,t){e.exports=function(){var e=[];return e.toString=function(){for(var e=[],t=0;t<this.length;t++){var i=this[t];i[2]?e.push("@media "+i[2]+"{"+i[1]+"}"):e.push(i[1])}return e.join("")},e.i=function(t,i){"string"==typeof t&&(t=[[null,t,""]]);for(var r={},n=0;n<this.length;n++){var a=this[n][0];"number"==typeof a&&(r[a]=!0)}for(n=0;n<t.length;n++){var o=t[n];"number"==typeof o[0]&&r[o[0]]||(i&&!o[2]?o[2]=i:i&&(o[2]="("+o[2]+") and ("+i+")"),e.push(o))}},e}},function(e,t){function i(e,t){for(var i=0;i<e.length;i++){var r=e[i],n=f[r.id];if(n){n.refs++;for(var a=0;a<n.parts.length;a++)n.parts[a](r.parts[a]);for(;a<r.parts.length;a++)n.parts.push(l(r.parts[a],t))}else{for(var o=[],a=0;a<r.parts.length;a++)o.push(l(r.parts[a],t));f[r.id]={id:r.id,refs:1,parts:o}}}}function r(e){for(var t=[],i={},r=0;r<e.length;r++){var n=e[r],a=n[0],o=n[1],s=n[2],l=n[3],u={css:o,media:s,sourceMap:l};i[a]?i[a].parts.push(u):t.push(i[a]={id:a,parts:[u]})}return t}function n(e,t){var i=m(),r=y[y.length-1];if("top"===e.insertAt)r?r.nextSibling?i.insertBefore(t,r.nextSibling):i.appendChild(t):i.insertBefore(t,i.firstChild),y.push(t);else{if("bottom"!==e.insertAt)throw new Error("Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.");i.appendChild(t)}}function a(e){e.parentNode.removeChild(e);var t=y.indexOf(e);t>=0&&y.splice(t,1)}function o(e){var t=document.createElement("style");return t.type="text/css",n(e,t),t}function s(e){var t=document.createElement("link");return t.rel="stylesheet",n(e,t),t}function l(e,t){var i,r,n;if(t.singleton){var l=g++;i=v||(v=o(t)),r=u.bind(null,i,l,!1),n=u.bind(null,i,l,!0)}else e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(i=s(t),r=h.bind(null,i),n=function(){a(i),i.href&&URL.revokeObjectURL(i.href)}):(i=o(t),r=c.bind(null,i),n=function(){a(i)});return r(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;r(e=t)}else n()}}function u(e,t,i,r){var n=i?"":r.css;if(e.styleSheet)e.styleSheet.cssText=b(t,n);else{var a=document.createTextNode(n),o=e.childNodes;o[t]&&e.removeChild(o[t]),o.length?e.insertBefore(a,o[t]):e.appendChild(a)}}function c(e,t){var i=t.css,r=t.media;if(r&&e.setAttribute("media",r),e.styleSheet)e.styleSheet.cssText=i;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(i))}}function h(e,t){var i=t.css,r=t.sourceMap;r&&(i+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(r))))+" */");var n=new Blob([i],{type:"text/css"}),a=e.href;e.href=URL.createObjectURL(n),a&&URL.revokeObjectURL(a)}var f={},d=function(e){var t;return function(){return"undefined"==typeof t&&(t=e.apply(this,arguments)),t}},p=d(function(){return/msie [6-9]\b/.test(window.navigator.userAgent.toLowerCase())}),m=d(function(){return document.head||document.getElementsByTagName("head")[0]}),v=null,g=0,y=[];e.exports=function(e,t){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");t=t||{},"undefined"==typeof t.singleton&&(t.singleton=p()),"undefined"==typeof t.insertAt&&(t.insertAt="bottom");var n=r(e);return i(n,t),function(e){for(var a=[],o=0;o<n.length;o++){var s=n[o],l=f[s.id];l.refs--,a.push(l)}if(e){var u=r(e);i(u,t)}for(var o=0;o<a.length;o++){var l=a[o];if(0===l.refs){for(var c=0;c<l.parts.length;c++)l.parts[c]();delete f[l.id]}}}};var b=function(){var e=[];return function(t,i){return e[t]=i,e.filter(Boolean).join("\n")}}()},function(e,t,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),l=i(5),u=r(l),c=i(8),h=r(c),f=function(e){function t(e,i){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";n(this,t),r.classNames=r.classNames||[],r.classNames.push("guigui-component");var s=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,r,o));return(0,h.default)(s),s.onWatch=s.onWatch.bind(s),s.isWatched=r.watch===!0,s._targetObject=e,s._targetProperty=i,s._value=e[i],s.onEndInteraction(),s}return o(t,e),s(t,[{key:"invalidate",value:function(){this._value=this._targetObject[this._targetProperty]}},{key:"onWatch",value:function(){this._targetObject[this._targetProperty]!==this._value&&this.invalidate()}},{key:"onStartInteraction",value:function(){this.isWatched&&clearInterval(this._watchInterval)}},{key:"onEndInteraction",value:function(){this.isWatched&&(this._watchInterval=setInterval(this.onWatch,100))}}]),t}(u.default);t.default=f},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n=(t.isBoolean=function(e){return e===!0||e===!1},t.isFunction=function(e){return"function"==typeof e});t.isNumber=function(e){return"number"==typeof e},t.isArray=function(e){return Array.isArray(e)},t.isObject=function(e){return null!==e&&"object"===("undefined"==typeof e?"undefined":r(e))},t.isThreejsColor=function(e){return e.isColor&&n(e.setHex)&&n(e.getHex)}},function(e,t,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function n(e){if(Array.isArray(e)){for(var t=0,i=Array(e.length);t<e.length;t++)i[t]=e[t];return i}return Array.from(e)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),s=i(18),l=r(s),u=i(0),c=i(19),h=function(){function e(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";a(this,e),this.classNames=t.classNames||[],this.$el=u.createElement.apply(void 0,["div"].concat(n(this.classNames))),this.parent=null,this.$el.innerHTML=i}return o(e,[{key:"render",value:function(){}},{key:"appendTo",value:function(e){(0,l.default)(e)?(this.parent=e,e.appendChild(this.$el)):(0,c.warn)(e+" is not a valid dom element")}},{key:"remove",value:function(){this.parent&&(this.parent.removeChild(this.$el),this.parent=null)}}]),e}();t.default=h},function(e,t,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),l=i(17),u=r(l),c=i(5),h=r(c),f=i(0),d=i(7),p=r(d),m=function(e){function t(e,i){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;n(this,t),i.classNames=i.classNames||["guigui-folder"],r=r||'\n      <div class="guigui-folder-head">\n        <h2 class="guigui-folder-label">'+e+'</h2>\n        <div class="guigui-folder-toggle">\n          <div class="guigui-folder-toggle-line"></div>\n          <div class="guigui-folder-toggle-line"></div>\n        </div>\n      </div>\n      <div class="guigui-folder-content"></div>\n    ';var o=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,i,r));return o.toggle=o.toggle.bind(o),o.folderName=e,o.components=[],o.folders=[],o.$content=o.$el.querySelector("."+i.classNames[0]+"-content"),o.$head=o.$el.querySelector("."+i.classNames[0]+"-head"),o.$head.addEventListener("click",o.toggle),o}return o(t,e),s(t,[{key:"toggle",value:function(){(0,f.toggleClass)(this.$el,this.classNames[0]+"--opened")}},{key:"close",value:function(){(0,f.removeClass)(this.$el,this.classNames[0]+"--opened")}},{key:"open",value:function(){(0,f.addClass)(this.$el,this.classNames[0]+"--opened")}},{key:"addFolder",value:function(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=new t(e,i);return this.folders.push(r),r.appendTo(this.$content),r}},{key:"add",value:function(e,t,i,r){var n=(0,u.default)(e,t,i,r);return this.components.push(n),n.appendTo(this.$content),n}},{key:"addColorPicker",value:function(){return this.addColor.apply(this,arguments)}},{key:"addColor",value:function(e,t,i){var r=new p.default(e,t,i);return this.components.push(r),r.appendTo(this.$content),r}}]),t}(h.default);t.default=m},function(e,t,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),l=function e(t,i,r){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,i);if(void 0===n){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,i,r)}if("value"in n)return n.value;var o=n.get;if(void 0!==o)return o.call(r)},u=i(3),c=r(u),h=i(0),f=i(4),d=i(40),p=r(d);i(41);var m=function(e){function t(e,i){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};n(this,t);var o=r.label,s=void 0===o?i:o,l='\n      <div class="guigui-colorpicker-label">'+s+'</div>\n      <div class="guigui-colorpicker-state">\n        <input type="text" class="guigui-colorpicker-text" value="#FF0000"/>\n      </div>\n    ',u=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,i,{classNames:["guigui-colorpicker"]},l));u.onColorPickerClick=u.onColorPickerClick.bind(u),u.onColorPickerUpdate=u.onColorPickerUpdate.bind(u),u.onPickerMouseLeave=u.onPickerMouseLeave.bind(u),u.onFinishedInteracting=u.onFinishedInteracting.bind(u),u.onTextChange=u.onTextChange.bind(u);var c=e[i];return u.isThreejsColor=(0,f.isThreejsColor)(c),u.initialColorFormat=(0,f.isNumber)(c)||u.isThreejsColor?"number":"string",u.isOpened=!1,u.$text=u.$el.querySelector(".guigui-colorpicker-text"),u.$state=u.$el.querySelector(".guigui-colorpicker-state"),u.colorPicker=new p.default({el:u.$el,color:u.isThreejsColor?u._targetObject[u._targetProperty].getHex():u._targetObject[u._targetProperty],background:"#30343c"}),u.$picker=u.colorPicker.$el,u.colorPicker.onChange(u.onColorPickerUpdate),u.$text.value=u.colorPicker.color.toHexString(),u.onTextChange(),u.$state.addEventListener("click",u.onColorPickerClick),u.$text.addEventListener("change",u.onTextChange),u}return o(t,e),s(t,[{key:"remove",value:function(){this.$state.removeEventListener("click",this.onColorPickerClick),this.$picker.removeEventListener("mouseleave",this.onPickerMouseLeave),window.removeEventListener("mouseup",this.onFinishedInteracting),l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"remove",this).call(this)}},{key:"getColor",value:function(){return"number"===this.initialColorFormat?this.colorPicker.getHexNumber():this.colorPicker.getHexString()}},{key:"_closePicker",value:function(){this.isOpened=!1,(0,h.removeClass)(this.$el,"guigui-colorpicker--opened"),this.onEndInteraction()}},{key:"invalidate",value:function(){this.colorPicker.setColor(this._value),this.onColorPickerUpdate()}},{key:"onTextChange",value:function(){this.colorPicker.setColor(this.$text.value)}},{key:"onColorPickerClick",value:function(){this.isOpened=!this.isOpened,this.isOpened?(this.onStartInteraction(),(0,h.addClass)(this.$el,"guigui-colorpicker--opened"),this.$picker.addEventListener("mouseleave",this.onPickerMouseLeave)):this._closePicker()}},{key:"onPickerMouseLeave",value:function(){this.$picker.removeEventListener("mouseleave",this.onPickerMouseLeave),this.colorPicker.choosing?window.addEventListener("mouseup",this.onFinishedInteracting):this._closePicker()}},{key:"onFinishedInteracting",value:function(){window.removeEventListener("mouseup",this.onFinishedInteracting),this._closePicker()}},{key:"onColorPickerUpdate",value:function(){var e=this.colorPicker.getHexString(),t=this.getColor();this._value=t,this.$state.style.background=e,this.$text.value=e,this.$text.style.color=this.colorPicker.isDark()?"white":"black",this.isThreejsColor?this._targetObject[this._targetProperty].setHex(t):this._targetObject[this._targetProperty]=t,this.emit("update",t)}}]),t}(c.default);t.default=m},function(e,t,i){function r(e){if(e)return n(e)}function n(e){for(var t in r.prototype)e[t]=r.prototype[t];return e}e.exports=r,r.prototype.on=r.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this},r.prototype.once=function(e,t){function i(){this.off(e,i),t.apply(this,arguments)}return i.fn=t,this.on(e,i),this},r.prototype.off=r.prototype.removeListener=r.prototype.removeAllListeners=r.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var i=this._callbacks["$"+e];if(!i)return this;if(1==arguments.length)return delete this._callbacks["$"+e],this;for(var r,n=0;n<i.length;n++)if(r=i[n],r===t||r.fn===t){i.splice(n,1);break}return this},r.prototype.emit=function(e){this._callbacks=this._callbacks||{};var t=[].slice.call(arguments,1),i=this._callbacks["$"+e];if(i){i=i.slice(0);for(var r=0,n=i.length;r<n;++r)i[r].apply(this,t)}return this},r.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]},r.prototype.hasListeners=function(e){return!!this.listeners(e).length}},function(e,t,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),l=i(5),u=r(l),c=i(0),h=function(e){function t(e,i){n(this,t);var r='\n      <div class="guigui-toggle-line"></div>\n      <div class="guigui-toggle-line"></div>\n    ',o=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,{classNames:["guigui-toggle"]},r));return o.toggle=o.toggle.bind(o),o.$container=e,o.containerClass=i,o.$el.addEventListener("click",o.toggle),o}return o(t,e),s(t,[{key:"toggle",value:function(){(0,c.toggleClass)(this.$el,this.classNames[0]+"--opened"),(0,c.toggleClass)(this.$container,this.containerClass+"--opened")}}]),t}(u.default);t.default=h},function(e,t,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=i(6),l=r(s),u=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";n(this,t);var i='\n      <div class="guigui-panel-head">\n        <h2 class="guigui-panel-label">'+e+'</h2>\n      </div>\n      <div class="guigui-panel-content"></div>\n    ';return a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,{classNames:["guigui-panel","guigui-panel--opened"]},i))}return o(t,e),t}(l.default);t.default=u},function(e,t,i){var r=i(29);"string"==typeof r&&(r=[[e.i,r,""]]);i(2)(r,{});r.locals&&(e.exports=r.locals)},function(e,t,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),l=function e(t,i,r){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,i);if(void 0===n){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,i,r)}if("value"in n)return n.value;var o=n.get;if(void 0!==o)return o.call(r)},u=i(3),c=r(u),h=i(0);i(42);var f=function(e){function t(e,i){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};n(this,t);var o=r.label,s=void 0===o?i:o,l=r.scope,u=void 0===l?e:l,c='\n      <div class="guigui-launcher-label">'+s+"<span>()</span></div>\n    ",h=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,i,{classNames:["guigui-launcher"]},c));return h.onButtonClick=h.onButtonClick.bind(h),h.onMouseDown=h.onMouseDown.bind(h),h.onMouseUp=h.onMouseUp.bind(h),h.labelText=s,h.callbackScope=u,h.$el.addEventListener("click",h.onButtonClick),h.$el.addEventListener("mousedown",h.onMouseDown),h}return o(t,e),s(t,[{key:"remove",value:function(){this.$el.removeEventListener("click",this.onButtonClick),this.$el.removeEventListener("mousedown",this.onMouseDown),window.removeEventListener("mouseup",this.onMouseUp),l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"remove",this).call(this)}},{key:"onButtonClick",value:function(e){this._targetObject[this._targetProperty].call(this.callbackScope)}},{key:"onMouseDown",value:function(e){(0,h.addClass)(this.$el,"guigui-launcher--pressed"),window.addEventListener("mouseup",this.onMouseUp)}},{key:"onMouseUp",value:function(e){window.removeEventListener("mouseup",this.onMouseUp),(0,
h.removeClass)(this.$el,"guigui-launcher--pressed")}}]),t}(c.default);t.default=f},function(e,t,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),l=function e(t,i,r){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,i);if(void 0===n){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,i,r)}if("value"in n)return n.value;var o=n.get;if(void 0!==o)return o.call(r)},u=i(3),c=r(u),h=(i(0),i(4));i(43);var f=function(e){function t(e,i,r){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};n(this,t);var s=o.label,l=void 0===s?i:s,u=e[i];r=r.map(function(e){return(0,h.isObject)(e)&&e.name&&e.value?e:{name:e,value:e}});var c=r.map(function(e){var t=e.value,i=e.name,r=t===u?"selected":"";return"<option "+r+' value="'+t+'">'+i+"</option>"}).join(""),f='\n      <div class="guigui-select-label">'+l+"</div>\n      <select>\n        "+c+"\n      </select>\n    ",d=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,i,{classNames:["guigui-select"]},f));return d.onSelectChange=d.onSelectChange.bind(d),d.$select=d.$el.querySelector("select"),d.value=u,d.$select.addEventListener("change",d.onSelectChange),d}return o(t,e),s(t,[{key:"onSelectChange",value:function(e){this.value=this.$select.value}},{key:"invalidate",value:function(){l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"invalidate",this).call(this),this.value=this._value}},{key:"value",get:function(){return this.$select.value},set:function(e){this.$select.value=e,this._value=e,this._targetObject[this._targetProperty]=e,this.emit("update",this.sliderValue)}}]),t}(c.default);t.default=f},function(e,t,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),l=function e(t,i,r){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,i);if(void 0===n){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,i,r)}if("value"in n)return n.value;var o=n.get;if(void 0!==o)return o.call(r)},u=i(3),c=r(u),h=i(20),f=i(0);i(44);var d=function(e){function t(e,i){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};n(this,t);var o=r.step,s=void 0===o?1:o,l=r.min,u=void 0===l?0:l,c=r.max,f=void 0===c?100:c,d=r.watch,p=void 0!==d&&d,m=r.label,v=void 0===m?i:m,g=r.minText,y=void 0===g?(0,h.format)(u,s.toString()):g,b=r.maxText,_=void 0===b?(0,h.format)(f,s.toString()):b,x='\n      <div class="guigui-slider-label">'+v+'</div>\n      <div class="guigui-slider-container">\n        <div class="guigui-slider-background"></div>\n        <div class="guigui-slider-handle"></div>\n          <div class="guigui-slider-indice guigui-slider-indice--min">'+y+'</div>\n          <div class="guigui-slider-indice guigui-slider-indice--max">'+_+'</div>\n        </div>\n        <input type="text" class="guigui-slider-value" value="0"/>\n      </div>\n    ',w=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,i,{watch:p,classNames:["guigui-slider"]},x));return w.onSliderStartDrag=w.onSliderStartDrag.bind(w),w.onSliderStopDrag=w.onSliderStopDrag.bind(w),w.onSliderDrag=w.onSliderDrag.bind(w),w.onTextStartDrag=w.onTextStartDrag.bind(w),w.onTextStopDrag=w.onTextStopDrag.bind(w),w.onTextDrag=w.onTextDrag.bind(w),w.onTextKeyDown=w.onTextKeyDown.bind(w),w.onTextChange=w.onTextChange.bind(w),w.step=s,w.min=u,w.max=f,w.labelText=v||i,w.isWatched=p===!0,w.minText=y,w.maxText=_,w.textValueSlowingFactor=.1,w.sliderValue=0,w.$container=w.$el.querySelector(".guigui-slider-container"),w.$handle=w.$el.querySelector(".guigui-slider-handle"),w.$background=w.$el.querySelector(".guigui-slider-background"),w.$value=w.$el.querySelector(".guigui-slider-value"),w.$container.addEventListener("mousedown",w.onSliderStartDrag),w.$value.addEventListener("mousedown",w.onTextStartDrag),w.$value.addEventListener("keydown",w.onTextKeyDown),w.$value.addEventListener("change",w.onTextChange),w.value=w._targetObject[w._targetProperty],w}return o(t,e),s(t,[{key:"remove",value:function(){this.$container.removeEventListener("mousedown",this.onSliderStartDrag),this.$value.removeEventListener("mousedown",this.onTextStartDrag),this.$value.removeEventListener("keydown",this.onTextKeyDown),this.$value.removeEventListener("change",this.onTextChange),this.onSliderStopDrag(),this.onTextStopDrag(),l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"remove",this).call(this)}},{key:"onSliderStartDrag",value:function(e){this.onStartInteraction(),this.onSliderDrag(e),window.addEventListener("mouseup",this.onSliderStopDrag),window.addEventListener("mousemove",this.onSliderDrag),e.preventDefault()}},{key:"onSliderStopDrag",value:function(e){window.removeEventListener("mouseup",this.onSliderStopDrag),window.removeEventListener("mousemove",this.onSliderDrag),this.onEndInteraction(),e.preventDefault()}},{key:"onSliderDrag",value:function(e){var t=(e.clientX-(0,f.offset)(this.$handle).left)/this.$background.offsetWidth;this.value=this.min+(this.max-this.min)*t,e.preventDefault()}},{key:"onTextStartDrag",value:function(e){this.startY=e.clientY,this.startValue=this.value,window.addEventListener("mouseup",this.onTextStopDrag),window.addEventListener("mousemove",this.onTextDrag),e.preventDefault()}},{key:"onTextStopDrag",value:function(e){window.removeEventListener("mouseup",this.onTextStopDrag),window.removeEventListener("mousemove",this.onTextDrag),e.preventDefault()}},{key:"onTextDrag",value:function(e){var t=this.startY-e.clientY;this.value=this.startValue+t*this.step*this.textValueSlowingFactor,e.preventDefault()}},{key:"onTextKeyDown",value:function(e){if(38===e.keyCode)this.value+=this.step;else{if(40!==e.keyCode)return;this.value-=this.step}e.preventDefault()}},{key:"onTextChange",value:function(){this.$value.value.match(/^[+-]?\d+(\.\d+)?$/g)?this.value=Number(this.$value.value):this.value=this.sliderValue}},{key:"updateTarget",value:function(){return this._targetObject[this._targetProperty]=this.sliderValue,this}},{key:"updateText",value:function(){return isNaN(this.sliderValue)||(this.$value.value=(0,h.format)(this.sliderValue,this.step.toString())),this}},{key:"updateSlider",value:function(){return this.$handle.style.transform="scaleX("+(1-(this.sliderValue-this.min)/(this.max-this.min))+")",this}},{key:"invalidate",value:function(){l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"invalidate",this).call(this),this.value=this._value}},{key:"value",get:function(){return this.sliderValue},set:function(e){this.sliderValue=(0,h.clamp)((0,h.toPrecision)(e,this.step),this.min,this.max),this._value=this.sliderValue,this.updateTarget().updateSlider().updateText(),this.emit("update",this.sliderValue)}}]),t}(c.default);t.default=d},function(e,t,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),l=function e(t,i,r){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,i);if(void 0===n){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,i,r)}if("value"in n)return n.value;var o=n.get;if(void 0!==o)return o.call(r)},u=i(3),c=r(u);i(0),i(4);i(45);var h=function(e){function t(e,i){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};n(this,t);var o=r.label,s=void 0===o?i:o,l=e[i],u='\n      <div class="guigui-text-label">'+s+'</div>\n      <input type="text" class="guigui-text-value" value="'+l+'"/>\n    ',c=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,i,{classNames:["guigui-text"]},u));return c.onInputChange=c.onInputChange.bind(c),c.$input=c.$el.querySelector("input"),c.value=l,c.$input.addEventListener("input",c.onInputChange),c}return o(t,e),s(t,[{key:"onInputChange",value:function(e){this.value=this.$input.value,console.log("onInputChange",this.value)}},{key:"invalidate",value:function(){l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"invalidate",this).call(this),this.value=this._value}},{key:"value",get:function(){return this.$input.value},set:function(e){this.$input.value=e,this._value=e,this._targetObject[this._targetProperty]=e,this.emit("update",this.sliderValue)}}]),t}(c.default);t.default=h},function(e,t,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),l=i(3),u=r(l),c=i(0);i(46);var h=function(e){function t(e,i){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};n(this,t);var o=r.label,s=void 0===o?i:o,l='\n      <div class="guigui-toggler-label">'+s+'</div>\n      <div class="guigui-toggler-state">\n        <div class="guigui-toggler-handle"></div>\n      </div>\n    ',u=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,i,{classNames:["guigui-toggler"]},l));return u.onTogglerClick=u.onTogglerClick.bind(u),u.labelText=s,u.isSelected=!1,u.value=u._targetObject[u._targetProperty]===!0,u.$el.addEventListener("click",u.onTogglerClick),u}return o(t,e),s(t,[{key:"onTogglerClick",value:function(e){this.onStartInteraction(),this.value=!this.value,this.onEndInteraction()}},{key:"value",get:function(){return this.isSelected},set:function(e){e?(this.isSelected=!0,(0,c.addClass)(this.$el,"guigui-toggler--selected")):(this.isSelected=!1,(0,c.removeClass)(this.$el,"guigui-toggler--selected")),this._targetObject[this._targetProperty]=e,this.emit("update",e)}}]),t}(u.default);t.default=h},function(e,t,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function n(e,t,i,r){var n=e[t];return(0,a.isArray)(i)?new v.default(e,t,i,r):(r=i,(0,a.isBoolean)(n)?new s.default(e,t,r):(0,a.isNumber)(n)?new u.default(e,t,r):(0,a.isFunction)(n)?new h.default(e,t,r):new d.default(e,t,r))}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n;var a=i(4),o=i(16),s=r(o),l=i(14),u=r(l),c=i(12),h=r(c),f=i(15),d=r(f),p=i(7),m=(r(p),i(13)),v=r(m)},function(e,t,i){"use strict";function r(e){return"object"===("undefined"==typeof Node?"undefined":n(Node))?e instanceof Node:e&&"object"===("undefined"==typeof e?"undefined":n(e))&&"number"==typeof e.nodeType&&"string"==typeof e.nodeName}Object.defineProperty(t,"__esModule",{value:!0});var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.default=r},function(e,t,i){"use strict";function r(e){console.warn("[guigui]",e)}Object.defineProperty(t,"__esModule",{value:!0}),t.warn=r},function(e,t,i){"use strict";function r(e,t){var i=Math.pow(10,t);return(Math.round(e*i)/i).toFixed(t)}function n(e,t){var i=String(t).split(".")[1];return r(e,i?i.length:0)}function a(e,t,i){return Math.min(Math.max(e,t),i)}function o(e,t){return Math.round(e/t)*t}Object.defineProperty(t,"__esModule",{value:!0}),t.toFixed=r,t.format=n,t.clamp=a,t.toPrecision=o},function(e,t,i){"use strict";function r(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");return"="===e[t-2]?2:"="===e[t-1]?1:0}function n(e){return 3*e.length/4-r(e)}function a(e){var t,i,n,a,o,s,l=e.length;o=r(e),s=new h(3*l/4-o),n=o>0?l-4:l;var u=0;for(t=0,i=0;t<n;t+=4,i+=3)a=c[e.charCodeAt(t)]<<18|c[e.charCodeAt(t+1)]<<12|c[e.charCodeAt(t+2)]<<6|c[e.charCodeAt(t+3)],s[u++]=a>>16&255,s[u++]=a>>8&255,s[u++]=255&a;return 2===o?(a=c[e.charCodeAt(t)]<<2|c[e.charCodeAt(t+1)]>>4,s[u++]=255&a):1===o&&(a=c[e.charCodeAt(t)]<<10|c[e.charCodeAt(t+1)]<<4|c[e.charCodeAt(t+2)]>>2,s[u++]=a>>8&255,s[u++]=255&a),s}function o(e){return u[e>>18&63]+u[e>>12&63]+u[e>>6&63]+u[63&e]}function s(e,t,i){for(var r,n=[],a=t;a<i;a+=3)r=(e[a]<<16)+(e[a+1]<<8)+e[a+2],n.push(o(r));return n.join("")}function l(e){for(var t,i=e.length,r=i%3,n="",a=[],o=16383,l=0,c=i-r;l<c;l+=o)a.push(s(e,l,l+o>c?c:l+o));return 1===r?(t=e[i-1],n+=u[t>>2],n+=u[t<<4&63],n+="=="):2===r&&(t=(e[i-2]<<8)+e[i-1],n+=u[t>>10],n+=u[t>>4&63],n+=u[t<<2&63],n+="="),a.push(n),a.join("")}t.byteLength=n,t.toByteArray=a,t.fromByteArray=l;for(var u=[],c=[],h="undefined"!=typeof Uint8Array?Uint8Array:Array,f="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",d=0,p=f.length;d<p;++d)u[d]=f[d],c[f.charCodeAt(d)]=d;c["-".charCodeAt(0)]=62,c["_".charCodeAt(0)]=63},function(e,t,i){"use strict";(function(e){function r(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(e){return!1}}function n(){return o.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function a(e,t){if(n()<t)throw new RangeError("Invalid typed array length");return o.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t),e.__proto__=o.prototype):(null===e&&(e=new o(t)),e.length=t),e}function o(e,t,i){if(!(o.TYPED_ARRAY_SUPPORT||this instanceof o))return new o(e,t,i);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return c(this,e)}return s(this,e,t,i)}function s(e,t,i,r){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?d(e,t,i,r):"string"==typeof t?h(e,t,i):p(e,t)}function l(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function u(e,t,i,r){return l(t),t<=0?a(e,t):void 0!==i?"string"==typeof r?a(e,t).fill(i,r):a(e,t).fill(i):a(e,t)}function c(e,t){if(l(t),e=a(e,t<0?0:0|m(t)),!o.TYPED_ARRAY_SUPPORT)for(var i=0;i<t;++i)e[i]=0;return e}function h(e,t,i){if("string"==typeof i&&""!==i||(i="utf8"),!o.isEncoding(i))throw new TypeError('"encoding" must be a valid string encoding');var r=0|g(t,i);e=a(e,r);var n=e.write(t,i);return n!==r&&(e=e.slice(0,n)),e}function f(e,t){var i=t.length<0?0:0|m(t.length);e=a(e,i);for(var r=0;r<i;r+=1)e[r]=255&t[r];return e}function d(e,t,i,r){if(t.byteLength,i<0||t.byteLength<i)throw new RangeError("'offset' is out of bounds");if(t.byteLength<i+(r||0))throw new RangeError("'length' is out of bounds");return t=void 0===i&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,i):new Uint8Array(t,i,r),o.TYPED_ARRAY_SUPPORT?(e=t,e.__proto__=o.prototype):e=f(e,t),e}function p(e,t){if(o.isBuffer(t)){var i=0|m(t.length);return e=a(e,i),0===e.length?e:(t.copy(e,0,0,i),e)}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||K(t.length)?a(e,0):f(e,t);if("Buffer"===t.type&&J(t.data))return f(e,t.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function m(e){if(e>=n())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+n().toString(16)+" bytes");return 0|e}function v(e){return+e!=e&&(e=0),o.alloc(+e)}function g(e,t){if(o.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var i=e.length;if(0===i)return 0;for(var r=!1;;)switch(t){case"ascii":case"latin1":case"binary":return i;case"utf8":case"utf-8":case void 0:return W(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*i;case"hex":return i>>>1;case"base64":return q(e).length;default:if(r)return W(e).length;t=(""+t).toLowerCase(),r=!0}}function y(e,t,i){var r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===i||i>this.length)&&(i=this.length),i<=0)return"";if(i>>>=0,t>>>=0,i<=t)return"";for(e||(e="utf8");;)switch(e){case"hex":return I(this,t,i);case"utf8":case"utf-8":return C(this,t,i);case"ascii":return R(this,t,i);case"latin1":case"binary":return O(this,t,i);case"base64":return A(this,t,i);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return D(this,t,i);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function b(e,t,i){var r=e[t];e[t]=e[i],e[i]=r}function _(e,t,i,r,n){if(0===e.length)return-1;if("string"==typeof i?(r=i,i=0):i>2147483647?i=2147483647:i<-2147483648&&(i=-2147483648),i=+i,isNaN(i)&&(i=n?0:e.length-1),i<0&&(i=e.length+i),i>=e.length){if(n)return-1;i=e.length-1}else if(i<0){if(!n)return-1;i=0}if("string"==typeof t&&(t=o.from(t,r)),o.isBuffer(t))return 0===t.length?-1:x(e,t,i,r,n);if("number"==typeof t)return t&=255,o.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?n?Uint8Array.prototype.indexOf.call(e,t,i):Uint8Array.prototype.lastIndexOf.call(e,t,i):x(e,[t],i,r,n);throw new TypeError("val must be string, number or Buffer")}function x(e,t,i,r,n){function a(e,t){return 1===o?e[t]:e.readUInt16BE(t*o)}var o=1,s=e.length,l=t.length;if(void 0!==r&&(r=String(r).toLowerCase(),"ucs2"===r||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;o=2,s/=2,l/=2,i/=2}var u;if(n){var c=-1;for(u=i;u<s;u++)if(a(e,u)===a(t,c===-1?0:u-c)){if(c===-1&&(c=u),u-c+1===l)return c*o}else c!==-1&&(u-=u-c),c=-1}else for(i+l>s&&(i=s-l),u=i;u>=0;u--){for(var h=!0,f=0;f<l;f++)if(a(e,u+f)!==a(t,f)){h=!1;break}if(h)return u}return-1}function w(e,t,i,r){i=Number(i)||0;var n=e.length-i;r?(r=Number(r),r>n&&(r=n)):r=n;var a=t.length;if(a%2!==0)throw new TypeError("Invalid hex string");r>a/2&&(r=a/2);for(var o=0;o<r;++o){var s=parseInt(t.substr(2*o,2),16);if(isNaN(s))return o;e[i+o]=s}return o}function T(e,t,i,r){return Z(W(t,e.length-i),e,i,r)}function M(e,t,i,r){return Z(X(t),e,i,r)}function S(e,t,i,r){return M(e,t,i,r)}function E(e,t,i,r){return Z(q(t),e,i,r)}function P(e,t,i,r){return Z(Y(t,e.length-i),e,i,r)}function A(e,t,i){return 0===t&&i===e.length?$.fromByteArray(e):$.fromByteArray(e.slice(t,i))}function C(e,t,i){i=Math.min(e.length,i);for(var r=[],n=t;n<i;){var a=e[n],o=null,s=a>239?4:a>223?3:a>191?2:1;if(n+s<=i){var l,u,c,h;switch(s){case 1:a<128&&(o=a);break;case 2:l=e[n+1],128===(192&l)&&(h=(31&a)<<6|63&l,h>127&&(o=h));break;case 3:l=e[n+1],u=e[n+2],128===(192&l)&&128===(192&u)&&(h=(15&a)<<12|(63&l)<<6|63&u,h>2047&&(h<55296||h>57343)&&(o=h));break;case 4:l=e[n+1],u=e[n+2],c=e[n+3],128===(192&l)&&128===(192&u)&&128===(192&c)&&(h=(15&a)<<18|(63&l)<<12|(63&u)<<6|63&c,h>65535&&h<1114112&&(o=h))}}null===o?(o=65533,s=1):o>65535&&(o-=65536,r.push(o>>>10&1023|55296),o=56320|1023&o),r.push(o),n+=s}return L(r)}function L(e){var t=e.length;if(t<=ee)return String.fromCharCode.apply(String,e);for(var i="",r=0;r<t;)i+=String.fromCharCode.apply(String,e.slice(r,r+=ee));return i}function R(e,t,i){var r="";i=Math.min(e.length,i);for(var n=t;n<i;++n)r+=String.fromCharCode(127&e[n]);return r}function O(e,t,i){var r="";i=Math.min(e.length,i);for(var n=t;n<i;++n)r+=String.fromCharCode(e[n]);return r}function I(e,t,i){var r=e.length;(!t||t<0)&&(t=0),(!i||i<0||i>r)&&(i=r);for(var n="",a=t;a<i;++a)n+=j(e[a]);return n}function D(e,t,i){for(var r=e.slice(t,i),n="",a=0;a<r.length;a+=2)n+=String.fromCharCode(r[a]+256*r[a+1]);return n}function B(e,t,i){if(e%1!==0||e<0)throw new RangeError("offset is not uint");if(e+t>i)throw new RangeError("Trying to access beyond buffer length")}function G(e,t,i,r,n,a){if(!o.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>n||t<a)throw new RangeError('"value" argument is out of bounds');if(i+r>e.length)throw new RangeError("Index out of range")}function k(e,t,i,r){t<0&&(t=65535+t+1);for(var n=0,a=Math.min(e.length-i,2);n<a;++n)e[i+n]=(t&255<<8*(r?n:1-n))>>>8*(r?n:1-n)}function N(e,t,i,r){t<0&&(t=4294967295+t+1);for(var n=0,a=Math.min(e.length-i,4);n<a;++n)e[i+n]=t>>>8*(r?n:3-n)&255}function U(e,t,i,r,n,a){if(i+r>e.length)throw new RangeError("Index out of range");if(i<0)throw new RangeError("Index out of range")}function F(e,t,i,r,n){return n||U(e,t,i,4,3.4028234663852886e38,-3.4028234663852886e38),Q.write(e,t,i,r,23,4),i+4}function H(e,t,i,r,n){return n||U(e,t,i,8,1.7976931348623157e308,-1.7976931348623157e308),Q.write(e,t,i,r,52,8),i+8}function z(e){if(e=V(e).replace(te,""),e.length<2)return"";for(;e.length%4!==0;)e+="=";return e}function V(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function j(e){return e<16?"0"+e.toString(16):e.toString(16)}function W(e,t){t=t||1/0;for(var i,r=e.length,n=null,a=[],o=0;o<r;++o){if(i=e.charCodeAt(o),i>55295&&i<57344){if(!n){if(i>56319){(t-=3)>-1&&a.push(239,191,189);continue}if(o+1===r){(t-=3)>-1&&a.push(239,191,189);continue}n=i;continue}if(i<56320){(t-=3)>-1&&a.push(239,191,189),n=i;continue}i=(n-55296<<10|i-56320)+65536}else n&&(t-=3)>-1&&a.push(239,191,189);if(n=null,i<128){if((t-=1)<0)break;a.push(i)}else if(i<2048){if((t-=2)<0)break;a.push(i>>6|192,63&i|128)}else if(i<65536){if((t-=3)<0)break;a.push(i>>12|224,i>>6&63|128,63&i|128)}else{if(!(i<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;a.push(i>>18|240,i>>12&63|128,i>>6&63|128,63&i|128)}}return a}function X(e){for(var t=[],i=0;i<e.length;++i)t.push(255&e.charCodeAt(i));return t}function Y(e,t){for(var i,r,n,a=[],o=0;o<e.length&&!((t-=2)<0);++o)i=e.charCodeAt(o),r=i>>8,n=i%256,a.push(n),a.push(r);return a}function q(e){return $.toByteArray(z(e))}function Z(e,t,i,r){for(var n=0;n<r&&!(n+i>=t.length||n>=e.length);++n)t[n+i]=e[n];return n}function K(e){return e!==e}var $=i(21),Q=i(33),J=i(37);t.Buffer=o,t.SlowBuffer=v,t.INSPECT_MAX_BYTES=50,o.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:r(),t.kMaxLength=n(),o.poolSize=8192,o._augment=function(e){return e.__proto__=o.prototype,e},o.from=function(e,t,i){return s(null,e,t,i)},o.TYPED_ARRAY_SUPPORT&&(o.prototype.__proto__=Uint8Array.prototype,o.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&o[Symbol.species]===o&&Object.defineProperty(o,Symbol.species,{value:null,configurable:!0})),o.alloc=function(e,t,i){return u(null,e,t,i)},o.allocUnsafe=function(e){return c(null,e)},o.allocUnsafeSlow=function(e){return c(null,e)},o.isBuffer=function(e){return!(null==e||!e._isBuffer)},o.compare=function(e,t){if(!o.isBuffer(e)||!o.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var i=e.length,r=t.length,n=0,a=Math.min(i,r);n<a;++n)if(e[n]!==t[n]){i=e[n],r=t[n];break}return i<r?-1:r<i?1:0},o.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},o.concat=function(e,t){if(!J(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return o.alloc(0);var i;if(void 0===t)for(t=0,i=0;i<e.length;++i)t+=e[i].length;var r=o.allocUnsafe(t),n=0;for(i=0;i<e.length;++i){var a=e[i];if(!o.isBuffer(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(r,n),n+=a.length}return r},o.byteLength=g,o.prototype._isBuffer=!0,o.prototype.swap16=function(){var e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)b(this,t,t+1);return this},o.prototype.swap32=function(){var e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)b(this,t,t+3),b(this,t+1,t+2);return this},o.prototype.swap64=function(){var e=this.length;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)b(this,t,t+7),b(this,t+1,t+6),b(this,t+2,t+5),b(this,t+3,t+4);return this},o.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?C(this,0,e):y.apply(this,arguments)},o.prototype.equals=function(e){if(!o.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===o.compare(this,e)},o.prototype.inspect=function(){var e="",i=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,i).match(/.{2}/g).join(" "),this.length>i&&(e+=" ... ")),"<Buffer "+e+">"},o.prototype.compare=function(e,t,i,r,n){if(!o.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===i&&(i=e?e.length:0),void 0===r&&(r=0),void 0===n&&(n=this.length),t<0||i>e.length||r<0||n>this.length)throw new RangeError("out of range index");if(r>=n&&t>=i)return 0;if(r>=n)return-1;if(t>=i)return 1;if(t>>>=0,i>>>=0,r>>>=0,n>>>=0,this===e)return 0;for(var a=n-r,s=i-t,l=Math.min(a,s),u=this.slice(r,n),c=e.slice(t,i),h=0;h<l;++h)if(u[h]!==c[h]){a=u[h],s=c[h];break}return a<s?-1:s<a?1:0},o.prototype.includes=function(e,t,i){return this.indexOf(e,t,i)!==-1},o.prototype.indexOf=function(e,t,i){return _(this,e,t,i,!0)},o.prototype.lastIndexOf=function(e,t,i){return _(this,e,t,i,!1)},o.prototype.write=function(e,t,i,r){if(void 0===t)r="utf8",i=this.length,t=0;else if(void 0===i&&"string"==typeof t)r=t,i=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(i)?(i|=0,void 0===r&&(r="utf8")):(r=i,i=void 0)}var n=this.length-t;if((void 0===i||i>n)&&(i=n),e.length>0&&(i<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var a=!1;;)switch(r){case"hex":return w(this,e,t,i);case"utf8":case"utf-8":return T(this,e,t,i);case"ascii":return M(this,e,t,i);case"latin1":case"binary":return S(this,e,t,i);case"base64":return E(this,e,t,i);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return P(this,e,t,i);default:if(a)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),a=!0}},o.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var ee=4096;o.prototype.slice=function(e,t){var i=this.length;e=~~e,t=void 0===t?i:~~t,e<0?(e+=i,e<0&&(e=0)):e>i&&(e=i),t<0?(t+=i,t<0&&(t=0)):t>i&&(t=i),t<e&&(t=e);var r;if(o.TYPED_ARRAY_SUPPORT)r=this.subarray(e,t),r.__proto__=o.prototype;else{var n=t-e;r=new o(n,void 0);for(var a=0;a<n;++a)r[a]=this[a+e]}return r},o.prototype.readUIntLE=function(e,t,i){e|=0,t|=0,i||B(e,t,this.length);for(var r=this[e],n=1,a=0;++a<t&&(n*=256);)r+=this[e+a]*n;return r},o.prototype.readUIntBE=function(e,t,i){e|=0,t|=0,i||B(e,t,this.length);for(var r=this[e+--t],n=1;t>0&&(n*=256);)r+=this[e+--t]*n;return r},o.prototype.readUInt8=function(e,t){return t||B(e,1,this.length),this[e]},o.prototype.readUInt16LE=function(e,t){return t||B(e,2,this.length),this[e]|this[e+1]<<8},o.prototype.readUInt16BE=function(e,t){return t||B(e,2,this.length),this[e]<<8|this[e+1]},o.prototype.readUInt32LE=function(e,t){return t||B(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},o.prototype.readUInt32BE=function(e,t){return t||B(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},o.prototype.readIntLE=function(e,t,i){e|=0,t|=0,i||B(e,t,this.length);for(var r=this[e],n=1,a=0;++a<t&&(n*=256);)r+=this[e+a]*n;return n*=128,r>=n&&(r-=Math.pow(2,8*t)),r},o.prototype.readIntBE=function(e,t,i){e|=0,t|=0,i||B(e,t,this.length);for(var r=t,n=1,a=this[e+--r];r>0&&(n*=256);)a+=this[e+--r]*n;return n*=128,a>=n&&(a-=Math.pow(2,8*t)),a},o.prototype.readInt8=function(e,t){return t||B(e,1,this.length),128&this[e]?(255-this[e]+1)*-1:this[e]},o.prototype.readInt16LE=function(e,t){t||B(e,2,this.length);var i=this[e]|this[e+1]<<8;return 32768&i?4294901760|i:i},o.prototype.readInt16BE=function(e,t){t||B(e,2,this.length);var i=this[e+1]|this[e]<<8;return 32768&i?4294901760|i:i},o.prototype.readInt32LE=function(e,t){return t||B(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},o.prototype.readInt32BE=function(e,t){return t||B(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},o.prototype.readFloatLE=function(e,t){return t||B(e,4,this.length),Q.read(this,e,!0,23,4)},o.prototype.readFloatBE=function(e,t){return t||B(e,4,this.length),Q.read(this,e,!1,23,4)},o.prototype.readDoubleLE=function(e,t){return t||B(e,8,this.length),Q.read(this,e,!0,52,8)},o.prototype.readDoubleBE=function(e,t){return t||B(e,8,this.length),Q.read(this,e,!1,52,8)},o.prototype.writeUIntLE=function(e,t,i,r){if(e=+e,t|=0,i|=0,!r){var n=Math.pow(2,8*i)-1;G(this,e,t,i,n,0)}var a=1,o=0;for(this[t]=255&e;++o<i&&(a*=256);)this[t+o]=e/a&255;return t+i},o.prototype.writeUIntBE=function(e,t,i,r){if(e=+e,t|=0,i|=0,!r){var n=Math.pow(2,8*i)-1;G(this,e,t,i,n,0)}var a=i-1,o=1;for(this[t+a]=255&e;--a>=0&&(o*=256);)this[t+a]=e/o&255;return t+i},o.prototype.writeUInt8=function(e,t,i){return e=+e,t|=0,i||G(this,e,t,1,255,0),o.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},o.prototype.writeUInt16LE=function(e,t,i){return e=+e,t|=0,i||G(this,e,t,2,65535,0),o.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):k(this,e,t,!0),t+2},o.prototype.writeUInt16BE=function(e,t,i){return e=+e,t|=0,i||G(this,e,t,2,65535,0),o.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):k(this,e,t,!1),t+2},o.prototype.writeUInt32LE=function(e,t,i){
return e=+e,t|=0,i||G(this,e,t,4,4294967295,0),o.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):N(this,e,t,!0),t+4},o.prototype.writeUInt32BE=function(e,t,i){return e=+e,t|=0,i||G(this,e,t,4,4294967295,0),o.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):N(this,e,t,!1),t+4},o.prototype.writeIntLE=function(e,t,i,r){if(e=+e,t|=0,!r){var n=Math.pow(2,8*i-1);G(this,e,t,i,n-1,-n)}var a=0,o=1,s=0;for(this[t]=255&e;++a<i&&(o*=256);)e<0&&0===s&&0!==this[t+a-1]&&(s=1),this[t+a]=(e/o>>0)-s&255;return t+i},o.prototype.writeIntBE=function(e,t,i,r){if(e=+e,t|=0,!r){var n=Math.pow(2,8*i-1);G(this,e,t,i,n-1,-n)}var a=i-1,o=1,s=0;for(this[t+a]=255&e;--a>=0&&(o*=256);)e<0&&0===s&&0!==this[t+a+1]&&(s=1),this[t+a]=(e/o>>0)-s&255;return t+i},o.prototype.writeInt8=function(e,t,i){return e=+e,t|=0,i||G(this,e,t,1,127,-128),o.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},o.prototype.writeInt16LE=function(e,t,i){return e=+e,t|=0,i||G(this,e,t,2,32767,-32768),o.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):k(this,e,t,!0),t+2},o.prototype.writeInt16BE=function(e,t,i){return e=+e,t|=0,i||G(this,e,t,2,32767,-32768),o.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):k(this,e,t,!1),t+2},o.prototype.writeInt32LE=function(e,t,i){return e=+e,t|=0,i||G(this,e,t,4,2147483647,-2147483648),o.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):N(this,e,t,!0),t+4},o.prototype.writeInt32BE=function(e,t,i){return e=+e,t|=0,i||G(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),o.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):N(this,e,t,!1),t+4},o.prototype.writeFloatLE=function(e,t,i){return F(this,e,t,!0,i)},o.prototype.writeFloatBE=function(e,t,i){return F(this,e,t,!1,i)},o.prototype.writeDoubleLE=function(e,t,i){return H(this,e,t,!0,i)},o.prototype.writeDoubleBE=function(e,t,i){return H(this,e,t,!1,i)},o.prototype.copy=function(e,t,i,r){if(i||(i=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<i&&(r=i),r===i)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(i<0||i>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-i&&(r=e.length-t+i);var n,a=r-i;if(this===e&&i<t&&t<r)for(n=a-1;n>=0;--n)e[n+t]=this[n+i];else if(a<1e3||!o.TYPED_ARRAY_SUPPORT)for(n=0;n<a;++n)e[n+t]=this[n+i];else Uint8Array.prototype.set.call(e,this.subarray(i,i+a),t);return a},o.prototype.fill=function(e,t,i,r){if("string"==typeof e){if("string"==typeof t?(r=t,t=0,i=this.length):"string"==typeof i&&(r=i,i=this.length),1===e.length){var n=e.charCodeAt(0);n<256&&(e=n)}if(void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!o.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<i)throw new RangeError("Out of range index");if(i<=t)return this;t>>>=0,i=void 0===i?this.length:i>>>0,e||(e=0);var a;if("number"==typeof e)for(a=t;a<i;++a)this[a]=e;else{var s=o.isBuffer(e)?e:W(new o(e,r).toString()),l=s.length;for(a=0;a<i-t;++a)this[a+t]=s[a%l]}return this};var te=/[^+\/0-9A-Za-z-_]/g}).call(t,i(49))},function(e,t,i){t=e.exports=i(1)(),t.push([e.i,".guigui-colorpicker-label{font-size:12px;line-height:18px;font-style:italic;text-align:center;overflow:hidden;text-overflow:ellipsis;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;float:left;width:calc(31.5% - 20px);padding:0 5px;margin-right:10px}.guigui-colorpicker{clear:both}.guigui-colorpicker-state{background:#b89089;width:calc(68.5% - 8px);height:10px;float:left;padding:4px;box-shadow:inset 0 1px 8px rgba(0,0,0,.2),inset 0 -1px 1px hsla(0,0%,100%,.0980392)}.guigui-colorpicker-text{color:#000;background:none;font-size:11px;line-height:12px;font-family:Arial;margin:0;border:0;padding:3px 0;display:inline-block;vertical-align:middle;white-space:normal;box-sizing:content-box;outline:0;position:relative;top:-4px}@-moz-document url-prefix(){.guigui-colorpicker-text{top:-6px}}.guigui-colorpicker .Scp{padding:5px;background:#30343c;width:175px;height:150px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;position:absolute;z-index:999;top:26px;right:4px;display:none;box-shadow:inset 0 1px 1px hsla(0,0%,100%,.0588235);border:1px solid #1d1f24}.guigui-colorpicker .Scp-saturation{background:-webkit-linear-gradient(left,#fff,#ff2600);background:linear-gradient(90deg,#fff 0,#ff2600);position:relative;width:calc(100% - 25px);height:100%;float:left;margin-right:5px}.guigui-colorpicker .Scp-hue{width:20px;height:100%;position:relative;float:left;background:-webkit-linear-gradient(red,#f0f 17%,#00f 34%,#0ff 50%,#0f0 67%,#ff0 84%,red);background:linear-gradient(red,#f0f 17%,#00f 34%,#0ff 50%,#0f0 67%,#ff0 84%,red)}.guigui-colorpicker .Scp-brightness{width:100%;height:100%;background:-webkit-linear-gradient(hsla(0,0%,100%,0),#000);background:linear-gradient(hsla(0,0%,100%,0),#000)}.guigui-colorpicker .Scp-sbSelector{-webkit-transform:translateX(38.3152px) translateY(41.7647px);transform:translateX(38.3152px) translateY(41.7647px);background:#b89089;border:2px solid #000;position:absolute;width:14px;height:14px;border-radius:10px;top:-7px;left:-7px;box-sizing:border-box;z-index:10}.guigui-colorpicker .Scp-hSelector{-webkit-transform:translateY(146.277px);transform:translateY(146.277px);position:absolute;background:#fff;border-bottom:1px solid #000;right:-3px;width:10px;height:2px}.guigui-colorpicker--opened .Scp{display:block}",""])},function(e,t,i){t=e.exports=i(1)(),t.push([e.i,".guigui-launcher-label{font-size:12px;line-height:18px;font-style:italic;text-align:center;overflow:hidden;text-overflow:ellipsis}.guigui-launcher,.guigui-launcher-label{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.guigui-launcher{cursor:pointer}.guigui .guigui-launcher--pressed{background:#36383f}.guigui-launcher-label{text-transform:capitalize}.guigui-launcher-label span{position:relative;top:-1px;left:4px;color:#3d77eb}",""])},function(e,t,i){t=e.exports=i(1)(),t.push([e.i,".guigui-select-label{font-size:12px;line-height:18px;font-style:italic;text-align:center;overflow:hidden;text-overflow:ellipsis;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;float:left;width:calc(31.5% - 20px);padding:0 5px;margin-right:10px}.guigui-select select{width:calc(68.5% - 10px);background:#22252b;color:#3d77eb;line-height:12px;box-sizing:content-box}.guigui-select{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.guigui-select select{border:none;-webkit-appearance:none;-moz-appearance:none;appearance:none;padding:3px 5px;border-radius:0;background-image:url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiA/PjwhRE9DVFlQRSBzdmcgIFBVQkxJQyAnLS8vVzNDLy9EVEQgU1ZHIDEuMS8vRU4nICAnaHR0cDovL3d3dy53My5vcmcvR3JhcGhpY3MvU1ZHLzEuMS9EVEQvc3ZnMTEuZHRkJz48c3ZnIGhlaWdodD0iNTEycHgiIGZpbGw9IiMzRDc3RUIiIGlkPSJMYXllcl8xIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA1MTIgNTEyOyIgdmVyc2lvbj0iMS4xIiB2aWV3Qm94PSIwIDAgNTEyIDUxMiIgd2lkdGg9IjUxMnB4IiB4bWw6c3BhY2U9InByZXNlcnZlIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIj48cGF0aCBkPSJNOTguOSwxODQuN2wxLjgsMi4xbDEzNiwxNTYuNWM0LjYsNS4zLDExLjUsOC42LDE5LjIsOC42YzcuNywwLDE0LjYtMy40LDE5LjItOC42TDQxMSwxODcuMWwyLjMtMi42ICBjMS43LTIuNSwyLjctNS41LDIuNy04LjdjMC04LjctNy40LTE1LjgtMTYuNi0xNS44djBIMTEyLjZ2MGMtOS4yLDAtMTYuNiw3LjEtMTYuNiwxNS44Qzk2LDE3OS4xLDk3LjEsMTgyLjIsOTguOSwxODQuN3oiLz48L3N2Zz4=);background-repeat:no-repeat;background-size:14px 14px;background-position:calc(100% - 2px) 50%}.guigui-select select:focus{outline:none}.guigui-select select::-moz-focus-inner{border:0}@-moz-document url-prefix(){.guigui-select select{padding:1px 5px;position:relative;top:-3px}}",""])},function(e,t,i){t=e.exports=i(1)(),t.push([e.i,".guigui-slider-label{font-size:12px;line-height:18px;font-style:italic;text-align:center;overflow:hidden;text-overflow:ellipsis;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;float:left;width:calc(29.5% - 10px);padding:0 5px}.guigui-slider-container{float:left;width:calc(50% - 20px);margin:0 10px;height:100%;position:relative;cursor:ew-resize}.guigui-slider-background,.guigui-slider-handle{position:absolute;width:100%;height:18%;top:5%;pointer-events:none}.guigui-slider-background{background:-webkit-linear-gradient(left,#3d77eb,#00d2da);background:linear-gradient(90deg,#3d77eb 0,#00d2da);pointer-events:none}.guigui-slider-handle{background:#22252b;right:0;-webkit-transform-origin:right center 0;transform-origin:right center 0}.guigui-slider-indice{color:#6b6b6b;font-size:9px;line-height:7px;bottom:0;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;position:absolute;pointer-events:none}.guigui-slider-indice.guigui-slider-indice--min{left:0}.guigui-slider-indice.guigui-slider-indice--max{right:0}.guigui-slider-value{float:left;font-family:Courier New,Arial;background:#22252b;color:#3d77eb;height:100%;line-height:1;width:20.5%;font-size:10px;text-align:center;margin:0;border:0;padding:0;display:inline-block;vertical-align:middle;white-space:normal;box-sizing:content-box;outline:0}",""])},function(e,t,i){t=e.exports=i(1)(),t.push([e.i,".guigui-text-label{font-size:12px;line-height:18px;font-style:italic;text-align:center;overflow:hidden;text-overflow:ellipsis;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;float:left;width:calc(31.5% - 20px);padding:0 5px;margin-right:10px}.guigui-text-value{width:calc(68.5% - 10px);background:#22252b;color:#3d77eb;line-height:12px;box-sizing:content-box}.guigui-text{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.guigui-text-value{float:left;height:10px;font-size:11px;text-align:left;margin:0;border:0;padding:4px 5px;display:inline-block;vertical-align:middle;white-space:normal;outline:0}",""])},function(e,t,i){t=e.exports=i(1)(),t.push([e.i,".guigui-toggler-label{font-size:12px;line-height:18px;font-style:italic;text-align:center;overflow:hidden;text-overflow:ellipsis}.guigui-toggler,.guigui-toggler-label{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.guigui-toggler{cursor:pointer}.guigui-toggler-label{float:left;width:calc(90% - 27px);padding:0 5px}.guigui-toggler-handle,.guigui-toggler-state{border-radius:2px}.guigui-toggler-state{position:relative;background:#1d1f24;height:100%;width:17px;float:left;margin:0 0 0 10px;box-shadow:0 2px 1px hsla(0,0%,100%,.0470588)}.guigui-toggler-handle{position:absolute;background:#3d77eb;width:54%;height:50%;top:25%;left:23%;display:none}.guigui-toggler--selected .guigui-toggler-handle{display:block}",""])},function(e,t,i){t=e.exports=i(1)(),t.push([e.i,".guigui-component,.guigui-folder,.guigui-panel,.guigui-toggle{border:1px solid #111;box-shadow:inset 0 1px 1px hsla(0,0%,100%,.06);background:-webkit-linear-gradient(hsla(0,0%,100%,.0196078),hsla(0,0%,100%,0)) #292c33;background:linear-gradient(hsla(0,0%,100%,.0196078),hsla(0,0%,100%,0)) #292c33}.guigui{position:absolute;z-index:999;top:10px;right:10px;width:calc(100% - 20px);color:#fff}.guigui-container{margin-top:30px;display:none}.guigui-container--opened{display:block}.guigui-component,.guigui-folder,.guigui-panel{box-sizing:border-box;padding:5px;position:relative}.guigui-folder,.guigui-panel{background:-webkit-linear-gradient(hsla(0,0%,100%,.0196078),hsla(0,0%,100%,0)) #22252b;background:linear-gradient(hsla(0,0%,100%,.0196078),hsla(0,0%,100%,0)) #22252b}.guigui-panel{width:300px;float:right;margin:10px 0 0 10px}.guigui-panel>.guigui-panel-content{display:none}.guigui-panel-label{margin:0;text-align:center;width:100%;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.guigui-panel--opened>.guigui-panel-content{display:block}.guigui-folder{margin:5px 0}.guigui-folder>.guigui-folder-content{margin-top:5px;display:none}.guigui-folder-head{padding:1px 0}.guigui-folder-label{margin:0;text-align:center;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.guigui-folder--opened>.guigui-folder-content{display:block}.guigui-component{margin-top:3px;height:17px;box-sizing:content-box}.guigui-component+.guigui-component{margin-top:-1px}.guigui{font-family:Arial,sans-serif;color:#bbbdc0}.guigui-folder-label,.guigui-panel-label{font-weight:400}.guigui-folder-label{font-size:13px}.guigui-panel-label{font-size:14px;line-height:21px}.guigui-toggle{position:absolute;top:0;right:0;width:30px;height:30px}.guigui-toggle-line{-webkit-transition:-webkit-transform .5s cubic-bezier(.19,1,.22,1);transition:-webkit-transform .5s cubic-bezier(.19,1,.22,1);transition:transform .5s cubic-bezier(.19,1,.22,1);transition:transform .5s cubic-bezier(.19,1,.22,1),-webkit-transform .5s cubic-bezier(.19,1,.22,1)}.guigui-toggle--opened .guigui-toggle-line{-webkit-transform:translate3d(-50%,-50%,1px) rotate(45deg);transform:translate3d(-50%,-50%,1px) rotate(45deg)}.guigui-toggle--opened .guigui-toggle-line:first-child{-webkit-transform:translate3d(-50%,-50%,1px) rotate(135deg);transform:translate3d(-50%,-50%,1px) rotate(135deg)}.guigui-folder-head,.guigui-panel-head,.guigui-toggle{cursor:pointer}.guigui-folder-toggle,.guigui-panel-toggle{position:absolute}.guigui-panel-toggle{top:11px;right:11px;width:14px;height:14px}.guigui-folder-toggle{top:7px;right:7px;width:12px;height:12px}.guigui-folder-toggle-line,.guigui-panel-toggle-line,.guigui-toggle-line{position:absolute;top:50%;left:50%;-webkit-transform:translate3d(-50%,-50%,1px);transform:translate3d(-50%,-50%,1px);width:2px;height:100%;background:#3d77eb}.guigui-folder-toggle-line:first-child,.guigui-panel-toggle-line:first-child,.guigui-toggle-line:first-child{-webkit-transform:translate3d(-50%,-50%,1px) rotate(90deg);transform:translate3d(-50%,-50%,1px) rotate(90deg)}.guigui-toggle-line{height:60%}.guigui-folder>.guigui-folder-head .guigui-folder-toggle-line:last-child{display:block}.guigui-folder--opened>.guigui-folder-head .guigui-folder-toggle-line:last-child{display:none}",""])},function(e,t,i){"use strict";function r(e,t){var i,r,n,a=[];s(t);for(i in t)d.call(t,i)&&(r=t[i],d.call(h.transform,i)?(n=h.transform[i],c(r)&&(r=r.join(n.separator)),a.push(i+"("+f(r,n.defaultUnit,n.separator)+")")):d.call(h,i)?(n=h[i],c(r)&&(r=r.join(n.separator)),e.style[u(i)]=f(r,n.defaultUnit,n.separator)):console.warn("dom-transform: this property (`"+i+"`) is not supported."));e.style[p]=a.join(" ")}function n(e,t){var i=e.style;if("string"==typeof t)return d.call(h.transform,t)?i[p]:i[u(t)];t||(t=l());var r={};return t.forEach(function(e){r[e]=i[u(e)]}),r}function a(e,t){var i=e.style;return"string"==typeof t?void(i[u(t)]=null):(t||(t=l()),void t.forEach(function(e){i[u(e)]=null}))}function o(){return p.length>0}function s(e){var t;for(t in e)d.call(m,t)&&(e[m[t]]=e[t],delete e[t])}function l(){return Object.keys(h).map(function(e){return e})}var u=i(39),c=i(34),h=i(32),f=i(31),d=Object.prototype.hasOwnProperty,p=u("transform"),m={x:"translateX",y:"translateY",z:"translateZ",origin:"transformOrigin"};t=e.exports=r,t.get=n,t.reset=a,t.isSupported=o},function(e,t,i){"use strict";var r=i(48),n=/^-?\d+(\.\d+)?$/;e.exports=function(e,t,i){if(i=i||",","number"==typeof e)return""+e+t;var a=new RegExp(i,"g"),o=e.split(a.test(e)?i:" ");return o.map(function(e){return e=r(e),n.test(e)&&(e+=t),e}).join(i)}},function(e,t,i){"use strict";e.exports={transform:{translate:{defaultUnit:"px"},translate3d:{defaultUnit:"px"},translateX:{defaultUnit:"px"},translateY:{defaultUnit:"px"},translateZ:{defaultUnit:"px"},scale:{defaultUnit:""},scale3d:{defaultUnit:""},scaleX:{defaultUnit:""},scaleY:{defaultUnit:""},scaleZ:{defaultUnit:""},rotate:{defaultUnit:"deg"},rotate3d:{defaultUnit:""},rotateX:{defaultUnit:"deg"},rotateY:{defaultUnit:"deg"},rotateZ:{defaultUnit:"deg"},skew:{defaultUnit:"deg"},skewX:{defaultUnit:"deg"},skewY:{defaultUnit:"deg"},perspective:{defaultUnit:"px"},matrix:{defaultUnit:""},matrix3d:{defaultUnit:""}},transformOrigin:{defaultUnit:"px",separator:" "}}},function(e,t){t.read=function(e,t,i,r,n){var a,o,s=8*n-r-1,l=(1<<s)-1,u=l>>1,c=-7,h=i?n-1:0,f=i?-1:1,d=e[t+h];for(h+=f,a=d&(1<<-c)-1,d>>=-c,c+=s;c>0;a=256*a+e[t+h],h+=f,c-=8);for(o=a&(1<<-c)-1,a>>=-c,c+=r;c>0;o=256*o+e[t+h],h+=f,c-=8);if(0===a)a=1-u;else{if(a===l)return o?NaN:(d?-1:1)*(1/0);o+=Math.pow(2,r),a-=u}return(d?-1:1)*o*Math.pow(2,a-r)},t.write=function(e,t,i,r,n,a){var o,s,l,u=8*a-n-1,c=(1<<u)-1,h=c>>1,f=23===n?Math.pow(2,-24)-Math.pow(2,-77):0,d=r?0:a-1,p=r?1:-1,m=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,o=c):(o=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-o))<1&&(o--,l*=2),t+=o+h>=1?f/l:f*Math.pow(2,1-h),t*l>=2&&(o++,l/=2),o+h>=c?(s=0,o=c):o+h>=1?(s=(t*l-1)*Math.pow(2,n),o+=h):(s=t*Math.pow(2,h-1)*Math.pow(2,n),o=0));n>=8;e[i+d]=255&s,d+=p,s/=256,n-=8);for(o=o<<n|s,u+=n;u>0;e[i+d]=255&o,d+=p,o/=256,u-=8);e[i+d-p]|=128*m}},function(e,t){var i=Array.isArray,r=Object.prototype.toString;e.exports=i||function(e){return!!e&&"[object Array]"==r.call(e)}},function(e,t){function i(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}function r(e){return"function"==typeof e.readFloatLE&&"function"==typeof e.slice&&i(e.slice(0,0))}e.exports=function(e){return null!=e&&(i(e)||r(e)||!!e._isBuffer)}},function(e,t,i){"use strict";var r=i(38);e.exports=function(e){var t=r(e);if("string"===t){if(!e.trim())return!1}else if("number"!==t)return!1;return e-e+1>=0}},function(e,t){var i={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==i.call(e)}},function(e,t,i){(function(t){var r=i(35),n=Object.prototype.toString;e.exports=function(e){if("undefined"==typeof e)return"undefined";if(null===e)return"null";if(e===!0||e===!1||e instanceof Boolean)return"boolean";if("string"==typeof e||e instanceof String)return"string";if("number"==typeof e||e instanceof Number)return"number";if("function"==typeof e||e instanceof Function)return"function";if("undefined"!=typeof Array.isArray&&Array.isArray(e))return"array";if(e instanceof RegExp)return"regexp";if(e instanceof Date)return"date";var i=n.call(e);return"[object RegExp]"===i?"regexp":"[object Date]"===i?"date":"[object Arguments]"===i?"arguments":"[object Error]"===i?"error":"undefined"!=typeof t&&r(e)?"buffer":"[object Set]"===i?"set":"[object WeakSet]"===i?"weakset":"[object Map]"===i?"map":"[object WeakMap]"===i?"weakmap":"[object Symbol]"===i?"symbol":"[object Int8Array]"===i?"int8array":"[object Uint8Array]"===i?"uint8array":"[object Uint8ClampedArray]"===i?"uint8clampedarray":"[object Int16Array]"===i?"int16array":"[object Uint16Array]"===i?"uint16array":"[object Int32Array]"===i?"int32array":"[object Uint32Array]"===i?"uint32array":"[object Float32Array]"===i?"float32array":"[object Float64Array]"===i?"float64array":"object"}}).call(t,i(22).Buffer)},function(e,t){function i(e){if(e=e.replace(/-([a-z])/g,function(e,t){return t.toUpperCase()}),void 0!==a[e])return e;for(var t=e.charAt(0).toUpperCase()+e.slice(1),i=o.length;i--;){var r=o[i]+t;if(void 0!==a[r])return r}return e}function r(e){return e in l?l[e]:l[e]=i(e)}function n(e){return e=i(e),s.test(e)&&(e="-"+e.replace(s,"-$1"),s.lastIndex=0),e.toLowerCase()}var a="undefined"!=typeof document?document.createElement("p").style:{},o=["O","ms","Moz","Webkit"],s=/([A-Z])/g,l={};e.exports=r,e.exports.dash=n},function(e,t,i){"use strict";!function(){function t(e){return e=e||{},this.color=null,this.width=0,this.widthUnits="px",this.height=0,this.heightUnits="px",this.hue=0,this.position={x:0,y:0},this.huePosition=0,this.saturationWidth=0,this.hueHeight=0,this.maxHue=0,this.inputIsNumber=!1,this._onSaturationMouseDown=this._onSaturationMouseDown.bind(this),this._onSaturationMouseMove=this._onSaturationMouseMove.bind(this),this._onSaturationMouseUp=this._onSaturationMouseUp.bind(this),this._onHueMouseDown=this._onHueMouseDown.bind(this),this._onHueMouseMove=this._onHueMouseMove.bind(this),this._onHueMouseUp=this._onHueMouseUp.bind(this),this.$el=document.createElement("div"),this.$el.className="Scp",this.$el.innerHTML=['<div class="Scp-saturation">','<div class="Scp-brightness"></div>','<div class="Scp-sbSelector"></div>',"</div>",'<div class="Scp-hue">','<div class="Scp-hSelector"></div>',"</div>"].join(""),this.$saturation=this.$el.querySelector(".Scp-saturation"),this.$hue=this.$el.querySelector(".Scp-hue"),this.$sbSelector=this.$el.querySelector(".Scp-sbSelector"),this.$hSelector=this.$el.querySelector(".Scp-hSelector"),this.$saturation.addEventListener("mousedown",this._onSaturationMouseDown),this.$saturation.addEventListener("touchstart",this._onSaturationMouseDown),this.$hue.addEventListener("mousedown",this._onHueMouseDown),this.$hue.addEventListener("touchstart",this._onHueMouseDown),e.el&&this.appendTo(e.el),e.background&&this.setBackgroundColor(e.background),e.widthUnits&&(this.widthUnits=e.widthUnits),e.heightUnits&&(this.heightUnits=e.heightUnits),this.setSize(e.width||175,e.height||150),this.setColor(e.color),this}function r(e,t,i){return Math.min(Math.max(e,t),i)}function n(e){return e=0===e.type.indexOf("touch")?e.touches[0]:e,{x:e.clientX,y:e.clientY}}function a(e){return e="#"+("00000"+(0|e).toString(16)).substr(-6)}var o=i(8),s=i(36),l=i(47),u=i(30);o(t.prototype),t.prototype.appendTo=function(e){return e.appendChild(this.$el),this},t.prototype.remove=function(){this._onSaturationMouseUp(),this._onHueMouseUp(),this.$saturation.removeEventListener("mousedown",this._onSaturationMouseDown),this.$saturation.removeEventListener("touchstart",this._onSaturationMouseDown),this.$hue.removeEventListener("mousedown",this._onHueMouseDown),this.$hue.removeEventListener("touchstart",this._onHueMouseDown),this.off(),this.$el.parentNode&&this.$el.parentNode.removeChild(this.$el)},t.prototype.setColor=function(e){s(e)?(this.inputIsNumber=!0,e=a(e)):this.inputIsNumber=!1,this.color=l(e);var t=this.color.toHsv();return isNaN(t.h)||(this.hue=t.h),this._moveSelectorTo(this.saturationWidth*t.s,(1-t.v)*this.hueHeight),this._moveHueTo((1-this.hue/360)*this.hueHeight),this._updateHue(),this},t.prototype.setSize=function(e,t){return this.width=e,this.height=t,this.$el.style.width=this.width+this.widthUnits,this.$el.style.height=this.height+this.heightUnits,this.saturationWidth=this.width-25,this.$saturation.style.width=this.saturationWidth+"px",this.hueHeight=this.height,this.maxHue=this.hueHeight-2,this},t.prototype.setBackgroundColor=function(e){return s(e)&&(e=a(e)),this.$el.style.padding="5px",this.$el.style.background=l(e).toHexString(),this},t.prototype.setNoBackground=function(){this.$el.style.padding="0px",this.$el.style.background="none"},t.prototype.onChange=function(e){return this.on("update",e),this.emit("update",this.getHexString()),this},t.prototype.getColor=function(){return this.inputIsNumber?this.getHexNumber():this.color.toString()},t.prototype.getHexString=function(){return this.color.toHexString().toUpperCase()},t.prototype.getHexNumber=function(){return parseInt(this.color.toHex(),16)},t.prototype.getRGB=function(){return this.color.toRgb()},t.prototype.getHSV=function(){return this.color.toHsv()},t.prototype.isDark=function(){return this.color.isDark()},t.prototype.isLight=function(){return this.color.isLight()},t.prototype._moveSelectorTo=function(e,t){this.position.x=r(e,0,this.saturationWidth),this.position.y=r(t,0,this.hueHeight),u(this.$sbSelector,{x:this.position.x,y:this.position.y})},t.prototype._updateColorFromPosition=function(){this.color=l({h:this.hue,s:this.position.x/this.saturationWidth,v:1-this.position.y/this.hueHeight}),this._updateColor()},t.prototype._moveHueTo=function(e){this.huePosition=r(e,0,this.maxHue),u(this.$hSelector,{y:this.huePosition})},t.prototype._updateHueFromPosition=function(){var e=this.color.toHsv();this.hue=360*(1-this.huePosition/this.maxHue),this.color=l({h:this.hue,s:e.s,v:e.v}),this._updateHue()},t.prototype._updateHue=function(){var e=l({h:this.hue,s:1,v:1});this.$saturation.style.background="linear-gradient(to right, #fff, "+e.toHexString()+")",this._updateColor()},t.prototype._updateColor=function(){this.$sbSelector.style.background=this.color.toHexString(),this.$sbSelector.style.borderColor=this.color.isDark()?"#fff":"#000",this.emit("update",this.color.toHexString())},t.prototype._onSaturationMouseDown=function(e){var t=this.$saturation.getBoundingClientRect(),i=n(e).x,r=n(e).y;this._moveSelectorTo(i-t.left,r-t.top),this._updateColorFromPosition(),window.addEventListener("mouseup",this._onSaturationMouseUp),window.addEventListener("touchend",this._onSaturationMouseUp),window.addEventListener("mousemove",this._onSaturationMouseMove),window.addEventListener("touchmove",this._onSaturationMouseMove),e.preventDefault()},t.prototype._onSaturationMouseMove=function(e){var t=this.$saturation.getBoundingClientRect(),i=n(e).x,r=n(e).y;this._moveSelectorTo(i-t.left,r-t.top),this._updateColorFromPosition()},t.prototype._onSaturationMouseUp=function(){window.removeEventListener("mouseup",this._onSaturationMouseUp),window.removeEventListener("touchend",this._onSaturationMouseUp),window.removeEventListener("mousemove",this._onSaturationMouseMove),window.removeEventListener("touchmove",this._onSaturationMouseMove)},t.prototype._onHueMouseDown=function(e){var t=this.$hue.getBoundingClientRect(),i=n(e).y;this._moveHueTo(i-t.top),this._updateHueFromPosition(),window.addEventListener("mouseup",this._onHueMouseUp),window.addEventListener("touchend",this._onHueMouseUp),window.addEventListener("mousemove",this._onHueMouseMove),window.addEventListener("touchmove",this._onHueMouseMove),e.preventDefault()},t.prototype._onHueMouseMove=function(e){var t=this.$hue.getBoundingClientRect(),i=n(e).y;this._moveHueTo(i-t.top),this._updateHueFromPosition()},t.prototype._onHueMouseUp=function(){window.removeEventListener("mouseup",this._onHueMouseUp),window.removeEventListener("touchend",this._onHueMouseUp),window.removeEventListener("mousemove",this._onHueMouseMove),window.removeEventListener("touchmove",this._onHueMouseMove)},"undefined"!=typeof e&&e.exports&&(e.exports=t)}()},function(e,t,i){var r=i(23);"string"==typeof r&&(r=[[e.i,r,""]]);i(2)(r,{});r.locals&&(e.exports=r.locals)},function(e,t,i){var r=i(24);"string"==typeof r&&(r=[[e.i,r,""]]);i(2)(r,{});r.locals&&(e.exports=r.locals)},function(e,t,i){var r=i(25);"string"==typeof r&&(r=[[e.i,r,""]]);i(2)(r,{});r.locals&&(e.exports=r.locals)},function(e,t,i){var r=i(26);"string"==typeof r&&(r=[[e.i,r,""]]);i(2)(r,{});r.locals&&(e.exports=r.locals)},function(e,t,i){var r=i(27);"string"==typeof r&&(r=[[e.i,r,""]]);i(2)(r,{});r.locals&&(e.exports=r.locals)},function(e,t,i){var r=i(28);"string"==typeof r&&(r=[[e.i,r,""]]);i(2)(r,{});r.locals&&(e.exports=r.locals)},function(e,t,i){var r;!function(n){function a(e,t){if(e=e?e:"",t=t||{},e instanceof a)return e;if(!(this instanceof a))return new a(e,t);var i=o(e);this._originalInput=e,this._r=i.r,this._g=i.g,this._b=i.b,this._a=i.a,this._roundA=W(100*this._a)/100,this._format=t.format||i.format,this._gradientType=t.gradientType,this._r<1&&(this._r=W(this._r)),this._g<1&&(this._g=W(this._g)),this._b<1&&(this._b=W(this._b)),this._ok=i.ok,this._tc_id=j++}function o(e){var t={r:0,g:0,b:0},i=1,r=null,n=null,a=null,o=!1,l=!1;return"string"==typeof e&&(e=F(e)),"object"==typeof e&&(U(e.r)&&U(e.g)&&U(e.b)?(t=s(e.r,e.g,e.b),o=!0,l="%"===String(e.r).substr(-1)?"prgb":"rgb"):U(e.h)&&U(e.s)&&U(e.v)?(r=G(e.s),n=G(e.v),t=h(e.h,r,n),o=!0,l="hsv"):U(e.h)&&U(e.s)&&U(e.l)&&(r=G(e.s),a=G(e.l),t=u(e.h,r,a),o=!0,l="hsl"),e.hasOwnProperty("a")&&(i=e.a)),i=C(i),{ok:o,format:e.format||l,r:X(255,Y(t.r,0)),g:X(255,Y(t.g,0)),b:X(255,Y(t.b,0)),a:i}}function s(e,t,i){return{r:255*L(e,255),g:255*L(t,255),b:255*L(i,255)}}function l(e,t,i){e=L(e,255),t=L(t,255),i=L(i,255);var r,n,a=Y(e,t,i),o=X(e,t,i),s=(a+o)/2;if(a==o)r=n=0;else{var l=a-o;switch(n=s>.5?l/(2-a-o):l/(a+o),a){case e:r=(t-i)/l+(t<i?6:0);break;case t:r=(i-e)/l+2;break;case i:r=(e-t)/l+4}r/=6}return{h:r,s:n,l:s}}function u(e,t,i){function r(e,t,i){return i<0&&(i+=1),i>1&&(i-=1),i<1/6?e+6*(t-e)*i:i<.5?t:i<2/3?e+(t-e)*(2/3-i)*6:e}var n,a,o;if(e=L(e,360),t=L(t,100),i=L(i,100),0===t)n=a=o=i;else{var s=i<.5?i*(1+t):i+t-i*t,l=2*i-s;n=r(l,s,e+1/3),a=r(l,s,e),o=r(l,s,e-1/3)}return{r:255*n,g:255*a,b:255*o}}function c(e,t,i){e=L(e,255),t=L(t,255),i=L(i,255);var r,n,a=Y(e,t,i),o=X(e,t,i),s=a,l=a-o;if(n=0===a?0:l/a,a==o)r=0;else{switch(a){case e:r=(t-i)/l+(t<i?6:0);break;case t:r=(i-e)/l+2;break;case i:r=(e-t)/l+4}r/=6}return{h:r,s:n,v:s}}function h(e,t,i){e=6*L(e,360),t=L(t,100),i=L(i,100);var r=n.floor(e),a=e-r,o=i*(1-t),s=i*(1-a*t),l=i*(1-(1-a)*t),u=r%6,c=[i,s,o,o,l,i][u],h=[l,i,i,s,o,o][u],f=[o,o,l,i,i,s][u];return{r:255*c,g:255*h,b:255*f}}function f(e,t,i,r){var n=[B(W(e).toString(16)),B(W(t).toString(16)),B(W(i).toString(16))];return r&&n[0].charAt(0)==n[0].charAt(1)&&n[1].charAt(0)==n[1].charAt(1)&&n[2].charAt(0)==n[2].charAt(1)?n[0].charAt(0)+n[1].charAt(0)+n[2].charAt(0):n.join("")}function d(e,t,i,r,n){var a=[B(W(e).toString(16)),B(W(t).toString(16)),B(W(i).toString(16)),B(k(r))];return n&&a[0].charAt(0)==a[0].charAt(1)&&a[1].charAt(0)==a[1].charAt(1)&&a[2].charAt(0)==a[2].charAt(1)&&a[3].charAt(0)==a[3].charAt(1)?a[0].charAt(0)+a[1].charAt(0)+a[2].charAt(0)+a[3].charAt(0):a.join("")}function p(e,t,i,r){var n=[B(k(r)),B(W(e).toString(16)),B(W(t).toString(16)),B(W(i).toString(16))];return n.join("")}function m(e,t){t=0===t?0:t||10;var i=a(e).toHsl();return i.s-=t/100,i.s=R(i.s),a(i)}function v(e,t){t=0===t?0:t||10;var i=a(e).toHsl();return i.s+=t/100,i.s=R(i.s),a(i)}function g(e){return a(e).desaturate(100)}function y(e,t){t=0===t?0:t||10;var i=a(e).toHsl();return i.l+=t/100,i.l=R(i.l),a(i)}function b(e,t){t=0===t?0:t||10;var i=a(e).toRgb();return i.r=Y(0,X(255,i.r-W(255*-(t/100)))),i.g=Y(0,X(255,i.g-W(255*-(t/100)))),i.b=Y(0,X(255,i.b-W(255*-(t/100)))),a(i)}function _(e,t){t=0===t?0:t||10;var i=a(e).toHsl();return i.l-=t/100,i.l=R(i.l),a(i)}function x(e,t){var i=a(e).toHsl(),r=(i.h+t)%360;return i.h=r<0?360+r:r,a(i)}function w(e){var t=a(e).toHsl();return t.h=(t.h+180)%360,a(t)}function T(e){var t=a(e).toHsl(),i=t.h;return[a(e),a({h:(i+120)%360,s:t.s,l:t.l}),a({h:(i+240)%360,s:t.s,l:t.l})]}function M(e){var t=a(e).toHsl(),i=t.h;return[a(e),a({h:(i+90)%360,s:t.s,l:t.l}),a({h:(i+180)%360,s:t.s,l:t.l}),a({h:(i+270)%360,s:t.s,l:t.l})]}function S(e){var t=a(e).toHsl(),i=t.h;return[a(e),a({h:(i+72)%360,s:t.s,l:t.l}),a({h:(i+216)%360,s:t.s,l:t.l})]}function E(e,t,i){t=t||6,i=i||30;var r=a(e).toHsl(),n=360/i,o=[a(e)];for(r.h=(r.h-(n*t>>1)+720)%360;--t;)r.h=(r.h+n)%360,o.push(a(r));return o}function P(e,t){t=t||6;for(var i=a(e).toHsv(),r=i.h,n=i.s,o=i.v,s=[],l=1/t;t--;)s.push(a({h:r,s:n,v:o})),o=(o+l)%1;return s}function A(e){var t={};for(var i in e)e.hasOwnProperty(i)&&(t[e[i]]=i);return t}function C(e){return e=parseFloat(e),(isNaN(e)||e<0||e>1)&&(e=1),e}function L(e,t){I(e)&&(e="100%");var i=D(e);return e=X(t,Y(0,parseFloat(e))),i&&(e=parseInt(e*t,10)/100),n.abs(e-t)<1e-6?1:e%t/parseFloat(t)}function R(e){return X(1,Y(0,e))}function O(e){return parseInt(e,16)}function I(e){return"string"==typeof e&&e.indexOf(".")!=-1&&1===parseFloat(e)}function D(e){return"string"==typeof e&&e.indexOf("%")!=-1}function B(e){return 1==e.length?"0"+e:""+e}function G(e){return e<=1&&(e=100*e+"%"),e}function k(e){return n.round(255*parseFloat(e)).toString(16)}function N(e){return O(e)/255}function U(e){return!!$.CSS_UNIT.exec(e)}function F(e){e=e.replace(z,"").replace(V,"").toLowerCase();var t=!1;if(Z[e])e=Z[e],t=!0;else if("transparent"==e)return{r:0,g:0,b:0,a:0,
format:"name"};var i;return(i=$.rgb.exec(e))?{r:i[1],g:i[2],b:i[3]}:(i=$.rgba.exec(e))?{r:i[1],g:i[2],b:i[3],a:i[4]}:(i=$.hsl.exec(e))?{h:i[1],s:i[2],l:i[3]}:(i=$.hsla.exec(e))?{h:i[1],s:i[2],l:i[3],a:i[4]}:(i=$.hsv.exec(e))?{h:i[1],s:i[2],v:i[3]}:(i=$.hsva.exec(e))?{h:i[1],s:i[2],v:i[3],a:i[4]}:(i=$.hex8.exec(e))?{r:O(i[1]),g:O(i[2]),b:O(i[3]),a:N(i[4]),format:t?"name":"hex8"}:(i=$.hex6.exec(e))?{r:O(i[1]),g:O(i[2]),b:O(i[3]),format:t?"name":"hex"}:(i=$.hex4.exec(e))?{r:O(i[1]+""+i[1]),g:O(i[2]+""+i[2]),b:O(i[3]+""+i[3]),a:N(i[4]+""+i[4]),format:t?"name":"hex8"}:!!(i=$.hex3.exec(e))&&{r:O(i[1]+""+i[1]),g:O(i[2]+""+i[2]),b:O(i[3]+""+i[3]),format:t?"name":"hex"}}function H(e){var t,i;return e=e||{level:"AA",size:"small"},t=(e.level||"AA").toUpperCase(),i=(e.size||"small").toLowerCase(),"AA"!==t&&"AAA"!==t&&(t="AA"),"small"!==i&&"large"!==i&&(i="small"),{level:t,size:i}}var z=/^\s+/,V=/\s+$/,j=0,W=n.round,X=n.min,Y=n.max,q=n.random;a.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var e=this.toRgb();return(299*e.r+587*e.g+114*e.b)/1e3},getLuminance:function(){var e,t,i,r,a,o,s=this.toRgb();return e=s.r/255,t=s.g/255,i=s.b/255,r=e<=.03928?e/12.92:n.pow((e+.055)/1.055,2.4),a=t<=.03928?t/12.92:n.pow((t+.055)/1.055,2.4),o=i<=.03928?i/12.92:n.pow((i+.055)/1.055,2.4),.2126*r+.7152*a+.0722*o},setAlpha:function(e){return this._a=C(e),this._roundA=W(100*this._a)/100,this},toHsv:function(){var e=c(this._r,this._g,this._b);return{h:360*e.h,s:e.s,v:e.v,a:this._a}},toHsvString:function(){var e=c(this._r,this._g,this._b),t=W(360*e.h),i=W(100*e.s),r=W(100*e.v);return 1==this._a?"hsv("+t+", "+i+"%, "+r+"%)":"hsva("+t+", "+i+"%, "+r+"%, "+this._roundA+")"},toHsl:function(){var e=l(this._r,this._g,this._b);return{h:360*e.h,s:e.s,l:e.l,a:this._a}},toHslString:function(){var e=l(this._r,this._g,this._b),t=W(360*e.h),i=W(100*e.s),r=W(100*e.l);return 1==this._a?"hsl("+t+", "+i+"%, "+r+"%)":"hsla("+t+", "+i+"%, "+r+"%, "+this._roundA+")"},toHex:function(e){return f(this._r,this._g,this._b,e)},toHexString:function(e){return"#"+this.toHex(e)},toHex8:function(e){return d(this._r,this._g,this._b,this._a,e)},toHex8String:function(e){return"#"+this.toHex8(e)},toRgb:function(){return{r:W(this._r),g:W(this._g),b:W(this._b),a:this._a}},toRgbString:function(){return 1==this._a?"rgb("+W(this._r)+", "+W(this._g)+", "+W(this._b)+")":"rgba("+W(this._r)+", "+W(this._g)+", "+W(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:W(100*L(this._r,255))+"%",g:W(100*L(this._g,255))+"%",b:W(100*L(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return 1==this._a?"rgb("+W(100*L(this._r,255))+"%, "+W(100*L(this._g,255))+"%, "+W(100*L(this._b,255))+"%)":"rgba("+W(100*L(this._r,255))+"%, "+W(100*L(this._g,255))+"%, "+W(100*L(this._b,255))+"%, "+this._roundA+")"},toName:function(){return 0===this._a?"transparent":!(this._a<1)&&(K[f(this._r,this._g,this._b,!0)]||!1)},toFilter:function(e){var t="#"+p(this._r,this._g,this._b,this._a),i=t,r=this._gradientType?"GradientType = 1, ":"";if(e){var n=a(e);i="#"+p(n._r,n._g,n._b,n._a)}return"progid:DXImageTransform.Microsoft.gradient("+r+"startColorstr="+t+",endColorstr="+i+")"},toString:function(e){var t=!!e;e=e||this._format;var i=!1,r=this._a<1&&this._a>=0,n=!t&&r&&("hex"===e||"hex6"===e||"hex3"===e||"hex4"===e||"hex8"===e||"name"===e);return n?"name"===e&&0===this._a?this.toName():this.toRgbString():("rgb"===e&&(i=this.toRgbString()),"prgb"===e&&(i=this.toPercentageRgbString()),"hex"!==e&&"hex6"!==e||(i=this.toHexString()),"hex3"===e&&(i=this.toHexString(!0)),"hex4"===e&&(i=this.toHex8String(!0)),"hex8"===e&&(i=this.toHex8String()),"name"===e&&(i=this.toName()),"hsl"===e&&(i=this.toHslString()),"hsv"===e&&(i=this.toHsvString()),i||this.toHexString())},clone:function(){return a(this.toString())},_applyModification:function(e,t){var i=e.apply(null,[this].concat([].slice.call(t)));return this._r=i._r,this._g=i._g,this._b=i._b,this.setAlpha(i._a),this},lighten:function(){return this._applyModification(y,arguments)},brighten:function(){return this._applyModification(b,arguments)},darken:function(){return this._applyModification(_,arguments)},desaturate:function(){return this._applyModification(m,arguments)},saturate:function(){return this._applyModification(v,arguments)},greyscale:function(){return this._applyModification(g,arguments)},spin:function(){return this._applyModification(x,arguments)},_applyCombination:function(e,t){return e.apply(null,[this].concat([].slice.call(t)))},analogous:function(){return this._applyCombination(E,arguments)},complement:function(){return this._applyCombination(w,arguments)},monochromatic:function(){return this._applyCombination(P,arguments)},splitcomplement:function(){return this._applyCombination(S,arguments)},triad:function(){return this._applyCombination(T,arguments)},tetrad:function(){return this._applyCombination(M,arguments)}},a.fromRatio=function(e,t){if("object"==typeof e){var i={};for(var r in e)e.hasOwnProperty(r)&&("a"===r?i[r]=e[r]:i[r]=G(e[r]));e=i}return a(e,t)},a.equals=function(e,t){return!(!e||!t)&&a(e).toRgbString()==a(t).toRgbString()},a.random=function(){return a.fromRatio({r:q(),g:q(),b:q()})},a.mix=function(e,t,i){i=0===i?0:i||50;var r=a(e).toRgb(),n=a(t).toRgb(),o=i/100,s={r:(n.r-r.r)*o+r.r,g:(n.g-r.g)*o+r.g,b:(n.b-r.b)*o+r.b,a:(n.a-r.a)*o+r.a};return a(s)},a.readability=function(e,t){var i=a(e),r=a(t);return(n.max(i.getLuminance(),r.getLuminance())+.05)/(n.min(i.getLuminance(),r.getLuminance())+.05)},a.isReadable=function(e,t,i){var r,n,o=a.readability(e,t);switch(n=!1,r=H(i),r.level+r.size){case"AAsmall":case"AAAlarge":n=o>=4.5;break;case"AAlarge":n=o>=3;break;case"AAAsmall":n=o>=7}return n},a.mostReadable=function(e,t,i){var r,n,o,s,l=null,u=0;i=i||{},n=i.includeFallbackColors,o=i.level,s=i.size;for(var c=0;c<t.length;c++)r=a.readability(e,t[c]),r>u&&(u=r,l=a(t[c]));return a.isReadable(e,l,{level:o,size:s})||!n?l:(i.includeFallbackColors=!1,a.mostReadable(e,["#fff","#000"],i))};var Z=a.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},K=a.hexNames=A(Z),$=function(){var e="[-\\+]?\\d+%?",t="[-\\+]?\\d*\\.\\d+%?",i="(?:"+t+")|(?:"+e+")",r="[\\s|\\(]+("+i+")[,|\\s]+("+i+")[,|\\s]+("+i+")\\s*\\)?",n="[\\s|\\(]+("+i+")[,|\\s]+("+i+")[,|\\s]+("+i+")[,|\\s]+("+i+")\\s*\\)?";return{CSS_UNIT:new RegExp(i),rgb:new RegExp("rgb"+r),rgba:new RegExp("rgba"+n),hsl:new RegExp("hsl"+r),hsla:new RegExp("hsla"+n),hsv:new RegExp("hsv"+r),hsva:new RegExp("hsva"+n),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();"undefined"!=typeof e&&e.exports?e.exports=a:(r=function(){return a}.call(t,i,t,e),!(void 0!==r&&(e.exports=r)))}(Math)},function(e,t){function i(e){return e.replace(/^\s*|\s*$/g,"")}t=e.exports=i,t.left=function(e){return e.replace(/^\s*/,"")},t.right=function(e){return e.replace(/\s*$/,"")}},function(e,t){var i;i=function(){return this}();try{i=i||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(i=window)}e.exports=i},function(e,t,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";""===e&&(e="Settings",g.length>0&&(e+=" "+(g.length+1)));var t=new f.default(e);return g.push(t),t.appendTo(b),t}function a(){var e;return(e=c()).add.apply(e,arguments)}function o(){var e;return(e=c()).addColor.apply(e,arguments)}function s(){var e;return(e=c()).addColor.apply(e,arguments)}function l(){var e;return(e=c()).addFolder.apply(e,arguments)}function u(e){return e<g.length?g[e]:null}function c(){return u(0)||n()}var h=i(10),f=r(h),d=i(6),p=(r(d),i(9)),m=r(p),v=i(0);i(11);var g=[],y=(0,v.createElement)("div","guigui"),b=(0,v.createElement)("div","guigui-container"),_=new m.default(b,"guigui-container");(0,v.appendElement)(y),(0,v.appendElement)(b,y),_.appendTo(y),e.exports={addPanel:n,addFolder:l,add:a,addColor:o,addColorPicker:s,getPanel:u}}])},{}],16:[function(e,t,i){var r=[].indexOf;t.exports=function(e,t){if(r)return e.indexOf(t);for(var i=0;i<e.length;++i){if(e[i]===t)return i}return-1}},{}],17:[function(e,t,i){if(typeof Object.create==="function"){t.exports=function e(t,i){t.super_=i;t.prototype=Object.create(i.prototype,{constructor:{value:t,enumerable:false,writable:true,configurable:true}})}}else{t.exports=function e(t,i){t.super_=i;var r=function(){};r.prototype=i.prototype;t.prototype=new r;t.prototype.constructor=t}}},{}],18:[function(e,t,i){(function(e,t){e(function(){"use strict";var e={};e.mobileDetectRules={phones:{iPhone:"\\biPhone\\b|\\biPod\\b",BlackBerry:"BlackBerry|\\bBB10\\b|rim[0-9]+",HTC:"HTC|HTC.*(Sensation|Evo|Vision|Explorer|6800|8100|8900|A7272|S510e|C110e|Legend|Desire|T8282)|APX515CKT|Qtek9090|APA9292KT|HD_mini|Sensation.*Z710e|PG86100|Z715e|Desire.*(A8181|HD)|ADR6200|ADR6400L|ADR6425|001HT|Inspire 4G|Android.*\\bEVO\\b|T-Mobile G1|Z520m",Nexus:"Nexus One|Nexus S|Galaxy.*Nexus|Android.*Nexus.*Mobile|Nexus 4|Nexus 5|Nexus 6",Dell:"Dell.*Streak|Dell.*Aero|Dell.*Venue|DELL.*Venue Pro|Dell Flash|Dell Smoke|Dell Mini 3iX|XCD28|XCD35|\\b001DL\\b|\\b101DL\\b|\\bGS01\\b",Motorola:"Motorola|DROIDX|DROID BIONIC|\\bDroid\\b.*Build|Android.*Xoom|HRI39|MOT-|A1260|A1680|A555|A853|A855|A953|A955|A956|Motorola.*ELECTRIFY|Motorola.*i1|i867|i940|MB200|MB300|MB501|MB502|MB508|MB511|MB520|MB525|MB526|MB611|MB612|MB632|MB810|MB855|MB860|MB861|MB865|MB870|ME501|ME502|ME511|ME525|ME600|ME632|ME722|ME811|ME860|ME863|ME865|MT620|MT710|MT716|MT720|MT810|MT870|MT917|Motorola.*TITANIUM|WX435|WX445|XT300|XT301|XT311|XT316|XT317|XT319|XT320|XT390|XT502|XT530|XT531|XT532|XT535|XT603|XT610|XT611|XT615|XT681|XT701|XT702|XT711|XT720|XT800|XT806|XT860|XT862|XT875|XT882|XT883|XT894|XT901|XT907|XT909|XT910|XT912|XT928|XT926|XT915|XT919|XT925|XT1021|\\bMoto E\\b",Samsung:"\\bSamsung\\b|SM-G9250|GT-19300|SGH-I337|BGT-S5230|GT-B2100|GT-B2700|GT-B2710|GT-B3210|GT-B3310|GT-B3410|GT-B3730|GT-B3740|GT-B5510|GT-B5512|GT-B5722|GT-B6520|GT-B7300|GT-B7320|GT-B7330|GT-B7350|GT-B7510|GT-B7722|GT-B7800|GT-C3010|GT-C3011|GT-C3060|GT-C3200|GT-C3212|GT-C3212I|GT-C3262|GT-C3222|GT-C3300|GT-C3300K|GT-C3303|GT-C3303K|GT-C3310|GT-C3322|GT-C3330|GT-C3350|GT-C3500|GT-C3510|GT-C3530|GT-C3630|GT-C3780|GT-C5010|GT-C5212|GT-C6620|GT-C6625|GT-C6712|GT-E1050|GT-E1070|GT-E1075|GT-E1080|GT-E1081|GT-E1085|GT-E1087|GT-E1100|GT-E1107|GT-E1110|GT-E1120|GT-E1125|GT-E1130|GT-E1160|GT-E1170|GT-E1175|GT-E1180|GT-E1182|GT-E1200|GT-E1210|GT-E1225|GT-E1230|GT-E1390|GT-E2100|GT-E2120|GT-E2121|GT-E2152|GT-E2220|GT-E2222|GT-E2230|GT-E2232|GT-E2250|GT-E2370|GT-E2550|GT-E2652|GT-E3210|GT-E3213|GT-I5500|GT-I5503|GT-I5700|GT-I5800|GT-I5801|GT-I6410|GT-I6420|GT-I7110|GT-I7410|GT-I7500|GT-I8000|GT-I8150|GT-I8160|GT-I8190|GT-I8320|GT-I8330|GT-I8350|GT-I8530|GT-I8700|GT-I8703|GT-I8910|GT-I9000|GT-I9001|GT-I9003|GT-I9010|GT-I9020|GT-I9023|GT-I9070|GT-I9082|GT-I9100|GT-I9103|GT-I9220|GT-I9250|GT-I9300|GT-I9305|GT-I9500|GT-I9505|GT-M3510|GT-M5650|GT-M7500|GT-M7600|GT-M7603|GT-M8800|GT-M8910|GT-N7000|GT-S3110|GT-S3310|GT-S3350|GT-S3353|GT-S3370|GT-S3650|GT-S3653|GT-S3770|GT-S3850|GT-S5210|GT-S5220|GT-S5229|GT-S5230|GT-S5233|GT-S5250|GT-S5253|GT-S5260|GT-S5263|GT-S5270|GT-S5300|GT-S5330|GT-S5350|GT-S5360|GT-S5363|GT-S5369|GT-S5380|GT-S5380D|GT-S5560|GT-S5570|GT-S5600|GT-S5603|GT-S5610|GT-S5620|GT-S5660|GT-S5670|GT-S5690|GT-S5750|GT-S5780|GT-S5830|GT-S5839|GT-S6102|GT-S6500|GT-S7070|GT-S7200|GT-S7220|GT-S7230|GT-S7233|GT-S7250|GT-S7500|GT-S7530|GT-S7550|GT-S7562|GT-S7710|GT-S8000|GT-S8003|GT-S8500|GT-S8530|GT-S8600|SCH-A310|SCH-A530|SCH-A570|SCH-A610|SCH-A630|SCH-A650|SCH-A790|SCH-A795|SCH-A850|SCH-A870|SCH-A890|SCH-A930|SCH-A950|SCH-A970|SCH-A990|SCH-I100|SCH-I110|SCH-I400|SCH-I405|SCH-I500|SCH-I510|SCH-I515|SCH-I600|SCH-I730|SCH-I760|SCH-I770|SCH-I830|SCH-I910|SCH-I920|SCH-I959|SCH-LC11|SCH-N150|SCH-N300|SCH-R100|SCH-R300|SCH-R351|SCH-R400|SCH-R410|SCH-T300|SCH-U310|SCH-U320|SCH-U350|SCH-U360|SCH-U365|SCH-U370|SCH-U380|SCH-U410|SCH-U430|SCH-U450|SCH-U460|SCH-U470|SCH-U490|SCH-U540|SCH-U550|SCH-U620|SCH-U640|SCH-U650|SCH-U660|SCH-U700|SCH-U740|SCH-U750|SCH-U810|SCH-U820|SCH-U900|SCH-U940|SCH-U960|SCS-26UC|SGH-A107|SGH-A117|SGH-A127|SGH-A137|SGH-A157|SGH-A167|SGH-A177|SGH-A187|SGH-A197|SGH-A227|SGH-A237|SGH-A257|SGH-A437|SGH-A517|SGH-A597|SGH-A637|SGH-A657|SGH-A667|SGH-A687|SGH-A697|SGH-A707|SGH-A717|SGH-A727|SGH-A737|SGH-A747|SGH-A767|SGH-A777|SGH-A797|SGH-A817|SGH-A827|SGH-A837|SGH-A847|SGH-A867|SGH-A877|SGH-A887|SGH-A897|SGH-A927|SGH-B100|SGH-B130|SGH-B200|SGH-B220|SGH-C100|SGH-C110|SGH-C120|SGH-C130|SGH-C140|SGH-C160|SGH-C170|SGH-C180|SGH-C200|SGH-C207|SGH-C210|SGH-C225|SGH-C230|SGH-C417|SGH-C450|SGH-D307|SGH-D347|SGH-D357|SGH-D407|SGH-D415|SGH-D780|SGH-D807|SGH-D980|SGH-E105|SGH-E200|SGH-E315|SGH-E316|SGH-E317|SGH-E335|SGH-E590|SGH-E635|SGH-E715|SGH-E890|SGH-F300|SGH-F480|SGH-I200|SGH-I300|SGH-I320|SGH-I550|SGH-I577|SGH-I600|SGH-I607|SGH-I617|SGH-I627|SGH-I637|SGH-I677|SGH-I700|SGH-I717|SGH-I727|SGH-i747M|SGH-I777|SGH-I780|SGH-I827|SGH-I847|SGH-I857|SGH-I896|SGH-I897|SGH-I900|SGH-I907|SGH-I917|SGH-I927|SGH-I937|SGH-I997|SGH-J150|SGH-J200|SGH-L170|SGH-L700|SGH-M110|SGH-M150|SGH-M200|SGH-N105|SGH-N500|SGH-N600|SGH-N620|SGH-N625|SGH-N700|SGH-N710|SGH-P107|SGH-P207|SGH-P300|SGH-P310|SGH-P520|SGH-P735|SGH-P777|SGH-Q105|SGH-R210|SGH-R220|SGH-R225|SGH-S105|SGH-S307|SGH-T109|SGH-T119|SGH-T139|SGH-T209|SGH-T219|SGH-T229|SGH-T239|SGH-T249|SGH-T259|SGH-T309|SGH-T319|SGH-T329|SGH-T339|SGH-T349|SGH-T359|SGH-T369|SGH-T379|SGH-T409|SGH-T429|SGH-T439|SGH-T459|SGH-T469|SGH-T479|SGH-T499|SGH-T509|SGH-T519|SGH-T539|SGH-T559|SGH-T589|SGH-T609|SGH-T619|SGH-T629|SGH-T639|SGH-T659|SGH-T669|SGH-T679|SGH-T709|SGH-T719|SGH-T729|SGH-T739|SGH-T746|SGH-T749|SGH-T759|SGH-T769|SGH-T809|SGH-T819|SGH-T839|SGH-T919|SGH-T929|SGH-T939|SGH-T959|SGH-T989|SGH-U100|SGH-U200|SGH-U800|SGH-V205|SGH-V206|SGH-X100|SGH-X105|SGH-X120|SGH-X140|SGH-X426|SGH-X427|SGH-X475|SGH-X495|SGH-X497|SGH-X507|SGH-X600|SGH-X610|SGH-X620|SGH-X630|SGH-X700|SGH-X820|SGH-X890|SGH-Z130|SGH-Z150|SGH-Z170|SGH-ZX10|SGH-ZX20|SHW-M110|SPH-A120|SPH-A400|SPH-A420|SPH-A460|SPH-A500|SPH-A560|SPH-A600|SPH-A620|SPH-A660|SPH-A700|SPH-A740|SPH-A760|SPH-A790|SPH-A800|SPH-A820|SPH-A840|SPH-A880|SPH-A900|SPH-A940|SPH-A960|SPH-D600|SPH-D700|SPH-D710|SPH-D720|SPH-I300|SPH-I325|SPH-I330|SPH-I350|SPH-I500|SPH-I600|SPH-I700|SPH-L700|SPH-M100|SPH-M220|SPH-M240|SPH-M300|SPH-M305|SPH-M320|SPH-M330|SPH-M350|SPH-M360|SPH-M370|SPH-M380|SPH-M510|SPH-M540|SPH-M550|SPH-M560|SPH-M570|SPH-M580|SPH-M610|SPH-M620|SPH-M630|SPH-M800|SPH-M810|SPH-M850|SPH-M900|SPH-M910|SPH-M920|SPH-M930|SPH-N100|SPH-N200|SPH-N240|SPH-N300|SPH-N400|SPH-Z400|SWC-E100|SCH-i909|GT-N7100|GT-N7105|SCH-I535|SM-N900A|SGH-I317|SGH-T999L|GT-S5360B|GT-I8262|GT-S6802|GT-S6312|GT-S6310|GT-S5312|GT-S5310|GT-I9105|GT-I8510|GT-S6790N|SM-G7105|SM-N9005|GT-S5301|GT-I9295|GT-I9195|SM-C101|GT-S7392|GT-S7560|GT-B7610|GT-I5510|GT-S7582|GT-S7530E|GT-I8750|SM-G9006V|SM-G9008V|SM-G9009D|SM-G900A|SM-G900D|SM-G900F|SM-G900H|SM-G900I|SM-G900J|SM-G900K|SM-G900L|SM-G900M|SM-G900P|SM-G900R4|SM-G900S|SM-G900T|SM-G900V|SM-G900W8|SHV-E160K|SCH-P709|SCH-P729|SM-T2558|GT-I9205|SM-G9350|SM-J120F|SM-G920F|SM-G920V|SM-G930F|SM-N910C",LG:"\\bLG\\b;|LG[- ]?(C800|C900|E400|E610|E900|E-900|F160|F180K|F180L|F180S|730|855|L160|LS740|LS840|LS970|LU6200|MS690|MS695|MS770|MS840|MS870|MS910|P500|P700|P705|VM696|AS680|AS695|AX840|C729|E970|GS505|272|C395|E739BK|E960|L55C|L75C|LS696|LS860|P769BK|P350|P500|P509|P870|UN272|US730|VS840|VS950|LN272|LN510|LS670|LS855|LW690|MN270|MN510|P509|P769|P930|UN200|UN270|UN510|UN610|US670|US740|US760|UX265|UX840|VN271|VN530|VS660|VS700|VS740|VS750|VS910|VS920|VS930|VX9200|VX11000|AX840A|LW770|P506|P925|P999|E612|D955|D802|MS323)",Sony:"SonyST|SonyLT|SonyEricsson|SonyEricssonLT15iv|LT18i|E10i|LT28h|LT26w|SonyEricssonMT27i|C5303|C6902|C6903|C6906|C6943|D2533",Asus:"Asus.*Galaxy|PadFone.*Mobile",NokiaLumia:"Lumia [0-9]{3,4}",Micromax:"Micromax.*\\b(A210|A92|A88|A72|A111|A110Q|A115|A116|A110|A90S|A26|A51|A35|A54|A25|A27|A89|A68|A65|A57|A90)\\b",Palm:"PalmSource|Palm",Vertu:"Vertu|Vertu.*Ltd|Vertu.*Ascent|Vertu.*Ayxta|Vertu.*Constellation(F|Quest)?|Vertu.*Monika|Vertu.*Signature",Pantech:"PANTECH|IM-A850S|IM-A840S|IM-A830L|IM-A830K|IM-A830S|IM-A820L|IM-A810K|IM-A810S|IM-A800S|IM-T100K|IM-A725L|IM-A780L|IM-A775C|IM-A770K|IM-A760S|IM-A750K|IM-A740S|IM-A730S|IM-A720L|IM-A710K|IM-A690L|IM-A690S|IM-A650S|IM-A630K|IM-A600S|VEGA PTL21|PT003|P8010|ADR910L|P6030|P6020|P9070|P4100|P9060|P5000|CDM8992|TXT8045|ADR8995|IS11PT|P2030|P6010|P8000|PT002|IS06|CDM8999|P9050|PT001|TXT8040|P2020|P9020|P2000|P7040|P7000|C790",Fly:"IQ230|IQ444|IQ450|IQ440|IQ442|IQ441|IQ245|IQ256|IQ236|IQ255|IQ235|IQ245|IQ275|IQ240|IQ285|IQ280|IQ270|IQ260|IQ250",Wiko:"KITE 4G|HIGHWAY|GETAWAY|STAIRWAY|DARKSIDE|DARKFULL|DARKNIGHT|DARKMOON|SLIDE|WAX 4G|RAINBOW|BLOOM|SUNSET|GOA(?!nna)|LENNY|BARRY|IGGY|OZZY|CINK FIVE|CINK PEAX|CINK PEAX 2|CINK SLIM|CINK SLIM 2|CINK +|CINK KING|CINK PEAX|CINK SLIM|SUBLIM",iMobile:"i-mobile (IQ|i-STYLE|idea|ZAA|Hitz)",SimValley:"\\b(SP-80|XT-930|SX-340|XT-930|SX-310|SP-360|SP60|SPT-800|SP-120|SPT-800|SP-140|SPX-5|SPX-8|SP-100|SPX-8|SPX-12)\\b",Wolfgang:"AT-B24D|AT-AS50HD|AT-AS40W|AT-AS55HD|AT-AS45q2|AT-B26D|AT-AS50Q",Alcatel:"Alcatel",Nintendo:"Nintendo 3DS",Amoi:"Amoi",INQ:"INQ",GenericPhone:"Tapatalk|PDA;|SAGEM|\\bmmp\\b|pocket|\\bpsp\\b|symbian|Smartphone|smartfon|treo|up.browser|up.link|vodafone|\\bwap\\b|nokia|Series40|Series60|S60|SonyEricsson|N900|MAUI.*WAP.*Browser"},tablets:{iPad:"iPad|iPad.*Mobile",NexusTablet:"Android.*Nexus[\\s]+(7|9|10)",SamsungTablet:"SAMSUNG.*Tablet|Galaxy.*Tab|SC-01C|GT-P1000|GT-P1003|GT-P1010|GT-P3105|GT-P6210|GT-P6800|GT-P6810|GT-P7100|GT-P7300|GT-P7310|GT-P7500|GT-P7510|SCH-I800|SCH-I815|SCH-I905|SGH-I957|SGH-I987|SGH-T849|SGH-T859|SGH-T869|SPH-P100|GT-P3100|GT-P3108|GT-P3110|GT-P5100|GT-P5110|GT-P6200|GT-P7320|GT-P7511|GT-N8000|GT-P8510|SGH-I497|SPH-P500|SGH-T779|SCH-I705|SCH-I915|GT-N8013|GT-P3113|GT-P5113|GT-P8110|GT-N8010|GT-N8005|GT-N8020|GT-P1013|GT-P6201|GT-P7501|GT-N5100|GT-N5105|GT-N5110|SHV-E140K|SHV-E140L|SHV-E140S|SHV-E150S|SHV-E230K|SHV-E230L|SHV-E230S|SHW-M180K|SHW-M180L|SHW-M180S|SHW-M180W|SHW-M300W|SHW-M305W|SHW-M380K|SHW-M380S|SHW-M380W|SHW-M430W|SHW-M480K|SHW-M480S|SHW-M480W|SHW-M485W|SHW-M486W|SHW-M500W|GT-I9228|SCH-P739|SCH-I925|GT-I9200|GT-P5200|GT-P5210|GT-P5210X|SM-T311|SM-T310|SM-T310X|SM-T210|SM-T210R|SM-T211|SM-P600|SM-P601|SM-P605|SM-P900|SM-P901|SM-T217|SM-T217A|SM-T217S|SM-P6000|SM-T3100|SGH-I467|XE500|SM-T110|GT-P5220|GT-I9200X|GT-N5110X|GT-N5120|SM-P905|SM-T111|SM-T2105|SM-T315|SM-T320|SM-T320X|SM-T321|SM-T520|SM-T525|SM-T530NU|SM-T230NU|SM-T330NU|SM-T900|XE500T1C|SM-P605V|SM-P905V|SM-T337V|SM-T537V|SM-T707V|SM-T807V|SM-P600X|SM-P900X|SM-T210X|SM-T230|SM-T230X|SM-T325|GT-P7503|SM-T531|SM-T330|SM-T530|SM-T705|SM-T705C|SM-T535|SM-T331|SM-T800|SM-T700|SM-T537|SM-T807|SM-P907A|SM-T337A|SM-T537A|SM-T707A|SM-T807A|SM-T237|SM-T807P|SM-P607T|SM-T217T|SM-T337T|SM-T807T|SM-T116NQ|SM-T116BU|SM-P550|SM-T350|SM-T550|SM-T9000|SM-P9000|SM-T705Y|SM-T805|GT-P3113|SM-T710|SM-T810|SM-T815|SM-T360|SM-T533|SM-T113|SM-T335|SM-T715|SM-T560|SM-T670|SM-T677|SM-T377|SM-T567|SM-T357T|SM-T555|SM-T561|SM-T713|SM-T719|SM-T813|SM-T819|SM-T580|SM-T355Y|SM-T280|SM-T817A|SM-T820|SM-W700|SM-P580|SM-T587|SM-P350|SM-P555M|SM-P355M|SM-T113NU|SM-T815Y",Kindle:"Kindle|Silk.*Accelerated|Android.*\\b(KFOT|KFTT|KFJWI|KFJWA|KFOTE|KFSOWI|KFTHWI|KFTHWA|KFAPWI|KFAPWA|WFJWAE|KFSAWA|KFSAWI|KFASWI|KFARWI|KFFOWI|KFGIWI|KFMEWI)\\b|Android.*Silk/[0-9.]+ like Chrome/[0-9.]+ (?!Mobile)",SurfaceTablet:"Windows NT [0-9.]+; ARM;.*(Tablet|ARMBJS)",HPTablet:"HP Slate (7|8|10)|HP ElitePad 900|hp-tablet|EliteBook.*Touch|HP 8|Slate 21|HP SlateBook 10",AsusTablet:"^.*PadFone((?!Mobile).)*$|Transformer|TF101|TF101G|TF300T|TF300TG|TF300TL|TF700T|TF700KL|TF701T|TF810C|ME171|ME301T|ME302C|ME371MG|ME370T|ME372MG|ME172V|ME173X|ME400C|Slider SL101|\\bK00F\\b|\\bK00C\\b|\\bK00E\\b|\\bK00L\\b|TX201LA|ME176C|ME102A|\\bM80TA\\b|ME372CL|ME560CG|ME372CG|ME302KL| K010 | K011 | K017 | K01E |ME572C|ME103K|ME170C|ME171C|\\bME70C\\b|ME581C|ME581CL|ME8510C|ME181C|P01Y|PO1MA|P01Z|\\bP027\\b",BlackBerryTablet:"PlayBook|RIM Tablet",HTCtablet:"HTC_Flyer_P512|HTC Flyer|HTC Jetstream|HTC-P715a|HTC EVO View 4G|PG41200|PG09410",MotorolaTablet:"xoom|sholest|MZ615|MZ605|MZ505|MZ601|MZ602|MZ603|MZ604|MZ606|MZ607|MZ608|MZ609|MZ615|MZ616|MZ617",NookTablet:"Android.*Nook|NookColor|nook browser|BNRV200|BNRV200A|BNTV250|BNTV250A|BNTV400|BNTV600|LogicPD Zoom2",AcerTablet:"Android.*; \\b(A100|A101|A110|A200|A210|A211|A500|A501|A510|A511|A700|A701|W500|W500P|W501|W501P|W510|W511|W700|G100|G100W|B1-A71|B1-710|B1-711|A1-810|A1-811|A1-830)\\b|W3-810|\\bA3-A10\\b|\\bA3-A11\\b|\\bA3-A20\\b|\\bA3-A30",ToshibaTablet:"Android.*(AT100|AT105|AT200|AT205|AT270|AT275|AT300|AT305|AT1S5|AT500|AT570|AT700|AT830)|TOSHIBA.*FOLIO",LGTablet:"\\bL-06C|LG-V909|LG-V900|LG-V700|LG-V510|LG-V500|LG-V410|LG-V400|LG-VK810\\b",FujitsuTablet:"Android.*\\b(F-01D|F-02F|F-05E|F-10D|M532|Q572)\\b",PrestigioTablet:"PMP3170B|PMP3270B|PMP3470B|PMP7170B|PMP3370B|PMP3570C|PMP5870C|PMP3670B|PMP5570C|PMP5770D|PMP3970B|PMP3870C|PMP5580C|PMP5880D|PMP5780D|PMP5588C|PMP7280C|PMP7280C3G|PMP7280|PMP7880D|PMP5597D|PMP5597|PMP7100D|PER3464|PER3274|PER3574|PER3884|PER5274|PER5474|PMP5097CPRO|PMP5097|PMP7380D|PMP5297C|PMP5297C_QUAD|PMP812E|PMP812E3G|PMP812F|PMP810E|PMP880TD|PMT3017|PMT3037|PMT3047|PMT3057|PMT7008|PMT5887|PMT5001|PMT5002",LenovoTablet:"Lenovo TAB|Idea(Tab|Pad)( A1|A10| K1|)|ThinkPad([ ]+)?Tablet|YT3-850M|YT3-X90L|YT3-X90F|YT3-X90X|Lenovo.*(S2109|S2110|S5000|S6000|K3011|A3000|A3500|A1000|A2107|A2109|A1107|A5500|A7600|B6000|B8000|B8080)(-|)(FL|F|HV|H|)",DellTablet:"Venue 11|Venue 8|Venue 7|Dell Streak 10|Dell Streak 7",YarvikTablet:"Android.*\\b(TAB210|TAB211|TAB224|TAB250|TAB260|TAB264|TAB310|TAB360|TAB364|TAB410|TAB411|TAB420|TAB424|TAB450|TAB460|TAB461|TAB464|TAB465|TAB467|TAB468|TAB07-100|TAB07-101|TAB07-150|TAB07-151|TAB07-152|TAB07-200|TAB07-201-3G|TAB07-210|TAB07-211|TAB07-212|TAB07-214|TAB07-220|TAB07-400|TAB07-485|TAB08-150|TAB08-200|TAB08-201-3G|TAB08-201-30|TAB09-100|TAB09-211|TAB09-410|TAB10-150|TAB10-201|TAB10-211|TAB10-400|TAB10-410|TAB13-201|TAB274EUK|TAB275EUK|TAB374EUK|TAB462EUK|TAB474EUK|TAB9-200)\\b",MedionTablet:"Android.*\\bOYO\\b|LIFE.*(P9212|P9514|P9516|S9512)|LIFETAB",ArnovaTablet:"97G4|AN10G2|AN7bG3|AN7fG3|AN8G3|AN8cG3|AN7G3|AN9G3|AN7dG3|AN7dG3ST|AN7dG3ChildPad|AN10bG3|AN10bG3DT|AN9G2",IntensoTablet:"INM8002KP|INM1010FP|INM805ND|Intenso Tab|TAB1004",IRUTablet:"M702pro",MegafonTablet:"MegaFon V9|\\bZTE V9\\b|Android.*\\bMT7A\\b",EbodaTablet:"E-Boda (Supreme|Impresspeed|Izzycomm|Essential)",AllViewTablet:"Allview.*(Viva|Alldro|City|Speed|All TV|Frenzy|Quasar|Shine|TX1|AX1|AX2)",ArchosTablet:"\\b(101G9|80G9|A101IT)\\b|Qilive 97R|Archos5|\\bARCHOS (70|79|80|90|97|101|FAMILYPAD|)(b|c|)(G10| Cobalt| TITANIUM(HD|)| Xenon| Neon|XSK| 2| XS 2| PLATINUM| CARBON|GAMEPAD)\\b",AinolTablet:"NOVO7|NOVO8|NOVO10|Novo7Aurora|Novo7Basic|NOVO7PALADIN|novo9-Spark",NokiaLumiaTablet:"Lumia 2520",SonyTablet:"Sony.*Tablet|Xperia Tablet|Sony Tablet S|SO-03E|SGPT12|SGPT13|SGPT114|SGPT121|SGPT122|SGPT123|SGPT111|SGPT112|SGPT113|SGPT131|SGPT132|SGPT133|SGPT211|SGPT212|SGPT213|SGP311|SGP312|SGP321|EBRD1101|EBRD1102|EBRD1201|SGP351|SGP341|SGP511|SGP512|SGP521|SGP541|SGP551|SGP621|SGP612|SOT31",PhilipsTablet:"\\b(PI2010|PI3000|PI3100|PI3105|PI3110|PI3205|PI3210|PI3900|PI4010|PI7000|PI7100)\\b",CubeTablet:"Android.*(K8GT|U9GT|U10GT|U16GT|U17GT|U18GT|U19GT|U20GT|U23GT|U30GT)|CUBE U8GT",CobyTablet:"MID1042|MID1045|MID1125|MID1126|MID7012|MID7014|MID7015|MID7034|MID7035|MID7036|MID7042|MID7048|MID7127|MID8042|MID8048|MID8127|MID9042|MID9740|MID9742|MID7022|MID7010",MIDTablet:"M9701|M9000|M9100|M806|M1052|M806|T703|MID701|MID713|MID710|MID727|MID760|MID830|MID728|MID933|MID125|MID810|MID732|MID120|MID930|MID800|MID731|MID900|MID100|MID820|MID735|MID980|MID130|MID833|MID737|MID960|MID135|MID860|MID736|MID140|MID930|MID835|MID733|MID4X10",MSITablet:"MSI \\b(Primo 73K|Primo 73L|Primo 81L|Primo 77|Primo 93|Primo 75|Primo 76|Primo 73|Primo 81|Primo 91|Primo 90|Enjoy 71|Enjoy 7|Enjoy 10)\\b",SMiTTablet:"Android.*(\\bMID\\b|MID-560|MTV-T1200|MTV-PND531|MTV-P1101|MTV-PND530)",RockChipTablet:"Android.*(RK2818|RK2808A|RK2918|RK3066)|RK2738|RK2808A",FlyTablet:"IQ310|Fly Vision",bqTablet:"Android.*(bq)?.*(Elcano|Curie|Edison|Maxwell|Kepler|Pascal|Tesla|Hypatia|Platon|Newton|Livingstone|Cervantes|Avant|Aquaris [E|M]10)|Maxwell.*Lite|Maxwell.*Plus",HuaweiTablet:"MediaPad|MediaPad 7 Youth|IDEOS S7|S7-201c|S7-202u|S7-101|S7-103|S7-104|S7-105|S7-106|S7-201|S7-Slim",NecTablet:"\\bN-06D|\\bN-08D",PantechTablet:"Pantech.*P4100",BronchoTablet:"Broncho.*(N701|N708|N802|a710)",VersusTablet:"TOUCHPAD.*[78910]|\\bTOUCHTAB\\b",ZyncTablet:"z1000|Z99 2G|z99|z930|z999|z990|z909|Z919|z900",PositivoTablet:"TB07STA|TB10STA|TB07FTA|TB10FTA",NabiTablet:"Android.*\\bNabi",KoboTablet:"Kobo Touch|\\bK080\\b|\\bVox\\b Build|\\bArc\\b Build",DanewTablet:"DSlide.*\\b(700|701R|702|703R|704|802|970|971|972|973|974|1010|1012)\\b",TexetTablet:"NaviPad|TB-772A|TM-7045|TM-7055|TM-9750|TM-7016|TM-7024|TM-7026|TM-7041|TM-7043|TM-7047|TM-8041|TM-9741|TM-9747|TM-9748|TM-9751|TM-7022|TM-7021|TM-7020|TM-7011|TM-7010|TM-7023|TM-7025|TM-7037W|TM-7038W|TM-7027W|TM-9720|TM-9725|TM-9737W|TM-1020|TM-9738W|TM-9740|TM-9743W|TB-807A|TB-771A|TB-727A|TB-725A|TB-719A|TB-823A|TB-805A|TB-723A|TB-715A|TB-707A|TB-705A|TB-709A|TB-711A|TB-890HD|TB-880HD|TB-790HD|TB-780HD|TB-770HD|TB-721HD|TB-710HD|TB-434HD|TB-860HD|TB-840HD|TB-760HD|TB-750HD|TB-740HD|TB-730HD|TB-722HD|TB-720HD|TB-700HD|TB-500HD|TB-470HD|TB-431HD|TB-430HD|TB-506|TB-504|TB-446|TB-436|TB-416|TB-146SE|TB-126SE",PlaystationTablet:"Playstation.*(Portable|Vita)",TrekstorTablet:"ST10416-1|VT10416-1|ST70408-1|ST702xx-1|ST702xx-2|ST80208|ST97216|ST70104-2|VT10416-2|ST10216-2A|SurfTab",PyleAudioTablet:"\\b(PTBL10CEU|PTBL10C|PTBL72BC|PTBL72BCEU|PTBL7CEU|PTBL7C|PTBL92BC|PTBL92BCEU|PTBL9CEU|PTBL9CUK|PTBL9C)\\b",AdvanTablet:"Android.* \\b(E3A|T3X|T5C|T5B|T3E|T3C|T3B|T1J|T1F|T2A|T1H|T1i|E1C|T1-E|T5-A|T4|E1-B|T2Ci|T1-B|T1-D|O1-A|E1-A|T1-A|T3A|T4i)\\b ",DanyTechTablet:"Genius Tab G3|Genius Tab S2|Genius Tab Q3|Genius Tab G4|Genius Tab Q4|Genius Tab G-II|Genius TAB GII|Genius TAB GIII|Genius Tab S1",GalapadTablet:"Android.*\\bG1\\b",MicromaxTablet:"Funbook|Micromax.*\\b(P250|P560|P360|P362|P600|P300|P350|P500|P275)\\b",KarbonnTablet:"Android.*\\b(A39|A37|A34|ST8|ST10|ST7|Smart Tab3|Smart Tab2)\\b",AllFineTablet:"Fine7 Genius|Fine7 Shine|Fine7 Air|Fine8 Style|Fine9 More|Fine10 Joy|Fine11 Wide",PROSCANTablet:"\\b(PEM63|PLT1023G|PLT1041|PLT1044|PLT1044G|PLT1091|PLT4311|PLT4311PL|PLT4315|PLT7030|PLT7033|PLT7033D|PLT7035|PLT7035D|PLT7044K|PLT7045K|PLT7045KB|PLT7071KG|PLT7072|PLT7223G|PLT7225G|PLT7777G|PLT7810K|PLT7849G|PLT7851G|PLT7852G|PLT8015|PLT8031|PLT8034|PLT8036|PLT8080K|PLT8082|PLT8088|PLT8223G|PLT8234G|PLT8235G|PLT8816K|PLT9011|PLT9045K|PLT9233G|PLT9735|PLT9760G|PLT9770G)\\b",YONESTablet:"BQ1078|BC1003|BC1077|RK9702|BC9730|BC9001|IT9001|BC7008|BC7010|BC708|BC728|BC7012|BC7030|BC7027|BC7026",ChangJiaTablet:"TPC7102|TPC7103|TPC7105|TPC7106|TPC7107|TPC7201|TPC7203|TPC7205|TPC7210|TPC7708|TPC7709|TPC7712|TPC7110|TPC8101|TPC8103|TPC8105|TPC8106|TPC8203|TPC8205|TPC8503|TPC9106|TPC9701|TPC97101|TPC97103|TPC97105|TPC97106|TPC97111|TPC97113|TPC97203|TPC97603|TPC97809|TPC97205|TPC10101|TPC10103|TPC10106|TPC10111|TPC10203|TPC10205|TPC10503",GUTablet:"TX-A1301|TX-M9002|Q702|kf026",PointOfViewTablet:"TAB-P506|TAB-navi-7-3G-M|TAB-P517|TAB-P-527|TAB-P701|TAB-P703|TAB-P721|TAB-P731N|TAB-P741|TAB-P825|TAB-P905|TAB-P925|TAB-PR945|TAB-PL1015|TAB-P1025|TAB-PI1045|TAB-P1325|TAB-PROTAB[0-9]+|TAB-PROTAB25|TAB-PROTAB26|TAB-PROTAB27|TAB-PROTAB26XL|TAB-PROTAB2-IPS9|TAB-PROTAB30-IPS9|TAB-PROTAB25XXL|TAB-PROTAB26-IPS10|TAB-PROTAB30-IPS10",OvermaxTablet:"OV-(SteelCore|NewBase|Basecore|Baseone|Exellen|Quattor|EduTab|Solution|ACTION|BasicTab|TeddyTab|MagicTab|Stream|TB-08|TB-09)",HCLTablet:"HCL.*Tablet|Connect-3G-2.0|Connect-2G-2.0|ME Tablet U1|ME Tablet U2|ME Tablet G1|ME Tablet X1|ME Tablet Y2|ME Tablet Sync",DPSTablet:"DPS Dream 9|DPS Dual 7",VistureTablet:"V97 HD|i75 3G|Visture V4( HD)?|Visture V5( HD)?|Visture V10",CrestaTablet:"CTP(-)?810|CTP(-)?818|CTP(-)?828|CTP(-)?838|CTP(-)?888|CTP(-)?978|CTP(-)?980|CTP(-)?987|CTP(-)?988|CTP(-)?989",MediatekTablet:"\\bMT8125|MT8389|MT8135|MT8377\\b",ConcordeTablet:"Concorde([ ]+)?Tab|ConCorde ReadMan",
GoCleverTablet:"GOCLEVER TAB|A7GOCLEVER|M1042|M7841|M742|R1042BK|R1041|TAB A975|TAB A7842|TAB A741|TAB A741L|TAB M723G|TAB M721|TAB A1021|TAB I921|TAB R721|TAB I720|TAB T76|TAB R70|TAB R76.2|TAB R106|TAB R83.2|TAB M813G|TAB I721|GCTA722|TAB I70|TAB I71|TAB S73|TAB R73|TAB R74|TAB R93|TAB R75|TAB R76.1|TAB A73|TAB A93|TAB A93.2|TAB T72|TAB R83|TAB R974|TAB R973|TAB A101|TAB A103|TAB A104|TAB A104.2|R105BK|M713G|A972BK|TAB A971|TAB R974.2|TAB R104|TAB R83.3|TAB A1042",ModecomTablet:"FreeTAB 9000|FreeTAB 7.4|FreeTAB 7004|FreeTAB 7800|FreeTAB 2096|FreeTAB 7.5|FreeTAB 1014|FreeTAB 1001 |FreeTAB 8001|FreeTAB 9706|FreeTAB 9702|FreeTAB 7003|FreeTAB 7002|FreeTAB 1002|FreeTAB 7801|FreeTAB 1331|FreeTAB 1004|FreeTAB 8002|FreeTAB 8014|FreeTAB 9704|FreeTAB 1003",VoninoTablet:"\\b(Argus[ _]?S|Diamond[ _]?79HD|Emerald[ _]?78E|Luna[ _]?70C|Onyx[ _]?S|Onyx[ _]?Z|Orin[ _]?HD|Orin[ _]?S|Otis[ _]?S|SpeedStar[ _]?S|Magnet[ _]?M9|Primus[ _]?94[ _]?3G|Primus[ _]?94HD|Primus[ _]?QS|Android.*\\bQ8\\b|Sirius[ _]?EVO[ _]?QS|Sirius[ _]?QS|Spirit[ _]?S)\\b",ECSTablet:"V07OT2|TM105A|S10OT1|TR10CS1",StorexTablet:"eZee[_']?(Tab|Go)[0-9]+|TabLC7|Looney Tunes Tab",VodafoneTablet:"SmartTab([ ]+)?[0-9]+|SmartTabII10|SmartTabII7|VF-1497",EssentielBTablet:"Smart[ ']?TAB[ ]+?[0-9]+|Family[ ']?TAB2",RossMoorTablet:"RM-790|RM-997|RMD-878G|RMD-974R|RMT-705A|RMT-701|RME-601|RMT-501|RMT-711",iMobileTablet:"i-mobile i-note",TolinoTablet:"tolino tab [0-9.]+|tolino shine",AudioSonicTablet:"\\bC-22Q|T7-QC|T-17B|T-17P\\b",AMPETablet:"Android.* A78 ",SkkTablet:"Android.* (SKYPAD|PHOENIX|CYCLOPS)",TecnoTablet:"TECNO P9",JXDTablet:"Android.* \\b(F3000|A3300|JXD5000|JXD3000|JXD2000|JXD300B|JXD300|S5800|S7800|S602b|S5110b|S7300|S5300|S602|S603|S5100|S5110|S601|S7100a|P3000F|P3000s|P101|P200s|P1000m|P200m|P9100|P1000s|S6600b|S908|P1000|P300|S18|S6600|S9100)\\b",iJoyTablet:"Tablet (Spirit 7|Essentia|Galatea|Fusion|Onix 7|Landa|Titan|Scooby|Deox|Stella|Themis|Argon|Unique 7|Sygnus|Hexen|Finity 7|Cream|Cream X2|Jade|Neon 7|Neron 7|Kandy|Scape|Saphyr 7|Rebel|Biox|Rebel|Rebel 8GB|Myst|Draco 7|Myst|Tab7-004|Myst|Tadeo Jones|Tablet Boing|Arrow|Draco Dual Cam|Aurix|Mint|Amity|Revolution|Finity 9|Neon 9|T9w|Amity 4GB Dual Cam|Stone 4GB|Stone 8GB|Andromeda|Silken|X2|Andromeda II|Halley|Flame|Saphyr 9,7|Touch 8|Planet|Triton|Unique 10|Hexen 10|Memphis 4GB|Memphis 8GB|Onix 10)",FX2Tablet:"FX2 PAD7|FX2 PAD10",XoroTablet:"KidsPAD 701|PAD[ ]?712|PAD[ ]?714|PAD[ ]?716|PAD[ ]?717|PAD[ ]?718|PAD[ ]?720|PAD[ ]?721|PAD[ ]?722|PAD[ ]?790|PAD[ ]?792|PAD[ ]?900|PAD[ ]?9715D|PAD[ ]?9716DR|PAD[ ]?9718DR|PAD[ ]?9719QR|PAD[ ]?9720QR|TelePAD1030|Telepad1032|TelePAD730|TelePAD731|TelePAD732|TelePAD735Q|TelePAD830|TelePAD9730|TelePAD795|MegaPAD 1331|MegaPAD 1851|MegaPAD 2151",ViewsonicTablet:"ViewPad 10pi|ViewPad 10e|ViewPad 10s|ViewPad E72|ViewPad7|ViewPad E100|ViewPad 7e|ViewSonic VB733|VB100a",OdysTablet:"LOOX|XENO10|ODYS[ -](Space|EVO|Xpress|NOON)|\\bXELIO\\b|Xelio10Pro|XELIO7PHONETAB|XELIO10EXTREME|XELIOPT2|NEO_QUAD10",CaptivaTablet:"CAPTIVA PAD",IconbitTablet:"NetTAB|NT-3702|NT-3702S|NT-3702S|NT-3603P|NT-3603P|NT-0704S|NT-0704S|NT-3805C|NT-3805C|NT-0806C|NT-0806C|NT-0909T|NT-0909T|NT-0907S|NT-0907S|NT-0902S|NT-0902S",TeclastTablet:"T98 4G|\\bP80\\b|\\bX90HD\\b|X98 Air|X98 Air 3G|\\bX89\\b|P80 3G|\\bX80h\\b|P98 Air|\\bX89HD\\b|P98 3G|\\bP90HD\\b|P89 3G|X98 3G|\\bP70h\\b|P79HD 3G|G18d 3G|\\bP79HD\\b|\\bP89s\\b|\\bA88\\b|\\bP10HD\\b|\\bP19HD\\b|G18 3G|\\bP78HD\\b|\\bA78\\b|\\bP75\\b|G17s 3G|G17h 3G|\\bP85t\\b|\\bP90\\b|\\bP11\\b|\\bP98t\\b|\\bP98HD\\b|\\bG18d\\b|\\bP85s\\b|\\bP11HD\\b|\\bP88s\\b|\\bA80HD\\b|\\bA80se\\b|\\bA10h\\b|\\bP89\\b|\\bP78s\\b|\\bG18\\b|\\bP85\\b|\\bA70h\\b|\\bA70\\b|\\bG17\\b|\\bP18\\b|\\bA80s\\b|\\bA11s\\b|\\bP88HD\\b|\\bA80h\\b|\\bP76s\\b|\\bP76h\\b|\\bP98\\b|\\bA10HD\\b|\\bP78\\b|\\bP88\\b|\\bA11\\b|\\bA10t\\b|\\bP76a\\b|\\bP76t\\b|\\bP76e\\b|\\bP85HD\\b|\\bP85a\\b|\\bP86\\b|\\bP75HD\\b|\\bP76v\\b|\\bA12\\b|\\bP75a\\b|\\bA15\\b|\\bP76Ti\\b|\\bP81HD\\b|\\bA10\\b|\\bT760VE\\b|\\bT720HD\\b|\\bP76\\b|\\bP73\\b|\\bP71\\b|\\bP72\\b|\\bT720SE\\b|\\bC520Ti\\b|\\bT760\\b|\\bT720VE\\b|T720-3GE|T720-WiFi",OndaTablet:"\\b(V975i|Vi30|VX530|V701|Vi60|V701s|Vi50|V801s|V719|Vx610w|VX610W|V819i|Vi10|VX580W|Vi10|V711s|V813|V811|V820w|V820|Vi20|V711|VI30W|V712|V891w|V972|V819w|V820w|Vi60|V820w|V711|V813s|V801|V819|V975s|V801|V819|V819|V818|V811|V712|V975m|V101w|V961w|V812|V818|V971|V971s|V919|V989|V116w|V102w|V973|Vi40)\\b[\\s]+",JaytechTablet:"TPC-PA762",BlaupunktTablet:"Endeavour 800NG|Endeavour 1010",DigmaTablet:"\\b(iDx10|iDx9|iDx8|iDx7|iDxD7|iDxD8|iDsQ8|iDsQ7|iDsQ8|iDsD10|iDnD7|3TS804H|iDsQ11|iDj7|iDs10)\\b",EvolioTablet:"ARIA_Mini_wifi|Aria[ _]Mini|Evolio X10|Evolio X7|Evolio X8|\\bEvotab\\b|\\bNeura\\b",LavaTablet:"QPAD E704|\\bIvoryS\\b|E-TAB IVORY|\\bE-TAB\\b",AocTablet:"MW0811|MW0812|MW0922|MTK8382|MW1031|MW0831|MW0821|MW0931|MW0712",MpmanTablet:"MP11 OCTA|MP10 OCTA|MPQC1114|MPQC1004|MPQC994|MPQC974|MPQC973|MPQC804|MPQC784|MPQC780|\\bMPG7\\b|MPDCG75|MPDCG71|MPDC1006|MP101DC|MPDC9000|MPDC905|MPDC706HD|MPDC706|MPDC705|MPDC110|MPDC100|MPDC99|MPDC97|MPDC88|MPDC8|MPDC77|MP709|MID701|MID711|MID170|MPDC703|MPQC1010",CelkonTablet:"CT695|CT888|CT[\\s]?910|CT7 Tab|CT9 Tab|CT3 Tab|CT2 Tab|CT1 Tab|C820|C720|\\bCT-1\\b",WolderTablet:"miTab \\b(DIAMOND|SPACE|BROOKLYN|NEO|FLY|MANHATTAN|FUNK|EVOLUTION|SKY|GOCAR|IRON|GENIUS|POP|MINT|EPSILON|BROADWAY|JUMP|HOP|LEGEND|NEW AGE|LINE|ADVANCE|FEEL|FOLLOW|LIKE|LINK|LIVE|THINK|FREEDOM|CHICAGO|CLEVELAND|BALTIMORE-GH|IOWA|BOSTON|SEATTLE|PHOENIX|DALLAS|IN 101|MasterChef)\\b",MiTablet:"\\bMI PAD\\b|\\bHM NOTE 1W\\b",NibiruTablet:"Nibiru M1|Nibiru Jupiter One",NexoTablet:"NEXO NOVA|NEXO 10|NEXO AVIO|NEXO FREE|NEXO GO|NEXO EVO|NEXO 3G|NEXO SMART|NEXO KIDDO|NEXO MOBI",LeaderTablet:"TBLT10Q|TBLT10I|TBL-10WDKB|TBL-10WDKBO2013|TBL-W230V2|TBL-W450|TBL-W500|SV572|TBLT7I|TBA-AC7-8G|TBLT79|TBL-8W16|TBL-10W32|TBL-10WKB|TBL-W100",UbislateTablet:"UbiSlate[\\s]?7C",PocketBookTablet:"Pocketbook",KocasoTablet:"\\b(TB-1207)\\b",HisenseTablet:"\\b(F5281|E2371)\\b",Hudl:"Hudl HT7S3|Hudl 2",TelstraTablet:"T-Hub2",GenericTablet:"Android.*\\b97D\\b|Tablet(?!.*PC)|BNTV250A|MID-WCDMA|LogicPD Zoom2|\\bA7EB\\b|CatNova8|A1_07|CT704|CT1002|\\bM721\\b|rk30sdk|\\bEVOTAB\\b|M758A|ET904|ALUMIUM10|Smartfren Tab|Endeavour 1010|Tablet-PC-4|Tagi Tab|\\bM6pro\\b|CT1020W|arc 10HD|\\bTP750\\b|\\bQTAQZ3\\b"},oss:{AndroidOS:"Android",BlackBerryOS:"blackberry|\\bBB10\\b|rim tablet os",PalmOS:"PalmOS|avantgo|blazer|elaine|hiptop|palm|plucker|xiino",SymbianOS:"Symbian|SymbOS|Series60|Series40|SYB-[0-9]+|\\bS60\\b",WindowsMobileOS:"Windows CE.*(PPC|Smartphone|Mobile|[0-9]{3}x[0-9]{3})|Window Mobile|Windows Phone [0-9.]+|WCE;",WindowsPhoneOS:"Windows Phone 10.0|Windows Phone 8.1|Windows Phone 8.0|Windows Phone OS|XBLWP7|ZuneWP7|Windows NT 6.[23]; ARM;",iOS:"\\biPhone.*Mobile|\\biPod|\\biPad",MeeGoOS:"MeeGo",MaemoOS:"Maemo",JavaOS:"J2ME/|\\bMIDP\\b|\\bCLDC\\b",webOS:"webOS|hpwOS",badaOS:"\\bBada\\b",BREWOS:"BREW"},uas:{Chrome:"\\bCrMo\\b|CriOS|Android.*Chrome/[.0-9]* (Mobile)?",Dolfin:"\\bDolfin\\b",Opera:"Opera.*Mini|Opera.*Mobi|Android.*Opera|Mobile.*OPR/[0-9.]+|Coast/[0-9.]+",Skyfire:"Skyfire",Edge:"Mobile Safari/[.0-9]* Edge",IE:"IEMobile|MSIEMobile",Firefox:"fennec|firefox.*maemo|(Mobile|Tablet).*Firefox|Firefox.*Mobile|FxiOS",Bolt:"bolt",TeaShark:"teashark",Blazer:"Blazer",Safari:"Version.*Mobile.*Safari|Safari.*Mobile|MobileSafari",UCBrowser:"UC.*Browser|UCWEB",baiduboxapp:"baiduboxapp",baidubrowser:"baidubrowser",DiigoBrowser:"DiigoBrowser",Puffin:"Puffin",Mercury:"\\bMercury\\b",ObigoBrowser:"Obigo",NetFront:"NF-Browser",GenericBrowser:"NokiaBrowser|OviBrowser|OneBrowser|TwonkyBeamBrowser|SEMC.*Browser|FlyFlow|Minimo|NetFront|Novarra-Vision|MQQBrowser|MicroMessenger",PaleMoon:"Android.*PaleMoon|Mobile.*PaleMoon"},props:{Mobile:"Mobile/[VER]",Build:"Build/[VER]",Version:"Version/[VER]",VendorID:"VendorID/[VER]",iPad:"iPad.*CPU[a-z ]+[VER]",iPhone:"iPhone.*CPU[a-z ]+[VER]",iPod:"iPod.*CPU[a-z ]+[VER]",Kindle:"Kindle/[VER]",Chrome:["Chrome/[VER]","CriOS/[VER]","CrMo/[VER]"],Coast:["Coast/[VER]"],Dolfin:"Dolfin/[VER]",Firefox:["Firefox/[VER]","FxiOS/[VER]"],Fennec:"Fennec/[VER]",Edge:"Edge/[VER]",IE:["IEMobile/[VER];","IEMobile [VER]","MSIE [VER];","Trident/[0-9.]+;.*rv:[VER]"],NetFront:"NetFront/[VER]",NokiaBrowser:"NokiaBrowser/[VER]",Opera:[" OPR/[VER]","Opera Mini/[VER]","Version/[VER]"],"Opera Mini":"Opera Mini/[VER]","Opera Mobi":"Version/[VER]","UC Browser":"UC Browser[VER]",MQQBrowser:"MQQBrowser/[VER]",MicroMessenger:"MicroMessenger/[VER]",baiduboxapp:"baiduboxapp/[VER]",baidubrowser:"baidubrowser/[VER]",SamsungBrowser:"SamsungBrowser/[VER]",Iron:"Iron/[VER]",Safari:["Version/[VER]","Safari/[VER]"],Skyfire:"Skyfire/[VER]",Tizen:"Tizen/[VER]",Webkit:"webkit[ /][VER]",PaleMoon:"PaleMoon/[VER]",Gecko:"Gecko/[VER]",Trident:"Trident/[VER]",Presto:"Presto/[VER]",Goanna:"Goanna/[VER]",iOS:" \\bi?OS\\b [VER][ ;]{1}",Android:"Android [VER]",BlackBerry:["BlackBerry[\\w]+/[VER]","BlackBerry.*Version/[VER]","Version/[VER]"],BREW:"BREW [VER]",Java:"Java/[VER]","Windows Phone OS":["Windows Phone OS [VER]","Windows Phone [VER]"],"Windows Phone":"Windows Phone [VER]","Windows CE":"Windows CE/[VER]","Windows NT":"Windows NT [VER]",Symbian:["SymbianOS/[VER]","Symbian/[VER]"],webOS:["webOS/[VER]","hpwOS/[VER];"]},utils:{Bot:"Googlebot|facebookexternalhit|AdsBot-Google|Google Keyword Suggestion|Facebot|YandexBot|YandexMobileBot|bingbot|ia_archiver|AhrefsBot|Ezooms|GSLFbot|WBSearchBot|Twitterbot|TweetmemeBot|Twikle|PaperLiBot|Wotbox|UnwindFetchor|Exabot|MJ12bot|YandexImages|TurnitinBot|Pingdom",MobileBot:"Googlebot-Mobile|AdsBot-Google-Mobile|YahooSeeker/M1A1-R2D2",DesktopMode:"WPDesktop",TV:"SonyDTV|HbbTV",WebKit:"(webkit)[ /]([\\w.]+)",Console:"\\b(Nintendo|Nintendo WiiU|Nintendo 3DS|PLAYSTATION|Xbox)\\b",Watch:"SM-V700"}};e.detectMobileBrowsers={fullPattern:/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i,shortPattern:/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i,tabletPattern:/android|ipad|playbook|silk/i};var i=Object.prototype.hasOwnProperty,r;e.FALLBACK_PHONE="UnknownPhone";e.FALLBACK_TABLET="UnknownTablet";e.FALLBACK_MOBILE="UnknownMobile";r="isArray"in Array?Array.isArray:function(e){return Object.prototype.toString.call(e)==="[object Array]"};function n(e,t){return e!=null&&t!=null&&e.toLowerCase()===t.toLowerCase()}function a(e,t){var i,r,n=e.length;if(!n||!t){return false}i=t.toLowerCase();for(r=0;r<n;++r){if(i===e[r].toLowerCase()){return true}}return false}function o(e){for(var t in e){if(i.call(e,t)){e[t]=new RegExp(e[t],"i")}}}(function t(){var n,a,s,l,u,c,h=e.mobileDetectRules;for(n in h.props){if(i.call(h.props,n)){a=h.props[n];if(!r(a)){a=[a]}u=a.length;for(l=0;l<u;++l){s=a[l];c=s.indexOf("[VER]");if(c>=0){s=s.substring(0,c)+"([\\w._\\+]+)"+s.substring(c+5)}a[l]=new RegExp(s,"i")}h.props[n]=a}}o(h.oss);o(h.phones);o(h.tablets);o(h.uas);o(h.utils);h.oss0={WindowsPhoneOS:h.oss.WindowsPhoneOS,WindowsMobileOS:h.oss.WindowsMobileOS}})();e.findMatch=function(e,t){for(var r in e){if(i.call(e,r)){if(e[r].test(t)){return r}}}return null};e.findMatches=function(e,t){var r=[];for(var n in e){if(i.call(e,n)){if(e[n].test(t)){r.push(n)}}}return r};e.getVersionStr=function(t,r){var n=e.mobileDetectRules.props,a,o,s,l;if(i.call(n,t)){a=n[t];s=a.length;for(o=0;o<s;++o){l=a[o].exec(r);if(l!==null){return l[1]}}}return null};e.getVersion=function(t,i){var r=e.getVersionStr(t,i);return r?e.prepareVersionNo(r):NaN};e.prepareVersionNo=function(e){var t;t=e.split(/[a-z._ \/\-]/i);if(t.length===1){e=t[0]}if(t.length>1){e=t[0]+".";t.shift();e+=t.join("")}return Number(e)};e.isMobileFallback=function(t){return e.detectMobileBrowsers.fullPattern.test(t)||e.detectMobileBrowsers.shortPattern.test(t.substr(0,4))};e.isTabletFallback=function(t){return e.detectMobileBrowsers.tabletPattern.test(t)};e.prepareDetectionCache=function(i,r,n){if(i.mobile!==t){return}var a,o,l;o=e.findMatch(e.mobileDetectRules.tablets,r);if(o){i.mobile=i.tablet=o;i.phone=null;return}a=e.findMatch(e.mobileDetectRules.phones,r);if(a){i.mobile=i.phone=a;i.tablet=null;return}if(e.isMobileFallback(r)){l=s.isPhoneSized(n);if(l===t){i.mobile=e.FALLBACK_MOBILE;i.tablet=i.phone=null}else if(l){i.mobile=i.phone=e.FALLBACK_PHONE;i.tablet=null}else{i.mobile=i.tablet=e.FALLBACK_TABLET;i.phone=null}}else if(e.isTabletFallback(r)){i.mobile=i.tablet=e.FALLBACK_TABLET;i.phone=null}else{i.mobile=i.tablet=i.phone=null}};e.mobileGrade=function(e){var t=e.mobile()!==null;if(e.os("iOS")&&e.version("iPad")>=4.3||e.os("iOS")&&e.version("iPhone")>=3.1||e.os("iOS")&&e.version("iPod")>=3.1||e.version("Android")>2.1&&e.is("Webkit")||e.version("Windows Phone OS")>=7||e.is("BlackBerry")&&e.version("BlackBerry")>=6||e.match("Playbook.*Tablet")||e.version("webOS")>=1.4&&e.match("Palm|Pre|Pixi")||e.match("hp.*TouchPad")||e.is("Firefox")&&e.version("Firefox")>=12||e.is("Chrome")&&e.is("AndroidOS")&&e.version("Android")>=4||e.is("Skyfire")&&e.version("Skyfire")>=4.1&&e.is("AndroidOS")&&e.version("Android")>=2.3||e.is("Opera")&&e.version("Opera Mobi")>11&&e.is("AndroidOS")||e.is("MeeGoOS")||e.is("Tizen")||e.is("Dolfin")&&e.version("Bada")>=2||(e.is("UC Browser")||e.is("Dolfin"))&&e.version("Android")>=2.3||(e.match("Kindle Fire")||e.is("Kindle")&&e.version("Kindle")>=3)||e.is("AndroidOS")&&e.is("NookTablet")||e.version("Chrome")>=11&&!t||e.version("Safari")>=5&&!t||e.version("Firefox")>=4&&!t||e.version("MSIE")>=7&&!t||e.version("Opera")>=10&&!t){return"A"}if(e.os("iOS")&&e.version("iPad")<4.3||e.os("iOS")&&e.version("iPhone")<3.1||e.os("iOS")&&e.version("iPod")<3.1||e.is("Blackberry")&&e.version("BlackBerry")>=5&&e.version("BlackBerry")<6||e.version("Opera Mini")>=5&&e.version("Opera Mini")<=6.5&&(e.version("Android")>=2.3||e.is("iOS"))||e.match("NokiaN8|NokiaC7|N97.*Series60|Symbian/3")||e.version("Opera Mobi")>=11&&e.is("SymbianOS")){return"B"}if(e.version("BlackBerry")<5||e.match("MSIEMobile|Windows CE.*Mobile")||e.version("Windows Mobile")<=5.2){return"C"}return"C"};e.detectOS=function(t){return e.findMatch(e.mobileDetectRules.oss0,t)||e.findMatch(e.mobileDetectRules.oss,t)};e.getDeviceSmallerSide=function(){return window.screen.width<window.screen.height?window.screen.width:window.screen.height};function s(e,t){this.ua=e||"";this._cache={};this.maxPhoneWidth=t||600}s.prototype={constructor:s,mobile:function(){e.prepareDetectionCache(this._cache,this.ua,this.maxPhoneWidth);return this._cache.mobile},phone:function(){e.prepareDetectionCache(this._cache,this.ua,this.maxPhoneWidth);return this._cache.phone},tablet:function(){e.prepareDetectionCache(this._cache,this.ua,this.maxPhoneWidth);return this._cache.tablet},userAgent:function(){if(this._cache.userAgent===t){this._cache.userAgent=e.findMatch(e.mobileDetectRules.uas,this.ua)}return this._cache.userAgent},userAgents:function(){if(this._cache.userAgents===t){this._cache.userAgents=e.findMatches(e.mobileDetectRules.uas,this.ua)}return this._cache.userAgents},os:function(){if(this._cache.os===t){this._cache.os=e.detectOS(this.ua)}return this._cache.os},version:function(t){return e.getVersion(t,this.ua)},versionStr:function(t){return e.getVersionStr(t,this.ua)},is:function(t){return a(this.userAgents(),t)||n(t,this.os())||n(t,this.phone())||n(t,this.tablet())||a(e.findMatches(e.mobileDetectRules.utils,this.ua),t)},match:function(e){if(!(e instanceof RegExp)){e=new RegExp(e,"i")}return e.test(this.ua)},isPhoneSized:function(e){return s.isPhoneSized(e||this.maxPhoneWidth)},mobileGrade:function(){if(this._cache.grade===t){this._cache.grade=e.mobileGrade(this)}return this._cache.grade}};if(typeof window!=="undefined"&&window.screen){s.isPhoneSized=function(i){return i<0?t:e.getDeviceSmallerSide()<=i}}else{s.isPhoneSized=function(){}}s._impl=e;s.version="1.3.7 2017-09-06";return s})})(function(e){if(typeof t!=="undefined"&&t.exports){return function(e){t.exports=e()}}else if(typeof define==="function"&&define.amd){return define}else if(typeof window!=="undefined"){return function(e){window.MobileDetect=e()}}else{throw new Error("unknown environment")}}())},{}],19:[function(e,t,i){var r={left:0,top:0};t.exports=n;function n(e,t,i){t=t||e.currentTarget||e.srcElement;if(!Array.isArray(i)){i=[0,0]}var r=e.clientX||0;var n=e.clientY||0;var o=a(t);i[0]=r-o.left;i[1]=n-o.top;return i}function a(e){if(e===window||e===document||e===document.body){return r}else{return e.getBoundingClientRect()}}},{}],20:[function(e,t,i){"use strict";var r=e("to-px");t.exports=n;function n(e,t,i){if(typeof e==="function"){i=!!t;t=e;e=window}var n=r("ex",e);var a=function(e){if(i){e.preventDefault()}var r=e.deltaX||0;var a=e.deltaY||0;var o=e.deltaZ||0;var s=e.deltaMode;var l=1;switch(s){case 1:l=n;break;case 2:l=window.innerHeight;break}r*=l;a*=l;o*=l;if(r||a||o){return t(r,a,o,e)}};e.addEventListener("wheel",a);return a}},{"to-px":29}],21:[function(e,t,i){t.exports=function e(t,i){if(!i)i=[0,""];t=String(t);var r=parseFloat(t,10);i[0]=r;i[1]=t.match(/[\d.\-\+]*\s*(.*)/)[1]||"";return i}},{}],22:[function(e,t,i){var r=t.exports={};var n;var a;function o(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}(function(){try{if(typeof setTimeout==="function"){n=setTimeout}else{n=o}}catch(e){n=o}try{if(typeof clearTimeout==="function"){a=clearTimeout}else{a=s}}catch(e){a=s}})();function l(e){if(n===setTimeout){return setTimeout(e,0)}if((n===o||!n)&&setTimeout){n=setTimeout;return setTimeout(e,0)}try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}function u(e){if(a===clearTimeout){return clearTimeout(e)}if((a===s||!a)&&clearTimeout){a=clearTimeout;return clearTimeout(e)}try{return a(e)}catch(t){try{return a.call(null,e)}catch(t){return a.call(this,e)}}}var c=[];var h=false;var f;var d=-1;function p(){if(!h||!f){return}h=false;if(f.length){c=f.concat(c)}else{d=-1}if(c.length){m()}}function m(){if(h){return}var e=l(p);h=true;var t=c.length;while(t){f=c;c=[];while(++d<t){if(f){f[d].run()}}d=-1;t=c.length}f=null;h=false;u(e)}r.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1){for(var i=1;i<arguments.length;i++){t[i-1]=arguments[i]}}c.push(new v(e,t));if(c.length===1&&!h){l(m)}};function v(e,t){this.fun=e;this.array=t}v.prototype.run=function(){this.fun.apply(null,this.array)};r.title="browser";r.browser=true;r.env={};r.argv=[];r.version="";r.versions={};function g(){}r.on=g;r.addListener=g;r.once=g;r.off=g;r.removeListener=g;r.removeAllListeners=g;r.emit=g;r.prependListener=g;r.prependOnceListener=g;r.listeners=function(e){return[]};r.binding=function(e){throw new Error("process.binding is not supported")};r.cwd=function(){return"/"};r.chdir=function(e){throw new Error("process.chdir is not supported")};r.umask=function(){return 0}},{}],23:[function(e,t,i){var r=e("inherits");var n=e("events").EventEmitter;var a=e("right-now");var o=e("raf");t.exports=s;function s(e){if(!(this instanceof s))return new s(e);this.running=false;this.last=a();this._frame=0;this._tick=this.tick.bind(this);if(e)this.on("tick",e)}r(s,n);s.prototype.start=function(){if(this.running)return;this.running=true;this.last=a();this._frame=o(this._tick);return this};s.prototype.stop=function(){this.running=false;if(this._frame!==0)o.cancel(this._frame);this._frame=0;return this};s.prototype.tick=function(){this._frame=o(this._tick);var e=a();var t=e-this.last;this.emit("tick",t);this.last=e}},{events:13,inherits:17,raf:25,"right-now":26}],24:[function(e,t,i){(function(e){(function(){var i,r,n,a,o,s;if(typeof performance!=="undefined"&&performance!==null&&performance.now){t.exports=function(){return performance.now()}}else if(typeof e!=="undefined"&&e!==null&&e.hrtime){t.exports=function(){return(i()-o)/1e6};r=e.hrtime;i=function(){var e;e=r();return e[0]*1e9+e[1]};a=i();s=e.uptime()*1e9;o=a-s}else if(Date.now){t.exports=function(){return Date.now()-n};n=Date.now()}else{t.exports=function(){return(new Date).getTime()-n};n=(new Date).getTime()}}).call(this)}).call(this,e("_process"))},{_process:22}],25:[function(e,t,i){(function(i){var r=e("performance-now"),n=typeof window==="undefined"?i:window,a=["moz","webkit"],o="AnimationFrame",s=n["request"+o],l=n["cancel"+o]||n["cancelRequest"+o];for(var u=0;!s&&u<a.length;u++){s=n[a[u]+"Request"+o];l=n[a[u]+"Cancel"+o]||n[a[u]+"CancelRequest"+o]}if(!s||!l){var c=0,h=0,f=[],d=1e3/60;s=function(e){if(f.length===0){var t=r(),i=Math.max(0,d-(t-c));c=i+t;setTimeout(function(){var e=f.slice(0);f.length=0;for(var t=0;t<e.length;t++){if(!e[t].cancelled){try{e[t].callback(c)}catch(e){setTimeout(function(){throw e},0)}}}},Math.round(i))}f.push({handle:++h,callback:e,cancelled:false});return h};l=function(e){for(var t=0;t<f.length;t++){if(f[t].handle===e){f[t].cancelled=true}}}}t.exports=function(e){return s.call(n,e)};t.exports.cancel=function(){l.apply(n,arguments)};t.exports.polyfill=function(e){if(!e){e=n}e.requestAnimationFrame=s;e.cancelAnimationFrame=l}}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"performance-now":24}],26:[function(e,t,i){(function(e){t.exports=e.performance&&e.performance.now?function e(){return performance.now()}:Date.now||function e(){return+new Date}}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{}],27:[function(e,t,i){(function(e,r){typeof i==="object"&&typeof t!=="undefined"?r(i):typeof define==="function"&&define.amd?define(["exports"],r):r(e.THREE=e.THREE||{})})(this,function(e){"use strict";if(Number.EPSILON===undefined){Number.EPSILON=Math.pow(2,-52)}if(Number.isInteger===undefined){Number.isInteger=function(e){return typeof e==="number"&&isFinite(e)&&Math.floor(e)===e}}if(Math.sign===undefined){Math.sign=function(e){return e<0?-1:e>0?1:+e}}if("name"in Function.prototype===false){Object.defineProperty(Function.prototype,"name",{get:function(){return this.toString().match(/^\s*function\s*([^\(\s]*)/)[1]}})}if(Object.assign===undefined){(function(){Object.assign=function(e){"use strict";if(e===undefined||e===null){throw new TypeError("Cannot convert undefined or null to object")}var t=Object(e);for(var i=1;i<arguments.length;i++){var r=arguments[i];if(r!==undefined&&r!==null){for(var n in r){if(Object.prototype.hasOwnProperty.call(r,n)){t[n]=r[n]}}}}return t}})()}function t(){}Object.assign(t.prototype,{addEventListener:function(e,t){if(this._listeners===undefined)this._listeners={};var i=this._listeners;if(i[e]===undefined){i[e]=[]}if(i[e].indexOf(t)===-1){i[e].push(t)}},hasEventListener:function(e,t){if(this._listeners===undefined)return false;var i=this._listeners;return i[e]!==undefined&&i[e].indexOf(t)!==-1},removeEventListener:function(e,t){if(this._listeners===undefined)return;var i=this._listeners;var r=i[e];if(r!==undefined){var n=r.indexOf(t);if(n!==-1){r.splice(n,1)}}},dispatchEvent:function(e){if(this._listeners===undefined)return;var t=this._listeners;var i=t[e.type];if(i!==undefined){e.target=this;var r=i.slice(0);for(var n=0,a=r.length;n<a;n++){r[n].call(this,e)}}}});var i="88";var r={LEFT:0,MIDDLE:1,RIGHT:2};var n=0;var a=1;var o=2;var s=3;var l=0;var u=1;var c=0;var h=1;var f=2;var d=0;var p=1;var m=2;var v=1;var g=2;var y=0;var b=1;var _=2;var x=0;var w=1;var T=2;var M=3;var S=4;var E=5;var P=100;var A=101;var C=102;var L=103;var R=104;var O=200;var I=201;var D=202;var B=203;var G=204;var k=205;var N=206;var U=207;var F=208;var H=209;var z=210;var V=0;var j=1;var W=2;var X=3;var Y=4;var q=5;var Z=6;var K=7;var $=0;var Q=1;var J=2;var ee=0;var te=1;var ie=2;var re=3;var ne=4;var ae=300;var oe=301;var se=302;var le=303;var ue=304;var ce=305;var he=306;var fe=307;var de=1e3;var pe=1001;var me=1002;var ve=1003;var ge=1004;var ye=1005;var be=1006;var _e=1007;var xe=1008;var we=1009;var Te=1010;var Me=1011;var Se=1012;var Ee=1013;var Pe=1014;var Ae=1015;var Ce=1016;var Le=1017;var Re=1018;var Oe=1019;var Ie=1020;var De=1021;var Be=1022;var Ge=1023;var ke=1024;var Ne=1025;var Ue=Ge;var Fe=1026;var He=1027;var ze=2001;var Ve=2002;var je=2003;var We=2004;var Xe=2100;var Ye=2101;var qe=2102;var Ze=2103;var Ke=2151;var $e=2200;var Qe=2201;var Je=2202;var et=2300;var tt=2301;var it=2302;var rt=2400;var nt=2401;var at=2402;var ot=0;var st=1;var lt=2;var ut=3e3;var ct=3001;var ht=3007;var ft=3002;var dt=3003;var pt=3004;var mt=3005;var vt=3006;var gt=3200;var yt=3201;var bt={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:function(){var e="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split("");var t=0,i;return function r(){var n="";for(var a=0;a<36;a++){if(a===8||a===13||a===18||a===23){n+="-"}else if(a===14){n+="4"}else{if(t<=2)t=33554432+Math.random()*16777216|0;i=t&15;t=t>>4;n+=e[a===19?i&3|8:i]}}return n}}(),clamp:function(e,t,i){return Math.max(t,Math.min(i,e))},euclideanModulo:function(e,t){return(e%t+t)%t},mapLinear:function(e,t,i,r,n){return r+(e-t)*(n-r)/(i-t)},lerp:function(e,t,i){return(1-i)*e+i*t},smoothstep:function(e,t,i){if(e<=t)return 0;if(e>=i)return 1;e=(e-t)/(i-t);return e*e*(3-2*e)},smootherstep:function(e,t,i){if(e<=t)return 0;if(e>=i)return 1;e=(e-t)/(i-t);return e*e*e*(e*(e*6-15)+10)},randInt:function(e,t){return e+Math.floor(Math.random()*(t-e+1))},randFloat:function(e,t){return e+Math.random()*(t-e)},randFloatSpread:function(e){return e*(.5-Math.random())},degToRad:function(e){return e*bt.DEG2RAD},radToDeg:function(e){return e*bt.RAD2DEG},isPowerOfTwo:function(e){return(e&e-1)===0&&e!==0},ceilPowerOfTwo:function(e){return Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))},floorPowerOfTwo:function(e){return Math.pow(2,Math.floor(Math.log(e)/Math.LN2))}};function _t(e,t){this.x=e||0;this.y=t||0}Object.defineProperties(_t.prototype,{width:{get:function(){return this.x},set:function(e){this.x=e}},height:{get:function(){return this.y},set:function(e){this.y=e}}});Object.assign(_t.prototype,{isVector2:true,set:function(e,t){this.x=e;this.y=t;return this},setScalar:function(e){this.x=e;this.y=e;return this},setX:function(e){this.x=e;return this},setY:function(e){this.y=e;return this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}},clone:function(){return new this.constructor(this.x,this.y)},copy:function(e){this.x=e.x;this.y=e.y;return this},add:function(e,t){if(t!==undefined){console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead.");return this.addVectors(e,t)}this.x+=e.x;this.y+=e.y;return this},addScalar:function(e){this.x+=e;this.y+=e;return this},addVectors:function(e,t){this.x=e.x+t.x;this.y=e.y+t.y;return this},addScaledVector:function(e,t){this.x+=e.x*t;this.y+=e.y*t;return this},sub:function(e,t){if(t!==undefined){console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead.");return this.subVectors(e,t)}this.x-=e.x;this.y-=e.y;return this},subScalar:function(e){this.x-=e;this.y-=e;return this},subVectors:function(e,t){this.x=e.x-t.x;this.y=e.y-t.y;return this},multiply:function(e){this.x*=e.x;this.y*=e.y;return this},multiplyScalar:function(e){this.x*=e;this.y*=e;return this},divide:function(e){this.x/=e.x;this.y/=e.y;return this},divideScalar:function(e){return this.multiplyScalar(1/e)},applyMatrix3:function(e){var t=this.x,i=this.y;var r=e.elements;this.x=r[0]*t+r[3]*i+r[6];this.y=r[1]*t+r[4]*i+r[7];return this},min:function(e){this.x=Math.min(this.x,e.x);this.y=Math.min(this.y,e.y);return this},max:function(e){this.x=Math.max(this.x,e.x);this.y=Math.max(this.y,e.y);return this},clamp:function(e,t){this.x=Math.max(e.x,Math.min(t.x,this.x));this.y=Math.max(e.y,Math.min(t.y,this.y));return this},clampScalar:function(){var e=new _t;var t=new _t;return function i(r,n){e.set(r,r);t.set(n,n);return this.clamp(e,t)}}(),clampLength:function(e,t){var i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))},floor:function(){this.x=Math.floor(this.x);this.y=Math.floor(this.y);return this},ceil:function(){this.x=Math.ceil(this.x);this.y=Math.ceil(this.y);return this},round:function(){this.x=Math.round(this.x);this.y=Math.round(this.y);return this},roundToZero:function(){this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x);this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y);return this},negate:function(){this.x=-this.x;this.y=-this.y;return this},dot:function(e){return this.x*e.x+this.y*e.y},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)},normalize:function(){return this.divideScalar(this.length()||1)},angle:function(){var e=Math.atan2(this.y,this.x);if(e<0)e+=2*Math.PI;return e},distanceTo:function(e){return Math.sqrt(this.distanceToSquared(e))},distanceToSquared:function(e){var t=this.x-e.x,i=this.y-e.y;return t*t+i*i},manhattanDistanceTo:function(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)},setLength:function(e){return this.normalize().multiplyScalar(e)},lerp:function(e,t){this.x+=(e.x-this.x)*t;this.y+=(e.y-this.y)*t;return this},lerpVectors:function(e,t,i){return this.subVectors(t,e).multiplyScalar(i).add(e)},equals:function(e){return e.x===this.x&&e.y===this.y},fromArray:function(e,t){if(t===undefined)t=0;this.x=e[t];this.y=e[t+1];return this},toArray:function(e,t){if(e===undefined)e=[];if(t===undefined)t=0;e[t]=this.x;e[t+1]=this.y;return e},fromBufferAttribute:function(e,t,i){if(i!==undefined){console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute().")}this.x=e.getX(t);this.y=e.getY(t);return this},rotateAround:function(e,t){var i=Math.cos(t),r=Math.sin(t);var n=this.x-e.x;var a=this.y-e.y;this.x=n*i-a*r+e.x;this.y=n*r+a*i+e.y;return this}});function xt(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];if(arguments.length>0){console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}}Object.assign(xt.prototype,{isMatrix4:true,
set:function(e,t,i,r,n,a,o,s,l,u,c,h,f,d,p,m){var v=this.elements;v[0]=e;v[4]=t;v[8]=i;v[12]=r;v[1]=n;v[5]=a;v[9]=o;v[13]=s;v[2]=l;v[6]=u;v[10]=c;v[14]=h;v[3]=f;v[7]=d;v[11]=p;v[15]=m;return this},identity:function(){this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1);return this},clone:function(){return(new xt).fromArray(this.elements)},copy:function(e){var t=this.elements;var i=e.elements;t[0]=i[0];t[1]=i[1];t[2]=i[2];t[3]=i[3];t[4]=i[4];t[5]=i[5];t[6]=i[6];t[7]=i[7];t[8]=i[8];t[9]=i[9];t[10]=i[10];t[11]=i[11];t[12]=i[12];t[13]=i[13];t[14]=i[14];t[15]=i[15];return this},copyPosition:function(e){var t=this.elements,i=e.elements;t[12]=i[12];t[13]=i[13];t[14]=i[14];return this},extractBasis:function(e,t,i){e.setFromMatrixColumn(this,0);t.setFromMatrixColumn(this,1);i.setFromMatrixColumn(this,2);return this},makeBasis:function(e,t,i){this.set(e.x,t.x,i.x,0,e.y,t.y,i.y,0,e.z,t.z,i.z,0,0,0,0,1);return this},extractRotation:function(){var e=new Tt;return function t(i){var r=this.elements;var n=i.elements;var a=1/e.setFromMatrixColumn(i,0).length();var o=1/e.setFromMatrixColumn(i,1).length();var s=1/e.setFromMatrixColumn(i,2).length();r[0]=n[0]*a;r[1]=n[1]*a;r[2]=n[2]*a;r[4]=n[4]*o;r[5]=n[5]*o;r[6]=n[6]*o;r[8]=n[8]*s;r[9]=n[9]*s;r[10]=n[10]*s;return this}}(),makeRotationFromEuler:function(e){if(!(e&&e.isEuler)){console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.")}var t=this.elements;var i=e.x,r=e.y,n=e.z;var a=Math.cos(i),o=Math.sin(i);var s=Math.cos(r),l=Math.sin(r);var u=Math.cos(n),c=Math.sin(n);if(e.order==="XYZ"){var h=a*u,f=a*c,d=o*u,p=o*c;t[0]=s*u;t[4]=-s*c;t[8]=l;t[1]=f+d*l;t[5]=h-p*l;t[9]=-o*s;t[2]=p-h*l;t[6]=d+f*l;t[10]=a*s}else if(e.order==="YXZ"){var m=s*u,v=s*c,g=l*u,y=l*c;t[0]=m+y*o;t[4]=g*o-v;t[8]=a*l;t[1]=a*c;t[5]=a*u;t[9]=-o;t[2]=v*o-g;t[6]=y+m*o;t[10]=a*s}else if(e.order==="ZXY"){var m=s*u,v=s*c,g=l*u,y=l*c;t[0]=m-y*o;t[4]=-a*c;t[8]=g+v*o;t[1]=v+g*o;t[5]=a*u;t[9]=y-m*o;t[2]=-a*l;t[6]=o;t[10]=a*s}else if(e.order==="ZYX"){var h=a*u,f=a*c,d=o*u,p=o*c;t[0]=s*u;t[4]=d*l-f;t[8]=h*l+p;t[1]=s*c;t[5]=p*l+h;t[9]=f*l-d;t[2]=-l;t[6]=o*s;t[10]=a*s}else if(e.order==="YZX"){var b=a*s,_=a*l,x=o*s,w=o*l;t[0]=s*u;t[4]=w-b*c;t[8]=x*c+_;t[1]=c;t[5]=a*u;t[9]=-o*u;t[2]=-l*u;t[6]=_*c+x;t[10]=b-w*c}else if(e.order==="XZY"){var b=a*s,_=a*l,x=o*s,w=o*l;t[0]=s*u;t[4]=-c;t[8]=l*u;t[1]=b*c+w;t[5]=a*u;t[9]=_*c-x;t[2]=x*c-_;t[6]=o*u;t[10]=w*c+b}t[3]=0;t[7]=0;t[11]=0;t[12]=0;t[13]=0;t[14]=0;t[15]=1;return this},makeRotationFromQuaternion:function(e){var t=this.elements;var i=e._x,r=e._y,n=e._z,a=e._w;var o=i+i,s=r+r,l=n+n;var u=i*o,c=i*s,h=i*l;var f=r*s,d=r*l,p=n*l;var m=a*o,v=a*s,g=a*l;t[0]=1-(f+p);t[4]=c-g;t[8]=h+v;t[1]=c+g;t[5]=1-(u+p);t[9]=d-m;t[2]=h-v;t[6]=d+m;t[10]=1-(u+f);t[3]=0;t[7]=0;t[11]=0;t[12]=0;t[13]=0;t[14]=0;t[15]=1;return this},lookAt:function(){var e=new Tt;var t=new Tt;var i=new Tt;return function r(n,a,o){var s=this.elements;i.subVectors(n,a);if(i.lengthSq()===0){i.z=1}i.normalize();e.crossVectors(o,i);if(e.lengthSq()===0){if(Math.abs(o.z)===1){i.x+=1e-4}else{i.z+=1e-4}i.normalize();e.crossVectors(o,i)}e.normalize();t.crossVectors(i,e);s[0]=e.x;s[4]=t.x;s[8]=i.x;s[1]=e.y;s[5]=t.y;s[9]=i.y;s[2]=e.z;s[6]=t.z;s[10]=i.z;return this}}(),multiply:function(e,t){if(t!==undefined){console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead.");return this.multiplyMatrices(e,t)}return this.multiplyMatrices(this,e)},premultiply:function(e){return this.multiplyMatrices(e,this)},multiplyMatrices:function(e,t){var i=e.elements;var r=t.elements;var n=this.elements;var a=i[0],o=i[4],s=i[8],l=i[12];var u=i[1],c=i[5],h=i[9],f=i[13];var d=i[2],p=i[6],m=i[10],v=i[14];var g=i[3],y=i[7],b=i[11],_=i[15];var x=r[0],w=r[4],T=r[8],M=r[12];var S=r[1],E=r[5],P=r[9],A=r[13];var C=r[2],L=r[6],R=r[10],O=r[14];var I=r[3],D=r[7],B=r[11],G=r[15];n[0]=a*x+o*S+s*C+l*I;n[4]=a*w+o*E+s*L+l*D;n[8]=a*T+o*P+s*R+l*B;n[12]=a*M+o*A+s*O+l*G;n[1]=u*x+c*S+h*C+f*I;n[5]=u*w+c*E+h*L+f*D;n[9]=u*T+c*P+h*R+f*B;n[13]=u*M+c*A+h*O+f*G;n[2]=d*x+p*S+m*C+v*I;n[6]=d*w+p*E+m*L+v*D;n[10]=d*T+p*P+m*R+v*B;n[14]=d*M+p*A+m*O+v*G;n[3]=g*x+y*S+b*C+_*I;n[7]=g*w+y*E+b*L+_*D;n[11]=g*T+y*P+b*R+_*B;n[15]=g*M+y*A+b*O+_*G;return this},multiplyScalar:function(e){var t=this.elements;t[0]*=e;t[4]*=e;t[8]*=e;t[12]*=e;t[1]*=e;t[5]*=e;t[9]*=e;t[13]*=e;t[2]*=e;t[6]*=e;t[10]*=e;t[14]*=e;t[3]*=e;t[7]*=e;t[11]*=e;t[15]*=e;return this},applyToBufferAttribute:function(){var e=new Tt;return function t(i){for(var r=0,n=i.count;r<n;r++){e.x=i.getX(r);e.y=i.getY(r);e.z=i.getZ(r);e.applyMatrix4(this);i.setXYZ(r,e.x,e.y,e.z)}return i}}(),determinant:function(){var e=this.elements;var t=e[0],i=e[4],r=e[8],n=e[12];var a=e[1],o=e[5],s=e[9],l=e[13];var u=e[2],c=e[6],h=e[10],f=e[14];var d=e[3],p=e[7],m=e[11],v=e[15];return d*(+n*s*c-r*l*c-n*o*h+i*l*h+r*o*f-i*s*f)+p*(+t*s*f-t*l*h+n*a*h-r*a*f+r*l*u-n*s*u)+m*(+t*l*c-t*o*f-n*a*c+i*a*f+n*o*u-i*l*u)+v*(-r*o*u-t*s*c+t*o*h+r*a*c-i*a*h+i*s*u)},transpose:function(){var e=this.elements;var t;t=e[1];e[1]=e[4];e[4]=t;t=e[2];e[2]=e[8];e[8]=t;t=e[6];e[6]=e[9];e[9]=t;t=e[3];e[3]=e[12];e[12]=t;t=e[7];e[7]=e[13];e[13]=t;t=e[11];e[11]=e[14];e[14]=t;return this},setPosition:function(e){var t=this.elements;t[12]=e.x;t[13]=e.y;t[14]=e.z;return this},getInverse:function(e,t){var i=this.elements,r=e.elements,n=r[0],a=r[1],o=r[2],s=r[3],l=r[4],u=r[5],c=r[6],h=r[7],f=r[8],d=r[9],p=r[10],m=r[11],v=r[12],g=r[13],y=r[14],b=r[15],_=d*y*h-g*p*h+g*c*m-u*y*m-d*c*b+u*p*b,x=v*p*h-f*y*h-v*c*m+l*y*m+f*c*b-l*p*b,w=f*g*h-v*d*h+v*u*m-l*g*m-f*u*b+l*d*b,T=v*d*c-f*g*c-v*u*p+l*g*p+f*u*y-l*d*y;var M=n*_+a*x+o*w+s*T;if(M===0){var S="THREE.Matrix4: .getInverse() can't invert matrix, determinant is 0";if(t===true){throw new Error(S)}else{console.warn(S)}return this.identity()}var E=1/M;i[0]=_*E;i[1]=(g*p*s-d*y*s-g*o*m+a*y*m+d*o*b-a*p*b)*E;i[2]=(u*y*s-g*c*s+g*o*h-a*y*h-u*o*b+a*c*b)*E;i[3]=(d*c*s-u*p*s-d*o*h+a*p*h+u*o*m-a*c*m)*E;i[4]=x*E;i[5]=(f*y*s-v*p*s+v*o*m-n*y*m-f*o*b+n*p*b)*E;i[6]=(v*c*s-l*y*s-v*o*h+n*y*h+l*o*b-n*c*b)*E;i[7]=(l*p*s-f*c*s+f*o*h-n*p*h-l*o*m+n*c*m)*E;i[8]=w*E;i[9]=(v*d*s-f*g*s-v*a*m+n*g*m+f*a*b-n*d*b)*E;i[10]=(l*g*s-v*u*s+v*a*h-n*g*h-l*a*b+n*u*b)*E;i[11]=(f*u*s-l*d*s-f*a*h+n*d*h+l*a*m-n*u*m)*E;i[12]=T*E;i[13]=(f*g*o-v*d*o+v*a*p-n*g*p-f*a*y+n*d*y)*E;i[14]=(v*u*o-l*g*o-v*a*c+n*g*c+l*a*y-n*u*y)*E;i[15]=(l*d*o-f*u*o+f*a*c-n*d*c-l*a*p+n*u*p)*E;return this},scale:function(e){var t=this.elements;var i=e.x,r=e.y,n=e.z;t[0]*=i;t[4]*=r;t[8]*=n;t[1]*=i;t[5]*=r;t[9]*=n;t[2]*=i;t[6]*=r;t[10]*=n;t[3]*=i;t[7]*=r;t[11]*=n;return this},getMaxScaleOnAxis:function(){var e=this.elements;var t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2];var i=e[4]*e[4]+e[5]*e[5]+e[6]*e[6];var r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,i,r))},makeTranslation:function(e,t,i){this.set(1,0,0,e,0,1,0,t,0,0,1,i,0,0,0,1);return this},makeRotationX:function(e){var t=Math.cos(e),i=Math.sin(e);this.set(1,0,0,0,0,t,-i,0,0,i,t,0,0,0,0,1);return this},makeRotationY:function(e){var t=Math.cos(e),i=Math.sin(e);this.set(t,0,i,0,0,1,0,0,-i,0,t,0,0,0,0,1);return this},makeRotationZ:function(e){var t=Math.cos(e),i=Math.sin(e);this.set(t,-i,0,0,i,t,0,0,0,0,1,0,0,0,0,1);return this},makeRotationAxis:function(e,t){var i=Math.cos(t);var r=Math.sin(t);var n=1-i;var a=e.x,o=e.y,s=e.z;var l=n*a,u=n*o;this.set(l*a+i,l*o-r*s,l*s+r*o,0,l*o+r*s,u*o+i,u*s-r*a,0,l*s-r*o,u*s+r*a,n*s*s+i,0,0,0,0,1);return this},makeScale:function(e,t,i){this.set(e,0,0,0,0,t,0,0,0,0,i,0,0,0,0,1);return this},makeShear:function(e,t,i){this.set(1,t,i,0,e,1,i,0,e,t,1,0,0,0,0,1);return this},compose:function(e,t,i){this.makeRotationFromQuaternion(t);this.scale(i);this.setPosition(e);return this},decompose:function(){var e=new Tt;var t=new xt;return function i(r,n,a){var o=this.elements;var s=e.set(o[0],o[1],o[2]).length();var l=e.set(o[4],o[5],o[6]).length();var u=e.set(o[8],o[9],o[10]).length();var c=this.determinant();if(c<0)s=-s;r.x=o[12];r.y=o[13];r.z=o[14];t.copy(this);var h=1/s;var f=1/l;var d=1/u;t.elements[0]*=h;t.elements[1]*=h;t.elements[2]*=h;t.elements[4]*=f;t.elements[5]*=f;t.elements[6]*=f;t.elements[8]*=d;t.elements[9]*=d;t.elements[10]*=d;n.setFromRotationMatrix(t);a.x=s;a.y=l;a.z=u;return this}}(),makePerspective:function(e,t,i,r,n,a){if(a===undefined){console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.")}var o=this.elements;var s=2*n/(t-e);var l=2*n/(i-r);var u=(t+e)/(t-e);var c=(i+r)/(i-r);var h=-(a+n)/(a-n);var f=-2*a*n/(a-n);o[0]=s;o[4]=0;o[8]=u;o[12]=0;o[1]=0;o[5]=l;o[9]=c;o[13]=0;o[2]=0;o[6]=0;o[10]=h;o[14]=f;o[3]=0;o[7]=0;o[11]=-1;o[15]=0;return this},makeOrthographic:function(e,t,i,r,n,a){var o=this.elements;var s=1/(t-e);var l=1/(i-r);var u=1/(a-n);var c=(t+e)*s;var h=(i+r)*l;var f=(a+n)*u;o[0]=2*s;o[4]=0;o[8]=0;o[12]=-c;o[1]=0;o[5]=2*l;o[9]=0;o[13]=-h;o[2]=0;o[6]=0;o[10]=-2*u;o[14]=-f;o[3]=0;o[7]=0;o[11]=0;o[15]=1;return this},equals:function(e){var t=this.elements;var i=e.elements;for(var r=0;r<16;r++){if(t[r]!==i[r])return false}return true},fromArray:function(e,t){if(t===undefined)t=0;for(var i=0;i<16;i++){this.elements[i]=e[i+t]}return this},toArray:function(e,t){if(e===undefined)e=[];if(t===undefined)t=0;var i=this.elements;e[t]=i[0];e[t+1]=i[1];e[t+2]=i[2];e[t+3]=i[3];e[t+4]=i[4];e[t+5]=i[5];e[t+6]=i[6];e[t+7]=i[7];e[t+8]=i[8];e[t+9]=i[9];e[t+10]=i[10];e[t+11]=i[11];e[t+12]=i[12];e[t+13]=i[13];e[t+14]=i[14];e[t+15]=i[15];return e}});function wt(e,t,i,r){this._x=e||0;this._y=t||0;this._z=i||0;this._w=r!==undefined?r:1}Object.assign(wt,{slerp:function(e,t,i,r){return i.copy(e).slerp(t,r)},slerpFlat:function(e,t,i,r,n,a,o){var s=i[r+0],l=i[r+1],u=i[r+2],c=i[r+3],h=n[a+0],f=n[a+1],d=n[a+2],p=n[a+3];if(c!==p||s!==h||l!==f||u!==d){var m=1-o,v=s*h+l*f+u*d+c*p,g=v>=0?1:-1,y=1-v*v;if(y>Number.EPSILON){var b=Math.sqrt(y),_=Math.atan2(b,v*g);m=Math.sin(m*_)/b;o=Math.sin(o*_)/b}var x=o*g;s=s*m+h*x;l=l*m+f*x;u=u*m+d*x;c=c*m+p*x;if(m===1-o){var w=1/Math.sqrt(s*s+l*l+u*u+c*c);s*=w;l*=w;u*=w;c*=w}}e[t]=s;e[t+1]=l;e[t+2]=u;e[t+3]=c}});Object.defineProperties(wt.prototype,{x:{get:function(){return this._x},set:function(e){this._x=e;this.onChangeCallback()}},y:{get:function(){return this._y},set:function(e){this._y=e;this.onChangeCallback()}},z:{get:function(){return this._z},set:function(e){this._z=e;this.onChangeCallback()}},w:{get:function(){return this._w},set:function(e){this._w=e;this.onChangeCallback()}}});Object.assign(wt.prototype,{set:function(e,t,i,r){this._x=e;this._y=t;this._z=i;this._w=r;this.onChangeCallback();return this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._w)},copy:function(e){this._x=e.x;this._y=e.y;this._z=e.z;this._w=e.w;this.onChangeCallback();return this},setFromEuler:function(e,t){if(!(e&&e.isEuler)){throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.")}var i=e._x,r=e._y,n=e._z,a=e.order;var o=Math.cos;var s=Math.sin;var l=o(i/2);var u=o(r/2);var c=o(n/2);var h=s(i/2);var f=s(r/2);var d=s(n/2);if(a==="XYZ"){this._x=h*u*c+l*f*d;this._y=l*f*c-h*u*d;this._z=l*u*d+h*f*c;this._w=l*u*c-h*f*d}else if(a==="YXZ"){this._x=h*u*c+l*f*d;this._y=l*f*c-h*u*d;this._z=l*u*d-h*f*c;this._w=l*u*c+h*f*d}else if(a==="ZXY"){this._x=h*u*c-l*f*d;this._y=l*f*c+h*u*d;this._z=l*u*d+h*f*c;this._w=l*u*c-h*f*d}else if(a==="ZYX"){this._x=h*u*c-l*f*d;this._y=l*f*c+h*u*d;this._z=l*u*d-h*f*c;this._w=l*u*c+h*f*d}else if(a==="YZX"){this._x=h*u*c+l*f*d;this._y=l*f*c+h*u*d;this._z=l*u*d-h*f*c;this._w=l*u*c-h*f*d}else if(a==="XZY"){this._x=h*u*c-l*f*d;this._y=l*f*c-h*u*d;this._z=l*u*d+h*f*c;this._w=l*u*c+h*f*d}if(t!==false)this.onChangeCallback();return this},setFromAxisAngle:function(e,t){var i=t/2,r=Math.sin(i);this._x=e.x*r;this._y=e.y*r;this._z=e.z*r;this._w=Math.cos(i);this.onChangeCallback();return this},setFromRotationMatrix:function(e){var t=e.elements,i=t[0],r=t[4],n=t[8],a=t[1],o=t[5],s=t[9],l=t[2],u=t[6],c=t[10],h=i+o+c,f;if(h>0){f=.5/Math.sqrt(h+1);this._w=.25/f;this._x=(u-s)*f;this._y=(n-l)*f;this._z=(a-r)*f}else if(i>o&&i>c){f=2*Math.sqrt(1+i-o-c);this._w=(u-s)/f;this._x=.25*f;this._y=(r+a)/f;this._z=(n+l)/f}else if(o>c){f=2*Math.sqrt(1+o-i-c);this._w=(n-l)/f;this._x=(r+a)/f;this._y=.25*f;this._z=(s+u)/f}else{f=2*Math.sqrt(1+c-i-o);this._w=(a-r)/f;this._x=(n+l)/f;this._y=(s+u)/f;this._z=.25*f}this.onChangeCallback();return this},setFromUnitVectors:function(){var e=new Tt;var t;var i=1e-6;return function r(n,a){if(e===undefined)e=new Tt;t=n.dot(a)+1;if(t<i){t=0;if(Math.abs(n.x)>Math.abs(n.z)){e.set(-n.y,n.x,0)}else{e.set(0,-n.z,n.y)}}else{e.crossVectors(n,a)}this._x=e.x;this._y=e.y;this._z=e.z;this._w=t;return this.normalize()}}(),inverse:function(){return this.conjugate().normalize()},conjugate:function(){this._x*=-1;this._y*=-1;this._z*=-1;this.onChangeCallback();return this},dot:function(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var e=this.length();if(e===0){this._x=0;this._y=0;this._z=0;this._w=1}else{e=1/e;this._x=this._x*e;this._y=this._y*e;this._z=this._z*e;this._w=this._w*e}this.onChangeCallback();return this},multiply:function(e,t){if(t!==undefined){console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead.");return this.multiplyQuaternions(e,t)}return this.multiplyQuaternions(this,e)},premultiply:function(e){return this.multiplyQuaternions(e,this)},multiplyQuaternions:function(e,t){var i=e._x,r=e._y,n=e._z,a=e._w;var o=t._x,s=t._y,l=t._z,u=t._w;this._x=i*u+a*o+r*l-n*s;this._y=r*u+a*s+n*o-i*l;this._z=n*u+a*l+i*s-r*o;this._w=a*u-i*o-r*s-n*l;this.onChangeCallback();return this},slerp:function(e,t){if(t===0)return this;if(t===1)return this.copy(e);var i=this._x,r=this._y,n=this._z,a=this._w;var o=a*e._w+i*e._x+r*e._y+n*e._z;if(o<0){this._w=-e._w;this._x=-e._x;this._y=-e._y;this._z=-e._z;o=-o}else{this.copy(e)}if(o>=1){this._w=a;this._x=i;this._y=r;this._z=n;return this}var s=Math.sqrt(1-o*o);if(Math.abs(s)<.001){this._w=.5*(a+this._w);this._x=.5*(i+this._x);this._y=.5*(r+this._y);this._z=.5*(n+this._z);return this}var l=Math.atan2(s,o);var u=Math.sin((1-t)*l)/s,c=Math.sin(t*l)/s;this._w=a*u+this._w*c;this._x=i*u+this._x*c;this._y=r*u+this._y*c;this._z=n*u+this._z*c;this.onChangeCallback();return this},equals:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w},fromArray:function(e,t){if(t===undefined)t=0;this._x=e[t];this._y=e[t+1];this._z=e[t+2];this._w=e[t+3];this.onChangeCallback();return this},toArray:function(e,t){if(e===undefined)e=[];if(t===undefined)t=0;e[t]=this._x;e[t+1]=this._y;e[t+2]=this._z;e[t+3]=this._w;return e},onChange:function(e){this.onChangeCallback=e;return this},onChangeCallback:function(){}});function Tt(e,t,i){this.x=e||0;this.y=t||0;this.z=i||0}Object.assign(Tt.prototype,{isVector3:true,set:function(e,t,i){this.x=e;this.y=t;this.z=i;return this},setScalar:function(e){this.x=e;this.y=e;this.z=e;return this},setX:function(e){this.x=e;return this},setY:function(e){this.y=e;return this},setZ:function(e){this.z=e;return this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}},clone:function(){return new this.constructor(this.x,this.y,this.z)},copy:function(e){this.x=e.x;this.y=e.y;this.z=e.z;return this},add:function(e,t){if(t!==undefined){console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead.");return this.addVectors(e,t)}this.x+=e.x;this.y+=e.y;this.z+=e.z;return this},addScalar:function(e){this.x+=e;this.y+=e;this.z+=e;return this},addVectors:function(e,t){this.x=e.x+t.x;this.y=e.y+t.y;this.z=e.z+t.z;return this},addScaledVector:function(e,t){this.x+=e.x*t;this.y+=e.y*t;this.z+=e.z*t;return this},sub:function(e,t){if(t!==undefined){console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead.");return this.subVectors(e,t)}this.x-=e.x;this.y-=e.y;this.z-=e.z;return this},subScalar:function(e){this.x-=e;this.y-=e;this.z-=e;return this},subVectors:function(e,t){this.x=e.x-t.x;this.y=e.y-t.y;this.z=e.z-t.z;return this},multiply:function(e,t){if(t!==undefined){console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead.");return this.multiplyVectors(e,t)}this.x*=e.x;this.y*=e.y;this.z*=e.z;return this},multiplyScalar:function(e){this.x*=e;this.y*=e;this.z*=e;return this},multiplyVectors:function(e,t){this.x=e.x*t.x;this.y=e.y*t.y;this.z=e.z*t.z;return this},applyEuler:function(){var e=new wt;return function t(i){if(!(i&&i.isEuler)){console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order.")}return this.applyQuaternion(e.setFromEuler(i))}}(),applyAxisAngle:function(){var e=new wt;return function t(i,r){return this.applyQuaternion(e.setFromAxisAngle(i,r))}}(),applyMatrix3:function(e){var t=this.x,i=this.y,r=this.z;var n=e.elements;this.x=n[0]*t+n[3]*i+n[6]*r;this.y=n[1]*t+n[4]*i+n[7]*r;this.z=n[2]*t+n[5]*i+n[8]*r;return this},applyMatrix4:function(e){var t=this.x,i=this.y,r=this.z;var n=e.elements;var a=1/(n[3]*t+n[7]*i+n[11]*r+n[15]);this.x=(n[0]*t+n[4]*i+n[8]*r+n[12])*a;this.y=(n[1]*t+n[5]*i+n[9]*r+n[13])*a;this.z=(n[2]*t+n[6]*i+n[10]*r+n[14])*a;return this},applyQuaternion:function(e){var t=this.x,i=this.y,r=this.z;var n=e.x,a=e.y,o=e.z,s=e.w;var l=s*t+a*r-o*i;var u=s*i+o*t-n*r;var c=s*r+n*i-a*t;var h=-n*t-a*i-o*r;this.x=l*s+h*-n+u*-o-c*-a;this.y=u*s+h*-a+c*-n-l*-o;this.z=c*s+h*-o+l*-a-u*-n;return this},project:function(){var e=new xt;return function t(i){e.multiplyMatrices(i.projectionMatrix,e.getInverse(i.matrixWorld));return this.applyMatrix4(e)}}(),unproject:function(){var e=new xt;return function t(i){e.multiplyMatrices(i.matrixWorld,e.getInverse(i.projectionMatrix));return this.applyMatrix4(e)}}(),transformDirection:function(e){var t=this.x,i=this.y,r=this.z;var n=e.elements;this.x=n[0]*t+n[4]*i+n[8]*r;this.y=n[1]*t+n[5]*i+n[9]*r;this.z=n[2]*t+n[6]*i+n[10]*r;return this.normalize()},divide:function(e){this.x/=e.x;this.y/=e.y;this.z/=e.z;return this},divideScalar:function(e){return this.multiplyScalar(1/e)},min:function(e){this.x=Math.min(this.x,e.x);this.y=Math.min(this.y,e.y);this.z=Math.min(this.z,e.z);return this},max:function(e){this.x=Math.max(this.x,e.x);this.y=Math.max(this.y,e.y);this.z=Math.max(this.z,e.z);return this},clamp:function(e,t){this.x=Math.max(e.x,Math.min(t.x,this.x));this.y=Math.max(e.y,Math.min(t.y,this.y));this.z=Math.max(e.z,Math.min(t.z,this.z));return this},clampScalar:function(){var e=new Tt;var t=new Tt;return function i(r,n){e.set(r,r,r);t.set(n,n,n);return this.clamp(e,t)}}(),clampLength:function(e,t){var i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))},floor:function(){this.x=Math.floor(this.x);this.y=Math.floor(this.y);this.z=Math.floor(this.z);return this},ceil:function(){this.x=Math.ceil(this.x);this.y=Math.ceil(this.y);this.z=Math.ceil(this.z);return this},round:function(){this.x=Math.round(this.x);this.y=Math.round(this.y);this.z=Math.round(this.z);return this},roundToZero:function(){this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x);this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y);this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z);return this},negate:function(){this.x=-this.x;this.y=-this.y;this.z=-this.z;return this},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(e){return this.normalize().multiplyScalar(e)},lerp:function(e,t){this.x+=(e.x-this.x)*t;this.y+=(e.y-this.y)*t;this.z+=(e.z-this.z)*t;return this},lerpVectors:function(e,t,i){return this.subVectors(t,e).multiplyScalar(i).add(e)},cross:function(e,t){if(t!==undefined){console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead.");return this.crossVectors(e,t)}return this.crossVectors(this,e)},crossVectors:function(e,t){var i=e.x,r=e.y,n=e.z;var a=t.x,o=t.y,s=t.z;this.x=r*s-n*o;this.y=n*a-i*s;this.z=i*o-r*a;return this},projectOnVector:function(e){var t=e.dot(this)/e.lengthSq();return this.copy(e).multiplyScalar(t)},projectOnPlane:function(){var e=new Tt;return function t(i){e.copy(this).projectOnVector(i);return this.sub(e)}}(),reflect:function(){var e=new Tt;return function t(i){return this.sub(e.copy(i).multiplyScalar(2*this.dot(i)))}}(),angleTo:function(e){var t=this.dot(e)/Math.sqrt(this.lengthSq()*e.lengthSq());return Math.acos(bt.clamp(t,-1,1))},distanceTo:function(e){return Math.sqrt(this.distanceToSquared(e))},distanceToSquared:function(e){var t=this.x-e.x,i=this.y-e.y,r=this.z-e.z;return t*t+i*i+r*r},manhattanDistanceTo:function(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)},setFromSpherical:function(e){var t=Math.sin(e.phi)*e.radius;this.x=t*Math.sin(e.theta);this.y=Math.cos(e.phi)*e.radius;this.z=t*Math.cos(e.theta);return this},setFromCylindrical:function(e){this.x=e.radius*Math.sin(e.theta);this.y=e.y;this.z=e.radius*Math.cos(e.theta);return this},setFromMatrixPosition:function(e){var t=e.elements;this.x=t[12];this.y=t[13];this.z=t[14];return this},setFromMatrixScale:function(e){var t=this.setFromMatrixColumn(e,0).length();var i=this.setFromMatrixColumn(e,1).length();var r=this.setFromMatrixColumn(e,2).length();this.x=t;this.y=i;this.z=r;return this},setFromMatrixColumn:function(e,t){return this.fromArray(e.elements,t*4)},equals:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z},fromArray:function(e,t){if(t===undefined)t=0;this.x=e[t];this.y=e[t+1];this.z=e[t+2];return this},toArray:function(e,t){if(e===undefined)e=[];if(t===undefined)t=0;e[t]=this.x;e[t+1]=this.y;e[t+2]=this.z;return e},fromBufferAttribute:function(e,t,i){if(i!==undefined){console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute().")}this.x=e.getX(t);this.y=e.getY(t);this.z=e.getZ(t);return this}});function Mt(){this.elements=[1,0,0,0,1,0,0,0,1];if(arguments.length>0){console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}}Object.assign(Mt.prototype,{isMatrix3:true,set:function(e,t,i,r,n,a,o,s,l){var u=this.elements;u[0]=e;u[1]=r;u[2]=o;u[3]=t;u[4]=n;u[5]=s;u[6]=i;u[7]=a;u[8]=l;return this},identity:function(){this.set(1,0,0,0,1,0,0,0,1);return this},clone:function(){return(new this.constructor).fromArray(this.elements)},copy:function(e){var t=this.elements;var i=e.elements;t[0]=i[0];t[1]=i[1];t[2]=i[2];t[3]=i[3];t[4]=i[4];t[5]=i[5];t[6]=i[6];t[7]=i[7];t[8]=i[8];return this},setFromMatrix4:function(e){var t=e.elements;this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]);return this},applyToBufferAttribute:function(){var e=new Tt;return function t(i){for(var r=0,n=i.count;r<n;r++){e.x=i.getX(r);e.y=i.getY(r);e.z=i.getZ(r);e.applyMatrix3(this);i.setXYZ(r,e.x,e.y,e.z)}return i}}(),multiply:function(e){return this.multiplyMatrices(this,e)},premultiply:function(e){return this.multiplyMatrices(e,this)},multiplyMatrices:function(e,t){var i=e.elements;var r=t.elements;var n=this.elements;var a=i[0],o=i[3],s=i[6];var l=i[1],u=i[4],c=i[7];var h=i[2],f=i[5],d=i[8];var p=r[0],m=r[3],v=r[6];var g=r[1],y=r[4],b=r[7];var _=r[2],x=r[5],w=r[8];n[0]=a*p+o*g+s*_;n[3]=a*m+o*y+s*x;n[6]=a*v+o*b+s*w;n[1]=l*p+u*g+c*_;n[4]=l*m+u*y+c*x;n[7]=l*v+u*b+c*w;n[2]=h*p+f*g+d*_;n[5]=h*m+f*y+d*x;n[8]=h*v+f*b+d*w;return this},multiplyScalar:function(e){var t=this.elements;t[0]*=e;t[3]*=e;t[6]*=e;t[1]*=e;t[4]*=e;t[7]*=e;t[2]*=e;t[5]*=e;t[8]*=e;return this},determinant:function(){var e=this.elements;var t=e[0],i=e[1],r=e[2],n=e[3],a=e[4],o=e[5],s=e[6],l=e[7],u=e[8];return t*a*u-t*o*l-i*n*u+i*o*s+r*n*l-r*a*s},getInverse:function(e,t){if(e&&e.isMatrix4){console.error("THREE.Matrix3: .getInverse() no longer takes a Matrix4 argument.")}var i=e.elements,r=this.elements,n=i[0],a=i[1],o=i[2],s=i[3],l=i[4],u=i[5],c=i[6],h=i[7],f=i[8],d=f*l-u*h,p=u*c-f*s,m=h*s-l*c,v=n*d+a*p+o*m;if(v===0){var g="THREE.Matrix3: .getInverse() can't invert matrix, determinant is 0";if(t===true){throw new Error(g)}else{console.warn(g)}return this.identity()}var y=1/v;r[0]=d*y;r[1]=(o*h-f*a)*y;r[2]=(u*a-o*l)*y;r[3]=p*y;r[4]=(f*n-o*c)*y;r[5]=(o*s-u*n)*y;r[6]=m*y;r[7]=(a*c-h*n)*y;r[8]=(l*n-a*s)*y;return this},transpose:function(){var e,t=this.elements;e=t[1];t[1]=t[3];t[3]=e;e=t[2];t[2]=t[6];t[6]=e;e=t[5];t[5]=t[7];t[7]=e;return this},getNormalMatrix:function(e){return this.setFromMatrix4(e).getInverse(this).transpose()},transposeIntoArray:function(e){var t=this.elements;e[0]=t[0];e[1]=t[3];e[2]=t[6];e[3]=t[1];e[4]=t[4];e[5]=t[7];e[6]=t[2];e[7]=t[5];e[8]=t[8];return this},setUvTransform:function(e,t,i,r,n,a,o){var s=Math.cos(n);var l=Math.sin(n);this.set(i*s,i*l,-i*(s*a+l*o)+a+e,-r*l,r*s,-r*(-l*a+s*o)+o+t,0,0,1)},scale:function(e,t){var i=this.elements;i[0]*=e;i[3]*=e;i[6]*=e;i[1]*=t;i[4]*=t;i[7]*=t;return this},rotate:function(e){var t=Math.cos(e);var i=Math.sin(e);var r=this.elements;var n=r[0],a=r[3],o=r[6];var s=r[1],l=r[4],u=r[7];r[0]=t*n+i*s;r[3]=t*a+i*l;r[6]=t*o+i*u;r[1]=-i*n+t*s;r[4]=-i*a+t*l;r[7]=-i*o+t*u;return this},translate:function(e,t){var i=this.elements;i[0]+=e*i[2];i[3]+=e*i[5];i[6]+=e*i[8];i[1]+=t*i[2];i[4]+=t*i[5];i[7]+=t*i[8];return this},equals:function(e){var t=this.elements;var i=e.elements;for(var r=0;r<9;r++){if(t[r]!==i[r])return false}return true},fromArray:function(e,t){if(t===undefined)t=0;for(var i=0;i<9;i++){this.elements[i]=e[i+t]}return this},toArray:function(e,t){if(e===undefined)e=[];if(t===undefined)t=0;var i=this.elements;e[t]=i[0];e[t+1]=i[1];e[t+2]=i[2];e[t+3]=i[3];e[t+4]=i[4];e[t+5]=i[5];e[t+6]=i[6];e[t+7]=i[7];e[t+8]=i[8];return e}});var St=0;function Et(e,t,i,r,n,a,o,s,l,u){Object.defineProperty(this,"id",{value:St++});this.uuid=bt.generateUUID();this.name="";this.image=e!==undefined?e:Et.DEFAULT_IMAGE;this.mipmaps=[];this.mapping=t!==undefined?t:Et.DEFAULT_MAPPING;this.wrapS=i!==undefined?i:pe;this.wrapT=r!==undefined?r:pe;this.magFilter=n!==undefined?n:be;this.minFilter=a!==undefined?a:xe;this.anisotropy=l!==undefined?l:1;this.format=o!==undefined?o:Ge;this.type=s!==undefined?s:we;this.offset=new _t(0,0);this.repeat=new _t(1,1);this.center=new _t(0,0);this.rotation=0;this.matrixAutoUpdate=true;this.matrix=new Mt;this.generateMipmaps=true;this.premultiplyAlpha=false;this.flipY=true;this.unpackAlignment=4;this.encoding=u!==undefined?u:ut;this.version=0;this.onUpdate=null}Et.DEFAULT_IMAGE=undefined;Et.DEFAULT_MAPPING=ae;Object.defineProperty(Et.prototype,"needsUpdate",{set:function(e){if(e===true)this.version++}});Object.assign(Et.prototype,t.prototype,{constructor:Et,isTexture:true,clone:function(){return(new this.constructor).copy(this)},copy:function(e){this.name=e.name;this.image=e.image;this.mipmaps=e.mipmaps.slice(0);this.mapping=e.mapping;this.wrapS=e.wrapS;this.wrapT=e.wrapT;this.magFilter=e.magFilter;this.minFilter=e.minFilter;this.anisotropy=e.anisotropy;this.format=e.format;this.type=e.type;this.offset.copy(e.offset);this.repeat.copy(e.repeat);this.center.copy(e.center);this.rotation=e.rotation;this.matrixAutoUpdate=e.matrixAutoUpdate;this.matrix.copy(e.matrix);this.generateMipmaps=e.generateMipmaps;this.premultiplyAlpha=e.premultiplyAlpha;this.flipY=e.flipY;this.unpackAlignment=e.unpackAlignment;this.encoding=e.encoding;return this},toJSON:function(e){var t=e===undefined||typeof e==="string";if(!t&&e.textures[this.uuid]!==undefined){return e.textures[this.uuid]}function i(e){var t;if(e instanceof HTMLCanvasElement){t=e}else{t=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");t.width=e.width;t.height=e.height;var i=t.getContext("2d");if(e instanceof ImageData){i.putImageData(e,0,0)}else{i.drawImage(e,0,0,e.width,e.height)}}if(t.width>2048||t.height>2048){return t.toDataURL("image/jpeg",.6)}else{return t.toDataURL("image/png")}}var r={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY};if(this.image!==undefined){var n=this.image;if(n.uuid===undefined){n.uuid=bt.generateUUID()}if(!t&&e.images[n.uuid]===undefined){e.images[n.uuid]={uuid:n.uuid,url:i(n)}}r.image=n.uuid}if(!t){e.textures[this.uuid]=r}return r},dispose:function(){this.dispatchEvent({type:"dispose"})},transformUv:function(e){if(this.mapping!==ae)return;e.applyMatrix3(this.matrix);if(e.x<0||e.x>1){switch(this.wrapS){case de:e.x=e.x-Math.floor(e.x);break;case pe:e.x=e.x<0?0:1;break;case me:if(Math.abs(Math.floor(e.x)%2)===1){e.x=Math.ceil(e.x)-e.x}else{e.x=e.x-Math.floor(e.x)}break}}if(e.y<0||e.y>1){switch(this.wrapT){case de:e.y=e.y-Math.floor(e.y);break;case pe:e.y=e.y<0?0:1;break;case me:if(Math.abs(Math.floor(e.y)%2)===1){e.y=Math.ceil(e.y)-e.y}else{e.y=e.y-Math.floor(e.y)}break}}if(this.flipY){e.y=1-e.y}}});function Pt(e,t,i,r){this.x=e||0;this.y=t||0;this.z=i||0;this.w=r!==undefined?r:1}Object.assign(Pt.prototype,{isVector4:true,set:function(e,t,i,r){this.x=e;this.y=t;this.z=i;this.w=r;return this},setScalar:function(e){this.x=e;this.y=e;this.z=e;this.w=e;return this},setX:function(e){this.x=e;return this},setY:function(e){this.y=e;return this},setZ:function(e){this.z=e;return this},setW:function(e){this.w=e;return this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}},clone:function(){return new this.constructor(this.x,this.y,this.z,this.w)},copy:function(e){this.x=e.x;this.y=e.y;this.z=e.z;this.w=e.w!==undefined?e.w:1;return this},add:function(e,t){if(t!==undefined){console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead.");return this.addVectors(e,t)}this.x+=e.x;this.y+=e.y;this.z+=e.z;this.w+=e.w;return this},addScalar:function(e){this.x+=e;this.y+=e;this.z+=e;this.w+=e;return this},addVectors:function(e,t){this.x=e.x+t.x;this.y=e.y+t.y;this.z=e.z+t.z;this.w=e.w+t.w;return this},addScaledVector:function(e,t){this.x+=e.x*t;this.y+=e.y*t;this.z+=e.z*t;this.w+=e.w*t;return this},sub:function(e,t){if(t!==undefined){console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead.");return this.subVectors(e,t)}this.x-=e.x;this.y-=e.y;this.z-=e.z;this.w-=e.w;return this},subScalar:function(e){this.x-=e;this.y-=e;this.z-=e;this.w-=e;return this},subVectors:function(e,t){this.x=e.x-t.x;this.y=e.y-t.y;this.z=e.z-t.z;this.w=e.w-t.w;return this},multiplyScalar:function(e){this.x*=e;this.y*=e;this.z*=e;this.w*=e;return this},applyMatrix4:function(e){var t=this.x,i=this.y,r=this.z,n=this.w;var a=e.elements;this.x=a[0]*t+a[4]*i+a[8]*r+a[12]*n;this.y=a[1]*t+a[5]*i+a[9]*r+a[13]*n;this.z=a[2]*t+a[6]*i+a[10]*r+a[14]*n;this.w=a[3]*t+a[7]*i+a[11]*r+a[15]*n;return this},divideScalar:function(e){return this.multiplyScalar(1/e)},setAxisAngleFromQuaternion:function(e){this.w=2*Math.acos(e.w);var t=Math.sqrt(1-e.w*e.w);if(t<1e-4){this.x=1;this.y=0
;this.z=0}else{this.x=e.x/t;this.y=e.y/t;this.z=e.z/t}return this},setAxisAngleFromRotationMatrix:function(e){var t,i,r,n,a=.01,o=.1,s=e.elements,l=s[0],u=s[4],c=s[8],h=s[1],f=s[5],d=s[9],p=s[2],m=s[6],v=s[10];if(Math.abs(u-h)<a&&Math.abs(c-p)<a&&Math.abs(d-m)<a){if(Math.abs(u+h)<o&&Math.abs(c+p)<o&&Math.abs(d+m)<o&&Math.abs(l+f+v-3)<o){this.set(1,0,0,0);return this}t=Math.PI;var g=(l+1)/2;var y=(f+1)/2;var b=(v+1)/2;var _=(u+h)/4;var x=(c+p)/4;var w=(d+m)/4;if(g>y&&g>b){if(g<a){i=0;r=.707106781;n=.707106781}else{i=Math.sqrt(g);r=_/i;n=x/i}}else if(y>b){if(y<a){i=.707106781;r=0;n=.707106781}else{r=Math.sqrt(y);i=_/r;n=w/r}}else{if(b<a){i=.707106781;r=.707106781;n=0}else{n=Math.sqrt(b);i=x/n;r=w/n}}this.set(i,r,n,t);return this}var T=Math.sqrt((m-d)*(m-d)+(c-p)*(c-p)+(h-u)*(h-u));if(Math.abs(T)<.001)T=1;this.x=(m-d)/T;this.y=(c-p)/T;this.z=(h-u)/T;this.w=Math.acos((l+f+v-1)/2);return this},min:function(e){this.x=Math.min(this.x,e.x);this.y=Math.min(this.y,e.y);this.z=Math.min(this.z,e.z);this.w=Math.min(this.w,e.w);return this},max:function(e){this.x=Math.max(this.x,e.x);this.y=Math.max(this.y,e.y);this.z=Math.max(this.z,e.z);this.w=Math.max(this.w,e.w);return this},clamp:function(e,t){this.x=Math.max(e.x,Math.min(t.x,this.x));this.y=Math.max(e.y,Math.min(t.y,this.y));this.z=Math.max(e.z,Math.min(t.z,this.z));this.w=Math.max(e.w,Math.min(t.w,this.w));return this},clampScalar:function(){var e,t;return function i(r,n){if(e===undefined){e=new Pt;t=new Pt}e.set(r,r,r,r);t.set(n,n,n,n);return this.clamp(e,t)}}(),clampLength:function(e,t){var i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))},floor:function(){this.x=Math.floor(this.x);this.y=Math.floor(this.y);this.z=Math.floor(this.z);this.w=Math.floor(this.w);return this},ceil:function(){this.x=Math.ceil(this.x);this.y=Math.ceil(this.y);this.z=Math.ceil(this.z);this.w=Math.ceil(this.w);return this},round:function(){this.x=Math.round(this.x);this.y=Math.round(this.y);this.z=Math.round(this.z);this.w=Math.round(this.w);return this},roundToZero:function(){this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x);this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y);this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z);this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w);return this},negate:function(){this.x=-this.x;this.y=-this.y;this.z=-this.z;this.w=-this.w;return this},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(e){return this.normalize().multiplyScalar(e)},lerp:function(e,t){this.x+=(e.x-this.x)*t;this.y+=(e.y-this.y)*t;this.z+=(e.z-this.z)*t;this.w+=(e.w-this.w)*t;return this},lerpVectors:function(e,t,i){return this.subVectors(t,e).multiplyScalar(i).add(e)},equals:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w},fromArray:function(e,t){if(t===undefined)t=0;this.x=e[t];this.y=e[t+1];this.z=e[t+2];this.w=e[t+3];return this},toArray:function(e,t){if(e===undefined)e=[];if(t===undefined)t=0;e[t]=this.x;e[t+1]=this.y;e[t+2]=this.z;e[t+3]=this.w;return e},fromBufferAttribute:function(e,t,i){if(i!==undefined){console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute().")}this.x=e.getX(t);this.y=e.getY(t);this.z=e.getZ(t);this.w=e.getW(t);return this}});function At(e,t,i){this.uuid=bt.generateUUID();this.width=e;this.height=t;this.scissor=new Pt(0,0,e,t);this.scissorTest=false;this.viewport=new Pt(0,0,e,t);i=i||{};if(i.minFilter===undefined)i.minFilter=be;this.texture=new Et(undefined,undefined,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.encoding);this.depthBuffer=i.depthBuffer!==undefined?i.depthBuffer:true;this.stencilBuffer=i.stencilBuffer!==undefined?i.stencilBuffer:true;this.depthTexture=i.depthTexture!==undefined?i.depthTexture:null}Object.assign(At.prototype,t.prototype,{isWebGLRenderTarget:true,setSize:function(e,t){if(this.width!==e||this.height!==t){this.width=e;this.height=t;this.dispose()}this.viewport.set(0,0,e,t);this.scissor.set(0,0,e,t)},clone:function(){return(new this.constructor).copy(this)},copy:function(e){this.width=e.width;this.height=e.height;this.viewport.copy(e.viewport);this.texture=e.texture.clone();this.depthBuffer=e.depthBuffer;this.stencilBuffer=e.stencilBuffer;this.depthTexture=e.depthTexture;return this},dispose:function(){this.dispatchEvent({type:"dispose"})}});function Ct(e,t,i){At.call(this,e,t,i);this.activeCubeFace=0;this.activeMipMapLevel=0}Ct.prototype=Object.create(At.prototype);Ct.prototype.constructor=Ct;Ct.prototype.isWebGLRenderTargetCube=true;function Lt(e,t,i,r,n,a,o,s,l,u,c,h){Et.call(this,null,a,o,s,l,u,r,n,c,h);this.image={data:e,width:t,height:i};this.magFilter=l!==undefined?l:ve;this.minFilter=u!==undefined?u:ve;this.generateMipmaps=false;this.flipY=false;this.unpackAlignment=1}Lt.prototype=Object.create(Et.prototype);Lt.prototype.constructor=Lt;Lt.prototype.isDataTexture=true;function Rt(e,t,i,r,n,a,o,s,l,u){e=e!==undefined?e:[];t=t!==undefined?t:oe;Et.call(this,e,t,i,r,n,a,o,s,l,u);this.flipY=false}Rt.prototype=Object.create(Et.prototype);Rt.prototype.constructor=Rt;Rt.prototype.isCubeTexture=true;Object.defineProperty(Rt.prototype,"images",{get:function(){return this.image},set:function(e){this.image=e}});var Ot=new Et;var It=new Rt;function Dt(){this.seq=[];this.map={}}var Bt=[];var Gt=[];var kt=new Float32Array(16);var Nt=new Float32Array(9);function Ut(e,t,i){var r=e[0];if(r<=0||r>0)return e;var n=t*i,a=Bt[n];if(a===undefined){a=new Float32Array(n);Bt[n]=a}if(t!==0){r.toArray(a,0);for(var o=1,s=0;o!==t;++o){s+=i;e[o].toArray(a,s)}}return a}function Ft(e,t){var i=Gt[t];if(i===undefined){i=new Int32Array(t);Gt[t]=i}for(var r=0;r!==t;++r)i[r]=e.allocTextureUnit();return i}function Ht(e,t){e.uniform1f(this.addr,t)}function zt(e,t){e.uniform1i(this.addr,t)}function Vt(e,t){if(t.x===undefined){e.uniform2fv(this.addr,t)}else{e.uniform2f(this.addr,t.x,t.y)}}function jt(e,t){if(t.x!==undefined){e.uniform3f(this.addr,t.x,t.y,t.z)}else if(t.r!==undefined){e.uniform3f(this.addr,t.r,t.g,t.b)}else{e.uniform3fv(this.addr,t)}}function Wt(e,t){if(t.x===undefined){e.uniform4fv(this.addr,t)}else{e.uniform4f(this.addr,t.x,t.y,t.z,t.w)}}function Xt(e,t){e.uniformMatrix2fv(this.addr,false,t.elements||t)}function Yt(e,t){if(t.elements===undefined){e.uniformMatrix3fv(this.addr,false,t)}else{Nt.set(t.elements);e.uniformMatrix3fv(this.addr,false,Nt)}}function qt(e,t){if(t.elements===undefined){e.uniformMatrix4fv(this.addr,false,t)}else{kt.set(t.elements);e.uniformMatrix4fv(this.addr,false,kt)}}function Zt(e,t,i){var r=i.allocTextureUnit();e.uniform1i(this.addr,r);i.setTexture2D(t||Ot,r)}function Kt(e,t,i){var r=i.allocTextureUnit();e.uniform1i(this.addr,r);i.setTextureCube(t||It,r)}function $t(e,t){e.uniform2iv(this.addr,t)}function Qt(e,t){e.uniform3iv(this.addr,t)}function Jt(e,t){e.uniform4iv(this.addr,t)}function ei(e){switch(e){case 5126:return Ht;case 35664:return Vt;case 35665:return jt;case 35666:return Wt;case 35674:return Xt;case 35675:return Yt;case 35676:return qt;case 35678:case 36198:return Zt;case 35680:return Kt;case 5124:case 35670:return zt;case 35667:case 35671:return $t;case 35668:case 35672:return Qt;case 35669:case 35673:return Jt}}function ti(e,t){e.uniform1fv(this.addr,t)}function ii(e,t){e.uniform1iv(this.addr,t)}function ri(e,t){e.uniform2fv(this.addr,Ut(t,this.size,2))}function ni(e,t){e.uniform3fv(this.addr,Ut(t,this.size,3))}function ai(e,t){e.uniform4fv(this.addr,Ut(t,this.size,4))}function oi(e,t){e.uniformMatrix2fv(this.addr,false,Ut(t,this.size,4))}function si(e,t){e.uniformMatrix3fv(this.addr,false,Ut(t,this.size,9))}function li(e,t){e.uniformMatrix4fv(this.addr,false,Ut(t,this.size,16))}function ui(e,t,i){var r=t.length,n=Ft(i,r);e.uniform1iv(this.addr,n);for(var a=0;a!==r;++a){i.setTexture2D(t[a]||Ot,n[a])}}function ci(e,t,i){var r=t.length,n=Ft(i,r);e.uniform1iv(this.addr,n);for(var a=0;a!==r;++a){i.setTextureCube(t[a]||It,n[a])}}function hi(e){switch(e){case 5126:return ti;case 35664:return ri;case 35665:return ni;case 35666:return ai;case 35674:return oi;case 35675:return si;case 35676:return li;case 35678:return ui;case 35680:return ci;case 5124:case 35670:return ii;case 35667:case 35671:return $t;case 35668:case 35672:return Qt;case 35669:case 35673:return Jt}}function fi(e,t,i){this.id=e;this.addr=i;this.setValue=ei(t.type)}function di(e,t,i){this.id=e;this.addr=i;this.size=t.size;this.setValue=hi(t.type)}function pi(e){this.id=e;Dt.call(this)}pi.prototype.setValue=function(e,t){var i=this.seq;for(var r=0,n=i.length;r!==n;++r){var a=i[r];a.setValue(e,t[a.id])}};var mi=/([\w\d_]+)(\])?(\[|\.)?/g;function vi(e,t){e.seq.push(t);e.map[t.id]=t}function gi(e,t,i){var r=e.name,n=r.length;mi.lastIndex=0;for(;;){var a=mi.exec(r),o=mi.lastIndex,s=a[1],l=a[2]==="]",u=a[3];if(l)s=s|0;if(u===undefined||u==="["&&o+2===n){vi(i,u===undefined?new fi(s,e,t):new di(s,e,t));break}else{var c=i.map,h=c[s];if(h===undefined){h=new pi(s);vi(i,h)}i=h}}}function yi(e,t,i){Dt.call(this);this.renderer=i;var r=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(var n=0;n<r;++n){var a=e.getActiveUniform(t,n),o=a.name,s=e.getUniformLocation(t,o);gi(a,s,this)}}yi.prototype.setValue=function(e,t,i){var r=this.map[t];if(r!==undefined)r.setValue(e,i,this.renderer)};yi.prototype.setOptional=function(e,t,i){var r=t[i];if(r!==undefined)this.setValue(e,i,r)};yi.upload=function(e,t,i,r){for(var n=0,a=t.length;n!==a;++n){var o=t[n],s=i[o.id];if(s.needsUpdate!==false){o.setValue(e,s.value,r)}}};yi.seqWithValue=function(e,t){var i=[];for(var r=0,n=e.length;r!==n;++r){var a=e[r];if(a.id in t)i.push(a)}return i};var bi={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function _i(e,t,i){if(t===undefined&&i===undefined){return this.set(e)}return this.setRGB(e,t,i)}Object.assign(_i.prototype,{isColor:true,r:1,g:1,b:1,set:function(e){if(e&&e.isColor){this.copy(e)}else if(typeof e==="number"){this.setHex(e)}else if(typeof e==="string"){this.setStyle(e)}return this},setScalar:function(e){this.r=e;this.g=e;this.b=e;return this},setHex:function(e){e=Math.floor(e);this.r=(e>>16&255)/255;this.g=(e>>8&255)/255;this.b=(e&255)/255;return this},setRGB:function(e,t,i){this.r=e;this.g=t;this.b=i;return this},setHSL:function(){function e(e,t,i){if(i<0)i+=1;if(i>1)i-=1;if(i<1/6)return e+(t-e)*6*i;if(i<1/2)return t;if(i<2/3)return e+(t-e)*6*(2/3-i);return e}return function t(i,r,n){i=bt.euclideanModulo(i,1);r=bt.clamp(r,0,1);n=bt.clamp(n,0,1);if(r===0){this.r=this.g=this.b=n}else{var a=n<=.5?n*(1+r):n+r-n*r;var o=2*n-a;this.r=e(o,a,i+1/3);this.g=e(o,a,i);this.b=e(o,a,i-1/3)}return this}}(),setStyle:function(e){function t(t){if(t===undefined)return;if(parseFloat(t)<1){console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}}var i;if(i=/^((?:rgb|hsl)a?)\(\s*([^\)]*)\)/.exec(e)){var r;var n=i[1];var a=i[2];switch(n){case"rgb":case"rgba":if(r=/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(a)){this.r=Math.min(255,parseInt(r[1],10))/255;this.g=Math.min(255,parseInt(r[2],10))/255;this.b=Math.min(255,parseInt(r[3],10))/255;t(r[5]);return this}if(r=/^(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(a)){this.r=Math.min(100,parseInt(r[1],10))/100;this.g=Math.min(100,parseInt(r[2],10))/100;this.b=Math.min(100,parseInt(r[3],10))/100;t(r[5]);return this}break;case"hsl":case"hsla":if(r=/^([0-9]*\.?[0-9]+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(a)){var o=parseFloat(r[1])/360;var s=parseInt(r[2],10)/100;var l=parseInt(r[3],10)/100;t(r[5]);return this.setHSL(o,s,l)}break}}else if(i=/^\#([A-Fa-f0-9]+)$/.exec(e)){var u=i[1];var c=u.length;if(c===3){this.r=parseInt(u.charAt(0)+u.charAt(0),16)/255;this.g=parseInt(u.charAt(1)+u.charAt(1),16)/255;this.b=parseInt(u.charAt(2)+u.charAt(2),16)/255;return this}else if(c===6){this.r=parseInt(u.charAt(0)+u.charAt(1),16)/255;this.g=parseInt(u.charAt(2)+u.charAt(3),16)/255;this.b=parseInt(u.charAt(4)+u.charAt(5),16)/255;return this}}if(e&&e.length>0){var u=bi[e];if(u!==undefined){this.setHex(u)}else{console.warn("THREE.Color: Unknown color "+e)}}return this},clone:function(){return new this.constructor(this.r,this.g,this.b)},copy:function(e){this.r=e.r;this.g=e.g;this.b=e.b;return this},copyGammaToLinear:function(e,t){if(t===undefined)t=2;this.r=Math.pow(e.r,t);this.g=Math.pow(e.g,t);this.b=Math.pow(e.b,t);return this},copyLinearToGamma:function(e,t){if(t===undefined)t=2;var i=t>0?1/t:1;this.r=Math.pow(e.r,i);this.g=Math.pow(e.g,i);this.b=Math.pow(e.b,i);return this},convertGammaToLinear:function(){var e=this.r,t=this.g,i=this.b;this.r=e*e;this.g=t*t;this.b=i*i;return this},convertLinearToGamma:function(){this.r=Math.sqrt(this.r);this.g=Math.sqrt(this.g);this.b=Math.sqrt(this.b);return this},getHex:function(){return this.r*255<<16^this.g*255<<8^this.b*255<<0},getHexString:function(){return("000000"+this.getHex().toString(16)).slice(-6)},getHSL:function(e){var t=e||{h:0,s:0,l:0};var i=this.r,r=this.g,n=this.b;var a=Math.max(i,r,n);var o=Math.min(i,r,n);var s,l;var u=(o+a)/2;if(o===a){s=0;l=0}else{var c=a-o;l=u<=.5?c/(a+o):c/(2-a-o);switch(a){case i:s=(r-n)/c+(r<n?6:0);break;case r:s=(n-i)/c+2;break;case n:s=(i-r)/c+4;break}s/=6}t.h=s;t.s=l;t.l=u;return t},getStyle:function(){return"rgb("+(this.r*255|0)+","+(this.g*255|0)+","+(this.b*255|0)+")"},offsetHSL:function(e,t,i){var r=this.getHSL();r.h+=e;r.s+=t;r.l+=i;this.setHSL(r.h,r.s,r.l);return this},add:function(e){this.r+=e.r;this.g+=e.g;this.b+=e.b;return this},addColors:function(e,t){this.r=e.r+t.r;this.g=e.g+t.g;this.b=e.b+t.b;return this},addScalar:function(e){this.r+=e;this.g+=e;this.b+=e;return this},sub:function(e){this.r=Math.max(0,this.r-e.r);this.g=Math.max(0,this.g-e.g);this.b=Math.max(0,this.b-e.b);return this},multiply:function(e){this.r*=e.r;this.g*=e.g;this.b*=e.b;return this},multiplyScalar:function(e){this.r*=e;this.g*=e;this.b*=e;return this},lerp:function(e,t){this.r+=(e.r-this.r)*t;this.g+=(e.g-this.g)*t;this.b+=(e.b-this.b)*t;return this},equals:function(e){return e.r===this.r&&e.g===this.g&&e.b===this.b},fromArray:function(e,t){if(t===undefined)t=0;this.r=e[t];this.g=e[t+1];this.b=e[t+2];return this},toArray:function(e,t){if(e===undefined)e=[];if(t===undefined)t=0;e[t]=this.r;e[t+1]=this.g;e[t+2]=this.b;return e},toJSON:function(){return this.getHex()}});var xi={common:{diffuse:{value:new _i(15658734)},opacity:{value:1},map:{value:null},uvTransform:{value:new Mt},alphaMap:{value:null}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new _t(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new _i(16777215)}},lights:{ambientLightColor:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}}},points:{diffuse:{value:new _i(15658734)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},uvTransform:{value:new Mt}}};var wi={merge:function(e){var t={};for(var i=0;i<e.length;i++){var r=this.clone(e[i]);for(var n in r){t[n]=r[n]}}return t},clone:function(e){var t={};for(var i in e){t[i]={};for(var r in e[i]){var n=e[i][r];if(n&&(n.isColor||n.isMatrix3||n.isMatrix4||n.isVector2||n.isVector3||n.isVector4||n.isTexture)){t[i][r]=n.clone()}else if(Array.isArray(n)){t[i][r]=n.slice()}else{t[i][r]=n}}}return t}};var Ti="#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif\n";var Mi="#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif\n";var Si="#ifdef ALPHATEST\n\tif ( diffuseColor.a < ALPHATEST ) discard;\n#endif\n";var Ei="#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( PHYSICAL )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );\n\t#endif\n#endif\n";var Pi="#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif";var Ai="\nvec3 transformed = vec3( position );\n";var Ci="\nvec3 objectNormal = vec3( normal );\n";var Li="float punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\tif( decayExponent > 0.0 ) {\n#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\tfloat maxDistanceCutoffFactor = pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\treturn distanceFalloff * maxDistanceCutoffFactor;\n#else\n\t\treturn pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\n#endif\n\t}\n\treturn 1.0;\n}\nvec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );\n\treturn ( 1.0 - specularColor ) * fresnel + specularColor;\n}\nfloat G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\tfloat gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\treturn 1.0 / ( gl * gv );\n}\nfloat G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNL = saturate( dot( geometry.normal, incidentLight.direction ) );\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( G * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE  = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS  = 0.5 / LUT_SIZE;\n\tfloat theta = acos( dot( N, V ) );\n\tvec2 uv = vec2(\n\t\tsqrt( saturate( roughness ) ),\n\t\tsaturate( theta / ( 0.5 * PI ) ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.86267 + (0.49788 + 0.01436 * y ) * y;\n\tfloat b = 3.45068 + (4.18814 + y) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = (x > 0.0) ? v : 0.5 * inversesqrt( 1.0 - x * x ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tvec3 result = vec3( LTC_ClippedSphereFormFactor( vectorFormFactor ) );\n\treturn result;\n}\nvec3 BRDF_Specular_GGX_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 AB = vec2( -1.04, 1.04 ) * a004 + r.zw;\n\treturn specularColor * AB.x + AB.y;\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\nfloat GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {\n\treturn ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );\n}\nfloat BlinnExponentToGGXRoughness( const in float blinnExponent ) {\n\treturn sqrt( 2.0 / ( blinnExponent + 2.0 ) );\n}\n";var Ri="#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\n\t\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\n\t\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 );\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif\n";var Oi="#if NUM_CLIPPING_PLANES > 0\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; ++ i ) {\n\t\tvec4 plane = clippingPlanes[ i ];\n\t\tif ( dot( vViewPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t\t\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; ++ i ) {\n\t\t\tvec4 plane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vViewPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\tif ( clipped ) discard;\n\t\n\t#endif\n#endif\n";var Ii="#if NUM_CLIPPING_PLANES > 0\n\t#if ! defined( PHYSICAL ) && ! defined( PHONG )\n\t\tvarying vec3 vViewPosition;\n\t#endif\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif\n";var Di="#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG )\n\tvarying vec3 vViewPosition;\n#endif\n";var Bi="#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n";var Gi="#ifdef USE_COLOR\n\tdiffuseColor.rgb *= vColor;\n#endif";var ki="#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif\n";var Ni="#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif";var Ui="#ifdef USE_COLOR\n\tvColor.xyz = color.xyz;\n#endif";var Fi="#define PI 3.14159265359\n#define PI2 6.28318530718\n#define PI_HALF 1.5707963267949\n#define RECIPROCAL_PI 0.31830988618\n#define RECIPROCAL_PI2 0.15915494\n#define LOG2 1.442695\n#define EPSILON 1e-6\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#define whiteCompliment(a) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract(sin(sn) * c);\n}\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\tfloat distance = dot( planeNormal, point - pointOnPlane );\n\treturn - distance * planeNormal + point;\n}\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn sign( dot( point - pointOnPlane, planeNormal ) );\n}\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat linearToRelativeLuminance( const in vec3 color ) {\n\tvec3 weights = vec3( 0.2126, 0.7152, 0.0722 );\n\treturn dot( weights, color.rgb );\n}\n"
;var Hi="#ifdef ENVMAP_TYPE_CUBE_UV\n#define cubeUV_textureSize (1024.0)\nint getFaceFromDirection(vec3 direction) {\n\tvec3 absDirection = abs(direction);\n\tint face = -1;\n\tif( absDirection.x > absDirection.z ) {\n\t\tif(absDirection.x > absDirection.y )\n\t\t\tface = direction.x > 0.0 ? 0 : 3;\n\t\telse\n\t\t\tface = direction.y > 0.0 ? 1 : 4;\n\t}\n\telse {\n\t\tif(absDirection.z > absDirection.y )\n\t\t\tface = direction.z > 0.0 ? 2 : 5;\n\t\telse\n\t\t\tface = direction.y > 0.0 ? 1 : 4;\n\t}\n\treturn face;\n}\n#define cubeUV_maxLods1  (log2(cubeUV_textureSize*0.25) - 1.0)\n#define cubeUV_rangeClamp (exp2((6.0 - 1.0) * 2.0))\nvec2 MipLevelInfo( vec3 vec, float roughnessLevel, float roughness ) {\n\tfloat scale = exp2(cubeUV_maxLods1 - roughnessLevel);\n\tfloat dxRoughness = dFdx(roughness);\n\tfloat dyRoughness = dFdy(roughness);\n\tvec3 dx = dFdx( vec * scale * dxRoughness );\n\tvec3 dy = dFdy( vec * scale * dyRoughness );\n\tfloat d = max( dot( dx, dx ), dot( dy, dy ) );\n\td = clamp(d, 1.0, cubeUV_rangeClamp);\n\tfloat mipLevel = 0.5 * log2(d);\n\treturn vec2(floor(mipLevel), fract(mipLevel));\n}\n#define cubeUV_maxLods2 (log2(cubeUV_textureSize*0.25) - 2.0)\n#define cubeUV_rcpTextureSize (1.0 / cubeUV_textureSize)\nvec2 getCubeUV(vec3 direction, float roughnessLevel, float mipLevel) {\n\tmipLevel = roughnessLevel > cubeUV_maxLods2 - 3.0 ? 0.0 : mipLevel;\n\tfloat a = 16.0 * cubeUV_rcpTextureSize;\n\tvec2 exp2_packed = exp2( vec2( roughnessLevel, mipLevel ) );\n\tvec2 rcp_exp2_packed = vec2( 1.0 ) / exp2_packed;\n\tfloat powScale = exp2_packed.x * exp2_packed.y;\n\tfloat scale = rcp_exp2_packed.x * rcp_exp2_packed.y * 0.25;\n\tfloat mipOffset = 0.75*(1.0 - rcp_exp2_packed.y) * rcp_exp2_packed.x;\n\tbool bRes = mipLevel == 0.0;\n\tscale =  bRes && (scale < a) ? a : scale;\n\tvec3 r;\n\tvec2 offset;\n\tint face = getFaceFromDirection(direction);\n\tfloat rcpPowScale = 1.0 / powScale;\n\tif( face == 0) {\n\t\tr = vec3(direction.x, -direction.z, direction.y);\n\t\toffset = vec2(0.0+mipOffset,0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 1) {\n\t\tr = vec3(direction.y, direction.x, direction.z);\n\t\toffset = vec2(scale+mipOffset, 0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 2) {\n\t\tr = vec3(direction.z, direction.x, direction.y);\n\t\toffset = vec2(2.0*scale+mipOffset, 0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 3) {\n\t\tr = vec3(direction.x, direction.z, direction.y);\n\t\toffset = vec2(0.0+mipOffset,0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\telse if( face == 4) {\n\t\tr = vec3(direction.y, direction.x, -direction.z);\n\t\toffset = vec2(scale+mipOffset, 0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\telse {\n\t\tr = vec3(direction.z, -direction.x, direction.y);\n\t\toffset = vec2(2.0*scale+mipOffset, 0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\tr = normalize(r);\n\tfloat texelOffset = 0.5 * cubeUV_rcpTextureSize;\n\tvec2 s = ( r.yz / abs( r.x ) + vec2( 1.0 ) ) * 0.5;\n\tvec2 base = offset + vec2( texelOffset );\n\treturn base + s * ( scale - 2.0 * texelOffset );\n}\n#define cubeUV_maxLods3 (log2(cubeUV_textureSize*0.25) - 3.0)\nvec4 textureCubeUV(vec3 reflectedDirection, float roughness ) {\n\tfloat roughnessVal = roughness* cubeUV_maxLods3;\n\tfloat r1 = floor(roughnessVal);\n\tfloat r2 = r1 + 1.0;\n\tfloat t = fract(roughnessVal);\n\tvec2 mipInfo = MipLevelInfo(reflectedDirection, r1, roughness);\n\tfloat s = mipInfo.y;\n\tfloat level0 = mipInfo.x;\n\tfloat level1 = level0 + 1.0;\n\tlevel1 = level1 > 5.0 ? 5.0 : level1;\n\tlevel0 += min( floor( s + 0.5 ), 5.0 );\n\tvec2 uv_10 = getCubeUV(reflectedDirection, r1, level0);\n\tvec4 color10 = envMapTexelToLinear(texture2D(envMap, uv_10));\n\tvec2 uv_20 = getCubeUV(reflectedDirection, r2, level0);\n\tvec4 color20 = envMapTexelToLinear(texture2D(envMap, uv_20));\n\tvec4 result = mix(color10, color20, t);\n\treturn vec4(result.rgb, 1.0);\n}\n#endif\n";var zi="vec3 transformedNormal = normalMatrix * objectNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n";var Vi="#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif\n";var ji="#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, uv ).x * displacementScale + displacementBias );\n#endif\n";var Wi="#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\temissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif\n";var Xi="#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif\n";var Yi="  gl_FragColor = linearToOutputTexel( gl_FragColor );\n";var qi="\nvec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.xyz, vec3( gammaFactor ) ), value.w );\n}\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.xyz, vec3( 1.0 / gammaFactor ) ), value.w );\n}\nvec4 sRGBToLinear( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.w );\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.w );\n}\nvec4 RGBEToLinear( in vec4 value ) {\n\treturn vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\n}\nvec4 LinearToRGBE( in vec4 value ) {\n\tfloat maxComponent = max( max( value.r, value.g ), value.b );\n\tfloat fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\n\treturn vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\n}\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.xyz * value.w * maxRange, 1.0 );\n}\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.x, max( value.g, value.b ) );\n\tfloat M      = clamp( maxRGB / maxRange, 0.0, 1.0 );\n\tM            = ceil( M * 255.0 ) / 255.0;\n\treturn vec4( value.rgb / ( M * maxRange ), M );\n}\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\n}\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.x, max( value.g, value.b ) );\n\tfloat D      = max( maxRange / maxRGB, 1.0 );\n\tD            = min( floor( D ) / 255.0, 1.0 );\n\treturn vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\n}\nconst mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );\nvec4 LinearToLogLuv( in vec4 value )  {\n\tvec3 Xp_Y_XYZp = value.rgb * cLogLuvM;\n\tXp_Y_XYZp = max(Xp_Y_XYZp, vec3(1e-6, 1e-6, 1e-6));\n\tvec4 vResult;\n\tvResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;\n\tfloat Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;\n\tvResult.w = fract(Le);\n\tvResult.z = (Le - (floor(vResult.w*255.0))/255.0)/255.0;\n\treturn vResult;\n}\nconst mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );\nvec4 LogLuvToLinear( in vec4 value ) {\n\tfloat Le = value.z * 255.0 + value.w;\n\tvec3 Xp_Y_XYZp;\n\tXp_Y_XYZp.y = exp2((Le - 127.0) / 2.0);\n\tXp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;\n\tXp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;\n\tvec3 vRGB = Xp_Y_XYZp.rgb * cLogLuvInverseM;\n\treturn vec4( max(vRGB, 0.0), 1.0 );\n}\n";var Zi="#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvec3 cameraToVertex = normalize( vWorldPosition - cameraPosition );\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\tvec2 sampleUV;\n\t\treflectVec = normalize( reflectVec );\n\t\tsampleUV.y = asin( clamp( reflectVec.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\t\tsampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\tvec4 envColor = texture2D( envMap, sampleUV );\n\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\treflectVec = normalize( reflectVec );\n\t\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0, 0.0, 1.0 ) );\n\t\tvec4 envColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5 );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\tenvColor = envMapTexelToLinear( envColor );\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif\n";var Ki="#if defined( USE_ENVMAP ) || defined( PHYSICAL )\n\tuniform float reflectivity;\n\tuniform float envMapIntensity;\n#endif\n#ifdef USE_ENVMAP\n\t#if ! defined( PHYSICAL ) && ( defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) )\n\t\tvarying vec3 vWorldPosition;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\tuniform float flipEnvMap;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( PHYSICAL )\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif\n";var $i="#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif\n";var Qi="#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif\n";var Ji="\n#ifdef USE_FOG\nfogDepth = -mvPosition.z;\n#endif";var er="#ifdef USE_FOG\n  varying float fogDepth;\n#endif\n";var tr="#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = whiteCompliment( exp2( - fogDensity * fogDensity * fogDepth * fogDepth * LOG2 ) );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, fogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif\n";var ir="#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float fogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif\n";var rr="#ifdef TOON\n\tuniform sampler2D gradientMap;\n\tvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\t\tfloat dotNL = dot( normal, lightDirection );\n\t\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t\t#ifdef USE_GRADIENTMAP\n\t\t\treturn texture2D( gradientMap, coord ).rgb;\n\t\t#else\n\t\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\t\t#endif\n\t}\n#endif\n";var nr="#ifdef USE_LIGHTMAP\n\treflectedLight.indirectDiffuse += PI * texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n#endif\n";var ar="#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif";var or="vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\n#if NUM_POINT_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_DIR_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvLightFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );\n\t\t#endif\n\t}\n#endif\n";var sr="uniform vec3 ambientLightColor;\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treturn irradiance;\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tdirectLight.color = directionalLight.color;\n\t\tdirectLight.direction = directionalLight.direction;\n\t\tdirectLight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t\tfloat shadowCameraNear;\n\t\tfloat shadowCameraFar;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tdirectLight.color = pointLight.color;\n\t\tdirectLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );\n\t\tdirectLight.visible = ( directLight.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight  ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tfloat angleCos = dot( directLight.direction, spotLight.direction );\n\t\tif ( angleCos > spotLight.coneCos ) {\n\t\t\tfloat spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\t\tdirectLight.color = spotLight.color;\n\t\t\tdirectLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tdirectLight.visible = true;\n\t\t} else {\n\t\t\tdirectLight.color = vec3( 0.0 );\n\t\t\tdirectLight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltcMat;\tuniform sampler2D ltcMag;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {\n\t\tfloat dotNL = dot( geometry.normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tirradiance *= PI;\n\t\t#endif\n\t\treturn irradiance;\n\t}\n#endif\n#if defined( USE_ENVMAP ) && defined( PHYSICAL )\n\tvec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {\n\t\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\tvec4 envMapColor = textureCubeUV( queryVec, 1.0 );\n\t\t#else\n\t\t\tvec4 envMapColor = vec4( 0.0 );\n\t\t#endif\n\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t}\n\tfloat getSpecularMIPLevel( const in float blinnShininessExponent, const in int maxMIPLevel ) {\n\t\tfloat maxMIPLevelScalar = float( maxMIPLevel );\n\t\tfloat desiredMIPLevel = maxMIPLevelScalar + 0.79248 - 0.5 * log2( pow2( blinnShininessExponent ) + 1.0 );\n\t\treturn clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );\n\t}\n\tvec3 getLightProbeIndirectRadiance( const in GeometricContext geometry, const in float blinnShininessExponent, const in int maxMIPLevel ) {\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( -geometry.viewDir, geometry.normal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( -geometry.viewDir, geometry.normal, refractionRatio );\n\t\t#endif\n\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\tfloat specularMIPLevel = getSpecularMIPLevel( blinnShininessExponent, maxMIPLevel );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\tvec4 envMapColor = textureCubeUV(queryReflectVec, BlinnExponentToGGXRoughness(blinnShininessExponent));\n\t\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\t\tvec2 sampleUV;\n\t\t\tsampleUV.y = asin( clamp( reflectVec.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\t\t\tsampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, sampleUV, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, sampleUV, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\t\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0,0.0,1.0 ) );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#endif\n\t\treturn envMapColor.rgb * envMapIntensity;\n\t}\n#endif\n";var lr="BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;\n";var ur="varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\nstruct BlinnPhongMaterial {\n\tvec3\tdiffuseColor;\n\tvec3\tspecularColor;\n\tfloat\tspecularShininess;\n\tfloat\tspecularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\t#ifdef TOON\n\t\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\t#else\n\t\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\t\tvec3 irradiance = dotNL * directLight.color;\n\t#endif\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)\n";var cr="PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nmaterial.specularRoughness = clamp( roughnessFactor, 0.04, 1.0 );\n#ifdef STANDARD\n\tmaterial.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.clearCoat = saturate( clearCoat );\tmaterial.clearCoatRoughness = clamp( clearCoatRoughness, 0.04, 1.0 );\n#endif\n";var hr="struct PhysicalMaterial {\n\tvec3\tdiffuseColor;\n\tfloat\tspecularRoughness;\n\tvec3\tspecularColor;\n\t#ifndef STANDARD\n\t\tfloat clearCoat;\n\t\tfloat clearCoatRoughness;\n\t#endif\n};\n#define MAXIMUM_SPECULAR_COEFFICIENT 0.16\n#define DEFAULT_SPECULAR_COEFFICIENT 0.04\nfloat clearCoatDHRApprox( const in float roughness, const in float dotNL ) {\n\treturn DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.specularRoughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos - halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos + halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos + halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos - halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tfloat norm = texture2D( ltcMag, uv ).a;\n\t\tvec4 t = texture2D( ltcMat, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3(   1,   0, t.y ),\n\t\t\tvec3(   0, t.z,   0 ),\n\t\t\tvec3( t.w,   0, t.x )\n\t\t);\n\t\treflectedLight.directSpecular += lightColor * material.specularColor * norm * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\t#ifndef STANDARD\n\t\tfloat clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );\n\t#else\n\t\tfloat clearCoatDHR = 0.0;\n\t#endif\n\treflectedLight.directSpecular += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry, material.specularColor, material.specularRoughness );\n\treflectedLight.directDiffuse += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\t#ifndef STANDARD\n\t\treflectedLight.directSpecular += irradiance * material.clearCoat * BRDF_Specular_GGX( directLight, geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );\n\t#endif\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 clearCoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t#ifndef STANDARD\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\tfloat dotNL = dotNV;\n\t\tfloat clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );\n\t#else\n\t\tfloat clearCoatDHR = 0.0;\n\t#endif\n\treflectedLight.indirectSpecular += ( 1.0 - clearCoatDHR ) * radiance * BRDF_Specular_GGX_Environment( geometry, material.specularColor, material.specularRoughness );\n\t#ifndef STANDARD\n\t\treflectedLight.indirectSpecular += clearCoatRadiance * material.clearCoat * BRDF_Specular_GGX_Environment( geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );\n\t#endif\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\n#define Material_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.specularRoughness )\n#define Material_ClearCoat_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.clearCoatRoughness )\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}\n"
;var fr="\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = normalize( vViewPosition );\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointDirectLightIrradiance( pointLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( pointLight.shadow, directLight.visible ) ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotDirectLightIrradiance( spotLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( spotLight.shadow, directLight.visible ) ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( directionalLight.shadow, directLight.visible ) ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\t#ifdef USE_LIGHTMAP\n\t\tvec3 lightMapIrradiance = texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tlightMapIrradiance *= PI;\n\t\t#endif\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t}\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( PHYSICAL ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tirradiance += getLightProbeIndirectIrradiance( geometry, 8 );\n\t#endif\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tvec3 radiance = getLightProbeIndirectRadiance( geometry, Material_BlinnShininessExponent( material ), 8 );\n\t#ifndef STANDARD\n\t\tvec3 clearCoatRadiance = getLightProbeIndirectRadiance( geometry, Material_ClearCoat_BlinnShininessExponent( material ), 8 );\n\t#else\n\t\tvec3 clearCoatRadiance = vec3( 0.0 );\n\t#endif\n\tRE_IndirectSpecular( radiance, clearCoatRadiance, geometry, material, reflectedLight );\n#endif\n";var dr="#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif";var pr="#ifdef USE_LOGDEPTHBUF\n\tuniform float logDepthBufFC;\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t#endif\n#endif\n";var mr="#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t#endif\n\tuniform float logDepthBufFC;\n#endif";var vr="#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t#else\n\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\tgl_Position.z *= gl_Position.w;\n\t#endif\n#endif\n";var gr="#ifdef USE_MAP\n\tvec4 texelColor = texture2D( map, vUv );\n\ttexelColor = mapTexelToLinear( texelColor );\n\tdiffuseColor *= texelColor;\n#endif\n";var yr="#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n";var br="#ifdef USE_MAP\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n\tvec4 mapTexel = texture2D( map, uv );\n\tdiffuseColor *= mapTexelToLinear( mapTexel );\n#endif\n";var _r="#ifdef USE_MAP\n\tuniform mat3 uvTransform;\n\tuniform sampler2D map;\n#endif\n";var xr="float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif\n";var wr="#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif";var Tr="#ifdef USE_MORPHNORMALS\n\tobjectNormal += ( morphNormal0 - normal ) * morphTargetInfluences[ 0 ];\n\tobjectNormal += ( morphNormal1 - normal ) * morphTargetInfluences[ 1 ];\n\tobjectNormal += ( morphNormal2 - normal ) * morphTargetInfluences[ 2 ];\n\tobjectNormal += ( morphNormal3 - normal ) * morphTargetInfluences[ 3 ];\n#endif\n";var Mr="#ifdef USE_MORPHTARGETS\n\t#ifndef USE_MORPHNORMALS\n\tuniform float morphTargetInfluences[ 8 ];\n\t#else\n\tuniform float morphTargetInfluences[ 4 ];\n\t#endif\n#endif";var Sr="#ifdef USE_MORPHTARGETS\n\ttransformed += ( morphTarget0 - position ) * morphTargetInfluences[ 0 ];\n\ttransformed += ( morphTarget1 - position ) * morphTargetInfluences[ 1 ];\n\ttransformed += ( morphTarget2 - position ) * morphTargetInfluences[ 2 ];\n\ttransformed += ( morphTarget3 - position ) * morphTargetInfluences[ 3 ];\n\t#ifndef USE_MORPHNORMALS\n\ttransformed += ( morphTarget4 - position ) * morphTargetInfluences[ 4 ];\n\ttransformed += ( morphTarget5 - position ) * morphTargetInfluences[ 5 ];\n\ttransformed += ( morphTarget6 - position ) * morphTargetInfluences[ 6 ];\n\ttransformed += ( morphTarget7 - position ) * morphTargetInfluences[ 7 ];\n\t#endif\n#endif\n";var Er="#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t#endif\n#endif\n#ifdef USE_NORMALMAP\n\tnormal = perturbNormal2Arb( -vViewPosition, normal );\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\n#endif\n";var Pr="#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm ) {\n\t\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\n\t\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tvec3 S = normalize( q0 * st1.t - q1 * st0.t );\n\t\tvec3 T = normalize( -q0 * st1.s + q1 * st0.s );\n\t\tvec3 N = normalize( surf_norm );\n\t\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t\tmapN.xy = normalScale * mapN.xy;\n\t\tmat3 tsn = mat3( S, T, N );\n\t\treturn normalize( tsn * mapN );\n\t}\n#endif\n";var Ar="vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256.,  256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn (( near + viewZ ) * far ) / (( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}\n";var Cr="#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif\n";var Lr="vec4 mvPosition = modelViewMatrix * vec4( transformed, 1.0 );\ngl_Position = projectionMatrix * mvPosition;\n";var Rr="#if defined( DITHERING )\n  gl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif\n";var Or="#if defined( DITHERING )\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif\n";var Ir="float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif\n";var Dr="#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif";var Br="#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHTS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHTS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHTS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tfloat texture2DShadowLerp( sampler2D depths, vec2 size, vec2 uv, float compare ) {\n\t\tconst vec2 offset = vec2( 0.0, 1.0 );\n\t\tvec2 texelSize = vec2( 1.0 ) / size;\n\t\tvec2 centroidUV = floor( uv * size + 0.5 ) / size;\n\t\tfloat lb = texture2DCompare( depths, centroidUV + texelSize * offset.xx, compare );\n\t\tfloat lt = texture2DCompare( depths, centroidUV + texelSize * offset.xy, compare );\n\t\tfloat rb = texture2DCompare( depths, centroidUV + texelSize * offset.yx, compare );\n\t\tfloat rt = texture2DCompare( depths, centroidUV + texelSize * offset.yy, compare );\n\t\tvec2 f = fract( uv * size + 0.5 );\n\t\tfloat a = mix( lb, lt, f.y );\n\t\tfloat b = mix( rb, rt, f.y );\n\t\tfloat c = mix( a, b, f.x );\n\t\treturn c;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tshadow = (\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif\n";var Gr="#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHTS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHTS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHTS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\n\t#endif\n#endif\n";var kr="#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n#endif\n";var Nr="float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\tDirectionalLight directionalLight;\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tshadow *= bool( directionalLight.shadow ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\tSpotLight spotLight;\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tshadow *= bool( spotLight.shadow ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\tPointLight pointLight;\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tshadow *= bool( pointLight.shadow ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#endif\n\t#endif\n\treturn shadow;\n}\n";var Ur="#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif";var Fr="#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\t#ifdef BONE_TEXTURE\n\t\tuniform sampler2D boneTexture;\n\t\tuniform int boneTextureSize;\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\t\ty = dy * ( y + 0.5 );\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\t\treturn bone;\n\t\t}\n\t#else\n\t\tuniform mat4 boneMatrices[ MAX_BONES ];\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tmat4 bone = boneMatrices[ int(i) ];\n\t\t\treturn bone;\n\t\t}\n\t#endif\n#endif\n";var Hr="#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif\n";var zr="#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix  = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n#endif\n";var Vr="float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif";var jr="#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif";var Wr="#if defined( TONE_MAPPING )\n  gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif\n";var Xr="#ifndef saturate\n\t#define saturate(a) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nuniform float toneMappingWhitePoint;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\n#define Uncharted2Helper( x ) max( ( ( x * ( 0.15 * x + 0.10 * 0.50 ) + 0.20 * 0.02 ) / ( x * ( 0.15 * x + 0.50 ) + 0.20 * 0.30 ) ) - 0.02 / 0.30, vec3( 0.0 ) )\nvec3 Uncharted2ToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( Uncharted2Helper( color ) / Uncharted2Helper( vec3( toneMappingWhitePoint ) ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\n";var Yr="#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvarying vec2 vUv;\n#endif";var qr="#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvarying vec2 vUv;\n\tuniform mat3 uvTransform;\n#endif\n";var Zr="#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif";var Kr="#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif";var $r="#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n#endif";var Qr="#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = uv2;\n#endif";var Jr="#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP )\n\tvec4 worldPosition = modelMatrix * vec4( transformed, 1.0 );\n#endif\n";var en="uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldPosition;\nvoid main() {\n\tgl_FragColor = textureCube( tCube, vec3( tFlip * vWorldPosition.x, vWorldPosition.yz ) );\n\tgl_FragColor.a *= opacity;\n}\n";var tn="varying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tvWorldPosition = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}\n";var rn="#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( gl_FragCoord.z ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( gl_FragCoord.z );\n\t#endif\n}\n";var nn="#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n}\n";var an="#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}\n";var on="#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}\n";var sn="uniform sampler2D tEquirect;\nvarying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldPosition );\n\tvec2 sampleUV;\n\tsampleUV.y = asin( clamp( direction.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\tsampleUV.x = atan( direction.z, direction.x ) * RECIPROCAL_PI2 + 0.5;\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n}\n";var ln="varying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tvWorldPosition = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}\n";var un="uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n";var cn="uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\tvLineDistance = scale * lineDistance;\n\tvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}\n";var hn="uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\treflectedLight.indirectDiffuse += texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n";var fn="#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_ENVMAP\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}\n"
;var dn="uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <bsdfs>\n#include <lights_pars>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\treflectedLight.indirectDiffuse = getAmbientLightIrradiance( ambientLightColor );\n\t#include <lightmap_fragment>\n\treflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}\n";var pn="#define LAMBERT\nvarying vec3 vLightFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n";var mn="#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_template>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}\n";var vn="#define PHONG\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n";var gn="#define PHYSICAL\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifndef STANDARD\n\tuniform float clearCoat;\n\tuniform float clearCoatRoughness;\n#endif\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <lights_pars>\n#include <lights_physical_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_template>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}\n";var yn="#define PHYSICAL\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n";var bn="#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\nvoid main() {\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n}\n";var _n="#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}\n";var xn="uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n";var wn="uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#ifdef USE_SIZEATTENUATION\n\t\tgl_PointSize = size * ( scale / - mvPosition.z );\n\t#else\n\t\tgl_PointSize = size;\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n";var Tn="uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <fog_fragment>\n}\n";var Mn="#include <fog_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n";var Sn={alphamap_fragment:Ti,alphamap_pars_fragment:Mi,alphatest_fragment:Si,aomap_fragment:Ei,aomap_pars_fragment:Pi,begin_vertex:Ai,beginnormal_vertex:Ci,bsdfs:Li,bumpmap_pars_fragment:Ri,clipping_planes_fragment:Oi,clipping_planes_pars_fragment:Ii,clipping_planes_pars_vertex:Di,clipping_planes_vertex:Bi,color_fragment:Gi,color_pars_fragment:ki,color_pars_vertex:Ni,color_vertex:Ui,common:Fi,cube_uv_reflection_fragment:Hi,defaultnormal_vertex:zi,displacementmap_pars_vertex:Vi,displacementmap_vertex:ji,emissivemap_fragment:Wi,emissivemap_pars_fragment:Xi,encodings_fragment:Yi,encodings_pars_fragment:qi,envmap_fragment:Zi,envmap_pars_fragment:Ki,envmap_pars_vertex:$i,envmap_vertex:Qi,fog_vertex:Ji,fog_pars_vertex:er,fog_fragment:tr,fog_pars_fragment:ir,gradientmap_pars_fragment:rr,lightmap_fragment:nr,lightmap_pars_fragment:ar,lights_lambert_vertex:or,lights_pars:sr,lights_phong_fragment:lr,lights_phong_pars_fragment:ur,lights_physical_fragment:cr,lights_physical_pars_fragment:hr,lights_template:fr,logdepthbuf_fragment:dr,logdepthbuf_pars_fragment:pr,logdepthbuf_pars_vertex:mr,logdepthbuf_vertex:vr,map_fragment:gr,map_pars_fragment:yr,map_particle_fragment:br,map_particle_pars_fragment:_r,metalnessmap_fragment:xr,metalnessmap_pars_fragment:wr,morphnormal_vertex:Tr,morphtarget_pars_vertex:Mr,morphtarget_vertex:Sr,normal_fragment:Er,normalmap_pars_fragment:Pr,packing:Ar,premultiplied_alpha_fragment:Cr,project_vertex:Lr,dithering_fragment:Rr,dithering_pars_fragment:Or,roughnessmap_fragment:Ir,roughnessmap_pars_fragment:Dr,shadowmap_pars_fragment:Br,shadowmap_pars_vertex:Gr,shadowmap_vertex:kr,shadowmask_pars_fragment:Nr,skinbase_vertex:Ur,skinning_pars_vertex:Fr,skinning_vertex:Hr,skinnormal_vertex:zr,specularmap_fragment:Vr,specularmap_pars_fragment:jr,tonemapping_fragment:Wr,tonemapping_pars_fragment:Xr,uv_pars_fragment:Yr,uv_pars_vertex:qr,uv_vertex:Zr,uv2_pars_fragment:Kr,uv2_pars_vertex:$r,uv2_vertex:Qr,worldpos_vertex:Jr,cube_frag:en,cube_vert:tn,depth_frag:rn,depth_vert:nn,distanceRGBA_frag:an,distanceRGBA_vert:on,equirect_frag:sn,equirect_vert:ln,linedashed_frag:un,linedashed_vert:cn,meshbasic_frag:hn,meshbasic_vert:fn,meshlambert_frag:dn,meshlambert_vert:pn,meshphong_frag:mn,meshphong_vert:vn,meshphysical_frag:gn,meshphysical_vert:yn,normal_frag:bn,normal_vert:_n,points_frag:xn,points_vert:wn,shadow_frag:Tn,shadow_vert:Mn};var En={basic:{uniforms:wi.merge([xi.common,xi.specularmap,xi.envmap,xi.aomap,xi.lightmap,xi.fog]),vertexShader:Sn.meshbasic_vert,fragmentShader:Sn.meshbasic_frag},lambert:{uniforms:wi.merge([xi.common,xi.specularmap,xi.envmap,xi.aomap,xi.lightmap,xi.emissivemap,xi.fog,xi.lights,{emissive:{value:new _i(0)}}]),vertexShader:Sn.meshlambert_vert,fragmentShader:Sn.meshlambert_frag},phong:{uniforms:wi.merge([xi.common,xi.specularmap,xi.envmap,xi.aomap,xi.lightmap,xi.emissivemap,xi.bumpmap,xi.normalmap,xi.displacementmap,xi.gradientmap,xi.fog,xi.lights,{emissive:{value:new _i(0)},specular:{value:new _i(1118481)},shininess:{value:30}}]),vertexShader:Sn.meshphong_vert,fragmentShader:Sn.meshphong_frag},standard:{uniforms:wi.merge([xi.common,xi.envmap,xi.aomap,xi.lightmap,xi.emissivemap,xi.bumpmap,xi.normalmap,xi.displacementmap,xi.roughnessmap,xi.metalnessmap,xi.fog,xi.lights,{emissive:{value:new _i(0)},roughness:{value:.5},metalness:{value:.5},envMapIntensity:{value:1}}]),vertexShader:Sn.meshphysical_vert,fragmentShader:Sn.meshphysical_frag},points:{uniforms:wi.merge([xi.points,xi.fog]),vertexShader:Sn.points_vert,fragmentShader:Sn.points_frag},dashed:{uniforms:wi.merge([xi.common,xi.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Sn.linedashed_vert,fragmentShader:Sn.linedashed_frag},depth:{uniforms:wi.merge([xi.common,xi.displacementmap]),vertexShader:Sn.depth_vert,fragmentShader:Sn.depth_frag},normal:{uniforms:wi.merge([xi.common,xi.bumpmap,xi.normalmap,xi.displacementmap,{opacity:{value:1}}]),vertexShader:Sn.normal_vert,fragmentShader:Sn.normal_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:Sn.cube_vert,fragmentShader:Sn.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Sn.equirect_vert,fragmentShader:Sn.equirect_frag},distanceRGBA:{uniforms:wi.merge([xi.common,xi.displacementmap,{referencePosition:{value:new Tt},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Sn.distanceRGBA_vert,fragmentShader:Sn.distanceRGBA_frag},shadow:{uniforms:wi.merge([xi.lights,xi.fog,{color:{value:new _i(0)},opacity:{value:1}}]),vertexShader:Sn.shadow_vert,fragmentShader:Sn.shadow_frag}};En.physical={uniforms:wi.merge([En.standard.uniforms,{clearCoat:{value:0},clearCoatRoughness:{value:0}}]),vertexShader:Sn.meshphysical_vert,fragmentShader:Sn.meshphysical_frag};function Pn(e,t){this.min=e!==undefined?e:new _t(+Infinity,+Infinity);this.max=t!==undefined?t:new _t(-Infinity,-Infinity)}Object.assign(Pn.prototype,{set:function(e,t){this.min.copy(e);this.max.copy(t);return this},setFromPoints:function(e){this.makeEmpty();for(var t=0,i=e.length;t<i;t++){this.expandByPoint(e[t])}return this},setFromCenterAndSize:function(){var e=new _t;return function t(i,r){var n=e.copy(r).multiplyScalar(.5);this.min.copy(i).sub(n);this.max.copy(i).add(n);return this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(e){this.min.copy(e.min);this.max.copy(e.max);return this},makeEmpty:function(){this.min.x=this.min.y=+Infinity;this.max.x=this.max.y=-Infinity;return this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y},getCenter:function(e){var t=e||new _t;return this.isEmpty()?t.set(0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(e){var t=e||new _t;return this.isEmpty()?t.set(0,0):t.subVectors(this.max,this.min)},expandByPoint:function(e){this.min.min(e);this.max.max(e);return this},expandByVector:function(e){this.min.sub(e);this.max.add(e);return this},expandByScalar:function(e){this.min.addScalar(-e);this.max.addScalar(e);return this},containsPoint:function(e){return e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y?false:true},containsBox:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y},getParameter:function(e,t){var i=t||new _t;return i.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))},intersectsBox:function(e){return e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y?false:true},clampPoint:function(e,t){var i=t||new _t;return i.copy(e).clamp(this.min,this.max)},distanceToPoint:function(){var e=new _t;return function t(i){var r=e.copy(i).clamp(this.min,this.max);return r.sub(i).length()}}(),intersect:function(e){this.min.max(e.min);this.max.min(e.max);return this},union:function(e){this.min.min(e.min);this.max.max(e.max);return this},translate:function(e){this.min.add(e);this.max.add(e);return this},equals:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)}});function An(e,t,i,r,n){var a,o;var s,l,u,c;var h,f;function d(){var e=new Float32Array([-1,-1,0,0,1,-1,1,0,1,1,1,1,-1,1,0,1]);var r=new Uint16Array([0,1,2,0,2,3]);a=t.createBuffer();o=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,a);t.bufferData(t.ARRAY_BUFFER,e,t.STATIC_DRAW);t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,o);t.bufferData(t.ELEMENT_ARRAY_BUFFER,r,t.STATIC_DRAW);h=t.createTexture();f=t.createTexture();i.bindTexture(t.TEXTURE_2D,h);t.texImage2D(t.TEXTURE_2D,0,t.RGB,16,16,0,t.RGB,t.UNSIGNED_BYTE,null);t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE);t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE);t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST);t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST);i.bindTexture(t.TEXTURE_2D,f);t.texImage2D(t.TEXTURE_2D,0,t.RGBA,16,16,0,t.RGBA,t.UNSIGNED_BYTE,null);t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE);t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE);t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST);t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST);s={vertexShader:["uniform lowp int renderType;","uniform vec3 screenPosition;","uniform vec2 scale;","uniform float rotation;","uniform sampler2D occlusionMap;","attribute vec2 position;","attribute vec2 uv;","varying vec2 vUV;","varying float vVisibility;","void main() {","\tvUV = uv;","\tvec2 pos = position;","\tif ( renderType == 2 ) {","\t\tvec4 visibility = texture2D( occlusionMap, vec2( 0.1, 0.1 ) );","\t\tvisibility += texture2D( occlusionMap, vec2( 0.5, 0.1 ) );","\t\tvisibility += texture2D( occlusionMap, vec2( 0.9, 0.1 ) );","\t\tvisibility += texture2D( occlusionMap, vec2( 0.9, 0.5 ) );","\t\tvisibility += texture2D( occlusionMap, vec2( 0.9, 0.9 ) );","\t\tvisibility += texture2D( occlusionMap, vec2( 0.5, 0.9 ) );","\t\tvisibility += texture2D( occlusionMap, vec2( 0.1, 0.9 ) );","\t\tvisibility += texture2D( occlusionMap, vec2( 0.1, 0.5 ) );","\t\tvisibility += texture2D( occlusionMap, vec2( 0.5, 0.5 ) );","\t\tvVisibility =        visibility.r / 9.0;","\t\tvVisibility *= 1.0 - visibility.g / 9.0;","\t\tvVisibility *=       visibility.b / 9.0;","\t\tvVisibility *= 1.0 - visibility.a / 9.0;","\t\tpos.x = cos( rotation ) * position.x - sin( rotation ) * position.y;","\t\tpos.y = sin( rotation ) * position.x + cos( rotation ) * position.y;","\t}","\tgl_Position = vec4( ( pos * scale + screenPosition.xy ).xy, screenPosition.z, 1.0 );","}"].join("\n"),fragmentShader:["uniform lowp int renderType;","uniform sampler2D map;","uniform float opacity;","uniform vec3 color;","varying vec2 vUV;","varying float vVisibility;","void main() {","\tif ( renderType == 0 ) {","\t\tgl_FragColor = vec4( 1.0, 0.0, 1.0, 0.0 );","\t} else if ( renderType == 1 ) {","\t\tgl_FragColor = texture2D( map, vUV );","\t} else {","\t\tvec4 texture = texture2D( map, vUV );","\t\ttexture.a *= opacity * vVisibility;","\t\tgl_FragColor = texture;","\t\tgl_FragColor.rgb *= color;","\t}","}"].join("\n")};l=p(s);u={vertex:t.getAttribLocation(l,"position"),uv:t.getAttribLocation(l,"uv")};c={renderType:t.getUniformLocation(l,"renderType"),map:t.getUniformLocation(l,"map"),occlusionMap:t.getUniformLocation(l,"occlusionMap"),opacity:t.getUniformLocation(l,"opacity"),color:t.getUniformLocation(l,"color"),scale:t.getUniformLocation(l,"scale"),rotation:t.getUniformLocation(l,"rotation"),screenPosition:t.getUniformLocation(l,"screenPosition")}}this.render=function(e,n,s,p){if(e.length===0)return;var m=new Tt;var v=p.w/p.z,g=p.z*.5,y=p.w*.5;var b=16/p.w,_=new _t(b*v,b);var x=new Tt(1,1,0),w=new _t(1,1);var T=new Pn;T.min.set(p.x,p.y);T.max.set(p.x+(p.z-16),p.y+(p.w-16));if(l===undefined){d()}i.useProgram(l);i.initAttributes();i.enableAttribute(u.vertex);i.enableAttribute(u.uv);i.disableUnusedAttributes();t.uniform1i(c.occlusionMap,0);t.uniform1i(c.map,1);t.bindBuffer(t.ARRAY_BUFFER,a);t.vertexAttribPointer(u.vertex,2,t.FLOAT,false,2*8,0);t.vertexAttribPointer(u.uv,2,t.FLOAT,false,2*8,8);t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,o);i.disable(t.CULL_FACE);i.buffers.depth.setMask(false);for(var M=0,S=e.length;M<S;M++){b=16/p.w;_.set(b*v,b);var E=e[M];m.set(E.matrixWorld.elements[12],E.matrixWorld.elements[13],E.matrixWorld.elements[14]);m.applyMatrix4(s.matrixWorldInverse);m.applyMatrix4(s.projectionMatrix);x.copy(m);w.x=p.x+x.x*g+g-8;w.y=p.y+x.y*y+y-8;if(T.containsPoint(w)===true){i.activeTexture(t.TEXTURE0);i.bindTexture(t.TEXTURE_2D,null);i.activeTexture(t.TEXTURE1);i.bindTexture(t.TEXTURE_2D,h);t.copyTexImage2D(t.TEXTURE_2D,0,t.RGB,w.x,w.y,16,16,0);t.uniform1i(c.renderType,0);t.uniform2f(c.scale,_.x,_.y);t.uniform3f(c.screenPosition,x.x,x.y,x.z);i.disable(t.BLEND);i.enable(t.DEPTH_TEST);t.drawElements(t.TRIANGLES,6,t.UNSIGNED_SHORT,0);i.activeTexture(t.TEXTURE0);i.bindTexture(t.TEXTURE_2D,f);t.copyTexImage2D(t.TEXTURE_2D,0,t.RGBA,w.x,w.y,16,16,0);t.uniform1i(c.renderType,1);i.disable(t.DEPTH_TEST);i.activeTexture(t.TEXTURE1);i.bindTexture(t.TEXTURE_2D,h);t.drawElements(t.TRIANGLES,6,t.UNSIGNED_SHORT,0);E.positionScreen.copy(x);if(E.customUpdateCallback){E.customUpdateCallback(E)}else{E.updateLensFlares()}t.uniform1i(c.renderType,2);i.enable(t.BLEND);for(var P=0,A=E.lensFlares.length;P<A;P++){var C=E.lensFlares[P];if(C.opacity>.001&&C.scale>.001){x.x=C.x;x.y=C.y;x.z=C.z;b=C.size*C.scale/p.w;_.x=b*v;_.y=b;t.uniform3f(c.screenPosition,x.x,x.y,x.z);t.uniform2f(c.scale,_.x,_.y);t.uniform1f(c.rotation,C.rotation);t.uniform1f(c.opacity,C.opacity);t.uniform3f(c.color,C.color.r,C.color.g,C.color.b);i.setBlending(C.blending,C.blendEquation,C.blendSrc,C.blendDst);r.setTexture2D(C.texture,1);t.drawElements(t.TRIANGLES,6,t.UNSIGNED_SHORT,0)}}}}i.enable(t.CULL_FACE);i.enable(t.DEPTH_TEST);i.buffers.depth.setMask(true);i.reset()};function p(e){var i=t.createProgram();var r=t.createShader(t.FRAGMENT_SHADER);var a=t.createShader(t.VERTEX_SHADER);var o="precision "+n.precision+" float;\n";t.shaderSource(r,o+e.fragmentShader);t.shaderSource(a,o+e.vertexShader);t.compileShader(r);t.compileShader(a);t.attachShader(i,r);t.attachShader(i,a);t.linkProgram(i);return i}}function Cn(e,t,i,r,n,a,o,s,l){Et.call(this,e,t,i,r,n,a,o,s,l);this.needsUpdate=true}Cn.prototype=Object.create(Et.prototype);Cn.prototype.constructor=Cn;function Ln(e,t,i,r,n){var a,o;var s,l,u;var c;var h=new Tt;var f=new wt;var d=new Tt;function p(){var e=new Float32Array([-.5,-.5,0,0,.5,-.5,1,0,.5,.5,1,1,-.5,.5,0,1]);var i=new Uint16Array([0,1,2,0,2,3]);a=t.createBuffer();o=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,a);t.bufferData(t.ARRAY_BUFFER,e,t.STATIC_DRAW);t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,o);t.bufferData(t.ELEMENT_ARRAY_BUFFER,i,t.STATIC_DRAW);s=m();l={position:t.getAttribLocation(s,"position"),uv:t.getAttribLocation(s,"uv")};u={uvOffset:t.getUniformLocation(s,"uvOffset"),uvScale:t.getUniformLocation(s,"uvScale"),rotation:t.getUniformLocation(s,"rotation"),scale:t.getUniformLocation(s,"scale"),color:t.getUniformLocation(s,"color"),map:t.getUniformLocation(s,"map"),opacity:t.getUniformLocation(s,"opacity"),modelViewMatrix:t.getUniformLocation(s,"modelViewMatrix"),projectionMatrix:t.getUniformLocation(s,"projectionMatrix"),fogType:t.getUniformLocation(s,"fogType"),fogDensity:t.getUniformLocation(s,"fogDensity"),fogNear:t.getUniformLocation(s,"fogNear"),fogFar:t.getUniformLocation(s,"fogFar"),fogColor:t.getUniformLocation(s,"fogColor"),fogDepth:t.getUniformLocation(s,"fogDepth"),alphaTest:t.getUniformLocation(s,"alphaTest")};var r=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");r.width=8;r.height=8;var n=r.getContext("2d");n.fillStyle="white";n.fillRect(0,0,8,8);c=new Cn(r)}this.render=function(n,m,g){if(n.length===0)return;if(s===undefined){p()}i.useProgram(s);i.initAttributes();i.enableAttribute(l.position);i.enableAttribute(l.uv);i.disableUnusedAttributes();i.disable(t.CULL_FACE);i.enable(t.BLEND);t.bindBuffer(t.ARRAY_BUFFER,a);t.vertexAttribPointer(l.position,2,t.FLOAT,false,2*8,0);t.vertexAttribPointer(l.uv,2,t.FLOAT,false,2*8,8);t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,o);t.uniformMatrix4fv(u.projectionMatrix,false,g.projectionMatrix.elements);i.activeTexture(t.TEXTURE0);t.uniform1i(u.map,0);var y=0;var b=0;var _=m.fog;if(_){t.uniform3f(u.fogColor,_.color.r,_.color.g,_.color.b);if(_.isFog){t.uniform1f(u.fogNear,_.near);t.uniform1f(u.fogFar,_.far);t.uniform1i(u.fogType,1);y=1;b=1}else if(_.isFogExp2){t.uniform1f(u.fogDensity,_.density);t.uniform1i(u.fogType,2);y=2;b=2}}else{t.uniform1i(u.fogType,0);y=0;b=0}for(var x=0,w=n.length;x<w;x++){var T=n[x];T.modelViewMatrix.multiplyMatrices(g.matrixWorldInverse,T.matrixWorld);T.z=-T.modelViewMatrix.elements[14]}n.sort(v);var M=[];for(var x=0,w=n.length;x<w;x++){var T=n[x];var S=T.material;if(S.visible===false)continue;T.onBeforeRender(e,m,g,undefined,S,undefined);t.uniform1f(u.alphaTest,S.alphaTest);t.uniformMatrix4fv(u.modelViewMatrix,false,T.modelViewMatrix.elements);T.matrixWorld.decompose(h,f,d);M[0]=d.x;M[1]=d.y;var E=0;if(m.fog&&S.fog){E=b}if(y!==E){t.uniform1i(u.fogType,E);y=E}if(S.map!==null){t.uniform2f(u.uvOffset,S.map.offset.x,S.map.offset.y);t.uniform2f(u.uvScale,S.map.repeat.x,S.map.repeat.y)}else{t.uniform2f(u.uvOffset,0,0);t.uniform2f(u.uvScale,1,1)}t.uniform1f(u.opacity,S.opacity);t.uniform3f(u.color,S.color.r,S.color.g,S.color.b);t.uniform1f(u.rotation,S.rotation);t.uniform2fv(u.scale,M);i.setBlending(S.blending,S.blendEquation,S.blendSrc,S.blendDst,S.blendEquationAlpha,S.blendSrcAlpha,S.blendDstAlpha,S.premultipliedAlpha);i.buffers.depth.setTest(S.depthTest);i.buffers.depth.setMask(S.depthWrite);i.buffers.color.setMask(S.colorWrite);r.setTexture2D(S.map||c,0);t.drawElements(t.TRIANGLES,6,t.UNSIGNED_SHORT,0);T.onAfterRender(e,m,g,undefined,S,undefined)}i.enable(t.CULL_FACE);i.reset()};function m(){var e=t.createProgram();var i=t.createShader(t.VERTEX_SHADER);var r=t.createShader(t.FRAGMENT_SHADER);t.shaderSource(i,["precision "+n.precision+" float;","#define SHADER_NAME "+"SpriteMaterial","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform float rotation;","uniform vec2 scale;","uniform vec2 uvOffset;","uniform vec2 uvScale;","attribute vec2 position;","attribute vec2 uv;","varying vec2 vUV;","varying float fogDepth;","void main() {","\tvUV = uvOffset + uv * uvScale;","\tvec2 alignedPosition = position * scale;","\tvec2 rotatedPosition;","\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;","\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;","\tvec4 mvPosition;","\tmvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );","\tmvPosition.xy += rotatedPosition;","\tgl_Position = projectionMatrix * mvPosition;","\tfogDepth = - mvPosition.z;","}"].join("\n"));t.shaderSource(r,["precision "+n.precision+" float;","#define SHADER_NAME "+"SpriteMaterial","uniform vec3 color;","uniform sampler2D map;","uniform float opacity;","uniform int fogType;","uniform vec3 fogColor;","uniform float fogDensity;","uniform float fogNear;","uniform float fogFar;","uniform float alphaTest;","varying vec2 vUV;","varying float fogDepth;","void main() {","\tvec4 texture = texture2D( map, vUV );","\tgl_FragColor = vec4( color * texture.xyz, texture.a * opacity );","\tif ( gl_FragColor.a < alphaTest ) discard;","\tif ( fogType > 0 ) {","\t\tfloat fogFactor = 0.0;","\t\tif ( fogType == 1 ) {","\t\t\tfogFactor = smoothstep( fogNear, fogFar, fogDepth );","\t\t} else {","\t\t\tconst float LOG2 = 1.442695;","\t\t\tfogFactor = exp2( - fogDensity * fogDensity * fogDepth * fogDepth * LOG2 );","\t\t\tfogFactor = 1.0 - clamp( fogFactor, 0.0, 1.0 );","\t\t}","\t\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );","\t}","}"].join("\n"));t.compileShader(i);t.compileShader(r);t.attachShader(e,i);t.attachShader(e,r);t.linkProgram(e);return e}
function v(e,t){if(e.renderOrder!==t.renderOrder){return e.renderOrder-t.renderOrder}else if(e.z!==t.z){return t.z-e.z}else{return t.id-e.id}}}var Rn=0;function On(){Object.defineProperty(this,"id",{value:Rn++});this.uuid=bt.generateUUID();this.name="";this.type="Material";this.fog=true;this.lights=true;this.blending=w;this.side=d;this.flatShading=false;this.vertexColors=y;this.opacity=1;this.transparent=false;this.blendSrc=G;this.blendDst=k;this.blendEquation=P;this.blendSrcAlpha=null;this.blendDstAlpha=null;this.blendEquationAlpha=null;this.depthFunc=X;this.depthTest=true;this.depthWrite=true;this.clippingPlanes=null;this.clipIntersection=false;this.clipShadows=false;this.colorWrite=true;this.precision=null;this.polygonOffset=false;this.polygonOffsetFactor=0;this.polygonOffsetUnits=0;this.dithering=false;this.alphaTest=0;this.premultipliedAlpha=false;this.overdraw=0;this.visible=true;this.userData={};this.needsUpdate=true}Object.assign(On.prototype,t.prototype,{isMaterial:true,onBeforeCompile:function(){},setValues:function(e){if(e===undefined)return;for(var t in e){var i=e[t];if(i===undefined){console.warn("THREE.Material: '"+t+"' parameter is undefined.");continue}if(t==="shading"){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.");this.flatShading=i===v?true:false;continue}var r=this[t];if(r===undefined){console.warn("THREE."+this.type+": '"+t+"' is not a property of this material.");continue}if(r&&r.isColor){r.set(i)}else if(r&&r.isVector3&&(i&&i.isVector3)){r.copy(i)}else if(t==="overdraw"){this[t]=Number(i)}else{this[t]=i}}},toJSON:function(e){var t=e===undefined||typeof e==="string";if(t){e={textures:{},images:{}}}var i={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};i.uuid=this.uuid;i.type=this.type;if(this.name!=="")i.name=this.name;if(this.color&&this.color.isColor)i.color=this.color.getHex();if(this.roughness!==undefined)i.roughness=this.roughness;if(this.metalness!==undefined)i.metalness=this.metalness;if(this.emissive&&this.emissive.isColor)i.emissive=this.emissive.getHex();if(this.emissiveIntensity!==1)i.emissiveIntensity=this.emissiveIntensity;if(this.specular&&this.specular.isColor)i.specular=this.specular.getHex();if(this.shininess!==undefined)i.shininess=this.shininess;if(this.clearCoat!==undefined)i.clearCoat=this.clearCoat;if(this.clearCoatRoughness!==undefined)i.clearCoatRoughness=this.clearCoatRoughness;if(this.map&&this.map.isTexture)i.map=this.map.toJSON(e).uuid;if(this.alphaMap&&this.alphaMap.isTexture)i.alphaMap=this.alphaMap.toJSON(e).uuid;if(this.lightMap&&this.lightMap.isTexture)i.lightMap=this.lightMap.toJSON(e).uuid;if(this.bumpMap&&this.bumpMap.isTexture){i.bumpMap=this.bumpMap.toJSON(e).uuid;i.bumpScale=this.bumpScale}if(this.normalMap&&this.normalMap.isTexture){i.normalMap=this.normalMap.toJSON(e).uuid;i.normalScale=this.normalScale.toArray()}if(this.displacementMap&&this.displacementMap.isTexture){i.displacementMap=this.displacementMap.toJSON(e).uuid;i.displacementScale=this.displacementScale;i.displacementBias=this.displacementBias}if(this.roughnessMap&&this.roughnessMap.isTexture)i.roughnessMap=this.roughnessMap.toJSON(e).uuid;if(this.metalnessMap&&this.metalnessMap.isTexture)i.metalnessMap=this.metalnessMap.toJSON(e).uuid;if(this.emissiveMap&&this.emissiveMap.isTexture)i.emissiveMap=this.emissiveMap.toJSON(e).uuid;if(this.specularMap&&this.specularMap.isTexture)i.specularMap=this.specularMap.toJSON(e).uuid;if(this.envMap&&this.envMap.isTexture){i.envMap=this.envMap.toJSON(e).uuid;i.reflectivity=this.reflectivity}if(this.gradientMap&&this.gradientMap.isTexture){i.gradientMap=this.gradientMap.toJSON(e).uuid}if(this.size!==undefined)i.size=this.size;if(this.sizeAttenuation!==undefined)i.sizeAttenuation=this.sizeAttenuation;if(this.blending!==w)i.blending=this.blending;if(this.flatShading===true)i.flatShading=this.flatShading;if(this.side!==d)i.side=this.side;if(this.vertexColors!==y)i.vertexColors=this.vertexColors;if(this.opacity<1)i.opacity=this.opacity;if(this.transparent===true)i.transparent=this.transparent;i.depthFunc=this.depthFunc;i.depthTest=this.depthTest;i.depthWrite=this.depthWrite;if(this.rotation!==0)i.rotation=this.rotation;if(this.linewidth!==1)i.linewidth=this.linewidth;if(this.dashSize!==undefined)i.dashSize=this.dashSize;if(this.gapSize!==undefined)i.gapSize=this.gapSize;if(this.scale!==undefined)i.scale=this.scale;if(this.dithering===true)i.dithering=true;if(this.alphaTest>0)i.alphaTest=this.alphaTest;if(this.premultipliedAlpha===true)i.premultipliedAlpha=this.premultipliedAlpha;if(this.wireframe===true)i.wireframe=this.wireframe;if(this.wireframeLinewidth>1)i.wireframeLinewidth=this.wireframeLinewidth;if(this.wireframeLinecap!=="round")i.wireframeLinecap=this.wireframeLinecap;if(this.wireframeLinejoin!=="round")i.wireframeLinejoin=this.wireframeLinejoin;if(this.morphTargets===true)i.morphTargets=true;if(this.skinning===true)i.skinning=true;if(this.visible===false)i.visible=false;if(JSON.stringify(this.userData)!=="{}")i.userData=this.userData;function r(e){var t=[];for(var i in e){var r=e[i];delete r.metadata;t.push(r)}return t}if(t){var n=r(e.textures);var a=r(e.images);if(n.length>0)i.textures=n;if(a.length>0)i.images=a}return i},clone:function(){return(new this.constructor).copy(this)},copy:function(e){this.name=e.name;this.fog=e.fog;this.lights=e.lights;this.blending=e.blending;this.side=e.side;this.flatShading=e.flatShading;this.vertexColors=e.vertexColors;this.opacity=e.opacity;this.transparent=e.transparent;this.blendSrc=e.blendSrc;this.blendDst=e.blendDst;this.blendEquation=e.blendEquation;this.blendSrcAlpha=e.blendSrcAlpha;this.blendDstAlpha=e.blendDstAlpha;this.blendEquationAlpha=e.blendEquationAlpha;this.depthFunc=e.depthFunc;this.depthTest=e.depthTest;this.depthWrite=e.depthWrite;this.colorWrite=e.colorWrite;this.precision=e.precision;this.polygonOffset=e.polygonOffset;this.polygonOffsetFactor=e.polygonOffsetFactor;this.polygonOffsetUnits=e.polygonOffsetUnits;this.dithering=e.dithering;this.alphaTest=e.alphaTest;this.premultipliedAlpha=e.premultipliedAlpha;this.overdraw=e.overdraw;this.visible=e.visible;this.userData=JSON.parse(JSON.stringify(e.userData));this.clipShadows=e.clipShadows;this.clipIntersection=e.clipIntersection;var t=e.clippingPlanes,i=null;if(t!==null){var r=t.length;i=new Array(r);for(var n=0;n!==r;++n)i[n]=t[n].clone()}this.clippingPlanes=i;return this},dispose:function(){this.dispatchEvent({type:"dispose"})}});function In(e){On.call(this);this.type="MeshDepthMaterial";this.depthPacking=gt;this.skinning=false;this.morphTargets=false;this.map=null;this.alphaMap=null;this.displacementMap=null;this.displacementScale=1;this.displacementBias=0;this.wireframe=false;this.wireframeLinewidth=1;this.fog=false;this.lights=false;this.setValues(e)}In.prototype=Object.create(On.prototype);In.prototype.constructor=In;In.prototype.isMeshDepthMaterial=true;In.prototype.copy=function(e){On.prototype.copy.call(this,e);this.depthPacking=e.depthPacking;this.skinning=e.skinning;this.morphTargets=e.morphTargets;this.map=e.map;this.alphaMap=e.alphaMap;this.displacementMap=e.displacementMap;this.displacementScale=e.displacementScale;this.displacementBias=e.displacementBias;this.wireframe=e.wireframe;this.wireframeLinewidth=e.wireframeLinewidth;return this};function Dn(e){On.call(this);this.type="MeshDistanceMaterial";this.referencePosition=new Tt;this.nearDistance=1;this.farDistance=1e3;this.skinning=false;this.morphTargets=false;this.map=null;this.alphaMap=null;this.displacementMap=null;this.displacementScale=1;this.displacementBias=0;this.fog=false;this.lights=false;this.setValues(e)}Dn.prototype=Object.create(On.prototype);Dn.prototype.constructor=Dn;Dn.prototype.isMeshDistanceMaterial=true;Dn.prototype.copy=function(e){On.prototype.copy.call(this,e);this.referencePosition.copy(e.referencePosition);this.nearDistance=e.nearDistance;this.farDistance=e.farDistance;this.skinning=e.skinning;this.morphTargets=e.morphTargets;this.map=e.map;this.alphaMap=e.alphaMap;this.displacementMap=e.displacementMap;this.displacementScale=e.displacementScale;this.displacementBias=e.displacementBias;return this};function Bn(e,t){this.min=e!==undefined?e:new Tt(+Infinity,+Infinity,+Infinity);this.max=t!==undefined?t:new Tt(-Infinity,-Infinity,-Infinity)}Object.assign(Bn.prototype,{isBox3:true,set:function(e,t){this.min.copy(e);this.max.copy(t);return this},setFromArray:function(e){var t=+Infinity;var i=+Infinity;var r=+Infinity;var n=-Infinity;var a=-Infinity;var o=-Infinity;for(var s=0,l=e.length;s<l;s+=3){var u=e[s];var c=e[s+1];var h=e[s+2];if(u<t)t=u;if(c<i)i=c;if(h<r)r=h;if(u>n)n=u;if(c>a)a=c;if(h>o)o=h}this.min.set(t,i,r);this.max.set(n,a,o);return this},setFromBufferAttribute:function(e){var t=+Infinity;var i=+Infinity;var r=+Infinity;var n=-Infinity;var a=-Infinity;var o=-Infinity;for(var s=0,l=e.count;s<l;s++){var u=e.getX(s);var c=e.getY(s);var h=e.getZ(s);if(u<t)t=u;if(c<i)i=c;if(h<r)r=h;if(u>n)n=u;if(c>a)a=c;if(h>o)o=h}this.min.set(t,i,r);this.max.set(n,a,o);return this},setFromPoints:function(e){this.makeEmpty();for(var t=0,i=e.length;t<i;t++){this.expandByPoint(e[t])}return this},setFromCenterAndSize:function(){var e=new Tt;return function t(i,r){var n=e.copy(r).multiplyScalar(.5);this.min.copy(i).sub(n);this.max.copy(i).add(n);return this}}(),setFromObject:function(e){this.makeEmpty();return this.expandByObject(e)},clone:function(){return(new this.constructor).copy(this)},copy:function(e){this.min.copy(e.min);this.max.copy(e.max);return this},makeEmpty:function(){this.min.x=this.min.y=this.min.z=+Infinity;this.max.x=this.max.y=this.max.z=-Infinity;return this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},getCenter:function(e){var t=e||new Tt;return this.isEmpty()?t.set(0,0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(e){var t=e||new Tt;return this.isEmpty()?t.set(0,0,0):t.subVectors(this.max,this.min)},expandByPoint:function(e){this.min.min(e);this.max.max(e);return this},expandByVector:function(e){this.min.sub(e);this.max.add(e);return this},expandByScalar:function(e){this.min.addScalar(-e);this.max.addScalar(e);return this},expandByObject:function(){var e,t,i;var r=new Tt;function n(n){var a=n.geometry;if(a!==undefined){if(a.isGeometry){var o=a.vertices;for(t=0,i=o.length;t<i;t++){r.copy(o[t]);r.applyMatrix4(n.matrixWorld);e.expandByPoint(r)}}else if(a.isBufferGeometry){var s=a.attributes.position;if(s!==undefined){for(t=0,i=s.count;t<i;t++){r.fromBufferAttribute(s,t).applyMatrix4(n.matrixWorld);e.expandByPoint(r)}}}}}return function t(i){e=this;i.updateMatrixWorld(true);i.traverse(n);return this}}(),containsPoint:function(e){return e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z?false:true},containsBox:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z},getParameter:function(e,t){var i=t||new Tt;return i.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))},intersectsBox:function(e){return e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z?false:true},intersectsSphere:function(){var e=new Tt;return function t(i){this.clampPoint(i.center,e);return e.distanceToSquared(i.center)<=i.radius*i.radius}}(),intersectsPlane:function(e){var t,i;if(e.normal.x>0){t=e.normal.x*this.min.x;i=e.normal.x*this.max.x}else{t=e.normal.x*this.max.x;i=e.normal.x*this.min.x}if(e.normal.y>0){t+=e.normal.y*this.min.y;i+=e.normal.y*this.max.y}else{t+=e.normal.y*this.max.y;i+=e.normal.y*this.min.y}if(e.normal.z>0){t+=e.normal.z*this.min.z;i+=e.normal.z*this.max.z}else{t+=e.normal.z*this.max.z;i+=e.normal.z*this.min.z}return t<=e.constant&&i>=e.constant},clampPoint:function(e,t){var i=t||new Tt;return i.copy(e).clamp(this.min,this.max)},distanceToPoint:function(){var e=new Tt;return function t(i){var r=e.copy(i).clamp(this.min,this.max);return r.sub(i).length()}}(),getBoundingSphere:function(){var e=new Tt;return function t(i){var r=i||new Gn;this.getCenter(r.center);r.radius=this.getSize(e).length()*.5;return r}}(),intersect:function(e){this.min.max(e.min);this.max.min(e.max);if(this.isEmpty())this.makeEmpty();return this},union:function(e){this.min.min(e.min);this.max.max(e.max);return this},applyMatrix4:function(){var e=[new Tt,new Tt,new Tt,new Tt,new Tt,new Tt,new Tt,new Tt];return function t(i){if(this.isEmpty())return this;e[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(i);e[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(i);e[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(i);e[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(i);e[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(i);e[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(i);e[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(i);e[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(i);this.setFromPoints(e);return this}}(),translate:function(e){this.min.add(e);this.max.add(e);return this},equals:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)}});function Gn(e,t){this.center=e!==undefined?e:new Tt;this.radius=t!==undefined?t:0}Object.assign(Gn.prototype,{set:function(e,t){this.center.copy(e);this.radius=t;return this},setFromPoints:function(){var e=new Bn;return function t(i,r){var n=this.center;if(r!==undefined){n.copy(r)}else{e.setFromPoints(i).getCenter(n)}var a=0;for(var o=0,s=i.length;o<s;o++){a=Math.max(a,n.distanceToSquared(i[o]))}this.radius=Math.sqrt(a);return this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(e){this.center.copy(e.center);this.radius=e.radius;return this},empty:function(){return this.radius<=0},containsPoint:function(e){return e.distanceToSquared(this.center)<=this.radius*this.radius},distanceToPoint:function(e){return e.distanceTo(this.center)-this.radius},intersectsSphere:function(e){var t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t},intersectsBox:function(e){return e.intersectsSphere(this)},intersectsPlane:function(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius},clampPoint:function(e,t){var i=this.center.distanceToSquared(e);var r=t||new Tt;r.copy(e);if(i>this.radius*this.radius){r.sub(this.center).normalize();r.multiplyScalar(this.radius).add(this.center)}return r},getBoundingBox:function(e){var t=e||new Bn;t.set(this.center,this.center);t.expandByScalar(this.radius);return t},applyMatrix4:function(e){this.center.applyMatrix4(e);this.radius=this.radius*e.getMaxScaleOnAxis();return this},translate:function(e){this.center.add(e);return this},equals:function(e){return e.center.equals(this.center)&&e.radius===this.radius}});function kn(e,t){this.normal=e!==undefined?e:new Tt(1,0,0);this.constant=t!==undefined?t:0}Object.assign(kn.prototype,{set:function(e,t){this.normal.copy(e);this.constant=t;return this},setComponents:function(e,t,i,r){this.normal.set(e,t,i);this.constant=r;return this},setFromNormalAndCoplanarPoint:function(e,t){this.normal.copy(e);this.constant=-t.dot(this.normal);return this},setFromCoplanarPoints:function(){var e=new Tt;var t=new Tt;return function i(r,n,a){var o=e.subVectors(a,n).cross(t.subVectors(r,n)).normalize();this.setFromNormalAndCoplanarPoint(o,r);return this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(e){this.normal.copy(e.normal);this.constant=e.constant;return this},normalize:function(){var e=1/this.normal.length();this.normal.multiplyScalar(e);this.constant*=e;return this},negate:function(){this.constant*=-1;this.normal.negate();return this},distanceToPoint:function(e){return this.normal.dot(e)+this.constant},distanceToSphere:function(e){return this.distanceToPoint(e.center)-e.radius},projectPoint:function(e,t){var i=t||new Tt;return i.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)},intersectLine:function(){var e=new Tt;return function t(i,r){var n=r||new Tt;var a=i.delta(e);var o=this.normal.dot(a);if(o===0){if(this.distanceToPoint(i.start)===0){return n.copy(i.start)}return undefined}var s=-(i.start.dot(this.normal)+this.constant)/o;if(s<0||s>1){return undefined}return n.copy(a).multiplyScalar(s).add(i.start)}}(),intersectsLine:function(e){var t=this.distanceToPoint(e.start);var i=this.distanceToPoint(e.end);return t<0&&i>0||i<0&&t>0},intersectsBox:function(e){return e.intersectsPlane(this)},intersectsSphere:function(e){return e.intersectsPlane(this)},coplanarPoint:function(e){var t=e||new Tt;return t.copy(this.normal).multiplyScalar(-this.constant)},applyMatrix4:function(){var e=new Tt;var t=new Mt;return function i(r,n){var a=n||t.getNormalMatrix(r);var o=this.coplanarPoint(e).applyMatrix4(r);var s=this.normal.applyMatrix3(a).normalize();this.constant=-o.dot(s);return this}}(),translate:function(e){this.constant-=e.dot(this.normal);return this},equals:function(e){return e.normal.equals(this.normal)&&e.constant===this.constant}});function Nn(e,t,i,r,n,a){this.planes=[e!==undefined?e:new kn,t!==undefined?t:new kn,i!==undefined?i:new kn,r!==undefined?r:new kn,n!==undefined?n:new kn,a!==undefined?a:new kn]}Object.assign(Nn.prototype,{set:function(e,t,i,r,n,a){var o=this.planes;o[0].copy(e);o[1].copy(t);o[2].copy(i);o[3].copy(r);o[4].copy(n);o[5].copy(a);return this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){var t=this.planes;for(var i=0;i<6;i++){t[i].copy(e.planes[i])}return this},setFromMatrix:function(e){var t=this.planes;var i=e.elements;var r=i[0],n=i[1],a=i[2],o=i[3];var s=i[4],l=i[5],u=i[6],c=i[7];var h=i[8],f=i[9],d=i[10],p=i[11];var m=i[12],v=i[13],g=i[14],y=i[15];t[0].setComponents(o-r,c-s,p-h,y-m).normalize();t[1].setComponents(o+r,c+s,p+h,y+m).normalize();t[2].setComponents(o+n,c+l,p+f,y+v).normalize();t[3].setComponents(o-n,c-l,p-f,y-v).normalize();t[4].setComponents(o-a,c-u,p-d,y-g).normalize();t[5].setComponents(o+a,c+u,p+d,y+g).normalize();return this},intersectsObject:function(){var e=new Gn;return function t(i){var r=i.geometry;if(r.boundingSphere===null)r.computeBoundingSphere();e.copy(r.boundingSphere).applyMatrix4(i.matrixWorld);return this.intersectsSphere(e)}}(),intersectsSprite:function(){var e=new Gn;return function t(i){e.center.set(0,0,0);e.radius=.7071067811865476;e.applyMatrix4(i.matrixWorld);return this.intersectsSphere(e)}}(),intersectsSphere:function(e){var t=this.planes;var i=e.center;var r=-e.radius;for(var n=0;n<6;n++){var a=t[n].distanceToPoint(i);if(a<r){return false}}return true},intersectsBox:function(){var e=new Tt,t=new Tt;return function i(r){var n=this.planes;for(var a=0;a<6;a++){var o=n[a];e.x=o.normal.x>0?r.min.x:r.max.x;t.x=o.normal.x>0?r.max.x:r.min.x;e.y=o.normal.y>0?r.min.y:r.max.y;t.y=o.normal.y>0?r.max.y:r.min.y;e.z=o.normal.z>0?r.min.z:r.max.z;t.z=o.normal.z>0?r.max.z:r.min.z;var s=o.distanceToPoint(e);var l=o.distanceToPoint(t);if(s<0&&l<0){return false}}return true}}(),containsPoint:function(e){var t=this.planes;for(var i=0;i<6;i++){if(t[i].distanceToPoint(e)<0){return false}}return true}});function Un(e,t,i){var r=new Nn,n=new xt,a=new _t,o=new _t(i,i),s=new Tt,l=new Tt,u=1,c=2,f=(u|c)+1,v=new Array(f),g=new Array(f),y={};var b=[new Tt(1,0,0),new Tt(-1,0,0),new Tt(0,0,1),new Tt(0,0,-1),new Tt(0,1,0),new Tt(0,-1,0)];var _=[new Tt(0,1,0),new Tt(0,1,0),new Tt(0,1,0),new Tt(0,1,0),new Tt(0,0,1),new Tt(0,0,-1)];var x=[new Pt,new Pt,new Pt,new Pt,new Pt,new Pt];for(var w=0;w!==f;++w){var T=(w&u)!==0;var M=(w&c)!==0;var S=new In({depthPacking:yt,morphTargets:T,skinning:M});v[w]=S;var E=new Dn({morphTargets:T,skinning:M});g[w]=E}var P=this;this.enabled=false;this.autoUpdate=true;this.needsUpdate=false;this.type=h;this.renderReverseSided=true;this.renderSingleSided=true;this.render=function(t,i,u){if(P.enabled===false)return;if(P.autoUpdate===false&&P.needsUpdate===false)return;if(t.length===0)return;var c=e.context;var h=e.state;h.disable(c.BLEND);h.buffers.color.setClear(1,1,1,1);h.buffers.depth.setTest(true);h.setScissorTest(false);var f;for(var d=0,p=t.length;d<p;d++){var m=t[d];var v=m.shadow;var g=m&&m.isPointLight;if(v===undefined){console.warn("THREE.WebGLShadowMap:",m,"has no shadow.");continue}var y=v.camera;a.copy(v.mapSize);a.min(o);if(g){var w=a.x;var T=a.y;x[0].set(w*2,T,w,T);x[1].set(0,T,w,T);x[2].set(w*3,T,w,T);x[3].set(w,T,w,T);x[4].set(w*3,0,w,T);x[5].set(w,0,w,T);a.x*=4;a.y*=2}if(v.map===null){var M={minFilter:ve,magFilter:ve,format:Ge};v.map=new At(a.x,a.y,M);v.map.texture.name=m.name+".shadowMap";y.updateProjectionMatrix()}if(v.isSpotLightShadow){v.update(m)}var S=v.map;var E=v.matrix;l.setFromMatrixPosition(m.matrixWorld);y.position.copy(l);if(g){f=6;E.makeTranslation(-l.x,-l.y,-l.z)}else{f=1;s.setFromMatrixPosition(m.target.matrixWorld);y.lookAt(s);y.updateMatrixWorld();E.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1);E.multiply(y.projectionMatrix);E.multiply(y.matrixWorldInverse)}e.setRenderTarget(S);e.clear();for(var A=0;A<f;A++){if(g){s.copy(y.position);s.add(b[A]);y.up.copy(_[A]);y.lookAt(s);y.updateMatrixWorld();var L=x[A];h.viewport(L)}n.multiplyMatrices(y.projectionMatrix,y.matrixWorldInverse);r.setFromMatrix(n);C(i,u,y,g)}}P.needsUpdate=false};function A(t,i,r,n,a,o){var s=t.geometry;var l=null;var h=v;var f=t.customDepthMaterial;if(r){h=g;f=t.customDistanceMaterial}if(!f){var b=false;if(i.morphTargets){if(s&&s.isBufferGeometry){b=s.morphAttributes&&s.morphAttributes.position&&s.morphAttributes.position.length>0}else if(s&&s.isGeometry){b=s.morphTargets&&s.morphTargets.length>0}}if(t.isSkinnedMesh&&i.skinning===false){console.warn("THREE.WebGLShadowMap: THREE.SkinnedMesh with material.skinning set to false:",t)}var _=t.isSkinnedMesh&&i.skinning;var x=0;if(b)x|=u;if(_)x|=c;l=h[x]}else{l=f}if(e.localClippingEnabled&&i.clipShadows===true&&i.clippingPlanes.length!==0){var w=l.uuid,T=i.uuid;var M=y[w];if(M===undefined){M={};y[w]=M}var S=M[T];if(S===undefined){S=l.clone();M[T]=S}l=S}l.visible=i.visible;l.wireframe=i.wireframe;var E=i.side;if(P.renderSingleSided&&E==m){E=d}if(P.renderReverseSided){if(E===d)E=p;else if(E===p)E=d}l.side=E;l.clipShadows=i.clipShadows;l.clippingPlanes=i.clippingPlanes;l.clipIntersection=i.clipIntersection;l.wireframeLinewidth=i.wireframeLinewidth;l.linewidth=i.linewidth;if(r&&l.isMeshDistanceMaterial){l.referencePosition.copy(n);l.nearDistance=a;l.farDistance=o}return l}function C(i,n,a,o){if(i.visible===false)return;var s=i.layers.test(n.layers);if(s&&(i.isMesh||i.isLine||i.isPoints)){if(i.castShadow&&(!i.frustumCulled||r.intersectsObject(i))){i.modelViewMatrix.multiplyMatrices(a.matrixWorldInverse,i.matrixWorld);var u=t.update(i);var c=i.material;if(Array.isArray(c)){var h=u.groups;for(var f=0,d=h.length;f<d;f++){var p=h[f];var m=c[p.materialIndex];if(m&&m.visible){var v=A(i,m,o,l,a.near,a.far);e.renderBufferDirect(a,null,u,v,i,p)}}}else if(c.visible){var v=A(i,c,o,l,a.near,a.far);e.renderBufferDirect(a,null,u,v,i,null)}}}var g=i.children;for(var y=0,b=g.length;y<b;y++){C(g[y],n,a,o)}}}function Fn(e){var t={};function i(t,i){var r=t.array;var n=t.dynamic?e.DYNAMIC_DRAW:e.STATIC_DRAW;var a=e.createBuffer();e.bindBuffer(i,a);e.bufferData(i,r,n);t.onUploadCallback();var o=e.FLOAT;if(r instanceof Float32Array){o=e.FLOAT}else if(r instanceof Float64Array){console.warn("THREE.WebGLAttributes: Unsupported data buffer format: Float64Array.")}else if(r instanceof Uint16Array){o=e.UNSIGNED_SHORT}else if(r instanceof Int16Array){o=e.SHORT}else if(r instanceof Uint32Array){o=e.UNSIGNED_INT}else if(r instanceof Int32Array){o=e.INT}else if(r instanceof Int8Array){o=e.BYTE}else if(r instanceof Uint8Array){o=e.UNSIGNED_BYTE}return{buffer:a,type:o,bytesPerElement:r.BYTES_PER_ELEMENT,version:t.version}}function r(t,i,r){var n=i.array;var a=i.updateRange;e.bindBuffer(r,t);if(i.dynamic===false){e.bufferData(r,n,e.STATIC_DRAW)}else if(a.count===-1){e.bufferSubData(r,0,n)}else if(a.count===0){console.error("THREE.WebGLObjects.updateBuffer: dynamic THREE.BufferAttribute marked as needsUpdate but updateRange.count is 0, ensure you are using set methods or updating manually.")}else{e.bufferSubData(r,a.offset*n.BYTES_PER_ELEMENT,n.subarray(a.offset,a.offset+a.count));a.count=-1}}function n(e){if(e.isInterleavedBufferAttribute)e=e.data;return t[e.uuid]}function a(i){if(i.isInterleavedBufferAttribute)i=i.data;var r=t[i.uuid];if(r){e.deleteBuffer(r.buffer);delete t[i.uuid]}}function o(e,n){if(e.isInterleavedBufferAttribute)e=e.data;var a=t[e.uuid];if(a===undefined){t[e.uuid]=i(e,n)}else if(a.version<e.version){r(a.buffer,e,n);a.version=e.version}}return{get:n,remove:a,update:o}}function Hn(e,t,i,r){this._x=e||0;this._y=t||0;this._z=i||0;this._order=r||Hn.DefaultOrder}Hn.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"];Hn.DefaultOrder="XYZ";Object.defineProperties(Hn.prototype,{x:{get:function(){return this._x},set:function(e){this._x=e;this.onChangeCallback()}},y:{get:function(){return this._y},set:function(e){this._y=e;this.onChangeCallback()}},z:{get:function(){return this._z},set:function(e){this._z=e;this.onChangeCallback()}},order:{get:function(){return this._order},set:function(e){this._order=e;this.onChangeCallback()}}});Object.assign(Hn.prototype,{isEuler:true,set:function(e,t,i,r){this._x=e;this._y=t;this._z=i;this._order=r||this._order;this.onChangeCallback();return this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._order)},copy:function(e){this._x=e._x;this._y=e._y;this._z=e._z;this._order=e._order;this.onChangeCallback();return this},setFromRotationMatrix:function(e,t,i){var r=bt.clamp;var n=e.elements;var a=n[0],o=n[4],s=n[8];var l=n[1],u=n[5],c=n[9];var h=n[2],f=n[6],d=n[10];t=t||this._order;if(t==="XYZ"){this._y=Math.asin(r(s,-1,1));if(Math.abs(s)<.99999){this._x=Math.atan2(-c,d);this._z=Math.atan2(-o,a)}else{this._x=Math.atan2(f,u);this._z=0}}else if(t==="YXZ"){this._x=Math.asin(-r(c,-1,1));if(Math.abs(c)<.99999){this._y=Math.atan2(s,d);this._z=Math.atan2(l,u)}else{this._y=Math.atan2(-h,a);this._z=0}}else if(t==="ZXY"){this._x=Math.asin(r(f,-1,1));if(Math.abs(f)<.99999){this._y=Math.atan2(-h,d);this._z=Math.atan2(-o,u)}else{this._y=0;this._z=Math.atan2(l,a)}}else if(t==="ZYX"){this._y=Math.asin(-r(h,-1,1));if(Math.abs(h)<.99999){this._x=Math.atan2(f,d);this._z=Math.atan2(l,a)}else{this._x=0;this._z=Math.atan2(-o,u)}}else if(t==="YZX"){this._z=Math.asin(r(l,-1,1));if(Math.abs(l)<.99999){this._x=Math.atan2(-c,u);this._y=Math.atan2(-h,a)}else{this._x=0;this._y=Math.atan2(s,d)}}else if(t==="XZY"){this._z=Math.asin(-r(o,-1,1));if(Math.abs(o)<.99999){this._x=Math.atan2(f,u);this._y=Math.atan2(s,a)}else{this._x=Math.atan2(-c,d);this._y=0}}else{console.warn("THREE.Euler: .setFromRotationMatrix() given unsupported order: "+t)}this._order=t;if(i!==false)this.onChangeCallback();return this},setFromQuaternion:function(){var e=new xt;return function t(i,r,n){e.makeRotationFromQuaternion(i);return this.setFromRotationMatrix(e,r,n)}}(),setFromVector3:function(e,t){return this.set(e.x,e.y,e.z,t||this._order)},reorder:function(){var e=new wt;return function t(i){e.setFromEuler(this);return this.setFromQuaternion(e,i)}}(),equals:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order},fromArray:function(e){this._x=e[0];this._y=e[1];this._z=e[2];if(e[3]!==undefined)this._order=e[3];this.onChangeCallback();return this},toArray:function(e,t){if(e===undefined)e=[];if(t===undefined)t=0;e[t]=this._x;e[t+1]=this._y;e[t+2]=this._z;e[t+3]=this._order;return e},toVector3:function(e){if(e){return e.set(this._x,this._y,this._z)}else{return new Tt(this._x,this._y,this._z)}},onChange:function(e){this.onChangeCallback=e;return this},onChangeCallback:function(){}});function zn(){this.mask=1|0}Object.assign(zn.prototype,{set:function(e){this.mask=1<<e|0},enable:function(e){this.mask|=1<<e|0},toggle:function(e){this.mask^=1<<e|0},disable:function(e){this.mask&=~(1<<e|0)},test:function(e){return(this.mask&e.mask)!==0}});var Vn=0;function jn(){Object.defineProperty(this,"id",{value:Vn++});this.uuid=bt.generateUUID();this.name="";this.type="Object3D";this.parent=null;this.children=[];this.up=jn.DefaultUp.clone();var e=new Tt;var t=new Hn;var i=new wt;var r=new Tt(1,1,1);function n(){i.setFromEuler(t,false)}function a(){t.setFromQuaternion(i,undefined,false)}t.onChange(n);i.onChange(a);Object.defineProperties(this,{position:{enumerable:true,value:e},rotation:{enumerable:true,value:t},quaternion:{enumerable:true,value:i},scale:{enumerable:true,value:r},modelViewMatrix:{value:new xt},normalMatrix:{value:new Mt}});this.matrix=new xt;this.matrixWorld=new xt;this.matrixAutoUpdate=jn.DefaultMatrixAutoUpdate;this.matrixWorldNeedsUpdate=false;this.layers=new zn;this.visible=true;this.castShadow=false;this.receiveShadow=false;this.frustumCulled=true;this.renderOrder=0;this.userData={}}jn.DefaultUp=new Tt(0,1,0);jn.DefaultMatrixAutoUpdate=true;Object.assign(jn.prototype,t.prototype,{isObject3D:true,onBeforeRender:function(){},onAfterRender:function(){},applyMatrix:function(e){this.matrix.multiplyMatrices(e,this.matrix);this.matrix.decompose(this.position,this.quaternion,this.scale)},applyQuaternion:function(e){this.quaternion.premultiply(e);return this},setRotationFromAxisAngle:function(e,t){this.quaternion.setFromAxisAngle(e,t)},setRotationFromEuler:function(e){this.quaternion.setFromEuler(e,true)},setRotationFromMatrix:function(e){this.quaternion.setFromRotationMatrix(e)},setRotationFromQuaternion:function(e){this.quaternion.copy(e)},rotateOnAxis:function(){var e=new wt;return function t(i,r){e.setFromAxisAngle(i,r);this.quaternion.multiply(e);return this}}(),rotateOnWorldAxis:function(){var e=new wt;return function t(i,r){e.setFromAxisAngle(i,r);this.quaternion.premultiply(e);return this}}(),rotateX:function(){var e=new Tt(1,0,0);return function t(i){return this.rotateOnAxis(e,i)}}(),rotateY:function(){var e=new Tt(0,1,0);return function t(i){return this.rotateOnAxis(e,i)}}(),rotateZ:function(){var e=new Tt(0,0,1);return function t(i){return this.rotateOnAxis(e,i)}}(),translateOnAxis:function(){var e=new Tt;return function t(i,r){e.copy(i).applyQuaternion(this.quaternion);this.position.add(e.multiplyScalar(r));return this}}(),translateX:function(){var e=new Tt(1,0,0);return function t(i){return this.translateOnAxis(e,i)}}(),translateY:function(){var e=new Tt(0,1,0);return function t(i){return this.translateOnAxis(e,i)}}(),translateZ:function(){var e=new Tt(0,0,1);return function t(i){return this.translateOnAxis(e,i)}}(),localToWorld:function(e){return e.applyMatrix4(this.matrixWorld)},worldToLocal:function(){var e=new xt;return function t(i){return i.applyMatrix4(e.getInverse(this.matrixWorld))}}(),lookAt:function(){var e=new xt;var t=new Tt;return function i(r,n,a){if(r.isVector3){t.copy(r)}else{t.set(r,n,a)}if(this.isCamera){e.lookAt(this.position,t,this.up)}else{e.lookAt(t,this.position,this.up)}this.quaternion.setFromRotationMatrix(e)}}(),add:function(e){if(arguments.length>1){for(var t=0;t<arguments.length;t++){this.add(arguments[t])}return this}if(e===this){console.error("THREE.Object3D.add: object can't be added as a child of itself.",e);return this}if(e&&e.isObject3D){if(e.parent!==null){e.parent.remove(e)}e.parent=this;e.dispatchEvent({type:"added"});this.children.push(e)}else{console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e)}return this},remove:function(e){if(arguments.length>1){for(var t=0;t<arguments.length;t++){this.remove(arguments[t])}return this}var i=this.children.indexOf(e);if(i!==-1){e.parent=null;e.dispatchEvent({type:"removed"});this.children.splice(i,1)}return this},getObjectById:function(e){return this.getObjectByProperty("id",e)},getObjectByName:function(e){return this.getObjectByProperty("name",e)},getObjectByProperty:function(e,t){if(this[e]===t)return this;for(var i=0,r=this.children.length;i<r;i++){var n=this.children[i]
;var a=n.getObjectByProperty(e,t);if(a!==undefined){return a}}return undefined},getWorldPosition:function(e){var t=e||new Tt;this.updateMatrixWorld(true);return t.setFromMatrixPosition(this.matrixWorld)},getWorldQuaternion:function(){var e=new Tt;var t=new Tt;return function i(r){var n=r||new wt;this.updateMatrixWorld(true);this.matrixWorld.decompose(e,n,t);return n}}(),getWorldRotation:function(){var e=new wt;return function t(i){var r=i||new Hn;this.getWorldQuaternion(e);return r.setFromQuaternion(e,this.rotation.order,false)}}(),getWorldScale:function(){var e=new Tt;var t=new wt;return function i(r){var n=r||new Tt;this.updateMatrixWorld(true);this.matrixWorld.decompose(e,t,n);return n}}(),getWorldDirection:function(){var e=new wt;return function t(i){var r=i||new Tt;this.getWorldQuaternion(e);return r.set(0,0,1).applyQuaternion(e)}}(),raycast:function(){},traverse:function(e){e(this);var t=this.children;for(var i=0,r=t.length;i<r;i++){t[i].traverse(e)}},traverseVisible:function(e){if(this.visible===false)return;e(this);var t=this.children;for(var i=0,r=t.length;i<r;i++){t[i].traverseVisible(e)}},traverseAncestors:function(e){var t=this.parent;if(t!==null){e(t);t.traverseAncestors(e)}},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale);this.matrixWorldNeedsUpdate=true},updateMatrixWorld:function(e){if(this.matrixAutoUpdate)this.updateMatrix();if(this.matrixWorldNeedsUpdate||e){if(this.parent===null){this.matrixWorld.copy(this.matrix)}else{this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)}this.matrixWorldNeedsUpdate=false;e=true}var t=this.children;for(var i=0,r=t.length;i<r;i++){t[i].updateMatrixWorld(e)}},toJSON:function(e){var t=e===undefined||typeof e==="string";var i={};if(t){e={geometries:{},materials:{},textures:{},images:{}};i.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"}}var r={};r.uuid=this.uuid;r.type=this.type;if(this.name!=="")r.name=this.name;if(this.castShadow===true)r.castShadow=true;if(this.receiveShadow===true)r.receiveShadow=true;if(this.visible===false)r.visible=false;if(JSON.stringify(this.userData)!=="{}")r.userData=this.userData;r.matrix=this.matrix.toArray();function n(t,i){if(t[i.uuid]===undefined){t[i.uuid]=i.toJSON(e)}return i.uuid}if(this.geometry!==undefined){r.geometry=n(e.geometries,this.geometry)}if(this.material!==undefined){if(Array.isArray(this.material)){var a=[];for(var o=0,s=this.material.length;o<s;o++){a.push(n(e.materials,this.material[o]))}r.material=a}else{r.material=n(e.materials,this.material)}}if(this.children.length>0){r.children=[];for(var o=0;o<this.children.length;o++){r.children.push(this.children[o].toJSON(e).object)}}if(t){var l=f(e.geometries);var u=f(e.materials);var c=f(e.textures);var h=f(e.images);if(l.length>0)i.geometries=l;if(u.length>0)i.materials=u;if(c.length>0)i.textures=c;if(h.length>0)i.images=h}i.object=r;return i;function f(e){var t=[];for(var i in e){var r=e[i];delete r.metadata;t.push(r)}return t}},clone:function(e){return(new this.constructor).copy(this,e)},copy:function(e,t){if(t===undefined)t=true;this.name=e.name;this.up.copy(e.up);this.position.copy(e.position);this.quaternion.copy(e.quaternion);this.scale.copy(e.scale);this.matrix.copy(e.matrix);this.matrixWorld.copy(e.matrixWorld);this.matrixAutoUpdate=e.matrixAutoUpdate;this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate;this.layers.mask=e.layers.mask;this.visible=e.visible;this.castShadow=e.castShadow;this.receiveShadow=e.receiveShadow;this.frustumCulled=e.frustumCulled;this.renderOrder=e.renderOrder;this.userData=JSON.parse(JSON.stringify(e.userData));if(t===true){for(var i=0;i<e.children.length;i++){var r=e.children[i];this.add(r.clone())}}return this}});function Wn(){jn.call(this);this.type="Camera";this.matrixWorldInverse=new xt;this.projectionMatrix=new xt}Wn.prototype=Object.assign(Object.create(jn.prototype),{constructor:Wn,isCamera:true,copy:function(e,t){jn.prototype.copy.call(this,e,t);this.matrixWorldInverse.copy(e.matrixWorldInverse);this.projectionMatrix.copy(e.projectionMatrix);return this},getWorldDirection:function(){var e=new wt;return function t(i){var r=i||new Tt;this.getWorldQuaternion(e);return r.set(0,0,-1).applyQuaternion(e)}}(),updateMatrixWorld:function(e){jn.prototype.updateMatrixWorld.call(this,e);this.matrixWorldInverse.getInverse(this.matrixWorld)},clone:function(){return(new this.constructor).copy(this)}});function Xn(e,t,i,r,n,a){Wn.call(this);this.type="OrthographicCamera";this.zoom=1;this.view=null;this.left=e;this.right=t;this.top=i;this.bottom=r;this.near=n!==undefined?n:.1;this.far=a!==undefined?a:2e3;this.updateProjectionMatrix()}Xn.prototype=Object.assign(Object.create(Wn.prototype),{constructor:Xn,isOrthographicCamera:true,copy:function(e,t){Wn.prototype.copy.call(this,e,t);this.left=e.left;this.right=e.right;this.top=e.top;this.bottom=e.bottom;this.near=e.near;this.far=e.far;this.zoom=e.zoom;this.view=e.view===null?null:Object.assign({},e.view);return this},setViewOffset:function(e,t,i,r,n,a){if(this.view===null){this.view={enabled:true,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}}this.view.enabled=true;this.view.fullWidth=e;this.view.fullHeight=t;this.view.offsetX=i;this.view.offsetY=r;this.view.width=n;this.view.height=a;this.updateProjectionMatrix()},clearViewOffset:function(){if(this.view!==null){this.view.enabled=false}this.updateProjectionMatrix()},updateProjectionMatrix:function(){var e=(this.right-this.left)/(2*this.zoom);var t=(this.top-this.bottom)/(2*this.zoom);var i=(this.right+this.left)/2;var r=(this.top+this.bottom)/2;var n=i-e;var a=i+e;var o=r+t;var s=r-t;if(this.view!==null&&this.view.enabled){var l=this.zoom/(this.view.width/this.view.fullWidth);var u=this.zoom/(this.view.height/this.view.fullHeight);var c=(this.right-this.left)/this.view.width;var h=(this.top-this.bottom)/this.view.height;n+=c*(this.view.offsetX/l);a=n+c*(this.view.width/l);o-=h*(this.view.offsetY/u);s=o-h*(this.view.height/u)}this.projectionMatrix.makeOrthographic(n,a,o,s,this.near,this.far)},toJSON:function(e){var t=jn.prototype.toJSON.call(this,e);t.object.zoom=this.zoom;t.object.left=this.left;t.object.right=this.right;t.object.top=this.top;t.object.bottom=this.bottom;t.object.near=this.near;t.object.far=this.far;if(this.view!==null)t.object.view=Object.assign({},this.view);return t}});function Yn(e,t,i,r,n,a){this.a=e;this.b=t;this.c=i;this.normal=r&&r.isVector3?r:new Tt;this.vertexNormals=Array.isArray(r)?r:[];this.color=n&&n.isColor?n:new _i;this.vertexColors=Array.isArray(n)?n:[];this.materialIndex=a!==undefined?a:0}Object.assign(Yn.prototype,{clone:function(){return(new this.constructor).copy(this)},copy:function(e){this.a=e.a;this.b=e.b;this.c=e.c;this.normal.copy(e.normal);this.color.copy(e.color);this.materialIndex=e.materialIndex;for(var t=0,i=e.vertexNormals.length;t<i;t++){this.vertexNormals[t]=e.vertexNormals[t].clone()}for(var t=0,i=e.vertexColors.length;t<i;t++){this.vertexColors[t]=e.vertexColors[t].clone()}return this}});var qn=0;function Zn(){Object.defineProperty(this,"id",{value:qn+=2});this.uuid=bt.generateUUID();this.name="";this.type="Geometry";this.vertices=[];this.colors=[];this.faces=[];this.faceVertexUvs=[[]];this.morphTargets=[];this.morphNormals=[];this.skinWeights=[];this.skinIndices=[];this.lineDistances=[];this.boundingBox=null;this.boundingSphere=null;this.elementsNeedUpdate=false;this.verticesNeedUpdate=false;this.uvsNeedUpdate=false;this.normalsNeedUpdate=false;this.colorsNeedUpdate=false;this.lineDistancesNeedUpdate=false;this.groupsNeedUpdate=false}Object.assign(Zn.prototype,t.prototype,{isGeometry:true,applyMatrix:function(e){var t=(new Mt).getNormalMatrix(e);for(var i=0,r=this.vertices.length;i<r;i++){var n=this.vertices[i];n.applyMatrix4(e)}for(var i=0,r=this.faces.length;i<r;i++){var a=this.faces[i];a.normal.applyMatrix3(t).normalize();for(var o=0,s=a.vertexNormals.length;o<s;o++){a.vertexNormals[o].applyMatrix3(t).normalize()}}if(this.boundingBox!==null){this.computeBoundingBox()}if(this.boundingSphere!==null){this.computeBoundingSphere()}this.verticesNeedUpdate=true;this.normalsNeedUpdate=true;return this},rotateX:function(){var e=new xt;return function t(i){e.makeRotationX(i);this.applyMatrix(e);return this}}(),rotateY:function(){var e=new xt;return function t(i){e.makeRotationY(i);this.applyMatrix(e);return this}}(),rotateZ:function(){var e=new xt;return function t(i){e.makeRotationZ(i);this.applyMatrix(e);return this}}(),translate:function(){var e=new xt;return function t(i,r,n){e.makeTranslation(i,r,n);this.applyMatrix(e);return this}}(),scale:function(){var e=new xt;return function t(i,r,n){e.makeScale(i,r,n);this.applyMatrix(e);return this}}(),lookAt:function(){var e=new jn;return function t(i){e.lookAt(i);e.updateMatrix();this.applyMatrix(e.matrix)}}(),fromBufferGeometry:function(e){var t=this;var i=e.index!==null?e.index.array:undefined;var r=e.attributes;var n=r.position.array;var a=r.normal!==undefined?r.normal.array:undefined;var o=r.color!==undefined?r.color.array:undefined;var s=r.uv!==undefined?r.uv.array:undefined;var l=r.uv2!==undefined?r.uv2.array:undefined;if(l!==undefined)this.faceVertexUvs[1]=[];var u=[];var c=[];var h=[];for(var f=0,d=0;f<n.length;f+=3,d+=2){t.vertices.push(new Tt(n[f],n[f+1],n[f+2]));if(a!==undefined){u.push(new Tt(a[f],a[f+1],a[f+2]))}if(o!==undefined){t.colors.push(new _i(o[f],o[f+1],o[f+2]))}if(s!==undefined){c.push(new _t(s[d],s[d+1]))}if(l!==undefined){h.push(new _t(l[d],l[d+1]))}}function p(e,i,r,n){var f=a!==undefined?[u[e].clone(),u[i].clone(),u[r].clone()]:[];var d=o!==undefined?[t.colors[e].clone(),t.colors[i].clone(),t.colors[r].clone()]:[];var p=new Yn(e,i,r,f,d,n);t.faces.push(p);if(s!==undefined){t.faceVertexUvs[0].push([c[e].clone(),c[i].clone(),c[r].clone()])}if(l!==undefined){t.faceVertexUvs[1].push([h[e].clone(),h[i].clone(),h[r].clone()])}}var m=e.groups;if(m.length>0){for(var f=0;f<m.length;f++){var v=m[f];var g=v.start;var y=v.count;for(var d=g,b=g+y;d<b;d+=3){if(i!==undefined){p(i[d],i[d+1],i[d+2],v.materialIndex)}else{p(d,d+1,d+2,v.materialIndex)}}}}else{if(i!==undefined){for(var f=0;f<i.length;f+=3){p(i[f],i[f+1],i[f+2])}}else{for(var f=0;f<n.length/3;f+=3){p(f,f+1,f+2)}}}this.computeFaceNormals();if(e.boundingBox!==null){this.boundingBox=e.boundingBox.clone()}if(e.boundingSphere!==null){this.boundingSphere=e.boundingSphere.clone()}return this},center:function(){this.computeBoundingBox();var e=this.boundingBox.getCenter().negate();this.translate(e.x,e.y,e.z);return e},normalize:function(){this.computeBoundingSphere();var e=this.boundingSphere.center;var t=this.boundingSphere.radius;var i=t===0?1:1/t;var r=new xt;r.set(i,0,0,-i*e.x,0,i,0,-i*e.y,0,0,i,-i*e.z,0,0,0,1);this.applyMatrix(r);return this},computeFaceNormals:function(){var e=new Tt,t=new Tt;for(var i=0,r=this.faces.length;i<r;i++){var n=this.faces[i];var a=this.vertices[n.a];var o=this.vertices[n.b];var s=this.vertices[n.c];e.subVectors(s,o);t.subVectors(a,o);e.cross(t);e.normalize();n.normal.copy(e)}},computeVertexNormals:function(e){if(e===undefined)e=true;var t,i,r,n,a,o;o=new Array(this.vertices.length);for(t=0,i=this.vertices.length;t<i;t++){o[t]=new Tt}if(e){var s,l,u;var c=new Tt,h=new Tt;for(r=0,n=this.faces.length;r<n;r++){a=this.faces[r];s=this.vertices[a.a];l=this.vertices[a.b];u=this.vertices[a.c];c.subVectors(u,l);h.subVectors(s,l);c.cross(h);o[a.a].add(c);o[a.b].add(c);o[a.c].add(c)}}else{this.computeFaceNormals();for(r=0,n=this.faces.length;r<n;r++){a=this.faces[r];o[a.a].add(a.normal);o[a.b].add(a.normal);o[a.c].add(a.normal)}}for(t=0,i=this.vertices.length;t<i;t++){o[t].normalize()}for(r=0,n=this.faces.length;r<n;r++){a=this.faces[r];var f=a.vertexNormals;if(f.length===3){f[0].copy(o[a.a]);f[1].copy(o[a.b]);f[2].copy(o[a.c])}else{f[0]=o[a.a].clone();f[1]=o[a.b].clone();f[2]=o[a.c].clone()}}if(this.faces.length>0){this.normalsNeedUpdate=true}},computeFlatVertexNormals:function(){var e,t,i;this.computeFaceNormals();for(e=0,t=this.faces.length;e<t;e++){i=this.faces[e];var r=i.vertexNormals;if(r.length===3){r[0].copy(i.normal);r[1].copy(i.normal);r[2].copy(i.normal)}else{r[0]=i.normal.clone();r[1]=i.normal.clone();r[2]=i.normal.clone()}}if(this.faces.length>0){this.normalsNeedUpdate=true}},computeMorphNormals:function(){var e,t,i,r,n;for(i=0,r=this.faces.length;i<r;i++){n=this.faces[i];if(!n.__originalFaceNormal){n.__originalFaceNormal=n.normal.clone()}else{n.__originalFaceNormal.copy(n.normal)}if(!n.__originalVertexNormals)n.__originalVertexNormals=[];for(e=0,t=n.vertexNormals.length;e<t;e++){if(!n.__originalVertexNormals[e]){n.__originalVertexNormals[e]=n.vertexNormals[e].clone()}else{n.__originalVertexNormals[e].copy(n.vertexNormals[e])}}}var a=new Zn;a.faces=this.faces;for(e=0,t=this.morphTargets.length;e<t;e++){if(!this.morphNormals[e]){this.morphNormals[e]={};this.morphNormals[e].faceNormals=[];this.morphNormals[e].vertexNormals=[];var o=this.morphNormals[e].faceNormals;var s=this.morphNormals[e].vertexNormals;var l,u;for(i=0,r=this.faces.length;i<r;i++){l=new Tt;u={a:new Tt,b:new Tt,c:new Tt};o.push(l);s.push(u)}}var c=this.morphNormals[e];a.vertices=this.morphTargets[e].vertices;a.computeFaceNormals();a.computeVertexNormals();var l,u;for(i=0,r=this.faces.length;i<r;i++){n=this.faces[i];l=c.faceNormals[i];u=c.vertexNormals[i];l.copy(n.normal);u.a.copy(n.vertexNormals[0]);u.b.copy(n.vertexNormals[1]);u.c.copy(n.vertexNormals[2])}}for(i=0,r=this.faces.length;i<r;i++){n=this.faces[i];n.normal=n.__originalFaceNormal;n.vertexNormals=n.__originalVertexNormals}},computeLineDistances:function(){var e=0;var t=this.vertices;for(var i=0,r=t.length;i<r;i++){if(i>0){e+=t[i].distanceTo(t[i-1])}this.lineDistances[i]=e}},computeBoundingBox:function(){if(this.boundingBox===null){this.boundingBox=new Bn}this.boundingBox.setFromPoints(this.vertices)},computeBoundingSphere:function(){if(this.boundingSphere===null){this.boundingSphere=new Gn}this.boundingSphere.setFromPoints(this.vertices)},merge:function(e,t,i){if(!(e&&e.isGeometry)){console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",e);return}var r,n=this.vertices.length,a=this.vertices,o=e.vertices,s=this.faces,l=e.faces,u=this.faceVertexUvs[0],c=e.faceVertexUvs[0],h=this.colors,f=e.colors;if(i===undefined)i=0;if(t!==undefined){r=(new Mt).getNormalMatrix(t)}for(var d=0,p=o.length;d<p;d++){var m=o[d];var v=m.clone();if(t!==undefined)v.applyMatrix4(t);a.push(v)}for(var d=0,p=f.length;d<p;d++){h.push(f[d].clone())}for(d=0,p=l.length;d<p;d++){var g=l[d],y,b,_,x=g.vertexNormals,w=g.vertexColors;y=new Yn(g.a+n,g.b+n,g.c+n);y.normal.copy(g.normal);if(r!==undefined){y.normal.applyMatrix3(r).normalize()}for(var T=0,M=x.length;T<M;T++){b=x[T].clone();if(r!==undefined){b.applyMatrix3(r).normalize()}y.vertexNormals.push(b)}y.color.copy(g.color);for(var T=0,M=w.length;T<M;T++){_=w[T];y.vertexColors.push(_.clone())}y.materialIndex=g.materialIndex+i;s.push(y)}for(d=0,p=c.length;d<p;d++){var S=c[d],E=[];if(S===undefined){continue}for(var T=0,M=S.length;T<M;T++){E.push(S[T].clone())}u.push(E)}},mergeMesh:function(e){if(!(e&&e.isMesh)){console.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.",e);return}e.matrixAutoUpdate&&e.updateMatrix();this.merge(e.geometry,e.matrix)},mergeVertices:function(){var e={};var t=[],i=[];var r,n;var a=4;var o=Math.pow(10,a);var s,l,u;var c,h,f;for(s=0,l=this.vertices.length;s<l;s++){r=this.vertices[s];n=Math.round(r.x*o)+"_"+Math.round(r.y*o)+"_"+Math.round(r.z*o);if(e[n]===undefined){e[n]=s;t.push(this.vertices[s]);i[s]=t.length-1}else{i[s]=i[e[n]]}}var d=[];for(s=0,l=this.faces.length;s<l;s++){u=this.faces[s];u.a=i[u.a];u.b=i[u.b];u.c=i[u.c];c=[u.a,u.b,u.c];for(var p=0;p<3;p++){if(c[p]===c[(p+1)%3]){d.push(s);break}}}for(s=d.length-1;s>=0;s--){var m=d[s];this.faces.splice(m,1);for(h=0,f=this.faceVertexUvs.length;h<f;h++){this.faceVertexUvs[h].splice(m,1)}}var v=this.vertices.length-t.length;this.vertices=t;return v},setFromPoints:function(e){this.vertices=[];for(var t=0,i=e.length;t<i;t++){var r=e[t];this.vertices.push(new Tt(r.x,r.y,r.z||0))}return this},sortFacesByMaterialIndex:function(){var e=this.faces;var t=e.length;for(var i=0;i<t;i++){e[i]._id=i}function r(e,t){return e.materialIndex-t.materialIndex}e.sort(r);var n=this.faceVertexUvs[0];var a=this.faceVertexUvs[1];var o,s;if(n&&n.length===t)o=[];if(a&&a.length===t)s=[];for(var i=0;i<t;i++){var l=e[i]._id;if(o)o.push(n[l]);if(s)s.push(a[l])}if(o)this.faceVertexUvs[0]=o;if(s)this.faceVertexUvs[1]=s},toJSON:function(){var e={metadata:{version:4.5,type:"Geometry",generator:"Geometry.toJSON"}};e.uuid=this.uuid;e.type=this.type;if(this.name!=="")e.name=this.name;if(this.parameters!==undefined){var t=this.parameters;for(var i in t){if(t[i]!==undefined)e[i]=t[i]}return e}var r=[];for(var n=0;n<this.vertices.length;n++){var a=this.vertices[n];r.push(a.x,a.y,a.z)}var o=[];var s=[];var l={};var u=[];var c={};var h=[];var f={};for(var n=0;n<this.faces.length;n++){var d=this.faces[n];var p=true;var m=false;var v=this.faceVertexUvs[0][n]!==undefined;var g=d.normal.length()>0;var y=d.vertexNormals.length>0;var b=d.color.r!==1||d.color.g!==1||d.color.b!==1;var _=d.vertexColors.length>0;var x=0;x=S(x,0,0);x=S(x,1,p);x=S(x,2,m);x=S(x,3,v);x=S(x,4,g);x=S(x,5,y);x=S(x,6,b);x=S(x,7,_);o.push(x);o.push(d.a,d.b,d.c);o.push(d.materialIndex);if(v){var w=this.faceVertexUvs[0][n];o.push(A(w[0]),A(w[1]),A(w[2]))}if(g){o.push(E(d.normal))}if(y){var T=d.vertexNormals;o.push(E(T[0]),E(T[1]),E(T[2]))}if(b){o.push(P(d.color))}if(_){var M=d.vertexColors;o.push(P(M[0]),P(M[1]),P(M[2]))}}function S(e,t,i){return i?e|1<<t:e&~(1<<t)}function E(e){var t=e.x.toString()+e.y.toString()+e.z.toString();if(l[t]!==undefined){return l[t]}l[t]=s.length/3;s.push(e.x,e.y,e.z);return l[t]}function P(e){var t=e.r.toString()+e.g.toString()+e.b.toString();if(c[t]!==undefined){return c[t]}c[t]=u.length;u.push(e.getHex());return c[t]}function A(e){var t=e.x.toString()+e.y.toString();if(f[t]!==undefined){return f[t]}f[t]=h.length/2;h.push(e.x,e.y);return f[t]}e.data={};e.data.vertices=r;e.data.normals=s;if(u.length>0)e.data.colors=u;if(h.length>0)e.data.uvs=[h];e.data.faces=o;return e},clone:function(){return(new Zn).copy(this)},copy:function(e){var t,i,r,n,a,o;this.vertices=[];this.colors=[];this.faces=[];this.faceVertexUvs=[[]];this.morphTargets=[];this.morphNormals=[];this.skinWeights=[];this.skinIndices=[];this.lineDistances=[];this.boundingBox=null;this.boundingSphere=null;this.name=e.name;var s=e.vertices;for(t=0,i=s.length;t<i;t++){this.vertices.push(s[t].clone())}var l=e.colors;for(t=0,i=l.length;t<i;t++){this.colors.push(l[t].clone())}var u=e.faces;for(t=0,i=u.length;t<i;t++){this.faces.push(u[t].clone())}for(t=0,i=e.faceVertexUvs.length;t<i;t++){var c=e.faceVertexUvs[t];if(this.faceVertexUvs[t]===undefined){this.faceVertexUvs[t]=[]}for(r=0,n=c.length;r<n;r++){var h=c[r],f=[];for(a=0,o=h.length;a<o;a++){var d=h[a];f.push(d.clone())}this.faceVertexUvs[t].push(f)}}var p=e.morphTargets;for(t=0,i=p.length;t<i;t++){var m={};m.name=p[t].name;if(p[t].vertices!==undefined){m.vertices=[];for(r=0,n=p[t].vertices.length;r<n;r++){m.vertices.push(p[t].vertices[r].clone())}}if(p[t].normals!==undefined){m.normals=[];for(r=0,n=p[t].normals.length;r<n;r++){m.normals.push(p[t].normals[r].clone())}}this.morphTargets.push(m)}var v=e.morphNormals;for(t=0,i=v.length;t<i;t++){var g={};if(v[t].vertexNormals!==undefined){g.vertexNormals=[];for(r=0,n=v[t].vertexNormals.length;r<n;r++){var y=v[t].vertexNormals[r];var b={};b.a=y.a.clone();b.b=y.b.clone();b.c=y.c.clone();g.vertexNormals.push(b)}}if(v[t].faceNormals!==undefined){g.faceNormals=[];for(r=0,n=v[t].faceNormals.length;r<n;r++){g.faceNormals.push(v[t].faceNormals[r].clone())}}this.morphNormals.push(g)}var _=e.skinWeights;for(t=0,i=_.length;t<i;t++){this.skinWeights.push(_[t].clone())}var x=e.skinIndices;for(t=0,i=x.length;t<i;t++){this.skinIndices.push(x[t].clone())}var w=e.lineDistances;for(t=0,i=w.length;t<i;t++){this.lineDistances.push(w[t])}var T=e.boundingBox;if(T!==null){this.boundingBox=T.clone()}var M=e.boundingSphere;if(M!==null){this.boundingSphere=M.clone()}this.elementsNeedUpdate=e.elementsNeedUpdate;this.verticesNeedUpdate=e.verticesNeedUpdate;this.uvsNeedUpdate=e.uvsNeedUpdate;this.normalsNeedUpdate=e.normalsNeedUpdate;this.colorsNeedUpdate=e.colorsNeedUpdate;this.lineDistancesNeedUpdate=e.lineDistancesNeedUpdate;this.groupsNeedUpdate=e.groupsNeedUpdate;return this},dispose:function(){this.dispatchEvent({type:"dispose"})}});function Kn(e,t,i){if(Array.isArray(e)){throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.")}this.uuid=bt.generateUUID();this.name="";this.array=e;this.itemSize=t;this.count=e!==undefined?e.length/t:0;this.normalized=i===true;this.dynamic=false;this.updateRange={offset:0,count:-1};this.onUploadCallback=function(){};this.version=0}Object.defineProperty(Kn.prototype,"needsUpdate",{set:function(e){if(e===true)this.version++}});Object.assign(Kn.prototype,{isBufferAttribute:true,setArray:function(e){if(Array.isArray(e)){throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.")}this.count=e!==undefined?e.length/this.itemSize:0;this.array=e},setDynamic:function(e){this.dynamic=e;return this},copy:function(e){this.array=new e.array.constructor(e.array);this.itemSize=e.itemSize;this.count=e.count;this.normalized=e.normalized;this.dynamic=e.dynamic;return this},copyAt:function(e,t,i){e*=this.itemSize;i*=t.itemSize;for(var r=0,n=this.itemSize;r<n;r++){this.array[e+r]=t.array[i+r]}return this},copyArray:function(e){this.array.set(e);return this},copyColorsArray:function(e){var t=this.array,i=0;for(var r=0,n=e.length;r<n;r++){var a=e[r];if(a===undefined){console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",r);a=new _i}t[i++]=a.r;t[i++]=a.g;t[i++]=a.b}return this},copyIndicesArray:function(e){var t=this.array,i=0;for(var r=0,n=e.length;r<n;r++){var a=e[r];t[i++]=a.a;t[i++]=a.b;t[i++]=a.c}return this},copyVector2sArray:function(e){var t=this.array,i=0;for(var r=0,n=e.length;r<n;r++){var a=e[r];if(a===undefined){console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",r);a=new _t}t[i++]=a.x;t[i++]=a.y}return this},copyVector3sArray:function(e){var t=this.array,i=0;for(var r=0,n=e.length;r<n;r++){var a=e[r];if(a===undefined){console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",r);a=new Tt}t[i++]=a.x;t[i++]=a.y;t[i++]=a.z}return this},copyVector4sArray:function(e){var t=this.array,i=0;for(var r=0,n=e.length;r<n;r++){var a=e[r];if(a===undefined){console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",r);a=new Pt}t[i++]=a.x;t[i++]=a.y;t[i++]=a.z;t[i++]=a.w}return this},set:function(e,t){if(t===undefined)t=0;this.array.set(e,t);return this},getX:function(e){return this.array[e*this.itemSize]},setX:function(e,t){this.array[e*this.itemSize]=t;return this},getY:function(e){return this.array[e*this.itemSize+1]},setY:function(e,t){this.array[e*this.itemSize+1]=t;return this},getZ:function(e){return this.array[e*this.itemSize+2]},setZ:function(e,t){this.array[e*this.itemSize+2]=t;return this},getW:function(e){return this.array[e*this.itemSize+3]},setW:function(e,t){this.array[e*this.itemSize+3]=t;return this},setXY:function(e,t,i){e*=this.itemSize;this.array[e+0]=t;this.array[e+1]=i;return this},setXYZ:function(e,t,i,r){e*=this.itemSize;this.array[e+0]=t;this.array[e+1]=i;this.array[e+2]=r;return this},setXYZW:function(e,t,i,r,n){e*=this.itemSize;this.array[e+0]=t;this.array[e+1]=i;this.array[e+2]=r;this.array[e+3]=n;return this},onUpload:function(e){this.onUploadCallback=e;return this},clone:function(){return new this.constructor(this.array,this.itemSize).copy(this)}});function $n(e,t,i){Kn.call(this,new Int8Array(e),t,i)}$n.prototype=Object.create(Kn.prototype);$n.prototype.constructor=$n;function Qn(e,t,i){Kn.call(this,new Uint8Array(e),t,i)}Qn.prototype=Object.create(Kn.prototype);Qn.prototype.constructor=Qn;function Jn(e,t,i){Kn.call(this,new Uint8ClampedArray(e),t,i)}Jn.prototype=Object.create(Kn.prototype);Jn.prototype.constructor=Jn;function ea(e,t,i){Kn.call(this,new Int16Array(e),t,i)}ea.prototype=Object.create(Kn.prototype);ea.prototype.constructor=ea;function ta(e,t,i){Kn.call(this,new Uint16Array(e),t,i)}ta.prototype=Object.create(Kn.prototype);ta.prototype.constructor=ta;function ia(e,t,i){Kn.call(this,new Int32Array(e),t,i)}ia.prototype=Object.create(Kn.prototype);ia.prototype.constructor=ia;function ra(e,t,i){Kn.call(this,new Uint32Array(e),t,i)}ra.prototype=Object.create(Kn.prototype);ra.prototype.constructor=ra;function na(e,t,i){Kn.call(this,new Float32Array(e),t,i)}na.prototype=Object.create(Kn.prototype);na.prototype.constructor=na;function aa(e,t,i){Kn.call(this,new Float64Array(e),t,i)}aa.prototype=Object.create(Kn.prototype);aa.prototype.constructor=aa;function oa(){this.indices=[];this.vertices=[];this.normals=[];this.colors=[];this.uvs=[];this.uvs2=[];this.groups=[];this.morphTargets={};this.skinWeights=[];this.skinIndices=[];this.boundingBox=null;this.boundingSphere=null;this.verticesNeedUpdate=false;this.normalsNeedUpdate=false;this.colorsNeedUpdate=false;this.uvsNeedUpdate=false;this.groupsNeedUpdate=false}Object.assign(oa.prototype,{computeGroups:function(e){var t;var i=[];var r=undefined;var n=e.faces;for(var a=0;a<n.length;a++){var o=n[a];if(o.materialIndex!==r){r=o.materialIndex;if(t!==undefined){t.count=a*3-t.start;i.push(t)}t={start:a*3,materialIndex:r}}}if(t!==undefined){t.count=a*3-t.start;i.push(t)}this.groups=i},fromGeometry:function(e){var t=e.faces;var i=e.vertices;var r=e.faceVertexUvs;var n=r[0]&&r[0].length>0;var a=r[1]&&r[1].length>0;var o=e.morphTargets;var s=o.length;var l;if(s>0){l=[];for(var u=0;u<s;u++){l[u]=[]}this.morphTargets.position=l}var c=e.morphNormals;var h=c.length;var f;if(h>0){f=[];for(var u=0;u<h;u++){f[u]=[]}this.morphTargets.normal=f}var d=e.skinIndices;var p=e.skinWeights;var m=d.length===i.length;var v=p.length===i.length;for(var u=0;u<t.length;u++){var g=t[u];this.vertices.push(i[g.a],i[g.b],i[g.c]);var y=g.vertexNormals;if(y.length===3){this.normals.push(y[0],y[1],y[2])}else{var b=g.normal;this.normals.push(b,b,b)}var _=g.vertexColors;if(_.length===3){this.colors.push(_[0],_[1],_[2])}else{var x=g.color;this.colors.push(x,x,x)}if(n===true){var w=r[0][u];if(w!==undefined){this.uvs.push(w[0],w[1],w[2])}else{console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ",u);this.uvs.push(new _t,new _t,new _t)}}if(a===true){var w=r[1][u];if(w!==undefined){this.uvs2.push(w[0],w[1],w[2])}else{console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ",u);this.uvs2.push(new _t,new _t,new _t)}}for(var T=0;T<s;T++){var M=o[T].vertices;l[T].push(M[g.a],M[g.b],M[g.c])}for(var T=0;T<h;T++){var S=c[T].vertexNormals[u];f[T].push(S.a,S.b,S.c)}if(m){this.skinIndices.push(d[g.a],d[g.b],d[g.c])}if(v){this.skinWeights.push(p[g.a],p[g.b],p[g.c])}}this.computeGroups(e);this.verticesNeedUpdate=e.verticesNeedUpdate;this.normalsNeedUpdate=e.normalsNeedUpdate;this.colorsNeedUpdate=e.colorsNeedUpdate;this.uvsNeedUpdate=e.uvsNeedUpdate;this.groupsNeedUpdate=e.groupsNeedUpdate;return this}});function sa(e){if(e.length===0)return-Infinity;var t=e[0];for(var i=1,r=e.length;i<r;++i){if(e[i]>t)t=e[i]}return t}var la=1;function ua(){Object.defineProperty(this,"id",{value:la+=2});this.uuid=bt.generateUUID();this.name="";this.type="BufferGeometry";this.index=null;this.attributes={};this.morphAttributes={};this.groups=[];this.boundingBox=null;this.boundingSphere=null;this.drawRange={start:0,count:Infinity}}Object.assign(ua.prototype,t.prototype,{isBufferGeometry:true,getIndex:function(){return this.index},setIndex:function(e){if(Array.isArray(e)){this.index=new(sa(e)>65535?ra:ta)(e,1)}else{this.index=e}},addAttribute:function(e,t){if(!(t&&t.isBufferAttribute)&&!(t&&t.isInterleavedBufferAttribute)){console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute ).");this.addAttribute(e,new Kn(arguments[1],arguments[2]));return}if(e==="index"){console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute.");this.setIndex(t);return}this.attributes[e]=t;return this},getAttribute:function(e){return this.attributes[e]},removeAttribute:function(e){delete this.attributes[e];return this},addGroup:function(e,t,i){this.groups.push({start:e,count:t,materialIndex:i!==undefined?i:0})},clearGroups:function(){this.groups=[]},setDrawRange:function(e,t){this.drawRange.start=e;this.drawRange.count=t},applyMatrix:function(e){var t=this.attributes.position;if(t!==undefined){e.applyToBufferAttribute(t);t.needsUpdate=true}var i=this.attributes.normal;if(i!==undefined){var r=(new Mt).getNormalMatrix(e);r.applyToBufferAttribute(i);i.needsUpdate=true}if(this.boundingBox!==null){this.computeBoundingBox()}if(this.boundingSphere!==null){this.computeBoundingSphere()}return this},rotateX:function(){var e=new xt;return function t(i){e.makeRotationX(i);this.applyMatrix(e);return this}}(),rotateY:function(){var e=new xt;return function t(i){e.makeRotationY(i);this.applyMatrix(e);return this}}(),rotateZ:function(){var e=new xt;return function t(i){e.makeRotationZ(i);this.applyMatrix(e);return this}}(),translate:function(){var e=new xt;return function t(i,r,n){e.makeTranslation(i,r,n);this.applyMatrix(e);return this}}(),scale:function(){var e=new xt;return function t(i,r,n){e.makeScale(i,r,n);this.applyMatrix(e);return this}}(),lookAt:function(){var e=new jn;return function t(i){e.lookAt(i);e.updateMatrix();this.applyMatrix(e.matrix)}}(),center:function(){this.computeBoundingBox();var e=this.boundingBox.getCenter().negate();this.translate(e.x,e.y,e.z);return e},setFromObject:function(e){var t=e.geometry;if(e.isPoints||e.isLine){var i=new na(t.vertices.length*3,3);var r=new na(t.colors.length*3,3);this.addAttribute("position",i.copyVector3sArray(t.vertices));this.addAttribute("color",r.copyColorsArray(t.colors));if(t.lineDistances&&t.lineDistances.length===t.vertices.length){var n=new na(t.lineDistances.length,1);this.addAttribute("lineDistance",n.copyArray(t.lineDistances))}if(t.boundingSphere!==null){this.boundingSphere=t.boundingSphere.clone()}if(t.boundingBox!==null){this.boundingBox=t.boundingBox.clone()}}else if(e.isMesh){if(t&&t.isGeometry){this.fromGeometry(t)}}return this},setFromPoints:function(e){var t=[];for(var i=0,r=e.length;i<r;i++){var n=e[i];t.push(n.x,n.y,n.z||0)}this.addAttribute("position",new na(t,3));return this},updateFromObject:function(e){var t=e.geometry;if(e.isMesh){var i=t.__directGeometry;if(t.elementsNeedUpdate===true){i=undefined;t.elementsNeedUpdate=false}if(i===undefined){return this.fromGeometry(t)}i.verticesNeedUpdate=t.verticesNeedUpdate;i.normalsNeedUpdate=t.normalsNeedUpdate;i.colorsNeedUpdate=t.colorsNeedUpdate;i.uvsNeedUpdate=t.uvsNeedUpdate;i.groupsNeedUpdate=t.groupsNeedUpdate;t.verticesNeedUpdate=false;t.normalsNeedUpdate=false;t.colorsNeedUpdate=false;t.uvsNeedUpdate=false;t.groupsNeedUpdate=false;t=i}var r;if(t.verticesNeedUpdate===true){r=this.attributes.position;if(r!==undefined){r.copyVector3sArray(t.vertices);r.needsUpdate=true}t.verticesNeedUpdate=false}if(t.normalsNeedUpdate===true){r=this.attributes.normal;if(r!==undefined){r.copyVector3sArray(t.normals);r.needsUpdate=true}t.normalsNeedUpdate=false}if(t.colorsNeedUpdate===true){r=this.attributes.color;if(r!==undefined){r.copyColorsArray(t.colors);r.needsUpdate=true}t.colorsNeedUpdate=false}if(t.uvsNeedUpdate){r=this.attributes.uv;if(r!==undefined){r.copyVector2sArray(t.uvs);r.needsUpdate=true}t.uvsNeedUpdate=false}if(t.lineDistancesNeedUpdate){r=this.attributes.lineDistance;if(r!==undefined){r.copyArray(t.lineDistances);r.needsUpdate=true}t.lineDistancesNeedUpdate=false}if(t.groupsNeedUpdate){t.computeGroups(e.geometry);this.groups=t.groups;t.groupsNeedUpdate=false}return this},fromGeometry:function(e){e.__directGeometry=(new oa).fromGeometry(e);return this.fromDirectGeometry(e.__directGeometry)},
fromDirectGeometry:function(e){var t=new Float32Array(e.vertices.length*3);this.addAttribute("position",new Kn(t,3).copyVector3sArray(e.vertices));if(e.normals.length>0){var i=new Float32Array(e.normals.length*3);this.addAttribute("normal",new Kn(i,3).copyVector3sArray(e.normals))}if(e.colors.length>0){var r=new Float32Array(e.colors.length*3);this.addAttribute("color",new Kn(r,3).copyColorsArray(e.colors))}if(e.uvs.length>0){var n=new Float32Array(e.uvs.length*2);this.addAttribute("uv",new Kn(n,2).copyVector2sArray(e.uvs))}if(e.uvs2.length>0){var a=new Float32Array(e.uvs2.length*2);this.addAttribute("uv2",new Kn(a,2).copyVector2sArray(e.uvs2))}if(e.indices.length>0){var o=sa(e.indices)>65535?Uint32Array:Uint16Array;var s=new o(e.indices.length*3);this.setIndex(new Kn(s,1).copyIndicesArray(e.indices))}this.groups=e.groups;for(var l in e.morphTargets){var u=[];var c=e.morphTargets[l];for(var h=0,f=c.length;h<f;h++){var d=c[h];var p=new na(d.length*3,3);u.push(p.copyVector3sArray(d))}this.morphAttributes[l]=u}if(e.skinIndices.length>0){var m=new na(e.skinIndices.length*4,4);this.addAttribute("skinIndex",m.copyVector4sArray(e.skinIndices))}if(e.skinWeights.length>0){var v=new na(e.skinWeights.length*4,4);this.addAttribute("skinWeight",v.copyVector4sArray(e.skinWeights))}if(e.boundingSphere!==null){this.boundingSphere=e.boundingSphere.clone()}if(e.boundingBox!==null){this.boundingBox=e.boundingBox.clone()}return this},computeBoundingBox:function(){if(this.boundingBox===null){this.boundingBox=new Bn}var e=this.attributes.position;if(e!==undefined){this.boundingBox.setFromBufferAttribute(e)}else{this.boundingBox.makeEmpty()}if(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z)){console.error('THREE.BufferGeometry.computeBoundingBox: Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}},computeBoundingSphere:function(){var e=new Bn;var t=new Tt;return function i(){if(this.boundingSphere===null){this.boundingSphere=new Gn}var r=this.attributes.position;if(r){var n=this.boundingSphere.center;e.setFromBufferAttribute(r);e.getCenter(n);var a=0;for(var o=0,s=r.count;o<s;o++){t.x=r.getX(o);t.y=r.getY(o);t.z=r.getZ(o);a=Math.max(a,n.distanceToSquared(t))}this.boundingSphere.radius=Math.sqrt(a);if(isNaN(this.boundingSphere.radius)){console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}}}(),computeFaceNormals:function(){},computeVertexNormals:function(){var e=this.index;var t=this.attributes;var i=this.groups;if(t.position){var r=t.position.array;if(t.normal===undefined){this.addAttribute("normal",new Kn(new Float32Array(r.length),3))}else{var n=t.normal.array;for(var a=0,o=n.length;a<o;a++){n[a]=0}}var s=t.normal.array;var l,u,c;var h=new Tt,f=new Tt,d=new Tt;var p=new Tt,m=new Tt;if(e){var v=e.array;if(i.length===0){this.addGroup(0,v.length)}for(var g=0,y=i.length;g<y;++g){var b=i[g];var _=b.start;var x=b.count;for(var a=_,o=_+x;a<o;a+=3){l=v[a+0]*3;u=v[a+1]*3;c=v[a+2]*3;h.fromArray(r,l);f.fromArray(r,u);d.fromArray(r,c);p.subVectors(d,f);m.subVectors(h,f);p.cross(m);s[l]+=p.x;s[l+1]+=p.y;s[l+2]+=p.z;s[u]+=p.x;s[u+1]+=p.y;s[u+2]+=p.z;s[c]+=p.x;s[c+1]+=p.y;s[c+2]+=p.z}}}else{for(var a=0,o=r.length;a<o;a+=9){h.fromArray(r,a);f.fromArray(r,a+3);d.fromArray(r,a+6);p.subVectors(d,f);m.subVectors(h,f);p.cross(m);s[a]=p.x;s[a+1]=p.y;s[a+2]=p.z;s[a+3]=p.x;s[a+4]=p.y;s[a+5]=p.z;s[a+6]=p.x;s[a+7]=p.y;s[a+8]=p.z}}this.normalizeNormals();t.normal.needsUpdate=true}},merge:function(e,t){if(!(e&&e.isBufferGeometry)){console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",e);return}if(t===undefined)t=0;var i=this.attributes;for(var r in i){if(e.attributes[r]===undefined)continue;var n=i[r];var a=n.array;var o=e.attributes[r];var s=o.array;var l=o.itemSize;for(var u=0,c=l*t;u<s.length;u++,c++){a[c]=s[u]}}return this},normalizeNormals:function(){var e=new Tt;return function t(){var i=this.attributes.normal;for(var r=0,n=i.count;r<n;r++){e.x=i.getX(r);e.y=i.getY(r);e.z=i.getZ(r);e.normalize();i.setXYZ(r,e.x,e.y,e.z)}}}(),toNonIndexed:function(){if(this.index===null){console.warn("THREE.BufferGeometry.toNonIndexed(): Geometry is already non-indexed.");return this}var e=new ua;var t=this.index.array;var i=this.attributes;for(var r in i){var n=i[r];var a=n.array;var o=n.itemSize;var s=new a.constructor(t.length*o);var l=0,u=0;for(var c=0,h=t.length;c<h;c++){l=t[c]*o;for(var f=0;f<o;f++){s[u++]=a[l++]}}e.addAttribute(r,new Kn(s,o))}return e},toJSON:function(){var e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};e.uuid=this.uuid;e.type=this.type;if(this.name!=="")e.name=this.name;if(this.parameters!==undefined){var t=this.parameters;for(var i in t){if(t[i]!==undefined)e[i]=t[i]}return e}e.data={attributes:{}};var r=this.index;if(r!==null){var n=Array.prototype.slice.call(r.array);e.data.index={type:r.array.constructor.name,array:n}}var a=this.attributes;for(var i in a){var o=a[i];var n=Array.prototype.slice.call(o.array);e.data.attributes[i]={itemSize:o.itemSize,type:o.array.constructor.name,array:n,normalized:o.normalized}}var s=this.groups;if(s.length>0){e.data.groups=JSON.parse(JSON.stringify(s))}var l=this.boundingSphere;if(l!==null){e.data.boundingSphere={center:l.center.toArray(),radius:l.radius}}return e},clone:function(){return(new ua).copy(this)},copy:function(e){var t,i,r;this.index=null;this.attributes={};this.morphAttributes={};this.groups=[];this.boundingBox=null;this.boundingSphere=null;this.name=e.name;var n=e.index;if(n!==null){this.setIndex(n.clone())}var a=e.attributes;for(t in a){var o=a[t];this.addAttribute(t,o.clone())}var s=e.morphAttributes;for(t in s){var l=[];var u=s[t];for(i=0,r=u.length;i<r;i++){l.push(u[i].clone())}this.morphAttributes[t]=l}var c=e.groups;for(i=0,r=c.length;i<r;i++){var h=c[i];this.addGroup(h.start,h.count,h.materialIndex)}var f=e.boundingBox;if(f!==null){this.boundingBox=f.clone()}var d=e.boundingSphere;if(d!==null){this.boundingSphere=d.clone()}this.drawRange.start=e.drawRange.start;this.drawRange.count=e.drawRange.count;return this},dispose:function(){this.dispatchEvent({type:"dispose"})}});function ca(e,t,i,r,n,a){Zn.call(this);this.type="BoxGeometry";this.parameters={width:e,height:t,depth:i,widthSegments:r,heightSegments:n,depthSegments:a};this.fromBufferGeometry(new ha(e,t,i,r,n,a));this.mergeVertices()}ca.prototype=Object.create(Zn.prototype);ca.prototype.constructor=ca;function ha(e,t,i,r,n,a){ua.call(this);this.type="BoxBufferGeometry";this.parameters={width:e,height:t,depth:i,widthSegments:r,heightSegments:n,depthSegments:a};var o=this;e=e||1;t=t||1;i=i||1;r=Math.floor(r)||1;n=Math.floor(n)||1;a=Math.floor(a)||1;var s=[];var l=[];var u=[];var c=[];var h=0;var f=0;d("z","y","x",-1,-1,i,t,e,a,n,0);d("z","y","x",1,-1,i,t,-e,a,n,1);d("x","z","y",1,1,e,i,t,r,a,2);d("x","z","y",1,-1,e,i,-t,r,a,3);d("x","y","z",1,-1,e,t,i,r,n,4);d("x","y","z",-1,-1,e,t,-i,r,n,5);this.setIndex(s);this.addAttribute("position",new na(l,3));this.addAttribute("normal",new na(u,3));this.addAttribute("uv",new na(c,2));function d(e,t,i,r,n,a,d,p,m,v,g){var y=a/m;var b=d/v;var _=a/2;var x=d/2;var w=p/2;var T=m+1;var M=v+1;var S=0;var E=0;var P,A;var C=new Tt;for(A=0;A<M;A++){var L=A*b-x;for(P=0;P<T;P++){var R=P*y-_;C[e]=R*r;C[t]=L*n;C[i]=w;l.push(C.x,C.y,C.z);C[e]=0;C[t]=0;C[i]=p>0?1:-1;u.push(C.x,C.y,C.z);c.push(P/m);c.push(1-A/v);S+=1}}for(A=0;A<v;A++){for(P=0;P<m;P++){var O=h+P+T*A;var I=h+P+T*(A+1);var D=h+(P+1)+T*(A+1);var B=h+(P+1)+T*A;s.push(O,I,B);s.push(I,D,B);E+=6}}o.addGroup(f,E,g);f+=E;h+=S}}ha.prototype=Object.create(ua.prototype);ha.prototype.constructor=ha;function fa(e,t,i,r){Zn.call(this);this.type="PlaneGeometry";this.parameters={width:e,height:t,widthSegments:i,heightSegments:r};this.fromBufferGeometry(new da(e,t,i,r));this.mergeVertices()}fa.prototype=Object.create(Zn.prototype);fa.prototype.constructor=fa;function da(e,t,i,r){ua.call(this);this.type="PlaneBufferGeometry";this.parameters={width:e,height:t,widthSegments:i,heightSegments:r};e=e||1;t=t||1;var n=e/2;var a=t/2;var o=Math.floor(i)||1;var s=Math.floor(r)||1;var l=o+1;var u=s+1;var c=e/o;var h=t/s;var f,d;var p=[];var m=[];var v=[];var g=[];for(d=0;d<u;d++){var y=d*h-a;for(f=0;f<l;f++){var b=f*c-n;m.push(b,-y,0);v.push(0,0,1);g.push(f/o);g.push(1-d/s)}}for(d=0;d<s;d++){for(f=0;f<o;f++){var _=f+l*d;var x=f+l*(d+1);var w=f+1+l*(d+1);var T=f+1+l*d;p.push(_,x,T);p.push(x,w,T)}}this.setIndex(p);this.addAttribute("position",new na(m,3));this.addAttribute("normal",new na(v,3));this.addAttribute("uv",new na(g,2))}da.prototype=Object.create(ua.prototype);da.prototype.constructor=da;function pa(e){On.call(this);this.type="MeshBasicMaterial";this.color=new _i(16777215);this.map=null;this.lightMap=null;this.lightMapIntensity=1;this.aoMap=null;this.aoMapIntensity=1;this.specularMap=null;this.alphaMap=null;this.envMap=null;this.combine=$;this.reflectivity=1;this.refractionRatio=.98;this.wireframe=false;this.wireframeLinewidth=1;this.wireframeLinecap="round";this.wireframeLinejoin="round";this.skinning=false;this.morphTargets=false;this.lights=false;this.setValues(e)}pa.prototype=Object.create(On.prototype);pa.prototype.constructor=pa;pa.prototype.isMeshBasicMaterial=true;pa.prototype.copy=function(e){On.prototype.copy.call(this,e);this.color.copy(e.color);this.map=e.map;this.lightMap=e.lightMap;this.lightMapIntensity=e.lightMapIntensity;this.aoMap=e.aoMap;this.aoMapIntensity=e.aoMapIntensity;this.specularMap=e.specularMap;this.alphaMap=e.alphaMap;this.envMap=e.envMap;this.combine=e.combine;this.reflectivity=e.reflectivity;this.refractionRatio=e.refractionRatio;this.wireframe=e.wireframe;this.wireframeLinewidth=e.wireframeLinewidth;this.wireframeLinecap=e.wireframeLinecap;this.wireframeLinejoin=e.wireframeLinejoin;this.skinning=e.skinning;this.morphTargets=e.morphTargets;return this};function ma(e){On.call(this);this.type="ShaderMaterial";this.defines={};this.uniforms={};this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}";this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}";this.linewidth=1;this.wireframe=false;this.wireframeLinewidth=1;this.fog=false;this.lights=false;this.clipping=false;this.skinning=false;this.morphTargets=false;this.morphNormals=false;this.extensions={derivatives:false,fragDepth:false,drawBuffers:false,shaderTextureLOD:false};this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]};this.index0AttributeName=undefined;if(e!==undefined){if(e.attributes!==undefined){console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead.")}this.setValues(e)}}ma.prototype=Object.create(On.prototype);ma.prototype.constructor=ma;ma.prototype.isShaderMaterial=true;ma.prototype.copy=function(e){On.prototype.copy.call(this,e);this.fragmentShader=e.fragmentShader;this.vertexShader=e.vertexShader;this.uniforms=wi.clone(e.uniforms);this.defines=e.defines;this.wireframe=e.wireframe;this.wireframeLinewidth=e.wireframeLinewidth;this.lights=e.lights;this.clipping=e.clipping;this.skinning=e.skinning;this.morphTargets=e.morphTargets;this.morphNormals=e.morphNormals;this.extensions=e.extensions;return this};ma.prototype.toJSON=function(e){var t=On.prototype.toJSON.call(this,e);t.uniforms=this.uniforms;t.vertexShader=this.vertexShader;t.fragmentShader=this.fragmentShader;return t};function va(e,t){this.origin=e!==undefined?e:new Tt;this.direction=t!==undefined?t:new Tt}Object.assign(va.prototype,{set:function(e,t){this.origin.copy(e);this.direction.copy(t);return this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){this.origin.copy(e.origin);this.direction.copy(e.direction);return this},at:function(e,t){var i=t||new Tt;return i.copy(this.direction).multiplyScalar(e).add(this.origin)},lookAt:function(e){this.direction.copy(e).sub(this.origin).normalize();return this},recast:function(){var e=new Tt;return function t(i){this.origin.copy(this.at(i,e));return this}}(),closestPointToPoint:function(e,t){var i=t||new Tt;i.subVectors(e,this.origin);var r=i.dot(this.direction);if(r<0){return i.copy(this.origin)}return i.copy(this.direction).multiplyScalar(r).add(this.origin)},distanceToPoint:function(e){return Math.sqrt(this.distanceSqToPoint(e))},distanceSqToPoint:function(){var e=new Tt;return function t(i){var r=e.subVectors(i,this.origin).dot(this.direction);if(r<0){return this.origin.distanceToSquared(i)}e.copy(this.direction).multiplyScalar(r).add(this.origin);return e.distanceToSquared(i)}}(),distanceSqToSegment:function(){var e=new Tt;var t=new Tt;var i=new Tt;return function r(n,a,o,s){e.copy(n).add(a).multiplyScalar(.5);t.copy(a).sub(n).normalize();i.copy(this.origin).sub(e);var l=n.distanceTo(a)*.5;var u=-this.direction.dot(t);var c=i.dot(this.direction);var h=-i.dot(t);var f=i.lengthSq();var d=Math.abs(1-u*u);var p,m,v,g;if(d>0){p=u*h-c;m=u*c-h;g=l*d;if(p>=0){if(m>=-g){if(m<=g){var y=1/d;p*=y;m*=y;v=p*(p+u*m+2*c)+m*(u*p+m+2*h)+f}else{m=l;p=Math.max(0,-(u*m+c));v=-p*p+m*(m+2*h)+f}}else{m=-l;p=Math.max(0,-(u*m+c));v=-p*p+m*(m+2*h)+f}}else{if(m<=-g){p=Math.max(0,-(-u*l+c));m=p>0?-l:Math.min(Math.max(-l,-h),l);v=-p*p+m*(m+2*h)+f}else if(m<=g){p=0;m=Math.min(Math.max(-l,-h),l);v=m*(m+2*h)+f}else{p=Math.max(0,-(u*l+c));m=p>0?l:Math.min(Math.max(-l,-h),l);v=-p*p+m*(m+2*h)+f}}}else{m=u>0?-l:l;p=Math.max(0,-(u*m+c));v=-p*p+m*(m+2*h)+f}if(o){o.copy(this.direction).multiplyScalar(p).add(this.origin)}if(s){s.copy(t).multiplyScalar(m).add(e)}return v}}(),intersectSphere:function(){var e=new Tt;return function t(i,r){e.subVectors(i.center,this.origin);var n=e.dot(this.direction);var a=e.dot(e)-n*n;var o=i.radius*i.radius;if(a>o)return null;var s=Math.sqrt(o-a);var l=n-s;var u=n+s;if(l<0&&u<0)return null;if(l<0)return this.at(u,r);return this.at(l,r)}}(),intersectsSphere:function(e){return this.distanceToPoint(e.center)<=e.radius},distanceToPlane:function(e){var t=e.normal.dot(this.direction);if(t===0){if(e.distanceToPoint(this.origin)===0){return 0}return null}var i=-(this.origin.dot(e.normal)+e.constant)/t;return i>=0?i:null},intersectPlane:function(e,t){var i=this.distanceToPlane(e);if(i===null){return null}return this.at(i,t)},intersectsPlane:function(e){var t=e.distanceToPoint(this.origin);if(t===0){return true}var i=e.normal.dot(this.direction);if(i*t<0){return true}return false},intersectBox:function(e,t){var i,r,n,a,o,s;var l=1/this.direction.x,u=1/this.direction.y,c=1/this.direction.z;var h=this.origin;if(l>=0){i=(e.min.x-h.x)*l;r=(e.max.x-h.x)*l}else{i=(e.max.x-h.x)*l;r=(e.min.x-h.x)*l}if(u>=0){n=(e.min.y-h.y)*u;a=(e.max.y-h.y)*u}else{n=(e.max.y-h.y)*u;a=(e.min.y-h.y)*u}if(i>a||n>r)return null;if(n>i||i!==i)i=n;if(a<r||r!==r)r=a;if(c>=0){o=(e.min.z-h.z)*c;s=(e.max.z-h.z)*c}else{o=(e.max.z-h.z)*c;s=(e.min.z-h.z)*c}if(i>s||o>r)return null;if(o>i||i!==i)i=o;if(s<r||r!==r)r=s;if(r<0)return null;return this.at(i>=0?i:r,t)},intersectsBox:function(){var e=new Tt;return function t(i){return this.intersectBox(i,e)!==null}}(),intersectTriangle:function(){var e=new Tt;var t=new Tt;var i=new Tt;var r=new Tt;return function n(a,o,s,l,u){t.subVectors(o,a);i.subVectors(s,a);r.crossVectors(t,i);var c=this.direction.dot(r);var h;if(c>0){if(l)return null;h=1}else if(c<0){h=-1;c=-c}else{return null}e.subVectors(this.origin,a);var f=h*this.direction.dot(i.crossVectors(e,i));if(f<0){return null}var d=h*this.direction.dot(t.cross(e));if(d<0){return null}if(f+d>c){return null}var p=-h*e.dot(r);if(p<0){return null}return this.at(p/c,u)}}(),applyMatrix4:function(e){this.origin.applyMatrix4(e);this.direction.transformDirection(e);return this},equals:function(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}});function ga(e,t){this.start=e!==undefined?e:new Tt;this.end=t!==undefined?t:new Tt}Object.assign(ga.prototype,{set:function(e,t){this.start.copy(e);this.end.copy(t);return this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){this.start.copy(e.start);this.end.copy(e.end);return this},getCenter:function(e){var t=e||new Tt;return t.addVectors(this.start,this.end).multiplyScalar(.5)},delta:function(e){var t=e||new Tt;return t.subVectors(this.end,this.start)},distanceSq:function(){return this.start.distanceToSquared(this.end)},distance:function(){return this.start.distanceTo(this.end)},at:function(e,t){var i=t||new Tt;return this.delta(i).multiplyScalar(e).add(this.start)},closestPointToPointParameter:function(){var e=new Tt;var t=new Tt;return function i(r,n){e.subVectors(r,this.start);t.subVectors(this.end,this.start);var a=t.dot(t);var o=t.dot(e);var s=o/a;if(n){s=bt.clamp(s,0,1)}return s}}(),closestPointToPoint:function(e,t,i){var r=this.closestPointToPointParameter(e,t);var n=i||new Tt;return this.delta(n).multiplyScalar(r).add(this.start)},applyMatrix4:function(e){this.start.applyMatrix4(e);this.end.applyMatrix4(e);return this},equals:function(e){return e.start.equals(this.start)&&e.end.equals(this.end)}});function ya(e,t,i){this.a=e!==undefined?e:new Tt;this.b=t!==undefined?t:new Tt;this.c=i!==undefined?i:new Tt}Object.assign(ya,{normal:function(){var e=new Tt;return function t(i,r,n,a){var o=a||new Tt;o.subVectors(n,r);e.subVectors(i,r);o.cross(e);var s=o.lengthSq();if(s>0){return o.multiplyScalar(1/Math.sqrt(s))}return o.set(0,0,0)}}(),barycoordFromPoint:function(){var e=new Tt;var t=new Tt;var i=new Tt;return function r(n,a,o,s,l){e.subVectors(s,a);t.subVectors(o,a);i.subVectors(n,a);var u=e.dot(e);var c=e.dot(t);var h=e.dot(i);var f=t.dot(t);var d=t.dot(i);var p=u*f-c*c;var m=l||new Tt;if(p===0){return m.set(-2,-1,-1)}var v=1/p;var g=(f*h-c*d)*v;var y=(u*d-c*h)*v;return m.set(1-g-y,y,g)}}(),containsPoint:function(){var e=new Tt;return function t(i,r,n,a){var o=ya.barycoordFromPoint(i,r,n,a,e);return o.x>=0&&o.y>=0&&o.x+o.y<=1}}()});Object.assign(ya.prototype,{set:function(e,t,i){this.a.copy(e);this.b.copy(t);this.c.copy(i);return this},setFromPointsAndIndices:function(e,t,i,r){this.a.copy(e[t]);this.b.copy(e[i]);this.c.copy(e[r]);return this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){this.a.copy(e.a);this.b.copy(e.b);this.c.copy(e.c);return this},area:function(){var e=new Tt;var t=new Tt;return function i(){e.subVectors(this.c,this.b);t.subVectors(this.a,this.b);return e.cross(t).length()*.5}}(),midpoint:function(e){var t=e||new Tt;return t.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)},normal:function(e){return ya.normal(this.a,this.b,this.c,e)},plane:function(e){var t=e||new kn;return t.setFromCoplanarPoints(this.a,this.b,this.c)},barycoordFromPoint:function(e,t){return ya.barycoordFromPoint(e,this.a,this.b,this.c,t)},containsPoint:function(e){return ya.containsPoint(e,this.a,this.b,this.c)},closestPointToPoint:function(){var e=new kn;var t=[new ga,new ga,new ga];var i=new Tt;var r=new Tt;return function n(a,o){var s=o||new Tt;var l=Infinity;e.setFromCoplanarPoints(this.a,this.b,this.c);e.projectPoint(a,i);if(this.containsPoint(i)===true){s.copy(i)}else{t[0].set(this.a,this.b);t[1].set(this.b,this.c);t[2].set(this.c,this.a);for(var u=0;u<t.length;u++){t[u].closestPointToPoint(i,true,r);var c=i.distanceToSquared(r);if(c<l){l=c;s.copy(r)}}}return s}}(),equals:function(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}});function ba(e,t){jn.call(this);this.type="Mesh";this.geometry=e!==undefined?e:new ua;this.material=t!==undefined?t:new pa({color:Math.random()*16777215});this.drawMode=ot;this.updateMorphTargets()}ba.prototype=Object.assign(Object.create(jn.prototype),{constructor:ba,isMesh:true,setDrawMode:function(e){this.drawMode=e},copy:function(e){jn.prototype.copy.call(this,e);this.drawMode=e.drawMode;if(e.morphTargetInfluences!==undefined){this.morphTargetInfluences=e.morphTargetInfluences.slice()}if(e.morphTargetDictionary!==undefined){this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)}return this},updateMorphTargets:function(){var e=this.geometry;var t,i,r;if(e.isBufferGeometry){var n=e.morphAttributes;var a=Object.keys(n);if(a.length>0){var o=n[a[0]];if(o!==undefined){this.morphTargetInfluences=[];this.morphTargetDictionary={};for(t=0,i=o.length;t<i;t++){r=o[t].name||String(t);this.morphTargetInfluences.push(0);this.morphTargetDictionary[r]=t}}}}else{var s=e.morphTargets;if(s!==undefined&&s.length>0){this.morphTargetInfluences=[];this.morphTargetDictionary={};for(t=0,i=s.length;t<i;t++){r=s[t].name||String(t);this.morphTargetInfluences.push(0);this.morphTargetDictionary[r]=t}}}},raycast:function(){var e=new xt;var t=new va;var i=new Gn;var r=new Tt;var n=new Tt;var a=new Tt;var o=new Tt;var s=new Tt;var l=new Tt;var u=new _t;var c=new _t;var h=new _t;var f=new Tt;var d=new Tt;var v=new Tt;function g(e,t,i,r,n,a,o){ya.barycoordFromPoint(e,t,i,r,f);n.multiplyScalar(f.x);a.multiplyScalar(f.y);o.multiplyScalar(f.z);n.add(a).add(o);return n.clone()}function y(e,t,i,r,n,a,o,s){var l;if(t.side===p){l=r.intersectTriangle(o,a,n,true,s)}else{l=r.intersectTriangle(n,a,o,t.side!==m,s)}if(l===null)return null;v.copy(s);v.applyMatrix4(e.matrixWorld);var u=i.ray.origin.distanceTo(v);if(u<i.near||u>i.far)return null;return{distance:u,point:v.clone(),object:e}}function b(e,t,i,o,s,l,f,p){r.fromBufferAttribute(o,l);n.fromBufferAttribute(o,f);a.fromBufferAttribute(o,p);var m=y(e,e.material,t,i,r,n,a,d);if(m){if(s){u.fromBufferAttribute(s,l);c.fromBufferAttribute(s,f);h.fromBufferAttribute(s,p);m.uv=g(d,r,n,a,u,c,h)}m.face=new Yn(l,f,p,ya.normal(r,n,a));m.faceIndex=l}return m}return function f(p,m){var v=this.geometry;var _=this.material;var x=this.matrixWorld;if(_===undefined)return;if(v.boundingSphere===null)v.computeBoundingSphere();i.copy(v.boundingSphere);i.applyMatrix4(x);if(p.ray.intersectsSphere(i)===false)return;e.getInverse(x);t.copy(p.ray).applyMatrix4(e);if(v.boundingBox!==null){if(t.intersectsBox(v.boundingBox)===false)return}var w;if(v.isBufferGeometry){var T,M,S;var E=v.index;var P=v.attributes.position;var A=v.attributes.uv;var C,L;if(E!==null){for(C=0,L=E.count;C<L;C+=3){T=E.getX(C);M=E.getX(C+1);S=E.getX(C+2);w=b(this,p,t,P,A,T,M,S);if(w){w.faceIndex=Math.floor(C/3);m.push(w)}}}else if(P!==undefined){for(C=0,L=P.count;C<L;C+=3){T=C;M=C+1;S=C+2;w=b(this,p,t,P,A,T,M,S);if(w){w.index=T;m.push(w)}}}}else if(v.isGeometry){var R,O,I;var D=Array.isArray(_);var B=v.vertices;var G=v.faces;var k;var N=v.faceVertexUvs[0];if(N.length>0)k=N;for(var U=0,F=G.length;U<F;U++){var H=G[U];var z=D?_[H.materialIndex]:_;if(z===undefined)continue;R=B[H.a];O=B[H.b];I=B[H.c];if(z.morphTargets===true){var V=v.morphTargets;var j=this.morphTargetInfluences;r.set(0,0,0);n.set(0,0,0);a.set(0,0,0);for(var W=0,X=V.length;W<X;W++){var Y=j[W];if(Y===0)continue;var q=V[W].vertices;r.addScaledVector(o.subVectors(q[H.a],R),Y);n.addScaledVector(s.subVectors(q[H.b],O),Y);a.addScaledVector(l.subVectors(q[H.c],I),Y)}r.add(R);n.add(O);a.add(I);R=r;O=n;I=a}w=y(this,z,p,t,R,O,I,d);if(w){if(k&&k[U]){var Z=k[U];u.copy(Z[0]);c.copy(Z[1]);h.copy(Z[2]);w.uv=g(d,R,O,I,u,c,h)}w.face=H;w.faceIndex=U;m.push(w)}}}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}});function _a(e,t,i,r){var n=new _i(0);var a=0;var o,s;var l;function u(t,r,u,h){var f=r.background;if(f===null){c(n,a)}else if(f&&f.isColor){c(f,1);h=true}if(e.autoClear||h){e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil)}if(f&&f.isCubeTexture){if(l===undefined){l=new ba(new ha(1,1,1),new ma({uniforms:En.cube.uniforms,vertexShader:En.cube.vertexShader,fragmentShader:En.cube.fragmentShader,side:p,depthTest:true,depthWrite:false,fog:false}));l.geometry.removeAttribute("normal");l.geometry.removeAttribute("uv");l.onBeforeRender=function(e,t,i){this.matrixWorld.copyPosition(i.matrixWorld)};i.update(l.geometry)}l.material.uniforms.tCube.value=f;t.push(l,l.geometry,l.material,0,null)}else if(f&&f.isTexture){if(o===undefined){o=new Xn(-1,1,1,-1,0,1);s=new ba(new da(2,2),new pa({depthTest:false,depthWrite:false,fog:false}));i.update(s.geometry)}s.material.map=f;e.renderBufferDirect(o,null,s.geometry,s.material,s,null)}}function c(e,i){t.buffers.color.setClear(e.r,e.g,e.b,i,r)}return{getClearColor:function(){return n},setClearColor:function(e,t){n.set(e);a=t!==undefined?t:1;c(n,a)},getClearAlpha:function(){return a},setClearAlpha:function(e){a=e;c(n,a)},render:u}}function xa(e,t){if(e.renderOrder!==t.renderOrder){return e.renderOrder-t.renderOrder}else if(e.program&&t.program&&e.program!==t.program){return e.program.id-t.program.id}else if(e.material.id!==t.material.id){return e.material.id-t.material.id}else if(e.z!==t.z){return e.z-t.z}else{return e.id-t.id}}function wa(e,t){if(e.renderOrder!==t.renderOrder){return e.renderOrder-t.renderOrder}if(e.z!==t.z){return t.z-e.z}else{return e.id-t.id}}function Ta(){var e=[];var t=0;var i=[];var r=[];function n(){t=0;i.length=0;r.length=0}function a(n,a,o,s,l){var u=e[t];if(u===undefined){u={id:n.id,object:n,geometry:a,material:o,program:o.program,renderOrder:n.renderOrder,z:s,group:l};e[t]=u}else{u.id=n.id;u.object=n;u.geometry=a;u.material=o;u.program=o.program;u.renderOrder=n.renderOrder;u.z=s;u.group=l}(o.transparent===true?r:i).push(u);t++}function o(){if(i.length>1)i.sort(xa);if(r.length>1)r.sort(wa)}return{opaque:i,transparent:r,init:n,push:a,sort:o}}function Ma(){var e={};function t(t,i){var r=t.id+","+i.id;var n=e[r];if(n===undefined){n=new Ta;e[r]=n}return n}function i(){e={}}return{get:t,dispose:i}}function Sa(e,t){return Math.abs(t[1])-Math.abs(e[1])}function Ea(e){var t={};var i=new Float32Array(8);function r(r,n,a,o){var s=r.morphTargetInfluences;var l=s.length;var u=t[n.id];if(u===undefined){u=[];for(var c=0;c<l;c++){u[c]=[c,0]}t[n.id]=u}var h=a.morphTargets&&n.morphAttributes.position;var f=a.morphNormals&&n.morphAttributes.normal;for(var c=0;c<l;c++){var d=u[c];if(d[1]!==0){if(h)n.removeAttribute("morphTarget"+c);if(f)n.removeAttribute("morphNormal"+c)}}for(var c=0;c<l;c++){var d=u[c];d[0]=c;d[1]=s[c]}u.sort(Sa);for(var c=0;c<8;c++){var d=u[c];if(d){var p=d[0];var m=d[1];if(m){if(h)n.addAttribute("morphTarget"+c,h[p]);if(f)n.addAttribute("morphNormal"+c,f[p]);i[c]=m;continue}}i[c]=0}o.getUniforms().setValue(e,"morphTargetInfluences",i)}return{update:r}}function Pa(e,t,i){var r;function n(e){r=e}var a,o;function s(e){a=e.type;o=e.bytesPerElement}function l(t,n){e.drawElements(r,n,a,t*o);i.calls++;i.vertices+=n;if(r===e.TRIANGLES)i.faces+=n/3;else if(r===e.POINTS)i.points+=n}function u(n,s,l){var u=t.get("ANGLE_instanced_arrays");if(u===null){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}u.drawElementsInstancedANGLE(r,l,a,s*o,n.maxInstancedCount);i.calls++;i.vertices+=l*n.maxInstancedCount;if(r===e.TRIANGLES)i.faces+=n.maxInstancedCount*l/3;else if(r===e.POINTS)i.points+=n.maxInstancedCount*l}this.setMode=n;this.setIndex=s;this.render=l;this.renderInstances=u}function Aa(e,t,i){var r;function n(e){r=e}function a(t,n){e.drawArrays(r,t,n);i.calls++;i.vertices+=n;if(r===e.TRIANGLES)i.faces+=n/3;else if(r===e.POINTS)i.points+=n}function o(n,a,o){var s=t.get("ANGLE_instanced_arrays");if(s===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}var l=n.attributes.position;if(l.isInterleavedBufferAttribute){o=l.data.count;s.drawArraysInstancedANGLE(r,0,o,n.maxInstancedCount)}else{s.drawArraysInstancedANGLE(r,a,o,n.maxInstancedCount)}i.calls++;i.vertices+=o*n.maxInstancedCount;if(r===e.TRIANGLES)i.faces+=n.maxInstancedCount*o/3;else if(r===e.POINTS)i.points+=n.maxInstancedCount*o}this.setMode=n;this.render=a;this.renderInstances=o}function Ca(e,t,i){var r={};var n={};function a(e){var o=e.target;var s=r[o.id];if(s.index!==null){t.remove(s.index)}for(var l in s.attributes){t.remove(s.attributes[l])}o.removeEventListener("dispose",a);delete r[o.id];var u=n[o.id];if(u){t.remove(u);delete n[o.id]}u=n[s.id];if(u){t.remove(u);delete n[s.id]}i.geometries--}function o(e,t){var n=r[t.id];if(n)return n;t.addEventListener("dispose",a);if(t.isBufferGeometry){n=t}else if(t.isGeometry){if(t._bufferGeometry===undefined){t._bufferGeometry=(new ua).setFromObject(e)}n=t._bufferGeometry}r[t.id]=n;i.geometries++;return n}function s(i){var r=i.index;var n=i.attributes;if(r!==null){t.update(r,e.ELEMENT_ARRAY_BUFFER)}for(var a in n){t.update(n[a],e.ARRAY_BUFFER)}var o=i.morphAttributes;for(var a in o){var s=o[a];for(var l=0,u=s.length;l<u;l++){t.update(s[l],e.ARRAY_BUFFER)}}}function l(i){var r=n[i.id];if(r)return r;var a=[];var o=i.index;var s=i.attributes;if(o!==null){var l=o.array;for(var u=0,c=l.length;u<c;u+=3){var h=l[u+0];var f=l[u+1];var d=l[u+2];a.push(h,f,f,d,d,h)}}else{var l=s.position.array;for(var u=0,c=l.length/3-1;u<c;u+=3){var h=u+0;var f=u+1;var d=u+2;a.push(h,f,f,d,d,h)}}r=new(sa(a)>65535?ra:ta)(a,1);t.update(r,e.ELEMENT_ARRAY_BUFFER);n[i.id]=r;return r}return{get:o,update:s,getWireframeAttribute:l}}function La(){var e={};return{get:function(t){if(e[t.id]!==undefined){return e[t.id]}var i;switch(t.type){case"DirectionalLight":i={direction:new Tt,color:new _i,shadow:false,shadowBias:0,shadowRadius:1,shadowMapSize:new _t};break;case"SpotLight":i={position:new Tt,direction:new Tt,color:new _i,distance:0,coneCos:0,penumbraCos:0,decay:0,shadow:false,shadowBias:0,shadowRadius:1,shadowMapSize:new _t};break;case"PointLight":i={position:new Tt,color:new _i,distance:0,decay:0,shadow:false,shadowBias:0,shadowRadius:1,shadowMapSize:new _t,shadowCameraNear:1,shadowCameraFar:1e3};break;case"HemisphereLight":i={direction:new Tt,skyColor:new _i,groundColor:new _i};break;case"RectAreaLight":i={color:new _i,position:new Tt,halfWidth:new Tt,halfHeight:new Tt};break}e[t.id]=i;return i}}}function Ra(){var e=new La;var t={hash:"",ambient:[0,0,0],directional:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],point:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]};var i=new Tt;var r=new xt;var n=new xt;function a(a,o,s){var l=0,u=0,c=0;var h=0;var f=0;var d=0;var p=0;var m=0;var v=s.matrixWorldInverse;for(var g=0,y=a.length;g<y;g++){var b=a[g];var _=b.color;var x=b.intensity;var w=b.distance;var T=b.shadow&&b.shadow.map?b.shadow.map.texture:null;if(b.isAmbientLight){l+=_.r*x;u+=_.g*x;c+=_.b*x}else if(b.isDirectionalLight){var M=e.get(b);M.color.copy(b.color).multiplyScalar(b.intensity);M.direction.setFromMatrixPosition(b.matrixWorld);i.setFromMatrixPosition(b.target.matrixWorld);M.direction.sub(i);M.direction.transformDirection(v);M.shadow=b.castShadow;if(b.castShadow){var S=b.shadow;M.shadowBias=S.bias;M.shadowRadius=S.radius;M.shadowMapSize=S.mapSize}t.directionalShadowMap[h]=T;t.directionalShadowMatrix[h]=b.shadow.matrix;t.directional[h]=M;h++}else if(b.isSpotLight){var M=e.get(b);M.position.setFromMatrixPosition(b.matrixWorld);M.position.applyMatrix4(v);M.color.copy(_).multiplyScalar(x);M.distance=w;M.direction.setFromMatrixPosition(b.matrixWorld);i.setFromMatrixPosition(b.target.matrixWorld);M.direction.sub(i);M.direction.transformDirection(v);M.coneCos=Math.cos(b.angle);M.penumbraCos=Math.cos(b.angle*(1-b.penumbra));M.decay=b.distance===0?0:b.decay;M.shadow=b.castShadow;if(b.castShadow){var S=b.shadow;M.shadowBias=S.bias;M.shadowRadius=S.radius;M.shadowMapSize=S.mapSize}t.spotShadowMap[d]=T;t.spotShadowMatrix[d]=b.shadow.matrix;t.spot[d]=M;d++}else if(b.isRectAreaLight){var M=e.get(b);M.color.copy(_).multiplyScalar(x/(b.width*b.height));M.position.setFromMatrixPosition(b.matrixWorld);M.position.applyMatrix4(v);n.identity();r.copy(b.matrixWorld);r.premultiply(v);n.extractRotation(r);M.halfWidth.set(b.width*.5,0,0);M.halfHeight.set(0,b.height*.5,0);M.halfWidth.applyMatrix4(n);M.halfHeight.applyMatrix4(n);t.rectArea[p]=M;p++}else if(b.isPointLight){
var M=e.get(b);M.position.setFromMatrixPosition(b.matrixWorld);M.position.applyMatrix4(v);M.color.copy(b.color).multiplyScalar(b.intensity);M.distance=b.distance;M.decay=b.distance===0?0:b.decay;M.shadow=b.castShadow;if(b.castShadow){var S=b.shadow;M.shadowBias=S.bias;M.shadowRadius=S.radius;M.shadowMapSize=S.mapSize;M.shadowCameraNear=S.camera.near;M.shadowCameraFar=S.camera.far}t.pointShadowMap[f]=T;t.pointShadowMatrix[f]=b.shadow.matrix;t.point[f]=M;f++}else if(b.isHemisphereLight){var M=e.get(b);M.direction.setFromMatrixPosition(b.matrixWorld);M.direction.transformDirection(v);M.direction.normalize();M.skyColor.copy(b.color).multiplyScalar(x);M.groundColor.copy(b.groundColor).multiplyScalar(x);t.hemi[m]=M;m++}}t.ambient[0]=l;t.ambient[1]=u;t.ambient[2]=c;t.directional.length=h;t.spot.length=d;t.rectArea.length=p;t.point.length=f;t.hemi.length=m;t.hash=h+","+f+","+d+","+p+","+m+","+o.length}return{setup:a,state:t}}function Oa(e,t){var i={};function r(r){var n=t.frame;var a=r.geometry;var o=e.get(r,a);if(i[o.id]!==n){if(a.isGeometry){o.updateFromObject(r)}e.update(o);i[o.id]=n}return o}function n(){i={}}return{update:r,clear:n}}function Ia(e){var t=e.split("\n");for(var i=0;i<t.length;i++){t[i]=i+1+": "+t[i]}return t.join("\n")}function Da(e,t,i){var r=e.createShader(t);e.shaderSource(r,i);e.compileShader(r);if(e.getShaderParameter(r,e.COMPILE_STATUS)===false){console.error("THREE.WebGLShader: Shader couldn't compile.")}if(e.getShaderInfoLog(r)!==""){console.warn("THREE.WebGLShader: gl.getShaderInfoLog()",t===e.VERTEX_SHADER?"vertex":"fragment",e.getShaderInfoLog(r),Ia(i))}return r}var Ba=0;function Ga(e){switch(e){case ut:return["Linear","( value )"];case ct:return["sRGB","( value )"];case ft:return["RGBE","( value )"];case pt:return["RGBM","( value, 7.0 )"];case mt:return["RGBM","( value, 16.0 )"];case vt:return["RGBD","( value, 256.0 )"];case ht:return["Gamma","( value, float( GAMMA_FACTOR ) )"];default:throw new Error("unsupported encoding: "+e)}}function ka(e,t){var i=Ga(t);return"vec4 "+e+"( vec4 value ) { return "+i[0]+"ToLinear"+i[1]+"; }"}function Na(e,t){var i=Ga(t);return"vec4 "+e+"( vec4 value ) { return LinearTo"+i[0]+i[1]+"; }"}function Ua(e,t){var i;switch(t){case te:i="Linear";break;case ie:i="Reinhard";break;case re:i="Uncharted2";break;case ne:i="OptimizedCineon";break;default:throw new Error("unsupported toneMapping: "+t)}return"vec3 "+e+"( vec3 color ) { return "+i+"ToneMapping( color ); }"}function Fa(e,t,i){e=e||{};var r=[e.derivatives||t.envMapCubeUV||t.bumpMap||t.normalMap||t.flatShading?"#extension GL_OES_standard_derivatives : enable":"",(e.fragDepth||t.logarithmicDepthBuffer)&&i.get("EXT_frag_depth")?"#extension GL_EXT_frag_depth : enable":"",e.drawBuffers&&i.get("WEBGL_draw_buffers")?"#extension GL_EXT_draw_buffers : require":"",(e.shaderTextureLOD||t.envMap)&&i.get("EXT_shader_texture_lod")?"#extension GL_EXT_shader_texture_lod : enable":""];return r.filter(Va).join("\n")}function Ha(e){var t=[];for(var i in e){var r=e[i];if(r===false)continue;t.push("#define "+i+" "+r)}return t.join("\n")}function za(e,t){var i={};var r=e.getProgramParameter(t,e.ACTIVE_ATTRIBUTES);for(var n=0;n<r;n++){var a=e.getActiveAttrib(t,n);var o=a.name;i[o]=e.getAttribLocation(t,o)}return i}function Va(e){return e!==""}function ja(e,t){return e.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights)}function Wa(e){var t=/^[ \t]*#include +<([\w\d.]+)>/gm;function i(e,t){var i=Sn[t];if(i===undefined){throw new Error("Can not resolve #include <"+t+">")}return Wa(i)}return e.replace(t,i)}function Xa(e){var t=/for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g;function i(e,t,i,r){var n="";for(var a=parseInt(t);a<parseInt(i);a++){n+=r.replace(/\[ i \]/g,"[ "+a+" ]")}return n}return e.replace(t,i)}function Ya(e,t,i,r,n,a){var o=e.context;var s=r.defines;var l=n.vertexShader;var u=n.fragmentShader;var c="SHADOWMAP_TYPE_BASIC";if(a.shadowMapType===h){c="SHADOWMAP_TYPE_PCF"}else if(a.shadowMapType===f){c="SHADOWMAP_TYPE_PCF_SOFT"}var d="ENVMAP_TYPE_CUBE";var p="ENVMAP_MODE_REFLECTION";var m="ENVMAP_BLENDING_MULTIPLY";if(a.envMap){switch(r.envMap.mapping){case oe:case se:d="ENVMAP_TYPE_CUBE";break;case he:case fe:d="ENVMAP_TYPE_CUBE_UV";break;case le:case ue:d="ENVMAP_TYPE_EQUIREC";break;case ce:d="ENVMAP_TYPE_SPHERE";break}switch(r.envMap.mapping){case se:case ue:p="ENVMAP_MODE_REFRACTION";break}switch(r.combine){case $:m="ENVMAP_BLENDING_MULTIPLY";break;case Q:m="ENVMAP_BLENDING_MIX";break;case J:m="ENVMAP_BLENDING_ADD";break}}var v=e.gammaFactor>0?e.gammaFactor:1;var g=Fa(r.extensions,a,t);var y=Ha(s);var b=o.createProgram();var _,x;if(r.isRawShaderMaterial){_=[y].filter(Va).join("\n");if(_.length>0){_+="\n"}x=[g,y].filter(Va).join("\n");if(x.length>0){x+="\n"}}else{_=["precision "+a.precision+" float;","precision "+a.precision+" int;","#define SHADER_NAME "+n.name,y,a.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+v,"#define MAX_BONES "+a.maxBones,a.useFog&&a.fog?"#define USE_FOG":"",a.useFog&&a.fogExp?"#define FOG_EXP2":"",a.map?"#define USE_MAP":"",a.envMap?"#define USE_ENVMAP":"",a.envMap?"#define "+p:"",a.lightMap?"#define USE_LIGHTMAP":"",a.aoMap?"#define USE_AOMAP":"",a.emissiveMap?"#define USE_EMISSIVEMAP":"",a.bumpMap?"#define USE_BUMPMAP":"",a.normalMap?"#define USE_NORMALMAP":"",a.displacementMap&&a.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",a.specularMap?"#define USE_SPECULARMAP":"",a.roughnessMap?"#define USE_ROUGHNESSMAP":"",a.metalnessMap?"#define USE_METALNESSMAP":"",a.alphaMap?"#define USE_ALPHAMAP":"",a.vertexColors?"#define USE_COLOR":"",a.flatShading?"#define FLAT_SHADED":"",a.skinning?"#define USE_SKINNING":"",a.useVertexTexture?"#define BONE_TEXTURE":"",a.morphTargets?"#define USE_MORPHTARGETS":"",a.morphNormals&&a.flatShading===false?"#define USE_MORPHNORMALS":"",a.doubleSided?"#define DOUBLE_SIDED":"",a.flipSided?"#define FLIP_SIDED":"","#define NUM_CLIPPING_PLANES "+a.numClippingPlanes,a.shadowMapEnabled?"#define USE_SHADOWMAP":"",a.shadowMapEnabled?"#define "+c:"",a.sizeAttenuation?"#define USE_SIZEATTENUATION":"",a.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",a.logarithmicDepthBuffer&&t.get("EXT_frag_depth")?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_COLOR","\tattribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(Va).join("\n");x=[g,"precision "+a.precision+" float;","precision "+a.precision+" int;","#define SHADER_NAME "+n.name,y,a.alphaTest?"#define ALPHATEST "+a.alphaTest:"","#define GAMMA_FACTOR "+v,a.useFog&&a.fog?"#define USE_FOG":"",a.useFog&&a.fogExp?"#define FOG_EXP2":"",a.map?"#define USE_MAP":"",a.envMap?"#define USE_ENVMAP":"",a.envMap?"#define "+d:"",a.envMap?"#define "+p:"",a.envMap?"#define "+m:"",a.lightMap?"#define USE_LIGHTMAP":"",a.aoMap?"#define USE_AOMAP":"",a.emissiveMap?"#define USE_EMISSIVEMAP":"",a.bumpMap?"#define USE_BUMPMAP":"",a.normalMap?"#define USE_NORMALMAP":"",a.specularMap?"#define USE_SPECULARMAP":"",a.roughnessMap?"#define USE_ROUGHNESSMAP":"",a.metalnessMap?"#define USE_METALNESSMAP":"",a.alphaMap?"#define USE_ALPHAMAP":"",a.vertexColors?"#define USE_COLOR":"",a.gradientMap?"#define USE_GRADIENTMAP":"",a.flatShading?"#define FLAT_SHADED":"",a.doubleSided?"#define DOUBLE_SIDED":"",a.flipSided?"#define FLIP_SIDED":"","#define NUM_CLIPPING_PLANES "+a.numClippingPlanes,"#define UNION_CLIPPING_PLANES "+(a.numClippingPlanes-a.numClipIntersection),a.shadowMapEnabled?"#define USE_SHADOWMAP":"",a.shadowMapEnabled?"#define "+c:"",a.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",a.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",a.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",a.logarithmicDepthBuffer&&t.get("EXT_frag_depth")?"#define USE_LOGDEPTHBUF_EXT":"",a.envMap&&t.get("EXT_shader_texture_lod")?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;",a.toneMapping!==ee?"#define TONE_MAPPING":"",a.toneMapping!==ee?Sn["tonemapping_pars_fragment"]:"",a.toneMapping!==ee?Ua("toneMapping",a.toneMapping):"",a.dithering?"#define DITHERING":"",a.outputEncoding||a.mapEncoding||a.envMapEncoding||a.emissiveMapEncoding?Sn["encodings_pars_fragment"]:"",a.mapEncoding?ka("mapTexelToLinear",a.mapEncoding):"",a.envMapEncoding?ka("envMapTexelToLinear",a.envMapEncoding):"",a.emissiveMapEncoding?ka("emissiveMapTexelToLinear",a.emissiveMapEncoding):"",a.outputEncoding?Na("linearToOutputTexel",a.outputEncoding):"",a.depthPacking?"#define DEPTH_PACKING "+r.depthPacking:"","\n"].filter(Va).join("\n")}l=Wa(l);l=ja(l,a);u=Wa(u);u=ja(u,a);if(!r.isShaderMaterial){l=Xa(l);u=Xa(u)}var w=_+l;var T=x+u;var M=Da(o,o.VERTEX_SHADER,w);var S=Da(o,o.FRAGMENT_SHADER,T);o.attachShader(b,M);o.attachShader(b,S);if(r.index0AttributeName!==undefined){o.bindAttribLocation(b,0,r.index0AttributeName)}else if(a.morphTargets===true){o.bindAttribLocation(b,0,"position")}o.linkProgram(b);var E=o.getProgramInfoLog(b);var P=o.getShaderInfoLog(M);var A=o.getShaderInfoLog(S);var C=true;var L=true;if(o.getProgramParameter(b,o.LINK_STATUS)===false){C=false;console.error("THREE.WebGLProgram: shader error: ",o.getError(),"gl.VALIDATE_STATUS",o.getProgramParameter(b,o.VALIDATE_STATUS),"gl.getProgramInfoLog",E,P,A)}else if(E!==""){console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()",E)}else if(P===""||A===""){L=false}if(L){this.diagnostics={runnable:C,material:r,programLog:E,vertexShader:{log:P,prefix:_},fragmentShader:{log:A,prefix:x}}}o.deleteShader(M);o.deleteShader(S);var R;this.getUniforms=function(){if(R===undefined){R=new yi(o,b,e)}return R};var O;this.getAttributes=function(){if(O===undefined){O=za(o,b)}return O};this.destroy=function(){o.deleteProgram(b);this.program=undefined};Object.defineProperties(this,{uniforms:{get:function(){console.warn("THREE.WebGLProgram: .uniforms is now .getUniforms().");return this.getUniforms()}},attributes:{get:function(){console.warn("THREE.WebGLProgram: .attributes is now .getAttributes().");return this.getAttributes()}}});this.id=Ba++;this.code=i;this.usedTimes=1;this.program=b;this.vertexShader=M;this.fragmentShader=S;return this}function qa(e,t,i){var r=[];var n={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"phong",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow"};var a=["precision","supportsVertexTextures","map","mapEncoding","envMap","envMapMode","envMapEncoding","lightMap","aoMap","emissiveMap","emissiveMapEncoding","bumpMap","normalMap","displacementMap","specularMap","roughnessMap","metalnessMap","gradientMap","alphaMap","combine","vertexColors","fog","useFog","fogExp","flatShading","sizeAttenuation","logarithmicDepthBuffer","skinning","maxBones","useVertexTexture","morphTargets","morphNormals","maxMorphTargets","maxMorphNormals","premultipliedAlpha","numDirLights","numPointLights","numSpotLights","numHemiLights","numRectAreaLights","shadowMapEnabled","shadowMapType","toneMapping","physicallyCorrectLights","alphaTest","doubleSided","flipSided","numClippingPlanes","numClipIntersection","depthPacking","dithering"];function o(e){var t=e.skeleton;var r=t.bones;if(i.floatVertexTextures){return 1024}else{var n=i.maxVertexUniforms;var a=Math.floor((n-20)/4);var o=Math.min(a,r.length);if(o<r.length){console.warn("THREE.WebGLRenderer: Skeleton has "+r.length+" bones. This GPU supports "+o+".");return 0}return o}}function s(e,t){var i;if(!e){i=ut}else if(e.isTexture){i=e.encoding}else if(e.isWebGLRenderTarget){console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead.");i=e.texture.encoding}if(i===ut&&t){i=ht}return i}this.getParameters=function(t,r,a,l,u,c,h){var f=n[t.type];var d=h.isSkinnedMesh?o(h):0;var v=i.precision;if(t.precision!==null){v=i.getMaxPrecision(t.precision);if(v!==t.precision){console.warn("THREE.WebGLProgram.getParameters:",t.precision,"not supported, using",v,"instead.")}}var g=e.getRenderTarget();var y={shaderID:f,precision:v,supportsVertexTextures:i.vertexTextures,outputEncoding:s(!g?null:g.texture,e.gammaOutput),map:!!t.map,mapEncoding:s(t.map,e.gammaInput),envMap:!!t.envMap,envMapMode:t.envMap&&t.envMap.mapping,envMapEncoding:s(t.envMap,e.gammaInput),envMapCubeUV:!!t.envMap&&(t.envMap.mapping===he||t.envMap.mapping===fe),lightMap:!!t.lightMap,aoMap:!!t.aoMap,emissiveMap:!!t.emissiveMap,emissiveMapEncoding:s(t.emissiveMap,e.gammaInput),bumpMap:!!t.bumpMap,normalMap:!!t.normalMap,displacementMap:!!t.displacementMap,roughnessMap:!!t.roughnessMap,metalnessMap:!!t.metalnessMap,specularMap:!!t.specularMap,alphaMap:!!t.alphaMap,gradientMap:!!t.gradientMap,combine:t.combine,vertexColors:t.vertexColors,fog:!!l,useFog:t.fog,fogExp:l&&l.isFogExp2,flatShading:t.flatShading,sizeAttenuation:t.sizeAttenuation,logarithmicDepthBuffer:i.logarithmicDepthBuffer,skinning:t.skinning&&d>0,maxBones:d,useVertexTexture:i.floatVertexTextures,morphTargets:t.morphTargets,morphNormals:t.morphNormals,maxMorphTargets:e.maxMorphTargets,maxMorphNormals:e.maxMorphNormals,numDirLights:r.directional.length,numPointLights:r.point.length,numSpotLights:r.spot.length,numRectAreaLights:r.rectArea.length,numHemiLights:r.hemi.length,numClippingPlanes:u,numClipIntersection:c,dithering:t.dithering,shadowMapEnabled:e.shadowMap.enabled&&h.receiveShadow&&a.length>0,shadowMapType:e.shadowMap.type,toneMapping:e.toneMapping,physicallyCorrectLights:e.physicallyCorrectLights,premultipliedAlpha:t.premultipliedAlpha,alphaTest:t.alphaTest,doubleSided:t.side===m,flipSided:t.side===p,depthPacking:t.depthPacking!==undefined?t.depthPacking:false};return y};this.getProgramCode=function(t,i){var r=[];if(i.shaderID){r.push(i.shaderID)}else{r.push(t.fragmentShader);r.push(t.vertexShader)}if(t.defines!==undefined){for(var n in t.defines){r.push(n);r.push(t.defines[n])}}for(var o=0;o<a.length;o++){r.push(i[a[o]])}r.push(t.onBeforeCompile.toString());r.push(e.gammaOutput);return r.join()};this.acquireProgram=function(i,n,a,o){var s;for(var l=0,u=r.length;l<u;l++){var c=r[l];if(c.code===o){s=c;++s.usedTimes;break}}if(s===undefined){s=new Ya(e,t,o,i,n,a);r.push(s)}return s};this.releaseProgram=function(e){if(--e.usedTimes===0){var t=r.indexOf(e);r[t]=r[r.length-1];r.pop();e.destroy()}};this.programs=r}function Za(e,t,i,r,n,a,o){var s=typeof WebGL2RenderingContext!=="undefined"&&e instanceof window.WebGL2RenderingContext;function l(e,t){if(e.width>t||e.height>t){var i=t/Math.max(e.width,e.height);var r=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");r.width=Math.floor(e.width*i);r.height=Math.floor(e.height*i);var n=r.getContext("2d");n.drawImage(e,0,0,e.width,e.height,0,0,r.width,r.height);console.warn("THREE.WebGLRenderer: image is too big ("+e.width+"x"+e.height+"). Resized to "+r.width+"x"+r.height,e);return r}return e}function u(e){return bt.isPowerOfTwo(e.width)&&bt.isPowerOfTwo(e.height)}function c(e){if(e instanceof HTMLImageElement||e instanceof HTMLCanvasElement||e instanceof ImageBitmap){var t=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");t.width=bt.floorPowerOfTwo(e.width);t.height=bt.floorPowerOfTwo(e.height);var i=t.getContext("2d");i.drawImage(e,0,0,t.width,t.height);console.warn("THREE.WebGLRenderer: image is not power of two ("+e.width+"x"+e.height+"). Resized to "+t.width+"x"+t.height,e);return t}return e}function h(e){return e.wrapS!==pe||e.wrapT!==pe||e.minFilter!==ve&&e.minFilter!==be}function f(e,t){return e.generateMipmaps&&t&&e.minFilter!==ve&&e.minFilter!==be}function d(t){if(t===ve||t===ge||t===ye){return e.NEAREST}return e.LINEAR}function p(e){var t=e.target;t.removeEventListener("dispose",p);v(t);o.textures--}function m(e){var t=e.target;t.removeEventListener("dispose",m);g(t);o.textures--}function v(t){var i=r.get(t);if(t.image&&i.__image__webglTextureCube){e.deleteTexture(i.__image__webglTextureCube)}else{if(i.__webglInit===undefined)return;e.deleteTexture(i.__webglTexture)}r.remove(t)}function g(t){var i=r.get(t);var n=r.get(t.texture);if(!t)return;if(n.__webglTexture!==undefined){e.deleteTexture(n.__webglTexture)}if(t.depthTexture){t.depthTexture.dispose()}if(t.isWebGLRenderTargetCube){for(var a=0;a<6;a++){e.deleteFramebuffer(i.__webglFramebuffer[a]);if(i.__webglDepthbuffer)e.deleteRenderbuffer(i.__webglDepthbuffer[a])}}else{e.deleteFramebuffer(i.__webglFramebuffer);if(i.__webglDepthbuffer)e.deleteRenderbuffer(i.__webglDepthbuffer)}r.remove(t.texture);r.remove(t)}function y(t,n){var a=r.get(t);if(t.version>0&&a.__version!==t.version){var o=t.image;if(o===undefined){console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined",t)}else if(o.complete===false){console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete",t)}else{w(a,t,n);return}}i.activeTexture(e.TEXTURE0+n);i.bindTexture(e.TEXTURE_2D,a.__webglTexture)}function b(t,s){var c=r.get(t);if(t.image.length===6){if(t.version>0&&c.__version!==t.version){if(!c.__image__webglTextureCube){t.addEventListener("dispose",p);c.__image__webglTextureCube=e.createTexture();o.textures++}i.activeTexture(e.TEXTURE0+s);i.bindTexture(e.TEXTURE_CUBE_MAP,c.__image__webglTextureCube);e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,t.flipY);var h=t&&t.isCompressedTexture;var d=t.image[0]&&t.image[0].isDataTexture;var m=[];for(var v=0;v<6;v++){if(!h&&!d){m[v]=l(t.image[v],n.maxCubemapSize)}else{m[v]=d?t.image[v].image:t.image[v]}}var g=m[0],y=u(g),b=a.convert(t.format),_=a.convert(t.type);x(e.TEXTURE_CUBE_MAP,t,y);for(var v=0;v<6;v++){if(!h){if(d){i.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+v,0,b,m[v].width,m[v].height,0,b,_,m[v].data)}else{i.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+v,0,b,b,_,m[v])}}else{var w,T=m[v].mipmaps;for(var M=0,S=T.length;M<S;M++){w=T[M];if(t.format!==Ge&&t.format!==Be){if(i.getCompressedTextureFormats().indexOf(b)>-1){i.compressedTexImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+v,M,b,w.width,w.height,0,w.data)}else{console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()")}}else{i.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+v,M,b,w.width,w.height,0,b,_,w.data)}}}}if(f(t,y)){e.generateMipmap(e.TEXTURE_CUBE_MAP)}c.__version=t.version;if(t.onUpdate)t.onUpdate(t)}else{i.activeTexture(e.TEXTURE0+s);i.bindTexture(e.TEXTURE_CUBE_MAP,c.__image__webglTextureCube)}}}function _(t,n){i.activeTexture(e.TEXTURE0+n);i.bindTexture(e.TEXTURE_CUBE_MAP,r.get(t).__webglTexture)}function x(i,o,s){var l;if(s){e.texParameteri(i,e.TEXTURE_WRAP_S,a.convert(o.wrapS));e.texParameteri(i,e.TEXTURE_WRAP_T,a.convert(o.wrapT));e.texParameteri(i,e.TEXTURE_MAG_FILTER,a.convert(o.magFilter));e.texParameteri(i,e.TEXTURE_MIN_FILTER,a.convert(o.minFilter))}else{e.texParameteri(i,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE);e.texParameteri(i,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE);if(o.wrapS!==pe||o.wrapT!==pe){console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping.",o)}e.texParameteri(i,e.TEXTURE_MAG_FILTER,d(o.magFilter));e.texParameteri(i,e.TEXTURE_MIN_FILTER,d(o.minFilter));if(o.minFilter!==ve&&o.minFilter!==be){console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.",o)}}l=t.get("EXT_texture_filter_anisotropic");if(l){if(o.type===Ae&&t.get("OES_texture_float_linear")===null)return;if(o.type===Ce&&t.get("OES_texture_half_float_linear")===null)return;if(o.anisotropy>1||r.get(o).__currentAnisotropy){e.texParameterf(i,l.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(o.anisotropy,n.getMaxAnisotropy()));r.get(o).__currentAnisotropy=o.anisotropy}}}function w(t,r,d){if(t.__webglInit===undefined){t.__webglInit=true;r.addEventListener("dispose",p);t.__webglTexture=e.createTexture();o.textures++}i.activeTexture(e.TEXTURE0+d);i.bindTexture(e.TEXTURE_2D,t.__webglTexture);e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,r.flipY);e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,r.premultiplyAlpha);e.pixelStorei(e.UNPACK_ALIGNMENT,r.unpackAlignment);var m=l(r.image,n.maxTextureSize);if(h(r)&&u(m)===false){m=c(m)}var v=u(m),g=a.convert(r.format),y=a.convert(r.type);x(e.TEXTURE_2D,r,v);var b,_=r.mipmaps;if(r.isDepthTexture){var w=e.DEPTH_COMPONENT;if(r.type===Ae){if(!s)throw new Error("Float Depth Texture only supported in WebGL2.0");w=e.DEPTH_COMPONENT32F}else if(s){w=e.DEPTH_COMPONENT16}if(r.format===Fe&&w===e.DEPTH_COMPONENT){if(r.type!==Se&&r.type!==Pe){console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture.");r.type=Se;y=a.convert(r.type)}}if(r.format===He){w=e.DEPTH_STENCIL;if(r.type!==Ie){console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture.");r.type=Ie;y=a.convert(r.type)}}i.texImage2D(e.TEXTURE_2D,0,w,m.width,m.height,0,g,y,null)}else if(r.isDataTexture){if(_.length>0&&v){for(var T=0,M=_.length;T<M;T++){b=_[T];i.texImage2D(e.TEXTURE_2D,T,g,b.width,b.height,0,g,y,b.data)}r.generateMipmaps=false}else{i.texImage2D(e.TEXTURE_2D,0,g,m.width,m.height,0,g,y,m.data)}}else if(r.isCompressedTexture){for(var T=0,M=_.length;T<M;T++){b=_[T];if(r.format!==Ge&&r.format!==Be){if(i.getCompressedTextureFormats().indexOf(g)>-1){i.compressedTexImage2D(e.TEXTURE_2D,T,g,b.width,b.height,0,b.data)}else{console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()")}}else{i.texImage2D(e.TEXTURE_2D,T,g,b.width,b.height,0,g,y,b.data)}}}else{if(_.length>0&&v){for(var T=0,M=_.length;T<M;T++){b=_[T];i.texImage2D(e.TEXTURE_2D,T,g,g,y,b)}r.generateMipmaps=false}else{i.texImage2D(e.TEXTURE_2D,0,g,g,y,m)}}if(f(r,v))e.generateMipmap(e.TEXTURE_2D);t.__version=r.version;if(r.onUpdate)r.onUpdate(r)}function T(t,n,o,s){var l=a.convert(n.texture.format);var u=a.convert(n.texture.type);i.texImage2D(s,0,l,n.width,n.height,0,l,u,null);e.bindFramebuffer(e.FRAMEBUFFER,t);e.framebufferTexture2D(e.FRAMEBUFFER,o,s,r.get(n.texture).__webglTexture,0);e.bindFramebuffer(e.FRAMEBUFFER,null)}function M(t,i){e.bindRenderbuffer(e.RENDERBUFFER,t);if(i.depthBuffer&&!i.stencilBuffer){e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_COMPONENT16,i.width,i.height);e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.RENDERBUFFER,t)}else if(i.depthBuffer&&i.stencilBuffer){e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_STENCIL,i.width,i.height);e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.RENDERBUFFER,t)}else{e.renderbufferStorage(e.RENDERBUFFER,e.RGBA4,i.width,i.height)}e.bindRenderbuffer(e.RENDERBUFFER,null)}function S(t,i){var n=i&&i.isWebGLRenderTargetCube;if(n)throw new Error("Depth Texture with cube render targets is not supported");e.bindFramebuffer(e.FRAMEBUFFER,t);if(!(i.depthTexture&&i.depthTexture.isDepthTexture)){throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture")}if(!r.get(i.depthTexture).__webglTexture||i.depthTexture.image.width!==i.width||i.depthTexture.image.height!==i.height){i.depthTexture.image.width=i.width;i.depthTexture.image.height=i.height;i.depthTexture.needsUpdate=true}y(i.depthTexture,0);var a=r.get(i.depthTexture).__webglTexture;if(i.depthTexture.format===Fe){e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.TEXTURE_2D,a,0)}else if(i.depthTexture.format===He){e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.TEXTURE_2D,a,0)}else{throw new Error("Unknown depthTexture format")}}function E(t){var i=r.get(t);var n=t.isWebGLRenderTargetCube===true;if(t.depthTexture){if(n)throw new Error("target.depthTexture not supported in Cube render targets");S(i.__webglFramebuffer,t)}else{if(n){i.__webglDepthbuffer=[];for(var a=0;a<6;a++){e.bindFramebuffer(e.FRAMEBUFFER,i.__webglFramebuffer[a]);i.__webglDepthbuffer[a]=e.createRenderbuffer();M(i.__webglDepthbuffer[a],t)}}else{e.bindFramebuffer(e.FRAMEBUFFER,i.__webglFramebuffer);i.__webglDepthbuffer=e.createRenderbuffer();M(i.__webglDepthbuffer,t)}}e.bindFramebuffer(e.FRAMEBUFFER,null)}function P(t){var n=r.get(t);var a=r.get(t.texture);t.addEventListener("dispose",m);a.__webglTexture=e.createTexture();o.textures++;var s=t.isWebGLRenderTargetCube===true;var l=u(t);if(s){n.__webglFramebuffer=[];for(var c=0;c<6;c++){n.__webglFramebuffer[c]=e.createFramebuffer()}}else{n.__webglFramebuffer=e.createFramebuffer()}if(s){i.bindTexture(e.TEXTURE_CUBE_MAP,a.__webglTexture);x(e.TEXTURE_CUBE_MAP,t.texture,l);for(var c=0;c<6;c++){T(n.__webglFramebuffer[c],t,e.COLOR_ATTACHMENT0,e.TEXTURE_CUBE_MAP_POSITIVE_X+c)}if(f(t.texture,l))e.generateMipmap(e.TEXTURE_CUBE_MAP);i.bindTexture(e.TEXTURE_CUBE_MAP,null)}else{i.bindTexture(e.TEXTURE_2D,a.__webglTexture);x(e.TEXTURE_2D,t.texture,l);T(n.__webglFramebuffer,t,e.COLOR_ATTACHMENT0,e.TEXTURE_2D);if(f(t.texture,l))e.generateMipmap(e.TEXTURE_2D);i.bindTexture(e.TEXTURE_2D,null)}if(t.depthBuffer){E(t)}}function A(t){var n=t.texture;var a=u(t);if(f(n,a)){var o=t.isWebGLRenderTargetCube?e.TEXTURE_CUBE_MAP:e.TEXTURE_2D;var s=r.get(n).__webglTexture;i.bindTexture(o,s);e.generateMipmap(o);i.bindTexture(o,null)}}this.setTexture2D=y;this.setTextureCube=b;this.setTextureCubeDynamic=_;this.setupRenderTarget=P;this.updateRenderTargetMipmap=A}function Ka(){var e={};function t(t){var i=t.uuid;var r=e[i];if(r===undefined){r={};e[i]=r}return r}function i(t){delete e[t.uuid]}function r(){e={}}return{get:t,remove:i,clear:r}}function $a(e,t,i){function r(){var t=false;var i=new Pt;var r=null;var n=new Pt(0,0,0,0);return{setMask:function(i){if(r!==i&&!t){e.colorMask(i,i,i,i);r=i}},setLocked:function(e){t=e},setClear:function(t,r,a,o,s){if(s===true){t*=o;r*=o;a*=o}i.set(t,r,a,o);if(n.equals(i)===false){e.clearColor(t,r,a,o);n.copy(i)}},reset:function(){t=false;r=null;n.set(-1,0,0,0)}}}function s(){var t=false;var i=null;var r=null;var n=null;return{setTest:function(t){if(t){se(e.DEPTH_TEST)}else{le(e.DEPTH_TEST)}},setMask:function(r){if(i!==r&&!t){e.depthMask(r);i=r}},setFunc:function(t){if(r!==t){if(t){switch(t){case V:e.depthFunc(e.NEVER);break;case j:e.depthFunc(e.ALWAYS);break;case W:e.depthFunc(e.LESS);break;case X:e.depthFunc(e.LEQUAL);break;case Y:e.depthFunc(e.EQUAL);break;case q:e.depthFunc(e.GEQUAL);break;case Z:e.depthFunc(e.GREATER);break;case K:e.depthFunc(e.NOTEQUAL);break;default:e.depthFunc(e.LEQUAL)}}else{e.depthFunc(e.LEQUAL)}r=t}},setLocked:function(e){t=e},setClear:function(t){if(n!==t){e.clearDepth(t);n=t}},reset:function(){t=false;i=null;r=null;n=null}}}function l(){var t=false;var i=null;var r=null;var n=null;var a=null;var o=null;var s=null;var l=null;var u=null;return{setTest:function(t){if(t){se(e.STENCIL_TEST)}else{le(e.STENCIL_TEST)}},setMask:function(r){if(i!==r&&!t){e.stencilMask(r);i=r}},setFunc:function(t,i,o){if(r!==t||n!==i||a!==o){e.stencilFunc(t,i,o);r=t;n=i;a=o}},setOp:function(t,i,r){if(o!==t||s!==i||l!==r){e.stencilOp(t,i,r);o=t;s=i;l=r}},setLocked:function(e){t=e},setClear:function(t){if(u!==t){e.clearStencil(t);u=t}},reset:function(){t=false;i=null;r=null;n=null;a=null;o=null;s=null;l=null;u=null}}}var u=new r;var c=new s;var h=new l;var f=e.getParameter(e.MAX_VERTEX_ATTRIBS);var d=new Uint8Array(f);var v=new Uint8Array(f);var g=new Uint8Array(f);var y={};var b=null;var _=null;var P=null;var A=null;var C=null;var L=null;var R=null;var O=null;var I=null;var D=false;var B=null;var G=null;var k=null;var N=null;var U=null;var F=e.getParameter(e.MAX_COMBINED_TEXTURE_IMAGE_UNITS);var H=parseFloat(/^WebGL\ ([0-9])/.exec(e.getParameter(e.VERSION))[1]);var z=parseFloat(H)>=1;var $=null;var Q={};var J=new Pt;var ee=new Pt;function te(t,i,r){var n=new Uint8Array(4);var a=e.createTexture();e.bindTexture(t,a);e.texParameteri(t,e.TEXTURE_MIN_FILTER,e.NEAREST);e.texParameteri(t,e.TEXTURE_MAG_FILTER,e.NEAREST);for(var o=0;o<r;o++){e.texImage2D(i+o,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,n)}return a}var ie={};ie[e.TEXTURE_2D]=te(e.TEXTURE_2D,e.TEXTURE_2D,1);ie[e.TEXTURE_CUBE_MAP]=te(e.TEXTURE_CUBE_MAP,e.TEXTURE_CUBE_MAP_POSITIVE_X,6);u.setClear(0,0,0,1);c.setClear(1);h.setClear(0);se(e.DEPTH_TEST);c.setFunc(X);de(false);pe(a);se(e.CULL_FACE);se(e.BLEND);he(w);function re(){for(var e=0,t=d.length;e<t;e++){d[e]=0}}function ne(i){d[i]=1;if(v[i]===0){e.enableVertexAttribArray(i);v[i]=1}if(g[i]!==0){var r=t.get("ANGLE_instanced_arrays");r.vertexAttribDivisorANGLE(i,0);g[i]=0}}function ae(i,r){d[i]=1;if(v[i]===0){e.enableVertexAttribArray(i);v[i]=1}if(g[i]!==r){var n=t.get("ANGLE_instanced_arrays");n.vertexAttribDivisorANGLE(i,r);g[i]=r}}function oe(){for(var t=0,i=v.length;t!==i;++t){if(v[t]!==d[t]){e.disableVertexAttribArray(t);v[t]=0}}}function se(t){if(y[t]!==true){e.enable(t);y[t]=true}}function le(t){if(y[t]!==false){e.disable(t);y[t]=false}}function ue(){if(b===null){b=[];if(t.get("WEBGL_compressed_texture_pvrtc")||t.get("WEBGL_compressed_texture_s3tc")||t.get("WEBGL_compressed_texture_etc1")){var i=e.getParameter(e.COMPRESSED_TEXTURE_FORMATS);for(var r=0;r<i.length;r++){b.push(i[r])}}}return b}function ce(t){if(_!==t){e.useProgram(t);_=t;return true}return false}function he(t,r,n,a,o,s,l,u){if(t!==x){se(e.BLEND)}else{le(e.BLEND)}if(t!==E){if(t!==P||u!==D){switch(t){case T:if(u){e.blendEquationSeparate(e.FUNC_ADD,e.FUNC_ADD);e.blendFuncSeparate(e.ONE,e.ONE,e.ONE,e.ONE)}else{e.blendEquation(e.FUNC_ADD);e.blendFunc(e.SRC_ALPHA,e.ONE)}break;case M:if(u){e.blendEquationSeparate(e.FUNC_ADD,e.FUNC_ADD);e.blendFuncSeparate(e.ZERO,e.ZERO,e.ONE_MINUS_SRC_COLOR,e.ONE_MINUS_SRC_ALPHA)}else{e.blendEquation(e.FUNC_ADD);e.blendFunc(e.ZERO,e.ONE_MINUS_SRC_COLOR)}break;case S:if(u){e.blendEquationSeparate(e.FUNC_ADD,e.FUNC_ADD);e.blendFuncSeparate(e.ZERO,e.SRC_COLOR,e.ZERO,e.SRC_ALPHA)}else{e.blendEquation(e.FUNC_ADD);e.blendFunc(e.ZERO,e.SRC_COLOR)}break;default:if(u){e.blendEquationSeparate(e.FUNC_ADD,e.FUNC_ADD);e.blendFuncSeparate(e.ONE,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA)}else{e.blendEquationSeparate(e.FUNC_ADD,e.FUNC_ADD);e.blendFuncSeparate(e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA)}}}A=null;C=null;L=null;R=null;O=null;I=null}else{o=o||r;s=s||n;l=l||a;if(r!==A||o!==R){e.blendEquationSeparate(i.convert(r),i.convert(o));A=r;R=o}if(n!==C||a!==L||s!==O||l!==I){e.blendFuncSeparate(i.convert(n),i.convert(a),i.convert(s),i.convert(l));C=n;L=a;O=s;I=l}}P=t;D=u}function fe(t){t.side===m?le(e.CULL_FACE):se(e.CULL_FACE);de(t.side===p);t.transparent===true?he(t.blending,t.blendEquation,t.blendSrc,t.blendDst,t.blendEquationAlpha,t.blendSrcAlpha,t.blendDstAlpha,t.premultipliedAlpha):he(x);c.setFunc(t.depthFunc);c.setTest(t.depthTest);c.setMask(t.depthWrite);u.setMask(t.colorWrite);ve(t.polygonOffset,t.polygonOffsetFactor,t.polygonOffsetUnits)}function de(t){if(B!==t){if(t){e.frontFace(e.CW)}else{e.frontFace(e.CCW)}B=t}}function pe(t){if(t!==n){se(e.CULL_FACE);if(t!==G){if(t===a){e.cullFace(e.BACK)}else if(t===o){e.cullFace(e.FRONT)}else{e.cullFace(e.FRONT_AND_BACK)}}}else{le(e.CULL_FACE)}G=t}
function me(t){if(t!==k){if(z)e.lineWidth(t);k=t}}function ve(t,i,r){if(t){se(e.POLYGON_OFFSET_FILL);if(N!==i||U!==r){e.polygonOffset(i,r);N=i;U=r}}else{le(e.POLYGON_OFFSET_FILL)}}function ge(t){if(t){se(e.SCISSOR_TEST)}else{le(e.SCISSOR_TEST)}}function ye(t){if(t===undefined)t=e.TEXTURE0+F-1;if($!==t){e.activeTexture(t);$=t}}function be(t,i){if($===null){ye()}var r=Q[$];if(r===undefined){r={type:undefined,texture:undefined};Q[$]=r}if(r.type!==t||r.texture!==i){e.bindTexture(t,i||ie[t]);r.type=t;r.texture=i}}function _e(){try{e.compressedTexImage2D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}}function xe(){try{e.texImage2D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}}function we(t){if(J.equals(t)===false){e.scissor(t.x,t.y,t.z,t.w);J.copy(t)}}function Te(t){if(ee.equals(t)===false){e.viewport(t.x,t.y,t.z,t.w);ee.copy(t)}}function Me(){for(var t=0;t<v.length;t++){if(v[t]===1){e.disableVertexAttribArray(t);v[t]=0}}y={};b=null;$=null;Q={};_=null;P=null;B=null;G=null;u.reset();c.reset();h.reset()}return{buffers:{color:u,depth:c,stencil:h},initAttributes:re,enableAttribute:ne,enableAttributeAndDivisor:ae,disableUnusedAttributes:oe,enable:se,disable:le,getCompressedTextureFormats:ue,useProgram:ce,setBlending:he,setMaterial:fe,setFlipSided:de,setCullFace:pe,setLineWidth:me,setPolygonOffset:ve,setScissorTest:ge,activeTexture:ye,bindTexture:be,compressedTexImage2D:_e,texImage2D:xe,scissor:we,viewport:Te,reset:Me}}function Qa(e,t,i){var r;function n(){if(r!==undefined)return r;var i=t.get("EXT_texture_filter_anisotropic");if(i!==null){r=e.getParameter(i.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else{r=0}return r}function a(t){if(t==="highp"){if(e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.HIGH_FLOAT).precision>0&&e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.HIGH_FLOAT).precision>0){return"highp"}t="mediump"}if(t==="mediump"){if(e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.MEDIUM_FLOAT).precision>0&&e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.MEDIUM_FLOAT).precision>0){return"mediump"}}return"lowp"}var o=i.precision!==undefined?i.precision:"highp";var s=a(o);if(s!==o){console.warn("THREE.WebGLRenderer:",o,"not supported, using",s,"instead.");o=s}var l=i.logarithmicDepthBuffer===true;var u=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS);var c=e.getParameter(e.MAX_VERTEX_TEXTURE_IMAGE_UNITS);var h=e.getParameter(e.MAX_TEXTURE_SIZE);var f=e.getParameter(e.MAX_CUBE_MAP_TEXTURE_SIZE);var d=e.getParameter(e.MAX_VERTEX_ATTRIBS);var p=e.getParameter(e.MAX_VERTEX_UNIFORM_VECTORS);var m=e.getParameter(e.MAX_VARYING_VECTORS);var v=e.getParameter(e.MAX_FRAGMENT_UNIFORM_VECTORS);var g=c>0;var y=!!t.get("OES_texture_float");var b=g&&y;return{getMaxAnisotropy:n,getMaxPrecision:a,precision:o,logarithmicDepthBuffer:l,maxTextures:u,maxVertexTextures:c,maxTextureSize:h,maxCubemapSize:f,maxAttributes:d,maxVertexUniforms:p,maxVaryings:m,maxFragmentUniforms:v,vertexTextures:g,floatFragmentTextures:y,floatVertexTextures:b}}function Ja(e,t,i,r){Wn.call(this);this.type="PerspectiveCamera";this.fov=e!==undefined?e:50;this.zoom=1;this.near=i!==undefined?i:.1;this.far=r!==undefined?r:2e3;this.focus=10;this.aspect=t!==undefined?t:1;this.view=null;this.filmGauge=35;this.filmOffset=0;this.updateProjectionMatrix()}Ja.prototype=Object.assign(Object.create(Wn.prototype),{constructor:Ja,isPerspectiveCamera:true,copy:function(e,t){Wn.prototype.copy.call(this,e,t);this.fov=e.fov;this.zoom=e.zoom;this.near=e.near;this.far=e.far;this.focus=e.focus;this.aspect=e.aspect;this.view=e.view===null?null:Object.assign({},e.view);this.filmGauge=e.filmGauge;this.filmOffset=e.filmOffset;return this},setFocalLength:function(e){var t=.5*this.getFilmHeight()/e;this.fov=bt.RAD2DEG*2*Math.atan(t);this.updateProjectionMatrix()},getFocalLength:function(){var e=Math.tan(bt.DEG2RAD*.5*this.fov);return.5*this.getFilmHeight()/e},getEffectiveFOV:function(){return bt.RAD2DEG*2*Math.atan(Math.tan(bt.DEG2RAD*.5*this.fov)/this.zoom)},getFilmWidth:function(){return this.filmGauge*Math.min(this.aspect,1)},getFilmHeight:function(){return this.filmGauge/Math.max(this.aspect,1)},setViewOffset:function(e,t,i,r,n,a){this.aspect=e/t;if(this.view===null){this.view={enabled:true,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}}this.view.enabled=true;this.view.fullWidth=e;this.view.fullHeight=t;this.view.offsetX=i;this.view.offsetY=r;this.view.width=n;this.view.height=a;this.updateProjectionMatrix()},clearViewOffset:function(){if(this.view!==null){this.view.enabled=false}this.updateProjectionMatrix()},updateProjectionMatrix:function(){var e=this.near,t=e*Math.tan(bt.DEG2RAD*.5*this.fov)/this.zoom,i=2*t,r=this.aspect*i,n=-.5*r,a=this.view;if(this.view!==null&&this.view.enabled){var o=a.fullWidth,s=a.fullHeight;n+=a.offsetX*r/o;t-=a.offsetY*i/s;r*=a.width/o;i*=a.height/s}var l=this.filmOffset;if(l!==0)n+=e*l/this.getFilmWidth();this.projectionMatrix.makePerspective(n,n+r,t,t-i,e,this.far)},toJSON:function(e){var t=jn.prototype.toJSON.call(this,e);t.object.fov=this.fov;t.object.zoom=this.zoom;t.object.near=this.near;t.object.far=this.far;t.object.focus=this.focus;t.object.aspect=this.aspect;if(this.view!==null)t.object.view=Object.assign({},this.view);t.object.filmGauge=this.filmGauge;t.object.filmOffset=this.filmOffset;return t}});function eo(e){Ja.call(this);this.cameras=e||[]}eo.prototype=Object.assign(Object.create(Ja.prototype),{constructor:eo,isArrayCamera:true});function to(e){var t=this;var i=null;var r=null;if(typeof window!=="undefined"&&"VRFrameData"in window){r=new window.VRFrameData}var n=new xt;var a=new xt;var o=new xt;var s=new Ja;s.bounds=new Pt(0,0,.5,1);s.layers.enable(1);var l=new Ja;l.bounds=new Pt(.5,0,.5,1);l.layers.enable(2);var u=new eo([s,l]);u.layers.enable(1);u.layers.enable(2);var c,h;function f(){if(i!==null&&i.isPresenting){var r=i.getEyeParameters("left");var n=r.renderWidth;var a=r.renderHeight;h=e.getPixelRatio();c=e.getSize();e.setDrawingBufferSize(n*2,a,1)}else if(t.enabled){e.setDrawingBufferSize(c.width,c.height,h)}}if(typeof window!=="undefined"){window.addEventListener("vrdisplaypresentchange",f,false)}this.enabled=false;this.standing=false;this.getDevice=function(){return i};this.setDevice=function(e){if(e!==undefined)i=e};this.getCamera=function(e){if(i===null)return e;i.depthNear=e.near;i.depthFar=e.far;i.getFrameData(r);var t=r.pose;if(t.position!==null){e.position.fromArray(t.position)}else{e.position.set(0,0,0)}if(t.orientation!==null){e.quaternion.fromArray(t.orientation)}e.updateMatrixWorld();var c=i.stageParameters;if(this.standing&&c){a.fromArray(c.sittingToStandingTransform);o.getInverse(a);e.matrixWorld.multiply(a);e.matrixWorldInverse.multiply(o)}if(i.isPresenting===false)return e;s.near=e.near;l.near=e.near;s.far=e.far;l.far=e.far;u.matrixWorld.copy(e.matrixWorld);u.matrixWorldInverse.copy(e.matrixWorldInverse);s.matrixWorldInverse.fromArray(r.leftViewMatrix);l.matrixWorldInverse.fromArray(r.rightViewMatrix);if(this.standing&&c){s.matrixWorldInverse.multiply(o);l.matrixWorldInverse.multiply(o)}var h=e.parent;if(h!==null){n.getInverse(h.matrixWorld);s.matrixWorldInverse.multiply(n);l.matrixWorldInverse.multiply(n)}s.matrixWorld.getInverse(s.matrixWorldInverse);l.matrixWorld.getInverse(l.matrixWorldInverse);s.projectionMatrix.fromArray(r.leftProjectionMatrix);l.projectionMatrix.fromArray(r.rightProjectionMatrix);u.projectionMatrix.copy(s.projectionMatrix);var f=i.getLayers();if(f.length){var d=f[0];if(d.leftBounds!==null&&d.leftBounds.length===4){s.bounds.fromArray(d.leftBounds)}if(d.rightBounds!==null&&d.rightBounds.length===4){l.bounds.fromArray(d.rightBounds)}}return u};this.getStandingMatrix=function(){return a};this.submitFrame=function(){if(i&&i.isPresenting)i.submitFrame()};this.dispose=function(){if(typeof window!=="undefined"){window.removeEventListener("vrdisplaypresentchange",f)}}}function io(e){var t={};return{get:function(i){if(t[i]!==undefined){return t[i]}var r;switch(i){case"WEBGL_depth_texture":r=e.getExtension("WEBGL_depth_texture")||e.getExtension("MOZ_WEBGL_depth_texture")||e.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=e.getExtension("WEBGL_compressed_texture_s3tc")||e.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;case"WEBGL_compressed_texture_etc1":r=e.getExtension("WEBGL_compressed_texture_etc1");break;default:r=e.getExtension(i)}if(r===null){console.warn("THREE.WebGLRenderer: "+i+" extension not supported.")}t[i]=r;return r}}}function ro(){var e=this,t=null,i=0,r=false,n=false,a=new kn,o=new Mt,s={value:null,needsUpdate:false};this.uniform=s;this.numPlanes=0;this.numIntersection=0;this.init=function(e,n,a){var o=e.length!==0||n||i!==0||r;r=n;t=u(e,a,0);i=e.length;return o};this.beginShadows=function(){n=true;u(null)};this.endShadows=function(){n=false;l()};this.setState=function(e,a,o,c,h,f){if(!r||e===null||e.length===0||n&&!o){if(n){u(null)}else{l()}}else{var d=n?0:i,p=d*4,m=h.clippingState||null;s.value=m;m=u(e,c,p,f);for(var v=0;v!==p;++v){m[v]=t[v]}h.clippingState=m;this.numIntersection=a?this.numPlanes:0;this.numPlanes+=d}};function l(){if(s.value!==t){s.value=t;s.needsUpdate=i>0}e.numPlanes=i;e.numIntersection=0}function u(t,i,r,n){var l=t!==null?t.length:0,u=null;if(l!==0){u=s.value;if(n!==true||u===null){var c=r+l*4,h=i.matrixWorldInverse;o.getNormalMatrix(h);if(u===null||u.length<c){u=new Float32Array(c)}for(var f=0,d=r;f!==l;++f,d+=4){a.copy(t[f]).applyMatrix4(h,o);a.normal.toArray(u,d);u[d+3]=a.constant}}s.value=u;s.needsUpdate=true}e.numPlanes=l;return u}}function no(e,t){function i(i){var r;if(i===de)return e.REPEAT;if(i===pe)return e.CLAMP_TO_EDGE;if(i===me)return e.MIRRORED_REPEAT;if(i===ve)return e.NEAREST;if(i===ge)return e.NEAREST_MIPMAP_NEAREST;if(i===ye)return e.NEAREST_MIPMAP_LINEAR;if(i===be)return e.LINEAR;if(i===_e)return e.LINEAR_MIPMAP_NEAREST;if(i===xe)return e.LINEAR_MIPMAP_LINEAR;if(i===we)return e.UNSIGNED_BYTE;if(i===Le)return e.UNSIGNED_SHORT_4_4_4_4;if(i===Re)return e.UNSIGNED_SHORT_5_5_5_1;if(i===Oe)return e.UNSIGNED_SHORT_5_6_5;if(i===Te)return e.BYTE;if(i===Me)return e.SHORT;if(i===Se)return e.UNSIGNED_SHORT;if(i===Ee)return e.INT;if(i===Pe)return e.UNSIGNED_INT;if(i===Ae)return e.FLOAT;if(i===Ce){r=t.get("OES_texture_half_float");if(r!==null)return r.HALF_FLOAT_OES}if(i===De)return e.ALPHA;if(i===Be)return e.RGB;if(i===Ge)return e.RGBA;if(i===ke)return e.LUMINANCE;if(i===Ne)return e.LUMINANCE_ALPHA;if(i===Fe)return e.DEPTH_COMPONENT;if(i===He)return e.DEPTH_STENCIL;if(i===P)return e.FUNC_ADD;if(i===A)return e.FUNC_SUBTRACT;if(i===C)return e.FUNC_REVERSE_SUBTRACT;if(i===O)return e.ZERO;if(i===I)return e.ONE;if(i===D)return e.SRC_COLOR;if(i===B)return e.ONE_MINUS_SRC_COLOR;if(i===G)return e.SRC_ALPHA;if(i===k)return e.ONE_MINUS_SRC_ALPHA;if(i===N)return e.DST_ALPHA;if(i===U)return e.ONE_MINUS_DST_ALPHA;if(i===F)return e.DST_COLOR;if(i===H)return e.ONE_MINUS_DST_COLOR;if(i===z)return e.SRC_ALPHA_SATURATE;if(i===ze||i===Ve||i===je||i===We){r=t.get("WEBGL_compressed_texture_s3tc");if(r!==null){if(i===ze)return r.COMPRESSED_RGB_S3TC_DXT1_EXT;if(i===Ve)return r.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(i===je)return r.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(i===We)return r.COMPRESSED_RGBA_S3TC_DXT5_EXT}}if(i===Xe||i===Ye||i===qe||i===Ze){r=t.get("WEBGL_compressed_texture_pvrtc");if(r!==null){if(i===Xe)return r.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(i===Ye)return r.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(i===qe)return r.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(i===Ze)return r.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}}if(i===Ke){r=t.get("WEBGL_compressed_texture_etc1");if(r!==null)return r.COMPRESSED_RGB_ETC1_WEBGL}if(i===L||i===R){r=t.get("EXT_blend_minmax");if(r!==null){if(i===L)return r.MIN_EXT;if(i===R)return r.MAX_EXT}}if(i===Ie){r=t.get("WEBGL_depth_texture");if(r!==null)return r.UNSIGNED_INT_24_8_WEBGL}return 0}return{convert:i}}function ao(e){console.log("THREE.WebGLRenderer",i);e=e||{};var t=e.canvas!==undefined?e.canvas:document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),r=e.context!==undefined?e.context:null,n=e.alpha!==undefined?e.alpha:false,a=e.depth!==undefined?e.depth:true,o=e.stencil!==undefined?e.stencil:true,s=e.antialias!==undefined?e.antialias:false,u=e.premultipliedAlpha!==undefined?e.premultipliedAlpha:true,c=e.preserveDrawingBuffer!==undefined?e.preserveDrawingBuffer:false;var h=[];var f=[];var d=null;var p=[];var m=[];this.domElement=t;this.context=null;this.autoClear=true;this.autoClearColor=true;this.autoClearDepth=true;this.autoClearStencil=true;this.sortObjects=true;this.clippingPlanes=[];this.localClippingEnabled=false;this.gammaFactor=2;this.gammaInput=false;this.gammaOutput=false;this.physicallyCorrectLights=false;this.toneMapping=te;this.toneMappingExposure=1;this.toneMappingWhitePoint=1;this.maxMorphTargets=8;this.maxMorphNormals=4;var v=this,g=false,b=null,_=null,x=-1,w="",T=null,M=null,S=new Pt,E=new Pt,P=null,A=0,C=t.width,L=t.height,R=1,O=new Pt(0,0,C,L),I=new Pt(0,0,C,L),D=false,B=new Nn,G=new ro,k=false,N=false,U=new xt,F=new Tt,H={geometries:0,textures:0},z={frame:0,calls:0,vertices:0,faces:0,points:0};this.info={render:z,memory:H,programs:null};function V(){return b===null?R:1}var j;try{var W={alpha:n,depth:a,stencil:o,antialias:s,premultipliedAlpha:u,preserveDrawingBuffer:c};j=r||t.getContext("webgl",W)||t.getContext("experimental-webgl",W);if(j===null){if(t.getContext("webgl")!==null){throw"Error creating WebGL context with your selected attributes."}else{throw"Error creating WebGL context."}}if(j.getShaderPrecisionFormat===undefined){j.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}}}t.addEventListener("webglcontextlost",pe,false);t.addEventListener("webglcontextrestored",me,false)}catch(e){console.error("THREE.WebGLRenderer: "+e)}var X,Y,q;var Z,K,$,Q,J,ee;var ie,re;var ne,ae,oe,se;var le,ue;var ce;function he(){X=new io(j);X.get("WEBGL_depth_texture");X.get("OES_texture_float");X.get("OES_texture_float_linear");X.get("OES_texture_half_float");X.get("OES_texture_half_float_linear");X.get("OES_standard_derivatives");X.get("OES_element_index_uint");X.get("ANGLE_instanced_arrays");ce=new no(j,X);Y=new Qa(j,X,e);q=new $a(j,X,ce);q.scissor(E.copy(I).multiplyScalar(R));q.viewport(S.copy(O).multiplyScalar(R));Z=new Ka;K=new Za(j,X,q,Z,Y,ce,H);$=new Fn(j);Q=new Ca(j,$,H);J=new Oa(Q,z);ae=new Ea(j);ie=new qa(v,X,Y);ee=new Ra;re=new Ma;ne=new _a(v,q,Q,u);oe=new Aa(j,X,z);se=new Pa(j,X,z);le=new An(v,j,q,K,Y);ue=new Ln(v,j,q,K,Y);v.info.programs=ie.programs;v.context=j;v.capabilities=Y;v.extensions=X;v.properties=Z;v.renderLists=re;v.state=q}he();var fe=new to(v);this.vr=fe;var de=new Un(v,J,Y.maxTextureSize);this.shadowMap=de;this.getContext=function(){return j};this.getContextAttributes=function(){return j.getContextAttributes()};this.forceContextLoss=function(){var e=X.get("WEBGL_lose_context");if(e)e.loseContext()};this.forceContextRestore=function(){var e=X.get("WEBGL_lose_context");if(e)e.restoreContext()};this.getPixelRatio=function(){return R};this.setPixelRatio=function(e){if(e===undefined)return;R=e;this.setSize(C,L,false)};this.getSize=function(){return{width:C,height:L}};this.setSize=function(e,i,r){var n=fe.getDevice();if(n&&n.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}C=e;L=i;t.width=e*R;t.height=i*R;if(r!==false){t.style.width=e+"px";t.style.height=i+"px"}this.setViewport(0,0,e,i)};this.getDrawingBufferSize=function(){return{width:C*R,height:L*R}};this.setDrawingBufferSize=function(e,i,r){C=e;L=i;R=r;t.width=e*r;t.height=i*r;this.setViewport(0,0,e,i)};this.setViewport=function(e,t,i,r){O.set(e,L-t-r,i,r);q.viewport(S.copy(O).multiplyScalar(R))};this.setScissor=function(e,t,i,r){I.set(e,L-t-r,i,r);q.scissor(E.copy(I).multiplyScalar(R))};this.setScissorTest=function(e){q.setScissorTest(D=e)};this.getClearColor=function(){return ne.getClearColor()};this.setClearColor=function(){ne.setClearColor.apply(ne,arguments)};this.getClearAlpha=function(){return ne.getClearAlpha()};this.setClearAlpha=function(){ne.setClearAlpha.apply(ne,arguments)};this.clear=function(e,t,i){var r=0;if(e===undefined||e)r|=j.COLOR_BUFFER_BIT;if(t===undefined||t)r|=j.DEPTH_BUFFER_BIT;if(i===undefined||i)r|=j.STENCIL_BUFFER_BIT;j.clear(r)};this.clearColor=function(){this.clear(true,false,false)};this.clearDepth=function(){this.clear(false,true,false)};this.clearStencil=function(){this.clear(false,false,true)};this.clearTarget=function(e,t,i,r){this.setRenderTarget(e);this.clear(t,i,r)};this.dispose=function(){t.removeEventListener("webglcontextlost",pe,false);t.removeEventListener("webglcontextrestored",me,false);re.dispose();fe.dispose()};function pe(e){e.preventDefault();console.log("THREE.WebGLRenderer: Context Lost.");g=true}function me(){console.log("THREE.WebGLRenderer: Context Restored.");g=false;he()}function ve(e){var t=e.target;t.removeEventListener("dispose",ve);ge(t)}function ge(e){ye(e);Z.remove(e)}function ye(e){var t=Z.get(e).program;e.program=undefined;if(t!==undefined){ie.releaseProgram(t)}}function be(e,t,i){e.render(function(e){v.renderBufferImmediate(e,t,i)})}this.renderBufferImmediate=function(e,t,i){q.initAttributes();var r=Z.get(e);if(e.hasPositions&&!r.position)r.position=j.createBuffer();if(e.hasNormals&&!r.normal)r.normal=j.createBuffer();if(e.hasUvs&&!r.uv)r.uv=j.createBuffer();if(e.hasColors&&!r.color)r.color=j.createBuffer();var n=t.getAttributes();if(e.hasPositions){j.bindBuffer(j.ARRAY_BUFFER,r.position);j.bufferData(j.ARRAY_BUFFER,e.positionArray,j.DYNAMIC_DRAW);q.enableAttribute(n.position);j.vertexAttribPointer(n.position,3,j.FLOAT,false,0,0)}if(e.hasNormals){j.bindBuffer(j.ARRAY_BUFFER,r.normal);if(!i.isMeshPhongMaterial&&!i.isMeshStandardMaterial&&!i.isMeshNormalMaterial&&i.flatShading===true){for(var a=0,o=e.count*3;a<o;a+=9){var s=e.normalArray;var l=(s[a+0]+s[a+3]+s[a+6])/3;var u=(s[a+1]+s[a+4]+s[a+7])/3;var c=(s[a+2]+s[a+5]+s[a+8])/3;s[a+0]=l;s[a+1]=u;s[a+2]=c;s[a+3]=l;s[a+4]=u;s[a+5]=c;s[a+6]=l;s[a+7]=u;s[a+8]=c}}j.bufferData(j.ARRAY_BUFFER,e.normalArray,j.DYNAMIC_DRAW);q.enableAttribute(n.normal);j.vertexAttribPointer(n.normal,3,j.FLOAT,false,0,0)}if(e.hasUvs&&i.map){j.bindBuffer(j.ARRAY_BUFFER,r.uv);j.bufferData(j.ARRAY_BUFFER,e.uvArray,j.DYNAMIC_DRAW);q.enableAttribute(n.uv);j.vertexAttribPointer(n.uv,2,j.FLOAT,false,0,0)}if(e.hasColors&&i.vertexColors!==y){j.bindBuffer(j.ARRAY_BUFFER,r.color);j.bufferData(j.ARRAY_BUFFER,e.colorArray,j.DYNAMIC_DRAW);q.enableAttribute(n.color);j.vertexAttribPointer(n.color,3,j.FLOAT,false,0,0)}q.disableUnusedAttributes();j.drawArrays(j.TRIANGLES,0,e.count);e.count=0};this.renderBufferDirect=function(e,t,i,r,n,a){q.setMaterial(r);var o=Oe(e,t,r,n);var s=i.id+"_"+o.id+"_"+(r.wireframe===true);var l=false;if(s!==w){w=s;l=true}if(n.morphTargetInfluences){ae.update(n,i,r,o);l=true}var u=i.index;var c=i.attributes.position;var h=1;if(r.wireframe===true){u=Q.getWireframeAttribute(i);h=2}var f;var d=oe;if(u!==null){f=$.get(u);d=se;d.setIndex(f)}if(l){_e(r,o,i);if(u!==null){j.bindBuffer(j.ELEMENT_ARRAY_BUFFER,f.buffer)}}var p=0;if(u!==null){p=u.count}else if(c!==undefined){p=c.count}var m=i.drawRange.start*h;var v=i.drawRange.count*h;var g=a!==null?a.start*h:0;var y=a!==null?a.count*h:Infinity;var b=Math.max(m,g);var _=Math.min(p,m+v,g+y)-1;var x=Math.max(0,_-b+1);if(x===0)return;if(n.isMesh){if(r.wireframe===true){q.setLineWidth(r.wireframeLinewidth*V());d.setMode(j.LINES)}else{switch(n.drawMode){case ot:d.setMode(j.TRIANGLES);break;case st:d.setMode(j.TRIANGLE_STRIP);break;case lt:d.setMode(j.TRIANGLE_FAN);break}}}else if(n.isLine){var T=r.linewidth;if(T===undefined)T=1;q.setLineWidth(T*V());if(n.isLineSegments){d.setMode(j.LINES)}else if(n.isLineLoop){d.setMode(j.LINE_LOOP)}else{d.setMode(j.LINE_STRIP)}}else if(n.isPoints){d.setMode(j.POINTS)}if(i&&i.isInstancedBufferGeometry){if(i.maxInstancedCount>0){d.renderInstances(i,b,x)}}else{d.render(b,x)}};function _e(e,t,i,r){if(i&&i.isInstancedBufferGeometry){if(X.get("ANGLE_instanced_arrays")===null){console.error("THREE.WebGLRenderer.setupVertexAttributes: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}}if(r===undefined)r=0;q.initAttributes();var n=i.attributes;var a=t.getAttributes();var o=e.defaultAttributeValues;for(var s in a){var l=a[s];if(l>=0){var u=n[s];if(u!==undefined){var c=u.normalized;var h=u.itemSize;var f=$.get(u);if(f===undefined)continue;var d=f.buffer;var p=f.type;var m=f.bytesPerElement;if(u.isInterleavedBufferAttribute){var v=u.data;var g=v.stride;var y=u.offset;if(v&&v.isInstancedInterleavedBuffer){q.enableAttributeAndDivisor(l,v.meshPerAttribute);if(i.maxInstancedCount===undefined){i.maxInstancedCount=v.meshPerAttribute*v.count}}else{q.enableAttribute(l)}j.bindBuffer(j.ARRAY_BUFFER,d);j.vertexAttribPointer(l,h,p,c,g*m,(r*g+y)*m)}else{if(u.isInstancedBufferAttribute){q.enableAttributeAndDivisor(l,u.meshPerAttribute);if(i.maxInstancedCount===undefined){i.maxInstancedCount=u.meshPerAttribute*u.count}}else{q.enableAttribute(l)}j.bindBuffer(j.ARRAY_BUFFER,d);j.vertexAttribPointer(l,h,p,c,0,r*h*m)}}else if(o!==undefined){var b=o[s];if(b!==undefined){switch(b.length){case 2:j.vertexAttrib2fv(l,b);break;case 3:j.vertexAttrib3fv(l,b);break;case 4:j.vertexAttrib4fv(l,b);break;default:j.vertexAttrib1fv(l,b)}}}}}q.disableUnusedAttributes()}this.compile=function(e,t){h.length=0;f.length=0;e.traverse(function(e){if(e.isLight){h.push(e);if(e.castShadow){f.push(e)}}});ee.setup(h,f,t);e.traverse(function(t){if(t.material){if(Array.isArray(t.material)){for(var i=0;i<t.material.length;i++){Re(t.material[i],e.fog,t)}}else{Re(t.material,e.fog,t)}}})};var xe=false;var Te=null;function Me(){if(xe)return;var e=fe.getDevice();if(e&&e.isPresenting){e.requestAnimationFrame(Se)}else{window.requestAnimationFrame(Se)}xe=true}function Se(e){if(Te!==null)Te(e);var t=fe.getDevice();if(t&&t.isPresenting){t.requestAnimationFrame(Se)}else{window.requestAnimationFrame(Se)}}this.animate=function(e){Te=e;Me()};this.render=function(e,t,i,r){if(!(t&&t.isCamera)){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(g)return;w="";x=-1;T=null;if(e.autoUpdate===true)e.updateMatrixWorld();if(t.parent===null)t.updateMatrixWorld();if(fe.enabled){t=fe.getCamera(t)}U.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse);B.setFromMatrix(U);h.length=0;f.length=0;p.length=0;m.length=0;N=this.localClippingEnabled;k=G.init(this.clippingPlanes,N,t);d=re.get(e,t);d.init();Ee(e,t,v.sortObjects);if(v.sortObjects===true){d.sort()}if(k)G.beginShadows();de.render(f,e,t);ee.setup(h,f,t);if(k)G.endShadows();z.frame++;z.calls=0;z.vertices=0;z.faces=0;z.points=0;if(i===undefined){i=null}this.setRenderTarget(i);ne.render(d,e,t,r);var n=d.opaque;var a=d.transparent;if(e.overrideMaterial){var o=e.overrideMaterial;if(n.length)Pe(n,e,t,o);if(a.length)Pe(a,e,t,o)}else{if(n.length)Pe(n,e,t);if(a.length)Pe(a,e,t)}ue.render(p,e,t);le.render(m,e,t,S);if(i){K.updateRenderTargetMipmap(i)}q.buffers.depth.setTest(true);q.buffers.depth.setMask(true);q.buffers.color.setMask(true);q.setPolygonOffset(false);if(fe.enabled){fe.submitFrame()}};function Ee(e,t,i){if(e.visible===false)return;var r=e.layers.test(t.layers);if(r){if(e.isLight){h.push(e);if(e.castShadow){f.push(e)}}else if(e.isSprite){if(!e.frustumCulled||B.intersectsSprite(e)){p.push(e)}}else if(e.isLensFlare){m.push(e)}else if(e.isImmediateRenderObject){if(i){F.setFromMatrixPosition(e.matrixWorld).applyMatrix4(U)}d.push(e,null,e.material,F.z,null)}else if(e.isMesh||e.isLine||e.isPoints){if(e.isSkinnedMesh){e.skeleton.update()}if(!e.frustumCulled||B.intersectsObject(e)){if(i){F.setFromMatrixPosition(e.matrixWorld).applyMatrix4(U)}var n=J.update(e);var a=e.material;if(Array.isArray(a)){var o=n.groups;for(var s=0,l=o.length;s<l;s++){var u=o[s];var c=a[u.materialIndex];if(c&&c.visible){d.push(e,n,c,F.z,u)}}}else if(a.visible){d.push(e,n,a,F.z,null)}}}}var v=e.children;for(var s=0,l=v.length;s<l;s++){Ee(v[s],t,i)}}function Pe(e,t,i,r){for(var n=0,a=e.length;n<a;n++){var o=e[n];var s=o.object;var l=o.geometry;var u=r===undefined?o.material:r;var c=o.group;if(i.isArrayCamera){M=i;var h=i.cameras;for(var f=0,d=h.length;f<d;f++){var p=h[f];if(s.layers.test(p.layers)){var m=p.bounds;var v=m.x*C;var g=m.y*L;var y=m.z*C;var b=m.w*L;q.viewport(S.set(v,g,y,b).multiplyScalar(R));Le(s,t,p,l,u,c)}}}else{M=null;Le(s,t,i,l,u,c)}}}function Le(e,t,i,r,n,a){e.onBeforeRender(v,t,i,r,n,a);e.modelViewMatrix.multiplyMatrices(i.matrixWorldInverse,e.matrixWorld);e.normalMatrix.getNormalMatrix(e.modelViewMatrix);if(e.isImmediateRenderObject){q.setMaterial(n);var o=Oe(i,t.fog,n,e);w="";be(e,o,n)}else{v.renderBufferDirect(i,t.fog,r,n,e,a)}e.onAfterRender(v,t,i,r,n,a)}function Re(e,t,i){var r=Z.get(e);var n=ie.getParameters(e,ee.state,f,t,G.numPlanes,G.numIntersection,i);var a=ie.getProgramCode(e,n);var o=r.program;var s=true;if(o===undefined){e.addEventListener("dispose",ve)}else if(o.code!==a){ye(e)}else if(n.shaderID!==undefined){return}else{s=false}if(s){if(n.shaderID){var l=En[n.shaderID];r.shader={name:e.type,uniforms:wi.clone(l.uniforms),vertexShader:l.vertexShader,fragmentShader:l.fragmentShader}}else{r.shader={name:e.type,uniforms:e.uniforms,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader}}e.onBeforeCompile(r.shader);o=ie.acquireProgram(e,r.shader,n,a);r.program=o;e.program=o}var u=o.getAttributes();if(e.morphTargets){e.numSupportedMorphTargets=0;for(var c=0;c<v.maxMorphTargets;c++){if(u["morphTarget"+c]>=0){e.numSupportedMorphTargets++}}}if(e.morphNormals){e.numSupportedMorphNormals=0;for(var c=0;c<v.maxMorphNormals;c++){if(u["morphNormal"+c]>=0){e.numSupportedMorphNormals++}}}var h=r.shader.uniforms;if(!e.isShaderMaterial&&!e.isRawShaderMaterial||e.clipping===true){r.numClippingPlanes=G.numPlanes;r.numIntersection=G.numIntersection;h.clippingPlanes=G.uniform}r.fog=t;r.lightsHash=ee.state.hash;if(e.lights){h.ambientLightColor.value=ee.state.ambient;h.directionalLights.value=ee.state.directional;h.spotLights.value=ee.state.spot;h.rectAreaLights.value=ee.state.rectArea;h.pointLights.value=ee.state.point;h.hemisphereLights.value=ee.state.hemi;h.directionalShadowMap.value=ee.state.directionalShadowMap;h.directionalShadowMatrix.value=ee.state.directionalShadowMatrix;h.spotShadowMap.value=ee.state.spotShadowMap;h.spotShadowMatrix.value=ee.state.spotShadowMatrix;h.pointShadowMap.value=ee.state.pointShadowMap;h.pointShadowMatrix.value=ee.state.pointShadowMatrix}var d=r.program.getUniforms(),p=yi.seqWithValue(d.seq,h);r.uniformsList=p}function Oe(e,t,i,r){A=0;var n=Z.get(i);if(k){if(N||e!==T){var a=e===T&&i.id===x;G.setState(i.clippingPlanes,i.clipIntersection,i.clipShadows,e,n,a)}}if(i.needsUpdate===false){if(n.program===undefined){i.needsUpdate=true}else if(i.fog&&n.fog!==t){i.needsUpdate=true}else if(i.lights&&n.lightsHash!==ee.state.hash){i.needsUpdate=true}else if(n.numClippingPlanes!==undefined&&(n.numClippingPlanes!==G.numPlanes||n.numIntersection!==G.numIntersection)){i.needsUpdate=true}}if(i.needsUpdate){Re(i,t,r);i.needsUpdate=false}var o=false;var s=false;var l=false;var u=n.program,c=u.getUniforms(),h=n.shader.uniforms;if(q.useProgram(u.program)){o=true;s=true;l=true}if(i.id!==x){x=i.id;s=true}if(o||e!==T){c.setValue(j,"projectionMatrix",e.projectionMatrix);if(Y.logarithmicDepthBuffer){c.setValue(j,"logDepthBufFC",2/(Math.log(e.far+1)/Math.LN2))}if(T!==(M||e)){T=M||e;s=true;l=true}if(i.isShaderMaterial||i.isMeshPhongMaterial||i.isMeshStandardMaterial||i.envMap){var f=c.map.cameraPosition;if(f!==undefined){f.setValue(j,F.setFromMatrixPosition(e.matrixWorld))}}if(i.isMeshPhongMaterial||i.isMeshLambertMaterial||i.isMeshBasicMaterial||i.isMeshStandardMaterial||i.isShaderMaterial||i.skinning){c.setValue(j,"viewMatrix",e.matrixWorldInverse)}}if(i.skinning){c.setOptional(j,r,"bindMatrix");c.setOptional(j,r,"bindMatrixInverse");var d=r.skeleton;if(d){var p=d.bones;if(Y.floatVertexTextures){if(d.boneTexture===undefined){var m=Math.sqrt(p.length*4);m=bt.ceilPowerOfTwo(m);m=Math.max(m,4);var g=new Float32Array(m*m*4);g.set(d.boneMatrices);var y=new Lt(g,m,m,Ge,Ae);d.boneMatrices=g;d.boneTexture=y;d.boneTextureSize=m}c.setValue(j,"boneTexture",d.boneTexture);c.setValue(j,"boneTextureSize",d.boneTextureSize)}else{c.setOptional(j,d,"boneMatrices")}}}if(s){c.setValue(j,"toneMappingExposure",v.toneMappingExposure);c.setValue(j,"toneMappingWhitePoint",v.toneMappingWhitePoint);if(i.lights){Ye(h,l)}if(t&&i.fog){Ne(h,t)}if(i.isMeshBasicMaterial){Ie(h,i)}else if(i.isMeshLambertMaterial){Ie(h,i);Ue(h,i)}else if(i.isMeshPhongMaterial){Ie(h,i);if(i.isMeshToonMaterial){He(h,i)}else{Fe(h,i)}}else if(i.isMeshStandardMaterial){Ie(h,i);if(i.isMeshPhysicalMaterial){Ve(h,i)}else{ze(h,i)}}else if(i.isMeshDepthMaterial){Ie(h,i);je(h,i)}else if(i.isMeshDistanceMaterial){Ie(h,i);We(h,i)}else if(i.isMeshNormalMaterial){Ie(h,i);Xe(h,i)}else if(i.isLineBasicMaterial){De(h,i);if(i.isLineDashedMaterial){Be(h,i)}}else if(i.isPointsMaterial){ke(h,i)}else if(i.isShadowMaterial){h.color.value=i.color;h.opacity.value=i.opacity}if(h.ltcMat!==undefined)h.ltcMat.value=xi.LTC_MAT_TEXTURE;if(h.ltcMag!==undefined)h.ltcMag.value=xi.LTC_MAG_TEXTURE;yi.upload(j,n.uniformsList,h,v)}c.setValue(j,"modelViewMatrix",r.modelViewMatrix);c.setValue(j,"normalMatrix",r.normalMatrix);c.setValue(j,"modelMatrix",r.matrixWorld);return u}function Ie(e,t){e.opacity.value=t.opacity;if(t.color){e.diffuse.value=t.color}if(t.emissive){e.emissive.value.copy(t.emissive).multiplyScalar(t.emissiveIntensity)}if(t.map){e.map.value=t.map}if(t.alphaMap){e.alphaMap.value=t.alphaMap}if(t.specularMap){e.specularMap.value=t.specularMap}if(t.envMap){e.envMap.value=t.envMap;e.flipEnvMap.value=!(t.envMap&&t.envMap.isCubeTexture)?1:-1;e.reflectivity.value=t.reflectivity;e.refractionRatio.value=t.refractionRatio}if(t.lightMap){e.lightMap.value=t.lightMap;e.lightMapIntensity.value=t.lightMapIntensity}if(t.aoMap){e.aoMap.value=t.aoMap;e.aoMapIntensity.value=t.aoMapIntensity}var i;if(t.map){i=t.map}else if(t.specularMap){i=t.specularMap}else if(t.displacementMap){i=t.displacementMap}else if(t.normalMap){i=t.normalMap}else if(t.bumpMap){i=t.bumpMap}else if(t.roughnessMap){i=t.roughnessMap}else if(t.metalnessMap){i=t.metalnessMap}else if(t.alphaMap){i=t.alphaMap}else if(t.emissiveMap){i=t.emissiveMap}if(i!==undefined){if(i.isWebGLRenderTarget){i=i.texture}if(i.matrixAutoUpdate===true){var r=i.offset;var n=i.repeat;var a=i.rotation;var o=i.center;i.matrix.setUvTransform(r.x,r.y,n.x,n.y,a,o.x,o.y)}e.uvTransform.value.copy(i.matrix)}}function De(e,t){e.diffuse.value=t.color;e.opacity.value=t.opacity}function Be(e,t){e.dashSize.value=t.dashSize;e.totalSize.value=t.dashSize+t.gapSize;e.scale.value=t.scale}function ke(e,t){e.diffuse.value=t.color;e.opacity.value=t.opacity;e.size.value=t.size*R;e.scale.value=L*.5;e.map.value=t.map;if(t.map!==null){if(t.map.matrixAutoUpdate===true){var i=t.map.offset;var r=t.map.repeat;var n=t.map.rotation;var a=t.map.center;t.map.matrix.setUvTransform(i.x,i.y,r.x,r.y,n,a.x,a.y)}e.uvTransform.value.copy(t.map.matrix)}}function Ne(e,t){e.fogColor.value=t.color;if(t.isFog){e.fogNear.value=t.near;e.fogFar.value=t.far}else if(t.isFogExp2){e.fogDensity.value=t.density}}function Ue(e,t){if(t.emissiveMap){e.emissiveMap.value=t.emissiveMap}}function Fe(e,t){e.specular.value=t.specular;e.shininess.value=Math.max(t.shininess,1e-4);if(t.emissiveMap){e.emissiveMap.value=t.emissiveMap}if(t.bumpMap){e.bumpMap.value=t.bumpMap;e.bumpScale.value=t.bumpScale}if(t.normalMap){e.normalMap.value=t.normalMap;e.normalScale.value.copy(t.normalScale)}
if(t.displacementMap){e.displacementMap.value=t.displacementMap;e.displacementScale.value=t.displacementScale;e.displacementBias.value=t.displacementBias}}function He(e,t){Fe(e,t);if(t.gradientMap){e.gradientMap.value=t.gradientMap}}function ze(e,t){e.roughness.value=t.roughness;e.metalness.value=t.metalness;if(t.roughnessMap){e.roughnessMap.value=t.roughnessMap}if(t.metalnessMap){e.metalnessMap.value=t.metalnessMap}if(t.emissiveMap){e.emissiveMap.value=t.emissiveMap}if(t.bumpMap){e.bumpMap.value=t.bumpMap;e.bumpScale.value=t.bumpScale}if(t.normalMap){e.normalMap.value=t.normalMap;e.normalScale.value.copy(t.normalScale)}if(t.displacementMap){e.displacementMap.value=t.displacementMap;e.displacementScale.value=t.displacementScale;e.displacementBias.value=t.displacementBias}if(t.envMap){e.envMapIntensity.value=t.envMapIntensity}}function Ve(e,t){e.clearCoat.value=t.clearCoat;e.clearCoatRoughness.value=t.clearCoatRoughness;ze(e,t)}function je(e,t){if(t.displacementMap){e.displacementMap.value=t.displacementMap;e.displacementScale.value=t.displacementScale;e.displacementBias.value=t.displacementBias}}function We(e,t){if(t.displacementMap){e.displacementMap.value=t.displacementMap;e.displacementScale.value=t.displacementScale;e.displacementBias.value=t.displacementBias}e.referencePosition.value.copy(t.referencePosition);e.nearDistance.value=t.nearDistance;e.farDistance.value=t.farDistance}function Xe(e,t){if(t.bumpMap){e.bumpMap.value=t.bumpMap;e.bumpScale.value=t.bumpScale}if(t.normalMap){e.normalMap.value=t.normalMap;e.normalScale.value.copy(t.normalScale)}if(t.displacementMap){e.displacementMap.value=t.displacementMap;e.displacementScale.value=t.displacementScale;e.displacementBias.value=t.displacementBias}}function Ye(e,t){e.ambientLightColor.needsUpdate=t;e.directionalLights.needsUpdate=t;e.pointLights.needsUpdate=t;e.spotLights.needsUpdate=t;e.rectAreaLights.needsUpdate=t;e.hemisphereLights.needsUpdate=t}this.setFaceCulling=function(e,t){q.setCullFace(e);q.setFlipSided(t===l)};function qe(){var e=A;if(e>=Y.maxTextures){console.warn("THREE.WebGLRenderer: Trying to use "+e+" texture units while this GPU supports only "+Y.maxTextures)}A+=1;return e}this.allocTextureUnit=qe;this.setTexture2D=function(){var e=false;return function t(i,r){if(i&&i.isWebGLRenderTarget){if(!e){console.warn("THREE.WebGLRenderer.setTexture2D: don't use render targets as textures. Use their .texture property instead.");e=true}i=i.texture}K.setTexture2D(i,r)}}();this.setTexture=function(){var e=false;return function t(i,r){if(!e){console.warn("THREE.WebGLRenderer: .setTexture is deprecated, use setTexture2D instead.");e=true}K.setTexture2D(i,r)}}();this.setTextureCube=function(){var e=false;return function t(i,r){if(i&&i.isWebGLRenderTargetCube){if(!e){console.warn("THREE.WebGLRenderer.setTextureCube: don't use cube render targets as textures. Use their .texture property instead.");e=true}i=i.texture}if(i&&i.isCubeTexture||Array.isArray(i.image)&&i.image.length===6){K.setTextureCube(i,r)}else{K.setTextureCubeDynamic(i,r)}}}();this.getRenderTarget=function(){return b};this.setRenderTarget=function(e){b=e;if(e&&Z.get(e).__webglFramebuffer===undefined){K.setupRenderTarget(e)}var t=null;var i=false;if(e){var r=Z.get(e).__webglFramebuffer;if(e.isWebGLRenderTargetCube){t=r[e.activeCubeFace];i=true}else{t=r}S.copy(e.viewport);E.copy(e.scissor);P=e.scissorTest}else{S.copy(O).multiplyScalar(R);E.copy(I).multiplyScalar(R);P=D}if(_!==t){j.bindFramebuffer(j.FRAMEBUFFER,t);_=t}q.viewport(S);q.scissor(E);q.setScissorTest(P);if(i){var n=Z.get(e.texture);j.framebufferTexture2D(j.FRAMEBUFFER,j.COLOR_ATTACHMENT0,j.TEXTURE_CUBE_MAP_POSITIVE_X+e.activeCubeFace,n.__webglTexture,e.activeMipMapLevel)}};this.readRenderTargetPixels=function(e,t,i,r,n,a){if(!(e&&e.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}var o=Z.get(e).__webglFramebuffer;if(o){var s=false;if(o!==_){j.bindFramebuffer(j.FRAMEBUFFER,o);s=true}try{var l=e.texture;var u=l.format;var c=l.type;if(u!==Ge&&ce.convert(u)!==j.getParameter(j.IMPLEMENTATION_COLOR_READ_FORMAT)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(c!==we&&ce.convert(c)!==j.getParameter(j.IMPLEMENTATION_COLOR_READ_TYPE)&&!(c===Ae&&(X.get("OES_texture_float")||X.get("WEBGL_color_buffer_float")))&&!(c===Ce&&X.get("EXT_color_buffer_half_float"))){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}if(j.checkFramebufferStatus(j.FRAMEBUFFER)===j.FRAMEBUFFER_COMPLETE){if(t>=0&&t<=e.width-r&&(i>=0&&i<=e.height-n)){j.readPixels(t,i,r,n,ce.convert(u),ce.convert(c),a)}}else{console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.")}}finally{if(s){j.bindFramebuffer(j.FRAMEBUFFER,_)}}}}}function oo(e,t){this.name="";this.color=new _i(e);this.density=t!==undefined?t:25e-5}oo.prototype.isFogExp2=true;oo.prototype.clone=function(){return new oo(this.color.getHex(),this.density)};oo.prototype.toJSON=function(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}};function so(e,t,i){this.name="";this.color=new _i(e);this.near=t!==undefined?t:1;this.far=i!==undefined?i:1e3}so.prototype.isFog=true;so.prototype.clone=function(){return new so(this.color.getHex(),this.near,this.far)};so.prototype.toJSON=function(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}};function lo(){jn.call(this);this.type="Scene";this.background=null;this.fog=null;this.overrideMaterial=null;this.autoUpdate=true}lo.prototype=Object.assign(Object.create(jn.prototype),{constructor:lo,copy:function(e,t){jn.prototype.copy.call(this,e,t);if(e.background!==null)this.background=e.background.clone();if(e.fog!==null)this.fog=e.fog.clone();if(e.overrideMaterial!==null)this.overrideMaterial=e.overrideMaterial.clone();this.autoUpdate=e.autoUpdate;this.matrixAutoUpdate=e.matrixAutoUpdate;return this},toJSON:function(e){var t=jn.prototype.toJSON.call(this,e);if(this.background!==null)t.object.background=this.background.toJSON(e);if(this.fog!==null)t.object.fog=this.fog.toJSON();return t}});function uo(e,t,i,r,n){jn.call(this);this.lensFlares=[];this.positionScreen=new Tt;this.customUpdateCallback=undefined;if(e!==undefined){this.add(e,t,i,r,n)}}uo.prototype=Object.assign(Object.create(jn.prototype),{constructor:uo,isLensFlare:true,copy:function(e){jn.prototype.copy.call(this,e);this.positionScreen.copy(e.positionScreen);this.customUpdateCallback=e.customUpdateCallback;for(var t=0,i=e.lensFlares.length;t<i;t++){this.lensFlares.push(e.lensFlares[t])}return this},add:function(e,t,i,r,n,a){if(t===undefined)t=-1;if(i===undefined)i=0;if(a===undefined)a=1;if(n===undefined)n=new _i(16777215);if(r===undefined)r=w;i=Math.min(i,Math.max(0,i));this.lensFlares.push({texture:e,size:t,distance:i,x:0,y:0,z:0,scale:1,rotation:0,opacity:a,color:n,blending:r})},updateLensFlares:function(){var e,t=this.lensFlares.length;var i;var r=-this.positionScreen.x*2;var n=-this.positionScreen.y*2;for(e=0;e<t;e++){i=this.lensFlares[e];i.x=this.positionScreen.x+r*i.distance;i.y=this.positionScreen.y+n*i.distance;i.wantedRotation=i.x*Math.PI*.25;i.rotation+=(i.wantedRotation-i.rotation)*.25}}});function co(e){On.call(this);this.type="SpriteMaterial";this.color=new _i(16777215);this.map=null;this.rotation=0;this.fog=false;this.lights=false;this.setValues(e)}co.prototype=Object.create(On.prototype);co.prototype.constructor=co;co.prototype.isSpriteMaterial=true;co.prototype.copy=function(e){On.prototype.copy.call(this,e);this.color.copy(e.color);this.map=e.map;this.rotation=e.rotation;return this};function ho(e){jn.call(this);this.type="Sprite";this.material=e!==undefined?e:new co}ho.prototype=Object.assign(Object.create(jn.prototype),{constructor:ho,isSprite:true,raycast:function(){var e=new Tt;var t=new Tt;var i=new Tt;return function r(n,a){t.setFromMatrixPosition(this.matrixWorld);n.ray.closestPointToPoint(t,e);i.setFromMatrixScale(this.matrixWorld);var o=i.x*i.y/4;if(t.distanceToSquared(e)>o)return;var s=n.ray.origin.distanceTo(e);if(s<n.near||s>n.far)return;a.push({distance:s,point:e.clone(),face:null,object:this})}}(),clone:function(){return new this.constructor(this.material).copy(this)}});function fo(){jn.call(this);this.type="LOD";Object.defineProperties(this,{levels:{enumerable:true,value:[]}})}fo.prototype=Object.assign(Object.create(jn.prototype),{constructor:fo,copy:function(e){jn.prototype.copy.call(this,e,false);var t=e.levels;for(var i=0,r=t.length;i<r;i++){var n=t[i];this.addLevel(n.object.clone(),n.distance)}return this},addLevel:function(e,t){if(t===undefined)t=0;t=Math.abs(t);var i=this.levels;for(var r=0;r<i.length;r++){if(t<i[r].distance){break}}i.splice(r,0,{distance:t,object:e});this.add(e)},getObjectForDistance:function(e){var t=this.levels;for(var i=1,r=t.length;i<r;i++){if(e<t[i].distance){break}}return t[i-1].object},raycast:function(){var e=new Tt;return function t(i,r){e.setFromMatrixPosition(this.matrixWorld);var n=i.ray.origin.distanceTo(e);this.getObjectForDistance(n).raycast(i,r)}}(),update:function(){var e=new Tt;var t=new Tt;return function i(r){var n=this.levels;if(n.length>1){e.setFromMatrixPosition(r.matrixWorld);t.setFromMatrixPosition(this.matrixWorld);var a=e.distanceTo(t);n[0].object.visible=true;for(var o=1,s=n.length;o<s;o++){if(a>=n[o].distance){n[o-1].object.visible=false;n[o].object.visible=true}else{break}}for(;o<s;o++){n[o].object.visible=false}}}}(),toJSON:function(e){var t=jn.prototype.toJSON.call(this,e);t.object.levels=[];var i=this.levels;for(var r=0,n=i.length;r<n;r++){var a=i[r];t.object.levels.push({object:a.object.uuid,distance:a.distance})}return t}});function po(e,t){e=e||[];this.bones=e.slice(0);this.boneMatrices=new Float32Array(this.bones.length*16);if(t===undefined){this.calculateInverses()}else{if(this.bones.length===t.length){this.boneInverses=t.slice(0)}else{console.warn("THREE.Skeleton boneInverses is the wrong length.");this.boneInverses=[];for(var i=0,r=this.bones.length;i<r;i++){this.boneInverses.push(new xt)}}}}Object.assign(po.prototype,{calculateInverses:function(){this.boneInverses=[];for(var e=0,t=this.bones.length;e<t;e++){var i=new xt;if(this.bones[e]){i.getInverse(this.bones[e].matrixWorld)}this.boneInverses.push(i)}},pose:function(){var e,t,i;for(t=0,i=this.bones.length;t<i;t++){e=this.bones[t];if(e){e.matrixWorld.getInverse(this.boneInverses[t])}}for(t=0,i=this.bones.length;t<i;t++){e=this.bones[t];if(e){if(e.parent&&e.parent.isBone){e.matrix.getInverse(e.parent.matrixWorld);e.matrix.multiply(e.matrixWorld)}else{e.matrix.copy(e.matrixWorld)}e.matrix.decompose(e.position,e.quaternion,e.scale)}}},update:function(){var e=new xt;var t=new xt;return function i(){var r=this.bones;var n=this.boneInverses;var a=this.boneMatrices;var o=this.boneTexture;for(var s=0,l=r.length;s<l;s++){var u=r[s]?r[s].matrixWorld:t;e.multiplyMatrices(u,n[s]);e.toArray(a,s*16)}if(o!==undefined){o.needsUpdate=true}}}(),clone:function(){return new po(this.bones,this.boneInverses)}});function mo(){jn.call(this);this.type="Bone"}mo.prototype=Object.assign(Object.create(jn.prototype),{constructor:mo,isBone:true});function vo(e,t){ba.call(this,e,t);this.type="SkinnedMesh";this.bindMode="attached";this.bindMatrix=new xt;this.bindMatrixInverse=new xt;var i=this.initBones();var r=new po(i);this.bind(r,this.matrixWorld);this.normalizeSkinWeights()}vo.prototype=Object.assign(Object.create(ba.prototype),{constructor:vo,isSkinnedMesh:true,initBones:function(){var e=[],t,i;var r,n;if(this.geometry&&this.geometry.bones!==undefined){for(r=0,n=this.geometry.bones.length;r<n;r++){i=this.geometry.bones[r];t=new mo;e.push(t);t.name=i.name;t.position.fromArray(i.pos);t.quaternion.fromArray(i.rotq);if(i.scl!==undefined)t.scale.fromArray(i.scl)}for(r=0,n=this.geometry.bones.length;r<n;r++){i=this.geometry.bones[r];if(i.parent!==-1&&i.parent!==null&&e[i.parent]!==undefined){e[i.parent].add(e[r])}else{this.add(e[r])}}}this.updateMatrixWorld(true);return e},bind:function(e,t){this.skeleton=e;if(t===undefined){this.updateMatrixWorld(true);this.skeleton.calculateInverses();t=this.matrixWorld}this.bindMatrix.copy(t);this.bindMatrixInverse.getInverse(t)},pose:function(){this.skeleton.pose()},normalizeSkinWeights:function(){var e,t;if(this.geometry&&this.geometry.isGeometry){for(t=0;t<this.geometry.skinWeights.length;t++){var i=this.geometry.skinWeights[t];e=1/i.manhattanLength();if(e!==Infinity){i.multiplyScalar(e)}else{i.set(1,0,0,0)}}}else if(this.geometry&&this.geometry.isBufferGeometry){var r=new Pt;var n=this.geometry.attributes.skinWeight;for(t=0;t<n.count;t++){r.x=n.getX(t);r.y=n.getY(t);r.z=n.getZ(t);r.w=n.getW(t);e=1/r.manhattanLength();if(e!==Infinity){r.multiplyScalar(e)}else{r.set(1,0,0,0)}n.setXYZW(t,r.x,r.y,r.z,r.w)}}},updateMatrixWorld:function(e){ba.prototype.updateMatrixWorld.call(this,e);if(this.bindMode==="attached"){this.bindMatrixInverse.getInverse(this.matrixWorld)}else if(this.bindMode==="detached"){this.bindMatrixInverse.getInverse(this.bindMatrix)}else{console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}});function go(e){On.call(this);this.type="LineBasicMaterial";this.color=new _i(16777215);this.linewidth=1;this.linecap="round";this.linejoin="round";this.lights=false;this.setValues(e)}go.prototype=Object.create(On.prototype);go.prototype.constructor=go;go.prototype.isLineBasicMaterial=true;go.prototype.copy=function(e){On.prototype.copy.call(this,e);this.color.copy(e.color);this.linewidth=e.linewidth;this.linecap=e.linecap;this.linejoin=e.linejoin;return this};function yo(e,t,i){if(i===1){console.warn("THREE.Line: parameter THREE.LinePieces no longer supported. Created THREE.LineSegments instead.");return new bo(e,t)}jn.call(this);this.type="Line";this.geometry=e!==undefined?e:new ua;this.material=t!==undefined?t:new go({color:Math.random()*16777215})}yo.prototype=Object.assign(Object.create(jn.prototype),{constructor:yo,isLine:true,raycast:function(){var e=new xt;var t=new va;var i=new Gn;return function r(n,a){var o=n.linePrecision;var s=o*o;var l=this.geometry;var u=this.matrixWorld;if(l.boundingSphere===null)l.computeBoundingSphere();i.copy(l.boundingSphere);i.applyMatrix4(u);if(n.ray.intersectsSphere(i)===false)return;e.getInverse(u);t.copy(n.ray).applyMatrix4(e);var c=new Tt;var h=new Tt;var f=new Tt;var d=new Tt;var p=this&&this.isLineSegments?2:1;if(l.isBufferGeometry){var m=l.index;var v=l.attributes;var g=v.position.array;if(m!==null){var y=m.array;for(var b=0,_=y.length-1;b<_;b+=p){var x=y[b];var w=y[b+1];c.fromArray(g,x*3);h.fromArray(g,w*3);var T=t.distanceSqToSegment(c,h,d,f);if(T>s)continue;d.applyMatrix4(this.matrixWorld);var M=n.ray.origin.distanceTo(d);if(M<n.near||M>n.far)continue;a.push({distance:M,point:f.clone().applyMatrix4(this.matrixWorld),index:b,face:null,faceIndex:null,object:this})}}else{for(var b=0,_=g.length/3-1;b<_;b+=p){c.fromArray(g,3*b);h.fromArray(g,3*b+3);var T=t.distanceSqToSegment(c,h,d,f);if(T>s)continue;d.applyMatrix4(this.matrixWorld);var M=n.ray.origin.distanceTo(d);if(M<n.near||M>n.far)continue;a.push({distance:M,point:f.clone().applyMatrix4(this.matrixWorld),index:b,face:null,faceIndex:null,object:this})}}}else if(l.isGeometry){var S=l.vertices;var E=S.length;for(var b=0;b<E-1;b+=p){var T=t.distanceSqToSegment(S[b],S[b+1],d,f);if(T>s)continue;d.applyMatrix4(this.matrixWorld);var M=n.ray.origin.distanceTo(d);if(M<n.near||M>n.far)continue;a.push({distance:M,point:f.clone().applyMatrix4(this.matrixWorld),index:b,face:null,faceIndex:null,object:this})}}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}});function bo(e,t){yo.call(this,e,t);this.type="LineSegments"}bo.prototype=Object.assign(Object.create(yo.prototype),{constructor:bo,isLineSegments:true});function _o(e,t){yo.call(this,e,t);this.type="LineLoop"}_o.prototype=Object.assign(Object.create(yo.prototype),{constructor:_o,isLineLoop:true});function xo(e){On.call(this);this.type="PointsMaterial";this.color=new _i(16777215);this.map=null;this.size=1;this.sizeAttenuation=true;this.lights=false;this.setValues(e)}xo.prototype=Object.create(On.prototype);xo.prototype.constructor=xo;xo.prototype.isPointsMaterial=true;xo.prototype.copy=function(e){On.prototype.copy.call(this,e);this.color.copy(e.color);this.map=e.map;this.size=e.size;this.sizeAttenuation=e.sizeAttenuation;return this};function wo(e,t){jn.call(this);this.type="Points";this.geometry=e!==undefined?e:new ua;this.material=t!==undefined?t:new xo({color:Math.random()*16777215})}wo.prototype=Object.assign(Object.create(jn.prototype),{constructor:wo,isPoints:true,raycast:function(){var e=new xt;var t=new va;var i=new Gn;return function r(n,a){var o=this;var s=this.geometry;var l=this.matrixWorld;var u=n.params.Points.threshold;if(s.boundingSphere===null)s.computeBoundingSphere();i.copy(s.boundingSphere);i.applyMatrix4(l);i.radius+=u;if(n.ray.intersectsSphere(i)===false)return;e.getInverse(l);t.copy(n.ray).applyMatrix4(e);var c=u/((this.scale.x+this.scale.y+this.scale.z)/3);var h=c*c;var f=new Tt;function d(e,i){var r=t.distanceSqToPoint(e);if(r<h){var s=t.closestPointToPoint(e);s.applyMatrix4(l);var u=n.ray.origin.distanceTo(s);if(u<n.near||u>n.far)return;a.push({distance:u,distanceToRay:Math.sqrt(r),point:s.clone(),index:i,face:null,object:o})}}if(s.isBufferGeometry){var p=s.index;var m=s.attributes;var v=m.position.array;if(p!==null){var g=p.array;for(var y=0,b=g.length;y<b;y++){var _=g[y];f.fromArray(v,_*3);d(f,_)}}else{for(var y=0,x=v.length/3;y<x;y++){f.fromArray(v,y*3);d(f,y)}}}else{var w=s.vertices;for(var y=0,x=w.length;y<x;y++){d(w[y],y)}}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}});function To(){jn.call(this);this.type="Group"}To.prototype=Object.assign(Object.create(jn.prototype),{constructor:To});function Mo(e,t,i,r,n,a,o,s,l){Et.call(this,e,t,i,r,n,a,o,s,l);this.generateMipmaps=false;var u=this;function c(){var e=u.image;if(e.readyState>=e.HAVE_CURRENT_DATA){u.needsUpdate=true}requestAnimationFrame(c)}requestAnimationFrame(c)}Mo.prototype=Object.create(Et.prototype);Mo.prototype.constructor=Mo;function So(e,t,i,r,n,a,o,s,l,u,c,h){Et.call(this,null,a,o,s,l,u,r,n,c,h);this.image={width:t,height:i};this.mipmaps=e;this.flipY=false;this.generateMipmaps=false}So.prototype=Object.create(Et.prototype);So.prototype.constructor=So;So.prototype.isCompressedTexture=true;function Eo(e,t,i,r,n,a,o,s,l,u){u=u!==undefined?u:Fe;if(u!==Fe&&u!==He){throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat")}if(i===undefined&&u===Fe)i=Se;if(i===undefined&&u===He)i=Ie;Et.call(this,null,r,n,a,o,s,u,i,l);this.image={width:e,height:t};this.magFilter=o!==undefined?o:ve;this.minFilter=s!==undefined?s:ve;this.flipY=false;this.generateMipmaps=false}Eo.prototype=Object.create(Et.prototype);Eo.prototype.constructor=Eo;Eo.prototype.isDepthTexture=true;function Po(e){ua.call(this);this.type="WireframeGeometry";var t=[];var i,r,n,a,o;var s=[0,0],l={},u,c,h;var f,d=["a","b","c"];var p;if(e&&e.isGeometry){var m=e.faces;for(i=0,n=m.length;i<n;i++){var v=m[i];for(r=0;r<3;r++){c=v[d[r]];h=v[d[(r+1)%3]];s[0]=Math.min(c,h);s[1]=Math.max(c,h);f=s[0]+","+s[1];if(l[f]===undefined){l[f]={index1:s[0],index2:s[1]}}}}for(f in l){u=l[f];p=e.vertices[u.index1];t.push(p.x,p.y,p.z);p=e.vertices[u.index2];t.push(p.x,p.y,p.z)}}else if(e&&e.isBufferGeometry){var g,y,b;var _,x,w;var T,M;p=new Tt;if(e.index!==null){g=e.attributes.position;y=e.index;b=e.groups;if(b.length===0){b=[{start:0,count:y.count,materialIndex:0}]}for(a=0,o=b.length;a<o;++a){_=b[a];x=_.start;w=_.count;for(i=x,n=x+w;i<n;i+=3){for(r=0;r<3;r++){c=y.getX(i+r);h=y.getX(i+(r+1)%3);s[0]=Math.min(c,h);s[1]=Math.max(c,h);f=s[0]+","+s[1];if(l[f]===undefined){l[f]={index1:s[0],index2:s[1]}}}}}for(f in l){u=l[f];p.fromBufferAttribute(g,u.index1);t.push(p.x,p.y,p.z);p.fromBufferAttribute(g,u.index2);t.push(p.x,p.y,p.z)}}else{g=e.attributes.position;for(i=0,n=g.count/3;i<n;i++){for(r=0;r<3;r++){T=3*i+r;p.fromBufferAttribute(g,T);t.push(p.x,p.y,p.z);M=3*i+(r+1)%3;p.fromBufferAttribute(g,M);t.push(p.x,p.y,p.z)}}}}this.addAttribute("position",new na(t,3))}Po.prototype=Object.create(ua.prototype);Po.prototype.constructor=Po;function Ao(e,t,i){Zn.call(this);this.type="ParametricGeometry";this.parameters={func:e,slices:t,stacks:i};this.fromBufferGeometry(new Co(e,t,i));this.mergeVertices()}Ao.prototype=Object.create(Zn.prototype);Ao.prototype.constructor=Ao;function Co(e,t,i){ua.call(this);this.type="ParametricBufferGeometry";this.parameters={func:e,slices:t,stacks:i};var r=[];var n=[];var a=[];var o=[];var s=1e-5;var l=new Tt;var u=new Tt,c=new Tt;var h=new Tt,f=new Tt;var d,p;var m=t+1;for(d=0;d<=i;d++){var v=d/i;for(p=0;p<=t;p++){var g=p/t;u=e(g,v,u);n.push(u.x,u.y,u.z);if(g-s>=0){c=e(g-s,v,c);h.subVectors(u,c)}else{c=e(g+s,v,c);h.subVectors(c,u)}if(v-s>=0){c=e(g,v-s,c);f.subVectors(u,c)}else{c=e(g,v+s,c);f.subVectors(c,u)}l.crossVectors(h,f).normalize();a.push(l.x,l.y,l.z);o.push(g,v)}}for(d=0;d<i;d++){for(p=0;p<t;p++){var y=d*m+p;var b=d*m+p+1;var _=(d+1)*m+p+1;var x=(d+1)*m+p;r.push(y,b,x);r.push(b,_,x)}}this.setIndex(r);this.addAttribute("position",new na(n,3));this.addAttribute("normal",new na(a,3));this.addAttribute("uv",new na(o,2))}Co.prototype=Object.create(ua.prototype);Co.prototype.constructor=Co;function Lo(e,t,i,r){Zn.call(this);this.type="PolyhedronGeometry";this.parameters={vertices:e,indices:t,radius:i,detail:r};this.fromBufferGeometry(new Ro(e,t,i,r));this.mergeVertices()}Lo.prototype=Object.create(Zn.prototype);Lo.prototype.constructor=Lo;function Ro(e,t,i,r){ua.call(this);this.type="PolyhedronBufferGeometry";this.parameters={vertices:e,indices:t,radius:i,detail:r};i=i||1;r=r||0;var n=[];var a=[];o(r);l(i);u();this.addAttribute("position",new na(n,3));this.addAttribute("normal",new na(n.slice(),3));this.addAttribute("uv",new na(a,2));if(r===0){this.computeVertexNormals()}else{this.normalizeNormals()}function o(e){var i=new Tt;var r=new Tt;var n=new Tt;for(var a=0;a<t.length;a+=3){f(t[a+0],i);f(t[a+1],r);f(t[a+2],n);s(i,r,n,e)}}function s(e,t,i,r){var n=Math.pow(2,r);var a=[];var o,s;for(o=0;o<=n;o++){a[o]=[];var l=e.clone().lerp(i,o/n);var u=t.clone().lerp(i,o/n);var c=n-o;for(s=0;s<=c;s++){if(s===0&&o===n){a[o][s]=l}else{a[o][s]=l.clone().lerp(u,s/c)}}}for(o=0;o<n;o++){for(s=0;s<2*(n-o)-1;s++){var f=Math.floor(s/2);if(s%2===0){h(a[o][f+1]);h(a[o+1][f]);h(a[o][f])}else{h(a[o][f+1]);h(a[o+1][f+1]);h(a[o+1][f])}}}}function l(e){var t=new Tt;for(var i=0;i<n.length;i+=3){t.x=n[i+0];t.y=n[i+1];t.z=n[i+2];t.normalize().multiplyScalar(e);n[i+0]=t.x;n[i+1]=t.y;n[i+2]=t.z}}function u(){var e=new Tt;for(var t=0;t<n.length;t+=3){e.x=n[t+0];e.y=n[t+1];e.z=n[t+2];var i=m(e)/2/Math.PI+.5;var r=v(e)/Math.PI+.5;a.push(i,1-r)}d();c()}function c(){for(var e=0;e<a.length;e+=6){var t=a[e+0];var i=a[e+2];var r=a[e+4];var n=Math.max(t,i,r);var o=Math.min(t,i,r);if(n>.9&&o<.1){if(t<.2)a[e+0]+=1;if(i<.2)a[e+2]+=1;if(r<.2)a[e+4]+=1}}}function h(e){n.push(e.x,e.y,e.z)}function f(t,i){var r=t*3;i.x=e[r+0];i.y=e[r+1];i.z=e[r+2]}function d(){var e=new Tt;var t=new Tt;var i=new Tt;var r=new Tt;var o=new _t;var s=new _t;var l=new _t;for(var u=0,c=0;u<n.length;u+=9,c+=6){e.set(n[u+0],n[u+1],n[u+2]);t.set(n[u+3],n[u+4],n[u+5]);i.set(n[u+6],n[u+7],n[u+8]);o.set(a[c+0],a[c+1]);s.set(a[c+2],a[c+3]);l.set(a[c+4],a[c+5]);r.copy(e).add(t).add(i).divideScalar(3);var h=m(r);p(o,c+0,e,h);p(s,c+2,t,h);p(l,c+4,i,h)}}function p(e,t,i,r){if(r<0&&e.x===1){a[t]=e.x-1}if(i.x===0&&i.z===0){a[t]=r/2/Math.PI+.5}}function m(e){return Math.atan2(e.z,-e.x)}function v(e){return Math.atan2(-e.y,Math.sqrt(e.x*e.x+e.z*e.z))}}Ro.prototype=Object.create(ua.prototype);Ro.prototype.constructor=Ro;function Oo(e,t){Zn.call(this);this.type="TetrahedronGeometry";this.parameters={radius:e,detail:t};this.fromBufferGeometry(new Io(e,t));this.mergeVertices()}Oo.prototype=Object.create(Zn.prototype);Oo.prototype.constructor=Oo;function Io(e,t){var i=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1];var r=[2,1,0,0,3,2,1,3,0,2,3,1];Ro.call(this,i,r,e,t);this.type="TetrahedronBufferGeometry";this.parameters={radius:e,detail:t}}Io.prototype=Object.create(Ro.prototype);Io.prototype.constructor=Io;function Do(e,t){Zn.call(this);this.type="OctahedronGeometry";this.parameters={radius:e,detail:t};this.fromBufferGeometry(new Bo(e,t));this.mergeVertices()}Do.prototype=Object.create(Zn.prototype);Do.prototype.constructor=Do;function Bo(e,t){var i=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1];var r=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];Ro.call(this,i,r,e,t);this.type="OctahedronBufferGeometry";this.parameters={radius:e,detail:t}}Bo.prototype=Object.create(Ro.prototype);Bo.prototype.constructor=Bo;function Go(e,t){Zn.call(this);this.type="IcosahedronGeometry";this.parameters={radius:e,detail:t};this.fromBufferGeometry(new ko(e,t));this.mergeVertices()}Go.prototype=Object.create(Zn.prototype);Go.prototype.constructor=Go;function ko(e,t){var i=(1+Math.sqrt(5))/2;var r=[-1,i,0,1,i,0,-1,-i,0,1,-i,0,0,-1,i,0,1,i,0,-1,-i,0,1,-i,i,0,-1,i,0,1,-i,0,-1,-i,0,1];var n=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];Ro.call(this,r,n,e,t);this.type="IcosahedronBufferGeometry";this.parameters={radius:e,detail:t}}ko.prototype=Object.create(Ro.prototype);ko.prototype.constructor=ko;function No(e,t){Zn.call(this);this.type="DodecahedronGeometry";this.parameters={radius:e,detail:t};this.fromBufferGeometry(new Uo(e,t));this.mergeVertices()}No.prototype=Object.create(Zn.prototype);No.prototype.constructor=No;function Uo(e,t){var i=(1+Math.sqrt(5))/2;var r=1/i;var n=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-r,-i,0,-r,i,0,r,-i,0,r,i,-r,-i,0,-r,i,0,r,-i,0,r,i,0,-i,0,-r,i,0,-r,-i,0,r,i,0,r];var a=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];Ro.call(this,n,a,e,t);this.type="DodecahedronBufferGeometry";this.parameters={radius:e,detail:t}}Uo.prototype=Object.create(Ro.prototype);Uo.prototype.constructor=Uo;function Fo(e,t,i,r,n,a){Zn.call(this);this.type="TubeGeometry";this.parameters={path:e,tubularSegments:t,radius:i,radialSegments:r,closed:n};if(a!==undefined)console.warn("THREE.TubeGeometry: taper has been removed.");var o=new Ho(e,t,i,r,n);this.tangents=o.tangents;this.normals=o.normals;this.binormals=o.binormals;this.fromBufferGeometry(o);this.mergeVertices()}Fo.prototype=Object.create(Zn.prototype);Fo.prototype.constructor=Fo;function Ho(e,t,i,r,n){ua.call(this);this.type="TubeBufferGeometry";this.parameters={path:e,tubularSegments:t,radius:i,radialSegments:r,closed:n};t=t||64;i=i||1;r=r||8;n=n||false;var a=e.computeFrenetFrames(t,n);this.tangents=a.tangents;this.normals=a.normals;this.binormals=a.binormals;var o=new Tt;var s=new Tt;var l=new _t;var u=new Tt;var c,h;var f=[];var d=[];var p=[];var m=[];v();this.setIndex(m);this.addAttribute("position",new na(f,3));this.addAttribute("normal",new na(d,3));this.addAttribute("uv",new na(p,2));function v(){for(c=0;c<t;c++){g(c)}g(n===false?t:0);b();y()}function g(n){u=e.getPointAt(n/t,u);var l=a.normals[n];var c=a.binormals[n];for(h=0;h<=r;h++){var p=h/r*Math.PI*2;var m=Math.sin(p);var v=-Math.cos(p);s.x=v*l.x+m*c.x;s.y=v*l.y+m*c.y;s.z=v*l.z+m*c.z;s.normalize();d.push(s.x,s.y,s.z);o.x=u.x+i*s.x;o.y=u.y+i*s.y;o.z=u.z+i*s.z;f.push(o.x,o.y,o.z)}}function y(){for(h=1;h<=t;h++){for(c=1;c<=r;c++){var e=(r+1)*(h-1)+(c-1);var i=(r+1)*h+(c-1);var n=(r+1)*h+c;var a=(r+1)*(h-1)+c;m.push(e,i,a);m.push(i,n,a)}}}function b(){for(c=0;c<=t;c++){for(h=0;h<=r;h++){l.x=c/t;l.y=h/r;p.push(l.x,l.y)}}}}Ho.prototype=Object.create(ua.prototype);Ho.prototype.constructor=Ho;function zo(e,t,i,r,n,a,o){Zn.call(this);this.type="TorusKnotGeometry";this.parameters={radius:e,tube:t,tubularSegments:i,radialSegments:r,p:n,q:a};if(o!==undefined)console.warn("THREE.TorusKnotGeometry: heightScale has been deprecated. Use .scale( x, y, z ) instead.");this.fromBufferGeometry(new Vo(e,t,i,r,n,a));this.mergeVertices()}zo.prototype=Object.create(Zn.prototype);zo.prototype.constructor=zo;function Vo(e,t,i,r,n,a){ua.call(this);this.type="TorusKnotBufferGeometry";this.parameters={radius:e,tube:t,tubularSegments:i,radialSegments:r,p:n,q:a};e=e||1;t=t||.4;i=Math.floor(i)||64;r=Math.floor(r)||8;n=n||2;a=a||3;var o=[];var s=[];var l=[];var u=[];var c,h;var f=new Tt;var d=new Tt;var p=new Tt;var m=new Tt;var v=new Tt;var g=new Tt;var y=new Tt;for(c=0;c<=i;++c){var b=c/i*n*Math.PI*2;P(b,n,a,e,p);P(b+.01,n,a,e,m);g.subVectors(m,p);y.addVectors(m,p);v.crossVectors(g,y);y.crossVectors(v,g);v.normalize();y.normalize();for(h=0;h<=r;++h){var _=h/r*Math.PI*2;var x=-t*Math.cos(_);var w=t*Math.sin(_);f.x=p.x+(x*y.x+w*v.x);f.y=p.y+(x*y.y+w*v.y);f.z=p.z+(x*y.z+w*v.z);s.push(f.x,f.y,f.z);d.subVectors(f,p).normalize();l.push(d.x,d.y,d.z);u.push(c/i);u.push(h/r)}}for(h=1;h<=i;h++){for(c=1;c<=r;c++){var T=(r+1)*(h-1)+(c-1);var M=(r+1)*h+(c-1);var S=(r+1)*h+c;var E=(r+1)*(h-1)+c;o.push(T,M,E);o.push(M,S,E)}}this.setIndex(o);this.addAttribute("position",new na(s,3));this.addAttribute("normal",new na(l,3));this.addAttribute("uv",new na(u,2));function P(e,t,i,r,n){var a=Math.cos(e);var o=Math.sin(e);var s=i/t*e;var l=Math.cos(s);n.x=r*(2+l)*.5*a;n.y=r*(2+l)*o*.5;n.z=r*Math.sin(s)*.5}}Vo.prototype=Object.create(ua.prototype);Vo.prototype.constructor=Vo;function jo(e,t,i,r,n){Zn.call(this);this.type="TorusGeometry";this.parameters={radius:e,tube:t,radialSegments:i,tubularSegments:r,arc:n};this.fromBufferGeometry(new Wo(e,t,i,r,n));this.mergeVertices()}jo.prototype=Object.create(Zn.prototype);jo.prototype.constructor=jo;function Wo(e,t,i,r,n){ua.call(this);this.type="TorusBufferGeometry";this.parameters={radius:e,tube:t,radialSegments:i,tubularSegments:r,arc:n};e=e||1;t=t||.4;i=Math.floor(i)||8;r=Math.floor(r)||6;n=n||Math.PI*2;var a=[];var o=[];var s=[];var l=[];var u=new Tt;var c=new Tt;var h=new Tt;var f,d;for(f=0;f<=i;f++){for(d=0;d<=r;d++){var p=d/r*n;var m=f/i*Math.PI*2;c.x=(e+t*Math.cos(m))*Math.cos(p);c.y=(e+t*Math.cos(m))*Math.sin(p);c.z=t*Math.sin(m);o.push(c.x,c.y,c.z);u.x=e*Math.cos(p);u.y=e*Math.sin(p);h.subVectors(c,u).normalize();s.push(h.x,h.y,h.z);l.push(d/r);l.push(f/i)}}for(f=1;f<=i;f++){for(d=1;d<=r;d++){var v=(r+1)*f+d-1;var g=(r+1)*(f-1)+d-1;var y=(r+1)*(f-1)+d;var b=(r+1)*f+d;a.push(v,g,b);a.push(g,y,b)}}this.setIndex(a);this.addAttribute("position",new na(o,3));this.addAttribute("normal",new na(s,3));this.addAttribute("uv",new na(l,2))}Wo.prototype=Object.create(ua.prototype);Wo.prototype.constructor=Wo;var Xo={area:function(e){var t=e.length;var i=0;for(var r=t-1,n=0;n<t;r=n++){i+=e[r].x*e[n].y-e[n].x*e[r].y}return i*.5},triangulate:function(){function e(e,t,i,r,n,a){var o;var s,l,u,c;var h,f,d,p;s=e[a[t]].x;l=e[a[t]].y;u=e[a[i]].x;c=e[a[i]].y;h=e[a[r]].x;f=e[a[r]].y;if((u-s)*(f-l)-(c-l)*(h-s)<=0)return false;var m,v,g,y,b,_;var x,w,T,M,S,E;var P,A,C;m=h-u;v=f-c;g=s-h;y=l-f;b=u-s;_=c-l;for(o=0;o<n;o++){d=e[a[o]].x;p=e[a[o]].y;if(d===s&&p===l||d===u&&p===c||d===h&&p===f)continue;x=d-s;w=p-l;T=d-u;M=p-c;S=d-h;E=p-f;C=m*M-v*T;P=b*w-_*x;A=g*E-y*S;if(C>=-Number.EPSILON&&A>=-Number.EPSILON&&P>=-Number.EPSILON)return false}return true}return function t(i,r){var n=i.length;if(n<3)return null;var a=[],o=[],s=[];var l,u,c;if(Xo.area(i)>0){for(u=0;u<n;u++)o[u]=u}else{for(u=0;u<n;u++)o[u]=n-1-u}var h=n;var f=2*h;for(u=h-1;h>2;){if(f--<=0){console.warn("THREE.ShapeUtils: Unable to triangulate polygon! in triangulate()");if(r)return s;return a}l=u;if(h<=l)l=0;u=l+1;if(h<=u)u=0;c=u+1
;if(h<=c)c=0;if(e(i,l,u,c,h,o)){var d,p,m,v,g;d=o[l];p=o[u];m=o[c];a.push([i[d],i[p],i[m]]);s.push([o[l],o[u],o[c]]);for(v=u,g=u+1;g<h;v++,g++){o[v]=o[g]}h--;f=2*h}}if(r)return s;return a}}(),triangulateShape:function(e,t){function i(e){var t=e.length;if(t>2&&e[t-1].equals(e[0])){e.pop()}}i(e);t.forEach(i);function r(e,t,i){if(e.x!==t.x){if(e.x<t.x){return e.x<=i.x&&i.x<=t.x}else{return t.x<=i.x&&i.x<=e.x}}else{if(e.y<t.y){return e.y<=i.y&&i.y<=t.y}else{return t.y<=i.y&&i.y<=e.y}}}function n(e,t,i,n,a){var o=t.x-e.x,s=t.y-e.y;var l=n.x-i.x,u=n.y-i.y;var c=e.x-i.x;var h=e.y-i.y;var f=s*l-o*u;var d=s*c-o*h;if(Math.abs(f)>Number.EPSILON){var p;if(f>0){if(d<0||d>f)return[];p=u*c-l*h;if(p<0||p>f)return[]}else{if(d>0||d<f)return[];p=u*c-l*h;if(p>0||p<f)return[]}if(p===0){if(a&&(d===0||d===f))return[];return[e]}if(p===f){if(a&&(d===0||d===f))return[];return[t]}if(d===0)return[i];if(d===f)return[n];var m=p/f;return[{x:e.x+m*o,y:e.y+m*s}]}else{if(d!==0||u*c!==l*h)return[];var v=o===0&&s===0;var g=l===0&&u===0;if(v&&g){if(e.x!==i.x||e.y!==i.y)return[];return[e]}if(v){if(!r(i,n,e))return[];return[e]}if(g){if(!r(e,t,i))return[];return[i]}var y,b,_,x;var w,T,M,S;if(o!==0){if(e.x<t.x){y=e;_=e.x;b=t;x=t.x}else{y=t;_=t.x;b=e;x=e.x}if(i.x<n.x){w=i;M=i.x;T=n;S=n.x}else{w=n;M=n.x;T=i;S=i.x}}else{if(e.y<t.y){y=e;_=e.y;b=t;x=t.y}else{y=t;_=t.y;b=e;x=e.y}if(i.y<n.y){w=i;M=i.y;T=n;S=n.y}else{w=n;M=n.y;T=i;S=i.y}}if(_<=M){if(x<M)return[];if(x===M){if(a)return[];return[w]}if(x<=S)return[w,b];return[w,T]}else{if(_>S)return[];if(_===S){if(a)return[];return[y]}if(x<=S)return[y,b];return[y,T]}}}function a(e,t,i,r){var n=t.x-e.x,a=t.y-e.y;var o=i.x-e.x,s=i.y-e.y;var l=r.x-e.x,u=r.y-e.y;var c=n*s-a*o;var h=n*u-a*l;if(Math.abs(c)>Number.EPSILON){var f=l*s-u*o;if(c>0){return h>=0&&f>=0}else{return h>=0||f>=0}}else{return h>0}}function o(e,t){var i=e.concat();var r;function o(e,t){var n=i.length-1;var o=e-1;if(o<0)o=n;var s=e+1;if(s>n)s=0;var l=a(i[e],i[o],i[s],r[t]);if(!l){return false}var u=r.length-1;var c=t-1;if(c<0)c=u;var h=t+1;if(h>u)h=0;l=a(r[t],r[c],r[h],i[e]);if(!l){return false}return true}function s(e,t){var r,a,o;for(r=0;r<i.length;r++){a=r+1;a%=i.length;o=n(e,t,i[r],i[a],true);if(o.length>0)return true}return false}var l=[];function u(e,i){var r,a,o,s,u;for(r=0;r<l.length;r++){a=t[l[r]];for(o=0;o<a.length;o++){s=o+1;s%=a.length;u=n(e,i,a[o],a[s],true);if(u.length>0)return true}}return false}var c,h,f,d,p,m,v=[],g,y,b,_;for(var x=0,w=t.length;x<w;x++){l.push(x)}var T=0;var M=l.length*2;while(l.length>0){M--;if(M<0){console.log('THREE.ShapeUtils: Infinite Loop! Holes left:" + indepHoles.length + ", Probably Hole outside Shape!');break}for(h=T;h<i.length;h++){f=i[h];c=-1;for(var x=0;x<l.length;x++){p=l[x];m=f.x+":"+f.y+":"+p;if(v[m]!==undefined)continue;r=t[p];for(var S=0;S<r.length;S++){d=r[S];if(!o(h,S))continue;if(s(f,d))continue;if(u(f,d))continue;c=S;l.splice(x,1);g=i.slice(0,h+1);y=i.slice(h);b=r.slice(c);_=r.slice(0,c+1);i=g.concat(b).concat(_).concat(y);T=h;break}if(c>=0)break;v[m]=true}if(c>=0)break}}return i}var s,l,u,c,h,f,d={};var p=e.concat();for(var m=0,v=t.length;m<v;m++){Array.prototype.push.apply(p,t[m])}for(s=0,l=p.length;s<l;s++){h=p[s].x+":"+p[s].y;if(d[h]!==undefined){console.warn("THREE.ShapeUtils: Duplicate point",h,s)}d[h]=s}var g=o(e,t);var y=Xo.triangulate(g,false);for(s=0,l=y.length;s<l;s++){c=y[s];for(u=0;u<3;u++){h=c[u].x+":"+c[u].y;f=d[h];if(f!==undefined){c[u]=f}}}return y.concat()},isClockWise:function(e){return Xo.area(e)<0}};function Yo(e,t){Zn.call(this);this.type="ExtrudeGeometry";this.parameters={shapes:e,options:t};this.fromBufferGeometry(new qo(e,t));this.mergeVertices()}Yo.prototype=Object.create(Zn.prototype);Yo.prototype.constructor=Yo;function qo(e,t){if(typeof e==="undefined"){return}ua.call(this);this.type="ExtrudeBufferGeometry";e=Array.isArray(e)?e:[e];this.addShapeList(e,t);this.computeVertexNormals()}qo.prototype=Object.create(ua.prototype);qo.prototype.constructor=qo;qo.prototype.getArrays=function(){var e=this.getAttribute("position");var t=e?Array.prototype.slice.call(e.array):[];var i=this.getAttribute("uv");var r=i?Array.prototype.slice.call(i.array):[];var n=this.index;var a=n?Array.prototype.slice.call(n.array):[];return{position:t,uv:r,index:a}};qo.prototype.addShapeList=function(e,t){var i=e.length;t.arrays=this.getArrays();for(var r=0;r<i;r++){var n=e[r];this.addShape(n,t)}this.setIndex(t.arrays.index);this.addAttribute("position",new na(t.arrays.position,3));this.addAttribute("uv",new na(t.arrays.uv,2))};qo.prototype.addShape=function(e,t){var i=t.arrays?t.arrays:this.getArrays();var r=i.position;var n=i.index;var a=i.uv;var o=[];var s=t.amount!==undefined?t.amount:100;var l=t.bevelThickness!==undefined?t.bevelThickness:6;var u=t.bevelSize!==undefined?t.bevelSize:l-2;var c=t.bevelSegments!==undefined?t.bevelSegments:3;var h=t.bevelEnabled!==undefined?t.bevelEnabled:true;var f=t.curveSegments!==undefined?t.curveSegments:12;var d=t.steps!==undefined?t.steps:1;var p=t.extrudePath;var m,v=false;var g=t.UVGenerator!==undefined?t.UVGenerator:Yo.WorldUVGenerator;var y,b,_,x;if(p){m=p.getSpacedPoints(d);v=true;h=false;y=t.frames!==undefined?t.frames:p.computeFrenetFrames(d,false);b=new Tt;_=new Tt;x=new Tt}if(!h){c=0;l=0;u=0}var w,T,M;var S=this;var E=e.extractPoints(f);var P=E.shape;var A=E.holes;var C=!Xo.isClockWise(P);if(C){P=P.reverse();for(T=0,M=A.length;T<M;T++){w=A[T];if(Xo.isClockWise(w)){A[T]=w.reverse()}}}var L=Xo.triangulateShape(P,A);var R=P;for(T=0,M=A.length;T<M;T++){w=A[T];P=P.concat(w)}function O(e,t,i){if(!t)console.error("THREE.ExtrudeGeometry: vec does not exist");return t.clone().multiplyScalar(i).add(e)}var I,D,B,G,k,N=P.length,U,F=L.length;function H(e,t,i){var r,n,a;var o=e.x-t.x,s=e.y-t.y;var l=i.x-e.x,u=i.y-e.y;var c=o*o+s*s;var h=o*u-s*l;if(Math.abs(h)>Number.EPSILON){var f=Math.sqrt(c);var d=Math.sqrt(l*l+u*u);var p=t.x-s/f;var m=t.y+o/f;var v=i.x-u/d;var g=i.y+l/d;var y=((v-p)*u-(g-m)*l)/(o*u-s*l);r=p+o*y-e.x;n=m+s*y-e.y;var b=r*r+n*n;if(b<=2){return new _t(r,n)}else{a=Math.sqrt(b/2)}}else{var _=false;if(o>Number.EPSILON){if(l>Number.EPSILON){_=true}}else{if(o<-Number.EPSILON){if(l<-Number.EPSILON){_=true}}else{if(Math.sign(s)===Math.sign(u)){_=true}}}if(_){r=-s;n=o;a=Math.sqrt(c)}else{r=o;n=s;a=Math.sqrt(c/2)}}return new _t(r/a,n/a)}var z=[];for(var V=0,j=R.length,W=j-1,X=V+1;V<j;V++,W++,X++){if(W===j)W=0;if(X===j)X=0;z[V]=H(R[V],R[W],R[X])}var Y=[],q,Z=z.concat();for(T=0,M=A.length;T<M;T++){w=A[T];q=[];for(V=0,j=w.length,W=j-1,X=V+1;V<j;V++,W++,X++){if(W===j)W=0;if(X===j)X=0;q[V]=H(w[V],w[W],w[X])}Y.push(q);Z=Z.concat(q)}for(I=0;I<c;I++){B=I/c;G=l*Math.cos(B*Math.PI/2);D=u*Math.sin(B*Math.PI/2);for(V=0,j=R.length;V<j;V++){k=O(R[V],z[V],D);ee(k.x,k.y,-G)}for(T=0,M=A.length;T<M;T++){w=A[T];q=Y[T];for(V=0,j=w.length;V<j;V++){k=O(w[V],q[V],D);ee(k.x,k.y,-G)}}}D=u;for(V=0;V<N;V++){k=h?O(P[V],Z[V],D):P[V];if(!v){ee(k.x,k.y,0)}else{_.copy(y.normals[0]).multiplyScalar(k.x);b.copy(y.binormals[0]).multiplyScalar(k.y);x.copy(m[0]).add(_).add(b);ee(x.x,x.y,x.z)}}var K;for(K=1;K<=d;K++){for(V=0;V<N;V++){k=h?O(P[V],Z[V],D):P[V];if(!v){ee(k.x,k.y,s/d*K)}else{_.copy(y.normals[K]).multiplyScalar(k.x);b.copy(y.binormals[K]).multiplyScalar(k.y);x.copy(m[K]).add(_).add(b);ee(x.x,x.y,x.z)}}}for(I=c-1;I>=0;I--){B=I/c;G=l*Math.cos(B*Math.PI/2);D=u*Math.sin(B*Math.PI/2);for(V=0,j=R.length;V<j;V++){k=O(R[V],z[V],D);ee(k.x,k.y,s+G)}for(T=0,M=A.length;T<M;T++){w=A[T];q=Y[T];for(V=0,j=w.length;V<j;V++){k=O(w[V],q[V],D);if(!v){ee(k.x,k.y,s+G)}else{ee(k.x,k.y+m[d-1].y,m[d-1].x+G)}}}}$();Q();function $(){var e=r.length/3;if(h){var i=0;var n=N*i;for(V=0;V<F;V++){U=L[V];te(U[2]+n,U[1]+n,U[0]+n)}i=d+c*2;n=N*i;for(V=0;V<F;V++){U=L[V];te(U[0]+n,U[1]+n,U[2]+n)}}else{for(V=0;V<F;V++){U=L[V];te(U[2],U[1],U[0])}for(V=0;V<F;V++){U=L[V];te(U[0]+N*d,U[1]+N*d,U[2]+N*d)}}S.addGroup(e,r.length/3-e,t.material!==undefined?t.material:0)}function Q(){var e=r.length/3;var i=0;J(R,i);i+=R.length;for(T=0,M=A.length;T<M;T++){w=A[T];J(w,i);i+=w.length}S.addGroup(e,r.length/3-e,t.extrudeMaterial!==undefined?t.extrudeMaterial:1)}function J(e,t){var i,r;V=e.length;while(--V>=0){i=V;r=V-1;if(r<0)r=e.length-1;var n=0,a=d+c*2;for(n=0;n<a;n++){var o=N*n;var s=N*(n+1);var l=t+i+o,u=t+r+o,h=t+r+s,f=t+i+s;ie(l,u,h,f)}}}function ee(e,t,i){o.push(e);o.push(t);o.push(i)}function te(e,t,i){re(e);re(t);re(i);var n=r.length/3;var a=g.generateTopUV(S,r,n-3,n-2,n-1);ne(a[0]);ne(a[1]);ne(a[2])}function ie(e,t,i,n){re(e);re(t);re(n);re(t);re(i);re(n);var a=r.length/3;var o=g.generateSideWallUV(S,r,a-6,a-3,a-2,a-1);ne(o[0]);ne(o[1]);ne(o[3]);ne(o[1]);ne(o[2]);ne(o[3])}function re(e){n.push(r.length/3);r.push(o[e*3+0]);r.push(o[e*3+1]);r.push(o[e*3+2])}function ne(e){a.push(e.x);a.push(e.y)}if(!t.arrays){this.setIndex(n);this.addAttribute("position",new na(r,3));this.addAttribute("uv",new na(t.arrays.uv,2))}};Yo.WorldUVGenerator={generateTopUV:function(e,t,i,r,n){var a=t[i*3];var o=t[i*3+1];var s=t[r*3];var l=t[r*3+1];var u=t[n*3];var c=t[n*3+1];return[new _t(a,o),new _t(s,l),new _t(u,c)]},generateSideWallUV:function(e,t,i,r,n,a){var o=t[i*3];var s=t[i*3+1];var l=t[i*3+2];var u=t[r*3];var c=t[r*3+1];var h=t[r*3+2];var f=t[n*3];var d=t[n*3+1];var p=t[n*3+2];var m=t[a*3];var v=t[a*3+1];var g=t[a*3+2];if(Math.abs(s-c)<.01){return[new _t(o,1-l),new _t(u,1-h),new _t(f,1-p),new _t(m,1-g)]}else{return[new _t(s,1-l),new _t(c,1-h),new _t(d,1-p),new _t(v,1-g)]}}};function Zo(e,t){Zn.call(this);this.type="TextGeometry";this.parameters={text:e,parameters:t};this.fromBufferGeometry(new Ko(e,t));this.mergeVertices()}Zo.prototype=Object.create(Zn.prototype);Zo.prototype.constructor=Zo;function Ko(e,t){t=t||{};var i=t.font;if(!(i&&i.isFont)){console.error("THREE.TextGeometry: font parameter is not an instance of THREE.Font.");return new Zn}var r=i.generateShapes(e,t.size,t.curveSegments);t.amount=t.height!==undefined?t.height:50;if(t.bevelThickness===undefined)t.bevelThickness=10;if(t.bevelSize===undefined)t.bevelSize=8;if(t.bevelEnabled===undefined)t.bevelEnabled=false;qo.call(this,r,t);this.type="TextBufferGeometry"}Ko.prototype=Object.create(qo.prototype);Ko.prototype.constructor=Ko;function $o(e,t,i,r,n,a,o){Zn.call(this);this.type="SphereGeometry";this.parameters={radius:e,widthSegments:t,heightSegments:i,phiStart:r,phiLength:n,thetaStart:a,thetaLength:o};this.fromBufferGeometry(new Qo(e,t,i,r,n,a,o));this.mergeVertices()}$o.prototype=Object.create(Zn.prototype);$o.prototype.constructor=$o;function Qo(e,t,i,r,n,a,o){ua.call(this);this.type="SphereBufferGeometry";this.parameters={radius:e,widthSegments:t,heightSegments:i,phiStart:r,phiLength:n,thetaStart:a,thetaLength:o};e=e||1;t=Math.max(3,Math.floor(t)||8);i=Math.max(2,Math.floor(i)||6);r=r!==undefined?r:0;n=n!==undefined?n:Math.PI*2;a=a!==undefined?a:0;o=o!==undefined?o:Math.PI;var s=a+o;var l,u;var c=0;var h=[];var f=new Tt;var d=new Tt;var p=[];var m=[];var v=[];var g=[];for(u=0;u<=i;u++){var y=[];var b=u/i;for(l=0;l<=t;l++){var _=l/t;f.x=-e*Math.cos(r+_*n)*Math.sin(a+b*o);f.y=e*Math.cos(a+b*o);f.z=e*Math.sin(r+_*n)*Math.sin(a+b*o);m.push(f.x,f.y,f.z);d.set(f.x,f.y,f.z).normalize();v.push(d.x,d.y,d.z);g.push(_,1-b);y.push(c++)}h.push(y)}for(u=0;u<i;u++){for(l=0;l<t;l++){var x=h[u][l+1];var w=h[u][l];var T=h[u+1][l];var M=h[u+1][l+1];if(u!==0||a>0)p.push(x,w,M);if(u!==i-1||s<Math.PI)p.push(w,T,M)}}this.setIndex(p);this.addAttribute("position",new na(m,3));this.addAttribute("normal",new na(v,3));this.addAttribute("uv",new na(g,2))}Qo.prototype=Object.create(ua.prototype);Qo.prototype.constructor=Qo;function Jo(e,t,i,r,n,a){Zn.call(this);this.type="RingGeometry";this.parameters={innerRadius:e,outerRadius:t,thetaSegments:i,phiSegments:r,thetaStart:n,thetaLength:a};this.fromBufferGeometry(new es(e,t,i,r,n,a));this.mergeVertices()}Jo.prototype=Object.create(Zn.prototype);Jo.prototype.constructor=Jo;function es(e,t,i,r,n,a){ua.call(this);this.type="RingBufferGeometry";this.parameters={innerRadius:e,outerRadius:t,thetaSegments:i,phiSegments:r,thetaStart:n,thetaLength:a};e=e||.5;t=t||1;n=n!==undefined?n:0;a=a!==undefined?a:Math.PI*2;i=i!==undefined?Math.max(3,i):8;r=r!==undefined?Math.max(1,r):1;var o=[];var s=[];var l=[];var u=[];var c;var h=e;var f=(t-e)/r;var d=new Tt;var p=new _t;var m,v;for(m=0;m<=r;m++){for(v=0;v<=i;v++){c=n+v/i*a;d.x=h*Math.cos(c);d.y=h*Math.sin(c);s.push(d.x,d.y,d.z);l.push(0,0,1);p.x=(d.x/t+1)/2;p.y=(d.y/t+1)/2;u.push(p.x,p.y)}h+=f}for(m=0;m<r;m++){var g=m*(i+1);for(v=0;v<i;v++){c=v+g;var y=c;var b=c+i+1;var _=c+i+2;var x=c+1;o.push(y,b,x);o.push(b,_,x)}}this.setIndex(o);this.addAttribute("position",new na(s,3));this.addAttribute("normal",new na(l,3));this.addAttribute("uv",new na(u,2))}es.prototype=Object.create(ua.prototype);es.prototype.constructor=es;function ts(e,t,i,r){Zn.call(this);this.type="LatheGeometry";this.parameters={points:e,segments:t,phiStart:i,phiLength:r};this.fromBufferGeometry(new is(e,t,i,r));this.mergeVertices()}ts.prototype=Object.create(Zn.prototype);ts.prototype.constructor=ts;function is(e,t,i,r){ua.call(this);this.type="LatheBufferGeometry";this.parameters={points:e,segments:t,phiStart:i,phiLength:r};t=Math.floor(t)||12;i=i||0;r=r||Math.PI*2;r=bt.clamp(r,0,Math.PI*2);var n=[];var a=[];var o=[];var s;var l=1/t;var u=new Tt;var c=new _t;var h,f;for(h=0;h<=t;h++){var d=i+h*l*r;var p=Math.sin(d);var m=Math.cos(d);for(f=0;f<=e.length-1;f++){u.x=e[f].x*p;u.y=e[f].y;u.z=e[f].x*m;a.push(u.x,u.y,u.z);c.x=h/t;c.y=f/(e.length-1);o.push(c.x,c.y)}}for(h=0;h<t;h++){for(f=0;f<e.length-1;f++){s=f+h*e.length;var v=s;var g=s+e.length;var y=s+e.length+1;var b=s+1;n.push(v,g,b);n.push(g,y,b)}}this.setIndex(n);this.addAttribute("position",new na(a,3));this.addAttribute("uv",new na(o,2));this.computeVertexNormals();if(r===Math.PI*2){var _=this.attributes.normal.array;var x=new Tt;var w=new Tt;var T=new Tt;s=t*e.length*3;for(h=0,f=0;h<e.length;h++,f+=3){x.x=_[f+0];x.y=_[f+1];x.z=_[f+2];w.x=_[s+f+0];w.y=_[s+f+1];w.z=_[s+f+2];T.addVectors(x,w).normalize();_[f+0]=_[s+f+0]=T.x;_[f+1]=_[s+f+1]=T.y;_[f+2]=_[s+f+2]=T.z}}}is.prototype=Object.create(ua.prototype);is.prototype.constructor=is;function rs(e,t){Zn.call(this);this.type="ShapeGeometry";if(typeof t==="object"){console.warn("THREE.ShapeGeometry: Options parameter has been removed.");t=t.curveSegments}this.parameters={shapes:e,curveSegments:t};this.fromBufferGeometry(new ns(e,t));this.mergeVertices()}rs.prototype=Object.create(Zn.prototype);rs.prototype.constructor=rs;function ns(e,t){ua.call(this);this.type="ShapeBufferGeometry";this.parameters={shapes:e,curveSegments:t};t=t||12;var i=[];var r=[];var n=[];var a=[];var o=0;var s=0;if(Array.isArray(e)===false){u(e)}else{for(var l=0;l<e.length;l++){u(e[l]);this.addGroup(o,s,l);o+=s;s=0}}this.setIndex(i);this.addAttribute("position",new na(r,3));this.addAttribute("normal",new na(n,3));this.addAttribute("uv",new na(a,2));function u(e){var o,l,u;var c=r.length/3;var h=e.extractPoints(t);var f=h.shape;var d=h.holes;if(Xo.isClockWise(f)===false){f=f.reverse();for(o=0,l=d.length;o<l;o++){u=d[o];if(Xo.isClockWise(u)===true){d[o]=u.reverse()}}}var p=Xo.triangulateShape(f,d);for(o=0,l=d.length;o<l;o++){u=d[o];f=f.concat(u)}for(o=0,l=f.length;o<l;o++){var m=f[o];r.push(m.x,m.y,0);n.push(0,0,1);a.push(m.x,m.y)}for(o=0,l=p.length;o<l;o++){var v=p[o];var g=v[0]+c;var y=v[1]+c;var b=v[2]+c;i.push(g,y,b);s+=3}}}ns.prototype=Object.create(ua.prototype);ns.prototype.constructor=ns;function as(e,t){ua.call(this);this.type="EdgesGeometry";this.parameters={thresholdAngle:t};t=t!==undefined?t:1;var i=[];var r=Math.cos(bt.DEG2RAD*t);var n=[0,0],a={},o,s;var l,u=["a","b","c"];var c;if(e.isBufferGeometry){c=new Zn;c.fromBufferGeometry(e)}else{c=e.clone()}c.mergeVertices();c.computeFaceNormals();var h=c.vertices;var f=c.faces;for(var d=0,p=f.length;d<p;d++){var m=f[d];for(var v=0;v<3;v++){o=m[u[v]];s=m[u[(v+1)%3]];n[0]=Math.min(o,s);n[1]=Math.max(o,s);l=n[0]+","+n[1];if(a[l]===undefined){a[l]={index1:n[0],index2:n[1],face1:d,face2:undefined}}else{a[l].face2=d}}}for(l in a){var g=a[l];if(g.face2===undefined||f[g.face1].normal.dot(f[g.face2].normal)<=r){var y=h[g.index1];i.push(y.x,y.y,y.z);y=h[g.index2];i.push(y.x,y.y,y.z)}}this.addAttribute("position",new na(i,3))}as.prototype=Object.create(ua.prototype);as.prototype.constructor=as;function os(e,t,i,r,n,a,o,s){Zn.call(this);this.type="CylinderGeometry";this.parameters={radiusTop:e,radiusBottom:t,height:i,radialSegments:r,heightSegments:n,openEnded:a,thetaStart:o,thetaLength:s};this.fromBufferGeometry(new ss(e,t,i,r,n,a,o,s));this.mergeVertices()}os.prototype=Object.create(Zn.prototype);os.prototype.constructor=os;function ss(e,t,i,r,n,a,o,s){ua.call(this);this.type="CylinderBufferGeometry";this.parameters={radiusTop:e,radiusBottom:t,height:i,radialSegments:r,heightSegments:n,openEnded:a,thetaStart:o,thetaLength:s};var l=this;e=e!==undefined?e:1;t=t!==undefined?t:1;i=i||1;r=Math.floor(r)||8;n=Math.floor(n)||1;a=a!==undefined?a:false;o=o!==undefined?o:0;s=s!==undefined?s:Math.PI*2;var u=[];var c=[];var h=[];var f=[];var d=0;var p=[];var m=i/2;var v=0;g();if(a===false){if(e>0)y(true);if(t>0)y(false)}this.setIndex(u);this.addAttribute("position",new na(c,3));this.addAttribute("normal",new na(h,3));this.addAttribute("uv",new na(f,2));function g(){var a,g;var y=new Tt;var b=new Tt;var _=0;var x=(t-e)/i;for(g=0;g<=n;g++){var w=[];var T=g/n;var M=T*(t-e)+e;for(a=0;a<=r;a++){var S=a/r;var E=S*s+o;var P=Math.sin(E);var A=Math.cos(E);b.x=M*P;b.y=-T*i+m;b.z=M*A;c.push(b.x,b.y,b.z);y.set(P,x,A).normalize();h.push(y.x,y.y,y.z);f.push(S,1-T);w.push(d++)}p.push(w)}for(a=0;a<r;a++){for(g=0;g<n;g++){var C=p[g][a];var L=p[g+1][a];var R=p[g+1][a+1];var O=p[g][a+1];u.push(C,L,O);u.push(L,R,O);_+=6}}l.addGroup(v,_,0);v+=_}function y(i){var n,a,p;var g=new _t;var y=new Tt;var b=0;var _=i===true?e:t;var x=i===true?1:-1;a=d;for(n=1;n<=r;n++){c.push(0,m*x,0);h.push(0,x,0);f.push(.5,.5);d++}p=d;for(n=0;n<=r;n++){var w=n/r;var T=w*s+o;var M=Math.cos(T);var S=Math.sin(T);y.x=_*S;y.y=m*x;y.z=_*M;c.push(y.x,y.y,y.z);h.push(0,x,0);g.x=M*.5+.5;g.y=S*.5*x+.5;f.push(g.x,g.y);d++}for(n=0;n<r;n++){var E=a+n;var P=p+n;if(i===true){u.push(P,P+1,E)}else{u.push(P+1,P,E)}b+=3}l.addGroup(v,b,i===true?1:2);v+=b}}ss.prototype=Object.create(ua.prototype);ss.prototype.constructor=ss;function ls(e,t,i,r,n,a,o){os.call(this,0,e,t,i,r,n,a,o);this.type="ConeGeometry";this.parameters={radius:e,height:t,radialSegments:i,heightSegments:r,openEnded:n,thetaStart:a,thetaLength:o}}ls.prototype=Object.create(os.prototype);ls.prototype.constructor=ls;function us(e,t,i,r,n,a,o){ss.call(this,0,e,t,i,r,n,a,o);this.type="ConeBufferGeometry";this.parameters={radius:e,height:t,radialSegments:i,heightSegments:r,openEnded:n,thetaStart:a,thetaLength:o}}us.prototype=Object.create(ss.prototype);us.prototype.constructor=us;function cs(e,t,i,r){Zn.call(this);this.type="CircleGeometry";this.parameters={radius:e,segments:t,thetaStart:i,thetaLength:r};this.fromBufferGeometry(new hs(e,t,i,r));this.mergeVertices()}cs.prototype=Object.create(Zn.prototype);cs.prototype.constructor=cs;function hs(e,t,i,r){ua.call(this);this.type="CircleBufferGeometry";this.parameters={radius:e,segments:t,thetaStart:i,thetaLength:r};e=e||1;t=t!==undefined?Math.max(3,t):8;i=i!==undefined?i:0;r=r!==undefined?r:Math.PI*2;var n=[];var a=[];var o=[];var s=[];var l,u;var c=new Tt;var h=new _t;a.push(0,0,0);o.push(0,0,1);s.push(.5,.5);for(u=0,l=3;u<=t;u++,l+=3){var f=i+u/t*r;c.x=e*Math.cos(f);c.y=e*Math.sin(f);a.push(c.x,c.y,c.z);o.push(0,0,1);h.x=(a[l]/e+1)/2;h.y=(a[l+1]/e+1)/2;s.push(h.x,h.y)}for(l=1;l<=t;l++){n.push(l,l+1,0)}this.setIndex(n);this.addAttribute("position",new na(a,3));this.addAttribute("normal",new na(o,3));this.addAttribute("uv",new na(s,2))}hs.prototype=Object.create(ua.prototype);hs.prototype.constructor=hs;var fs=Object.freeze({WireframeGeometry:Po,ParametricGeometry:Ao,ParametricBufferGeometry:Co,TetrahedronGeometry:Oo,TetrahedronBufferGeometry:Io,OctahedronGeometry:Do,OctahedronBufferGeometry:Bo,IcosahedronGeometry:Go,IcosahedronBufferGeometry:ko,DodecahedronGeometry:No,DodecahedronBufferGeometry:Uo,PolyhedronGeometry:Lo,PolyhedronBufferGeometry:Ro,TubeGeometry:Fo,TubeBufferGeometry:Ho,TorusKnotGeometry:zo,TorusKnotBufferGeometry:Vo,TorusGeometry:jo,TorusBufferGeometry:Wo,TextGeometry:Zo,TextBufferGeometry:Ko,SphereGeometry:$o,SphereBufferGeometry:Qo,RingGeometry:Jo,RingBufferGeometry:es,PlaneGeometry:fa,PlaneBufferGeometry:da,LatheGeometry:ts,LatheBufferGeometry:is,ShapeGeometry:rs,ShapeBufferGeometry:ns,ExtrudeGeometry:Yo,ExtrudeBufferGeometry:qo,EdgesGeometry:as,ConeGeometry:ls,ConeBufferGeometry:us,CylinderGeometry:os,CylinderBufferGeometry:ss,CircleGeometry:cs,CircleBufferGeometry:hs,BoxGeometry:ca,BoxBufferGeometry:ha});function ds(e){On.call(this);this.type="ShadowMaterial";this.color=new _i(0);this.opacity=1;this.lights=true;this.transparent=true;this.setValues(e)}ds.prototype=Object.create(On.prototype);ds.prototype.constructor=ds;ds.prototype.isShadowMaterial=true;function ps(e){ma.call(this,e);this.type="RawShaderMaterial"}ps.prototype=Object.create(ma.prototype);ps.prototype.constructor=ps;ps.prototype.isRawShaderMaterial=true;function ms(e){On.call(this);this.defines={STANDARD:""};this.type="MeshStandardMaterial";this.color=new _i(16777215);this.roughness=.5;this.metalness=.5;this.map=null;this.lightMap=null;this.lightMapIntensity=1;this.aoMap=null;this.aoMapIntensity=1;this.emissive=new _i(0);this.emissiveIntensity=1;this.emissiveMap=null;this.bumpMap=null;this.bumpScale=1;this.normalMap=null;this.normalScale=new _t(1,1);this.displacementMap=null;this.displacementScale=1;this.displacementBias=0;this.roughnessMap=null;this.metalnessMap=null;this.alphaMap=null;this.envMap=null;this.envMapIntensity=1;this.refractionRatio=.98;this.wireframe=false;this.wireframeLinewidth=1;this.wireframeLinecap="round";this.wireframeLinejoin="round";this.skinning=false;this.morphTargets=false;this.morphNormals=false;this.setValues(e)}ms.prototype=Object.create(On.prototype);ms.prototype.constructor=ms;ms.prototype.isMeshStandardMaterial=true;ms.prototype.copy=function(e){On.prototype.copy.call(this,e);this.defines={STANDARD:""};this.color.copy(e.color);this.roughness=e.roughness;this.metalness=e.metalness;this.map=e.map;this.lightMap=e.lightMap;this.lightMapIntensity=e.lightMapIntensity;this.aoMap=e.aoMap;this.aoMapIntensity=e.aoMapIntensity;this.emissive.copy(e.emissive);this.emissiveMap=e.emissiveMap;this.emissiveIntensity=e.emissiveIntensity;this.bumpMap=e.bumpMap;this.bumpScale=e.bumpScale;this.normalMap=e.normalMap;this.normalScale.copy(e.normalScale);this.displacementMap=e.displacementMap;this.displacementScale=e.displacementScale;this.displacementBias=e.displacementBias;this.roughnessMap=e.roughnessMap;this.metalnessMap=e.metalnessMap;this.alphaMap=e.alphaMap;this.envMap=e.envMap;this.envMapIntensity=e.envMapIntensity;this.refractionRatio=e.refractionRatio;this.wireframe=e.wireframe;this.wireframeLinewidth=e.wireframeLinewidth;this.wireframeLinecap=e.wireframeLinecap;this.wireframeLinejoin=e.wireframeLinejoin;this.skinning=e.skinning;this.morphTargets=e.morphTargets;this.morphNormals=e.morphNormals;return this};function vs(e){ms.call(this);this.defines={PHYSICAL:""};this.type="MeshPhysicalMaterial";this.reflectivity=.5;this.clearCoat=0;this.clearCoatRoughness=0;this.setValues(e)}vs.prototype=Object.create(ms.prototype);vs.prototype.constructor=vs;vs.prototype.isMeshPhysicalMaterial=true;vs.prototype.copy=function(e){ms.prototype.copy.call(this,e);this.defines={PHYSICAL:""};this.reflectivity=e.reflectivity;this.clearCoat=e.clearCoat;this.clearCoatRoughness=e.clearCoatRoughness;return this};function gs(e){On.call(this);this.type="MeshPhongMaterial";this.color=new _i(16777215);this.specular=new _i(1118481);this.shininess=30;this.map=null;this.lightMap=null;this.lightMapIntensity=1;this.aoMap=null;this.aoMapIntensity=1;this.emissive=new _i(0);this.emissiveIntensity=1;this.emissiveMap=null;this.bumpMap=null;this.bumpScale=1;this.normalMap=null;this.normalScale=new _t(1,1);this.displacementMap=null;this.displacementScale=1;this.displacementBias=0;this.specularMap=null;this.alphaMap=null;this.envMap=null;this.combine=$;this.reflectivity=1;this.refractionRatio=.98;this.wireframe=false;this.wireframeLinewidth=1;this.wireframeLinecap="round";this.wireframeLinejoin="round";this.skinning=false;this.morphTargets=false;this.morphNormals=false;this.setValues(e)}gs.prototype=Object.create(On.prototype);gs.prototype.constructor=gs;gs.prototype.isMeshPhongMaterial=true;gs.prototype.copy=function(e){On.prototype.copy.call(this,e);this.color.copy(e.color);this.specular.copy(e.specular);this.shininess=e.shininess;this.map=e.map;this.lightMap=e.lightMap;this.lightMapIntensity=e.lightMapIntensity;this.aoMap=e.aoMap;this.aoMapIntensity=e.aoMapIntensity;this.emissive.copy(e.emissive);this.emissiveMap=e.emissiveMap;this.emissiveIntensity=e.emissiveIntensity;this.bumpMap=e.bumpMap;this.bumpScale=e.bumpScale;this.normalMap=e.normalMap;this.normalScale.copy(e.normalScale);this.displacementMap=e.displacementMap;this.displacementScale=e.displacementScale;this.displacementBias=e.displacementBias;this.specularMap=e.specularMap;this.alphaMap=e.alphaMap;this.envMap=e.envMap;this.combine=e.combine;this.reflectivity=e.reflectivity;this.refractionRatio=e.refractionRatio;this.wireframe=e.wireframe;this.wireframeLinewidth=e.wireframeLinewidth;this.wireframeLinecap=e.wireframeLinecap;this.wireframeLinejoin=e.wireframeLinejoin;this.skinning=e.skinning;this.morphTargets=e.morphTargets;this.morphNormals=e.morphNormals;return this};function ys(e){gs.call(this);this.defines={TOON:""};this.type="MeshToonMaterial";this.gradientMap=null;this.setValues(e)}ys.prototype=Object.create(gs.prototype);ys.prototype.constructor=ys;ys.prototype.isMeshToonMaterial=true;ys.prototype.copy=function(e){gs.prototype.copy.call(this,e);this.gradientMap=e.gradientMap;return this};function bs(e){On.call(this);this.type="MeshNormalMaterial";this.bumpMap=null;this.bumpScale=1;this.normalMap=null;this.normalScale=new _t(1,1);this.displacementMap=null;this.displacementScale=1;this.displacementBias=0;this.wireframe=false;this.wireframeLinewidth=1;this.fog=false;this.lights=false;this.skinning=false;this.morphTargets=false;this.morphNormals=false;this.setValues(e)}bs.prototype=Object.create(On.prototype);bs.prototype.constructor=bs;bs.prototype.isMeshNormalMaterial=true;bs.prototype.copy=function(e){On.prototype.copy.call(this,e);this.bumpMap=e.bumpMap;this.bumpScale=e.bumpScale;this.normalMap=e.normalMap;this.normalScale.copy(e.normalScale);this.displacementMap=e.displacementMap;this.displacementScale=e.displacementScale;this.displacementBias=e.displacementBias;this.wireframe=e.wireframe;this.wireframeLinewidth=e.wireframeLinewidth;this.skinning=e.skinning;this.morphTargets=e.morphTargets;this.morphNormals=e.morphNormals;return this};function _s(e){On.call(this);this.type="MeshLambertMaterial";this.color=new _i(16777215);this.map=null;this.lightMap=null;this.lightMapIntensity=1;this.aoMap=null;this.aoMapIntensity=1;this.emissive=new _i(0);this.emissiveIntensity=1;this.emissiveMap=null;this.specularMap=null;this.alphaMap=null;this.envMap=null;this.combine=$;this.reflectivity=1;this.refractionRatio=.98;this.wireframe=false;this.wireframeLinewidth=1;this.wireframeLinecap="round";this.wireframeLinejoin="round";this.skinning=false;this.morphTargets=false;this.morphNormals=false;this.setValues(e)}_s.prototype=Object.create(On.prototype);_s.prototype.constructor=_s;_s.prototype.isMeshLambertMaterial=true;_s.prototype.copy=function(e){On.prototype.copy.call(this,e);this.color.copy(e.color);this.map=e.map;this.lightMap=e.lightMap;this.lightMapIntensity=e.lightMapIntensity;this.aoMap=e.aoMap;this.aoMapIntensity=e.aoMapIntensity;this.emissive.copy(e.emissive);this.emissiveMap=e.emissiveMap;this.emissiveIntensity=e.emissiveIntensity;this.specularMap=e.specularMap;this.alphaMap=e.alphaMap;this.envMap=e.envMap;this.combine=e.combine;this.reflectivity=e.reflectivity;this.refractionRatio=e.refractionRatio;this.wireframe=e.wireframe;this.wireframeLinewidth=e.wireframeLinewidth;this.wireframeLinecap=e.wireframeLinecap;this.wireframeLinejoin=e.wireframeLinejoin;this.skinning=e.skinning;this.morphTargets=e.morphTargets;this.morphNormals=e.morphNormals;return this};function xs(e){go.call(this);this.type="LineDashedMaterial";this.scale=1;this.dashSize=3;this.gapSize=1;this.setValues(e)}xs.prototype=Object.create(go.prototype);xs.prototype.constructor=xs;xs.prototype.isLineDashedMaterial=true;xs.prototype.copy=function(e){go.prototype.copy.call(this,e);this.scale=e.scale;this.dashSize=e.dashSize;this.gapSize=e.gapSize;return this};var ws=Object.freeze({ShadowMaterial:ds,SpriteMaterial:co,RawShaderMaterial:ps,ShaderMaterial:ma,PointsMaterial:xo,MeshPhysicalMaterial:vs,MeshStandardMaterial:ms,MeshPhongMaterial:gs,MeshToonMaterial:ys,MeshNormalMaterial:bs,MeshLambertMaterial:_s,MeshDepthMaterial:In,MeshDistanceMaterial:Dn,MeshBasicMaterial:pa,LineDashedMaterial:xs,LineBasicMaterial:go,Material:On});var Ts={enabled:false,files:{},add:function(e,t){if(this.enabled===false)return;this.files[e]=t},get:function(e){if(this.enabled===false)return;return this.files[e]},remove:function(e){delete this.files[e]},clear:function(){this.files={}}};function Ms(e,t,i){var r=this;var n=false;var a=0;var o=0;var s=undefined;this.onStart=undefined;this.onLoad=e;this.onProgress=t;this.onError=i;this.itemStart=function(e){o++;if(n===false){if(r.onStart!==undefined){r.onStart(e,a,o)}}n=true};this.itemEnd=function(e){a++;if(r.onProgress!==undefined){r.onProgress(e,a,o)}if(a===o){n=false;if(r.onLoad!==undefined){r.onLoad()}}};this.itemError=function(e){if(r.onError!==undefined){r.onError(e)}};this.resolveURL=function(e){if(s){return s(e)}return e};this.setURLModifier=function(e){s=e}}var Ss=new Ms;var Es={};function Ps(e){this.manager=e!==undefined?e:Ss}Object.assign(Ps.prototype,{load:function(e,t,i,r){if(e===undefined)e="";if(this.path!==undefined)e=this.path+e;e=this.manager.resolveURL(e);var n=this;var a=Ts.get(e);if(a!==undefined){n.manager.itemStart(e);setTimeout(function(){if(t)t(a);n.manager.itemEnd(e)},0);return a}if(Es[e]!==undefined){Es[e].push({onLoad:t,onProgress:i,onError:r});return}var o=/^data:(.*?)(;base64)?,(.*)$/;var s=e.match(o);if(s){var l=s[1];var u=!!s[2];var c=s[3];c=window.decodeURIComponent(c);if(u)c=window.atob(c);try{var h;var f=(this.responseType||"").toLowerCase();switch(f){case"arraybuffer":case"blob":var d=new Uint8Array(c.length);for(var p=0;p<c.length;p++){d[p]=c.charCodeAt(p)}if(f==="blob"){h=new Blob([d.buffer],{type:l})}else{h=d.buffer}break;case"document":var m=new DOMParser;h=m.parseFromString(c,l);break;case"json":h=JSON.parse(c);break;default:h=c;break}window.setTimeout(function(){if(t)t(h);n.manager.itemEnd(e)},0)}catch(t){window.setTimeout(function(){if(r)r(t);n.manager.itemEnd(e);n.manager.itemError(e)},0)}}else{Es[e]=[];Es[e].push({onLoad:t,onProgress:i,onError:r});var v=new XMLHttpRequest;v.open("GET",e,true);v.addEventListener("load",function(t){var i=t.target.response;Ts.add(e,i);var r=Es[e];delete Es[e];if(this.status===200){for(var a=0,o=r.length;a<o;a++){var s=r[a];if(s.onLoad)s.onLoad(i)}n.manager.itemEnd(e)}else if(this.status===0){console.warn("THREE.FileLoader: HTTP Status 0 received.");for(var a=0,o=r.length;a<o;a++){var s=r[a];if(s.onLoad)s.onLoad(i)}n.manager.itemEnd(e)}else{for(var a=0,o=r.length;a<o;a++){var s=r[a];if(s.onError)s.onError(t)}n.manager.itemEnd(e);n.manager.itemError(e)}},false);v.addEventListener("progress",function(t){var i=Es[e];for(var r=0,n=i.length;r<n;r++){var a=i[r];if(a.onProgress)a.onProgress(t)}},false);v.addEventListener("error",function(t){var i=Es[e];delete Es[e];for(var r=0,a=i.length;r<a;r++){var o=i[r];if(o.onError)o.onError(t)}n.manager.itemEnd(e);n.manager.itemError(e)},false);if(this.responseType!==undefined)v.responseType=this.responseType;if(this.withCredentials!==undefined)v.withCredentials=this.withCredentials
;if(v.overrideMimeType)v.overrideMimeType(this.mimeType!==undefined?this.mimeType:"text/plain");for(var g in this.requestHeader){v.setRequestHeader(g,this.requestHeader[g])}v.send(null)}n.manager.itemStart(e);return v},setPath:function(e){this.path=e;return this},setResponseType:function(e){this.responseType=e;return this},setWithCredentials:function(e){this.withCredentials=e;return this},setMimeType:function(e){this.mimeType=e;return this},setRequestHeader:function(e){this.requestHeader=e;return this}});function As(e){this.manager=e!==undefined?e:Ss;this._parser=null}Object.assign(As.prototype,{load:function(e,t,i,r){var n=this;var a=[];var o=new So;o.image=a;var s=new Ps(this.manager);s.setPath(this.path);s.setResponseType("arraybuffer");function l(l){s.load(e[l],function(e){var i=n._parser(e,true);a[l]={width:i.width,height:i.height,format:i.format,mipmaps:i.mipmaps};u+=1;if(u===6){if(i.mipmapCount===1)o.minFilter=be;o.format=i.format;o.needsUpdate=true;if(t)t(o)}},i,r)}if(Array.isArray(e)){var u=0;for(var c=0,h=e.length;c<h;++c){l(c)}}else{s.load(e,function(e){var i=n._parser(e,true);if(i.isCubemap){var r=i.mipmaps.length/i.mipmapCount;for(var s=0;s<r;s++){a[s]={mipmaps:[]};for(var l=0;l<i.mipmapCount;l++){a[s].mipmaps.push(i.mipmaps[s*i.mipmapCount+l]);a[s].format=i.format;a[s].width=i.width;a[s].height=i.height}}}else{o.image.width=i.width;o.image.height=i.height;o.mipmaps=i.mipmaps}if(i.mipmapCount===1){o.minFilter=be}o.format=i.format;o.needsUpdate=true;if(t)t(o)},i,r)}return o},setPath:function(e){this.path=e;return this}});function Cs(e){this.manager=e!==undefined?e:Ss;this._parser=null}Object.assign(Cs.prototype,{load:function(e,t,i,r){var n=this;var a=new Lt;var o=new Ps(this.manager);o.setResponseType("arraybuffer");o.load(e,function(e){var i=n._parser(e);if(!i)return;if(undefined!==i.image){a.image=i.image}else if(undefined!==i.data){a.image.width=i.width;a.image.height=i.height;a.image.data=i.data}a.wrapS=undefined!==i.wrapS?i.wrapS:pe;a.wrapT=undefined!==i.wrapT?i.wrapT:pe;a.magFilter=undefined!==i.magFilter?i.magFilter:be;a.minFilter=undefined!==i.minFilter?i.minFilter:xe;a.anisotropy=undefined!==i.anisotropy?i.anisotropy:1;if(undefined!==i.format){a.format=i.format}if(undefined!==i.type){a.type=i.type}if(undefined!==i.mipmaps){a.mipmaps=i.mipmaps}if(1===i.mipmapCount){a.minFilter=be}a.needsUpdate=true;if(t)t(a,i)},i,r);return a}});function Ls(e){this.manager=e!==undefined?e:Ss}Object.assign(Ls.prototype,{crossOrigin:"Anonymous",load:function(e,t,i,r){if(e===undefined)e="";if(this.path!==undefined)e=this.path+e;e=this.manager.resolveURL(e);var n=this;var a=Ts.get(e);if(a!==undefined){n.manager.itemStart(e);setTimeout(function(){if(t)t(a);n.manager.itemEnd(e)},0);return a}var o=document.createElementNS("http://www.w3.org/1999/xhtml","img");o.addEventListener("load",function(){Ts.add(e,this);if(t)t(this);n.manager.itemEnd(e)},false);o.addEventListener("error",function(t){if(r)r(t);n.manager.itemEnd(e);n.manager.itemError(e)},false);if(e.substr(0,5)!=="data:"){if(this.crossOrigin!==undefined)o.crossOrigin=this.crossOrigin}n.manager.itemStart(e);o.src=e;return o},setCrossOrigin:function(e){this.crossOrigin=e;return this},setPath:function(e){this.path=e;return this}});function Rs(e){this.manager=e!==undefined?e:Ss}Object.assign(Rs.prototype,{crossOrigin:"Anonymous",load:function(e,t,i,r){var n=new Rt;var a=new Ls(this.manager);a.setCrossOrigin(this.crossOrigin);a.setPath(this.path);var o=0;function s(i){a.load(e[i],function(e){n.images[i]=e;o++;if(o===6){n.needsUpdate=true;if(t)t(n)}},undefined,r)}for(var l=0;l<e.length;++l){s(l)}return n},setCrossOrigin:function(e){this.crossOrigin=e;return this},setPath:function(e){this.path=e;return this}});function Os(e){this.manager=e!==undefined?e:Ss}Object.assign(Os.prototype,{crossOrigin:"Anonymous",load:function(e,t,i,r){var n=new Ls(this.manager);n.setCrossOrigin(this.crossOrigin);n.setPath(this.path);var a=new Et;a.image=n.load(e,function(){var i=e.search(/\.(jpg|jpeg)$/)>0||e.search(/^data\:image\/jpeg/)===0;a.format=i?Be:Ge;a.needsUpdate=true;if(t!==undefined){t(a)}},i,r);return a},setCrossOrigin:function(e){this.crossOrigin=e;return this},setPath:function(e){this.path=e;return this}});function Is(e,t){jn.call(this);this.type="Light";this.color=new _i(e);this.intensity=t!==undefined?t:1;this.receiveShadow=undefined}Is.prototype=Object.assign(Object.create(jn.prototype),{constructor:Is,isLight:true,copy:function(e){jn.prototype.copy.call(this,e);this.color.copy(e.color);this.intensity=e.intensity;return this},toJSON:function(e){var t=jn.prototype.toJSON.call(this,e);t.object.color=this.color.getHex();t.object.intensity=this.intensity;if(this.groundColor!==undefined)t.object.groundColor=this.groundColor.getHex();if(this.distance!==undefined)t.object.distance=this.distance;if(this.angle!==undefined)t.object.angle=this.angle;if(this.decay!==undefined)t.object.decay=this.decay;if(this.penumbra!==undefined)t.object.penumbra=this.penumbra;if(this.shadow!==undefined)t.object.shadow=this.shadow.toJSON();return t}});function Ds(e,t,i){Is.call(this,e,i);this.type="HemisphereLight";this.castShadow=undefined;this.position.copy(jn.DefaultUp);this.updateMatrix();this.groundColor=new _i(t)}Ds.prototype=Object.assign(Object.create(Is.prototype),{constructor:Ds,isHemisphereLight:true,copy:function(e){Is.prototype.copy.call(this,e);this.groundColor.copy(e.groundColor);return this}});function Bs(e){this.camera=e;this.bias=0;this.radius=1;this.mapSize=new _t(512,512);this.map=null;this.matrix=new xt}Object.assign(Bs.prototype,{copy:function(e){this.camera=e.camera.clone();this.bias=e.bias;this.radius=e.radius;this.mapSize.copy(e.mapSize);return this},clone:function(){return(new this.constructor).copy(this)},toJSON:function(){var e={};if(this.bias!==0)e.bias=this.bias;if(this.radius!==1)e.radius=this.radius;if(this.mapSize.x!==512||this.mapSize.y!==512)e.mapSize=this.mapSize.toArray();e.camera=this.camera.toJSON(false).object;delete e.camera.matrix;return e}});function Gs(){Bs.call(this,new Ja(50,1,.5,500))}Gs.prototype=Object.assign(Object.create(Bs.prototype),{constructor:Gs,isSpotLightShadow:true,update:function(e){var t=this.camera;var i=bt.RAD2DEG*2*e.angle;var r=this.mapSize.width/this.mapSize.height;var n=e.distance||t.far;if(i!==t.fov||r!==t.aspect||n!==t.far){t.fov=i;t.aspect=r;t.far=n;t.updateProjectionMatrix()}}});function ks(e,t,i,r,n,a){Is.call(this,e,t);this.type="SpotLight";this.position.copy(jn.DefaultUp);this.updateMatrix();this.target=new jn;Object.defineProperty(this,"power",{get:function(){return this.intensity*Math.PI},set:function(e){this.intensity=e/Math.PI}});this.distance=i!==undefined?i:0;this.angle=r!==undefined?r:Math.PI/3;this.penumbra=n!==undefined?n:0;this.decay=a!==undefined?a:1;this.shadow=new Gs}ks.prototype=Object.assign(Object.create(Is.prototype),{constructor:ks,isSpotLight:true,copy:function(e){Is.prototype.copy.call(this,e);this.distance=e.distance;this.angle=e.angle;this.penumbra=e.penumbra;this.decay=e.decay;this.target=e.target.clone();this.shadow=e.shadow.clone();return this}});function Ns(e,t,i,r){Is.call(this,e,t);this.type="PointLight";Object.defineProperty(this,"power",{get:function(){return this.intensity*4*Math.PI},set:function(e){this.intensity=e/(4*Math.PI)}});this.distance=i!==undefined?i:0;this.decay=r!==undefined?r:1;this.shadow=new Bs(new Ja(90,1,.5,500))}Ns.prototype=Object.assign(Object.create(Is.prototype),{constructor:Ns,isPointLight:true,copy:function(e){Is.prototype.copy.call(this,e);this.distance=e.distance;this.decay=e.decay;this.shadow=e.shadow.clone();return this}});function Us(){Bs.call(this,new Xn(-5,5,5,-5,.5,500))}Us.prototype=Object.assign(Object.create(Bs.prototype),{constructor:Us});function Fs(e,t){Is.call(this,e,t);this.type="DirectionalLight";this.position.copy(jn.DefaultUp);this.updateMatrix();this.target=new jn;this.shadow=new Us}Fs.prototype=Object.assign(Object.create(Is.prototype),{constructor:Fs,isDirectionalLight:true,copy:function(e){Is.prototype.copy.call(this,e);this.target=e.target.clone();this.shadow=e.shadow.clone();return this}});function Hs(e,t){Is.call(this,e,t);this.type="AmbientLight";this.castShadow=undefined}Hs.prototype=Object.assign(Object.create(Is.prototype),{constructor:Hs,isAmbientLight:true});function zs(e,t,i,r){Is.call(this,e,t);this.type="RectAreaLight";this.position.set(0,1,0);this.updateMatrix();this.width=i!==undefined?i:10;this.height=r!==undefined?r:10}zs.prototype=Object.assign(Object.create(Is.prototype),{constructor:zs,isRectAreaLight:true,copy:function(e){Is.prototype.copy.call(this,e);this.width=e.width;this.height=e.height;return this},toJSON:function(e){var t=Is.prototype.toJSON.call(this,e);t.object.width=this.width;t.object.height=this.height;return t}});var Vs={arraySlice:function(e,t,i){if(Vs.isTypedArray(e)){return new e.constructor(e.subarray(t,i!==undefined?i:e.length))}return e.slice(t,i)},convertArray:function(e,t,i){if(!e||!i&&e.constructor===t)return e;if(typeof t.BYTES_PER_ELEMENT==="number"){return new t(e)}return Array.prototype.slice.call(e)},isTypedArray:function(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)},getKeyframeOrder:function(e){function t(t,i){return e[t]-e[i]}var i=e.length;var r=new Array(i);for(var n=0;n!==i;++n)r[n]=n;r.sort(t);return r},sortedArray:function(e,t,i){var r=e.length;var n=new e.constructor(r);for(var a=0,o=0;o!==r;++a){var s=i[a]*t;for(var l=0;l!==t;++l){n[o++]=e[s+l]}}return n},flattenJSON:function(e,t,i,r){var n=1,a=e[0];while(a!==undefined&&a[r]===undefined){a=e[n++]}if(a===undefined)return;var o=a[r];if(o===undefined)return;if(Array.isArray(o)){do{o=a[r];if(o!==undefined){t.push(a.time);i.push.apply(i,o)}a=e[n++]}while(a!==undefined)}else if(o.toArray!==undefined){do{o=a[r];if(o!==undefined){t.push(a.time);o.toArray(i,i.length)}a=e[n++]}while(a!==undefined)}else{do{o=a[r];if(o!==undefined){t.push(a.time);i.push(o)}a=e[n++]}while(a!==undefined)}}};function js(e,t,i,r){this.parameterPositions=e;this._cachedIndex=0;this.resultBuffer=r!==undefined?r:new t.constructor(i);this.sampleValues=t;this.valueSize=i}Object.assign(js.prototype,{evaluate:function(e){var t=this.parameterPositions,i=this._cachedIndex,r=t[i],n=t[i-1];e:{t:{var a;i:{r:if(!(e<r)){for(var o=i+2;;){if(r===undefined){if(e<n)break r;i=t.length;this._cachedIndex=i;return this.afterEnd_(i-1,e,n)}if(i===o)break;n=r;r=t[++i];if(e<r){break t}}a=t.length;break i}if(!(e>=n)){var s=t[1];if(e<s){i=2;n=s}for(var o=i-2;;){if(n===undefined){this._cachedIndex=0;return this.beforeStart_(0,e,r)}if(i===o)break;r=n;n=t[--i-1];if(e>=n){break t}}a=i;i=0;break i}break e}while(i<a){var l=i+a>>>1;if(e<t[l]){a=l}else{i=l+1}}r=t[i];n=t[i-1];if(n===undefined){this._cachedIndex=0;return this.beforeStart_(0,e,r)}if(r===undefined){i=t.length;this._cachedIndex=i;return this.afterEnd_(i-1,n,e)}}this._cachedIndex=i;this.intervalChanged_(i,n,r)}return this.interpolate_(i,n,e,r)},settings:null,DefaultSettings_:{},getSettings_:function(){return this.settings||this.DefaultSettings_},copySampleValue_:function(e){var t=this.resultBuffer,i=this.sampleValues,r=this.valueSize,n=e*r;for(var a=0;a!==r;++a){t[a]=i[n+a]}return t},interpolate_:function(){throw new Error("call to abstract method")},intervalChanged_:function(){}});Object.assign(js.prototype,{beforeStart_:js.prototype.copySampleValue_,afterEnd_:js.prototype.copySampleValue_});function Ws(e,t,i,r){js.call(this,e,t,i,r);this._weightPrev=-0;this._offsetPrev=-0;this._weightNext=-0;this._offsetNext=-0}Ws.prototype=Object.assign(Object.create(js.prototype),{constructor:Ws,DefaultSettings_:{endingStart:rt,endingEnd:rt},intervalChanged_:function(e,t,i){var r=this.parameterPositions,n=e-2,a=e+1,o=r[n],s=r[a];if(o===undefined){switch(this.getSettings_().endingStart){case nt:n=e;o=2*t-i;break;case at:n=r.length-2;o=t+r[n]-r[n+1];break;default:n=e;o=i}}if(s===undefined){switch(this.getSettings_().endingEnd){case nt:a=e;s=2*i-t;break;case at:a=1;s=i+r[1]-r[0];break;default:a=e-1;s=t}}var l=(i-t)*.5,u=this.valueSize;this._weightPrev=l/(t-o);this._weightNext=l/(s-i);this._offsetPrev=n*u;this._offsetNext=a*u},interpolate_:function(e,t,i,r){var n=this.resultBuffer,a=this.sampleValues,o=this.valueSize,s=e*o,l=s-o,u=this._offsetPrev,c=this._offsetNext,h=this._weightPrev,f=this._weightNext,d=(i-t)/(r-t),p=d*d,m=p*d;var v=-h*m+2*h*p-h*d;var g=(1+h)*m+(-1.5-2*h)*p+(-.5+h)*d+1;var y=(-1-f)*m+(1.5+f)*p+.5*d;var b=f*m-f*p;for(var _=0;_!==o;++_){n[_]=v*a[u+_]+g*a[l+_]+y*a[s+_]+b*a[c+_]}return n}});function Xs(e,t,i,r){js.call(this,e,t,i,r)}Xs.prototype=Object.assign(Object.create(js.prototype),{constructor:Xs,interpolate_:function(e,t,i,r){var n=this.resultBuffer,a=this.sampleValues,o=this.valueSize,s=e*o,l=s-o,u=(i-t)/(r-t),c=1-u;for(var h=0;h!==o;++h){n[h]=a[l+h]*c+a[s+h]*u}return n}});function Ys(e,t,i,r){js.call(this,e,t,i,r)}Ys.prototype=Object.assign(Object.create(js.prototype),{constructor:Ys,interpolate_:function(e){return this.copySampleValue_(e-1)}});var qs;qs={TimeBufferType:Float32Array,ValueBufferType:Float32Array,DefaultInterpolation:tt,InterpolantFactoryMethodDiscrete:function(e){return new Ys(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodLinear:function(e){return new Xs(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodSmooth:function(e){return new Ws(this.times,this.values,this.getValueSize(),e)},setInterpolation:function(e){var t;switch(e){case et:t=this.InterpolantFactoryMethodDiscrete;break;case tt:t=this.InterpolantFactoryMethodLinear;break;case it:t=this.InterpolantFactoryMethodSmooth;break}if(t===undefined){var i="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===undefined){if(e!==this.DefaultInterpolation){this.setInterpolation(this.DefaultInterpolation)}else{throw new Error(i)}}console.warn("THREE.KeyframeTrackPrototype:",i);return}this.createInterpolant=t},getInterpolation:function(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return et;case this.InterpolantFactoryMethodLinear:return tt;case this.InterpolantFactoryMethodSmooth:return it}},getValueSize:function(){return this.values.length/this.times.length},shift:function(e){if(e!==0){var t=this.times;for(var i=0,r=t.length;i!==r;++i){t[i]+=e}}return this},scale:function(e){if(e!==1){var t=this.times;for(var i=0,r=t.length;i!==r;++i){t[i]*=e}}return this},trim:function(e,t){var i=this.times,r=i.length,n=0,a=r-1;while(n!==r&&i[n]<e)++n;while(a!==-1&&i[a]>t)--a;++a;if(n!==0||a!==r){if(n>=a)a=Math.max(a,1),n=a-1;var o=this.getValueSize();this.times=Vs.arraySlice(i,n,a);this.values=Vs.arraySlice(this.values,n*o,a*o)}return this},validate:function(){var e=true;var t=this.getValueSize();if(t-Math.floor(t)!==0){console.error("THREE.KeyframeTrackPrototype: Invalid value size in track.",this);e=false}var i=this.times,r=this.values,n=i.length;if(n===0){console.error("THREE.KeyframeTrackPrototype: Track is empty.",this);e=false}var a=null;for(var o=0;o!==n;o++){var s=i[o];if(typeof s==="number"&&isNaN(s)){console.error("THREE.KeyframeTrackPrototype: Time is not a valid number.",this,o,s);e=false;break}if(a!==null&&a>s){console.error("THREE.KeyframeTrackPrototype: Out of order keys.",this,o,s,a);e=false;break}a=s}if(r!==undefined){if(Vs.isTypedArray(r)){for(var o=0,l=r.length;o!==l;++o){var u=r[o];if(isNaN(u)){console.error("THREE.KeyframeTrackPrototype: Value is not a valid number.",this,o,u);e=false;break}}}}return e},optimize:function(){var e=this.times,t=this.values,i=this.getValueSize(),r=this.getInterpolation()===it,n=1,a=e.length-1;for(var o=1;o<a;++o){var s=false;var l=e[o];var u=e[o+1];if(l!==u&&(o!==1||l!==l[0])){if(!r){var c=o*i,h=c-i,f=c+i;for(var d=0;d!==i;++d){var p=t[c+d];if(p!==t[h+d]||p!==t[f+d]){s=true;break}}}else s=true}if(s){if(o!==n){e[n]=e[o];var m=o*i,v=n*i;for(var d=0;d!==i;++d)t[v+d]=t[m+d]}++n}}if(a>0){e[n]=e[a];for(var m=a*i,v=n*i,d=0;d!==i;++d)t[v+d]=t[m+d];++n}if(n!==e.length){this.times=Vs.arraySlice(e,0,n);this.values=Vs.arraySlice(t,0,n*i)}return this}};function Zs(e,t,i,r){if(e===undefined)throw new Error("track name is undefined");if(t===undefined||t.length===0){throw new Error("no keyframes in track named "+e)}this.name=e;this.times=Vs.convertArray(t,this.TimeBufferType);this.values=Vs.convertArray(i,this.ValueBufferType);this.setInterpolation(r||this.DefaultInterpolation);this.validate();this.optimize()}function Ks(e,t,i,r){Zs.call(this,e,t,i,r)}Ks.prototype=Object.assign(Object.create(qs),{constructor:Ks,ValueTypeName:"vector"});function $s(e,t,i,r){js.call(this,e,t,i,r)}$s.prototype=Object.assign(Object.create(js.prototype),{constructor:$s,interpolate_:function(e,t,i,r){var n=this.resultBuffer,a=this.sampleValues,o=this.valueSize,s=e*o,l=(i-t)/(r-t);for(var u=s+o;s!==u;s+=4){wt.slerpFlat(n,0,a,s-o,a,s,l)}return n}});function Qs(e,t,i,r){Zs.call(this,e,t,i,r)}Qs.prototype=Object.assign(Object.create(qs),{constructor:Qs,ValueTypeName:"quaternion",DefaultInterpolation:tt,InterpolantFactoryMethodLinear:function(e){return new $s(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodSmooth:undefined});function Js(e,t,i,r){Zs.call(this,e,t,i,r)}Js.prototype=Object.assign(Object.create(qs),{constructor:Js,ValueTypeName:"number"});function el(e,t,i,r){Zs.call(this,e,t,i,r)}el.prototype=Object.assign(Object.create(qs),{constructor:el,ValueTypeName:"string",ValueBufferType:Array,DefaultInterpolation:et,InterpolantFactoryMethodLinear:undefined,InterpolantFactoryMethodSmooth:undefined});function tl(e,t,i){Zs.call(this,e,t,i)}tl.prototype=Object.assign(Object.create(qs),{constructor:tl,ValueTypeName:"bool",ValueBufferType:Array,DefaultInterpolation:et,InterpolantFactoryMethodLinear:undefined,InterpolantFactoryMethodSmooth:undefined});function il(e,t,i,r){Zs.call(this,e,t,i,r)}il.prototype=Object.assign(Object.create(qs),{constructor:il,ValueTypeName:"color"});function rl(e,t,i,r){Zs.apply(this,e,t,i,r)}rl.prototype=qs;qs.constructor=rl;Object.assign(rl,{parse:function(e){if(e.type===undefined){throw new Error("track type undefined, can not parse")}var t=rl._getTrackTypeForValueTypeName(e.type);if(e.times===undefined){var i=[],r=[];Vs.flattenJSON(e.keys,i,r,"value");e.times=i;e.values=r}if(t.parse!==undefined){return t.parse(e)}else{return new t(e.name,e.times,e.values,e.interpolation)}},toJSON:function(e){var t=e.constructor;var i;if(t.toJSON!==undefined){i=t.toJSON(e)}else{i={name:e.name,times:Vs.convertArray(e.times,Array),values:Vs.convertArray(e.values,Array)};var r=e.getInterpolation();if(r!==e.DefaultInterpolation){i.interpolation=r}}i.type=e.ValueTypeName;return i},_getTrackTypeForValueTypeName:function(e){switch(e.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Js;case"vector":case"vector2":case"vector3":case"vector4":return Ks;case"color":return il;case"quaternion":return Qs;case"bool":case"boolean":return tl;case"string":return el}throw new Error("Unsupported typeName: "+e)}});function nl(e,t,i){this.name=e;this.tracks=i;this.duration=t!==undefined?t:-1;this.uuid=bt.generateUUID();if(this.duration<0){this.resetDuration()}this.optimize()}Object.assign(nl,{parse:function(e){var t=[],i=e.tracks,r=1/(e.fps||1);for(var n=0,a=i.length;n!==a;++n){t.push(rl.parse(i[n]).scale(r))}return new nl(e.name,e.duration,t)},toJSON:function(e){var t=[],i=e.tracks;var r={name:e.name,duration:e.duration,tracks:t};for(var n=0,a=i.length;n!==a;++n){t.push(rl.toJSON(i[n]))}return r},CreateFromMorphTargetSequence:function(e,t,i,r){var n=t.length;var a=[];for(var o=0;o<n;o++){var s=[];var l=[];s.push((o+n-1)%n,o,(o+1)%n);l.push(0,1,0);var u=Vs.getKeyframeOrder(s);s=Vs.sortedArray(s,1,u);l=Vs.sortedArray(l,1,u);if(!r&&s[0]===0){s.push(n);l.push(l[0])}a.push(new Js(".morphTargetInfluences["+t[o].name+"]",s,l).scale(1/i))}return new nl(e,-1,a)},findByName:function(e,t){var i=e;if(!Array.isArray(e)){var r=e;i=r.geometry&&r.geometry.animations||r.animations}for(var n=0;n<i.length;n++){if(i[n].name===t){return i[n]}}return null},CreateClipsFromMorphTargetSequences:function(e,t,i){var r={};var n=/^([\w-]*?)([\d]+)$/;for(var a=0,o=e.length;a<o;a++){var s=e[a];var l=s.name.match(n);if(l&&l.length>1){var u=l[1];var c=r[u];if(!c){r[u]=c=[]}c.push(s)}}var h=[];for(var u in r){h.push(nl.CreateFromMorphTargetSequence(u,r[u],t,i))}return h},parseAnimation:function(e,t){if(!e){console.error("THREE.AnimationClip: No animation in JSONLoader data.");return null}var i=function(e,t,i,r,n){if(i.length!==0){var a=[];var o=[];Vs.flattenJSON(i,a,o,r);if(a.length!==0){n.push(new e(t,a,o))}}};var r=[];var n=e.name||"default";var a=e.length||-1;var o=e.fps||30;var s=e.hierarchy||[];for(var l=0;l<s.length;l++){var u=s[l].keys;if(!u||u.length===0)continue;if(u[0].morphTargets){var c={};for(var h=0;h<u.length;h++){if(u[h].morphTargets){for(var f=0;f<u[h].morphTargets.length;f++){c[u[h].morphTargets[f]]=-1}}}for(var d in c){var p=[];var m=[];for(var f=0;f!==u[h].morphTargets.length;++f){var v=u[h];p.push(v.time);m.push(v.morphTarget===d?1:0)}r.push(new Js(".morphTargetInfluence["+d+"]",p,m))}a=c.length*(o||1)}else{var g=".bones["+t[l].name+"]";i(Ks,g+".position",u,"pos",r);i(Qs,g+".quaternion",u,"rot",r);i(Ks,g+".scale",u,"scl",r)}}if(r.length===0){return null}var y=new nl(n,a,r);return y}});Object.assign(nl.prototype,{resetDuration:function(){var e=this.tracks,t=0;for(var i=0,r=e.length;i!==r;++i){var n=this.tracks[i];t=Math.max(t,n.times[n.times.length-1])}this.duration=t},trim:function(){for(var e=0;e<this.tracks.length;e++){this.tracks[e].trim(0,this.duration)}return this},optimize:function(){for(var e=0;e<this.tracks.length;e++){this.tracks[e].optimize()}return this}});function al(e){this.manager=e!==undefined?e:Ss;this.textures={}}Object.assign(al.prototype,{load:function(e,t,i,r){var n=this;var a=new Ps(n.manager);a.load(e,function(e){t(n.parse(JSON.parse(e)))},i,r)},setTextures:function(e){this.textures=e},parse:function(e){var t=this.textures;function i(e){if(t[e]===undefined){console.warn("THREE.MaterialLoader: Undefined texture",e)}return t[e]}var r=new ws[e.type];if(e.uuid!==undefined)r.uuid=e.uuid;if(e.name!==undefined)r.name=e.name;if(e.color!==undefined)r.color.setHex(e.color);if(e.roughness!==undefined)r.roughness=e.roughness;if(e.metalness!==undefined)r.metalness=e.metalness;if(e.emissive!==undefined)r.emissive.setHex(e.emissive);if(e.specular!==undefined)r.specular.setHex(e.specular);if(e.shininess!==undefined)r.shininess=e.shininess;if(e.clearCoat!==undefined)r.clearCoat=e.clearCoat;if(e.clearCoatRoughness!==undefined)r.clearCoatRoughness=e.clearCoatRoughness;if(e.uniforms!==undefined)r.uniforms=e.uniforms;if(e.vertexShader!==undefined)r.vertexShader=e.vertexShader;if(e.fragmentShader!==undefined)r.fragmentShader=e.fragmentShader;if(e.vertexColors!==undefined)r.vertexColors=e.vertexColors;if(e.fog!==undefined)r.fog=e.fog;if(e.flatShading!==undefined)r.flatShading=e.flatShading;if(e.blending!==undefined)r.blending=e.blending;if(e.side!==undefined)r.side=e.side;if(e.opacity!==undefined)r.opacity=e.opacity;if(e.transparent!==undefined)r.transparent=e.transparent;if(e.alphaTest!==undefined)r.alphaTest=e.alphaTest;if(e.depthTest!==undefined)r.depthTest=e.depthTest;if(e.depthWrite!==undefined)r.depthWrite=e.depthWrite;if(e.colorWrite!==undefined)r.colorWrite=e.colorWrite;if(e.wireframe!==undefined)r.wireframe=e.wireframe;if(e.wireframeLinewidth!==undefined)r.wireframeLinewidth=e.wireframeLinewidth;if(e.wireframeLinecap!==undefined)r.wireframeLinecap=e.wireframeLinecap;if(e.wireframeLinejoin!==undefined)r.wireframeLinejoin=e.wireframeLinejoin;if(e.rotation!==undefined)r.rotation=e.rotation;if(e.linewidth!==1)r.linewidth=e.linewidth;if(e.dashSize!==undefined)r.dashSize=e.dashSize;if(e.gapSize!==undefined)r.gapSize=e.gapSize;if(e.scale!==undefined)r.scale=e.scale;if(e.skinning!==undefined)r.skinning=e.skinning;if(e.morphTargets!==undefined)r.morphTargets=e.morphTargets;if(e.dithering!==undefined)r.dithering=e.dithering;if(e.visible!==undefined)r.visible=e.visible;if(e.userData!==undefined)r.userData=e.userData;if(e.shading!==undefined)r.flatShading=e.shading===1;if(e.size!==undefined)r.size=e.size;if(e.sizeAttenuation!==undefined)r.sizeAttenuation=e.sizeAttenuation;if(e.map!==undefined)r.map=i(e.map);if(e.alphaMap!==undefined){r.alphaMap=i(e.alphaMap);r.transparent=true}if(e.bumpMap!==undefined)r.bumpMap=i(e.bumpMap);if(e.bumpScale!==undefined)r.bumpScale=e.bumpScale;if(e.normalMap!==undefined)r.normalMap=i(e.normalMap);if(e.normalScale!==undefined){var n=e.normalScale;if(Array.isArray(n)===false){n=[n,n]}r.normalScale=(new _t).fromArray(n)}if(e.displacementMap!==undefined)r.displacementMap=i(e.displacementMap);if(e.displacementScale!==undefined)r.displacementScale=e.displacementScale;if(e.displacementBias!==undefined)r.displacementBias=e.displacementBias;if(e.roughnessMap!==undefined)r.roughnessMap=i(e.roughnessMap);if(e.metalnessMap!==undefined)r.metalnessMap=i(e.metalnessMap);if(e.emissiveMap!==undefined)r.emissiveMap=i(e.emissiveMap);if(e.emissiveIntensity!==undefined)r.emissiveIntensity=e.emissiveIntensity;if(e.specularMap!==undefined)r.specularMap=i(e.specularMap);if(e.envMap!==undefined)r.envMap=i(e.envMap);if(e.reflectivity!==undefined)r.reflectivity=e.reflectivity;if(e.lightMap!==undefined)r.lightMap=i(e.lightMap);if(e.lightMapIntensity!==undefined)r.lightMapIntensity=e.lightMapIntensity;if(e.aoMap!==undefined)r.aoMap=i(e.aoMap);if(e.aoMapIntensity!==undefined)r.aoMapIntensity=e.aoMapIntensity;if(e.gradientMap!==undefined)r.gradientMap=i(e.gradientMap);return r}});function ol(e){this.manager=e!==undefined?e:Ss}Object.assign(ol.prototype,{load:function(e,t,i,r){var n=this;var a=new Ps(n.manager);a.load(e,function(e){t(n.parse(JSON.parse(e)))},i,r)},parse:function(e){var t=new ua;var i=e.data.index;if(i!==undefined){var r=new sl[i.type](i.array);t.setIndex(new Kn(r,1))}var n=e.data.attributes;for(var a in n){var o=n[a];var r=new sl[o.type](o.array);t.addAttribute(a,new Kn(r,o.itemSize,o.normalized))}var s=e.data.groups||e.data.drawcalls||e.data.offsets;if(s!==undefined){for(var l=0,u=s.length;l!==u;++l){var c=s[l];t.addGroup(c.start,c.count,c.materialIndex)}}var h=e.data.boundingSphere;if(h!==undefined){var f=new Tt;if(h.center!==undefined){f.fromArray(h.center)}t.boundingSphere=new Gn(f,h.radius)}return t}});var sl={Int8Array:Int8Array,Uint8Array:Uint8Array,Uint8ClampedArray:typeof Uint8ClampedArray!=="undefined"?Uint8ClampedArray:Uint8Array,Int16Array:Int16Array,Uint16Array:Uint16Array,Int32Array:Int32Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array};function ll(){this.onLoadStart=function(){};this.onLoadProgress=function(){};this.onLoadComplete=function(){}}ll.Handlers={handlers:[],add:function(e,t){this.handlers.push(e,t)},get:function(e){var t=this.handlers;for(var i=0,r=t.length;i<r;i+=2){var n=t[i];var a=t[i+1];if(n.test(e)){return a}}return null}};Object.assign(ll.prototype,{crossOrigin:undefined,extractUrlBase:function(e){var t=e.split("/");if(t.length===1)return"./";t.pop();return t.join("/")+"/"},initMaterials:function(e,t,i){var r=[];for(var n=0;n<e.length;++n){r[n]=this.createMaterial(e[n],t,i)}return r},createMaterial:function(){var e={NoBlending:x,NormalBlending:w,AdditiveBlending:T,SubtractiveBlending:M,MultiplyBlending:S,CustomBlending:E};var t=new _i;var i=new Os;var r=new al;return function n(a,o,s){var l={};function u(e,t,r,n,a){var u=o+e;var c=ll.Handlers.get(u);var h;if(c!==null){h=c.load(u)}else{i.setCrossOrigin(s);h=i.load(u)}if(t!==undefined){h.repeat.fromArray(t);if(t[0]!==1)h.wrapS=de;if(t[1]!==1)h.wrapT=de}if(r!==undefined){h.offset.fromArray(r)}if(n!==undefined){if(n[0]==="repeat")h.wrapS=de;if(n[0]==="mirror")h.wrapS=me;if(n[1]==="repeat")h.wrapT=de;if(n[1]==="mirror")h.wrapT=me}if(a!==undefined){h.anisotropy=a}var f=bt.generateUUID();l[f]=h;return f}var c={uuid:bt.generateUUID(),type:"MeshLambertMaterial"};for(var h in a){var f=a[h];switch(h){case"DbgColor":case"DbgIndex":case"opticalDensity":case"illumination":break;case"DbgName":c.name=f;break;case"blending":c.blending=e[f];break;case"colorAmbient":case"mapAmbient":console.warn("THREE.Loader.createMaterial:",h,"is no longer supported.");break;case"colorDiffuse":c.color=t.fromArray(f).getHex();break;case"colorSpecular":c.specular=t.fromArray(f).getHex();break;case"colorEmissive":c.emissive=t.fromArray(f).getHex();break;case"specularCoef":c.shininess=f;break;case"shading":if(f.toLowerCase()==="basic")c.type="MeshBasicMaterial";if(f.toLowerCase()==="phong")c.type="MeshPhongMaterial";if(f.toLowerCase()==="standard")c.type="MeshStandardMaterial";break;case"mapDiffuse":c.map=u(f,a.mapDiffuseRepeat,a.mapDiffuseOffset,a.mapDiffuseWrap,a.mapDiffuseAnisotropy);break;case"mapDiffuseRepeat":case"mapDiffuseOffset":case"mapDiffuseWrap":case"mapDiffuseAnisotropy":break;case"mapEmissive":c.emissiveMap=u(f,a.mapEmissiveRepeat,a.mapEmissiveOffset,a.mapEmissiveWrap,a.mapEmissiveAnisotropy);break;case"mapEmissiveRepeat":case"mapEmissiveOffset":case"mapEmissiveWrap":case"mapEmissiveAnisotropy":break;case"mapLight":c.lightMap=u(f,a.mapLightRepeat,a.mapLightOffset,a.mapLightWrap,a.mapLightAnisotropy);break;case"mapLightRepeat":case"mapLightOffset":case"mapLightWrap":case"mapLightAnisotropy":break;case"mapAO":c.aoMap=u(f,a.mapAORepeat,a.mapAOOffset,a.mapAOWrap,a.mapAOAnisotropy);break;case"mapAORepeat":case"mapAOOffset":case"mapAOWrap":case"mapAOAnisotropy":break;case"mapBump":c.bumpMap=u(f,a.mapBumpRepeat,a.mapBumpOffset,a.mapBumpWrap,a.mapBumpAnisotropy);break;case"mapBumpScale":c.bumpScale=f;break;case"mapBumpRepeat":case"mapBumpOffset":case"mapBumpWrap":case"mapBumpAnisotropy":break;case"mapNormal":c.normalMap=u(f,a.mapNormalRepeat,a.mapNormalOffset,a.mapNormalWrap,a.mapNormalAnisotropy);break;case"mapNormalFactor":c.normalScale=[f,f];break;case"mapNormalRepeat":case"mapNormalOffset":case"mapNormalWrap":case"mapNormalAnisotropy":break;case"mapSpecular":c.specularMap=u(f,a.mapSpecularRepeat,a.mapSpecularOffset,a.mapSpecularWrap,a.mapSpecularAnisotropy);break;case"mapSpecularRepeat":case"mapSpecularOffset":case"mapSpecularWrap":case"mapSpecularAnisotropy":break;case"mapMetalness":c.metalnessMap=u(f,a.mapMetalnessRepeat,a.mapMetalnessOffset,a.mapMetalnessWrap,a.mapMetalnessAnisotropy);break;case"mapMetalnessRepeat":case"mapMetalnessOffset":case"mapMetalnessWrap":case"mapMetalnessAnisotropy":break;case"mapRoughness":c.roughnessMap=u(f,a.mapRoughnessRepeat,a.mapRoughnessOffset,a.mapRoughnessWrap,a.mapRoughnessAnisotropy);break;case"mapRoughnessRepeat":case"mapRoughnessOffset":case"mapRoughnessWrap":case"mapRoughnessAnisotropy":break;case"mapAlpha":c.alphaMap=u(f,a.mapAlphaRepeat,a.mapAlphaOffset,a.mapAlphaWrap,a.mapAlphaAnisotropy);break;case"mapAlphaRepeat":case"mapAlphaOffset":case"mapAlphaWrap":case"mapAlphaAnisotropy":break;case"flipSided":c.side=p;break;case"doubleSided":c.side=m;break;case"transparency":console.warn("THREE.Loader.createMaterial: transparency has been renamed to opacity");c.opacity=f;break;case"depthTest":case"depthWrite":case"colorWrite":case"opacity":case"reflectivity":case"transparent":case"visible":case"wireframe":c[h]=f;break;case"vertexColors":if(f===true)c.vertexColors=_;if(f==="face")c.vertexColors=b;break;default:console.error("THREE.Loader.createMaterial: Unsupported",h,f);break}}if(c.type==="MeshBasicMaterial")delete c.emissive;if(c.type!=="MeshPhongMaterial")delete c.specular;if(c.opacity<1)c.transparent=true;r.setTextures(l);return r.parse(c)}}()});function ul(e){if(typeof e==="boolean"){console.warn("THREE.JSONLoader: showStatus parameter has been removed from constructor.");e=undefined}this.manager=e!==undefined?e:Ss;this.withCredentials=false}Object.assign(ul.prototype,{load:function(e,t,i,r){var n=this;var a=this.texturePath&&typeof this.texturePath==="string"?this.texturePath:ll.prototype.extractUrlBase(e);var o=new Ps(this.manager);o.setWithCredentials(this.withCredentials);o.load(e,function(i){var r=JSON.parse(i);var o=r.metadata
;if(o!==undefined){var s=o.type;if(s!==undefined){if(s.toLowerCase()==="object"){console.error("THREE.JSONLoader: "+e+" should be loaded with THREE.ObjectLoader instead.");return}if(s.toLowerCase()==="scene"){console.error("THREE.JSONLoader: "+e+" should be loaded with THREE.SceneLoader instead.");return}}}var l=n.parse(r,a);t(l.geometry,l.materials)},i,r)},setTexturePath:function(e){this.texturePath=e},parse:function(){function e(e,t){function i(e,t){return e&1<<t}var r,n,a,o,s,l,u,c,h,f,d,p,m,v,g,y,b,_,x,w,T,M,S,E,P,A,C,L=e.faces,R=e.vertices,O=e.normals,I=e.colors,D=e.scale,B=0;if(e.uvs!==undefined){for(r=0;r<e.uvs.length;r++){if(e.uvs[r].length)B++}for(r=0;r<B;r++){t.faceVertexUvs[r]=[]}}o=0;s=R.length;while(o<s){_=new Tt;_.x=R[o++]*D;_.y=R[o++]*D;_.z=R[o++]*D;t.vertices.push(_)}o=0;s=L.length;while(o<s){f=L[o++];d=i(f,0);p=i(f,1);m=i(f,3);v=i(f,4);g=i(f,5);y=i(f,6);b=i(f,7);if(d){w=new Yn;w.a=L[o];w.b=L[o+1];w.c=L[o+3];T=new Yn;T.a=L[o+1];T.b=L[o+2];T.c=L[o+3];o+=4;if(p){h=L[o++];w.materialIndex=h;T.materialIndex=h}a=t.faces.length;if(m){for(r=0;r<B;r++){E=e.uvs[r];t.faceVertexUvs[r][a]=[];t.faceVertexUvs[r][a+1]=[];for(n=0;n<4;n++){c=L[o++];A=E[c*2];C=E[c*2+1];P=new _t(A,C);if(n!==2)t.faceVertexUvs[r][a].push(P);if(n!==0)t.faceVertexUvs[r][a+1].push(P)}}}if(v){u=L[o++]*3;w.normal.set(O[u++],O[u++],O[u]);T.normal.copy(w.normal)}if(g){for(r=0;r<4;r++){u=L[o++]*3;S=new Tt(O[u++],O[u++],O[u]);if(r!==2)w.vertexNormals.push(S);if(r!==0)T.vertexNormals.push(S)}}if(y){l=L[o++];M=I[l];w.color.setHex(M);T.color.setHex(M)}if(b){for(r=0;r<4;r++){l=L[o++];M=I[l];if(r!==2)w.vertexColors.push(new _i(M));if(r!==0)T.vertexColors.push(new _i(M))}}t.faces.push(w);t.faces.push(T)}else{x=new Yn;x.a=L[o++];x.b=L[o++];x.c=L[o++];if(p){h=L[o++];x.materialIndex=h}a=t.faces.length;if(m){for(r=0;r<B;r++){E=e.uvs[r];t.faceVertexUvs[r][a]=[];for(n=0;n<3;n++){c=L[o++];A=E[c*2];C=E[c*2+1];P=new _t(A,C);t.faceVertexUvs[r][a].push(P)}}}if(v){u=L[o++]*3;x.normal.set(O[u++],O[u++],O[u])}if(g){for(r=0;r<3;r++){u=L[o++]*3;S=new Tt(O[u++],O[u++],O[u]);x.vertexNormals.push(S)}}if(y){l=L[o++];x.color.setHex(I[l])}if(b){for(r=0;r<3;r++){l=L[o++];x.vertexColors.push(new _i(I[l]))}}t.faces.push(x)}}}function t(e,t){var i=e.influencesPerVertex!==undefined?e.influencesPerVertex:2;if(e.skinWeights){for(var r=0,n=e.skinWeights.length;r<n;r+=i){var a=e.skinWeights[r];var o=i>1?e.skinWeights[r+1]:0;var s=i>2?e.skinWeights[r+2]:0;var l=i>3?e.skinWeights[r+3]:0;t.skinWeights.push(new Pt(a,o,s,l))}}if(e.skinIndices){for(var r=0,n=e.skinIndices.length;r<n;r+=i){var u=e.skinIndices[r];var c=i>1?e.skinIndices[r+1]:0;var h=i>2?e.skinIndices[r+2]:0;var f=i>3?e.skinIndices[r+3]:0;t.skinIndices.push(new Pt(u,c,h,f))}}t.bones=e.bones;if(t.bones&&t.bones.length>0&&(t.skinWeights.length!==t.skinIndices.length||t.skinIndices.length!==t.vertices.length)){console.warn("When skinning, number of vertices ("+t.vertices.length+"), skinIndices ("+t.skinIndices.length+"), and skinWeights ("+t.skinWeights.length+") should match.")}}function i(e,t){var i=e.scale;if(e.morphTargets!==undefined){for(var r=0,n=e.morphTargets.length;r<n;r++){t.morphTargets[r]={};t.morphTargets[r].name=e.morphTargets[r].name;t.morphTargets[r].vertices=[];var a=t.morphTargets[r].vertices;var o=e.morphTargets[r].vertices;for(var s=0,l=o.length;s<l;s+=3){var u=new Tt;u.x=o[s]*i;u.y=o[s+1]*i;u.z=o[s+2]*i;a.push(u)}}}if(e.morphColors!==undefined&&e.morphColors.length>0){console.warn('THREE.JSONLoader: "morphColors" no longer supported. Using them as face colors.');var c=t.faces;var h=e.morphColors[0].colors;for(var r=0,n=c.length;r<n;r++){c[r].color.fromArray(h,r*3)}}}function r(e,t){var i=[];var r=[];if(e.animation!==undefined){r.push(e.animation)}if(e.animations!==undefined){if(e.animations.length){r=r.concat(e.animations)}else{r.push(e.animations)}}for(var n=0;n<r.length;n++){var a=nl.parseAnimation(r[n],t.bones);if(a)i.push(a)}if(t.morphTargets){var o=nl.CreateClipsFromMorphTargetSequences(t.morphTargets,10);i=i.concat(o)}if(i.length>0)t.animations=i}return function(n,a){if(n.data!==undefined){n=n.data}if(n.scale!==undefined){n.scale=1/n.scale}else{n.scale=1}var o=new Zn;e(n,o);t(n,o);i(n,o);r(n,o);o.computeFaceNormals();o.computeBoundingSphere();if(n.materials===undefined||n.materials.length===0){return{geometry:o}}else{var s=ll.prototype.initMaterials(n.materials,a,this.crossOrigin);return{geometry:o,materials:s}}}}()});function cl(e){this.manager=e!==undefined?e:Ss;this.texturePath=""}Object.assign(cl.prototype,{load:function(e,t,i,r){if(this.texturePath===""){this.texturePath=e.substring(0,e.lastIndexOf("/")+1)}var n=this;var a=new Ps(n.manager);a.load(e,function(i){var a=null;try{a=JSON.parse(i)}catch(t){if(r!==undefined)r(t);console.error("THREE:ObjectLoader: Can't parse "+e+".",t.message);return}var o=a.metadata;if(o===undefined||o.type===undefined||o.type.toLowerCase()==="geometry"){console.error("THREE.ObjectLoader: Can't load "+e+". Use THREE.JSONLoader instead.");return}n.parse(a,t)},i,r)},setTexturePath:function(e){this.texturePath=e},setCrossOrigin:function(e){this.crossOrigin=e},parse:function(e,t){var i=this.parseGeometries(e.geometries);var r=this.parseImages(e.images,function(){if(t!==undefined)t(o)});var n=this.parseTextures(e.textures,r);var a=this.parseMaterials(e.materials,n);var o=this.parseObject(e.object,i,a);if(e.animations){o.animations=this.parseAnimations(e.animations)}if(e.images===undefined||e.images.length===0){if(t!==undefined)t(o)}return o},parseGeometries:function(e){var t={};if(e!==undefined){var i=new ul;var r=new ol;for(var n=0,a=e.length;n<a;n++){var o;var s=e[n];switch(s.type){case"PlaneGeometry":case"PlaneBufferGeometry":o=new fs[s.type](s.width,s.height,s.widthSegments,s.heightSegments);break;case"BoxGeometry":case"BoxBufferGeometry":case"CubeGeometry":o=new fs[s.type](s.width,s.height,s.depth,s.widthSegments,s.heightSegments,s.depthSegments);break;case"CircleGeometry":case"CircleBufferGeometry":o=new fs[s.type](s.radius,s.segments,s.thetaStart,s.thetaLength);break;case"CylinderGeometry":case"CylinderBufferGeometry":o=new fs[s.type](s.radiusTop,s.radiusBottom,s.height,s.radialSegments,s.heightSegments,s.openEnded,s.thetaStart,s.thetaLength);break;case"ConeGeometry":case"ConeBufferGeometry":o=new fs[s.type](s.radius,s.height,s.radialSegments,s.heightSegments,s.openEnded,s.thetaStart,s.thetaLength);break;case"SphereGeometry":case"SphereBufferGeometry":o=new fs[s.type](s.radius,s.widthSegments,s.heightSegments,s.phiStart,s.phiLength,s.thetaStart,s.thetaLength);break;case"DodecahedronGeometry":case"DodecahedronBufferGeometry":case"IcosahedronGeometry":case"IcosahedronBufferGeometry":case"OctahedronGeometry":case"OctahedronBufferGeometry":case"TetrahedronGeometry":case"TetrahedronBufferGeometry":o=new fs[s.type](s.radius,s.detail);break;case"RingGeometry":case"RingBufferGeometry":o=new fs[s.type](s.innerRadius,s.outerRadius,s.thetaSegments,s.phiSegments,s.thetaStart,s.thetaLength);break;case"TorusGeometry":case"TorusBufferGeometry":o=new fs[s.type](s.radius,s.tube,s.radialSegments,s.tubularSegments,s.arc);break;case"TorusKnotGeometry":case"TorusKnotBufferGeometry":o=new fs[s.type](s.radius,s.tube,s.tubularSegments,s.radialSegments,s.p,s.q);break;case"LatheGeometry":case"LatheBufferGeometry":o=new fs[s.type](s.points,s.segments,s.phiStart,s.phiLength);break;case"PolyhedronGeometry":case"PolyhedronBufferGeometry":o=new fs[s.type](s.vertices,s.indices,s.radius,s.details);break;case"BufferGeometry":o=r.parse(s);break;case"Geometry":o=i.parse(s,this.texturePath).geometry;break;default:console.warn('THREE.ObjectLoader: Unsupported geometry type "'+s.type+'"');continue}o.uuid=s.uuid;if(s.name!==undefined)o.name=s.name;t[s.uuid]=o}}return t},parseMaterials:function(e,t){var i={};if(e!==undefined){var r=new al;r.setTextures(t);for(var n=0,a=e.length;n<a;n++){var o=e[n];if(o.type==="MultiMaterial"){var s=[];for(var l=0;l<o.materials.length;l++){s.push(r.parse(o.materials[l]))}i[o.uuid]=s}else{i[o.uuid]=r.parse(o)}}}return i},parseAnimations:function(e){var t=[];for(var i=0;i<e.length;i++){var r=nl.parse(e[i]);t.push(r)}return t},parseImages:function(e,t){var i=this;var r={};function n(e){i.manager.itemStart(e);return o.load(e,function(){i.manager.itemEnd(e)},undefined,function(){i.manager.itemEnd(e);i.manager.itemError(e)})}if(e!==undefined&&e.length>0){var a=new Ms(t);var o=new Ls(a);o.setCrossOrigin(this.crossOrigin);for(var s=0,l=e.length;s<l;s++){var u=e[s];var c=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(u.url)?u.url:i.texturePath+u.url;r[u.uuid]=n(c)}}return r},parseTextures:function(e,t){function i(e,t){if(typeof e==="number")return e;console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",e);return t[e]}var r={};if(e!==undefined){for(var n=0,a=e.length;n<a;n++){var o=e[n];if(o.image===undefined){console.warn('THREE.ObjectLoader: No "image" specified for',o.uuid)}if(t[o.image]===undefined){console.warn("THREE.ObjectLoader: Undefined image",o.image)}var s=new Et(t[o.image]);s.needsUpdate=true;s.uuid=o.uuid;if(o.name!==undefined)s.name=o.name;if(o.mapping!==undefined)s.mapping=i(o.mapping,hl);if(o.offset!==undefined)s.offset.fromArray(o.offset);if(o.repeat!==undefined)s.repeat.fromArray(o.repeat);if(o.center!==undefined)s.center.fromArray(o.center);if(o.rotation!==undefined)s.rotation=o.rotation;if(o.wrap!==undefined){s.wrapS=i(o.wrap[0],fl);s.wrapT=i(o.wrap[1],fl)}if(o.minFilter!==undefined)s.minFilter=i(o.minFilter,dl);if(o.magFilter!==undefined)s.magFilter=i(o.magFilter,dl);if(o.anisotropy!==undefined)s.anisotropy=o.anisotropy;if(o.flipY!==undefined)s.flipY=o.flipY;r[o.uuid]=s}}return r},parseObject:function(){var e=new xt;return function t(i,r,n){var a;function o(e){if(r[e]===undefined){console.warn("THREE.ObjectLoader: Undefined geometry",e)}return r[e]}function s(e){if(e===undefined)return undefined;if(Array.isArray(e)){var t=[];for(var i=0,r=e.length;i<r;i++){var a=e[i];if(n[a]===undefined){console.warn("THREE.ObjectLoader: Undefined material",a)}t.push(n[a])}return t}if(n[e]===undefined){console.warn("THREE.ObjectLoader: Undefined material",e)}return n[e]}switch(i.type){case"Scene":a=new lo;if(i.background!==undefined){if(Number.isInteger(i.background)){a.background=new _i(i.background)}}if(i.fog!==undefined){if(i.fog.type==="Fog"){a.fog=new so(i.fog.color,i.fog.near,i.fog.far)}else if(i.fog.type==="FogExp2"){a.fog=new oo(i.fog.color,i.fog.density)}}break;case"PerspectiveCamera":a=new Ja(i.fov,i.aspect,i.near,i.far);if(i.focus!==undefined)a.focus=i.focus;if(i.zoom!==undefined)a.zoom=i.zoom;if(i.filmGauge!==undefined)a.filmGauge=i.filmGauge;if(i.filmOffset!==undefined)a.filmOffset=i.filmOffset;if(i.view!==undefined)a.view=Object.assign({},i.view);break;case"OrthographicCamera":a=new Xn(i.left,i.right,i.top,i.bottom,i.near,i.far);break;case"AmbientLight":a=new Hs(i.color,i.intensity);break;case"DirectionalLight":a=new Fs(i.color,i.intensity);break;case"PointLight":a=new Ns(i.color,i.intensity,i.distance,i.decay);break;case"RectAreaLight":a=new zs(i.color,i.intensity,i.width,i.height);break;case"SpotLight":a=new ks(i.color,i.intensity,i.distance,i.angle,i.penumbra,i.decay);break;case"HemisphereLight":a=new Ds(i.color,i.groundColor,i.intensity);break;case"SkinnedMesh":console.warn("THREE.ObjectLoader.parseObject() does not support SkinnedMesh yet.");case"Mesh":var l=o(i.geometry);var u=s(i.material);if(l.bones&&l.bones.length>0){a=new vo(l,u)}else{a=new ba(l,u)}break;case"LOD":a=new fo;break;case"Line":a=new yo(o(i.geometry),s(i.material),i.mode);break;case"LineLoop":a=new _o(o(i.geometry),s(i.material));break;case"LineSegments":a=new bo(o(i.geometry),s(i.material));break;case"PointCloud":case"Points":a=new wo(o(i.geometry),s(i.material));break;case"Sprite":a=new ho(s(i.material));break;case"Group":a=new To;break;default:a=new jn}a.uuid=i.uuid;if(i.name!==undefined)a.name=i.name;if(i.matrix!==undefined){e.fromArray(i.matrix);e.decompose(a.position,a.quaternion,a.scale)}else{if(i.position!==undefined)a.position.fromArray(i.position);if(i.rotation!==undefined)a.rotation.fromArray(i.rotation);if(i.quaternion!==undefined)a.quaternion.fromArray(i.quaternion);if(i.scale!==undefined)a.scale.fromArray(i.scale)}if(i.castShadow!==undefined)a.castShadow=i.castShadow;if(i.receiveShadow!==undefined)a.receiveShadow=i.receiveShadow;if(i.shadow){if(i.shadow.bias!==undefined)a.shadow.bias=i.shadow.bias;if(i.shadow.radius!==undefined)a.shadow.radius=i.shadow.radius;if(i.shadow.mapSize!==undefined)a.shadow.mapSize.fromArray(i.shadow.mapSize);if(i.shadow.camera!==undefined)a.shadow.camera=this.parseObject(i.shadow.camera)}if(i.visible!==undefined)a.visible=i.visible;if(i.userData!==undefined)a.userData=i.userData;if(i.children!==undefined){var c=i.children;for(var h=0;h<c.length;h++){a.add(this.parseObject(c[h],r,n))}}if(i.type==="LOD"){var f=i.levels;for(var d=0;d<f.length;d++){var p=f[d];var m=a.getObjectByProperty("uuid",p.object);if(m!==undefined){a.addLevel(m,p.distance)}}}return a}}()});var hl={UVMapping:ae,CubeReflectionMapping:oe,CubeRefractionMapping:se,EquirectangularReflectionMapping:le,EquirectangularRefractionMapping:ue,SphericalReflectionMapping:ce,CubeUVReflectionMapping:he,CubeUVRefractionMapping:fe};var fl={RepeatWrapping:de,ClampToEdgeWrapping:pe,MirroredRepeatWrapping:me};var dl={NearestFilter:ve,NearestMipMapNearestFilter:ge,NearestMipMapLinearFilter:ye,LinearFilter:be,LinearMipMapNearestFilter:_e,LinearMipMapLinearFilter:xe};function pl(e,t,i,r,n){var a=(r-t)*.5;var o=(n-i)*.5;var s=e*e;var l=e*s;return(2*i-2*r+a+o)*l+(-3*i+3*r-2*a-o)*s+a*e+i}function ml(e,t){var i=1-e;return i*i*t}function vl(e,t){return 2*(1-e)*e*t}function gl(e,t){return e*e*t}function yl(e,t,i,r){return ml(e,t)+vl(e,i)+gl(e,r)}function bl(e,t){var i=1-e;return i*i*i*t}function _l(e,t){var i=1-e;return 3*i*i*e*t}function xl(e,t){return 3*(1-e)*e*e*t}function wl(e,t){return e*e*e*t}function Tl(e,t,i,r,n){return bl(e,t)+_l(e,i)+xl(e,r)+wl(e,n)}function Ml(){this.type="Curve";this.arcLengthDivisions=200}Object.assign(Ml.prototype,{getPoint:function(){console.warn("THREE.Curve: .getPoint() not implemented.");return null},getPointAt:function(e,t){var i=this.getUtoTmapping(e);return this.getPoint(i,t)},getPoints:function(e){if(e===undefined)e=5;var t=[];for(var i=0;i<=e;i++){t.push(this.getPoint(i/e))}return t},getSpacedPoints:function(e){if(e===undefined)e=5;var t=[];for(var i=0;i<=e;i++){t.push(this.getPointAt(i/e))}return t},getLength:function(){var e=this.getLengths();return e[e.length-1]},getLengths:function(e){if(e===undefined)e=this.arcLengthDivisions;if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate){return this.cacheArcLengths}this.needsUpdate=false;var t=[];var i,r=this.getPoint(0);var n,a=0;t.push(0);for(n=1;n<=e;n++){i=this.getPoint(n/e);a+=i.distanceTo(r);t.push(a);r=i}this.cacheArcLengths=t;return t},updateArcLengths:function(){this.needsUpdate=true;this.getLengths()},getUtoTmapping:function(e,t){var i=this.getLengths();var r=0,n=i.length;var a;if(t){a=t}else{a=e*i[n-1]}var o=0,s=n-1,l;while(o<=s){r=Math.floor(o+(s-o)/2);l=i[r]-a;if(l<0){o=r+1}else if(l>0){s=r-1}else{s=r;break}}r=s;if(i[r]===a){return r/(n-1)}var u=i[r];var c=i[r+1];var h=c-u;var f=(a-u)/h;var d=(r+f)/(n-1);return d},getTangent:function(e){var t=1e-4;var i=e-t;var r=e+t;if(i<0)i=0;if(r>1)r=1;var n=this.getPoint(i);var a=this.getPoint(r);var o=a.clone().sub(n);return o.normalize()},getTangentAt:function(e){var t=this.getUtoTmapping(e);return this.getTangent(t)},computeFrenetFrames:function(e,t){var i=new Tt;var r=[];var n=[];var a=[];var o=new Tt;var s=new xt;var l,u,c;for(l=0;l<=e;l++){u=l/e;r[l]=this.getTangentAt(u);r[l].normalize()}n[0]=new Tt;a[0]=new Tt;var h=Number.MAX_VALUE;var f=Math.abs(r[0].x);var d=Math.abs(r[0].y);var p=Math.abs(r[0].z);if(f<=h){h=f;i.set(1,0,0)}if(d<=h){h=d;i.set(0,1,0)}if(p<=h){i.set(0,0,1)}o.crossVectors(r[0],i).normalize();n[0].crossVectors(r[0],o);a[0].crossVectors(r[0],n[0]);for(l=1;l<=e;l++){n[l]=n[l-1].clone();a[l]=a[l-1].clone();o.crossVectors(r[l-1],r[l]);if(o.length()>Number.EPSILON){o.normalize();c=Math.acos(bt.clamp(r[l-1].dot(r[l]),-1,1));n[l].applyMatrix4(s.makeRotationAxis(o,c))}a[l].crossVectors(r[l],n[l])}if(t===true){c=Math.acos(bt.clamp(n[0].dot(n[e]),-1,1));c/=e;if(r[0].dot(o.crossVectors(n[0],n[e]))>0){c=-c}for(l=1;l<=e;l++){n[l].applyMatrix4(s.makeRotationAxis(r[l],c*l));a[l].crossVectors(r[l],n[l])}}return{tangents:r,normals:n,binormals:a}},clone:function(){return(new this.constructor).copy(this)},copy:function(e){this.arcLengthDivisions=e.arcLengthDivisions;return this}});function Sl(e,t){Ml.call(this);this.type="LineCurve";this.v1=e||new _t;this.v2=t||new _t}Sl.prototype=Object.create(Ml.prototype);Sl.prototype.constructor=Sl;Sl.prototype.isLineCurve=true;Sl.prototype.getPoint=function(e,t){var i=t||new _t;if(e===1){i.copy(this.v2)}else{i.copy(this.v2).sub(this.v1);i.multiplyScalar(e).add(this.v1)}return i};Sl.prototype.getPointAt=function(e,t){return this.getPoint(e,t)};Sl.prototype.getTangent=function(){var e=this.v2.clone().sub(this.v1);return e.normalize()};Sl.prototype.copy=function(e){Ml.prototype.copy.call(this,e);this.v1.copy(e.v1);this.v2.copy(e.v2);return this};function El(){Ml.call(this);this.type="CurvePath";this.curves=[];this.autoClose=false}El.prototype=Object.assign(Object.create(Ml.prototype),{constructor:El,add:function(e){this.curves.push(e)},closePath:function(){var e=this.curves[0].getPoint(0);var t=this.curves[this.curves.length-1].getPoint(1);if(!e.equals(t)){this.curves.push(new Sl(t,e))}},getPoint:function(e){var t=e*this.getLength();var i=this.getCurveLengths();var r=0;while(r<i.length){if(i[r]>=t){var n=i[r]-t;var a=this.curves[r];var o=a.getLength();var s=o===0?0:1-n/o;return a.getPointAt(s)}r++}return null},getLength:function(){var e=this.getCurveLengths();return e[e.length-1]},updateArcLengths:function(){this.needsUpdate=true;this.cacheLengths=null;this.getCurveLengths()},getCurveLengths:function(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length){return this.cacheLengths}var e=[],t=0;for(var i=0,r=this.curves.length;i<r;i++){t+=this.curves[i].getLength();e.push(t)}this.cacheLengths=e;return e},getSpacedPoints:function(e){if(e===undefined)e=40;var t=[];for(var i=0;i<=e;i++){t.push(this.getPoint(i/e))}if(this.autoClose){t.push(t[0])}return t},getPoints:function(e){e=e||12;var t=[],i;for(var r=0,n=this.curves;r<n.length;r++){var a=n[r];var o=a&&a.isEllipseCurve?e*2:a&&a.isLineCurve?1:a&&a.isSplineCurve?e*a.points.length:e;var s=a.getPoints(o);for(var l=0;l<s.length;l++){var u=s[l];if(i&&i.equals(u))continue;t.push(u);i=u}}if(this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])){t.push(t[0])}return t},copy:function(e){Ml.prototype.copy.call(this,e);this.curves=[];for(var t=0,i=e.curves.length;t<i;t++){var r=e.curves[t];this.curves.push(r.clone())}this.autoClose=e.autoClose;return this}});function Pl(e,t,i,r,n,a,o,s){Ml.call(this);this.type="EllipseCurve";this.aX=e||0;this.aY=t||0;this.xRadius=i||1;this.yRadius=r||1;this.aStartAngle=n||0;this.aEndAngle=a||2*Math.PI;this.aClockwise=o||false;this.aRotation=s||0}Pl.prototype=Object.create(Ml.prototype);Pl.prototype.constructor=Pl;Pl.prototype.isEllipseCurve=true;Pl.prototype.getPoint=function(e,t){var i=t||new _t;var r=Math.PI*2;var n=this.aEndAngle-this.aStartAngle;var a=Math.abs(n)<Number.EPSILON;while(n<0)n+=r;while(n>r)n-=r;if(n<Number.EPSILON){if(a){n=0}else{n=r}}if(this.aClockwise===true&&!a){if(n===r){n=-r}else{n=n-r}}var o=this.aStartAngle+e*n;var s=this.aX+this.xRadius*Math.cos(o);var l=this.aY+this.yRadius*Math.sin(o);if(this.aRotation!==0){var u=Math.cos(this.aRotation);var c=Math.sin(this.aRotation);var h=s-this.aX;var f=l-this.aY;s=h*u-f*c+this.aX;l=h*c+f*u+this.aY}return i.set(s,l)};Pl.prototype.copy=function(e){Ml.prototype.copy.call(this,e);this.aX=e.aX;this.aY=e.aY;this.xRadius=e.xRadius;this.yRadius=e.yRadius;this.aStartAngle=e.aStartAngle;this.aEndAngle=e.aEndAngle;this.aClockwise=e.aClockwise;this.aRotation=e.aRotation;return this};function Al(e){Ml.call(this);this.type="SplineCurve";this.points=e||[]}Al.prototype=Object.create(Ml.prototype);Al.prototype.constructor=Al;Al.prototype.isSplineCurve=true;Al.prototype.getPoint=function(e,t){var i=t||new _t;var r=this.points;var n=(r.length-1)*e;var a=Math.floor(n);var o=n-a;var s=r[a===0?a:a-1];var l=r[a];var u=r[a>r.length-2?r.length-1:a+1];var c=r[a>r.length-3?r.length-1:a+2];i.set(pl(o,s.x,l.x,u.x,c.x),pl(o,s.y,l.y,u.y,c.y));return i};Al.prototype.copy=function(e){Ml.prototype.copy.call(this,e);this.points=[];for(var t=0,i=e.points.length;t<i;t++){var r=e.points[t];this.points.push(r.clone())}return this};function Cl(e,t,i,r){Ml.call(this);this.type="CubicBezierCurve";this.v0=e||new _t;this.v1=t||new _t;this.v2=i||new _t;this.v3=r||new _t}Cl.prototype=Object.create(Ml.prototype);Cl.prototype.constructor=Cl;Cl.prototype.isCubicBezierCurve=true;Cl.prototype.getPoint=function(e,t){var i=t||new _t;var r=this.v0,n=this.v1,a=this.v2,o=this.v3;i.set(Tl(e,r.x,n.x,a.x,o.x),Tl(e,r.y,n.y,a.y,o.y));return i};Cl.prototype.copy=function(e){Ml.prototype.copy.call(this,e);this.v0.copy(e.v0);this.v1.copy(e.v1);this.v2.copy(e.v2);this.v3.copy(e.v3);return this};function Ll(e,t,i){Ml.call(this);this.type="QuadraticBezierCurve";this.v0=e||new _t;this.v1=t||new _t;this.v2=i||new _t}Ll.prototype=Object.create(Ml.prototype);Ll.prototype.constructor=Ll;Ll.prototype.isQuadraticBezierCurve=true;Ll.prototype.getPoint=function(e,t){var i=t||new _t;var r=this.v0,n=this.v1,a=this.v2;i.set(yl(e,r.x,n.x,a.x),yl(e,r.y,n.y,a.y));return i};Ll.prototype.copy=function(e){Ml.prototype.copy.call(this,e);this.v0.copy(e.v0);this.v1.copy(e.v1);this.v2.copy(e.v2);return this};var Rl=Object.assign(Object.create(El.prototype),{setFromPoints:function(e){this.moveTo(e[0].x,e[0].y);for(var t=1,i=e.length;t<i;t++){this.lineTo(e[t].x,e[t].y)}},moveTo:function(e,t){this.currentPoint.set(e,t)},lineTo:function(e,t){var i=new Sl(this.currentPoint.clone(),new _t(e,t));this.curves.push(i);this.currentPoint.set(e,t)},quadraticCurveTo:function(e,t,i,r){var n=new Ll(this.currentPoint.clone(),new _t(e,t),new _t(i,r));this.curves.push(n);this.currentPoint.set(i,r)},bezierCurveTo:function(e,t,i,r,n,a){var o=new Cl(this.currentPoint.clone(),new _t(e,t),new _t(i,r),new _t(n,a));this.curves.push(o);this.currentPoint.set(n,a)},splineThru:function(e){var t=[this.currentPoint.clone()].concat(e);var i=new Al(t);this.curves.push(i);this.currentPoint.copy(e[e.length-1])},arc:function(e,t,i,r,n,a){var o=this.currentPoint.x;var s=this.currentPoint.y;this.absarc(e+o,t+s,i,r,n,a)},absarc:function(e,t,i,r,n,a){this.absellipse(e,t,i,i,r,n,a)},ellipse:function(e,t,i,r,n,a,o,s){var l=this.currentPoint.x;var u=this.currentPoint.y;this.absellipse(e+l,t+u,i,r,n,a,o,s)},absellipse:function(e,t,i,r,n,a,o,s){var l=new Pl(e,t,i,r,n,a,o,s);if(this.curves.length>0){var u=l.getPoint(0);if(!u.equals(this.currentPoint)){this.lineTo(u.x,u.y)}}this.curves.push(l);var c=l.getPoint(1);this.currentPoint.copy(c)},copy:function(e){El.prototype.copy.call(this,e);this.currentPoint.copy(e.currentPoint);return this}});function Ol(e){El.call(this);this.type="Path";this.currentPoint=new _t;if(e){this.setFromPoints(e)}}Ol.prototype=Rl;Rl.constructor=Ol;function Il(e){Ol.call(this,e);this.type="Shape";this.holes=[]}Il.prototype=Object.assign(Object.create(Rl),{constructor:Il,getPointsHoles:function(e){var t=[];for(var i=0,r=this.holes.length;i<r;i++){t[i]=this.holes[i].getPoints(e)}return t},extractPoints:function(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}},copy:function(e){Ol.prototype.copy.call(this,e);this.holes=[];for(var t=0,i=e.holes.length;t<i;t++){var r=e.holes[t];this.holes.push(r.clone())}return this}});function Dl(){this.type="ShapePath";this.subPaths=[];this.currentPath=null}Object.assign(Dl.prototype,{moveTo:function(e,t){this.currentPath=new Ol;this.subPaths.push(this.currentPath);this.currentPath.moveTo(e,t)},lineTo:function(e,t){this.currentPath.lineTo(e,t)},quadraticCurveTo:function(e,t,i,r){this.currentPath.quadraticCurveTo(e,t,i,r)},bezierCurveTo:function(e,t,i,r,n,a){this.currentPath.bezierCurveTo(e,t,i,r,n,a)},splineThru:function(e){this.currentPath.splineThru(e)},toShapes:function(e,t){function i(e){var t=[];for(var i=0,r=e.length;i<r;i++){var n=e[i];var a=new Il;a.curves=n.curves;t.push(a)}return t}function r(e,t){var i=t.length;var r=false;for(var n=i-1,a=0;a<i;n=a++){var o=t[n];var s=t[a];var l=s.x-o.x;var u=s.y-o.y;if(Math.abs(u)>Number.EPSILON){if(u<0){o=t[a];l=-l;s=t[n];u=-u}if(e.y<o.y||e.y>s.y)continue;if(e.y===o.y){if(e.x===o.x)return true}else{var c=u*(e.x-o.x)-l*(e.y-o.y);if(c===0)return true;if(c<0)continue;r=!r}}else{if(e.y!==o.y)continue;if(s.x<=e.x&&e.x<=o.x||o.x<=e.x&&e.x<=s.x)return true}}return r}var n=Xo.isClockWise;var a=this.subPaths;if(a.length===0)return[];if(t===true)return i(a);var o,s,l,u=[];if(a.length===1){s=a[0];l=new Il;l.curves=s.curves;u.push(l);return u}var c=!n(a[0].getPoints());c=e?!c:c;var h=[];var f=[];var d=[];var p=0;var m;f[p]=undefined;d[p]=[];for(var v=0,g=a.length;v<g;v++){s=a[v];m=s.getPoints();o=n(m);o=e?!o:o;if(o){if(!c&&f[p])p++;f[p]={s:new Il,p:m};f[p].s.curves=s.curves;if(c)p++;d[p]=[]}else{d[p].push({h:s,p:m[0]})}}if(!f[0])return i(a);if(f.length>1){var y=false;var b=[];for(var _=0,x=f.length;_<x;_++){h[_]=[]}for(var _=0,x=f.length;_<x;_++){var w=d[_];for(var T=0;T<w.length;T++){var M=w[T];var S=true;for(var E=0;E<f.length;E++){if(r(M.p,f[E].p)){if(_!==E)b.push({froms:_,tos:E,hole:T});if(S){S=false;h[E].push(M)}else{y=true}}}if(S){h[_].push(M)}}}if(b.length>0){if(!y)d=h}}var P;for(var v=0,A=f.length;v<A;v++){l=f[v].s;u.push(l);P=d[v];for(var C=0,L=P.length;C<L;C++){l.holes.push(P[C].h)}}return u}});function Bl(e){this.type="Font";this.data=e}Object.assign(Bl.prototype,{isFont:true,generateShapes:function(e,t,i){function r(e){var i=String(e).split("");var r=t/a.resolution;var o=(a.boundingBox.yMax-a.boundingBox.yMin+a.underlineThickness)*r;var s=0,l=0;var u=[];for(var c=0;c<i.length;c++){var h=i[c];if(h==="\n"){s=0;l-=o}else{var f=n(h,r,s,l);s+=f.offsetX;u.push(f.path)}}return u}function n(e,t,r,n){var o=a.glyphs[e]||a.glyphs["?"];if(!o)return;var s=new Dl;var l=[];var u,c,h,f,d,p,m,v,g,y,b;if(o.o){var _=o._cachedOutline||(o._cachedOutline=o.o.split(" "));for(var x=0,w=_.length;x<w;){var T=_[x++];switch(T){case"m":u=_[x++]*t+r;c=_[x++]*t+n;s.moveTo(u,c);break;case"l":u=_[x++]*t+r;c=_[x++]*t+n;s.lineTo(u,c);break;case"q":h=_[x++]*t+r;f=_[x++]*t+n;m=_[x++]*t+r;v=_[x++]*t+n;s.quadraticCurveTo(m,v,h,f);b=l[l.length-1];if(b){d=b.x;p=b.y;for(var M=1;M<=i;M++){var S=M/i;yl(S,d,m,h);yl(S,p,v,f)}}break;case"b":h=_[x++]*t+r;f=_[x++]*t+n;m=_[x++]*t+r;v=_[x++]*t+n;g=_[x++]*t+r;y=_[x++]*t+n;s.bezierCurveTo(m,v,g,y,h,f);b=l[l.length-1];if(b){d=b.x;p=b.y;for(var M=1;M<=i;M++){var S=M/i;Tl(S,d,m,g,h);Tl(S,p,v,y,f)}}break}}}return{offsetX:o.ha*t,path:s}}if(t===undefined)t=100;if(i===undefined)i=4;var a=this.data;var o=r(e);var s=[];for(var l=0,u=o.length;l<u;l++){Array.prototype.push.apply(s,o[l].toShapes())}return s}});function Gl(e){this.manager=e!==undefined?e:Ss}Object.assign(Gl.prototype,{load:function(e,t,i,r){var n=this;var a=new Ps(this.manager);a.setPath(this.path);a.load(e,function(e){var i;try{i=JSON.parse(e)}catch(t){console.warn("THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead.");i=JSON.parse(e.substring(65,e.length-2))}var r=n.parse(i);if(t)t(r)},i,r)},parse:function(e){return new Bl(e)},setPath:function(e){this.path=e;return this}});var kl;var Nl={getContext:function(){if(kl===undefined){kl=new(window.AudioContext||window.webkitAudioContext)}return kl},setContext:function(e){kl=e}};function Ul(e){this.manager=e!==undefined?e:Ss}Object.assign(Ul.prototype,{load:function(e,t,i,r){var n=new Ps(this.manager);n.setResponseType("arraybuffer");n.load(e,function(e){var i=Nl.getContext();i.decodeAudioData(e,function(e){t(e)})},i,r)}});function Fl(){this.type="StereoCamera";this.aspect=1;this.eyeSep=.064;this.cameraL=new Ja;this.cameraL.layers.enable(1);this.cameraL.matrixAutoUpdate=false;this.cameraR=new Ja;this.cameraR.layers.enable(2);this.cameraR.matrixAutoUpdate=false}Object.assign(Fl.prototype,{update:function(){var e,t,i,r,n,a,o,s;var l=new xt;var u=new xt;return function c(h){var f=e!==this||t!==h.focus||i!==h.fov||r!==h.aspect*this.aspect||n!==h.near||a!==h.far||o!==h.zoom||s!==this.eyeSep;if(f){e=this;t=h.focus;i=h.fov;r=h.aspect*this.aspect;n=h.near;a=h.far;o=h.zoom;var d=h.projectionMatrix.clone();s=this.eyeSep/2;var p=s*n/t;var m=n*Math.tan(bt.DEG2RAD*i*.5)/o;var v,g;u.elements[12]=-s;l.elements[12]=s;v=-m*r+p;g=m*r+p;d.elements[0]=2*n/(g-v);d.elements[8]=(g+v)/(g-v);this.cameraL.projectionMatrix.copy(d);v=-m*r-p;g=m*r-p;d.elements[0]=2*n/(g-v);d.elements[8]=(g+v)/(g-v);this.cameraR.projectionMatrix.copy(d)}this.cameraL.matrixWorld.copy(h.matrixWorld).multiply(u);this.cameraR.matrixWorld.copy(h.matrixWorld).multiply(l)}}()});function Hl(e,t,i){jn.call(this);this.type="CubeCamera";var r=90,n=1;var a=new Ja(r,n,e,t);a.up.set(0,-1,0);a.lookAt(new Tt(1,0,0));this.add(a);var o=new Ja(r,n,e,t);o.up.set(0,-1,0);o.lookAt(new Tt(-1,0,0));this.add(o);var s=new Ja(r,n,e,t);s.up.set(0,0,1);s.lookAt(new Tt(0,1,0));this.add(s);var l=new Ja(r,n,e,t);l.up.set(0,0,-1);l.lookAt(new Tt(0,-1,0));this.add(l);var u=new Ja(r,n,e,t);u.up.set(0,-1,0);u.lookAt(new Tt(0,0,1));this.add(u);var c=new Ja(r,n,e,t);c.up.set(0,-1,0);c.lookAt(new Tt(0,0,-1));this.add(c);var h={format:Be,magFilter:be,minFilter:be};this.renderTarget=new Ct(i,i,h);this.renderTarget.texture.name="CubeCamera";this.update=function(e,t){if(this.parent===null)this.updateMatrixWorld();var i=this.renderTarget;var r=i.texture.generateMipmaps;i.texture.generateMipmaps=false;i.activeCubeFace=0;e.render(t,a,i);i.activeCubeFace=1;e.render(t,o,i);i.activeCubeFace=2;e.render(t,s,i);i.activeCubeFace=3;e.render(t,l,i);i.activeCubeFace=4;e.render(t,u,i);i.texture.generateMipmaps=r;i.activeCubeFace=5;e.render(t,c,i);e.setRenderTarget(null)};this.clear=function(e,t,i,r){var n=this.renderTarget;for(var a=0;a<6;a++){n.activeCubeFace=a;e.setRenderTarget(n);e.clear(t,i,r)}e.setRenderTarget(null)}}Hl.prototype=Object.create(jn.prototype);Hl.prototype.constructor=Hl;function zl(){jn.call(this);this.type="AudioListener";this.context=Nl.getContext();this.gain=this.context.createGain();this.gain.connect(this.context.destination);this.filter=null}zl.prototype=Object.assign(Object.create(jn.prototype),{constructor:zl,getInput:function(){return this.gain},removeFilter:function(){if(this.filter!==null){this.gain.disconnect(this.filter);this.filter.disconnect(this.context.destination);this.gain.connect(this.context.destination);this.filter=null}},getFilter:function(){return this.filter},setFilter:function(e){if(this.filter!==null){this.gain.disconnect(this.filter);this.filter.disconnect(this.context.destination)}else{this.gain.disconnect(this.context.destination)}this.filter=e;this.gain.connect(this.filter);this.filter.connect(this.context.destination)},getMasterVolume:function(){return this.gain.gain.value},setMasterVolume:function(e){this.gain.gain.value=e},updateMatrixWorld:function(){var e=new Tt;var t=new wt;var i=new Tt;var r=new Tt;return function n(a){jn.prototype.updateMatrixWorld.call(this,a);var o=this.context.listener;var s=this.up;this.matrixWorld.decompose(e,t,i);r.set(0,0,-1).applyQuaternion(t);if(o.positionX){o.positionX.setValueAtTime(e.x,this.context.currentTime);o.positionY.setValueAtTime(e.y,this.context.currentTime);o.positionZ.setValueAtTime(e.z,this.context.currentTime);o.forwardX.setValueAtTime(r.x,this.context.currentTime);o.forwardY.setValueAtTime(r.y,this.context.currentTime);o.forwardZ.setValueAtTime(r.z,this.context.currentTime);o.upX.setValueAtTime(s.x,this.context.currentTime);o.upY.setValueAtTime(s.y,this.context.currentTime);o.upZ.setValueAtTime(s.z,this.context.currentTime)}else{o.setPosition(e.x,e.y,e.z);o.setOrientation(r.x,r.y,r.z,s.x,s.y,s.z)}}}()})
;function Vl(e){jn.call(this);this.type="Audio";this.context=e.context;this.gain=this.context.createGain();this.gain.connect(e.getInput());this.autoplay=false;this.buffer=null;this.loop=false;this.startTime=0;this.offset=0;this.playbackRate=1;this.isPlaying=false;this.hasPlaybackControl=true;this.sourceType="empty";this.filters=[]}Vl.prototype=Object.assign(Object.create(jn.prototype),{constructor:Vl,getOutput:function(){return this.gain},setNodeSource:function(e){this.hasPlaybackControl=false;this.sourceType="audioNode";this.source=e;this.connect();return this},setBuffer:function(e){this.buffer=e;this.sourceType="buffer";if(this.autoplay)this.play();return this},play:function(){if(this.isPlaying===true){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===false){console.warn("THREE.Audio: this Audio has no playback control.");return}var e=this.context.createBufferSource();e.buffer=this.buffer;e.loop=this.loop;e.onended=this.onEnded.bind(this);e.playbackRate.setValueAtTime(this.playbackRate,this.startTime);this.startTime=this.context.currentTime;e.start(this.startTime,this.offset);this.isPlaying=true;this.source=e;return this.connect()},pause:function(){if(this.hasPlaybackControl===false){console.warn("THREE.Audio: this Audio has no playback control.");return}if(this.isPlaying===true){this.source.stop();this.offset+=(this.context.currentTime-this.startTime)*this.playbackRate;this.isPlaying=false}return this},stop:function(){if(this.hasPlaybackControl===false){console.warn("THREE.Audio: this Audio has no playback control.");return}this.source.stop();this.offset=0;this.isPlaying=false;return this},connect:function(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(var e=1,t=this.filters.length;e<t;e++){this.filters[e-1].connect(this.filters[e])}this.filters[this.filters.length-1].connect(this.getOutput())}else{this.source.connect(this.getOutput())}return this},disconnect:function(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(var e=1,t=this.filters.length;e<t;e++){this.filters[e-1].disconnect(this.filters[e])}this.filters[this.filters.length-1].disconnect(this.getOutput())}else{this.source.disconnect(this.getOutput())}return this},getFilters:function(){return this.filters},setFilters:function(e){if(!e)e=[];if(this.isPlaying===true){this.disconnect();this.filters=e;this.connect()}else{this.filters=e}return this},getFilter:function(){return this.getFilters()[0]},setFilter:function(e){return this.setFilters(e?[e]:[])},setPlaybackRate:function(e){if(this.hasPlaybackControl===false){console.warn("THREE.Audio: this Audio has no playback control.");return}this.playbackRate=e;if(this.isPlaying===true){this.source.playbackRate.setValueAtTime(this.playbackRate,this.context.currentTime)}return this},getPlaybackRate:function(){return this.playbackRate},onEnded:function(){this.isPlaying=false},getLoop:function(){if(this.hasPlaybackControl===false){console.warn("THREE.Audio: this Audio has no playback control.");return false}return this.loop},setLoop:function(e){if(this.hasPlaybackControl===false){console.warn("THREE.Audio: this Audio has no playback control.");return}this.loop=e;if(this.isPlaying===true){this.source.loop=this.loop}return this},getVolume:function(){return this.gain.gain.value},setVolume:function(e){this.gain.gain.value=e;return this}});function jl(e){Vl.call(this,e);this.panner=this.context.createPanner();this.panner.connect(this.gain)}jl.prototype=Object.assign(Object.create(Vl.prototype),{constructor:jl,getOutput:function(){return this.panner},getRefDistance:function(){return this.panner.refDistance},setRefDistance:function(e){this.panner.refDistance=e},getRolloffFactor:function(){return this.panner.rolloffFactor},setRolloffFactor:function(e){this.panner.rolloffFactor=e},getDistanceModel:function(){return this.panner.distanceModel},setDistanceModel:function(e){this.panner.distanceModel=e},getMaxDistance:function(){return this.panner.maxDistance},setMaxDistance:function(e){this.panner.maxDistance=e},updateMatrixWorld:function(){var e=new Tt;return function t(i){jn.prototype.updateMatrixWorld.call(this,i);e.setFromMatrixPosition(this.matrixWorld);this.panner.setPosition(e.x,e.y,e.z)}}()});function Wl(e,t){this.analyser=e.context.createAnalyser();this.analyser.fftSize=t!==undefined?t:2048;this.data=new Uint8Array(this.analyser.frequencyBinCount);e.getOutput().connect(this.analyser)}Object.assign(Wl.prototype,{getFrequencyData:function(){this.analyser.getByteFrequencyData(this.data);return this.data},getAverageFrequency:function(){var e=0,t=this.getFrequencyData();for(var i=0;i<t.length;i++){e+=t[i]}return e/t.length}});function Xl(e,t,i){this.binding=e;this.valueSize=i;var r=Float64Array,n;switch(t){case"quaternion":n=this._slerp;break;case"string":case"bool":r=Array;n=this._select;break;default:n=this._lerp}this.buffer=new r(i*4);this._mixBufferRegion=n;this.cumulativeWeight=0;this.useCount=0;this.referenceCount=0}Object.assign(Xl.prototype,{accumulate:function(e,t){var i=this.buffer,r=this.valueSize,n=e*r+r,a=this.cumulativeWeight;if(a===0){for(var o=0;o!==r;++o){i[n+o]=i[o]}a=t}else{a+=t;var s=t/a;this._mixBufferRegion(i,n,0,s,r)}this.cumulativeWeight=a},apply:function(e){var t=this.valueSize,i=this.buffer,r=e*t+t,n=this.cumulativeWeight,a=this.binding;this.cumulativeWeight=0;if(n<1){var o=t*3;this._mixBufferRegion(i,r,o,1-n,t)}for(var s=t,l=t+t;s!==l;++s){if(i[s]!==i[s+t]){a.setValue(i,r);break}}},saveOriginalState:function(){var e=this.binding;var t=this.buffer,i=this.valueSize,r=i*3;e.getValue(t,r);for(var n=i,a=r;n!==a;++n){t[n]=t[r+n%i]}this.cumulativeWeight=0},restoreOriginalState:function(){var e=this.valueSize*3;this.binding.setValue(this.buffer,e)},_select:function(e,t,i,r,n){if(r>=.5){for(var a=0;a!==n;++a){e[t+a]=e[i+a]}}},_slerp:function(e,t,i,r){wt.slerpFlat(e,t,e,t,e,i,r)},_lerp:function(e,t,i,r,n){var a=1-r;for(var o=0;o!==n;++o){var s=t+o;e[s]=e[s]*a+e[i+o]*r}}});function Yl(e,t,i){var r=i||ql.parseTrackName(t);this._targetGroup=e;this._bindings=e.subscribe_(t,r)}Object.assign(Yl.prototype,{getValue:function(e,t){this.bind();var i=this._targetGroup.nCachedObjects_,r=this._bindings[i];if(r!==undefined)r.getValue(e,t)},setValue:function(e,t){var i=this._bindings;for(var r=this._targetGroup.nCachedObjects_,n=i.length;r!==n;++r){i[r].setValue(e,t)}},bind:function(){var e=this._bindings;for(var t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t){e[t].bind()}},unbind:function(){var e=this._bindings;for(var t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t){e[t].unbind()}}});function ql(e,t,i){this.path=t;this.parsedPath=i||ql.parseTrackName(t);this.node=ql.findNode(e,this.parsedPath.nodeName)||e;this.rootNode=e}Object.assign(ql,{Composite:Yl,create:function(e,t,i){if(!(e&&e.isAnimationObjectGroup)){return new ql(e,t,i)}else{return new ql.Composite(e,t,i)}},sanitizeNodeName:function(e){return e.replace(/\s/g,"_").replace(/[^\w-]/g,"")},parseTrackName:function(){var e=/((?:[\w-]+[\/:])*)/;var t=/([\w-\.]+)?/;var i=/(?:\.([\w-]+)(?:\[(.+)\])?)?/;var r=/\.([\w-]+)(?:\[(.+)\])?/;var n=new RegExp(""+"^"+e.source+t.source+i.source+r.source+"$");var a=["material","materials","bones"];return function(e){var t=n.exec(e);if(!t){throw new Error("PropertyBinding: Cannot parse trackName: "+e)}var i={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]};var r=i.nodeName&&i.nodeName.lastIndexOf(".");if(r!==undefined&&r!==-1){var o=i.nodeName.substring(r+1);if(a.indexOf(o)!==-1){i.nodeName=i.nodeName.substring(0,r);i.objectName=o}}if(i.propertyName===null||i.propertyName.length===0){throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e)}return i}}(),findNode:function(e,t){if(!t||t===""||t==="root"||t==="."||t===-1||t===e.name||t===e.uuid){return e}if(e.skeleton){var i=function(e){for(var i=0;i<e.bones.length;i++){var r=e.bones[i];if(r.name===t){return r}}return null};var r=i(e.skeleton);if(r){return r}}if(e.children){var n=function(e){for(var i=0;i<e.length;i++){var r=e[i];if(r.name===t||r.uuid===t){return r}var a=n(r.children);if(a)return a}return null};var a=n(e.children);if(a){return a}}return null}});Object.assign(ql.prototype,{_getValue_unavailable:function(){},_setValue_unavailable:function(){},BindingType:{Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Versioning:{None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},GetterByBindingType:[function e(t,i){t[i]=this.node[this.propertyName]},function e(t,i){var r=this.resolvedProperty;for(var n=0,a=r.length;n!==a;++n){t[i++]=r[n]}},function e(t,i){t[i]=this.resolvedProperty[this.propertyIndex]},function e(t,i){this.resolvedProperty.toArray(t,i)}],SetterByBindingTypeAndVersioning:[[function e(t,i){this.targetObject[this.propertyName]=t[i]},function e(t,i){this.targetObject[this.propertyName]=t[i];this.targetObject.needsUpdate=true},function e(t,i){this.targetObject[this.propertyName]=t[i];this.targetObject.matrixWorldNeedsUpdate=true}],[function e(t,i){var r=this.resolvedProperty;for(var n=0,a=r.length;n!==a;++n){r[n]=t[i++]}},function e(t,i){var r=this.resolvedProperty;for(var n=0,a=r.length;n!==a;++n){r[n]=t[i++]}this.targetObject.needsUpdate=true},function e(t,i){var r=this.resolvedProperty;for(var n=0,a=r.length;n!==a;++n){r[n]=t[i++]}this.targetObject.matrixWorldNeedsUpdate=true}],[function e(t,i){this.resolvedProperty[this.propertyIndex]=t[i]},function e(t,i){this.resolvedProperty[this.propertyIndex]=t[i];this.targetObject.needsUpdate=true},function e(t,i){this.resolvedProperty[this.propertyIndex]=t[i];this.targetObject.matrixWorldNeedsUpdate=true}],[function e(t,i){this.resolvedProperty.fromArray(t,i)},function e(t,i){this.resolvedProperty.fromArray(t,i);this.targetObject.needsUpdate=true},function e(t,i){this.resolvedProperty.fromArray(t,i);this.targetObject.matrixWorldNeedsUpdate=true}]],getValue:function e(t,i){this.bind();this.getValue(t,i)},setValue:function e(t,i){this.bind();this.setValue(t,i)},bind:function(){var e=this.node,t=this.parsedPath,i=t.objectName,r=t.propertyName,n=t.propertyIndex;if(!e){e=ql.findNode(this.rootNode,t.nodeName)||this.rootNode;this.node=e}this.getValue=this._getValue_unavailable;this.setValue=this._setValue_unavailable;if(!e){console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");return}if(i){var a=t.objectIndex;switch(i){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(var o=0;o<e.length;o++){if(e[o].name===a){a=o;break}}break;default:if(e[i]===undefined){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[i]}if(a!==undefined){if(e[a]===undefined){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[a]}}var s=e[r];if(s===undefined){var l=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+l+"."+r+" but it wasn't found.",e);return}var u=this.Versioning.None;if(e.needsUpdate!==undefined){u=this.Versioning.NeedsUpdate;this.targetObject=e}else if(e.matrixWorldNeedsUpdate!==undefined){u=this.Versioning.MatrixWorldNeedsUpdate;this.targetObject=e}var c=this.BindingType.Direct;if(n!==undefined){if(r==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(e.geometry.isBufferGeometry){if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}for(var o=0;o<this.node.geometry.morphAttributes.position.length;o++){if(e.geometry.morphAttributes.position[o].name===n){n=o;break}}}else{if(!e.geometry.morphTargets){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphTargets.",this);return}for(var o=0;o<this.node.geometry.morphTargets.length;o++){if(e.geometry.morphTargets[o].name===n){n=o;break}}}}c=this.BindingType.ArrayElement;this.resolvedProperty=s;this.propertyIndex=n}else if(s.fromArray!==undefined&&s.toArray!==undefined){c=this.BindingType.HasFromToArray;this.resolvedProperty=s}else if(Array.isArray(s)){c=this.BindingType.EntireArray;this.resolvedProperty=s}else{this.propertyName=r}this.getValue=this.GetterByBindingType[c];this.setValue=this.SetterByBindingTypeAndVersioning[c][u]},unbind:function(){this.node=null;this.getValue=this._getValue_unbound;this.setValue=this._setValue_unbound}});Object.assign(ql.prototype,{_getValue_unbound:ql.prototype.getValue,_setValue_unbound:ql.prototype.setValue});function Zl(){this.uuid=bt.generateUUID();this._objects=Array.prototype.slice.call(arguments);this.nCachedObjects_=0;var e={};this._indicesByUUID=e;for(var t=0,i=arguments.length;t!==i;++t){e[arguments[t].uuid]=t}this._paths=[];this._parsedPaths=[];this._bindings=[];this._bindingsIndicesByPath={};var r=this;this.stats={objects:{get total(){return r._objects.length},get inUse(){return this.total-r.nCachedObjects_}},get bindingsPerObject(){return r._bindings.length}}}Object.assign(Zl.prototype,{isAnimationObjectGroup:true,add:function(){var e=this._objects,t=e.length,i=this.nCachedObjects_,r=this._indicesByUUID,n=this._paths,a=this._parsedPaths,o=this._bindings,s=o.length;for(var l=0,u=arguments.length;l!==u;++l){var c=arguments[l],h=c.uuid,f=r[h],d=undefined;if(f===undefined){f=t++;r[h]=f;e.push(c);for(var p=0,m=s;p!==m;++p){o[p].push(new ql(c,n[p],a[p]))}}else if(f<i){d=e[f];var v=--i,g=e[v];r[g.uuid]=f;e[f]=g;r[h]=v;e[v]=c;for(var p=0,m=s;p!==m;++p){var y=o[p],b=y[v],_=y[f];y[f]=b;if(_===undefined){_=new ql(c,n[p],a[p])}y[v]=_}}else if(e[f]!==d){console.error("THREE.AnimationObjectGroup: Different objects with the same UUID "+"detected. Clean the caches or recreate your infrastructure when reloading scenes.")}}this.nCachedObjects_=i},remove:function(){var e=this._objects,t=this.nCachedObjects_,i=this._indicesByUUID,r=this._bindings,n=r.length;for(var a=0,o=arguments.length;a!==o;++a){var s=arguments[a],l=s.uuid,u=i[l];if(u!==undefined&&u>=t){var c=t++,h=e[c];i[h.uuid]=u;e[u]=h;i[l]=c;e[c]=s;for(var f=0,d=n;f!==d;++f){var p=r[f],m=p[c],v=p[u];p[u]=m;p[c]=v}}}this.nCachedObjects_=t},uncache:function(){var e=this._objects,t=e.length,i=this.nCachedObjects_,r=this._indicesByUUID,n=this._bindings,a=n.length;for(var o=0,s=arguments.length;o!==s;++o){var l=arguments[o],u=l.uuid,c=r[u];if(c!==undefined){delete r[u];if(c<i){var h=--i,f=e[h],d=--t,p=e[d];r[f.uuid]=c;e[c]=f;r[p.uuid]=h;e[h]=p;e.pop();for(var m=0,v=a;m!==v;++m){var g=n[m],y=g[h],b=g[d];g[c]=y;g[h]=b;g.pop()}}else{var d=--t,p=e[d];r[p.uuid]=c;e[c]=p;e.pop();for(var m=0,v=a;m!==v;++m){var g=n[m];g[c]=g[d];g.pop()}}}}this.nCachedObjects_=i},subscribe_:function(e,t){var i=this._bindingsIndicesByPath,r=i[e],n=this._bindings;if(r!==undefined)return n[r];var a=this._paths,o=this._parsedPaths,s=this._objects,l=s.length,u=this.nCachedObjects_,c=new Array(l);r=n.length;i[e]=r;a.push(e);o.push(t);n.push(c);for(var h=u,f=s.length;h!==f;++h){var d=s[h];c[h]=new ql(d,e,t)}return c},unsubscribe_:function(e){var t=this._bindingsIndicesByPath,i=t[e];if(i!==undefined){var r=this._paths,n=this._parsedPaths,a=this._bindings,o=a.length-1,s=a[o],l=e[o];t[l]=i;a[i]=s;a.pop();n[i]=n[o];n.pop();r[i]=r[o];r.pop()}}});function Kl(e,t,i){this._mixer=e;this._clip=t;this._localRoot=i||null;var r=t.tracks,n=r.length,a=new Array(n);var o={endingStart:rt,endingEnd:rt};for(var s=0;s!==n;++s){var l=r[s].createInterpolant(null);a[s]=l;l.settings=o}this._interpolantSettings=o;this._interpolants=a;this._propertyBindings=new Array(n);this._cacheIndex=null;this._byClipCacheIndex=null;this._timeScaleInterpolant=null;this._weightInterpolant=null;this.loop=Qe;this._loopCount=-1;this._startTime=null;this.time=0;this.timeScale=1;this._effectiveTimeScale=1;this.weight=1;this._effectiveWeight=1;this.repetitions=Infinity;this.paused=false;this.enabled=true;this.clampWhenFinished=false;this.zeroSlopeAtStart=true;this.zeroSlopeAtEnd=true}Object.assign(Kl.prototype,{play:function(){this._mixer._activateAction(this);return this},stop:function(){this._mixer._deactivateAction(this);return this.reset()},reset:function(){this.paused=false;this.enabled=true;this.time=0;this._loopCount=-1;this._startTime=null;return this.stopFading().stopWarping()},isRunning:function(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)},isScheduled:function(){return this._mixer._isActiveAction(this)},startAt:function(e){this._startTime=e;return this},setLoop:function(e,t){this.loop=e;this.repetitions=t;return this},setEffectiveWeight:function(e){this.weight=e;this._effectiveWeight=this.enabled?e:0;return this.stopFading()},getEffectiveWeight:function(){return this._effectiveWeight},fadeIn:function(e){return this._scheduleFading(e,0,1)},fadeOut:function(e){return this._scheduleFading(e,1,0)},crossFadeFrom:function(e,t,i){e.fadeOut(t);this.fadeIn(t);if(i){var r=this._clip.duration,n=e._clip.duration,a=n/r,o=r/n;e.warp(1,a,t);this.warp(o,1,t)}return this},crossFadeTo:function(e,t,i){return e.crossFadeFrom(this,t,i)},stopFading:function(){var e=this._weightInterpolant;if(e!==null){this._weightInterpolant=null;this._mixer._takeBackControlInterpolant(e)}return this},setEffectiveTimeScale:function(e){this.timeScale=e;this._effectiveTimeScale=this.paused?0:e;return this.stopWarping()},getEffectiveTimeScale:function(){return this._effectiveTimeScale},setDuration:function(e){this.timeScale=this._clip.duration/e;return this.stopWarping()},syncWith:function(e){this.time=e.time;this.timeScale=e.timeScale;return this.stopWarping()},halt:function(e){return this.warp(this._effectiveTimeScale,0,e)},warp:function(e,t,i){var r=this._mixer,n=r.time,a=this._timeScaleInterpolant,o=this.timeScale;if(a===null){a=r._lendControlInterpolant();this._timeScaleInterpolant=a}var s=a.parameterPositions,l=a.sampleValues;s[0]=n;s[1]=n+i;l[0]=e/o;l[1]=t/o;return this},stopWarping:function(){var e=this._timeScaleInterpolant;if(e!==null){this._timeScaleInterpolant=null;this._mixer._takeBackControlInterpolant(e)}return this},getMixer:function(){return this._mixer},getClip:function(){return this._clip},getRoot:function(){return this._localRoot||this._mixer._root},_update:function(e,t,i,r){if(!this.enabled){this._updateWeight(e);return}var n=this._startTime;if(n!==null){var a=(e-n)*i;if(a<0||i===0){return}this._startTime=null;t=i*a}t*=this._updateTimeScale(e);var o=this._updateTime(t);var s=this._updateWeight(e);if(s>0){var l=this._interpolants;var u=this._propertyBindings;for(var c=0,h=l.length;c!==h;++c){l[c].evaluate(o);u[c].accumulate(r,s)}}},_updateWeight:function(e){var t=0;if(this.enabled){t=this.weight;var i=this._weightInterpolant;if(i!==null){var r=i.evaluate(e)[0];t*=r;if(e>i.parameterPositions[1]){this.stopFading();if(r===0){this.enabled=false}}}}this._effectiveWeight=t;return t},_updateTimeScale:function(e){var t=0;if(!this.paused){t=this.timeScale;var i=this._timeScaleInterpolant;if(i!==null){var r=i.evaluate(e)[0];t*=r;if(e>i.parameterPositions[1]){this.stopWarping();if(t===0){this.paused=true}else{this.timeScale=t}}}}this._effectiveTimeScale=t;return t},_updateTime:function(e){var t=this.time+e;if(e===0)return t;var i=this._clip.duration,r=this.loop,n=this._loopCount;if(r===$e){if(n===-1){this._loopCount=0;this._setEndings(true,true,false)}e:{if(t>=i){t=i}else if(t<0){t=0}else break e;if(this.clampWhenFinished)this.paused=true;else this.enabled=false;this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{var a=r===Je;if(n===-1){if(e>=0){n=0;this._setEndings(true,this.repetitions===0,a)}else{this._setEndings(this.repetitions===0,true,a)}}if(t>=i||t<0){var o=Math.floor(t/i);t-=i*o;n+=Math.abs(o);var s=this.repetitions-n;if(s<0){if(this.clampWhenFinished)this.paused=true;else this.enabled=false;t=e>0?i:0;this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1})}else{if(s===0){var l=e<0;this._setEndings(l,!l,a)}else{this._setEndings(false,false,a)}this._loopCount=n;this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:o})}}if(a&&(n&1)===1){this.time=t;return i-t}}this.time=t;return t},_setEndings:function(e,t,i){var r=this._interpolantSettings;if(i){r.endingStart=nt;r.endingEnd=nt}else{if(e){r.endingStart=this.zeroSlopeAtStart?nt:rt}else{r.endingStart=at}if(t){r.endingEnd=this.zeroSlopeAtEnd?nt:rt}else{r.endingEnd=at}}},_scheduleFading:function(e,t,i){var r=this._mixer,n=r.time,a=this._weightInterpolant;if(a===null){a=r._lendControlInterpolant();this._weightInterpolant=a}var o=a.parameterPositions,s=a.sampleValues;o[0]=n;s[0]=t;o[1]=n+e;s[1]=i;return this}});function $l(e){this._root=e;this._initMemoryManager();this._accuIndex=0;this.time=0;this.timeScale=1}Object.assign($l.prototype,t.prototype,{_bindAction:function(e,t){var i=e._localRoot||this._root,r=e._clip.tracks,n=r.length,a=e._propertyBindings,o=e._interpolants,s=i.uuid,l=this._bindingsByRootAndName,u=l[s];if(u===undefined){u={};l[s]=u}for(var c=0;c!==n;++c){var h=r[c],f=h.name,d=u[f];if(d!==undefined){a[c]=d}else{d=a[c];if(d!==undefined){if(d._cacheIndex===null){++d.referenceCount;this._addInactiveBinding(d,s,f)}continue}var p=t&&t._propertyBindings[c].binding.parsedPath;d=new Xl(ql.create(i,f,p),h.ValueTypeName,h.getValueSize());++d.referenceCount;this._addInactiveBinding(d,s,f);a[c]=d}o[c].resultBuffer=d.buffer}},_activateAction:function(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){var t=(e._localRoot||this._root).uuid,i=e._clip.uuid,r=this._actionsByClip[i];this._bindAction(e,r&&r.knownActions[0]);this._addInactiveAction(e,i,t)}var n=e._propertyBindings;for(var a=0,o=n.length;a!==o;++a){var s=n[a];if(s.useCount++===0){this._lendBinding(s);s.saveOriginalState()}}this._lendAction(e)}},_deactivateAction:function(e){if(this._isActiveAction(e)){var t=e._propertyBindings;for(var i=0,r=t.length;i!==r;++i){var n=t[i];if(--n.useCount===0){n.restoreOriginalState();this._takeBackBinding(n)}}this._takeBackAction(e)}},_initMemoryManager:function(){this._actions=[];this._nActiveActions=0;this._actionsByClip={};this._bindings=[];this._nActiveBindings=0;this._bindingsByRootAndName={};this._controlInterpolants=[];this._nActiveControlInterpolants=0;var e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}},_isActiveAction:function(e){var t=e._cacheIndex;return t!==null&&t<this._nActiveActions},_addInactiveAction:function(e,t,i){var r=this._actions,n=this._actionsByClip,a=n[t];if(a===undefined){a={knownActions:[e],actionByRoot:{}};e._byClipCacheIndex=0;n[t]=a}else{var o=a.knownActions;e._byClipCacheIndex=o.length;o.push(e)}e._cacheIndex=r.length;r.push(e);a.actionByRoot[i]=e},_removeInactiveAction:function(e){var t=this._actions,i=t[t.length-1],r=e._cacheIndex;i._cacheIndex=r;t[r]=i;t.pop();e._cacheIndex=null;var n=e._clip.uuid,a=this._actionsByClip,o=a[n],s=o.knownActions,l=s[s.length-1],u=e._byClipCacheIndex;l._byClipCacheIndex=u;s[u]=l;s.pop();e._byClipCacheIndex=null;var c=o.actionByRoot,h=(e._localRoot||this._root).uuid;delete c[h];if(s.length===0){delete a[n]}this._removeInactiveBindingsForAction(e)},_removeInactiveBindingsForAction:function(e){var t=e._propertyBindings;for(var i=0,r=t.length;i!==r;++i){var n=t[i];if(--n.referenceCount===0){this._removeInactiveBinding(n)}}},_lendAction:function(e){var t=this._actions,i=e._cacheIndex,r=this._nActiveActions++,n=t[r];e._cacheIndex=r;t[r]=e;n._cacheIndex=i;t[i]=n},_takeBackAction:function(e){var t=this._actions,i=e._cacheIndex,r=--this._nActiveActions,n=t[r];e._cacheIndex=r;t[r]=e;n._cacheIndex=i;t[i]=n},_addInactiveBinding:function(e,t,i){var r=this._bindingsByRootAndName,n=r[t],a=this._bindings;if(n===undefined){n={};r[t]=n}n[i]=e;e._cacheIndex=a.length;a.push(e)},_removeInactiveBinding:function(e){var t=this._bindings,i=e.binding,r=i.rootNode.uuid,n=i.path,a=this._bindingsByRootAndName,o=a[r],s=t[t.length-1],l=e._cacheIndex;s._cacheIndex=l;t[l]=s;t.pop();delete o[n];e:{for(var u in o)break e;delete a[r]}},_lendBinding:function(e){var t=this._bindings,i=e._cacheIndex,r=this._nActiveBindings++,n=t[r];e._cacheIndex=r;t[r]=e;n._cacheIndex=i;t[i]=n},_takeBackBinding:function(e){var t=this._bindings,i=e._cacheIndex,r=--this._nActiveBindings,n=t[r];e._cacheIndex=r;t[r]=e;n._cacheIndex=i;t[i]=n},_lendControlInterpolant:function(){var e=this._controlInterpolants,t=this._nActiveControlInterpolants++,i=e[t];if(i===undefined){i=new Xs(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer);i.__cacheIndex=t;e[t]=i}return i},_takeBackControlInterpolant:function(e){var t=this._controlInterpolants,i=e.__cacheIndex,r=--this._nActiveControlInterpolants,n=t[r];e.__cacheIndex=r;t[r]=e;n.__cacheIndex=i;t[i]=n},_controlInterpolantsResultBuffer:new Float32Array(1),clipAction:function(e,t){var i=t||this._root,r=i.uuid,n=typeof e==="string"?nl.findByName(i,e):e,a=n!==null?n.uuid:e,o=this._actionsByClip[a],s=null;if(o!==undefined){var l=o.actionByRoot[r];if(l!==undefined){return l}s=o.knownActions[0];if(n===null)n=s._clip}if(n===null)return null;var u=new Kl(this,n,t);this._bindAction(u,s);this._addInactiveAction(u,a,r);return u},existingAction:function(e,t){var i=t||this._root,r=i.uuid,n=typeof e==="string"?nl.findByName(i,e):e,a=n?n.uuid:e,o=this._actionsByClip[a];if(o!==undefined){return o.actionByRoot[r]||null}return null},stopAllAction:function(){var e=this._actions,t=this._nActiveActions,i=this._bindings,r=this._nActiveBindings;this._nActiveActions=0;this._nActiveBindings=0;for(var n=0;n!==t;++n){e[n].reset()}for(var n=0;n!==r;++n){i[n].useCount=0}return this},update:function(e){e*=this.timeScale;var t=this._actions,i=this._nActiveActions,r=this.time+=e,n=Math.sign(e),a=this._accuIndex^=1;for(var o=0;o!==i;++o){var s=t[o];s._update(r,e,n,a)}var l=this._bindings,u=this._nActiveBindings;for(var o=0;o!==u;++o){l[o].apply(a)}return this},getRoot:function(){return this._root},uncacheClip:function(e){var t=this._actions,i=e.uuid,r=this._actionsByClip,n=r[i];if(n!==undefined){var a=n.knownActions;for(var o=0,s=a.length;o!==s;++o){var l=a[o];this._deactivateAction(l);var u=l._cacheIndex,c=t[t.length-1];l._cacheIndex=null;l._byClipCacheIndex=null;c._cacheIndex=u;t[u]=c;t.pop();this._removeInactiveBindingsForAction(l)}delete r[i]}},uncacheRoot:function(e){var t=e.uuid,i=this._actionsByClip;for(var r in i){var n=i[r].actionByRoot,a=n[t];if(a!==undefined){this._deactivateAction(a);this._removeInactiveAction(a)}}var o=this._bindingsByRootAndName,s=o[t];if(s!==undefined){for(var l in s){var u=s[l];u.restoreOriginalState();this._removeInactiveBinding(u)}}},uncacheAction:function(e,t){var i=this.existingAction(e,t);if(i!==null){this._deactivateAction(i);this._removeInactiveAction(i)}}});function Ql(e){if(typeof e==="string"){console.warn("THREE.Uniform: Type parameter is no longer needed.");e=arguments[1]}this.value=e}Ql.prototype.clone=function(){return new Ql(this.value.clone===undefined?this.value:this.value.clone())};function Jl(){ua.call(this);this.type="InstancedBufferGeometry";this.maxInstancedCount=undefined}Jl.prototype=Object.assign(Object.create(ua.prototype),{constructor:Jl,isInstancedBufferGeometry:true,copy:function(e){ua.prototype.copy.call(this,e);this.maxInstancedCount=e.maxInstancedCount;return this},clone:function(){return(new this.constructor).copy(this)}});function eu(e,t,i,r){this.uuid=bt.generateUUID();this.data=e;this.itemSize=t;this.offset=i;this.normalized=r===true}Object.defineProperties(eu.prototype,{count:{get:function(){return this.data.count}},array:{get:function(){return this.data.array}}});Object.assign(eu.prototype,{isInterleavedBufferAttribute:true,setX:function(e,t){this.data.array[e*this.data.stride+this.offset]=t;return this},setY:function(e,t){this.data.array[e*this.data.stride+this.offset+1]=t;return this},setZ:function(e,t){this.data.array[e*this.data.stride+this.offset+2]=t;return this},setW:function(e,t){this.data.array[e*this.data.stride+this.offset+3]=t;return this},getX:function(e){return this.data.array[e*this.data.stride+this.offset]},getY:function(e){return this.data.array[e*this.data.stride+this.offset+1]},getZ:function(e){return this.data.array[e*this.data.stride+this.offset+2]},getW:function(e){return this.data.array[e*this.data.stride+this.offset+3]},setXY:function(e,t,i){e=e*this.data.stride+this.offset;this.data.array[e+0]=t;this.data.array[e+1]=i;return this},setXYZ:function(e,t,i,r){e=e*this.data.stride+this.offset;this.data.array[e+0]=t;this.data.array[e+1]=i;this.data.array[e+2]=r;return this},setXYZW:function(e,t,i,r,n){e=e*this.data.stride+this.offset;this.data.array[e+0]=t;this.data.array[e+1]=i;this.data.array[e+2]=r;this.data.array[e+3]=n;return this}});function tu(e,t){this.uuid=bt.generateUUID();this.array=e;this.stride=t;this.count=e!==undefined?e.length/t:0;this.dynamic=false;this.updateRange={offset:0,count:-1};this.onUploadCallback=function(){};this.version=0}Object.defineProperty(tu.prototype,"needsUpdate",{set:function(e){if(e===true)this.version++}});Object.assign(tu.prototype,{isInterleavedBuffer:true,setArray:function(e){if(Array.isArray(e)){throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.")}this.count=e!==undefined?e.length/this.stride:0;this.array=e},setDynamic:function(e){this.dynamic=e;return this},copy:function(e){this.array=new e.array.constructor(e.array);this.count=e.count;this.stride=e.stride;this.dynamic=e.dynamic;return this},copyAt:function(e,t,i){e*=this.stride;i*=t.stride;for(var r=0,n=this.stride;r<n;r++){this.array[e+r]=t.array[i+r]}return this},set:function(e,t){if(t===undefined)t=0;this.array.set(e,t);return this},clone:function(){return(new this.constructor).copy(this)},onUpload:function(e){this.onUploadCallback=e;return this}});function iu(e,t,i){tu.call(this,e,t);this.meshPerAttribute=i||1}iu.prototype=Object.assign(Object.create(tu.prototype),{constructor:iu,isInstancedInterleavedBuffer:true,copy:function(e){tu.prototype.copy.call(this,e);this.meshPerAttribute=e.meshPerAttribute;return this}});function ru(e,t,i){Kn.call(this,e,t);this.meshPerAttribute=i||1}ru.prototype=Object.assign(Object.create(Kn.prototype),{constructor:ru,isInstancedBufferAttribute:true,copy:function(e){Kn.prototype.copy.call(this,e);this.meshPerAttribute=e.meshPerAttribute;return this}});function nu(e,t,i,r){this.ray=new va(e,t);this.near=i||0;this.far=r||Infinity;this.params={Mesh:{},Line:{},LOD:{},Points:{threshold:1},Sprite:{}};Object.defineProperties(this.params,{PointCloud:{get:function(){console.warn("THREE.Raycaster: params.PointCloud has been renamed to params.Points.");return this.Points}}})}function au(e,t){return e.distance-t.distance}function ou(e,t,i,r){if(e.visible===false)return;e.raycast(t,i);if(r===true){var n=e.children;for(var a=0,o=n.length;a<o;a++){ou(n[a],t,i,true)}}}Object.assign(nu.prototype,{linePrecision:1,set:function(e,t){this.ray.set(e,t)},setFromCamera:function(e,t){if(t&&t.isPerspectiveCamera){this.ray.origin.setFromMatrixPosition(t.matrixWorld);this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize()}else if(t&&t.isOrthographicCamera){this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t)
;this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld)}else{console.error("THREE.Raycaster: Unsupported camera type.")}},intersectObject:function(e,t){var i=[];ou(e,this,i,t);i.sort(au);return i},intersectObjects:function(e,t){var i=[];if(Array.isArray(e)===false){console.warn("THREE.Raycaster.intersectObjects: objects is not an Array.");return i}for(var r=0,n=e.length;r<n;r++){ou(e[r],this,i,t)}i.sort(au);return i}});function su(e){this.autoStart=e!==undefined?e:true;this.startTime=0;this.oldTime=0;this.elapsedTime=0;this.running=false}Object.assign(su.prototype,{start:function(){this.startTime=(typeof performance==="undefined"?Date:performance).now();this.oldTime=this.startTime;this.elapsedTime=0;this.running=true},stop:function(){this.getElapsedTime();this.running=false;this.autoStart=false},getElapsedTime:function(){this.getDelta();return this.elapsedTime},getDelta:function(){var e=0;if(this.autoStart&&!this.running){this.start();return 0}if(this.running){var t=(typeof performance==="undefined"?Date:performance).now();e=(t-this.oldTime)/1e3;this.oldTime=t;this.elapsedTime+=e}return e}});function lu(e,t,i){this.radius=e!==undefined?e:1;this.phi=t!==undefined?t:0;this.theta=i!==undefined?i:0;return this}Object.assign(lu.prototype,{set:function(e,t,i){this.radius=e;this.phi=t;this.theta=i;return this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){this.radius=e.radius;this.phi=e.phi;this.theta=e.theta;return this},makeSafe:function(){var e=1e-6;this.phi=Math.max(e,Math.min(Math.PI-e,this.phi));return this},setFromVector3:function(e){this.radius=e.length();if(this.radius===0){this.theta=0;this.phi=0}else{this.theta=Math.atan2(e.x,e.z);this.phi=Math.acos(bt.clamp(e.y/this.radius,-1,1))}return this}});function uu(e,t,i){this.radius=e!==undefined?e:1;this.theta=t!==undefined?t:0;this.y=i!==undefined?i:0;return this}Object.assign(uu.prototype,{set:function(e,t,i){this.radius=e;this.theta=t;this.y=i;return this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){this.radius=e.radius;this.theta=e.theta;this.y=e.y;return this},setFromVector3:function(e){this.radius=Math.sqrt(e.x*e.x+e.z*e.z);this.theta=Math.atan2(e.x,e.z);this.y=e.y;return this}});function cu(e){jn.call(this);this.material=e;this.render=function(){}}cu.prototype=Object.create(jn.prototype);cu.prototype.constructor=cu;cu.prototype.isImmediateRenderObject=true;function hu(e,t,i,r){this.object=e;this.size=t!==undefined?t:1;var n=i!==undefined?i:16711680;var a=r!==undefined?r:1;var o=0;var s=this.object.geometry;if(s&&s.isGeometry){o=s.faces.length*3}else if(s&&s.isBufferGeometry){o=s.attributes.normal.count}var l=new ua;var u=new na(o*2*3,3);l.addAttribute("position",u);bo.call(this,l,new go({color:n,linewidth:a}));this.matrixAutoUpdate=false;this.update()}hu.prototype=Object.create(bo.prototype);hu.prototype.constructor=hu;hu.prototype.update=function(){var e=new Tt;var t=new Tt;var i=new Mt;return function r(){var n=["a","b","c"];this.object.updateMatrixWorld(true);i.getNormalMatrix(this.object.matrixWorld);var a=this.object.matrixWorld;var o=this.geometry.attributes.position;var s=this.object.geometry;if(s&&s.isGeometry){var l=s.vertices;var u=s.faces;var c=0;for(var h=0,f=u.length;h<f;h++){var d=u[h];for(var p=0,m=d.vertexNormals.length;p<m;p++){var v=l[d[n[p]]];var g=d.vertexNormals[p];e.copy(v).applyMatrix4(a);t.copy(g).applyMatrix3(i).normalize().multiplyScalar(this.size).add(e);o.setXYZ(c,e.x,e.y,e.z);c=c+1;o.setXYZ(c,t.x,t.y,t.z);c=c+1}}}else if(s&&s.isBufferGeometry){var y=s.attributes.position;var b=s.attributes.normal;var c=0;for(var p=0,m=y.count;p<m;p++){e.set(y.getX(p),y.getY(p),y.getZ(p)).applyMatrix4(a);t.set(b.getX(p),b.getY(p),b.getZ(p));t.applyMatrix3(i).normalize().multiplyScalar(this.size).add(e);o.setXYZ(c,e.x,e.y,e.z);c=c+1;o.setXYZ(c,t.x,t.y,t.z);c=c+1}}o.needsUpdate=true}}();function fu(e,t){jn.call(this);this.light=e;this.light.updateMatrixWorld();this.matrix=e.matrixWorld;this.matrixAutoUpdate=false;this.color=t;var i=new ua;var r=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(var n=0,a=1,o=32;n<o;n++,a++){var s=n/o*Math.PI*2;var l=a/o*Math.PI*2;r.push(Math.cos(s),Math.sin(s),1,Math.cos(l),Math.sin(l),1)}i.addAttribute("position",new na(r,3));var u=new go({fog:false});this.cone=new bo(i,u);this.add(this.cone);this.update()}fu.prototype=Object.create(jn.prototype);fu.prototype.constructor=fu;fu.prototype.dispose=function(){this.cone.geometry.dispose();this.cone.material.dispose()};fu.prototype.update=function(){var e=new Tt;var t=new Tt;return function i(){this.light.updateMatrixWorld();var r=this.light.distance?this.light.distance:1e3;var n=r*Math.tan(this.light.angle);this.cone.scale.set(n,n,r);e.setFromMatrixPosition(this.light.matrixWorld);t.setFromMatrixPosition(this.light.target.matrixWorld);this.cone.lookAt(t.sub(e));if(this.color!==undefined){this.cone.material.color.set(this.color)}else{this.cone.material.color.copy(this.light.color)}}}();function du(e){var t=[];if(e&&e.isBone){t.push(e)}for(var i=0;i<e.children.length;i++){t.push.apply(t,du(e.children[i]))}return t}function pu(e){var t=du(e);var i=new ua;var r=[];var n=[];var a=new _i(0,0,1);var o=new _i(0,1,0);for(var s=0;s<t.length;s++){var l=t[s];if(l.parent&&l.parent.isBone){r.push(0,0,0);r.push(0,0,0);n.push(a.r,a.g,a.b);n.push(o.r,o.g,o.b)}}i.addAttribute("position",new na(r,3));i.addAttribute("color",new na(n,3));var u=new go({vertexColors:_,depthTest:false,depthWrite:false,transparent:true});bo.call(this,i,u);this.root=e;this.bones=t;this.matrix=e.matrixWorld;this.matrixAutoUpdate=false}pu.prototype=Object.create(bo.prototype);pu.prototype.constructor=pu;pu.prototype.updateMatrixWorld=function(){var e=new Tt;var t=new xt;var i=new xt;return function r(n){var a=this.bones;var o=this.geometry;var s=o.getAttribute("position");i.getInverse(this.root.matrixWorld);for(var l=0,u=0;l<a.length;l++){var c=a[l];if(c.parent&&c.parent.isBone){t.multiplyMatrices(i,c.matrixWorld);e.setFromMatrixPosition(t);s.setXYZ(u,e.x,e.y,e.z);t.multiplyMatrices(i,c.parent.matrixWorld);e.setFromMatrixPosition(t);s.setXYZ(u+1,e.x,e.y,e.z);u+=2}}o.getAttribute("position").needsUpdate=true;jn.prototype.updateMatrixWorld.call(this,n)}}();function mu(e,t,i){this.light=e;this.light.updateMatrixWorld();this.color=i;var r=new Qo(t,4,2);var n=new pa({wireframe:true,fog:false});ba.call(this,r,n);this.matrix=this.light.matrixWorld;this.matrixAutoUpdate=false;this.update()}mu.prototype=Object.create(ba.prototype);mu.prototype.constructor=mu;mu.prototype.dispose=function(){this.geometry.dispose();this.material.dispose()};mu.prototype.update=function(){if(this.color!==undefined){this.material.color.set(this.color)}else{this.material.color.copy(this.light.color)}};function vu(e,t){jn.call(this);this.light=e;this.light.updateMatrixWorld();this.matrix=e.matrixWorld;this.matrixAutoUpdate=false;this.color=t;var i=new go({fog:false});var r=new ua;r.addAttribute("position",new Kn(new Float32Array(5*3),3));this.line=new yo(r,i);this.add(this.line);this.update()}vu.prototype=Object.create(jn.prototype);vu.prototype.constructor=vu;vu.prototype.dispose=function(){this.children[0].geometry.dispose();this.children[0].material.dispose()};vu.prototype.update=function(){var e=this.light.width*.5;var t=this.light.height*.5;var i=this.line.geometry.attributes.position;var r=i.array;r[0]=e;r[1]=-t;r[2]=0;r[3]=e;r[4]=t;r[5]=0;r[6]=-e;r[7]=t;r[8]=0;r[9]=-e;r[10]=-t;r[11]=0;r[12]=e;r[13]=-t;r[14]=0;i.needsUpdate=true;if(this.color!==undefined){this.line.material.color.set(this.color)}else{this.line.material.color.copy(this.light.color)}};function gu(e,t,i){jn.call(this);this.light=e;this.light.updateMatrixWorld();this.matrix=e.matrixWorld;this.matrixAutoUpdate=false;this.color=i;var r=new Bo(t);r.rotateY(Math.PI*.5);this.material=new pa({wireframe:true,fog:false});if(this.color===undefined)this.material.vertexColors=_;var n=r.getAttribute("position");var a=new Float32Array(n.count*3);r.addAttribute("color",new Kn(a,3));this.add(new ba(r,this.material));this.update()}gu.prototype=Object.create(jn.prototype);gu.prototype.constructor=gu;gu.prototype.dispose=function(){this.children[0].geometry.dispose();this.children[0].material.dispose()};gu.prototype.update=function(){var e=new Tt;var t=new _i;var i=new _i;return function r(){var n=this.children[0];if(this.color!==undefined){this.material.color.set(this.color)}else{var a=n.geometry.getAttribute("color");t.copy(this.light.color);i.copy(this.light.groundColor);for(var o=0,s=a.count;o<s;o++){var l=o<s/2?t:i;a.setXYZ(o,l.r,l.g,l.b)}a.needsUpdate=true}n.lookAt(e.setFromMatrixPosition(this.light.matrixWorld).negate())}}();function yu(e,t,i,r){e=e||10;t=t||10;i=new _i(i!==undefined?i:4473924);r=new _i(r!==undefined?r:8947848);var n=t/2;var a=e/t;var o=e/2;var s=[],l=[];for(var u=0,c=0,h=-o;u<=t;u++,h+=a){s.push(-o,0,h,o,0,h);s.push(h,0,-o,h,0,o);var f=u===n?i:r;f.toArray(l,c);c+=3;f.toArray(l,c);c+=3;f.toArray(l,c);c+=3;f.toArray(l,c);c+=3}var d=new ua;d.addAttribute("position",new na(s,3));d.addAttribute("color",new na(l,3));var p=new go({vertexColors:_});bo.call(this,d,p)}yu.prototype=Object.create(bo.prototype);yu.prototype.constructor=yu;function bu(e,t,i,r,n,a){e=e||10;t=t||16;i=i||8;r=r||64;n=new _i(n!==undefined?n:4473924);a=new _i(a!==undefined?a:8947848);var o=[];var s=[];var l,u;var c,h,f,d,p;for(h=0;h<=t;h++){c=h/t*(Math.PI*2);l=Math.sin(c)*e;u=Math.cos(c)*e;o.push(0,0,0);o.push(l,0,u);p=h&1?n:a;s.push(p.r,p.g,p.b);s.push(p.r,p.g,p.b)}for(h=0;h<=i;h++){p=h&1?n:a;d=e-e/i*h;for(f=0;f<r;f++){c=f/r*(Math.PI*2);l=Math.sin(c)*d;u=Math.cos(c)*d;o.push(l,0,u);s.push(p.r,p.g,p.b);c=(f+1)/r*(Math.PI*2);l=Math.sin(c)*d;u=Math.cos(c)*d;o.push(l,0,u);s.push(p.r,p.g,p.b)}}var m=new ua;m.addAttribute("position",new na(o,3));m.addAttribute("color",new na(s,3));var v=new go({vertexColors:_});bo.call(this,m,v)}bu.prototype=Object.create(bo.prototype);bu.prototype.constructor=bu;function _u(e,t,i,r){this.object=e;this.size=t!==undefined?t:1;var n=i!==undefined?i:16776960;var a=r!==undefined?r:1;var o=0;var s=this.object.geometry;if(s&&s.isGeometry){o=s.faces.length}else{console.warn("THREE.FaceNormalsHelper: only THREE.Geometry is supported. Use THREE.VertexNormalsHelper, instead.")}var l=new ua;var u=new na(o*2*3,3);l.addAttribute("position",u);bo.call(this,l,new go({color:n,linewidth:a}));this.matrixAutoUpdate=false;this.update()}_u.prototype=Object.create(bo.prototype);_u.prototype.constructor=_u;_u.prototype.update=function(){var e=new Tt;var t=new Tt;var i=new Mt;return function r(){this.object.updateMatrixWorld(true);i.getNormalMatrix(this.object.matrixWorld);var n=this.object.matrixWorld;var a=this.geometry.attributes.position;var o=this.object.geometry;var s=o.vertices;var l=o.faces;var u=0;for(var c=0,h=l.length;c<h;c++){var f=l[c];var d=f.normal;e.copy(s[f.a]).add(s[f.b]).add(s[f.c]).divideScalar(3).applyMatrix4(n);t.copy(d).applyMatrix3(i).normalize().multiplyScalar(this.size).add(e);a.setXYZ(u,e.x,e.y,e.z);u=u+1;a.setXYZ(u,t.x,t.y,t.z);u=u+1}a.needsUpdate=true}}();function xu(e,t,i){jn.call(this);this.light=e;this.light.updateMatrixWorld();this.matrix=e.matrixWorld;this.matrixAutoUpdate=false;this.color=i;if(t===undefined)t=1;var r=new ua;r.addAttribute("position",new na([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));var n=new go({fog:false});this.lightPlane=new yo(r,n);this.add(this.lightPlane);r=new ua;r.addAttribute("position",new na([0,0,0,0,0,1],3));this.targetLine=new yo(r,n);this.add(this.targetLine);this.update()}xu.prototype=Object.create(jn.prototype);xu.prototype.constructor=xu;xu.prototype.dispose=function(){this.lightPlane.geometry.dispose();this.lightPlane.material.dispose();this.targetLine.geometry.dispose();this.targetLine.material.dispose()};xu.prototype.update=function(){var e=new Tt;var t=new Tt;var i=new Tt;return function r(){e.setFromMatrixPosition(this.light.matrixWorld);t.setFromMatrixPosition(this.light.target.matrixWorld);i.subVectors(t,e);this.lightPlane.lookAt(i);if(this.color!==undefined){this.lightPlane.material.color.set(this.color);this.targetLine.material.color.set(this.color)}else{this.lightPlane.material.color.copy(this.light.color);this.targetLine.material.color.copy(this.light.color)}this.targetLine.lookAt(i);this.targetLine.scale.z=i.length()}}();function wu(e){var t=new ua;var i=new go({color:16777215,vertexColors:b});var r=[];var n=[];var a={};var o=new _i(16755200);var s=new _i(16711680);var l=new _i(43775);var u=new _i(16777215);var c=new _i(3355443);h("n1","n2",o);h("n2","n4",o);h("n4","n3",o);h("n3","n1",o);h("f1","f2",o);h("f2","f4",o);h("f4","f3",o);h("f3","f1",o);h("n1","f1",o);h("n2","f2",o);h("n3","f3",o);h("n4","f4",o);h("p","n1",s);h("p","n2",s);h("p","n3",s);h("p","n4",s);h("u1","u2",l);h("u2","u3",l);h("u3","u1",l);h("c","t",u);h("p","c",c);h("cn1","cn2",c);h("cn3","cn4",c);h("cf1","cf2",c);h("cf3","cf4",c);function h(e,t,i){f(e,i);f(t,i)}function f(e,t){r.push(0,0,0);n.push(t.r,t.g,t.b);if(a[e]===undefined){a[e]=[]}a[e].push(r.length/3-1)}t.addAttribute("position",new na(r,3));t.addAttribute("color",new na(n,3));bo.call(this,t,i);this.camera=e;if(this.camera.updateProjectionMatrix)this.camera.updateProjectionMatrix();this.matrix=e.matrixWorld;this.matrixAutoUpdate=false;this.pointMap=a;this.update()}wu.prototype=Object.create(bo.prototype);wu.prototype.constructor=wu;wu.prototype.update=function(){var e,t;var i=new Tt;var r=new Wn;function n(n,a,o,s){i.set(a,o,s).unproject(r);var l=t[n];if(l!==undefined){var u=e.getAttribute("position");for(var c=0,h=l.length;c<h;c++){u.setXYZ(l[c],i.x,i.y,i.z)}}}return function i(){e=this.geometry;t=this.pointMap;var a=1,o=1;r.projectionMatrix.copy(this.camera.projectionMatrix);n("c",0,0,-1);n("t",0,0,1);n("n1",-a,-o,-1);n("n2",a,-o,-1);n("n3",-a,o,-1);n("n4",a,o,-1);n("f1",-a,-o,1);n("f2",a,-o,1);n("f3",-a,o,1);n("f4",a,o,1);n("u1",a*.7,o*1.1,-1);n("u2",-a*.7,o*1.1,-1);n("u3",0,o*2,-1);n("cf1",-a,0,1);n("cf2",a,0,1);n("cf3",0,-o,1);n("cf4",0,o,1);n("cn1",-a,0,-1);n("cn2",a,0,-1);n("cn3",0,-o,-1);n("cn4",0,o,-1);e.getAttribute("position").needsUpdate=true}}();function Tu(e,t){this.object=e;if(t===undefined)t=16776960;var i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]);var r=new Float32Array(8*3);var n=new ua;n.setIndex(new Kn(i,1));n.addAttribute("position",new Kn(r,3));bo.call(this,n,new go({color:t}));this.matrixAutoUpdate=false;this.update()}Tu.prototype=Object.create(bo.prototype);Tu.prototype.constructor=Tu;Tu.prototype.update=function(){var e=new Bn;return function t(i){if(i!==undefined){console.warn("THREE.BoxHelper: .update() has no longer arguments.")}if(this.object!==undefined){e.setFromObject(this.object)}if(e.isEmpty())return;var r=e.min;var n=e.max;var a=this.geometry.attributes.position;var o=a.array;o[0]=n.x;o[1]=n.y;o[2]=n.z;o[3]=r.x;o[4]=n.y;o[5]=n.z;o[6]=r.x;o[7]=r.y;o[8]=n.z;o[9]=n.x;o[10]=r.y;o[11]=n.z;o[12]=n.x;o[13]=n.y;o[14]=r.z;o[15]=r.x;o[16]=n.y;o[17]=r.z;o[18]=r.x;o[19]=r.y;o[20]=r.z;o[21]=n.x;o[22]=r.y;o[23]=r.z;a.needsUpdate=true;this.geometry.computeBoundingSphere()}}();Tu.prototype.setFromObject=function(e){this.object=e;this.update();return this};function Mu(e,t){this.type="Box3Helper";this.box=e;var i=t!==undefined?t:16776960;var r=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]);var n=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1];var a=new ua;a.setIndex(new Kn(r,1));a.addAttribute("position",new na(n,3));bo.call(this,a,new go({color:i}));this.geometry.computeBoundingSphere()}Mu.prototype=Object.create(bo.prototype);Mu.prototype.constructor=Mu;Mu.prototype.updateMatrixWorld=function(e){var t=this.box;if(t.isEmpty())return;t.getCenter(this.position);t.getSize(this.scale);this.scale.multiplyScalar(.5);jn.prototype.updateMatrixWorld.call(this,e)};function Su(e,t,i){this.type="PlaneHelper";this.plane=e;this.size=t===undefined?1:t;var r=i!==undefined?i:16776960;var n=[1,-1,1,-1,1,1,-1,-1,1,1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,0,0,1,0,0,0];var a=new ua;a.addAttribute("position",new na(n,3));a.computeBoundingSphere();yo.call(this,a,new go({color:r}));var o=[1,1,1,-1,1,1,-1,-1,1,1,1,1,-1,-1,1,1,-1,1];var s=new ua;s.addAttribute("position",new na(o,3));s.computeBoundingSphere();this.add(new ba(s,new pa({color:r,opacity:.2,transparent:true,depthWrite:false})))}Su.prototype=Object.create(yo.prototype);Su.prototype.constructor=Su;Su.prototype.updateMatrixWorld=function(e){var t=-this.plane.constant;if(Math.abs(t)<1e-8)t=1e-8;this.scale.set(.5*this.size,.5*this.size,t);this.lookAt(this.plane.normal);jn.prototype.updateMatrixWorld.call(this,e)};var Eu;var Pu;function Au(e,t,i,r,n,a){jn.call(this);if(r===undefined)r=16776960;if(i===undefined)i=1;if(n===undefined)n=.2*i;if(a===undefined)a=.2*n;if(Eu===undefined){Eu=new ua;Eu.addAttribute("position",new na([0,0,0,0,1,0],3));Pu=new ss(0,.5,1,5,1);Pu.translate(0,-.5,0)}this.position.copy(t);this.line=new yo(Eu,new go({color:r}));this.line.matrixAutoUpdate=false;this.add(this.line);this.cone=new ba(Pu,new pa({color:r}));this.cone.matrixAutoUpdate=false;this.add(this.cone);this.setDirection(e);this.setLength(i,n,a)}Au.prototype=Object.create(jn.prototype);Au.prototype.constructor=Au;Au.prototype.setDirection=function(){var e=new Tt;var t;return function i(r){if(r.y>.99999){this.quaternion.set(0,0,0,1)}else if(r.y<-.99999){this.quaternion.set(1,0,0,0)}else{e.set(r.z,0,-r.x).normalize();t=Math.acos(r.y);this.quaternion.setFromAxisAngle(e,t)}}}();Au.prototype.setLength=function(e,t,i){if(t===undefined)t=.2*e;if(i===undefined)i=.2*t;this.line.scale.set(1,Math.max(0,e-t),1);this.line.updateMatrix();this.cone.scale.set(i,t,i);this.cone.position.y=e;this.cone.updateMatrix()};Au.prototype.setColor=function(e){this.line.material.color.copy(e);this.cone.material.color.copy(e)};function Cu(e){e=e||1;var t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e];var i=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1];var r=new ua;r.addAttribute("position",new na(t,3));r.addAttribute("color",new na(i,3));var n=new go({vertexColors:_});bo.call(this,r,n)}Cu.prototype=Object.create(bo.prototype);Cu.prototype.constructor=Cu;function Lu(){var e=0,t=0,i=0,r=0;function n(n,a,o,s){e=n;t=o;i=-3*n+3*a-2*o-s;r=2*n-2*a+o+s}return{initCatmullRom:function(e,t,i,r,a){n(t,i,a*(i-e),a*(r-t))},initNonuniformCatmullRom:function(e,t,i,r,a,o,s){var l=(t-e)/a-(i-e)/(a+o)+(i-t)/o;var u=(i-t)/o-(r-t)/(o+s)+(r-i)/s;l*=o;u*=o;n(t,i,l,u)},calc:function(n){var a=n*n;var o=a*n;return e+t*n+i*a+r*o}}}var Ru=new Tt;var Ou=new Lu;var Iu=new Lu;var Du=new Lu;function Bu(e,t,i,r){Ml.call(this);this.type="CatmullRomCurve3";this.points=e||[];this.closed=t||false;this.curveType=i||"centripetal";this.tension=r||.5}Bu.prototype=Object.create(Ml.prototype);Bu.prototype.constructor=Bu;Bu.prototype.isCatmullRomCurve3=true;Bu.prototype.getPoint=function(e,t){var i=t||new Tt;var r=this.points;var n=r.length;var a=(n-(this.closed?0:1))*e;var o=Math.floor(a);var s=a-o;if(this.closed){o+=o>0?0:(Math.floor(Math.abs(o)/r.length)+1)*r.length}else if(s===0&&o===n-1){o=n-2;s=1}var l,u,c,h;if(this.closed||o>0){l=r[(o-1)%n]}else{Ru.subVectors(r[0],r[1]).add(r[0]);l=Ru}u=r[o%n];c=r[(o+1)%n];if(this.closed||o+2<n){h=r[(o+2)%n]}else{Ru.subVectors(r[n-1],r[n-2]).add(r[n-1]);h=Ru}if(this.curveType==="centripetal"||this.curveType==="chordal"){var f=this.curveType==="chordal"?.5:.25;var d=Math.pow(l.distanceToSquared(u),f);var p=Math.pow(u.distanceToSquared(c),f);var m=Math.pow(c.distanceToSquared(h),f);if(p<1e-4)p=1;if(d<1e-4)d=p;if(m<1e-4)m=p;Ou.initNonuniformCatmullRom(l.x,u.x,c.x,h.x,d,p,m);Iu.initNonuniformCatmullRom(l.y,u.y,c.y,h.y,d,p,m);Du.initNonuniformCatmullRom(l.z,u.z,c.z,h.z,d,p,m)}else if(this.curveType==="catmullrom"){Ou.initCatmullRom(l.x,u.x,c.x,h.x,this.tension);Iu.initCatmullRom(l.y,u.y,c.y,h.y,this.tension);Du.initCatmullRom(l.z,u.z,c.z,h.z,this.tension)}i.set(Ou.calc(s),Iu.calc(s),Du.calc(s));return i};Bu.prototype.copy=function(e){Ml.prototype.copy.call(this,e);this.points=[];for(var t=0,i=e.points.length;t<i;t++){var r=e.points[t];this.points.push(r.clone())}this.closed=e.closed;this.curveType=e.curveType;this.tension=e.tension;return this};function Gu(e,t,i,r){Ml.call(this);this.type="CubicBezierCurve3";this.v0=e||new Tt;this.v1=t||new Tt;this.v2=i||new Tt;this.v3=r||new Tt}Gu.prototype=Object.create(Ml.prototype);Gu.prototype.constructor=Gu;Gu.prototype.isCubicBezierCurve3=true;Gu.prototype.getPoint=function(e,t){var i=t||new Tt;var r=this.v0,n=this.v1,a=this.v2,o=this.v3;i.set(Tl(e,r.x,n.x,a.x,o.x),Tl(e,r.y,n.y,a.y,o.y),Tl(e,r.z,n.z,a.z,o.z));return i};Gu.prototype.copy=function(e){Ml.prototype.copy.call(this,e);this.v0.copy(e.v0);this.v1.copy(e.v1);this.v2.copy(e.v2);this.v3.copy(e.v3);return this};function ku(e,t,i){Ml.call(this);this.type="QuadraticBezierCurve3";this.v0=e||new Tt;this.v1=t||new Tt;this.v2=i||new Tt}ku.prototype=Object.create(Ml.prototype);ku.prototype.constructor=ku;ku.prototype.isQuadraticBezierCurve3=true;ku.prototype.getPoint=function(e,t){var i=t||new Tt;var r=this.v0,n=this.v1,a=this.v2;i.set(yl(e,r.x,n.x,a.x),yl(e,r.y,n.y,a.y),yl(e,r.z,n.z,a.z));return i};ku.prototype.copy=function(e){Ml.prototype.copy.call(this,e);this.v0.copy(e.v0);this.v1.copy(e.v1);this.v2.copy(e.v2);return this};function Nu(e,t){Ml.call(this);this.type="LineCurve3";this.v1=e||new Tt;this.v2=t||new Tt}Nu.prototype=Object.create(Ml.prototype);Nu.prototype.constructor=Nu;Nu.prototype.isLineCurve3=true;Nu.prototype.getPoint=function(e,t){var i=t||new Tt;if(e===1){i.copy(this.v2)}else{i.copy(this.v2).sub(this.v1);i.multiplyScalar(e).add(this.v1)}return i};Nu.prototype.getPointAt=function(e,t){return this.getPoint(e,t)};Nu.prototype.copy=function(e){Ml.prototype.copy.call(this,e);this.v1.copy(e.v1);this.v2.copy(e.v2);return this};function Uu(e,t,i,r,n,a){Pl.call(this,e,t,i,i,r,n,a);this.type="ArcCurve"}Uu.prototype=Object.create(Pl.prototype);Uu.prototype.constructor=Uu;Uu.prototype.isArcCurve=true;var Fu={createMultiMaterialObject:function(e,t){var i=new To;for(var r=0,n=t.length;r<n;r++){i.add(new ba(e,t[r]))}return i},detach:function(e,t,i){e.applyMatrix(t.matrixWorld);t.remove(e);i.add(e)},attach:function(e,t,i){e.applyMatrix((new xt).getInverse(i.matrixWorld));t.remove(e);i.add(e)}};function Hu(e,t,i,r,n,a,o){console.warn("THREE.Face4 has been removed. A THREE.Face3 will be created instead.");return new Yn(e,t,i,n,a,o)}var zu=0;var Vu=1;function ju(e){console.warn("THREE.MeshFaceMaterial has been removed. Use an Array instead.");return e}function Wu(e){if(e===undefined)e=[];console.warn("THREE.MultiMaterial has been removed. Use an Array instead.");e.isMultiMaterial=true;e.materials=e;e.clone=function(){return e.slice()};return e}function Xu(e,t){console.warn("THREE.PointCloud has been renamed to THREE.Points.");return new wo(e,t)}function Yu(e){console.warn("THREE.Particle has been renamed to THREE.Sprite.");return new ho(e)}function qu(e,t){console.warn("THREE.ParticleSystem has been renamed to THREE.Points.");return new wo(e,t)}function Zu(e){console.warn("THREE.PointCloudMaterial has been renamed to THREE.PointsMaterial.");return new xo(e)}function Ku(e){console.warn("THREE.ParticleBasicMaterial has been renamed to THREE.PointsMaterial.");return new xo(e)}function $u(e){console.warn("THREE.ParticleSystemMaterial has been renamed to THREE.PointsMaterial.");return new xo(e)}function Qu(e,t,i){console.warn("THREE.Vertex has been removed. Use THREE.Vector3 instead.");return new Tt(e,t,i)}function Ju(e,t){console.warn("THREE.DynamicBufferAttribute has been removed. Use new THREE.BufferAttribute().setDynamic( true ) instead.");return new Kn(e,t).setDynamic(true)}function ec(e,t){console.warn("THREE.Int8Attribute has been removed. Use new THREE.Int8BufferAttribute() instead.");return new $n(e,t)}function tc(e,t){console.warn("THREE.Uint8Attribute has been removed. Use new THREE.Uint8BufferAttribute() instead.");return new Qn(e,t)}function ic(e,t){console.warn("THREE.Uint8ClampedAttribute has been removed. Use new THREE.Uint8ClampedBufferAttribute() instead.");return new Jn(e,t)}function rc(e,t){console.warn("THREE.Int16Attribute has been removed. Use new THREE.Int16BufferAttribute() instead.");return new ea(e,t)}function nc(e,t){console.warn("THREE.Uint16Attribute has been removed. Use new THREE.Uint16BufferAttribute() instead.");return new ta(e,t)}function ac(e,t){console.warn("THREE.Int32Attribute has been removed. Use new THREE.Int32BufferAttribute() instead.");return new ia(e,t)}function oc(e,t){console.warn("THREE.Uint32Attribute has been removed. Use new THREE.Uint32BufferAttribute() instead.");return new ra(e,t)}function sc(e,t){console.warn("THREE.Float32Attribute has been removed. Use new THREE.Float32BufferAttribute() instead.");return new na(e,t)}function lc(e,t){console.warn("THREE.Float64Attribute has been removed. Use new THREE.Float64BufferAttribute() instead.");return new aa(e,t)}Ml.create=function(e,t){console.log("THREE.Curve.create() has been deprecated");e.prototype=Object.create(Ml.prototype);e.prototype.constructor=e;e.prototype.getPoint=t;return e};Object.assign(El.prototype,{createPointsGeometry:function(e){console.warn("THREE.CurvePath: .createPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");var t=this.getPoints(e);return this.createGeometry(t)},createSpacedPointsGeometry:function(e){console.warn("THREE.CurvePath: .createSpacedPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");var t=this.getSpacedPoints(e);return this.createGeometry(t)},createGeometry:function(e){console.warn("THREE.CurvePath: .createGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");var t=new Zn;for(var i=0,r=e.length;i<r;i++){var n=e[i];t.vertices.push(new Tt(n.x,n.y,n.z||0))}return t}});Object.assign(Ol.prototype,{fromPoints:function(e){console.warn("THREE.Path: .fromPoints() has been renamed to .setFromPoints().");this.setFromPoints(e)}});function uc(e){console.warn("THREE.ClosedSplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead.");Bu.call(this,e);this.type="catmullrom";this.closed=true}uc.prototype=Object.create(Bu.prototype);function cc(e){console.warn("THREE.SplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead.");Bu.call(this,e);this.type="catmullrom"}cc.prototype=Object.create(Bu.prototype);function hc(e){console.warn("THREE.Spline has been removed. Use THREE.CatmullRomCurve3 instead.");Bu.call(this,e);this.type="catmullrom"}hc.prototype=Object.create(Bu.prototype);Object.assign(hc.prototype,{initFromArray:function(){console.error("THREE.Spline: .initFromArray() has been removed.")},getControlPointsArray:function(){console.error("THREE.Spline: .getControlPointsArray() has been removed.")},reparametrizeByArcLength:function(){console.error("THREE.Spline: .reparametrizeByArcLength() has been removed.")}});function fc(e){console.warn("THREE.AxisHelper has been renamed to THREE.AxesHelper.");return new Cu(e)}function dc(e,t){console.warn("THREE.BoundingBoxHelper has been deprecated. Creating a THREE.BoxHelper instead.");return new Tu(e,t)}function pc(e,t){console.warn("THREE.EdgesHelper has been removed. Use THREE.EdgesGeometry instead.");return new bo(new as(e.geometry),new go({color:t!==undefined?t:16777215}))}yu.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")};pu.prototype.update=function(){console.error("THREE.SkeletonHelper: update() no longer needs to be called.")};function mc(e,t){console.warn("THREE.WireframeHelper has been removed. Use THREE.WireframeGeometry instead.");return new bo(new Po(e.geometry),new go({color:t!==undefined?t:16777215}))}function vc(e){console.warn("THREE.XHRLoader has been renamed to THREE.FileLoader.");return new Ps(e)}function gc(e){console.warn("THREE.BinaryTextureLoader has been renamed to THREE.DataTextureLoader.");return new Cs(e)}Object.assign(Pn.prototype,{center:function(e){console.warn("THREE.Box2: .center() has been renamed to .getCenter().");return this.getCenter(e)},empty:function(){console.warn("THREE.Box2: .empty() has been renamed to .isEmpty().");return this.isEmpty()},isIntersectionBox:function(e){console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox().");return this.intersectsBox(e)},size:function(e){console.warn("THREE.Box2: .size() has been renamed to .getSize().");return this.getSize(e)}});Object.assign(Bn.prototype,{center:function(e){console.warn("THREE.Box3: .center() has been renamed to .getCenter().");return this.getCenter(e)},empty:function(){console.warn("THREE.Box3: .empty() has been renamed to .isEmpty().");return this.isEmpty()},isIntersectionBox:function(e){console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox().");return this.intersectsBox(e)},isIntersectionSphere:function(e){console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere().");return this.intersectsSphere(e)},size:function(e){console.warn("THREE.Box3: .size() has been renamed to .getSize().");return this.getSize(e)}});ga.prototype.center=function(e){console.warn("THREE.Line3: .center() has been renamed to .getCenter().");return this.getCenter(e)};Object.assign(bt,{random16:function(){console.warn("THREE.Math: .random16() has been deprecated. Use Math.random() instead.");return Math.random()},nearestPowerOfTwo:function(e){console.warn("THREE.Math: .nearestPowerOfTwo() has been renamed to .floorPowerOfTwo().");return bt.floorPowerOfTwo(e)},nextPowerOfTwo:function(e){console.warn("THREE.Math: .nextPowerOfTwo() has been renamed to .ceilPowerOfTwo().");return bt.ceilPowerOfTwo(e)}});Object.assign(Mt.prototype,{flattenToArrayOffset:function(e,t){console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead.");return this.toArray(e,t)},multiplyVector3:function(e){console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead.");return e.applyMatrix3(this)},multiplyVector3Array:function(){console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")},applyToBuffer:function(e){console.warn("THREE.Matrix3: .applyToBuffer() has been removed. Use matrix.applyToBufferAttribute( attribute ) instead.");return this.applyToBufferAttribute(e)},applyToVector3Array:function(){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")}});Object.assign(xt.prototype,{extractPosition:function(e){console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition().");return this.copyPosition(e)},flattenToArrayOffset:function(e,t){console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead.");return this.toArray(e,t)},getPosition:function(){var e;return function t(){if(e===undefined)e=new Tt;console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead.");return e.setFromMatrixColumn(this,3)}}(),setRotationFromQuaternion:function(e){console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion().");return this.makeRotationFromQuaternion(e)},multiplyToArray:function(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")},multiplyVector3:function(e){console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead.");return e.applyMatrix4(this)},multiplyVector4:function(e){console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead.");return e.applyMatrix4(this)},multiplyVector3Array:function(){console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")},rotateAxis:function(e){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead.");e.transformDirection(this)},crossVector:function(e){
console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead.");return e.applyMatrix4(this)},translate:function(){console.error("THREE.Matrix4: .translate() has been removed.")},rotateX:function(){console.error("THREE.Matrix4: .rotateX() has been removed.")},rotateY:function(){console.error("THREE.Matrix4: .rotateY() has been removed.")},rotateZ:function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")},rotateByAxis:function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")},applyToBuffer:function(e){console.warn("THREE.Matrix4: .applyToBuffer() has been removed. Use matrix.applyToBufferAttribute( attribute ) instead.");return this.applyToBufferAttribute(e)},applyToVector3Array:function(){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")},makeFrustum:function(e,t,i,r,n,a){console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead.");return this.makePerspective(e,t,r,i,n,a)}});kn.prototype.isIntersectionLine=function(e){console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine().");return this.intersectsLine(e)};wt.prototype.multiplyVector3=function(e){console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead.");return e.applyQuaternion(this)};Object.assign(va.prototype,{isIntersectionBox:function(e){console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox().");return this.intersectsBox(e)},isIntersectionPlane:function(e){console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane().");return this.intersectsPlane(e)},isIntersectionSphere:function(e){console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere().");return this.intersectsSphere(e)}});Object.assign(Il.prototype,{extractAllPoints:function(e){console.warn("THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead.");return this.extractPoints(e)},extrude:function(e){console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead.");return new Yo(this,e)},makeGeometry:function(e){console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead.");return new rs(this,e)}});Object.assign(_t.prototype,{fromAttribute:function(e,t,i){console.warn("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute().");return this.fromBufferAttribute(e,t,i)},distanceToManhattan:function(e){console.warn("THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo().");return this.manhattanDistanceTo(e)},lengthManhattan:function(){console.warn("THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength().");return this.manhattanLength()}});Object.assign(Tt.prototype,{setEulerFromRotationMatrix:function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},setEulerFromQuaternion:function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},getPositionFromMatrix:function(e){console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition().");return this.setFromMatrixPosition(e)},getScaleFromMatrix:function(e){console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale().");return this.setFromMatrixScale(e)},getColumnFromMatrix:function(e,t){console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn().");return this.setFromMatrixColumn(t,e)},applyProjection:function(e){console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead.");return this.applyMatrix4(e)},fromAttribute:function(e,t,i){console.warn("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute().");return this.fromBufferAttribute(e,t,i)},distanceToManhattan:function(e){console.warn("THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo().");return this.manhattanDistanceTo(e)},lengthManhattan:function(){console.warn("THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength().");return this.manhattanLength()}});Object.assign(Pt.prototype,{fromAttribute:function(e,t,i){console.warn("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute().");return this.fromBufferAttribute(e,t,i)},lengthManhattan:function(){console.warn("THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength().");return this.manhattanLength()}});Zn.prototype.computeTangents=function(){console.warn("THREE.Geometry: .computeTangents() has been removed.")};Object.assign(jn.prototype,{getChildByName:function(e){console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName().");return this.getObjectByName(e)},renderDepth:function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},translate:function(e,t){console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead.");return this.translateOnAxis(t,e)}});Object.defineProperties(jn.prototype,{eulerOrder:{get:function(){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order.");return this.rotation.order},set:function(e){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order.");this.rotation.order=e}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}});Object.defineProperties(fo.prototype,{objects:{get:function(){console.warn("THREE.LOD: .objects has been renamed to .levels.");return this.levels}}});Object.defineProperty(po.prototype,"useVertexTexture",{get:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")},set:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")}});Object.defineProperty(Ml.prototype,"__arcLengthDivisions",{get:function(){console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions.");return this.arcLengthDivisions},set:function(e){console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions.");this.arcLengthDivisions=e}});Ja.prototype.setLens=function(e,t){console.warn("THREE.PerspectiveCamera.setLens is deprecated. "+"Use .setFocalLength and .filmGauge for a photographic setup.");if(t!==undefined)this.filmGauge=t;this.setFocalLength(e)};Object.defineProperties(Is.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(e){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov.");this.shadow.camera.fov=e}},shadowCameraLeft:{set:function(e){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left.");this.shadow.camera.left=e}},shadowCameraRight:{set:function(e){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right.");this.shadow.camera.right=e}},shadowCameraTop:{set:function(e){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top.");this.shadow.camera.top=e}},shadowCameraBottom:{set:function(e){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom.");this.shadow.camera.bottom=e}},shadowCameraNear:{set:function(e){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near.");this.shadow.camera.near=e}},shadowCameraFar:{set:function(e){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far.");this.shadow.camera.far=e}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(e){console.warn("THREE.Light: .shadowBias is now .shadow.bias.");this.shadow.bias=e}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(e){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width.");this.shadow.mapSize.width=e}},shadowMapHeight:{set:function(e){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height.");this.shadow.mapSize.height=e}}});Object.defineProperties(Kn.prototype,{length:{get:function(){console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead.");return this.array.length}}});Object.assign(ua.prototype,{addIndex:function(e){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex().");this.setIndex(e)},addDrawCall:function(e,t,i){if(i!==undefined){console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset.")}console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup().");this.addGroup(e,t)},clearDrawCalls:function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups().");this.clearGroups()},computeTangents:function(){console.warn("THREE.BufferGeometry: .computeTangents() has been removed.")},computeOffsets:function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")}});Object.defineProperties(ua.prototype,{drawcalls:{get:function(){console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups.");return this.groups}},offsets:{get:function(){console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups.");return this.groups}}});Object.defineProperties(Ql.prototype,{dynamic:{set:function(){console.warn("THREE.Uniform: .dynamic has been removed. Use object.onBeforeRender() instead.")}},onUpdate:{value:function(){console.warn("THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead.");return this}}});Object.defineProperties(On.prototype,{wrapAround:{get:function(){console.warn("THREE.Material: .wrapAround has been removed.")},set:function(){console.warn("THREE.Material: .wrapAround has been removed.")}},wrapRGB:{get:function(){console.warn("THREE.Material: .wrapRGB has been removed.");return new _i}},shading:{get:function(){console.error("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.")},set:function(e){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.");this.flatShading=e===v}}});Object.defineProperties(gs.prototype,{metal:{get:function(){console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead.");return false},set:function(){console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead")}}});Object.defineProperties(ma.prototype,{derivatives:{get:function(){console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives.");return this.extensions.derivatives},set:function(e){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives.");this.extensions.derivatives=e}}});Object.assign(ao.prototype,{getCurrentRenderTarget:function(){console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget().");return this.getRenderTarget()},getMaxAnisotropy:function(){console.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy().");return this.capabilities.getMaxAnisotropy()},getPrecision:function(){console.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision.");return this.capabilities.precision},resetGLState:function(){console.warn("THREE.WebGLRenderer: .resetGLState() is now .state.reset().");return this.state.reset()},supportsFloatTextures:function(){console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' ).");return this.extensions.get("OES_texture_float")},supportsHalfFloatTextures:function(){console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' ).");return this.extensions.get("OES_texture_half_float")},supportsStandardDerivatives:function(){console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' ).");return this.extensions.get("OES_standard_derivatives")},supportsCompressedTextureS3TC:function(){console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' ).");return this.extensions.get("WEBGL_compressed_texture_s3tc")},supportsCompressedTexturePVRTC:function(){console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' ).");return this.extensions.get("WEBGL_compressed_texture_pvrtc")},supportsBlendMinMax:function(){console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' ).");return this.extensions.get("EXT_blend_minmax")},supportsVertexTextures:function(){console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures.");return this.capabilities.vertexTextures},supportsInstancedArrays:function(){console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' ).");return this.extensions.get("ANGLE_instanced_arrays")},enableScissorTest:function(e){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest().");this.setScissorTest(e)},initMaterial:function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},addPrePlugin:function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},addPostPlugin:function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},updateShadowMap:function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")}});Object.defineProperties(ao.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(e){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled.");this.shadowMap.enabled=e}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(e){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type.");this.shadowMap.type=e}},shadowMapCullFace:{get:function(){return this.shadowMap.cullFace},set:function(e){console.warn("THREE.WebGLRenderer: .shadowMapCullFace is now .shadowMap.cullFace.");this.shadowMap.cullFace=e}}});Object.defineProperties(Un.prototype,{cullFace:{get:function(){return this.renderReverseSided?o:a},set:function(e){var t=e!==a;console.warn("WebGLRenderer: .shadowMap.cullFace is deprecated. Set .shadowMap.renderReverseSided to "+t+".");this.renderReverseSided=t}}});Object.defineProperties(At.prototype,{wrapS:{get:function(){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS.");return this.texture.wrapS},set:function(e){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS.");this.texture.wrapS=e}},wrapT:{get:function(){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT.");return this.texture.wrapT},set:function(e){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT.");this.texture.wrapT=e}},magFilter:{get:function(){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter.");return this.texture.magFilter},set:function(e){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter.");this.texture.magFilter=e}},minFilter:{get:function(){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter.");return this.texture.minFilter},set:function(e){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter.");this.texture.minFilter=e}},anisotropy:{get:function(){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy.");return this.texture.anisotropy},set:function(e){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy.");this.texture.anisotropy=e}},offset:{get:function(){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset.");return this.texture.offset},set:function(e){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset.");this.texture.offset=e}},repeat:{get:function(){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat.");return this.texture.repeat},set:function(e){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat.");this.texture.repeat=e}},format:{get:function(){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format.");return this.texture.format},set:function(e){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format.");this.texture.format=e}},type:{get:function(){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type.");return this.texture.type},set:function(e){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type.");this.texture.type=e}},generateMipmaps:{get:function(){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps.");return this.texture.generateMipmaps},set:function(e){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps.");this.texture.generateMipmaps=e}}});Vl.prototype.load=function(e){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");var t=this;var i=new Ul;i.load(e,function(e){t.setBuffer(e)});return this};Wl.prototype.getData=function(){console.warn("THREE.AudioAnalyser: .getData() is now .getFrequencyData().");return this.getFrequencyData()};Hl.prototype.updateCubeMap=function(e,t){console.warn("THREE.CubeCamera: .updateCubeMap() is now .update().");return this.update(e,t)};var yc={merge:function(e,t,i){console.warn("THREE.GeometryUtils: .merge() has been moved to Geometry. Use geometry.merge( geometry2, matrix, materialIndexOffset ) instead.");var r;if(t.isMesh){t.matrixAutoUpdate&&t.updateMatrix();r=t.matrix;t=t.geometry}e.merge(t,r,i)},center:function(e){console.warn("THREE.GeometryUtils: .center() has been moved to Geometry. Use geometry.center() instead.");return e.center()}};var bc={crossOrigin:undefined,loadTexture:function(e,t,i,r){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");var n=new Os;n.setCrossOrigin(this.crossOrigin);var a=n.load(e,i,undefined,r);if(t)a.mapping=t;return a},loadTextureCube:function(e,t,i,r){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");var n=new Rs;n.setCrossOrigin(this.crossOrigin);var a=n.load(e,i,undefined,r);if(t)a.mapping=t;return a},loadCompressedTexture:function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")},loadCompressedTextureCube:function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")}};function _c(){console.error("THREE.Projector has been moved to /examples/js/renderers/Projector.js.");this.projectVector=function(e,t){console.warn("THREE.Projector: .projectVector() is now vector.project().");e.project(t)};this.unprojectVector=function(e,t){console.warn("THREE.Projector: .unprojectVector() is now vector.unproject().");e.unproject(t)};this.pickingRay=function(){console.error("THREE.Projector: .pickingRay() is now raycaster.setFromCamera().")}}function xc(){console.error("THREE.CanvasRenderer has been moved to /examples/js/renderers/CanvasRenderer.js");this.domElement=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");this.clear=function(){};this.render=function(){};this.setClearColor=function(){};this.setSize=function(){}}e.WebGLRenderTargetCube=Ct;e.WebGLRenderTarget=At;e.WebGLRenderer=ao;e.ShaderLib=En;e.UniformsLib=xi;e.UniformsUtils=wi;e.ShaderChunk=Sn;e.FogExp2=oo;e.Fog=so;e.Scene=lo;e.LensFlare=uo;e.Sprite=ho;e.LOD=fo;e.SkinnedMesh=vo;e.Skeleton=po;e.Bone=mo;e.Mesh=ba;e.LineSegments=bo;e.LineLoop=_o;e.Line=yo;e.Points=wo;e.Group=To;e.VideoTexture=Mo;e.DataTexture=Lt;e.CompressedTexture=So;e.CubeTexture=Rt;e.CanvasTexture=Cn;e.DepthTexture=Eo;e.Texture=Et;e.CompressedTextureLoader=As;e.DataTextureLoader=Cs;e.CubeTextureLoader=Rs;e.TextureLoader=Os;e.ObjectLoader=cl;e.MaterialLoader=al;e.BufferGeometryLoader=ol;e.DefaultLoadingManager=Ss;e.LoadingManager=Ms;e.JSONLoader=ul;e.ImageLoader=Ls;e.FontLoader=Gl;e.FileLoader=Ps;e.Loader=ll;e.Cache=Ts;e.AudioLoader=Ul;e.SpotLightShadow=Gs;e.SpotLight=ks;e.PointLight=Ns;e.RectAreaLight=zs;e.HemisphereLight=Ds;e.DirectionalLightShadow=Us;e.DirectionalLight=Fs;e.AmbientLight=Hs;e.LightShadow=Bs;e.Light=Is;e.StereoCamera=Fl;e.PerspectiveCamera=Ja;e.OrthographicCamera=Xn;e.CubeCamera=Hl;e.ArrayCamera=eo;e.Camera=Wn;e.AudioListener=zl;e.PositionalAudio=jl;e.AudioContext=Nl;e.AudioAnalyser=Wl;e.Audio=Vl;e.VectorKeyframeTrack=Ks;e.StringKeyframeTrack=el;e.QuaternionKeyframeTrack=Qs;e.NumberKeyframeTrack=Js;e.ColorKeyframeTrack=il;e.BooleanKeyframeTrack=tl;e.PropertyMixer=Xl;e.PropertyBinding=ql;e.KeyframeTrack=rl;e.AnimationUtils=Vs;e.AnimationObjectGroup=Zl;e.AnimationMixer=$l;e.AnimationClip=nl;e.Uniform=Ql;e.InstancedBufferGeometry=Jl;e.BufferGeometry=ua;e.Geometry=Zn;e.InterleavedBufferAttribute=eu;e.InstancedInterleavedBuffer=iu;e.InterleavedBuffer=tu;e.InstancedBufferAttribute=ru;e.Face3=Yn;e.Object3D=jn;e.Raycaster=nu;e.Layers=zn;e.EventDispatcher=t;e.Clock=su;e.QuaternionLinearInterpolant=$s;e.LinearInterpolant=Xs;e.DiscreteInterpolant=Ys;e.CubicInterpolant=Ws;e.Interpolant=js;e.Triangle=ya;e.Math=bt;e.Spherical=lu;e.Cylindrical=uu;e.Plane=kn;e.Frustum=Nn;e.Sphere=Gn;e.Ray=va;e.Matrix4=xt;e.Matrix3=Mt;e.Box3=Bn;e.Box2=Pn;e.Line3=ga;e.Euler=Hn;e.Vector4=Pt;e.Vector3=Tt;e.Vector2=_t;e.Quaternion=wt;e.Color=_i;e.ImmediateRenderObject=cu;e.VertexNormalsHelper=hu;e.SpotLightHelper=fu;e.SkeletonHelper=pu;e.PointLightHelper=mu;e.RectAreaLightHelper=vu;e.HemisphereLightHelper=gu;e.GridHelper=yu;e.PolarGridHelper=bu;e.FaceNormalsHelper=_u;e.DirectionalLightHelper=xu;e.CameraHelper=wu;e.BoxHelper=Tu;e.Box3Helper=Mu;e.PlaneHelper=Su;e.ArrowHelper=Au;e.AxesHelper=Cu;e.CatmullRomCurve3=Bu;e.CubicBezierCurve3=Gu;e.QuadraticBezierCurve3=ku;e.LineCurve3=Nu;e.ArcCurve=Uu;e.EllipseCurve=Pl;e.SplineCurve=Al;e.CubicBezierCurve=Cl;e.QuadraticBezierCurve=Ll;e.LineCurve=Sl;e.Shape=Il;e.Path=Ol;e.ShapePath=Dl;e.Font=Bl;e.CurvePath=El;e.Curve=Ml;e.ShapeUtils=Xo;e.SceneUtils=Fu;e.WebGLUtils=no;e.WireframeGeometry=Po;e.ParametricGeometry=Ao;e.ParametricBufferGeometry=Co;e.TetrahedronGeometry=Oo;e.TetrahedronBufferGeometry=Io;e.OctahedronGeometry=Do;e.OctahedronBufferGeometry=Bo;e.IcosahedronGeometry=Go;e.IcosahedronBufferGeometry=ko;e.DodecahedronGeometry=No;e.DodecahedronBufferGeometry=Uo;e.PolyhedronGeometry=Lo;e.PolyhedronBufferGeometry=Ro;e.TubeGeometry=Fo;e.TubeBufferGeometry=Ho;e.TorusKnotGeometry=zo;e.TorusKnotBufferGeometry=Vo;e.TorusGeometry=jo;e.TorusBufferGeometry=Wo;e.TextGeometry=Zo;e.TextBufferGeometry=Ko;e.SphereGeometry=$o;e.SphereBufferGeometry=Qo;e.RingGeometry=Jo;e.RingBufferGeometry=es;e.PlaneGeometry=fa;e.PlaneBufferGeometry=da;e.LatheGeometry=ts;e.LatheBufferGeometry=is;e.ShapeGeometry=rs;e.ShapeBufferGeometry=ns;e.ExtrudeGeometry=Yo;e.ExtrudeBufferGeometry=qo;e.EdgesGeometry=as;e.ConeGeometry=ls;e.ConeBufferGeometry=us;e.CylinderGeometry=os;e.CylinderBufferGeometry=ss;e.CircleGeometry=cs;e.CircleBufferGeometry=hs;e.BoxGeometry=ca;e.BoxBufferGeometry=ha;e.ShadowMaterial=ds;e.SpriteMaterial=co;e.RawShaderMaterial=ps;e.ShaderMaterial=ma;e.PointsMaterial=xo;e.MeshPhysicalMaterial=vs;e.MeshStandardMaterial=ms;e.MeshPhongMaterial=gs;e.MeshToonMaterial=ys;e.MeshNormalMaterial=bs;e.MeshLambertMaterial=_s;e.MeshDepthMaterial=In;e.MeshDistanceMaterial=Dn;e.MeshBasicMaterial=pa;e.LineDashedMaterial=xs;e.LineBasicMaterial=go;e.Material=On;e.Float64BufferAttribute=aa;e.Float32BufferAttribute=na;e.Uint32BufferAttribute=ra;e.Int32BufferAttribute=ia;e.Uint16BufferAttribute=ta;e.Int16BufferAttribute=ea;e.Uint8ClampedBufferAttribute=Jn;e.Uint8BufferAttribute=Qn;e.Int8BufferAttribute=$n;e.BufferAttribute=Kn;e.REVISION=i;e.MOUSE=r;e.CullFaceNone=n;e.CullFaceBack=a;e.CullFaceFront=o;e.CullFaceFrontBack=s;e.FrontFaceDirectionCW=l;e.FrontFaceDirectionCCW=u;e.BasicShadowMap=c;e.PCFShadowMap=h;e.PCFSoftShadowMap=f;e.FrontSide=d;e.BackSide=p;e.DoubleSide=m;e.FlatShading=v;e.SmoothShading=g;e.NoColors=y;e.FaceColors=b;e.VertexColors=_;e.NoBlending=x;e.NormalBlending=w;e.AdditiveBlending=T;e.SubtractiveBlending=M;e.MultiplyBlending=S;e.CustomBlending=E;e.AddEquation=P;e.SubtractEquation=A;e.ReverseSubtractEquation=C;e.MinEquation=L;e.MaxEquation=R;e.ZeroFactor=O;e.OneFactor=I;e.SrcColorFactor=D;e.OneMinusSrcColorFactor=B;e.SrcAlphaFactor=G;e.OneMinusSrcAlphaFactor=k;e.DstAlphaFactor=N;e.OneMinusDstAlphaFactor=U;e.DstColorFactor=F;e.OneMinusDstColorFactor=H;e.SrcAlphaSaturateFactor=z;e.NeverDepth=V;e.AlwaysDepth=j;e.LessDepth=W;e.LessEqualDepth=X;e.EqualDepth=Y;e.GreaterEqualDepth=q;e.GreaterDepth=Z;e.NotEqualDepth=K;e.MultiplyOperation=$;e.MixOperation=Q;e.AddOperation=J;e.NoToneMapping=ee;e.LinearToneMapping=te;e.ReinhardToneMapping=ie;e.Uncharted2ToneMapping=re;e.CineonToneMapping=ne;e.UVMapping=ae;e.CubeReflectionMapping=oe;e.CubeRefractionMapping=se;e.EquirectangularReflectionMapping=le;e.EquirectangularRefractionMapping=ue;e.SphericalReflectionMapping=ce;e.CubeUVReflectionMapping=he;e.CubeUVRefractionMapping=fe;e.RepeatWrapping=de;e.ClampToEdgeWrapping=pe;e.MirroredRepeatWrapping=me;e.NearestFilter=ve;e.NearestMipMapNearestFilter=ge;e.NearestMipMapLinearFilter=ye;e.LinearFilter=be;e.LinearMipMapNearestFilter=_e;e.LinearMipMapLinearFilter=xe;e.UnsignedByteType=we;e.ByteType=Te;e.ShortType=Me;e.UnsignedShortType=Se;e.IntType=Ee;e.UnsignedIntType=Pe;e.FloatType=Ae;e.HalfFloatType=Ce;e.UnsignedShort4444Type=Le;e.UnsignedShort5551Type=Re;e.UnsignedShort565Type=Oe;e.UnsignedInt248Type=Ie;e.AlphaFormat=De;e.RGBFormat=Be;e.RGBAFormat=Ge;e.LuminanceFormat=ke;e.LuminanceAlphaFormat=Ne;e.RGBEFormat=Ue;e.DepthFormat=Fe;e.DepthStencilFormat=He;e.RGB_S3TC_DXT1_Format=ze;e.RGBA_S3TC_DXT1_Format=Ve;e.RGBA_S3TC_DXT3_Format=je;e.RGBA_S3TC_DXT5_Format=We;e.RGB_PVRTC_4BPPV1_Format=Xe;e.RGB_PVRTC_2BPPV1_Format=Ye;e.RGBA_PVRTC_4BPPV1_Format=qe;e.RGBA_PVRTC_2BPPV1_Format=Ze;e.RGB_ETC1_Format=Ke;e.LoopOnce=$e;e.LoopRepeat=Qe;e.LoopPingPong=Je;e.InterpolateDiscrete=et;e.InterpolateLinear=tt;e.InterpolateSmooth=it;e.ZeroCurvatureEnding=rt;e.ZeroSlopeEnding=nt;e.WrapAroundEnding=at;e.TrianglesDrawMode=ot;e.TriangleStripDrawMode=st;e.TriangleFanDrawMode=lt;e.LinearEncoding=ut;e.sRGBEncoding=ct;e.GammaEncoding=ht;e.RGBEEncoding=ft;e.LogLuvEncoding=dt;e.RGBM7Encoding=pt;e.RGBM16Encoding=mt;e.RGBDEncoding=vt;e.BasicDepthPacking=gt;e.RGBADepthPacking=yt;e.CubeGeometry=ca;e.Face4=Hu;e.LineStrip=zu;e.LinePieces=Vu;e.MeshFaceMaterial=ju;e.MultiMaterial=Wu;e.PointCloud=Xu;e.Particle=Yu;e.ParticleSystem=qu;e.PointCloudMaterial=Zu;e.ParticleBasicMaterial=Ku;e.ParticleSystemMaterial=$u;e.Vertex=Qu;e.DynamicBufferAttribute=Ju;e.Int8Attribute=ec;e.Uint8Attribute=tc;e.Uint8ClampedAttribute=ic;e.Int16Attribute=rc;e.Uint16Attribute=nc;e.Int32Attribute=ac;e.Uint32Attribute=oc;e.Float32Attribute=sc;e.Float64Attribute=lc;e.ClosedSplineCurve3=uc;e.SplineCurve3=cc;e.Spline=hc;e.AxisHelper=fc;e.BoundingBoxHelper=dc;e.EdgesHelper=pc;e.WireframeHelper=mc;e.XHRLoader=vc;e.BinaryTextureLoader=gc;e.GeometryUtils=yc;e.ImageUtils=bc;e.Projector=_c;e.CanvasRenderer=xc;Object.defineProperty(e,"__esModule",{value:true})})},{}],28:[function(e,t,i){var r=e("process/browser.js").nextTick;var n=Function.prototype.apply;var a=Array.prototype.slice;var o={};var s=0;i.setTimeout=function(){return new l(n.call(setTimeout,window,arguments),clearTimeout)};i.setInterval=function(){return new l(n.call(setInterval,window,arguments),clearInterval)};i.clearTimeout=i.clearInterval=function(e){e.close()};function l(e,t){this._id=e;this._clearFn=t}l.prototype.unref=l.prototype.ref=function(){};l.prototype.close=function(){this._clearFn.call(window,this._id)};i.enroll=function(e,t){clearTimeout(e._idleTimeoutId);e._idleTimeout=t};i.unenroll=function(e){clearTimeout(e._idleTimeoutId);e._idleTimeout=-1};i._unrefActive=i.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;if(t>=0){e._idleTimeoutId=setTimeout(function t(){if(e._onTimeout)e._onTimeout()},t)}};i.setImmediate=typeof setImmediate==="function"?setImmediate:function(e){var t=s++;var n=arguments.length<2?false:a.call(arguments,1);o[t]=true;r(function r(){if(o[t]){if(n){e.apply(null,n)}else{e.call(null)}i.clearImmediate(t)}});return t};i.clearImmediate=typeof clearImmediate==="function"?clearImmediate:function(e){delete o[e]}},{"process/browser.js":22}],29:[function(e,t,i){"use strict";var r=e("parse-unit");t.exports=s;var n=96;function a(e,t){var i=r(getComputedStyle(e).getPropertyValue(t));return i[0]*s(i[1],e)}function o(e,t){var i=document.createElement("div");i.style["font-size"]="128"+e;t.appendChild(i);var r=a(i,"font-size")/128;t.removeChild(i);return r}function s(e,t){t=t||document.body;e=(e||"px").trim().toLowerCase();if(t===window||t===document){t=document.body}switch(e){case"%":return t.clientHeight/100;case"ch":case"ex":return o(e,t);case"em":return a(t,"font-size");case"rem":return a(document.body,"font-size");case"vw":return window.innerWidth/100;case"vh":return window.innerHeight/100;case"vmin":return Math.min(window.innerWidth,window.innerHeight)/100;case"vmax":return Math.max(window.innerWidth,window.innerHeight)/100;case"in":return n;case"cm":return n/2.54;case"mm":return n/25.4;case"pt":return n/72;case"pc":return n/6}return 1}},{"parse-unit":21}],30:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:true});var r=e("mobile-detect");var n=u(r);var a=e("./desktop");var o=u(a);var s=e("./mobile");var l=u(s);function u(e){return e&&e.__esModule?e:{default:e}}window.IS_MOBILE=!(new n.default(window.navigator.userAgent).mobile()===null);var c=window.IS_MOBILE?l.default:o.default;c.isMobile=window.IS_MOBILE;i.default=c},{"./desktop":31,"./mobile":32,"mobile-detect":18}],31:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:true});var r={gscene:{distance:320,maxBranchSize:160},generalPass:{brightness:.1,vignetteFallOff:.15,vignetteAmount:.6}};i.default=r},{}],32:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:true});var r=e("./desktop");var n=a(r);function a(e){return e&&e.__esModule?e:{default:e}}var o={gscene:{distance:500,maxBranchSize:60},generalPass:{brightness:n.default.generalPass.brightness,vignetteFallOff:n.default.generalPass.vignetteFallOff,vignetteAmount:n.default.generalPass.vignetteAmount}};i.default=o},{"./desktop":31}],33:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:true});var r=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r)r.writable=true;Object.defineProperty(e,r.key,r)}}return function(t,i,r){if(i)e(t.prototype,i);if(r)e(t,r);return t}}();var n=e("./OrbitControls");var a=c(n);var o=e("brindille-resize");var s=c(o);var l=e("../config/config");var u=c(l);function c(e){return e&&e.__esModule?e:{default:e}}function h(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var f=function(){function e(t,i){var r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;h(this,e);this.onMouseMove=this.onMouseMove.bind(this);this.onOrientationChange=this.onOrientationChange.bind(this);this.debug=r;this.autoMode=false;this.enableManual=true;this.distance=u.default.gscene.distance;if(this.debug){this.engine=new a.default(t,{element:i,distance:this.distance})}else{this.engine=new a.default(t,{element:i,parent:i,damping:.05,distance:this.distance,phi:Math.PI*.5,phiBounds:[Math.PI*.4,Math.PI*.6],thetaBounds:[-Math.PI*.1,Math.PI*.1],
distanceBounds:[this.distance-20,this.distance+20],zoom:true})}this.engine.rotateTo(-.03665,1.9446);this.phi=this.engine.phi;this.theta=this.engine.phi;this.mouseY=.5;this.mouseX=.5;if(IS_MOBILE){window.addEventListener("orientationchange",this.onOrientationChange,false);this.onOrientationChange()}else{window.addEventListener("mousemove",this.onMouseMove)}}r(e,[{key:"setAutoMode",value:function e(t){this.autoMode=t;if(t){this.theta=this.engine.theta}}},{key:"onOrientationChange",value:function e(t){if(t&&t.gamma)this.mouseX=t.gamma;if(t&&t.alpha)this.mouseY=t.alpha}},{key:"onMouseMove",value:function e(t){this.mouseY=t.clientY/s.default.height;this.mouseX=t.clientX/s.default.width}},{key:"update",value:function e(){if(this.enableManual){this.engine.update()}if(this.debug)return;if(this.enableManual){this.phi+=(this.mouseY*(this.engine.phiBounds[1]-this.engine.phiBounds[0])+this.engine.phiBounds[0]-this.phi)*.1;this.theta+=(this.mouseX*(this.engine.thetaBounds[1]-this.engine.thetaBounds[0])+this.engine.thetaBounds[0]-this.theta)*.1}this.engine.rotateTo(this.autoMode?this.theta:this.theta,this.phi)}}]);return e}();i.default=f},{"../config/config":30,"./OrbitControls":34,"brindille-resize":8}],34:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:true});var r=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r)r.writable=true;Object.defineProperty(e,r.key,r)}}return function(t,i,r){if(i)e(t.prototype,i);if(r)e(t,r);return t}}();var n=e("three");var a=e("mouse-event-offset");var o=h(a);var s=e("mouse-wheel");var l=h(s);var u=e("clamp");var c=h(u);function h(e){return e&&e.__esModule?e:{default:e}}function f(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var d=new n.Vector3(0,1,0);var p=1e-10;var m=function(){function e(t){var i=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};f(this,e);this.onInputDown=this.onInputDown.bind(this);this.onInputMove=this.onInputMove.bind(this);this.onInputUp=this.onInputUp.bind(this);this.handleZoom=this.handleZoom.bind(this);this.preventDefault=this.preventDefault.bind(this);this.update=this.update.bind(this);this.object=t;this.inputDelta=new n.Vector3;this.offset=new n.Vector3;this.upQuat=new n.Quaternion;this.upQuatInverse=new n.Quaternion;this.enabled=true;this.target=i.target||new n.Vector3;this.distance=i.distance||1;this.damping=i.damping||.25;this.rotateSpeed=i.rotateSpeed||.28;this.zoomSpeed=i.zoomSpeed||.0075;this.rotate=i.rotate!==false;this.zoom=i.zoom!==false;this._theta=i.theta||0;this._phi=i.phi||Math.PI*.5;this.phiBounds=i.phiBounds||[0,Math.PI];this.thetaBounds=i.thetaBounds||[-Infinity,Infinity];this.distanceBounds=i.distanceBounds||[1,Infinity];this.parent=i.parent||window;this.element=i.element;this.pinchHandler;this.mouseStart=new n.Vector2;this.clientSize=new n.Vector2;this.tmp=[0,0];this.dragging=true;this.addEvents();this.rotateTo(this._theta,this._phi)}r(e,[{key:"dispose",value:function e(){this.removeEvents()}},{key:"reset",value:function e(){this.inputDelta=new n.Vector3;this.mouseStart=new n.Vector2;this.theta=0;this.phi=Math.PI*.5}},{key:"addEvents",value:function e(){if(this.rotate){this.parent.addEventListener("mousemove",this.onInputMove)}if(this.zoom){(0,l.default)(window,this.handleZoom,true)}}},{key:"removeEvents",value:function e(){this.parent.removeEventListener("mousedown",this.onInputDown);this.parent.removeEventListener("mousemove",this.onInputMove);this.parent.removeEventListener("mouseup",this.onInputUp)}},{key:"preventDefault",value:function e(t){t.preventDefault()}},{key:"onInputDown",value:function e(t){if(!this.enabled)return;var i=(0,o.default)(t,this.element);this.mouseStart.set(i[0],i[1]);if(this.insideBounds(this.mouseStart)){this.dragging=true}}},{key:"onInputUp",value:function e(){if(!this.enabled)return;this.dragging=false}},{key:"onInputMove",value:function e(t){if(!this.enabled)return;var i=(0,o.default)(t,this.element);if(!this.dragging)return;var r=this.getClientSize();var n=(i[0]-this.mouseStart.x)/r.x;var a=(i[1]-this.mouseStart.y)/r.y;this.handleRotate(n,a);this.mouseStart.set(i[0],i[1])}},{key:"insideBounds",value:function e(t){if(this.element===window||this.element===document||this.element===document.body){return true}else{var i=this.element.getBoundingClientRect();return t.x>=0&&t.y>=0&&t.x<i.width&&t.y<i.height}}},{key:"getClientSize",value:function e(){var t=this.element;if(t===window||t===document||t===document.body){t=document.documentElement}return this.clientSize.set(t.clientWidth,t.clientHeight)}},{key:"handleRotate",value:function e(t,i){var r=Math.PI*2;this.inputDelta.x-=r*t*this.rotateSpeed;this.inputDelta.y-=r*i*this.rotateSpeed}},{key:"handleZoom",value:function e(t,i){this.inputDelta.z+=i*this.zoomSpeed}},{key:"rotateTo",value:function e(t,i){this._prepareOffset();this.theta=t;this.phi=i;this._computeOffset();this._applyTransformation()}},{key:"_prepareOffset",value:function e(){this.upQuat.setFromUnitVectors(this.object.up,d);this.upQuatInverse.copy(this.upQuat).inverse();this.offset.subVectors(this.object.position,this.target);this.offset.applyQuaternion(this.upQuat)}},{key:"_computeOffset",value:function e(){var t=Math.abs(this.distance)<=p?p:this.distance;this.offset.x=t*Math.sin(this.phi)*Math.sin(this.theta);this.offset.y=t*Math.cos(this.phi);this.offset.z=t*Math.sin(this.phi)*Math.cos(this.theta)}},{key:"_applyTransformation",value:function e(){this.offset.applyQuaternion(this.upQuatInverse);this.object.position.addVectors(this.target,this.offset);this.object.lookAt(this.target)}},{key:"_applyDamping",value:function e(){var t=typeof this.damping==="number"?this.damping:1;this.inputDelta.x*=1-t;this.inputDelta.y*=1-t;this.inputDelta.z*=1-t}},{key:"update",value:function e(){this._prepareOffset();var t=Math.atan2(this.offset.x,this.offset.z);var i=Math.atan2(Math.sqrt(this.offset.x*this.offset.x+this.offset.z*this.offset.z),this.offset.y);t+=this.inputDelta.x;i+=this.inputDelta.y;this.theta=t;this.phi=i;this.distance+=this.inputDelta.z;this.distance=(0,c.default)(this.distance,this.distanceBounds[0],this.distanceBounds[1]);this._computeOffset();this._applyTransformation();this._applyDamping()}},{key:"theta",get:function e(){return this._theta},set:function e(t){this._theta=(0,c.default)(t,this.thetaBounds[0],this.thetaBounds[1])}},{key:"phi",get:function e(){return this._phi},set:function e(t){this._phi=(0,c.default)(t,this.phiBounds[0],this.phiBounds[1]);this._phi=(0,c.default)(this._phi,p,Math.PI-p)}}]);return e}();i.default=m},{clamp:9,"mouse-event-offset":19,"mouse-wheel":20,three:27}],35:[function(e,t,i){"use strict";var r=e("./config/config");var n=G(r);var a=e("three");var o=e("raf-loop");var s=G(o);e("gsap");var l=e("./utils/debug");var u=e("brindille-resize");var c=G(u);var h=e("./utils/preloader");var f=G(h);var d=e("./utils/manifest");var p=G(d);var m=e("@superguigui/wagner");var v=G(m);var g=e("./postfx/unreal-bloom/UnrealBloomPass");var y=G(g);var b=e("./postfx/general/GeneralPass2");var _=G(b);var x=e("./postfx/frozen/FrozenPass");var w=G(x);var T=e("@superguigui/wagner/src/passes/fxaa/FXAAPass");var M=G(T);var S=e("./scenes/SnowScene");var E=G(S);var P=e("./scenes/GameScene");var A=G(P);var C=e("./scenes/FusionScene");var L=G(C);var R=e("./ui/Tuto");var O=G(R);var I=e("dom-classes");var D=G(I);var B=e("timers");function G(e){return e&&e.__esModule?e:{default:e}}console.log("IS_MOBILE",IS_MOBILE);console.log("CONFIG",n.default);var k={useFXAA:true,useBloom:true,useFrozen:true,showTuto:false,isWindy:false};var N=document.body.querySelector(".TutoBtn");var U={x:0,y:0};var F=document.body.querySelector(".Canvas");var H=new a.WebGLRenderer({antialias:true,alpha:true});H.setClearColor(3289650,0);F.style.overflow="hidden";F.style.margin=0;F.appendChild(H.domElement);var z=new v.default.Composer(H);var V=new _.default;var j=new M.default;var W=new w.default;var X=new y.default({strength:.8,thresold:.7});var Y=new E.default(H.domElement);var q=new A.default(H.domElement);var Z=new L.default(H.domElement);var K=te();f.default.load(p.default,Q);var $=(0,s.default)(fe);function Q(){q.onLoadComplete(H.domElement);Y.onLoadComplete(H.domElement);Z.onLoadComplete(H.domElement);var e=f.default.getTexture("FrozTexture");e.wrapS=e.wrapT=a.RepeatWrapping;e.offset.set(0,0);e.repeat.set(2,2);W.params.tMask=e;c.default.addListener(ae);$.start();setTimeout(function(){ae();J()},200);re()}function J(){if(IS_MOBILE){ee()}else{ne();setTimeout(function(){ee()},6e3)}}function ee(){q.setIntro();if(IS_MOBILE){window.addEventListener("touchstart",oe);window.addEventListener("touchend",ce)}else{ne();window.addEventListener("click",ne);window.addEventListener("keydown",he)}}function te(){clearTimeout(K);var e=Math.random()*14e3+4e3;K=setTimeout(ie,e)}function ie(){if(k.showTuto)return;k.isWindy=!k.isWindy;te()}function re(){l.gui.add(k,"showTuto").on("update",function(){ne(k.showTuto)});var e=l.panelFX.addFolder("postfx");e.open();e.add(k,"useComposer");e.add(k,"useFXAA");e.add(k,"useFrozen");e.add(k,"useBloom");e.add(X,"strength",{min:0,max:5,step:.01});e.add(X,"threshold",{min:0,max:1,step:.01});e.add(X,"radius",{min:0,max:Math.PI,step:.01})}function ne(){k.showTuto=!k.showTuto;var e=new TimelineMax;if(k.showTuto){D.default.add(N,"TutoBtn--open");e.fromTo(W.params,.8,{thresold:0},{thresold:1,ease:Expo.easeNone},0);e.fromTo(W.params,.8,{spreadThresold:0},{spreadThresold:10,ease:Expo.easeNone},0);e.fromTo(V.params,.6,{brightness:n.default.generalPass.brightness},{brightness:.15,ease:Expo.easeOut},0);e.fromTo(V.params,.8,{vignetteFallOff:n.default.generalPass.vignetteFallOff},{vignetteFallOff:.3,ease:Expo.easeNone},0);e.fromTo(V.params,.8,{vignetteAmount:n.default.generalPass.vignetteAmount},{vignetteAmount:.7,ease:Expo.easeNone},0);e.add(O.default.show(),.8)}else{D.default.remove(N,"TutoBtn--open");e.fromTo(W.params,.6,{thresold:1},{thresold:0,ease:Expo.easeOut},0);e.to(W.params,.8,{spreadThresold:0,ease:Expo.easeNone},0);e.to(V.params,.6,{brightness:n.default.generalPass.brightness,ease:Expo.easeOut},0);e.to(V.params,.6,{vignetteFallOff:n.default.generalPass.vignetteFallOff,ease:Expo.easeOut},0);e.to(V.params,.6,{vignetteAmount:n.default.generalPass.vignetteAmount,ease:Expo.easeOut},0);e.add(O.default.hide(),0)}}function ae(){Y.resize(c.default.width,c.default.height);q.resize(c.default.width,c.default.height);Z.resize(c.default.width,c.default.height);H.setSize(c.default.width,c.default.height);z.setSize(c.default.width,c.default.height)}function oe(e){q.spawnComponent()}var se=function e(){q.spawnComponent()};var le;var ue=200;function oe(){if(le)(0,B.clearInterval)(le);q.spawnComponent();le=(0,B.setInterval)(se,ue)}function ce(){if(le)(0,B.clearInterval)(le)}function he(e){var t=true;var i=undefined;switch(e.keyCode){case 0:case 32:q.spawnComponent();i=0;break;case 49:q.spawnComponent(0);i=1;break;case 50:q.spawnComponent(1);i=2;break;case 51:q.spawnComponent(2);i=3;break;case 52:q.spawnComponent(3);i=4;break;case 53:q.spawnComponent(4);i=5;break;case 54:q.spawnComponent(5);i=6;break;case 55:q.spawnComponent(6);i=7;break;default:t=false;break}if(k.showTuto)O.default.onKeyPress(i)}function fe(e){if(Z){Y.update(e,U);q.update(e);Z.update(e)}if(k.showTuto===false){if(q.speed<.09){k.isWindy=false;te();V.params.brightness+=(.3-V.params.brightness)*q.speed;V.params.contrats+=(.8-V.params.contrats)*q.speed;W.params.thresold+=(1-W.params.thresold)*q.speed;W.params.spreadThresold+=(10-W.params.thresold)*q.speed}else{if(!k.isWindy){V.params.contrats+=(1-V.params.contrats)*q.speed;W.params.spreadThresold+=(-1-W.params.spreadThresold)*.01;W.params.thresold+=(1e-4-W.params.thresold)*.01;V.params.brightness+=(n.default.generalPass.brightness-V.params.brightness)*.1}else{W.params.thresold+=(1-W.params.thresold)*.5;W.params.spreadThresold+=(1-W.params.spreadThresold)*.01;V.params.brightness+=(.5-V.params.brightness)*.01}}}z.reset();H.render(q,q.camera,Z.rtTexture2,true);H.render(Y,Y.camera,Z.rtTexture,true);z.render(Z,Z.camera);if(k.useFrozen)z.pass(W);if(k.useBloom)z.pass(X);z.pass(V);if(k.useFXAA)z.pass(j);z.toScreen()}},{"./config/config":30,"./postfx/frozen/FrozenPass":49,"./postfx/general/GeneralPass2":50,"./postfx/unreal-bloom/UnrealBloomPass":51,"./scenes/FusionScene":52,"./scenes/GameScene":53,"./scenes/SnowScene":54,"./ui/Tuto":55,"./utils/debug":56,"./utils/manifest":57,"./utils/preloader":58,"@superguigui/wagner":1,"@superguigui/wagner/src/passes/fxaa/FXAAPass":6,"brindille-resize":8,"dom-classes":12,gsap:14,"raf-loop":23,three:27,timers:28}],36:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:true});var r=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r)r.writable=true;Object.defineProperty(e,r.key,r)}}return function(t,i,r){if(i)e(t.prototype,i);if(r)e(t,r);return t}}();var n=e("three");var a=e("../../utils/debug");function o(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function s(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function l(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}var u=function(e){l(t,e);function t(e){o(this,t);var i=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));i.uniforms=n.UniformsUtils.merge([n.ShaderLib.physical.uniforms,n.ShaderLib.standard.uniforms,{time:{value:1}}]);i.setFlags(i);i.setValues(e);i.isMeshStandardMaterial=true;i.lights=true;i.setGui();return i}r(t,[{key:"setFlags",value:function e(t){t.vertexShader="#define GLSLIFY 1\n#define LAMBERT\n\nvarying vec3 vLightFront;\n\n#ifdef DOUBLE_SIDED\n\n\tvarying vec3 vLightBack;\n\n#endif\nvarying vec2 vUv;\n\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n\nvoid main() {\n  vUv = uv;\n\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n\n}";t.fragmentShader="#define GLSLIFY 1\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n\nvarying vec3 vLightFront;\n\n#ifdef DOUBLE_SIDED\n\n\tvarying vec3 vLightBack;\n\n#endif\n\nvarying vec2 vUv;\n\nuniform float time;\n\n/*\n * This function will function like an array.\n */\nvec2 getWaveSource(int ws)\n{\n\tvec2 outp;\n\tif (ws == 0)\n\t{\n\t\toutp = vec2(-100,-100);\n\t}\n\telse if (ws == 1)\n\t{\n\t\toutp = vec2(-100,500);\n\t}\n\telse\n\t{\n\t\toutp = vec2(500,-500);\n\t}\n\treturn outp;\n}\n/*\n * Don't need an expensive square root operation.\n * This returns distance squared, not distance.\n */\nfloat distanceSq(vec2 a, vec2 b)\n{\n\tvec2 diff = a - b;\n\treturn dot(diff, diff);\n}\n\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <bsdfs>\n#include <lights_pars>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\n\nvoid main() {\n\n\t#include <clipping_planes_fragment>\n\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\n\tconst int wsCount = 3;\n\t\n\tvec2 uv = vUv;\n\t// vec2 uv = fragCoord.xy / iResolution.xy;\n\t\n\tfloat wavePower = 0.0;\n\tfor(int i=0; i<wsCount; i++)\n\t{\n\t\tvec2 src = getWaveSource(i);\n\t\tfloat dist = distanceSq(src, uv) / 500.0;\n\t\twavePower += sin((dist + time));\n\t\t\n\t}\n\n\tdiffuseColor  = vec4(\n\t\t0.8 + 0.2 * sin(wavePower),\n\t\t0.5 + 0.2 * cos(wavePower), \n\t\t0.8 + 0.3 * cos(time),\n\t\topacity\n\t);\n\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\n\t// accumulation\n\treflectedLight.indirectDiffuse = getAmbientLightIrradiance( ambientLightColor );\n\n\t#include <lightmap_fragment>\n\n\treflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );\n\n\t#ifdef DOUBLE_SIDED\n\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\n\t#else\n\n\t\treflectedLight.directDiffuse = vLightFront;\n\n\t#endif\n\n\treflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();\n\n\t// modulation\n\t#include <aomap_fragment>\n\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\n\t#include <envmap_fragment>\n\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n\n}";t.type="IceMaterial"}},{key:"setGui",value:function e(){var t=a.gui.addFolder("iceMaterial");t.addColorPicker(this,"color");t.addColorPicker(this,"emissive");t.add(this,"transparent");t.add(this,"opacity",{max:1,min:0,step:.01});t.add(this,"refractionRatio",{max:2,min:0,step:.01});t.add(this,"reflectivity",{max:2,min:0,step:.01})}}]);return t}(n.MeshLambertMaterial);i.default=u},{"../../utils/debug":56,three:27}],37:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:true});var r=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r)r.writable=true;Object.defineProperty(e,r.key,r)}}return function(t,i,r){if(i)e(t.prototype,i);if(r)e(t,r);return t}}();var n=e("three");var a=e("./SnowPhysic");var o=u(a);var s=e("../utils/preloader");var l=u(s);function u(e){return e&&e.__esModule?e:{default:e}}function c(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function h(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function f(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}var d=function(e){f(t,e);function t(){c(this,t);var e=h(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));e.particlesPhysics=[];e.nbParticles=600;e.initBuffer();return e}r(t,[{key:"initBuffer",value:function e(){this.snowMaterial=new n.PointsMaterial({color:16777215,map:l.default.getTexture("SnowTexture"),size:16,blending:n.AdditiveBlending,transparent:true,depthTest:false});this.particles=new n.BufferGeometry;this.particlePositions=new Float32Array(this.nbParticles*3);for(var t=0;t<this.nbParticles;t++){this.particlePositions[t*3+0]=Math.random()*2e3-1e3;this.particlePositions[t*3+1]=Math.random()*2e3-1e3;this.particlePositions[t*3+2]=100;var i=new o.default(this.particlePositions[t*3+0],this.particlePositions[t*3+1],this.particlePositions[t*3+2]);this.particlesPhysics.push(i)}this.particles.setDrawRange(0,this.nbParticles*3);this.particles.addAttribute("position",new n.BufferAttribute(this.particlePositions,3).setDynamic(true));this.pointCloud=new n.Points(this.particles,this.snowMaterial);this.add(this.pointCloud)}},{key:"evolveSnow",value:function e(){for(var t=0;t<this.nbParticles;t++){var i=this.particlesPhysics[t];i.updatePhysics();this.particlePositions[t*3+0]=i.position.x;this.particlePositions[t*3+1]=i.position.y;this.particlePositions[t*3+2]=i.position.z}this.pointCloud.geometry.attributes.position.needsUpdate=true}},{key:"update",value:function e(){this.evolveSnow()}}]);return t}(n.Object3D);i.default=d},{"../utils/preloader":58,"./SnowPhysic":38,three:27}],38:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:true});var r=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r)r.writable=true;Object.defineProperty(e,r.key,r)}}return function(t,i,r){if(i)e(t.prototype,i);if(r)e(t,r);return t}}();var n=e("three");function a(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var o=Math.PI/180;var s=function(){function e(t,i,r){a(this,e);this.velocity=new n.Vector3(0,-4,0);this.vRotateX(l(-45,45));this.vRotateY(l(0,360));this.gravity=new n.Vector3(0,0,0);this.drag=1;this.position=new n.Vector3(t,i,r)}r(e,[{key:"updatePhysics",value:function e(){this.velocity.multiplyScalar(this.drag);this.velocity.add(this.gravity);this.position.add(this.velocity);if(this.position.y<-1e3)this.position.y+=2e3;if(this.position.x>1e3)this.position.x-=2e3;else if(this.position.x<-1e3)this.position.x+=2e3;if(this.position.z>1e3)this.position.z-=2e3;else if(this.position.z<-1e3)this.position.z+=2e3}},{key:"vRotateY",value:function e(t){var i=Math.cos(t*o);var r=Math.sin(t*o);var n=this.velocity.z;var a=this.velocity.x;this.velocity.x=a*i+n*r;this.velocity.z=a*-r+n*i}},{key:"vRotateX",value:function e(t){var i=Math.cos(t*o);var r=Math.sin(t*o);var n=this.velocity.z;var a=this.velocity.y;this.velocity.y=a*i+n*r;this.velocity.z=a*-r+n*i}},{key:"vRotateZ",value:function e(t){var i=Math.cos(t*o);var r=Math.sin(t*o);var n=this.velocity.x;var a=this.velocity.y;this.velocity.y=a*i+n*r;this.velocity.x=a*-r+n*i}}]);return e}();i.default=s;function l(e,t){return Math.random()*(t-e)+e}},{three:27}],39:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:true});var r=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r)r.writable=true;Object.defineProperty(e,r.key,r)}}return function(t,i,r){if(i)e(t.prototype,i);if(r)e(t,r);return t}}();var n=e("three");function a(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function o(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function s(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}var l=function(e){s(t,e);function t(e){a(this,t);var i=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));i.geometry=new n.CylinderGeometry(6,6,10,6);i.material=e||new n.MeshStandardMaterial({color:16711920});var r=new n.MeshStandardMaterial({color:15728880,transparent:true,opacity:.5});var s=new n.Mesh(i.geometry,i.material);s.scale.set(.8,.8,.8);var l=new n.Mesh(i.geometry,r);i.add(s);i.rotation.z=Math.PI*.5;return i}r(t,[{key:"destroy",value:function e(){this.material.dispose();this.geometry.dispose()}},{key:"update",value:function e(){this.rotation.x+=.01}}]);return t}(n.Object3D);i.default=l},{three:27}],40:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:true});var r=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r)r.writable=true;Object.defineProperty(e,r.key,r)}}return function(t,i,r){if(i)e(t.prototype,i);if(r)e(t,r);return t}}();var n=e("three");function a(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function o(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function s(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}var l=function(e){s(t,e);function t(e){a(this,t);var i=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));var r=Math.random()*20+10;i.gBig=new n.SphereGeometry(r,6,2);i.material=e||new n.MeshStandardMaterial({color:16711920});i.mesh=new n.Mesh(i.gBig,i.material);i.soundId="DoSound";i.add(i.mesh);var s=(new n.Box3).setFromObject(i.mesh);i.size=s.getSize().x;i.rotation.z=Math.PI*.5;return i}r(t,[{key:"destroy",value:function e(){this.material.dispose();this.gBig.dispose();this.remove(this.mesh)}}]);return t}(n.Object3D);i.default=l},{three:27}],41:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:true});var r=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r)r.writable=true;Object.defineProperty(e,r.key,r)}}return function(t,i,r){if(i)e(t.prototype,i);if(r)e(t,r);return t}}();var n=e("three");var a=e("../../utils/preloader");var o=s(a);function s(e){return e&&e.__esModule?e:{default:e}}function l(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function u(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function c(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}var h=function(e){c(t,e);function t(e){l(this,t);var i=u(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));i.geometry=o.default.getGeometry("crystalModel");i.material=e||new n.MeshStandardMaterial({color:16711920});var r=Math.random()*1+.4;i.soundId="FaSound";var a=new n.Mesh(i.geometry,i.material);a.scale.set(r,r,r);i.add(a);var s=(new n.Box3).setFromObject(a);i.size=s.getSize().y;i.rotation.z=Math.PI*.5;return i}r(t,[{key:"destroy",value:function e(){this.material.dispose();this.geometry.dispose()}}]);return t}(n.Object3D);i.default=h},{"../../utils/preloader":58,three:27}],42:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:true});var r=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r)r.writable=true;Object.defineProperty(e,r.key,r)}}return function(t,i,r){if(i)e(t.prototype,i);if(r)e(t,r);return t}}();var n=e("three");var a=e("../../utils/debug");function o(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function s(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function l(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}var u=function(e){l(t,e);function t(e){o(this,t);var i=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));i.geometry=new n.CylinderGeometry(6,6,10,6);i.branchGeometry=new n.CylinderGeometry(2,2,30,6);i.material=e||new n.MeshStandardMaterial({color:16711920});var r=new n.Mesh(i.geometry,i.material);var a=new n.Mesh(i.branchGeometry,i.material);var l=new n.Mesh(i.branchGeometry,i.material);r.scale.set(.8,.8,.8);l.position.set(4,0,0);l.rotation.set(0,0,Math.PI*.25);a.rotation.set(0,0,-Math.PI*.25);a.position.set(-4,0,0);i.add(a);i.add(l);i.rotation.z=Math.PI*.5;return i}r(t,[{key:"destroy",value:function e(){this.material.dispose();this.geometry.dispose()}},{key:"update",value:function e(){this.rotation.x+=.01}}]);return t}(n.Object3D);i.default=u},{"../../utils/debug":56,three:27}],43:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:true});var r=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r)r.writable=true;Object.defineProperty(e,r.key,r)}}return function(t,i,r){if(i)e(t.prototype,i);if(r)e(t,r);return t}}();var n=e("three");var a=e("../../utils/preloader");var o=s(a);function s(e){return e&&e.__esModule?e:{default:e}}function l(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function u(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function c(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}var h=function(e){c(t,e);function t(e){l(this,t);var i=u(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));i.geometry=o.default.getGeometry("crystal3Model");i.material=e||new n.MeshStandardMaterial({color:16711920});i.soundId="LaSound";var r=Math.random()*1.5+.4;var a=new n.Mesh(i.geometry,i.material);a.scale.set(r,r,r);i.add(a);var s=(new n.Box3).setFromObject(i);i.size=s.getSize().x;return i}r(t,[{key:"destroy",value:function e(){this.material.dispose();this.geometry.dispose()}}]);return t}(n.Object3D);i.default=h},{"../../utils/preloader":58,three:27}],44:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:true});var r=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r)r.writable=true;Object.defineProperty(e,r.key,r)}}return function(t,i,r){if(i)e(t.prototype,i);if(r)e(t,r);return t}}();var n=e("three");var a=e("../../utils/debug");function o(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function s(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function l(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,
configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}var u=function(e){l(t,e);function t(e){o(this,t);var i=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));var r=Math.random()*40+10;i.branchGeometry=new n.CylinderGeometry(2,2,r,6);i.size=20;i.soundId="MiSound";i.material=e||new n.MeshStandardMaterial({color:16711920});i.mesh=new n.Mesh(i.branchGeometry,i.material);i.mesh.rotation.set(0,0,-Math.PI*.25);i.mesh.position.set(-5,0,0);i.add(i.mesh);i.rotation.z=Math.PI*.5;return i}r(t,[{key:"destroy",value:function e(){this.material.dispose();this.branchGeometry.dispose();this.remove(this.mesh)}}]);return t}(n.Object3D);i.default=u},{"../../utils/debug":56,three:27}],45:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:true});var r=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r)r.writable=true;Object.defineProperty(e,r.key,r)}}return function(t,i,r){if(i)e(t.prototype,i);if(r)e(t,r);return t}}();var n=e("three");function a(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function o(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function s(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}var l=function(e){s(t,e);function t(e){a(this,t);var i=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));var r=Math.random()*30+10;i.gBig=new n.CylinderGeometry(3,3,r,6);i.size=r;i.material=e||new n.MeshStandardMaterial({color:16711920});i.mesh=new n.Mesh(i.gBig,i.material);i.soundId="ReSound";i.add(i.mesh);i.rotation.z=Math.PI*.5;return i}r(t,[{key:"destroy",value:function e(){this.material.dispose();this.gBig.dispose();this.remove(this.mesh)}}]);return t}(n.Object3D);i.default=l},{three:27}],46:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:true});var r=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r)r.writable=true;Object.defineProperty(e,r.key,r)}}return function(t,i,r){if(i)e(t.prototype,i);if(r)e(t,r);return t}}();var n=e("three");var a=e("../../utils/preloader");var o=s(a);function s(e){return e&&e.__esModule?e:{default:e}}function l(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function u(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function c(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}var h=function(e){c(t,e);function t(e){l(this,t);var i=u(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));i.gBranch=o.default.getGeometry("crystal3Model");i.material=e||new n.MeshStandardMaterial({color:16711920});var r=Math.random()*1.5+1;i.size=20*r;i.soundId="SiSound";var a=new n.Mesh(i.gBranch,i.material);a.scale.x=r;a.position.x=15*r;i.branch=new n.Object3D;i.branch.rotation.z=-Math.PI*.75;i.branch.add(a);i.add(i.branch);return i}r(t,[{key:"destroy",value:function e(){this.material.dispose();this.gBranch.dispose();this.remove(this.branch)}}]);return t}(n.Object3D);i.default=h},{"../../utils/preloader":58,three:27}],47:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:true});var r=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r)r.writable=true;Object.defineProperty(e,r.key,r)}}return function(t,i,r){if(i)e(t.prototype,i);if(r)e(t,r);return t}}();var n=e("three");var a=e("../../utils/preloader");var o=s(a);function s(e){return e&&e.__esModule?e:{default:e}}function l(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function u(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function c(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}var h=function(e){c(t,e);function t(e){l(this,t);var i=u(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));i.geometry=o.default.getGeometry("crystalModel");i.material=e||new n.MeshStandardMaterial({color:16711920});var r=new n.Mesh(i.geometry,i.material);var a=new n.Mesh(i.geometry,i.material);i.add(r);i.add(a);r.position.set(-5,-5,0);r.scale.set(.7,.7,.7);r.rotation.z=Math.PI*.15;a.position.x=5;a.rotation.z=Math.PI*.5;i.soundId="SolSound";var s=(new n.Box3).setFromObject(i);i.size=s.getSize().x;return i}r(t,[{key:"destroy",value:function e(){this.material.dispose();this.geometry.dispose()}}]);return t}(n.Object3D);i.default=h},{"../../utils/preloader":58,three:27}],48:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:true});i.default=M;var r=e("./Cylo");var n=x(r);var a=e("./Fork");var o=x(a);var s=e("./Do");var l=x(s);var u=e("./Re");var c=x(u);var h=e("./Mi");var f=x(h);var d=e("./Fa");var p=x(d);var m=e("./Sol");var v=x(m);var g=e("./La");var y=x(g);var b=e("./Si");var _=x(b);function x(e){return e&&e.__esModule?e:{default:e}}var w={Do:l.default,Re:c.default,Mi:f.default,Fa:p.default,Sol:v.default,La:y.default,Si:_.default};var T=Object.keys(w).map(function(e){return w[e]});function M(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;var t=e!==null&&e<T.length?e:Math.floor(Math.random()*T.length);return T[t]}},{"./Cylo":39,"./Do":40,"./Fa":41,"./Fork":42,"./La":43,"./Mi":44,"./Re":45,"./Si":46,"./Sol":47}],49:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:true});var r=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r)r.writable=true;Object.defineProperty(e,r.key,r)}}return function(t,i,r){if(i)e(t.prototype,i);if(r)e(t,r);return t}}();var n=e("../../utils/debug");function a(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function o(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function s(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}var l=e("@superguigui/wagner/src/Pass");var u="#define GLSLIFY 1\nvarying vec2 vUv;\n\nvoid main() {\n\n  vUv = uv;\n  gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n}";var c="#define GLSLIFY 1\nuniform sampler2D tInput;\nuniform sampler2D tMask;\nuniform float thresold;\nuniform mediump float spreadThresold;\nuniform mediump float fallOffThresold;\n\nvarying vec2 vUv;\n\nvoid main()\n{\n  mediump float vignetteFallOff = fallOffThresold;\n  mediump float vignetteAmount = spreadThresold;\n  // color = texture2D(tInput, vUv);\n\n\tvec4 texelMask = texture2D(tMask, vUv);\n  float amount = thresold;\n  // lowp float dist = distance(vUv, vec2(0.5, 0.5));\n\t// texelMask *= smoothstep(0.2, vignetteFallOff * 0.799, dist * (vignetteAmount + vignetteFallOff));\n  lowp float dist = distance(vUv, vec2(0.5, 0.5));\n\ttexelMask *= smoothstep(0., 1., dist * (vignetteAmount + 1.));\n\n  if (texelMask.r > thresold) {\n    amount = 0.0;\n  }\n  texelMask.a = amount;\n  vec4 transparent = vec4(0.0, 0.0, 0.0, 0.0);\n  texelMask *= mix(transparent, texelMask, amount);\n\n\tvec3 mask = texelMask.rgb/8.0;\n\tvec2 where = (vUv.xy - mask.xy);\n\tvec3 result  = texture2D(tInput, vec2(where.x, where.y)).rgb;\n\tvec4 newColor = vec4(result , 1.0);\n\n  // vec4 initialColor = texture2D(tInput, vUv);\n  // vec4 texelColor = texture2D(tMask, vUv);\n\n  // texelColor = mapTexelToLinear( texelColor );\n  // float amount = thresold;\n  // if (texelColor.r > thresold) {\n  //   amount = 0.0;\n  // }\n  // vec4 transparent = vec4(0.0, 0.0, 0.0, 0.0);\n  // newColor *= mix(transparent, newColor, amount);\n\n  // vec4 mergeColor = vec4(blendLighten(initialColor.rgb, newColor.rgb), 1.0);\n  \t//Vignette\n\n  gl_FragColor = newColor;\n  // gl_FragColor = initialColor;\n}";var h=function(e){s(t,e);function t(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};a(this,t);var i=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));i.setShader(u,c);i.params.thresold=0;i.params.spreadThresold=0;i.params.fallOffThresold=0;i.params.tMask=e.mask;i.createGui(n.gui);return i}r(t,[{key:"createGui",value:function e(t){var i=t.addFolder("FrozenPass");i.add(this.params,"thresold",{min:0,max:1,step:.01,watch:true});i.add(this.params,"spreadThresold",{min:-1,max:20,step:.01,watch:true});i.add(this.params,"fallOffThresold",{min:0,max:1,step:.01,watch:true})}},{key:"run",value:function e(t){if(!this.shader){return}this.shader.uniforms.spreadThresold.value=this.params.spreadThresold;this.shader.uniforms.thresold.value=this.params.thresold;this.shader.uniforms.fallOffThresold.value=this.params.fallOffThresold;this.shader.uniforms.tMask.value=this.params.tMask;t.pass(this.shader)}}]);return t}(l);i.default=h},{"../../utils/debug":56,"@superguigui/wagner/src/Pass":3}],50:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:true});var r=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r)r.writable=true;Object.defineProperty(e,r.key,r)}}return function(t,i,r){if(i)e(t.prototype,i);if(r)e(t,r);return t}}();var n=e("../../utils/debug");function a(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function o(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function s(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}var l=e("@superguigui/wagner/src/Pass");var u="#define GLSLIFY 1\nvarying vec2 vUv;\n\nvoid main() {\n\n  vUv = uv;\n  gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n}";var c="#define GLSLIFY 1\nuniform sampler2D tInput;\nuniform sampler2D tVignette;\n// uniform sampler2D tTorch;\nvarying vec2 vUv;\n\nuniform mediump float gamma;\nuniform float contrast;\nuniform mediump float brightness;\nuniform mediump float vignetteFallOff;\nuniform mediump float vignetteAmount;\nuniform mediump float time;\nuniform mediump float noiseStrength;\nuniform mediump float black;\nuniform float bw;\n\nvec3 blendNormal(vec3 base, vec3 blend) {\n\treturn blend;\n}\n\nvec3 blendNormal(vec3 base, vec3 blend, float opacity) {\n\treturn (blendNormal(base, blend) * opacity + base * (1.0 - opacity));\n}\n\nfloat blendScreen(float base, float blend) {\n\treturn 1.0-((1.0-base)*(1.0-blend));\n}\n\nvec3 blendScreen(vec3 base, vec3 blend) {\n\treturn vec3(blendScreen(base.r,blend.r),blendScreen(base.g,blend.g),blendScreen(base.b,blend.b));\n}\n\nvec3 blendScreen(vec3 base, vec3 blend, float opacity) {\n\treturn (blendScreen(base, blend) * opacity + base * (1.0 - opacity));\n}\n\nvec3 toGamma( vec3 rgb ) {\n  return pow( rgb, vec3( 1.0 / gamma ) );\n}\n\nvoid main() {\n\tlowp vec3 rgb = texture2D(tInput, vUv).rgb;\n\tlowp vec4 vignette = texture2D(tVignette, vUv);\n\t// lowp vec4 torch = texture2D(tTorch, vUv);\n\n\t//noise\n  lowp float x = (vUv.x + 4.0 ) * (vUv.y + 4.0 ) * (time * 10.0);\n\tlowp float grain = 1.-(mod((mod(x, 13.0) + 1.0) * (mod(x, 123.0) + 1.0), 0.01)-0.005) * noiseStrength;\n\trgb *= grain;\n\n\t//Color Correction\n\trgb = ((toGamma( rgb ) - .5) * contrast + .5 + vec3( brightness )) * black;\n\n\t//Vignette\n\tlowp float dist = distance(vUv, vec2(0.5, 0.5));\n\trgb *= smoothstep(0.8, vignetteFallOff * 0.799, dist * (vignetteAmount + vignetteFallOff));\n\n\t//BW\n\trgb = mix(rgb,vec3( dot( rgb, vec3( .299, 0.587, 0.114 ) ) ), bw);\n\n\tlowp vec4 color = vec4(blendNormal(rgb, vignette.rgb, vignette.a), 1.);\n\n\t// color = vec4(blendScreen(color.rgb, torch.rgb, 1.), 1.);\n\n\t// gl_FragColor = vec4(rgb, 1.);\n\tgl_FragColor = color;\n}\n";var h=function(e){s(t,e);function t(e){a(this,t);var i=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));i.setShader(u,c);e=e||{};i.params.time=1e-4;i.params.gamma=e.gamma||.7;i.params.contrast=e.contrast||1;i.params.brightness=e.brightness||.1;i.params.vignetteFallOff=e.vignetteFallOff||.2;i.params.vignetteAmount=e.vignetteAmount||.6;i.params.noiseStrength=e.noiseStrength||e.noise||.001;i.params.black=e.black||1;i.params.bw=e.bw||0;i.createGui(n.gui);return i}r(t,[{key:"createGui",value:function e(t){var i=t.addFolder("GeneralPass");i.add(this.params,"vignetteFallOff",{min:0,max:1,step:.1,watch:true});i.add(this.params,"vignetteAmount",{min:0,max:1,step:.1,watch:true});i.add(this.params,"contrast",{min:0,max:1,step:.01,watch:true});i.add(this.params,"gamma",{min:0,max:1,step:.01,watch:true});i.add(this.params,"brightness",{min:0,max:1,step:.01,watch:true});i.add(this.params,"noiseStrength",{min:0,max:30,step:.01,watch:true});i.add(this.params,"black",{min:0,max:1,step:.01,watch:true});i.add(this.params,"bw",{min:0,max:1,step:.001,watch:true})}},{key:"run",value:function e(t){if(!this.shader){return}this.shader.uniforms.time.value=this.params.time;this.shader.uniforms.black.value=this.params.black;this.shader.uniforms.noiseStrength.value=0;this.shader.uniforms.gamma.value=this.params.gamma;this.shader.uniforms.contrast.value=this.params.contrast;this.shader.uniforms.brightness.value=this.params.brightness;this.shader.uniforms.vignetteFallOff.value=this.params.vignetteFallOff;this.shader.uniforms.vignetteAmount.value=this.params.vignetteAmount;this.shader.uniforms.bw.value=this.params.bw;t.pass(this.shader)}}]);return t}(l);i.default=h},{"../../utils/debug":56,"@superguigui/wagner/src/Pass":3}],51:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:true});var r=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r)r.writable=true;Object.defineProperty(e,r.key,r)}}return function(t,i,r){if(i)e(t.prototype,i);if(r)e(t,r);return t}}();var n=e("@superguigui/wagner/src/Pass");var a=l(n);var o=e("@superguigui/wagner");var s=e("three");function l(e){return e&&e.__esModule?e:{default:e}}function u(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function c(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function h(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}var f="#define GLSLIFY 1\nvarying vec2 vUv;\n\nvoid main() {\n\n  vUv = uv;\n  gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n}";var d="#define GLSLIFY 1\n#include <common>\n\nvarying vec2 vUv;\nuniform sampler2D colorTexture;\nuniform vec2 texSize;\nuniform vec2 direction;\n\nfloat gaussianPdf(in float x, in float sigma) {\n  return 0.39894 * exp(-0.5 * x * x/(sigma * sigma))/sigma;\n}\n\nvoid main() {\n  vec2 invSize = 1.0 / texSize;\n  float fSigma = float(SIGMA);\n  float weightSum = gaussianPdf(0.0, fSigma);\n  vec3 diffuseSum = texture2D(colorTexture, vUv).rgb * weightSum;\n  for(int i = 1; i < KERNEL_RADIUS; i++) {\n    float x = float(i);\n    float w = gaussianPdf(x, fSigma);\n    vec2 uvOffset = direction * invSize * x;\n    vec3 sample1 = texture2D(colorTexture, vUv + uvOffset).rgb;\n    vec3 sample2 = texture2D(colorTexture, vUv - uvOffset).rgb;\n    diffuseSum += (sample1 + sample2) * w;\n    weightSum += 2.0 * w;\n  }\n  gl_FragColor = vec4(diffuseSum/weightSum, 1.0);\n}";var p="#define GLSLIFY 1\nvarying vec2 vUv;\nuniform sampler2D tInput;\nuniform sampler2D blurTexture1;\nuniform sampler2D blurTexture2;\nuniform sampler2D blurTexture3;\nuniform sampler2D blurTexture4;\nuniform sampler2D blurTexture5;\nuniform sampler2D dirtTexture;\nuniform float bloomStrength;\nuniform float bloomRadius;\nuniform float bloomFactors[NUM_MIPS];\nuniform vec3 bloomTintColors[NUM_MIPS];\n\nfloat lerpBloomFactor(const in float factor) { \n  float mirrorFactor = 1.2 - factor;\n  return mix(factor, mirrorFactor, bloomRadius);\n}\n\nvoid main() {\n  gl_FragColor = texture2D(tInput, vUv) + bloomStrength * (lerpBloomFactor(bloomFactors[0]) * vec4(bloomTintColors[0], 1.0) * texture2D(blurTexture1, vUv) + \n    lerpBloomFactor(bloomFactors[1]) * vec4(bloomTintColors[1], 1.0) * texture2D(blurTexture2, vUv) + \n    lerpBloomFactor(bloomFactors[2]) * vec4(bloomTintColors[2], 1.0) * texture2D(blurTexture3, vUv) + \n    lerpBloomFactor(bloomFactors[3]) * vec4(bloomTintColors[3], 1.0) * texture2D(blurTexture4, vUv) + \n    lerpBloomFactor(bloomFactors[4]) * vec4(bloomTintColors[4], 1.0) * texture2D(blurTexture5, vUv));\n}";var m="#define GLSLIFY 1\nuniform sampler2D tInput;\nuniform vec3 defaultColor;\nuniform float defaultOpacity;\nuniform float threshold;\nuniform float smoothWidth;\n\nvarying vec2 vUv;\n\nvoid main() {\n  vec4 texel = texture2D(tInput, vUv);\n  vec3 luma = vec3(0.299, 0.587, 0.114);\n  float v = dot(texel.xyz, luma);\n  vec4 outputColor = vec4(defaultColor.rgb, defaultOpacity);\n  float alpha = smoothstep(threshold, threshold + smoothWidth, v);\n  gl_FragColor = mix(outputColor, texel, alpha);\n}";var v=new s.Vector2(1,0);var g=new s.Vector2(0,1);var y=[3,5,7,9,11];var b=[1,.8,.6,.4,.2];var _={minFilter:s.LinearFilter,magFilter:s.LinearFilter,format:s.RGBAFormat};function x(e,t){var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:true;var r=new s.WebGLRenderTarget(e,t,_);r.texture.generateMipmaps=i;return r}function w(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:.5;var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:.5;return new s.ShaderMaterial({defines:{KERNEL_RADIUS:e,SIGMA:e},uniforms:{colorTexture:{value:null},texSize:{value:new s.Vector2(t,i)},direction:{value:new s.Vector2(.5,.5)}},vertexShader:f,fragmentShader:d})}function T(e,t){return new s.ShaderMaterial({defines:{NUM_MIPS:e},uniforms:{tInput:{value:null},blurTexture1:{value:t[0].texture},blurTexture2:{value:t[1].texture},blurTexture3:{value:t[2].texture},blurTexture4:{value:t[3].texture},blurTexture5:{value:t[4].texture},dirtTexture:{value:null},resolution:{value:new s.Vector2},time:{value:0},bloomStrength:{value:1},bloomFactors:{value:null},bloomTintColors:{value:null},bloomRadius:{value:0}},vertexShader:f,fragmentShader:p})}function M(){return new s.ShaderMaterial({uniforms:{tInput:{value:null},defaultColor:{value:new s.Color(0)},defaultOpacity:{value:0},threshold:{value:0},smoothWidth:{value:.01}},vertexShader:f,fragmentShader:m})}var S=function(e){h(t,e);function t(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};u(this,t);var i=c(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));i.resolution=e.resolution!==undefined?(new s.Vector2).copy(e.resolution):new s.Vector2(256,256);i.strength=e.strength!==undefined?e.strength:1.5;i.threshold=e.threshold!==undefined?e.threshold:.85;i.radius=e.radius!==undefined?e.radius:0;i.luminosityHighShader=M();i.renderTargetsHorizontal=[];i.renderTargetsVertical=[];i.separableBlurMaterials=[];i.nMips=5;var r=Math.round(i.resolution.x/2);var n=Math.round(i.resolution.y/2);i.renderTargetBright=x(r,n,false);for(var a=0;a<i.nMips;a++){i.renderTargetsHorizontal.push(x(r,n,false));i.renderTargetsVertical.push(x(r,n,false));i.separableBlurMaterials.push(w(y[a],r,n));r=Math.round(r/2);n=Math.round(n/2)}i.bloomTintColors=[new s.Vector3(1,1,1),new s.Vector3(1,1,1),new s.Vector3(1,1,1),new s.Vector3(1,1,1),new s.Vector3(1,1,1)];i.compositeMaterial=T(i.nMips,i.renderTargetsVertical);i.compositeMaterial.uniforms.bloomStrength.value=i.strength;i.compositeMaterial.uniforms.bloomRadius.value=.1;i.compositeMaterial.uniforms.bloomFactors.value=b;i.compositeMaterial.uniforms.bloomTintColors.value=i.bloomTintColors;i.compositeMaterial.needsUpdate=true;i.oldClearColor=new s.Color;i.oldClearAlpha=1;return i}r(t,[{key:"run",value:function e(t){var i=t.renderer.autoClear;this.oldClearColor.copy(t.renderer.getClearColor());this.oldClearAlpha=t.renderer.getClearAlpha();t.renderer.autoClear=false;t.renderer.setClearColor(new s.Color(0,0,0),0);if(this.maskActive)t.renderer.context.disable(t.renderer.context.STENCIL_TEST);this.luminosityHighShader.uniforms.tInput.value=t.read.texture;this.luminosityHighShader.uniforms.threshold.value=this.threshold;t.quad.material=this.luminosityHighShader;t.renderer.render(t.scene,t.camera,this.renderTargetBright,true);var r=this.renderTargetBright;for(var n=0;n<this.nMips;n++){t.quad.material=this.separableBlurMaterials[n];this.separableBlurMaterials[n].uniforms.colorTexture.value=r.texture;this.separableBlurMaterials[n].uniforms.direction.value=v;t.renderer.render(t.scene,t.camera,this.renderTargetsHorizontal[n],true);this.separableBlurMaterials[n].uniforms.colorTexture.value=this.renderTargetsHorizontal[n].texture;this.separableBlurMaterials[n].uniforms.direction.value=g;t.renderer.render(t.scene,t.camera,this.renderTargetsVertical[n],true);r=this.renderTargetsVertical[n]}if(this.maskActive)t.renderer.context.enable(t.renderer.context.STENCIL_TEST);t.renderer.setClearColor(this.oldClearColor,this.oldClearAlpha);t.renderer.autoClear=i;this.compositeMaterial.uniforms.bloomStrength.value=this.strength;this.compositeMaterial.uniforms.bloomRadius.value=this.radius;this.compositeMaterial.uniforms.bloomTintColors.value=this.bloomTintColors;t.pass(this.compositeMaterial)}}]);return t}(a.default);i.default=S},{"@superguigui/wagner":1,"@superguigui/wagner/src/Pass":3,three:27}],52:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:true});var r=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r)r.writable=true;Object.defineProperty(e,r.key,r)}}return function(t,i,r){if(i)e(t.prototype,i);if(r)e(t,r);return t}}();var n=e("three");var a=e("brindille-resize");var o=c(a);var s=e("../utils/debug");var l=e("../utils/preloader");var u=c(l);function c(e){return e&&e.__esModule?e:{default:e}}function h(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function f(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function d(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}var p={useKaleido:true,useAlphaKaleido:true};var m=function(e){d(t,e);function t(e){h(this,t);var i=f(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));i.width=e.offsetWidth;i.height=e.offsetHeight;i.camera=new n.OrthographicCamera(i.width/-2,i.width/2,i.height/2,i.height/-2,-100,100);i.add(i.camera);return i}r(t,[{key:"onLoadComplete",value:function e(){this.setBGPlasma();this.setXPScene();this.setGameSceneToBg();this.listener=new n.AudioListener;this.camera.add(this.listener);this.sound=new n.Audio(this.listener);this.sound.setBuffer(u.default.getAudio("AmbientSound"));this.sound.setLoop(true);this.sound.setVolume(.3);this.sound.play();this.setGui()}},{key:"setGui",value:function e(){var t=this;var i=s.gui.addFolder("Kaleido");i.open();i.add(p,"useKaleido").on("update",function(e){t.materialScreen.uniforms.kaleido.value=e===true?1:0});var r=s.gui.addFolder("Sky");var n={x:0,y:0};if(this.bgMaterial){r.addColorPicker(this.bgMaterial.uniforms.blueSky,"value").on("update",function(){t.isSkyDebug=true});r.addColorPicker(this.bgMaterial.uniforms.redSky,"value");r.add(n,"x",{min:-10,max:10,step:.01}).on("update",function(){t.bgMaterial.uniforms.mouse.value=n});r.add(n,"y",{min:-10,max:10,step:.01}).on("update",function(){t.bgMaterial.uniforms.mouse.value=n})}}},{key:"setBGPlasma",value:function e(){var t=u.default.getTexture("NoiseTexture");t.wrapS=t.wrapT=n.RepeatWrapping;t.offset.set(0,0);t.repeat.set(2,2);this.bgMaterial=new n.ShaderMaterial({uniforms:{time:{value:1},tNoise:{value:t},resolution:{value:new n.Vector2(800,600)},mouse:{value:new n.Vector2(1.25,.65)},blueSky:{value:new n.Color(171768)},redSky:{value:new n.Color(15227384)}},vertexShader:"#define GLSLIFY 1\nvarying vec2 vUv;\n\nvoid main() {\n  vUv = uv;\n  gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}\n",fragmentShader:"#define GLSLIFY 1\nuniform float time;\nuniform sampler2D tNoise;\nuniform vec2 resolution;\nuniform vec2 mouse;\nuniform vec3 blueSky;\nuniform vec3 redSky;\n\n// const vec2 mouse = vec2(-3600, -1000);\n\nvarying vec2 vUv;\n\nconst mat2 m2 = mat2(0.8, -0.6, 0.6, 0.8);\n\nfloat fbm( vec2 p )\n{\n    float f = 0.0;\n    f += 0.5000*texture2D( tNoise, p/256.0, -100. ).x; p = m2*p*2.02;\n    f += 0.2500*texture2D( tNoise, p/256.0, -100. ).x; p = m2*p*2.03;\n    f += 0.1250*texture2D( tNoise, p/256.0, -100. ).x; p = m2*p*2.01;\n    f += 0.0625*texture2D( tNoise, p/256.0, -100. ).x;\n    return f/0.9375;\n}\n\nvoid main()\n{\n\tvec2 q = vUv;\n  vec2 p = -1.0 + 2.0 * q;\n  p.x *= resolution.x/resolution.y;\n  // vec2 mo = mouse.xy/resolution.xy;\n  vec2 mo = mouse.xy;\n\t\n    // camera\n\tfloat an1 = time * 0.1;\n\tfloat an2 = cos(time * 0.8) * 0.05 + .5;\n  vec3 ro = 10.0*normalize(vec3(sin(an2)*cos(an1), cos(an2)-0.5, sin(an2)*sin(an1) ));\n  vec3 ww = normalize(vec3(0.0,0.0,0.0) - ro);\n  vec3 uu = normalize(cross( vec3(0.0,1.0,0.0), ww ));\n  vec3 vv = normalize(cross(ww,uu));\n  vec3 rd = normalize( p.x*uu + p.y*vv - 1.4*ww );\n\n  // raymarch\n  vec3 col =  vec3(0.);//texture( iChannel0, rd ).xyz;\n  \n  vec3 light = normalize(vec3(0.9, 0.2, 0.9));\n  //vec3 ambient = 5. * vec3(0.1, 0.9, 0.2);\n  float sundot = clamp(dot(rd * 0.95,light),0.,1.);\n  vec3 pos = uu;\n    \n    \n// sky\n\n  // sky colour        \n  // vec3 blueSky = vec3(0.3,.55,0.8);\n  // vec3 redSky = vec3(0.7,0.7,0.6);\n  \n  vec3 sky = mix(blueSky, redSky, pow(sundot, 5.));\n  \n  col =  sky*(1.0-0.8*rd.y);\n  \n  // stars\n  float s = texture2D( tNoise, rd.xz * 1.25, -100. ).x;\n  s += texture2D( tNoise, rd.xz * 4., -100. ).x;\n  \n  s = pow(s, 18.0) * 0.00005 * max(rd.y, - 0.6) * pow((1. - max(sundot, 0.)), 1.); \n  if (s > .0)\n  {\n    vec3 backStars = vec3(s);\n    col += backStars;\n  }\n  \n  // sun\n  col += 0.1*vec3(0.9, 0.3, 0.9)*pow(sundot, 0.5);\n  col += 0.2*vec3(1., 0.7, 0.7)*pow(sundot, 1.);\n  col += 0.95*vec3(1.)*pow(sundot, 256.);\n\n  // clouds\n  float cloudSpeed = 0.01 * sin(time);\n  float cloudFlux = 1.4;\n\n  // layer 1\n  vec3 cloudColour = mix(vec3(1.0,0.95,1.0), 0.35*redSky, 0.);\n      \n  vec2 sc = cloudSpeed * 50.*time * ro.xz + rd.xz*(1000.0-ro.y)/rd.y;\n  col = mix( col, cloudColour, 0.5*smoothstep(0.5,0.8,fbm(0.0005*sc+fbm(0.0005*sc+time*cloudFlux))));\n      \n  // cloud layer 2\n  sc = cloudSpeed * 30.*time * ro.xz + rd.xz*(600.0-ro.y)/rd.y;\n  col = mix( col, cloudColour, 0.5*smoothstep(0.5,0.8,fbm(0.0002*sc+fbm(0.0005*sc+time*cloudFlux))));\n\n  // horizon        \n  //col = mix( col, 0.9*vec3(0.9,0.75,0.8), pow( 1.-max(rd.y+0.1,0.0), 5.0));\n      \n      \n  \n  // contrast\n  col = clamp(col, 0., 1.);\n  col = col*col*(3.0-2.0*col);\n  \n  \n  // saturation (amplify colour, subtract grayscale)\n  float sat = 0.2;\n  col = col * (1. + sat) - sat*dot(col, vec3(0.33));\n  \n  // vignette\n  //col = col * (1.0 - dot(p, p) * 0.1);\n    \n\tgl_FragColor = vec4(col, 1.0);\n}"});this.bgMaterial.needsUpdate=true;var i=new n.PlaneBufferGeometry(1,1,32);this.bgPlasma=new n.Mesh(i,this.bgMaterial);this.bgPlasma.position.set(0,0,0);this.add(this.bgPlasma)}},{key:"setGameSceneToBg",value:function e(){this.rtTexture2=new n.WebGLRenderTarget(o.default.width,o.default.height,{minFilter:n.LinearFilter,magFilter:n.LinearFilter,format:n.RGBAFormat});this.materialScreen=new n.ShaderMaterial({uniforms:{tDiffuse:{value:this.rtTexture2.texture},resolution:{value:new n.Vector2},sides:{value:6},angles:{value:90*Math.PI/180},alpha:{value:1},kaleido:{value:1}},transparent:true,vertexShader:"#define GLSLIFY 1\nvarying vec2 vUv;\n\nvoid main() {\n  vUv = uv;\n  gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}\n",fragmentShader:"#define GLSLIFY 1\nuniform sampler2D tDiffuse;\nuniform vec2 resolution;\nvarying vec2 vUv;\n\nuniform float sides;\nuniform float angle;\n\nuniform float alpha;\nuniform float kaleido;\n\nvoid main() {\n  \n  vec2 R = resolution;\n  vec2 U = vUv;\n\n  vec2 p = (vUv) - (0.5);\n\t\n  float r = length(p);\n  float a = atan(p.y, p.x) + angle;\n  float tau = 2. * 3.1416;\n  a = mod(a, tau/sides);\n  a = abs(a - tau/sides/2.);\n  p = r * vec2(cos(a), sin(a));\n\n  vec4 color;\n  \n  if (kaleido == 1.0) {\n    color = texture2D(tDiffuse, p + 0.5);\n  } else {\n    color = texture2D(tDiffuse, vUv);\n  }\n  gl_FragColor = color;\n}",depthWrite:false,blending:1});var t=new n.PlaneBufferGeometry(1,1);this.snowflakeContainer=new n.Mesh(t,this.materialScreen);this.snowflakeContainer.position.set(0,0,0);if(o.default.width<o.default.height&&o.default.width<500){this.snowflakeContainer.position.set(0,-50,0)}this.add(this.snowflakeContainer)}},{key:"setXPScene",value:function e(){this.rtTexture=new n.WebGLRenderTarget(o.default.width,o.default.height,{minFilter:n.LinearFilter,magFilter:n.LinearFilter,format:n.RGBAFormat});this.materialScreen0=new n.MeshBasicMaterial({map:this.rtTexture.texture,transparent:true});var t=new n.PlaneBufferGeometry(1,1);this.fullContainer=new n.Mesh(t,this.materialScreen0);this.fullContainer.position.set(0,0,0);this.add(this.fullContainer)}},{key:"resize",value:function e(){this.width=o.default.width;this.height=o.default.height;this.camera.left=this.width/-2;this.camera.right=this.width/2;this.camera.top=this.height/2;this.camera.bottom=this.height/-2;this.camera.updateProjectionMatrix();this.rtTexture2.setSize(1920,1080);this.rtTexture.setSize(this.width,this.height);this.fullContainer.scale.set(this.width,this.height,1);this.snowflakeContainer.scale.set(this.height*1.3,this.height*1.3,1);this.bgPlasma.scale.set(this.width,this.height,1)}},{key:"update",value:function e(t){if(this.bgMaterial){this.bgMaterial.uniforms.time.value+=.01}}}]);return t}(n.Scene);i.default=m},{"../utils/debug":56,"../utils/preloader":58,"brindille-resize":8,three:27}],
53:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:true});var r=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r)r.writable=true;Object.defineProperty(e,r.key,r)}}return function(t,i,r){if(i)e(t.prototype,i);if(r)e(t,r);return t}}();var n=e("three");var a=e("brindille-resize");var o=y(a);var s=e("../controls/Controls");var l=y(s);var u=e("../utils/debug");var c=e("../objects/parts/partsFactory");var h=y(c);var f=e("../materials/ice-material/IceMaterial");var d=y(f);var p=e("../utils/preloader");var m=y(p);var v=e("../config/config");var g=y(v);function y(e){return e&&e.__esModule?e:{default:e}}function b(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function _(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function x(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}var w=0;var T=g.default.gscene.maxBranchSize;var M=function(e){x(t,e);function t(e){b(this,t);var i=_(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));i.onLoadComplete=i.onLoadComplete.bind(i);i.offset=0;i.currentBranchSize=0;i.maxDuration=.6;i.speed=i.maxDuration;i.camera=new n.PerspectiveCamera(50,o.default.width/o.default.height,.1,1e3);i.add(i.camera);i.controls=new l.default(i.camera,e,false);return i}r(t,[{key:"setGui",value:function e(){var t=u.gui.addFolder("Flights");t.add(this.frontLight.position,"x",{max:100,min:-100,step:.01});t.add(this.frontLight.position,"y",{max:100,min:-100,step:.01});t.add(this.frontLight.position,"z",{max:100,min:-100,step:.01});t.add(this.frontLight,"intensity",{max:1,min:0,step:.01});var i=u.gui.addFolder("Blights");i.add(this.backLight.position,"x",{max:100,min:-100,step:.01});i.add(this.backLight.position,"y",{max:100,min:-100,step:.01});i.add(this.backLight.position,"z",{max:100,min:-100,step:.01});i.add(this.backLight,"intensity",{max:1,min:0,step:.01})}},{key:"onLoadComplete",value:function e(t){var i=new n.AmbientLight(16777215,.8);this.frontLight=new n.PointLight(16777215,1);this.backLight=new n.PointLight(65535,.9);this.frontLight.position.z=20;this.backLight.position.set(-34.27,9.09,17.48);this.add(this.frontLight);this.add(this.backLight);this.add(i);this.branch=new n.Object3D;this.add(this.branch);this.listener=new n.AudioListener;this.camera.add(this.listener);this.sound=new n.Audio(this.listener);var r=m.default.getTexture("ReflectionTexture");r.mapping=n.EquirectangularReflectionMapping;r.minFilter=n.LinearFilter;r.magFilter=n.LinearFilter;this.iceMaterial=new d.default({envMap:r,reflectivity:1.6,opacity:1});this.elements=[];this.offset=0;this.initTime=Date.now();this.deltaTime=0;var a=0;this.setGui()}},{key:"setIntro",value:function e(){var t=this;while(this.currentBranchSize<T){this.generateFirst()}this.speed=this.maxDuration;this.tlIn=new TimelineMax({onComplete:function e(){t.isIntroFinished=true}});this.tlIn.fromTo(this.frontLight.position,.6,{x:0},{x:T*1.4});this.elements.forEach(function(e,i){var r=e.position.x;t.tlIn.fromTo(e.position,.6,{x:0},{x:r,ease:Linear.easeOut},i*.1);t.tlIn.fromTo(e.scale,.6,{x:.01,y:.01,z:.01},{x:1,y:1,z:1,ease:Expo.easeOut},i*.1+.6);t.tlIn.fromTo(e.rotation,.8,{x:0},{x:Math.PI,ease:Expo.easeNone},i*.1+.6)})}},{key:"generateFirst",value:function e(){var t=(0,h.default)();var i=new t(this.iceMaterial);if(this.elements.length>0){var r=this.elements[this.elements.length-1];i.position.x=r.position.x+r.size*.5+w+i.size*.5}this.elements.push(i);this.branch.add(i);this.cleanScene();this.currentBranchSize=i.position.x+i.size*.5}},{key:"spawnComponent",value:function e(){var t=this;var i=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;if(this.speedTimeout)clearTimeout(this.speedTimeout);var r=0;var n=(0,h.default)(i);var a=new n(this.iceMaterial);if(this.elements.length>0){var o=this.elements[this.elements.length-1];a.position.x=o.position.x+o.size*.5+w+a.size*.5}this.elements.push(a);this.branch.add(a);TweenMax.fromTo(a.scale,.6,{x:.1,y:.1,z:.1,delay:r},{x:1,y:1,z:1,ease:Expo.easeOut});TweenMax.fromTo(a.rotation,1.2,{x:0},{x:Math.PI,ease:Expo.easeOut},0);if(a.soundId){this.sound.setBuffer(m.default.getAudio(a.soundId));if(this.sound.isPlaying)this.sound.stop();this.sound.setVolume(.5);this.sound.play()}this.deltaTime=(Date.now()-this.initTime)*.001;this.initTime=Date.now();this.speed=this.deltaTime>this.maxDuration?this.maxDuration:this.deltaTime;this.cleanScene();this.currentBranchSize=a.position.x+a.size*.5;this.offset=this.currentBranchSize>T?this.currentBranchSize-T:a.size*.5;this.tl=new TimelineMax;this.tl.fromTo(this.frontLight.position,this.speed,{x:0},{x:T*1.4});this.elements.forEach(function(e){t.tl.to(e.position,t.speed,{x:"-="+t.offset,ease:Linear.easeNone},0)});this.speedTimeout=setTimeout(function(){t.speed=t.maxDuration},300)}},{key:"cleanScene",value:function e(){var t=this;this.elements.forEach(function(e){if(e.position.x<-e.size*.5){t.branch.remove(e);if(e.destroy)e.destroy();t.elements.splice(0,1)}})}},{key:"resize",value:function e(){this.camera.aspect=o.default.width/o.default.height;this.camera.updateProjectionMatrix()}},{key:"update",value:function e(t){if(this.controls)this.controls.update();if(this.iceMaterial)this.iceMaterial.uniforms.time.value+=.02;var i=t*.01}}]);return t}(n.Scene);i.default=M},{"../config/config":30,"../controls/Controls":33,"../materials/ice-material/IceMaterial":36,"../objects/parts/partsFactory":48,"../utils/debug":56,"../utils/preloader":58,"brindille-resize":8,three:27}],54:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:true});var r=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r)r.writable=true;Object.defineProperty(e,r.key,r)}}return function(t,i,r){if(i)e(t.prototype,i);if(r)e(t,r);return t}}();var n=e("three");var a=e("brindille-resize");var o=f(a);var s=e("../utils/debug");var l=e("../objects/Snow");var u=f(l);var c=e("../utils/preloader");var h=f(c);function f(e){return e&&e.__esModule?e:{default:e}}function d(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function p(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function m(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}var v=function(e){m(t,e);function t(){d(this,t);var e=p(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));e.isSkyDebug=false;return e}r(t,[{key:"onLoadComplete",value:function e(t){this.camera=new n.PerspectiveCamera(75,o.default.width/o.default.height,.1,1e3);this.add(this.camera);this.camera.position.z=800;this.snow=new u.default;this.add(this.snow)}},{key:"resize",value:function e(){this.camera.aspect=o.default.width/o.default.height;this.camera.updateProjectionMatrix()}},{key:"update",value:function e(t,i){if(this.snow)this.snow.update()}}]);return t}(n.Scene);i.default=v},{"../objects/Snow":37,"../utils/debug":56,"../utils/preloader":58,"brindille-resize":8,three:27}],55:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:true});var r=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r)r.writable=true;Object.defineProperty(e,r.key,r)}}return function(t,i,r){if(i)e(t.prototype,i);if(r)e(t,r);return t}}();var n=e("dom-classes");var a=o(n);function o(e){return e&&e.__esModule?e:{default:e}}function s(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var l=function(){function e(){s(this,e);this.onKeyUp=this.onKeyUp.bind(this);this.isVisible=false;this.$el=document.body.querySelector(".Tuto");this.$keys=[].slice.call(this.$el.querySelectorAll(".Tuto-keyboard"));window.addEventListener("keyup",this.onKeyUp)}r(e,[{key:"onKeyUp",value:function e(){this.$keys.forEach(function(e){if(a.default.has(e,"is-pressed")){a.default.remove(e,"is-pressed")}})}},{key:"onKeyPress",value:function e(t){if(!this.isVisible)return;this.$keys.forEach(function(e){if(parseInt(e.getAttribute("data-id"))===t){a.default.add(e,"is-pressed")}else{a.default.remove(e,"is-pressed")}})}},{key:"show",value:function e(){if(this.tlOut)this.tlOut.kill();this.isVisible=true;this.$el.style.display="block";this.tlIn=new TimelineMax;this.tlIn.fromTo(this.$el,.6,{alpha:0},{alpha:1,ease:Expo.easeOut},0);this.tlIn.staggerFromTo(this.$keys,.6,{alpha:0,y:-10},{alpha:1,y:0,ease:Expo.easeOut},.1,.6);return this.tlIn}},{key:"hide",value:function e(){var t=this;if(this.tlIn)this.tlIn.kill();this.tlOut=new TimelineMax;this.tlOut.to(this.$el,.6,{alpha:0,ease:Expo.easeOut,onComplete:function e(){t.isVisible=false}});this.tlOut.staggerTo(this.$keys,.6,{alpha:0,y:-10,ease:Expo.easeOut},0);return this.tlOut}}]);return e}();i.default=new l},{"dom-classes":12}],56:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:true});i.panelFX=i.gui=undefined;var r=e("guigui");var n=a(r);function a(e){return e&&e.__esModule?e:{default:e}}var o=i.gui=n.default.addPanel("Settings");var s=i.panelFX=n.default.addPanel("PostFX")},{guigui:15}],57:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:true});var r=[{type:"JsonModel",url:"./assets/models/merryxmas.js",id:"merryxmasModel"},{type:"JsonModel",url:"./assets/models/crystal.js",id:"crystalModel"},{type:"JsonModel",url:"./assets/models/crystal2.js",id:"crystal2Model"},{type:"JsonModel",url:"./assets/models/crystal3.js",id:"crystal3Model"},{type:"Audio",url:"./assets/sounds/ambient.mp3",id:"AmbientSound"},{type:"Audio",url:"./assets/sounds/Do.mp3",id:"DoSound"},{type:"Audio",url:"./assets/sounds/Re.mp3",id:"ReSound"},{type:"Audio",url:"./assets/sounds/Mi.mp3",id:"MiSound"},{type:"Audio",url:"./assets/sounds/Fa.mp3",id:"FaSound"},{type:"Audio",url:"./assets/sounds/Sol.mp3",id:"SolSound"},{type:"Audio",url:"./assets/sounds/La.mp3",id:"LaSound"},{type:"Audio",url:"./assets/sounds/Si.mp3",id:"SiSound"},{type:"Texture",url:"./assets/textures/snow.png",id:"SnowTexture"},{type:"Texture",url:"./assets/textures/ice-crystals-1.jpg",id:"FrozTexture"},{type:"Texture",url:"./assets/textures/noise.jpg",id:"NoiseTexture"},{type:"Texture",url:"./assets/textures/envmap2.jpg",id:"ReflectionTexture"}];i.default=r},{}],58:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:true});var r=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r)r.writable=true;Object.defineProperty(e,r.key,r)}}return function(t,i,r){if(i)e(t.prototype,i);if(r)e(t,r);return t}}();var n=e("three");function a(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var o=function(){function e(){a(this,e);this.jsonLoader=new n.JSONLoader;this.textureLoader=new n.TextureLoader;this.audioLoader=new n.AudioLoader;this.isLoaded=false}r(e,[{key:"load",value:function e(t,i){if(!t||!t.length)return;this.manifest=t;this.start(i)}},{key:"start",value:function e(t){var i=this;this.getManifestByType("JsonModel").forEach(function(e){e.isLoaded=false;i.jsonLoader.load(e.url,function(r){e.isLoaded=true;e.geometry=r;if(i.checkManifestCompletion()){t()}})});this.getManifestByType("Audio").forEach(function(e){e.isLoaded=false;i.audioLoader.load(e.url,function(r){e.isLoaded=true;e.audio=r;if(i.checkManifestCompletion()){t()}})});this.getManifestByType("Texture").forEach(function(e){e.isLoaded=false;i.textureLoader.load(e.url,function(r){e.isLoaded=true;e.texture=r;if(i.checkManifestCompletion()){t()}})});this.getManifestByType("Image").forEach(function(e){e.isLoaded=false;var r=new Image;r.addEventListener("load",function(){e.isLoaded=true;e.image=r;console.log("k",e);if(i.checkManifestCompletion()){t()}});r.src=e.url})}},{key:"getManifestByType",value:function e(t){return this.manifest.filter(function(e){return e.type===t})}},{key:"checkManifestCompletion",value:function e(){for(var t=0,i=this.manifest.length;t<i;t++){if(!this.manifest[t].isLoaded)return false}return true}},{key:"getGeometry",value:function e(t){var i=this.manifest.filter(function(e){return e.id===t})[0];if(i&&i.geometry){return i.geometry}return null}},{key:"getTexture",value:function e(t){var i=this.manifest.filter(function(e){return e.id===t})[0];if(i&&i.texture){return i.texture}return null}},{key:"getImage",value:function e(t){var i=this.manifest.filter(function(e){return e.id===t})[0];if(i&&i.image){return i.image}return null}},{key:"getAudio",value:function e(t){var i=this.manifest.filter(function(e){return e.id===t})[0];if(i&&i.audio){return i.audio}return null}}]);return e}();i.default=new o},{three:27}]},{},[35]);
