(function e(t,i,n){function r(s,o){if(!i[s]){if(!t[s]){var l=typeof require=="function"&&require;if(!o&&l)return l(s,!0);if(a)return a(s,!0);var u=new Error("Cannot find module '"+s+"'");throw u.code="MODULE_NOT_FOUND",u}var c=i[s]={exports:{}};t[s][0].call(c.exports,function(e){var i=t[s][1][e];return r(i?i:e)},c,c.exports,e,t,i,n)}return i[s].exports}var a=typeof require=="function"&&require;for(var s=0;s<n.length;s++)r(n[s]);return r})({1:[function(e,t,i){"use strict";t.exports.Composer=e("./src/Composer");t.exports.CopyPass=e("./src/passes/copy/CopyPass");t.exports.BlendMode={Normal:1,Dissolve:2,Darken:3,Multiply:4,ColorBurn:5,LinearBurn:6,DarkerColor:7,Lighten:8,Screen:9,ColorDodge:10,LinearDodge:11,LighterColor:12,Overlay:13,SoftLight:14,HardLight:15,VividLight:16,LinearLight:17,PinLight:18,HardMix:19,Difference:20,Exclusion:21,Substract:22,Divide:23}},{"./src/Composer":2,"./src/passes/copy/CopyPass":10}],2:[function(e,t,i){"use strict";var n=e("three");var r=e("./passes/copy/CopyPass");var a=e("./Stack");var s=e("./Pass");function o(e,t){var i=e.getPixelRatio();this.width=Math.floor(e.context.canvas.width/i)||1;this.height=Math.floor(e.context.canvas.height/i)||1;this.output=null;this.input=null;this.read=null;this.write=null;this.settings=t||{};this.useRGBA=this.settings.useRGBA||false;this.renderer=e;this.copyPass=new r(this.settings);this.defaultMaterial=new n.MeshBasicMaterial({color:65280,wireframe:false});this.scene=new n.Scene;this.quad=new n.Mesh(new n.PlaneBufferGeometry(1,1),this.defaultMaterial);this.scene.add(this.quad);this.camera=new n.OrthographicCamera(1,1,1,1,-1e4,1e4);this.front=new n.WebGLRenderTarget(1,1,{minFilter:this.settings.minFilter!==undefined?this.settings.minFilter:n.LinearFilter,magFilter:this.settings.magFilter!==undefined?this.settings.magFilter:n.LinearFilter,wrapS:this.settings.wrapS!==undefined?this.settings.wrapS:n.ClampToEdgeWrapping,wrapT:this.settings.wrapT!==undefined?this.settings.wrapT:n.ClampToEdgeWrapping,format:this.useRGBA?n.RGBAFormat:n.RGBFormat,type:this.settings.type!==undefined?this.settings.type:n.UnsignedByteType,stencilBuffer:this.settings.stencilBuffer!==undefined?this.settings.stencilBuffer:true});this.back=this.front.clone();this.startTime=Date.now();this.passes={};this.setSize(this.width,this.height)}t.exports=o;o.prototype.swapBuffers=function(){this.output=this.write;this.input=this.read;var e=this.write;this.write=this.read;this.read=e};o.prototype.render=function(e,t,i,n){if(i)this.swapBuffers();this.renderer.render(e,t,n?n:this.write,true);if(!n)this.swapBuffers()};o.prototype.toScreen=function(e){this.quad.material=e?e.shader:this.copyPass.shader;this.quad.material.uniforms.tInput.value=this.read.texture;this.quad.material.uniforms.resolution.value.set(this.width,this.height);this.renderer.render(this.scene,this.camera)};o.prototype.toTexture=function(e,t){this.quad.material=t?t.shader:this.copyPass.shader;this.quad.material.uniforms.tInput.value=this.read.texture;this.renderer.render(this.scene,this.camera,e,false)};o.prototype.pass=function(e){if(e instanceof a){this.passStack(e)}else{if(e instanceof n.ShaderMaterial){this.quad.material=e}if(e instanceof s){e.run(this);return}if(!e.isSim){this.quad.material.uniforms.tInput.value=this.read.texture}this.quad.material.uniforms.resolution.value.set(this.width,this.height);this.quad.material.uniforms.time.value=.001*(Date.now()-this.startTime);this.renderer.render(this.scene,this.camera,this.write,false);this.swapBuffers()}};o.prototype.passStack=function(e){e.getPasses().forEach(function(e){this.pass(e)}.bind(this))};o.prototype.reset=function(){this.read=this.front;this.write=this.back;this.output=this.write;this.input=this.read};o.prototype.setSource=function(e){this.quad.material=this.copyPass.shader;this.quad.material.uniforms.tInput.value=e;this.renderer.render(this.scene,this.camera,this.write,true);this.swapBuffers()};o.prototype.setSize=function(e,t){this.width=e;this.height=t;this.camera.projectionMatrix.makeOrthographic(e/-2,e/2,t/2,t/-2,this.camera.near,this.camera.far);this.quad.scale.set(e,t,1);this.front.setSize(e,t);this.back.setSize(e,t)}},{"./Pass":3,"./Stack":4,"./passes/copy/CopyPass":10,three:31}],3:[function(e,t,i){"use strict";var n=e("three");var r=e("./utils/processShader");function a(){this.shader=null;this.loaded=null;this.params={};this.isSim=false}t.exports=a;a.prototype.setShader=function(e,t){this.shader=r(e,t)};a.prototype.run=function(e){e.pass(this.shader)};a.prototype.getOfflineTexture=function(e,t,i){return new n.WebGLRenderTarget(e,t,{minFilter:n.LinearFilter,magFilter:n.LinearFilter,format:i?n.RGBAFormat:n.RGBFormat})}},{"./utils/processShader":12,three:31}],4:[function(e,t,i){"use strict";function n(e){this.passItems=[];this.shadersPool=e;this.passes=[]}t.exports=n;n.prototype.addPass=function(e,t,i,n){var r=0;var a={shaderName:e,enabled:t||false};this.passItems.push(a);r=this.passItems.length;this.updatePasses();if(n){return this.movePassToIndex(this.passItems[r],n)}else{return r-1}};n.prototype.removePass=function(e){this.passItems.splice(e,1);this.updatePasses()};n.prototype.enablePass=function(e){this.passItems[e].enabled=true;this.updatePasses()};n.prototype.disablePass=function(e){this.passItems[e].enabled=false;this.updatePasses()};n.prototype.isPassEnabled=function(e){return this.passItems[e].enabled};n.prototype.movePassToIndex=function(e,t){this.passItems.splice(t,0,this.passItems.splice(e,1)[0]);this.updatePasses();return t};n.prototype.reverse=function(){this.passItems.reverse();this.updatePasses()};n.prototype.updatePasses=function(){this.passes=this.shadersPool.getPasses(this.passItems);this.passItems.forEach(function(e,t){if(e.params===undefined){e.params=JSON.parse(JSON.stringify(this.passes[t].params))}}.bind(this))};n.prototype.getPasses=function(){return this.passes}},{}],5:[function(e,t,i){"use strict";var n=e("three");var r=e("../../Pass");var a="#define GLSLIFY 1\nvarying vec2 vUv;\n\nvoid main() {\n\n  vUv = uv;\n  gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n}";var s="#define GLSLIFY 1\nvarying vec2 vUv;\nuniform sampler2D tInput;\nuniform sampler2D tInput2;\nuniform vec2 resolution;\nuniform vec2 resolution2;\nuniform float aspectRatio;\nuniform float aspectRatio2;\nuniform int mode;\nuniform int sizeMode;\nuniform float opacity;\n\nvec2 vUv2;\n\nfloat applyOverlayToChannel( float base, float blend ) {\n\n  return (base < 0.5 ? (2.0 * base * blend) : (1.0 - 2.0 * (1.0 - base) * (1.0 - blend)));\n\n}\n\nfloat applySoftLightToChannel( float base, float blend ) {\n\n  return ((blend < 0.5) ? (2.0 * base * blend + base * base * (1.0 - 2.0 * blend)) : (sqrt(base) * (2.0 * blend - 1.0) + 2.0 * base * (1.0 - blend)));\n\n}\n\nfloat applyColorBurnToChannel( float base, float blend ) {\n\n  return ((blend == 0.0) ? blend : max((1.0 - ((1.0 - base) / blend)), 0.0));\n\n}\n\nfloat applyColorDodgeToChannel( float base, float blend ) {\n\n  return ((blend == 1.0) ? blend : min(base / (1.0 - blend), 1.0));\n\n}\n\nfloat applyLinearBurnToChannel( float base, float blend ) {\n\n  return max(base + blend - 1., 0.0 );\n\n}\n\nfloat applyLinearDodgeToChannel( float base, float blend ) {\n\n  return min( base + blend, 1. );\n\n}\n\nfloat applyLinearLightToChannel( float base, float blend ) {\n\n  return ( blend < .5 ) ? applyLinearBurnToChannel( base, 2. * blend ) : applyLinearDodgeToChannel( base, 2. * ( blend - .5 ) );\n\n}\n\nvoid main() {\n\n  vUv2 = vUv;\n  \n  if( sizeMode == 1 ) {\n    \n    if( aspectRatio2 > aspectRatio ) {\n      vUv2.x = vUv.x * aspectRatio / aspectRatio2;\n      vUv2.x += .5 * ( 1. - aspectRatio / aspectRatio2 ); \n      vUv2.y = vUv.y;\n    }\n\n    if( aspectRatio2 < aspectRatio ) {\n      vUv2.x = vUv.x;\n      vUv2.y = vUv.y * aspectRatio2 / aspectRatio;\n      vUv2.y += .5 * ( 1. - aspectRatio2 / aspectRatio );\n    }\n\n  }\n\n  vec4 base = texture2D( tInput, vUv );\n  vec4 blend = texture2D( tInput2, vUv2 );\n\n  if( mode == 1 ) { // normal\n\n    gl_FragColor = base;\n    gl_FragColor.a *= opacity;\n    return;\n\n  }\n\n  if( mode == 2 ) { // dissolve\n\n  }\n\n  if( mode == 3 ) { // darken\n\n    gl_FragColor = min( base, blend );\n    return;\n\n  }\n\n  if( mode == 4 ) { // multiply\n\n    gl_FragColor = base * blend;\n    return;\n\n  }\n\n  if( mode == 5 ) { // color burn\n\n    gl_FragColor = vec4(\n      applyColorBurnToChannel( base.r, blend.r ),\n      applyColorBurnToChannel( base.g, blend.g ),\n      applyColorBurnToChannel( base.b, blend.b ),\n      applyColorBurnToChannel( base.a, blend.a )\n    );\n    return;\n\n  }\n\n  if( mode == 6 ) { // linear burn\n\n    gl_FragColor = max(base + blend - 1.0, 0.0);\n    return;\n\n  }\n\n  if( mode == 7 ) { // darker color\n\n  }\n\n  if( mode == 8 ) { // lighten\n\n    gl_FragColor = max( base, blend );\n    return;\n\n  }\n\n  if( mode == 9 ) { // screen\n\n    gl_FragColor = (1.0 - ((1.0 - base) * (1.0 - blend)));\n    gl_FragColor = gl_FragColor * opacity + base * ( 1. - opacity );\n    return;\n\n  }\n\n  if( mode == 10 ) { // color dodge\n\n    gl_FragColor = vec4(\n      applyColorDodgeToChannel( base.r, blend.r ),\n      applyColorDodgeToChannel( base.g, blend.g ),\n      applyColorDodgeToChannel( base.b, blend.b ),\n      applyColorDodgeToChannel( base.a, blend.a )\n    );\n    return;\n\n  }\n\n  if( mode == 11 ) { // linear dodge\n\n    gl_FragColor = min(base + blend, 1.0);\n    return;\n\n  }\n\n  if( mode == 12 ) { // lighter color\n\n  }\n\n  if( mode == 13 ) { // overlay\n\n    gl_FragColor = gl_FragColor = vec4( \n      applyOverlayToChannel( base.r, blend.r ),\n      applyOverlayToChannel( base.g, blend.g ),\n      applyOverlayToChannel( base.b, blend.b ),\n      applyOverlayToChannel( base.a, blend.a )\n    );\n    gl_FragColor = gl_FragColor * opacity + base * ( 1. - opacity );\n  \n    return;\n\n  }\n\n  if( mode == 14 ) { // soft light\n\n    gl_FragColor = vec4( \n      applySoftLightToChannel( base.r, blend.r ),\n      applySoftLightToChannel( base.g, blend.g ),\n      applySoftLightToChannel( base.b, blend.b ),\n      applySoftLightToChannel( base.a, blend.a )\n    );\n    return;\n\n  }\n\n  if( mode == 15 ) { // hard light\n\n    gl_FragColor = vec4( \n      applyOverlayToChannel( base.r, blend.r ),\n      applyOverlayToChannel( base.g, blend.g ),\n      applyOverlayToChannel( base.b, blend.b ),\n      applyOverlayToChannel( base.a, blend.a )\n    );\n    gl_FragColor = gl_FragColor * opacity + base * ( 1. - opacity );\n    return;\n\n  }\n\n  if( mode == 16 ) { // vivid light\n\n  }\n\n  if( mode == 17 ) { // linear light\n\n    gl_FragColor = vec4( \n      applyLinearLightToChannel( base.r, blend.r ),\n      applyLinearLightToChannel( base.g, blend.g ),\n      applyLinearLightToChannel( base.b, blend.b ),\n      applyLinearLightToChannel( base.a, blend.a )\n    );\n    return;\n\n  }\n\n  if( mode == 18 ) { // pin light\n\n  }\n\n  if( mode == 19 ) { // hard mix\n\n  }\n\n  if( mode == 20 ) { // difference\n\n    gl_FragColor = abs( base - blend );\n    gl_FragColor.a = base.a + blend.b;\n    return;\n\n  }\n\n  if( mode == 21 ) { // exclusion\n\n    gl_FragColor = base + blend - 2. * base * blend;\n    \n  }\n\n  if( mode == 22 ) { // substract\n\n  }\n\n  if( mode == 23 ) { // divide\n\n  }\n\n  gl_FragColor = vec4( 1., 0., 1., 1. );\n\n}";function o(e){r.call(this);e=e||{};this.setShader(a,s);this.params.mode=e.mode||1;this.params.opacity=e.opacity||1;this.params.tInput2=e.tInput2||null;this.params.resolution2=e.resolution2||new n.Vector2;this.params.sizeMode=e.sizeMode||1;this.params.aspectRatio=e.aspectRatio||1;this.params.aspectRatio2=e.aspectRatio2||1}t.exports=o;o.prototype=Object.create(r.prototype);o.prototype.constructor=o;o.prototype.run=function(e){this.shader.uniforms.mode.value=this.params.mode;this.shader.uniforms.opacity.value=this.params.opacity;this.shader.uniforms.tInput2.value=this.params.tInput2;this.shader.uniforms.sizeMode.value=this.params.sizeMode;this.shader.uniforms.aspectRatio.value=this.params.aspectRatio;this.shader.uniforms.aspectRatio2.value=this.params.aspectRatio2;e.pass(this.shader)}},{"../../Pass":3,three:31}],6:[function(e,t,i){"use strict";var n=e("three");var r=e("../../Pass");var a=e("../../Composer");var s=e("../../..").BlendMode;var o=e("../box-blur/FullBoxBlurPass");var l=e("../blend/BlendPass");var u=e("../zoom-blur/ZoomBlurPass");var c=e("../brightness-contrast/BrightnessContrastPass");function h(e){r.call(this);e=e||{};this.composer=null;this.tmpTexture=this.getOfflineTexture(e.width,e.height,true);this.blurPass=new o(2);this.blendPass=new l;this.zoomBlur=new u;this.brightnessContrastPass=new c;this.width=e.width||512;this.height=e.height||512;this.params.blurAmount=e.blurAmount||2;this.params.applyZoomBlur=e.applyZoomBlur||false;this.params.zoomBlurStrength=e.zoomBlurStrength||.2;this.params.useTexture=e.useTexture||false;this.params.zoomBlurCenter=e.zoomBlurCenter||new n.Vector2(.5,.5);this.params.blendMode=e.blendMode||s.Screen;this.params.glowTexture=null}t.exports=h;h.prototype=Object.create(r.prototype);h.prototype.constructor=h;h.prototype.run=function(e){if(!this.composer){this.composer=new a(e.renderer,{useRGBA:true});this.composer.setSize(this.width,this.height)}this.composer.reset();if(this.params.useTexture===true){this.composer.setSource(this.params.glowTexture.texture)}else{this.composer.setSource(e.output.texture)}this.blurPass.params.amount=this.params.blurAmount;this.composer.pass(this.blurPass);if(this.params.applyZoomBlur){this.zoomBlur.params.center.set(.5,.5);this.zoomBlur.params.strength=this.params.zoomBlurStrength;this.composer.pass(this.zoomBlur)}if(this.params.useTexture===true){this.blendPass.params.mode=s.Screen;this.blendPass.params.tInput=this.params.glowTexture.texture;e.pass(this.blendPass)}this.blendPass.params.mode=this.params.blendMode;this.blendPass.params.tInput2=this.composer.output.texture;e.pass(this.blendPass)}},{"../../..":1,"../../Composer":2,"../../Pass":3,"../blend/BlendPass":5,"../box-blur/FullBoxBlurPass":8,"../brightness-contrast/BrightnessContrastPass":9,"../zoom-blur/ZoomBlurPass":11,three:31}],7:[function(e,t,i){"use strict";var n=e("three");var r=e("../../Pass");var a="#define GLSLIFY 1\n// non-dependent texture read according to :\n// http://xissburg.com/faster-gaussian-blur-in-glsl/\n\nvarying vec2 blurTexCoords[9];\nuniform vec2 delta;\nuniform vec2 resolution;\n\nvoid main() {\n\n  vec2 inc = delta / resolution;\n\n  blurTexCoords[ 0 ] = uv - inc * 4.;\n  blurTexCoords[ 1 ] = uv - inc * 3.;\n  blurTexCoords[ 2 ] = uv - inc * 2.;\n  blurTexCoords[ 3 ] = uv - inc * 1.;\n  blurTexCoords[ 4 ] = uv;\n  blurTexCoords[ 5 ] = uv + inc * 1.;\n  blurTexCoords[ 6 ] = uv + inc * 2.;\n  blurTexCoords[ 7 ] = uv + inc * 3.;\n  blurTexCoords[ 8 ] = uv + inc * 4.;\n\n  gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n}";var s="#define GLSLIFY 1\n// non-dependent texture read according to :\n// http://xissburg.com/faster-gaussian-blur-in-glsl/\n\nuniform sampler2D tInput;\nuniform vec2 delta;\nuniform vec2 resolution;\nvarying vec2 blurTexCoords[9];\n\nvoid main() {\n\n  vec4 sum = vec4( 0. );\n\n  sum += texture2D( tInput, blurTexCoords[0] ) * 0.051;\n  sum += texture2D( tInput, blurTexCoords[1] ) * 0.0918;\n  sum += texture2D( tInput, blurTexCoords[2] ) * 0.12245;\n  sum += texture2D( tInput, blurTexCoords[3] ) * 0.1531;\n  sum += texture2D( tInput, blurTexCoords[4] ) * 0.1633;\n  sum += texture2D( tInput, blurTexCoords[5] ) * 0.1531;\n  sum += texture2D( tInput, blurTexCoords[6] ) * 0.12245;\n  sum += texture2D( tInput, blurTexCoords[7] ) * 0.0918;\n  sum += texture2D( tInput, blurTexCoords[8] ) * 0.051;\n\n  gl_FragColor = sum;\n\n}";function o(e,t){r.call(this);this.setShader(a,s);this.params.delta=new n.Vector2(e||0,t||0)}t.exports=o;o.prototype=Object.create(r.prototype);o.prototype.constructor=o;o.prototype.run=function(e){this.shader.uniforms.delta.value.copy(this.params.delta);e.pass(this.shader)}},{"../../Pass":3,three:31}],8:[function(e,t,i){"use strict";var n=e("../../Pass");var r=e("./BoxBlurPass");function a(e){n.call(this);e=e||2;this.boxPass=new r(e,e);this.params.amount=e}t.exports=a;a.prototype=Object.create(n.prototype);a.prototype.constructor=a;a.prototype.run=function(e){var t=this.params.amount;this.boxPass.params.delta.set(t,0);e.pass(this.boxPass);this.boxPass.params.delta.set(0,t);e.pass(this.boxPass)}},{"../../Pass":3,"./BoxBlurPass":7}],9:[function(e,t,i){"use strict";var n=e("../../Pass");var r="#define GLSLIFY 1\nvarying vec2 vUv;\n\nvoid main() {\n\n  vUv = uv;\n  gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n}";var a="#define GLSLIFY 1\nuniform float brightness;\nuniform float contrast;\nuniform sampler2D tInput;\n\nvarying vec2 vUv;\n\nvoid main() {\n\n  vec3 color = texture2D(tInput, vUv).rgb;\n  vec3 colorContrasted = (color) * contrast;\n  vec3 bright = colorContrasted + vec3(brightness,brightness,brightness);\n  gl_FragColor.rgb = bright;\n  gl_FragColor.a = 1.;\n\n}";function s(e,t){n.call(this);this.setShader(r,a);this.params.brightness=e||1;this.params.contrast=t||1}t.exports=s;s.prototype=Object.create(n.prototype);s.prototype.constructor=s;s.prototype.run=function(e){this.shader.uniforms.brightness.value=this.params.brightness;this.shader.uniforms.contrast.value=this.params.contrast;e.pass(this.shader)}},{"../../Pass":3}],10:[function(e,t,i){"use strict";var n=e("../../Pass");var r="#define GLSLIFY 1\nvarying vec2 vUv;\n\nvoid main() {\n\n  vUv = uv;\n  gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n}";var a="#define GLSLIFY 1\nvarying vec2 vUv;\nuniform sampler2D tInput;\n\nvoid main() {\n  gl_FragColor = texture2D( tInput, vUv );\n\n}";function s(){n.call(this);this.setShader(r,a)}t.exports=s;s.prototype=Object.create(n.prototype);s.prototype.constructor=s},{"../../Pass":3}],11:[function(e,t,i){"use strict";var n=e("three");var r=e("../../Pass");var a="#define GLSLIFY 1\nvarying vec2 vUv;\n\nvoid main() {\n\n  vUv = uv;\n  gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n}";var s="#define GLSLIFY 1\nuniform sampler2D tInput;\nuniform vec2 center;\nuniform float strength;\nuniform vec2 resolution;\nvarying vec2 vUv;\n\nfloat random(vec3 scale,float seed){return fract(sin(dot(gl_FragCoord.xyz+seed,scale))*43758.5453+seed);}\n\nvoid main(){\n  vec4 color=vec4(0.0);\n  float total=0.0;\n  vec2 toCenter=center-vUv*resolution;\n  float offset=random(vec3(12.9898,78.233,151.7182),0.0);\n  for(float t=0.0;t<=40.0;t++){\n    float percent=(t+offset)/40.0;\n    float weight=4.0*(percent-percent*percent);\n    vec4 sample=texture2D(tInput,vUv+toCenter*percent*strength/resolution);\n    sample.rgb*=sample.a;\n    color+=sample*weight;\n    total+=weight;\n  }\n  gl_FragColor=color/total;\n  gl_FragColor.rgb/=gl_FragColor.a+0.00001;\n}";function o(e){r.call(this);e=e||{};this.setShader(a,s);this.params.center=new n.Vector2(e.centerX||.5,e.centerY||.5);this.params.strength=e.strength||.1}t.exports=o;o.prototype=Object.create(r.prototype);o.prototype.constructor=o;o.prototype.run=function(e){this.shader.uniforms.center.value.set(e.width*this.params.center.x,e.height*this.params.center.y);this.shader.uniforms.strength.value=this.params.strength;e.pass(this.shader)}},{"../../Pass":3,three:31}],12:[function(e,t,i){"use strict";var n=e("three");t.exports=function e(t,i){var r=/uniform\s+(lowp|mediump|highp)?\s*([^\s]+)\s+([^\s]+)\s*;/gi;var a=/uniform\s+([^\s]+)\s+([^\s]+)\s*\[\s*(\w+)\s*\]*\s*;/gi;var s={sampler2D:{type:"t",value:function(){return new n.Texture}},samplerCube:{type:"t",value:function(){}},bool:{type:"b",value:function(){return 0}},int:{type:"i",value:function(){return 0}},float:{type:"f",value:function(){return 0}},vec2:{type:"v2",value:function(){return new n.Vector2}},vec3:{type:"v3",value:function(){return new n.Vector3}},vec4:{type:"v4",value:function(){return new n.Vector4}},bvec2:{type:"v2",value:function(){return new n.Vector2}},bvec3:{type:"v3",value:function(){return new n.Vector3}},bvec4:{type:"v4",value:function(){return new n.Vector4}},ivec2:{type:"v2",value:function(){return new n.Vector2}},ivec3:{type:"v3",value:function(){return new n.Vector3}},ivec4:{type:"v4",value:function(){return new n.Vector4}},mat2:{type:"v2",value:function(){return new n.Matrix2}},mat3:{type:"v3",value:function(){return new n.Matrix3}},mat4:{type:"v4",value:function(){return new n.Matrix4}}};var o={float:{type:"fv",value:function(){return[]}},vec3:{type:"v3v",value:function(){return[]}}};var l;var u={resolution:{type:"v2",value:new n.Vector2(1,1),default:true},time:{type:"f",value:Date.now(),default:true},tInput:{type:"t",value:new n.Texture,default:true}};var c,h,f;while((l=r.exec(i))!==null){if(l.index===r.lastIndex){r.lastIndex++}c=l[2];h=l[3];u[h]={type:s[c].type,value:s[c].value()}}while((l=a.exec(i))!==null){if(l.index===r.lastIndex){r.lastIndex++}c=l[1];h=l[2];f=l[3];u[h]={type:o[c].type,value:o[c].value()}}var d=new n.ShaderMaterial({uniforms:u,vertexShader:t,fragmentShader:i,depthWrite:false,depthTest:false,transparent:true});if(parseInt(n.REVISION)<87){d.shading=n.FlatShading}else{d.flatShading=true}return d}},{three:31}],13:[function(e,t,i){"use strict";var n=e("component-emitter");var r=e("debounce");var a=t.exports;n(a);a.debounceDelay=50;a.onGlobalResize=function(){this.width=window.innerWidth;this.height=window.innerHeight;this.halfWidth=.5*this.width;this.halfHeight=.5*this.height;this.applyResize();if(this.debounceDelay>0){this.debounceResize()}else{this.applyResizeDebounce()}};a.applyResizeDebounce=function(){this.emit("resizeDebounce")};a.applyResize=function(){this.emit("resize")};a.addListener=function(e,t){this.on(t?"resize":"resizeDebounce",e)};a.removeListener=function(e){if(e){this.off("resize",e);this.off("resizeDebounce",e)}};a.debounceResize=r(a.applyResizeDebounce.bind(a),a.debounceDelay);a.onGlobalResize();window.addEventListener("resize",a.onGlobalResize.bind(a))},{"component-emitter":15,debounce:16}],14:[function(e,t,i){t.exports=n;function n(e,t,i){return t<i?e<t?t:e>i?i:e:e<i?i:e>t?t:e}},{}],15:[function(e,t,i){if(typeof t!=="undefined"){t.exports=n}function n(e){if(e)return r(e)}function r(e){for(var t in n.prototype){e[t]=n.prototype[t]}return e}n.prototype.on=n.prototype.addEventListener=function(e,t){this._callbacks=this._callbacks||{};(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t);return this};n.prototype.once=function(e,t){function i(){this.off(e,i);t.apply(this,arguments)}i.fn=t;this.on(e,i);return this};n.prototype.off=n.prototype.removeListener=n.prototype.removeAllListeners=n.prototype.removeEventListener=function(e,t){this._callbacks=this._callbacks||{};if(0==arguments.length){this._callbacks={};return this}var i=this._callbacks["$"+e];if(!i)return this;if(1==arguments.length){delete this._callbacks["$"+e];return this}var n;for(var r=0;r<i.length;r++){n=i[r];if(n===t||n.fn===t){i.splice(r,1);break}}return this};n.prototype.emit=function(e){this._callbacks=this._callbacks||{};var t=[].slice.call(arguments,1),i=this._callbacks["$"+e];if(i){i=i.slice(0);for(var n=0,r=i.length;n<r;++n){i[n].apply(this,t)}}return this};n.prototype.listeners=function(e){this._callbacks=this._callbacks||{};return this._callbacks["$"+e]||[]};n.prototype.hasListeners=function(e){return!!this.listeners(e).length}},{}],16:[function(e,t,i){t.exports=function e(t,i,n){var r,a,s,o,l;if(null==i)i=100;function u(){var e=Date.now()-o;if(e<i&&e>=0){r=setTimeout(u,i-e)}else{r=null;if(!n){l=t.apply(s,a);s=a=null}}}var c=function(){s=this;a=arguments;o=Date.now();var e=n&&!r;if(!r)r=setTimeout(u,i);if(e){l=t.apply(s,a);s=a=null}return l};c.clear=function(){if(r){clearTimeout(r);r=null}};return c}},{}],17:[function(e,t,i){var n=e("indexof");var r=/\s+/;var a=Object.prototype.toString;t.exports=s;t.exports.add=o;t.exports.contains=l;t.exports.has=l;t.exports.toggle=h;t.exports.remove=u;t.exports.removeMatching=c;function s(e){if(e.classList){return e.classList}var t=e.className.replace(/^\s+|\s+$/g,"");var i=t.split(r);if(""===i[0])i.shift();return i}function o(e,t){if(e.classList){e.classList.add(t);return}var i=s(e);var r=n(i,t);if(!~r)i.push(t);e.className=i.join(" ")}function l(e,t){return e.classList?e.classList.contains(t):!!~n(s(e),t)}function u(e,t){if("[object RegExp]"==a.call(t)){return c(e,t)}if(e.classList){e.classList.remove(t);return}var i=s(e);var r=n(i,t);if(~r)i.splice(r,1);e.className=i.join(" ")}function c(e,t,i){var n=Array.prototype.slice.call(s(e));for(var r=0;r<n.length;r++){if(t.test(n[r])){u(e,n[r])}}}function h(e,t){if(e.classList){return e.classList.toggle(t)}if(l(e,t)){u(e,t)}else{o(e,t)}}},{indexof:21}],18:[function(e,t,i){function n(){this._events=this._events||{};this._maxListeners=this._maxListeners||undefined}t.exports=n;n.EventEmitter=n;n.prototype._events=undefined;n.prototype._maxListeners=undefined;n.defaultMaxListeners=10;n.prototype.setMaxListeners=function(e){if(!a(e)||e<0||isNaN(e))throw TypeError("n must be a positive number");this._maxListeners=e;return this};n.prototype.emit=function(e){var t,i,n,a,l,u;if(!this._events)this._events={};if(e==="error"){if(!this._events.error||s(this._events.error)&&!this._events.error.length){t=arguments[1];if(t instanceof Error){throw t}else{var c=new Error('Uncaught, unspecified "error" event. ('+t+")");c.context=t;throw c}}}i=this._events[e];if(o(i))return false;if(r(i)){switch(arguments.length){case 1:i.call(this);break;case 2:i.call(this,arguments[1]);break;case 3:i.call(this,arguments[1],arguments[2]);break;default:a=Array.prototype.slice.call(arguments,1);i.apply(this,a)}}else if(s(i)){a=Array.prototype.slice.call(arguments,1);u=i.slice();n=u.length;for(l=0;l<n;l++)u[l].apply(this,a)}return true};n.prototype.addListener=function(e,t){var i;if(!r(t))throw TypeError("listener must be a function");if(!this._events)this._events={};if(this._events.newListener)this.emit("newListener",e,r(t.listener)?t.listener:t);if(!this._events[e])this._events[e]=t;else if(s(this._events[e]))this._events[e].push(t);else this._events[e]=[this._events[e],t];if(s(this._events[e])&&!this._events[e].warned){if(!o(this._maxListeners)){i=this._maxListeners}else{i=n.defaultMaxListeners}if(i&&i>0&&this._events[e].length>i){this._events[e].warned=true;console.error("(node) warning: possible EventEmitter memory "+"leak detected. %d listeners added. "+"Use emitter.setMaxListeners() to increase limit.",this._events[e].length);if(typeof console.trace==="function"){console.trace()}}}return this};n.prototype.on=n.prototype.addListener;n.prototype.once=function(e,t){if(!r(t))throw TypeError("listener must be a function");var i=false;function n(){this.removeListener(e,n);if(!i){i=true;t.apply(this,arguments)}}n.listener=t;this.on(e,n);return this};n.prototype.removeListener=function(e,t){var i,n,a,o;if(!r(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;i=this._events[e];a=i.length;n=-1;if(i===t||r(i.listener)&&i.listener===t){delete this._events[e];if(this._events.removeListener)this.emit("removeListener",e,t)}else if(s(i)){for(o=a;o-- >0;){if(i[o]===t||i[o].listener&&i[o].listener===t){n=o;break}}if(n<0)return this;if(i.length===1){i.length=0;delete this._events[e]}else{i.splice(n,1)}if(this._events.removeListener)this.emit("removeListener",e,t)}return this};n.prototype.removeAllListeners=function(e){var t,i;if(!this._events)return this;if(!this._events.removeListener){if(arguments.length===0)this._events={};else if(this._events[e])delete this._events[e];return this}if(arguments.length===0){for(t in this._events){if(t==="removeListener")continue;this.removeAllListeners(t)}this.removeAllListeners("removeListener");this._events={};return this}i=this._events[e];if(r(i)){this.removeListener(e,i)}else if(i){while(i.length)this.removeListener(e,i[i.length-1])}delete this._events[e];return this};n.prototype.listeners=function(e){var t;if(!this._events||!this._events[e])t=[];else if(r(this._events[e]))t=[this._events[e]];else t=this._events[e].slice();return t};n.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(r(t))return 1;else if(t)return t.length}return 0};n.listenerCount=function(e,t){return e.listenerCount(t)};function r(e){return typeof e==="function"}function a(e){return typeof e==="number"}function s(e){return typeof e==="object"&&e!==null}function o(e){return e===void 0}},{}],19:[function(e,t,i){(function(e){var i=typeof t!=="undefined"&&t.exports&&typeof e!=="undefined"?e:this||window;(i._gsQueue||(i._gsQueue=[])).push(function(){"use strict";i._gsDefine("TweenMax",["core.Animation","core.SimpleTimeline","TweenLite"],function(e,t,i){var n=function(e){var t=[],i=e.length,n;for(n=0;n!==i;t.push(e[n++]));return t},r=function(e,t,i){var n=e.cycle,r,a;for(r in n){a=n[r];e[r]=typeof a==="function"?a(i,t[i]):a[i%a.length]}delete e.cycle},a=function(e,t,n){i.call(this,e,t,n);this._cycle=0;this._yoyo=this.vars.yoyo===true||!!this.vars.yoyoEase;this._repeat=this.vars.repeat||0;this._repeatDelay=this.vars.repeatDelay||0;if(this._repeat){this._uncache(true)}this.render=a.prototype.render},s=1e-10,o=i._internals,l=o.isSelector,u=o.isArray,c=a.prototype=i.to({},.1,{}),h=[];a.version="1.20.3";c.constructor=a;c.kill()._gc=false;a.killTweensOf=a.killDelayedCallsTo=i.killTweensOf;a.getTweensOf=i.getTweensOf;a.lagSmoothing=i.lagSmoothing;a.ticker=i.ticker;a.render=i.render;c.invalidate=function(){this._yoyo=this.vars.yoyo===true||!!this.vars.yoyoEase;this._repeat=this.vars.repeat||0;this._repeatDelay=this.vars.repeatDelay||0;this._yoyoEase=null;this._uncache(true);return i.prototype.invalidate.call(this)};c.updateTo=function(e,t){var n=this.ratio,r=this.vars.immediateRender||e.immediateRender,a;if(t&&this._startTime<this._timeline._time){this._startTime=this._timeline._time;this._uncache(false);if(this._gc){this._enabled(true,false)}else{this._timeline.insert(this,this._startTime-this._delay)}}for(a in e){this.vars[a]=e[a]}if(this._initted||r){if(t){this._initted=false;if(r){this.render(0,true,true)}}else{if(this._gc){this._enabled(true,false)}if(this._notifyPluginsOfEnabled&&this._firstPT){i._onPluginEvent("_onDisable",this)}if(this._time/this._duration>.998){var s=this._totalTime;this.render(0,true,false);this._initted=false;this.render(s,true,false)}else{this._initted=false;this._init();if(this._time>0||r){var o=1/(1-n),l=this._firstPT,u;while(l){u=l.s+l.c;l.c*=o;l.s=u-l.c;l=l._next}}}}}return this};c.render=function(e,t,n){if(!this._initted)if(this._duration===0&&this.vars.repeat){this.invalidate()}var r=!this._dirty?this._totalDuration:this.totalDuration(),a=this._time,l=this._totalTime,u=this._cycle,c=this._duration,h=this._rawPrevTime,f,d,p,m,v,g,y,b,x;if(e>=r-1e-7&&e>=0){this._totalTime=r;this._cycle=this._repeat;if(this._yoyo&&(this._cycle&1)!==0){this._time=0;this.ratio=this._ease._calcEnd?this._ease.getRatio(0):0}else{this._time=c;this.ratio=this._ease._calcEnd?this._ease.getRatio(1):1}if(!this._reversed){f=true;d="onComplete";n=n||this._timeline.autoRemoveChildren}if(c===0)if(this._initted||!this.vars.lazy||n){if(this._startTime===this._timeline._duration){e=0}if(h<0||e<=0&&e>=-1e-7||h===s&&this.data!=="isPause")if(h!==e){n=true;if(h>s){d="onReverseComplete"}}this._rawPrevTime=b=!t||e||h===e?e:s}}else if(e<1e-7){this._totalTime=this._time=this._cycle=0;this.ratio=this._ease._calcEnd?this._ease.getRatio(0):0;if(l!==0||c===0&&h>0){d="onReverseComplete";f=this._reversed}if(e<0){this._active=false;if(c===0)if(this._initted||!this.vars.lazy||n){if(h>=0){n=true}this._rawPrevTime=b=!t||e||h===e?e:s}}if(!this._initted){n=true}}else{this._totalTime=this._time=e;if(this._repeat!==0){m=c+this._repeatDelay;this._cycle=this._totalTime/m>>0;if(this._cycle!==0)if(this._cycle===this._totalTime/m&&l<=e){this._cycle--}this._time=this._totalTime-this._cycle*m;if(this._yoyo)if((this._cycle&1)!==0){this._time=c-this._time
;x=this._yoyoEase||this.vars.yoyoEase;if(x){if(!this._yoyoEase){if(x===true&&!this._initted){x=this.vars.ease;this._yoyoEase=x=!x?i.defaultEase:x instanceof Ease?x:typeof x==="function"?new Ease(x,this.vars.easeParams):Ease.map[x]||i.defaultEase}else{this._yoyoEase=x=x===true?this._ease:x instanceof Ease?x:Ease.map[x]}}this.ratio=x?1-x.getRatio((c-this._time)/c):0}}if(this._time>c){this._time=c}else if(this._time<0){this._time=0}}if(this._easeType&&!x){v=this._time/c;g=this._easeType;y=this._easePower;if(g===1||g===3&&v>=.5){v=1-v}if(g===3){v*=2}if(y===1){v*=v}else if(y===2){v*=v*v}else if(y===3){v*=v*v*v}else if(y===4){v*=v*v*v*v}if(g===1){this.ratio=1-v}else if(g===2){this.ratio=v}else if(this._time/c<.5){this.ratio=v/2}else{this.ratio=1-v/2}}else if(!x){this.ratio=this._ease.getRatio(this._time/c)}}if(a===this._time&&!n&&u===this._cycle){if(l!==this._totalTime)if(this._onUpdate)if(!t){this._callback("onUpdate")}return}else if(!this._initted){this._init();if(!this._initted||this._gc){return}else if(!n&&this._firstPT&&(this.vars.lazy!==false&&this._duration||this.vars.lazy&&!this._duration)){this._time=a;this._totalTime=l;this._rawPrevTime=h;this._cycle=u;o.lazyTweens.push(this);this._lazy=[e,t];return}if(this._time&&!f&&!x){this.ratio=this._ease.getRatio(this._time/c)}else if(f&&this._ease._calcEnd&&!x){this.ratio=this._ease.getRatio(this._time===0?0:1)}}if(this._lazy!==false){this._lazy=false}if(!this._active)if(!this._paused&&this._time!==a&&e>=0){this._active=true}if(l===0){if(this._initted===2&&e>0){this._init()}if(this._startAt){if(e>=0){this._startAt.render(e,true,n)}else if(!d){d="_dummyGS"}}if(this.vars.onStart)if(this._totalTime!==0||c===0)if(!t){this._callback("onStart")}}p=this._firstPT;while(p){if(p.f){p.t[p.p](p.c*this.ratio+p.s)}else{p.t[p.p]=p.c*this.ratio+p.s}p=p._next}if(this._onUpdate){if(e<0)if(this._startAt&&this._startTime){this._startAt.render(e,true,n)}if(!t)if(this._totalTime!==l||d){this._callback("onUpdate")}}if(this._cycle!==u)if(!t)if(!this._gc)if(this.vars.onRepeat){this._callback("onRepeat")}if(d)if(!this._gc||n){if(e<0&&this._startAt&&!this._onUpdate&&this._startTime){this._startAt.render(e,true,n)}if(f){if(this._timeline.autoRemoveChildren){this._enabled(false,false)}this._active=false}if(!t&&this.vars[d]){this._callback(d)}if(c===0&&this._rawPrevTime===s&&b!==s){this._rawPrevTime=0}}};a.to=function(e,t,i){return new a(e,t,i)};a.from=function(e,t,i){i.runBackwards=true;i.immediateRender=i.immediateRender!=false;return new a(e,t,i)};a.fromTo=function(e,t,i,n){n.startAt=i;n.immediateRender=n.immediateRender!=false&&i.immediateRender!=false;return new a(e,t,n)};a.staggerTo=a.allTo=function(e,t,s,o,c,f,d){o=o||0;var p=0,m=[],v=function(){if(s.onComplete){s.onComplete.apply(s.onCompleteScope||this,arguments)}c.apply(d||s.callbackScope||this,f||h)},g=s.cycle,y=s.startAt&&s.startAt.cycle,b,x,_,w;if(!u(e)){if(typeof e==="string"){e=i.selector(e)||e}if(l(e)){e=n(e)}}e=e||[];if(o<0){e=n(e);e.reverse();o*=-1}b=e.length-1;for(_=0;_<=b;_++){x={};for(w in s){x[w]=s[w]}if(g){r(x,e,_);if(x.duration!=null){t=x.duration;delete x.duration}}if(y){y=x.startAt={};for(w in s.startAt){y[w]=s.startAt[w]}r(x.startAt,e,_)}x.delay=p+(x.delay||0);if(_===b&&c){x.onComplete=v}m[_]=new a(e[_],t,x);p+=o}return m};a.staggerFrom=a.allFrom=function(e,t,i,n,r,s,o){i.runBackwards=true;i.immediateRender=i.immediateRender!=false;return a.staggerTo(e,t,i,n,r,s,o)};a.staggerFromTo=a.allFromTo=function(e,t,i,n,r,s,o,l){n.startAt=i;n.immediateRender=n.immediateRender!=false&&i.immediateRender!=false;return a.staggerTo(e,t,n,r,s,o,l)};a.delayedCall=function(e,t,i,n,r){return new a(t,0,{delay:e,onComplete:t,onCompleteParams:i,callbackScope:n,onReverseComplete:t,onReverseCompleteParams:i,immediateRender:false,useFrames:r,overwrite:0})};a.set=function(e,t){return new a(e,0,t)};a.isTweening=function(e){return i.getTweensOf(e,true).length>0};var f=function(e,t){var n=[],r=0,a=e._first;while(a){if(a instanceof i){n[r++]=a}else{if(t){n[r++]=a}n=n.concat(f(a,t));r=n.length}a=a._next}return n},d=a.getAllTweens=function(t){return f(e._rootTimeline,t).concat(f(e._rootFramesTimeline,t))};a.killAll=function(e,i,n,r){if(i==null){i=true}if(n==null){n=true}var a=d(r!=false),s=a.length,o=i&&n&&r,l,u,c;for(c=0;c<s;c++){u=a[c];if(o||u instanceof t||(l=u.target===u.vars.onComplete)&&n||i&&!l){if(e){u.totalTime(u._reversed?0:u.totalDuration())}else{u._enabled(false,false)}}}};a.killChildTweensOf=function(e,t){if(e==null){return}var r=o.tweenLookup,s,c,h,f,d;if(typeof e==="string"){e=i.selector(e)||e}if(l(e)){e=n(e)}if(u(e)){f=e.length;while(--f>-1){a.killChildTweensOf(e[f],t)}return}s=[];for(h in r){c=r[h].target.parentNode;while(c){if(c===e){s=s.concat(r[h].tweens)}c=c.parentNode}}d=s.length;for(f=0;f<d;f++){if(t){s[f].totalTime(s[f].totalDuration())}s[f]._enabled(false,false)}};var p=function(e,i,n,r){i=i!==false;n=n!==false;r=r!==false;var a=d(r),s=i&&n&&r,o=a.length,l,u;while(--o>-1){u=a[o];if(s||u instanceof t||(l=u.target===u.vars.onComplete)&&n||i&&!l){u.paused(e)}}};a.pauseAll=function(e,t,i){p(true,e,t,i)};a.resumeAll=function(e,t,i){p(false,e,t,i)};a.globalTimeScale=function(t){var n=e._rootTimeline,r=i.ticker.time;if(!arguments.length){return n._timeScale}t=t||s;n._startTime=r-(r-n._startTime)*n._timeScale/t;n=e._rootFramesTimeline;r=i.ticker.frame;n._startTime=r-(r-n._startTime)*n._timeScale/t;n._timeScale=e._rootTimeline._timeScale=t;return t};c.progress=function(e,t){return!arguments.length?this._time/this.duration():this.totalTime(this.duration()*(this._yoyo&&(this._cycle&1)!==0?1-e:e)+this._cycle*(this._duration+this._repeatDelay),t)};c.totalProgress=function(e,t){return!arguments.length?this._totalTime/this.totalDuration():this.totalTime(this.totalDuration()*e,t)};c.time=function(e,t){if(!arguments.length){return this._time}if(this._dirty){this.totalDuration()}if(e>this._duration){e=this._duration}if(this._yoyo&&(this._cycle&1)!==0){e=this._duration-e+this._cycle*(this._duration+this._repeatDelay)}else if(this._repeat!==0){e+=this._cycle*(this._duration+this._repeatDelay)}return this.totalTime(e,t)};c.duration=function(t){if(!arguments.length){return this._duration}return e.prototype.duration.call(this,t)};c.totalDuration=function(e){if(!arguments.length){if(this._dirty){this._totalDuration=this._repeat===-1?999999999999:this._duration*(this._repeat+1)+this._repeatDelay*this._repeat;this._dirty=false}return this._totalDuration}return this._repeat===-1?this:this.duration((e-this._repeat*this._repeatDelay)/(this._repeat+1))};c.repeat=function(e){if(!arguments.length){return this._repeat}this._repeat=e;return this._uncache(true)};c.repeatDelay=function(e){if(!arguments.length){return this._repeatDelay}this._repeatDelay=e;return this._uncache(true)};c.yoyo=function(e){if(!arguments.length){return this._yoyo}this._yoyo=e;return this};return a},true);i._gsDefine("TimelineLite",["core.Animation","core.SimpleTimeline","TweenLite"],function(e,t,n){var r=function(e){t.call(this,e);this._labels={};this.autoRemoveChildren=this.vars.autoRemoveChildren===true;this.smoothChildTiming=this.vars.smoothChildTiming===true;this._sortChildren=true;this._onUpdate=this.vars.onUpdate;var i=this.vars,n,r;for(r in i){n=i[r];if(u(n))if(n.join("").indexOf("{self}")!==-1){i[r]=this._swapSelfInParams(n)}}if(u(i.tweens)){this.add(i.tweens,0,i.align,i.stagger)}},a=1e-10,s=n._internals,o=r._internals={},l=s.isSelector,u=s.isArray,c=s.lazyTweens,h=s.lazyRender,f=i._gsDefine.globals,d=function(e){var t={},i;for(i in e){t[i]=e[i]}return t},p=function(e,t,i){var n=e.cycle,r,a;for(r in n){a=n[r];e[r]=typeof a==="function"?a(i,t[i]):a[i%a.length]}delete e.cycle},m=o.pauseCallback=function(){},v=function(e){var t=[],i=e.length,n;for(n=0;n!==i;t.push(e[n++]));return t},g=r.prototype=new t;r.version="1.20.3";g.constructor=r;g.kill()._gc=g._forcingPlayhead=g._hasPause=false;g.to=function(e,t,i,r){var a=i.repeat&&f.TweenMax||n;return t?this.add(new a(e,t,i),r):this.set(e,i,r)};g.from=function(e,t,i,r){return this.add((i.repeat&&f.TweenMax||n).from(e,t,i),r)};g.fromTo=function(e,t,i,r,a){var s=r.repeat&&f.TweenMax||n;return t?this.add(s.fromTo(e,t,i,r),a):this.set(e,r,a)};g.staggerTo=function(e,t,i,a,s,o,u,c){var h=new r({onComplete:o,onCompleteParams:u,callbackScope:c,smoothChildTiming:this.smoothChildTiming}),f=i.cycle,m,g;if(typeof e==="string"){e=n.selector(e)||e}e=e||[];if(l(e)){e=v(e)}a=a||0;if(a<0){e=v(e);e.reverse();a*=-1}for(g=0;g<e.length;g++){m=d(i);if(m.startAt){m.startAt=d(m.startAt);if(m.startAt.cycle){p(m.startAt,e,g)}}if(f){p(m,e,g);if(m.duration!=null){t=m.duration;delete m.duration}}h.to(e[g],t,m,g*a)}return this.add(h,s)};g.staggerFrom=function(e,t,i,n,r,a,s,o){i.immediateRender=i.immediateRender!=false;i.runBackwards=true;return this.staggerTo(e,t,i,n,r,a,s,o)};g.staggerFromTo=function(e,t,i,n,r,a,s,o,l){n.startAt=i;n.immediateRender=n.immediateRender!=false&&i.immediateRender!=false;return this.staggerTo(e,t,n,r,a,s,o,l)};g.call=function(e,t,i,r){return this.add(n.delayedCall(0,e,t,i),r)};g.set=function(e,t,i){i=this._parseTimeOrLabel(i,0,true);if(t.immediateRender==null){t.immediateRender=i===this._time&&!this._paused}return this.add(new n(e,0,t),i)};r.exportRoot=function(e,t){e=e||{};if(e.smoothChildTiming==null){e.smoothChildTiming=true}var i=new r(e),a=i._timeline,s,o,l,u;if(t==null){t=true}a._remove(i,true);i._startTime=0;i._rawPrevTime=i._time=i._totalTime=a._time;l=a._first;while(l){u=l._next;if(!t||!(l instanceof n&&l.target===l.vars.onComplete)){o=l._startTime-l._delay;if(o<0){s=1}i.add(l,o)}l=u}a.add(i,0);if(s){i.totalDuration()}return i};g.add=function(i,a,s,o){var l,c,h,f,d,p;if(typeof a!=="number"){a=this._parseTimeOrLabel(a,0,true,i)}if(!(i instanceof e)){if(i instanceof Array||i&&i.push&&u(i)){s=s||"normal";o=o||0;l=a;c=i.length;for(h=0;h<c;h++){if(u(f=i[h])){f=new r({tweens:f})}this.add(f,l);if(typeof f!=="string"&&typeof f!=="function"){if(s==="sequence"){l=f._startTime+f.totalDuration()/f._timeScale}else if(s==="start"){f._startTime-=f.delay()}}l+=o}return this._uncache(true)}else if(typeof i==="string"){return this.addLabel(i,a)}else if(typeof i==="function"){i=n.delayedCall(0,i)}else{throw"Cannot add "+i+" into the timeline; it is not a tween, timeline, function, or string."}}t.prototype.add.call(this,i,a);if(i._time){i.render((this.rawTime()-i._startTime)*i._timeScale,false,false)}if(this._gc||this._time===this._duration)if(!this._paused)if(this._duration<this.duration()){d=this;p=d.rawTime()>i._startTime;while(d._timeline){if(p&&d._timeline.smoothChildTiming){d.totalTime(d._totalTime,true)}else if(d._gc){d._enabled(true,false)}d=d._timeline}}return this};g.remove=function(t){if(t instanceof e){this._remove(t,false);var i=t._timeline=t.vars.useFrames?e._rootFramesTimeline:e._rootTimeline;t._startTime=(t._paused?t._pauseTime:i._time)-(!t._reversed?t._totalTime:t.totalDuration()-t._totalTime)/t._timeScale;return this}else if(t instanceof Array||t&&t.push&&u(t)){var n=t.length;while(--n>-1){this.remove(t[n])}return this}else if(typeof t==="string"){return this.removeLabel(t)}return this.kill(null,t)};g._remove=function(e,i){t.prototype._remove.call(this,e,i);var n=this._last;if(!n){this._time=this._totalTime=this._duration=this._totalDuration=0}else if(this._time>this.duration()){this._time=this._duration;this._totalTime=this._totalDuration}return this};g.append=function(e,t){return this.add(e,this._parseTimeOrLabel(null,t,true,e))};g.insert=g.insertMultiple=function(e,t,i,n){return this.add(e,t||0,i,n)};g.appendMultiple=function(e,t,i,n){return this.add(e,this._parseTimeOrLabel(null,t,true,e),i,n)};g.addLabel=function(e,t){this._labels[e]=this._parseTimeOrLabel(t);return this};g.addPause=function(e,t,i,r){var a=n.delayedCall(0,m,i,r||this);a.vars.onComplete=a.vars.onReverseComplete=t;a.data="isPause";this._hasPause=true;return this.add(a,e)};g.removeLabel=function(e){delete this._labels[e];return this};g.getLabelTime=function(e){return this._labels[e]!=null?this._labels[e]:-1};g._parseTimeOrLabel=function(t,i,n,r){var a,s;if(r instanceof e&&r.timeline===this){this.remove(r)}else if(r&&(r instanceof Array||r.push&&u(r))){s=r.length;while(--s>-1){if(r[s]instanceof e&&r[s].timeline===this){this.remove(r[s])}}}a=typeof t==="number"&&!i?0:this.duration()>99999999999?this.recent().endTime(false):this._duration;if(typeof i==="string"){return this._parseTimeOrLabel(i,n&&typeof t==="number"&&this._labels[i]==null?t-a:0,n)}i=i||0;if(typeof t==="string"&&(isNaN(t)||this._labels[t]!=null)){s=t.indexOf("=");if(s===-1){if(this._labels[t]==null){return n?this._labels[t]=a+i:i}return this._labels[t]+i}i=parseInt(t.charAt(s-1)+"1",10)*Number(t.substr(s+1));t=s>1?this._parseTimeOrLabel(t.substr(0,s-1),0,n):a}else if(t==null){t=a}return Number(t)+i};g.seek=function(e,t){return this.totalTime(typeof e==="number"?e:this._parseTimeOrLabel(e),t!==false)};g.stop=function(){return this.paused(true)};g.gotoAndPlay=function(e,t){return this.play(e,t)};g.gotoAndStop=function(e,t){return this.pause(e,t)};g.render=function(e,t,i){if(this._gc){this._enabled(true,false)}var n=this._time,r=!this._dirty?this._totalDuration:this.totalDuration(),s=this._startTime,o=this._timeScale,l=this._paused,u,f,d,p,m,v,g;if(n!==this._time){e+=this._time-n}if(e>=r-1e-7&&e>=0){this._totalTime=this._time=r;if(!this._reversed)if(!this._hasPausedChild()){f=true;p="onComplete";m=!!this._timeline.autoRemoveChildren;if(this._duration===0)if(e<=0&&e>=-1e-7||this._rawPrevTime<0||this._rawPrevTime===a)if(this._rawPrevTime!==e&&this._first){m=true;if(this._rawPrevTime>a){p="onReverseComplete"}}}this._rawPrevTime=this._duration||!t||e||this._rawPrevTime===e?e:a;e=r+1e-4}else if(e<1e-7){this._totalTime=this._time=0;if(n!==0||this._duration===0&&this._rawPrevTime!==a&&(this._rawPrevTime>0||e<0&&this._rawPrevTime>=0)){p="onReverseComplete";f=this._reversed}if(e<0){this._active=false;if(this._timeline.autoRemoveChildren&&this._reversed){m=f=true;p="onReverseComplete"}else if(this._rawPrevTime>=0&&this._first){m=true}this._rawPrevTime=e}else{this._rawPrevTime=this._duration||!t||e||this._rawPrevTime===e?e:a;if(e===0&&f){u=this._first;while(u&&u._startTime===0){if(!u._duration){f=false}u=u._next}}e=0;if(!this._initted){m=true}}}else{if(this._hasPause&&!this._forcingPlayhead&&!t){if(e>=n){u=this._first;while(u&&u._startTime<=e&&!v){if(!u._duration)if(u.data==="isPause"&&!u.ratio&&!(u._startTime===0&&this._rawPrevTime===0)){v=u}u=u._next}}else{u=this._last;while(u&&u._startTime>=e&&!v){if(!u._duration)if(u.data==="isPause"&&u._rawPrevTime>0){v=u}u=u._prev}}if(v){this._time=e=v._startTime;this._totalTime=e+this._cycle*(this._totalDuration+this._repeatDelay)}}this._totalTime=this._time=this._rawPrevTime=e}if((this._time===n||!this._first)&&!i&&!m&&!v){return}else if(!this._initted){this._initted=true}if(!this._active)if(!this._paused&&this._time!==n&&e>0){this._active=true}if(n===0)if(this.vars.onStart)if(this._time!==0||!this._duration)if(!t){this._callback("onStart")}g=this._time;if(g>=n){u=this._first;while(u){d=u._next;if(g!==this._time||this._paused&&!l){break}else if(u._active||u._startTime<=g&&!u._paused&&!u._gc){if(v===u){this.pause()}if(!u._reversed){u.render((e-u._startTime)*u._timeScale,t,i)}else{u.render((!u._dirty?u._totalDuration:u.totalDuration())-(e-u._startTime)*u._timeScale,t,i)}}u=d}}else{u=this._last;while(u){d=u._prev;if(g!==this._time||this._paused&&!l){break}else if(u._active||u._startTime<=n&&!u._paused&&!u._gc){if(v===u){v=u._prev;while(v&&v.endTime()>this._time){v.render(v._reversed?v.totalDuration()-(e-v._startTime)*v._timeScale:(e-v._startTime)*v._timeScale,t,i);v=v._prev}v=null;this.pause()}if(!u._reversed){u.render((e-u._startTime)*u._timeScale,t,i)}else{u.render((!u._dirty?u._totalDuration:u.totalDuration())-(e-u._startTime)*u._timeScale,t,i)}}u=d}}if(this._onUpdate)if(!t){if(c.length){h()}this._callback("onUpdate")}if(p)if(!this._gc)if(s===this._startTime||o!==this._timeScale)if(this._time===0||r>=this.totalDuration()){if(f){if(c.length){h()}if(this._timeline.autoRemoveChildren){this._enabled(false,false)}this._active=false}if(!t&&this.vars[p]){this._callback(p)}}};g._hasPausedChild=function(){var e=this._first;while(e){if(e._paused||e instanceof r&&e._hasPausedChild()){return true}e=e._next}return false};g.getChildren=function(e,t,i,r){r=r||-9999999999;var a=[],s=this._first,o=0;while(s){if(s._startTime<r){}else if(s instanceof n){if(t!==false){a[o++]=s}}else{if(i!==false){a[o++]=s}if(e!==false){a=a.concat(s.getChildren(true,t,i));o=a.length}}s=s._next}return a};g.getTweensOf=function(e,t){var i=this._gc,r=[],a=0,s,o;if(i){this._enabled(true,true)}s=n.getTweensOf(e);o=s.length;while(--o>-1){if(s[o].timeline===this||t&&this._contains(s[o])){r[a++]=s[o]}}if(i){this._enabled(false,true)}return r};g.recent=function(){return this._recent};g._contains=function(e){var t=e.timeline;while(t){if(t===this){return true}t=t.timeline}return false};g.shiftChildren=function(e,t,i){i=i||0;var n=this._first,r=this._labels,a;while(n){if(n._startTime>=i){n._startTime+=e}n=n._next}if(t){for(a in r){if(r[a]>=i){r[a]+=e}}}return this._uncache(true)};g._kill=function(e,t){if(!e&&!t){return this._enabled(false,false)}var i=!t?this.getChildren(true,true,false):this.getTweensOf(t),n=i.length,r=false;while(--n>-1){if(i[n]._kill(e,t)){r=true}}return r};g.clear=function(e){var t=this.getChildren(false,true,true),i=t.length;this._time=this._totalTime=0;while(--i>-1){t[i]._enabled(false,false)}if(e!==false){this._labels={}}return this._uncache(true)};g.invalidate=function(){var t=this._first;while(t){t.invalidate();t=t._next}return e.prototype.invalidate.call(this)};g._enabled=function(e,i){if(e===this._gc){var n=this._first;while(n){n._enabled(e,true);n=n._next}}return t.prototype._enabled.call(this,e,i)};g.totalTime=function(t,i,n){this._forcingPlayhead=true;var r=e.prototype.totalTime.apply(this,arguments);this._forcingPlayhead=false;return r};g.duration=function(e){if(!arguments.length){if(this._dirty){this.totalDuration()}return this._duration}if(this.duration()!==0&&e!==0){this.timeScale(this._duration/e)}return this};g.totalDuration=function(e){if(!arguments.length){if(this._dirty){var t=0,i=this._last,n=999999999999,r,a;while(i){r=i._prev;if(i._dirty){i.totalDuration()}if(i._startTime>n&&this._sortChildren&&!i._paused&&!this._calculatingDuration){this._calculatingDuration=1;this.add(i,i._startTime-i._delay);this._calculatingDuration=0}else{n=i._startTime}if(i._startTime<0&&!i._paused){t-=i._startTime;if(this._timeline.smoothChildTiming){this._startTime+=i._startTime/this._timeScale;this._time-=i._startTime;this._totalTime-=i._startTime;this._rawPrevTime-=i._startTime}this.shiftChildren(-i._startTime,false,-9999999999);n=0}a=i._startTime+i._totalDuration/i._timeScale;if(a>t){t=a}i=r}this._duration=this._totalDuration=t;this._dirty=false}return this._totalDuration}return e&&this.totalDuration()?this.timeScale(this._totalDuration/e):this};g.paused=function(t){if(!t){var i=this._first,n=this._time;while(i){if(i._startTime===n&&i.data==="isPause"){i._rawPrevTime=0}i=i._next}}return e.prototype.paused.apply(this,arguments)};g.usesFrames=function(){var t=this._timeline;while(t._timeline){t=t._timeline}return t===e._rootFramesTimeline};g.rawTime=function(e){return e&&(this._paused||this._repeat&&this.time()>0&&this.totalProgress()<1)?this._totalTime%(this._duration+this._repeatDelay):this._paused?this._totalTime:(this._timeline.rawTime(e)-this._startTime)*this._timeScale};return r},true);i._gsDefine("TimelineMax",["TimelineLite","TweenLite","easing.Ease"],function(e,t,n){var r=function(t){e.call(this,t);this._repeat=this.vars.repeat||0;this._repeatDelay=this.vars.repeatDelay||0;this._cycle=0;this._yoyo=this.vars.yoyo===true;this._dirty=true},a=1e-10,s=t._internals,o=s.lazyTweens,l=s.lazyRender,u=i._gsDefine.globals,c=new n(null,null,1,0),h=r.prototype=new e;h.constructor=r;h.kill()._gc=false;r.version="1.20.3";h.invalidate=function(){this._yoyo=this.vars.yoyo===true;this._repeat=this.vars.repeat||0;this._repeatDelay=this.vars.repeatDelay||0;this._uncache(true);return e.prototype.invalidate.call(this)};h.addCallback=function(e,i,n,r){return this.add(t.delayedCall(0,e,n,r),i)};h.removeCallback=function(e,t){if(e){if(t==null){this._kill(null,e)}else{var i=this.getTweensOf(e,false),n=i.length,r=this._parseTimeOrLabel(t);while(--n>-1){if(i[n]._startTime===r){i[n]._enabled(false,false)}}}}return this};h.removePause=function(t){return this.removeCallback(e._internals.pauseCallback,t)};h.tweenTo=function(e,i){i=i||{};var n={ease:c,useFrames:this.usesFrames(),immediateRender:false},r=i.repeat&&u.TweenMax||t,a,s,o;for(s in i){n[s]=i[s]}n.time=this._parseTimeOrLabel(e);a=Math.abs(Number(n.time)-this._time)/this._timeScale||.001;o=new r(this,a,n);n.onStart=function(){o.target.paused(true);if(o.vars.time!==o.target.time()&&a===o.duration()){o.duration(Math.abs(o.vars.time-o.target.time())/o.target._timeScale)}if(i.onStart){i.onStart.apply(i.onStartScope||i.callbackScope||o,i.onStartParams||[])}};return o};h.tweenFromTo=function(e,t,i){i=i||{};e=this._parseTimeOrLabel(e);i.startAt={onComplete:this.seek,onCompleteParams:[e],callbackScope:this};i.immediateRender=i.immediateRender!==false;var n=this.tweenTo(t,i);return n.duration(Math.abs(n.vars.time-e)/this._timeScale||.001)};h.render=function(e,t,i){if(this._gc){this._enabled(true,false)}var n=this._time,r=!this._dirty?this._totalDuration:this.totalDuration(),s=this._duration,u=this._totalTime,c=this._startTime,h=this._timeScale,f=this._rawPrevTime,d=this._paused,p=this._cycle,m,v,g,y,b,x,_,w;if(n!==this._time){e+=this._time-n}if(e>=r-1e-7&&e>=0){if(!this._locked){this._totalTime=r;this._cycle=this._repeat}if(!this._reversed)if(!this._hasPausedChild()){v=true;y="onComplete";b=!!this._timeline.autoRemoveChildren;if(this._duration===0)if(e<=0&&e>=-1e-7||f<0||f===a)if(f!==e&&this._first){b=true;if(f>a){y="onReverseComplete"}}}this._rawPrevTime=this._duration||!t||e||this._rawPrevTime===e?e:a;if(this._yoyo&&(this._cycle&1)!==0){this._time=e=0}else{this._time=s;e=s+1e-4}}else if(e<1e-7){if(!this._locked){this._totalTime=this._cycle=0}this._time=0;if(n!==0||s===0&&f!==a&&(f>0||e<0&&f>=0)&&!this._locked){y="onReverseComplete";v=this._reversed}if(e<0){this._active=false;if(this._timeline.autoRemoveChildren&&this._reversed){b=v=true;y="onReverseComplete"}else if(f>=0&&this._first){b=true}this._rawPrevTime=e}else{this._rawPrevTime=s||!t||e||this._rawPrevTime===e?e:a;if(e===0&&v){m=this._first;while(m&&m._startTime===0){if(!m._duration){v=false}m=m._next}}e=0;if(!this._initted){b=true}}}else{if(s===0&&f<0){b=true}this._time=this._rawPrevTime=e;if(!this._locked){this._totalTime=e;if(this._repeat!==0){x=s+this._repeatDelay;this._cycle=this._totalTime/x>>0;if(this._cycle!==0)if(this._cycle===this._totalTime/x&&u<=e){this._cycle--}this._time=this._totalTime-this._cycle*x;if(this._yoyo)if((this._cycle&1)!==0){this._time=s-this._time}if(this._time>s){this._time=s;e=s+1e-4}else if(this._time<0){this._time=e=0}else{e=this._time}}}if(this._hasPause&&!this._forcingPlayhead&&!t){e=this._time;if(e>=n||this._repeat&&p!==this._cycle){m=this._first;while(m&&m._startTime<=e&&!_){if(!m._duration)if(m.data==="isPause"&&!m.ratio&&!(m._startTime===0&&this._rawPrevTime===0)){_=m}m=m._next}}else{m=this._last;while(m&&m._startTime>=e&&!_){if(!m._duration)if(m.data==="isPause"&&m._rawPrevTime>0){_=m}m=m._prev}}if(_&&_._startTime<s){this._time=e=_._startTime;this._totalTime=e+this._cycle*(this._totalDuration+this._repeatDelay)}}}if(this._cycle!==p)if(!this._locked){var T=this._yoyo&&(p&1)!==0,M=T===(this._yoyo&&(this._cycle&1)!==0),S=this._totalTime,E=this._cycle,A=this._rawPrevTime,P=this._time;this._totalTime=p*s;if(this._cycle<p){T=!T}else{this._totalTime+=s}this._time=n;this._rawPrevTime=s===0?f-1e-4:f;this._cycle=p;this._locked=true;n=T?0:s;this.render(n,t,s===0);if(!t)if(!this._gc){if(this.vars.onRepeat){this._cycle=E;this._locked=false;this._callback("onRepeat")}}if(n!==this._time){return}if(M){this._cycle=p;this._locked=true;n=T?s+1e-4:-1e-4;this.render(n,true,false)}this._locked=false;if(this._paused&&!d){return}this._time=P;this._totalTime=S;this._cycle=E;this._rawPrevTime=A}if((this._time===n||!this._first)&&!i&&!b&&!_){if(u!==this._totalTime)if(this._onUpdate)if(!t){this._callback("onUpdate")}return}else if(!this._initted){this._initted=true}if(!this._active)if(!this._paused&&this._totalTime!==u&&e>0){this._active=true}if(u===0)if(this.vars.onStart)if(this._totalTime!==0||!this._totalDuration)if(!t){this._callback("onStart")}w=this._time;if(w>=n){m=this._first;while(m){g=m._next;if(w!==this._time||this._paused&&!d){break}else if(m._active||m._startTime<=this._time&&!m._paused&&!m._gc){if(_===m){this.pause()}if(!m._reversed){m.render((e-m._startTime)*m._timeScale,t,i)}else{m.render((!m._dirty?m._totalDuration:m.totalDuration())-(e-m._startTime)*m._timeScale,t,i)}}m=g}}else{m=this._last;while(m){g=m._prev;if(w!==this._time||this._paused&&!d){break}else if(m._active||m._startTime<=n&&!m._paused&&!m._gc){if(_===m){_=m._prev;while(_&&_.endTime()>this._time){_.render(_._reversed?_.totalDuration()-(e-_._startTime)*_._timeScale:(e-_._startTime)*_._timeScale,t,i);_=_._prev}_=null;this.pause()}if(!m._reversed){m.render((e-m._startTime)*m._timeScale,t,i)}else{m.render((!m._dirty?m._totalDuration:m.totalDuration())-(e-m._startTime)*m._timeScale,t,i)}}m=g}}if(this._onUpdate)if(!t){if(o.length){l()}this._callback("onUpdate")}if(y)if(!this._locked)if(!this._gc)if(c===this._startTime||h!==this._timeScale)if(this._time===0||r>=this.totalDuration()){if(v){if(o.length){l()}if(this._timeline.autoRemoveChildren){this._enabled(false,false)}this._active=false}if(!t&&this.vars[y]){this._callback(y)}}};h.getActive=function(e,t,i){if(e==null){e=true}if(t==null){t=true}if(i==null){i=false}var n=[],r=this.getChildren(e,t,i),a=0,s=r.length,o,l;for(o=0;o<s;o++){l=r[o];if(l.isActive()){n[a++]=l}}return n};h.getLabelAfter=function(e){if(!e)if(e!==0){e=this._time}var t=this.getLabelsArray(),i=t.length,n;for(n=0;n<i;n++){if(t[n].time>e){return t[n].name}}return null};h.getLabelBefore=function(e){if(e==null){e=this._time}var t=this.getLabelsArray(),i=t.length;while(--i>-1){if(t[i].time<e){return t[i].name}}return null};h.getLabelsArray=function(){var e=[],t=0,i;for(i in this._labels){e[t++]={time:this._labels[i],name:i}}e.sort(function(e,t){return e.time-t.time});return e};h.invalidate=function(){this._locked=false;return e.prototype.invalidate.call(this)};h.progress=function(e,t){return!arguments.length?this._time/this.duration()||0:this.totalTime(this.duration()*(this._yoyo&&(this._cycle&1)!==0?1-e:e)+this._cycle*(this._duration+this._repeatDelay),t)};h.totalProgress=function(e,t){return!arguments.length?this._totalTime/this.totalDuration()||0:this.totalTime(this.totalDuration()*e,t)};h.totalDuration=function(t){if(!arguments.length){if(this._dirty){e.prototype.totalDuration.call(this);this._totalDuration=this._repeat===-1?999999999999:this._duration*(this._repeat+1)+this._repeatDelay*this._repeat}return this._totalDuration}return this._repeat===-1||!t?this:this.timeScale(this.totalDuration()/t)};h.time=function(e,t){if(!arguments.length){return this._time}if(this._dirty){this.totalDuration()}if(e>this._duration){e=this._duration}if(this._yoyo&&(this._cycle&1)!==0){e=this._duration-e+this._cycle*(this._duration+this._repeatDelay)}else if(this._repeat!==0){e+=this._cycle*(this._duration+this._repeatDelay)}return this.totalTime(e,t)};h.repeat=function(e){if(!arguments.length){return this._repeat}this._repeat=e;return this._uncache(true)};h.repeatDelay=function(e){if(!arguments.length){return this._repeatDelay}this._repeatDelay=e;return this._uncache(true)};h.yoyo=function(e){if(!arguments.length){return this._yoyo}this._yoyo=e;return this};h.currentLabel=function(e){if(!arguments.length){return this.getLabelBefore(this._time+1e-8)}return this.seek(e,true)};return r},true);(function(){var e=180/Math.PI,t=[],n=[],r=[],a={},s=i._gsDefine.globals,o=function(e,t,i,n){if(i===n){i=n-(n-t)/1e6}if(e===t){t=e+(i-e)/1e6}this.a=e;this.b=t;this.c=i;this.d=n;this.da=n-e;this.ca=i-e;this.ba=t-e},l=",x,y,z,left,top,right,bottom,marginTop,marginLeft,marginRight,marginBottom,paddingLeft,paddingTop,paddingRight,paddingBottom,backgroundPosition,backgroundPosition_y,",u=function(e,t,i,n){var r={a:e},a={},s={},o={c:n},l=(e+t)/2,u=(t+i)/2,c=(i+n)/2,h=(l+u)/2,f=(u+c)/2,d=(f-h)/8;r.b=l+(e-l)/4;a.b=h+d;r.c=a.a=(r.b+a.b)/2;a.c=s.a=(h+f)/2;s.b=f-d;o.b=c+(n-c)/4;s.c=o.a=(s.b+o.b)/2;return[r,a,s,o]},c=function(e,i,a,s,o){var l=e.length-1,c=0,h=e[0].a,f,d,p,m,v,g,y,b,x,_,w,T,M;for(f=0;f<l;f++){v=e[c];d=v.a;p=v.d;m=e[c+1].d;if(o){w=t[f];T=n[f];M=(T+w)*i*.25/(s?.5:r[f]||.5);g=p-(p-d)*(s?i*.5:w!==0?M/w:0);y=p+(m-p)*(s?i*.5:T!==0?M/T:0);b=p-(g+((y-g)*(w*3/(w+T)+.5)/4||0))}else{g=p-(p-d)*i*.5;y=p+(m-p)*i*.5;b=p-(g+y)/2}g+=b;y+=b;v.c=x=g;if(f!==0){v.b=h}else{v.b=h=v.a+(v.c-v.a)*.6}v.da=p-d;v.ca=x-d;v.ba=h-d;if(a){_=u(d,h,x,p);e.splice(c,1,_[0],_[1],_[2],_[3]);c+=4}else{c++}h=y}v=e[c];v.b=h;v.c=h+(v.d-h)*.4;v.da=v.d-v.a;v.ca=v.c-v.a;v.ba=h-v.a;if(a){_=u(v.a,h,v.c,v.d);e.splice(c,1,_[0],_[1],_[2],_[3])}},h=function(e,i,r,a){var s=[],l,u,c,h,f,d;if(a){e=[a].concat(e);u=e.length;while(--u>-1){if(typeof(d=e[u][i])==="string")if(d.charAt(1)==="="){e[u][i]=a[i]+Number(d.charAt(0)+d.substr(2))}}}l=e.length-2;if(l<0){s[0]=new o(e[0][i],0,0,e[0][i]);return s}for(u=0;u<l;u++){c=e[u][i];h=e[u+1][i];s[u]=new o(c,0,0,h);if(r){f=e[u+2][i];t[u]=(t[u]||0)+(h-c)*(h-c);n[u]=(n[u]||0)+(f-h)*(f-h)}}s[u]=new o(e[u][i],0,0,e[u+1][i]);return s},f=function(e,i,s,o,u,f){var d={},p=[],m=f||e[0],v,g,y,b,x,_,w,T;u=typeof u==="string"?","+u+",":l;if(i==null){i=1}for(g in e[0]){p.push(g)}if(e.length>1){T=e[e.length-1];w=true;v=p.length;while(--v>-1){g=p[v];if(Math.abs(m[g]-T[g])>.05){w=false;break}}if(w){e=e.concat();if(f){e.unshift(f)}e.push(e[1]);f=e[e.length-3]}}t.length=n.length=r.length=0;v=p.length;while(--v>-1){g=p[v];a[g]=u.indexOf(","+g+",")!==-1;d[g]=h(e,g,a[g],f)}v=t.length;while(--v>-1){t[v]=Math.sqrt(t[v]);n[v]=Math.sqrt(n[v])}if(!o){v=p.length;while(--v>-1){if(a[g]){y=d[p[v]];_=y.length-1;for(b=0;b<_;b++){x=y[b+1].da/n[b]+y[b].da/t[b]||0;r[b]=(r[b]||0)+x*x}}}v=r.length;while(--v>-1){r[v]=Math.sqrt(r[v])}}v=p.length;b=s?4:1;while(--v>-1){g=p[v];y=d[g];c(y,i,s,o,a[g]);if(w){y.splice(0,b);y.splice(y.length-b,b)}}return d},d=function(e,t,i){t=t||"soft";var n={},r=t==="cubic"?3:2,a=t==="soft",s=[],l,u,c,h,f,d,p,m,v,g,y;if(a&&i){e=[i].concat(e)}if(e==null||e.length<r+1){throw"invalid Bezier data"}for(v in e[0]){s.push(v)}d=s.length;while(--d>-1){v=s[d];n[v]=f=[];g=0;m=e.length;for(p=0;p<m;p++){l=i==null?e[p][v]:typeof(y=e[p][v])==="string"&&y.charAt(1)==="="?i[v]+Number(y.charAt(0)+y.substr(2)):Number(y);if(a)if(p>1)if(p<m-1){f[g++]=(l+f[g-2])/2}f[g++]=l}m=g-r+1;g=0;for(p=0;p<m;p+=r){l=f[p];u=f[p+1];c=f[p+2];h=r===2?0:f[p+3];f[g++]=y=r===3?new o(l,u,c,h):new o(l,(2*u+l)/3,(2*u+c)/3,c)}f.length=g}return n},p=function(e,t,i){var n=1/i,r=e.length,a,s,o,l,u,c,h,f,d,p,m;while(--r>-1){p=e[r];o=p.a;l=p.d-o;u=p.c-o;c=p.b-o;a=s=0;for(f=1;f<=i;f++){h=n*f;d=1-h;a=s-(s=(h*h*l+3*d*(h*u+d*c))*h);m=r*i+f-1;t[m]=(t[m]||0)+a*a}}},m=function(e,t){t=t>>0||6;var i=[],n=[],r=0,a=0,s=t-1,o=[],l=[],u,c,h,f;for(u in e){p(e[u],i,t)}h=i.length;for(c=0;c<h;c++){r+=Math.sqrt(i[c]);f=c%t;l[f]=r;if(f===s){a+=r;f=c/t>>0;o[f]=l;n[f]=a;r=0;l=[]}}return{length:a,lengths:n,segments:o}},v=i._gsDefine.plugin({propName:"bezier",priority:-1,version:"1.3.8",API:2,global:true,init:function(e,t,i){this._target=e;if(t instanceof Array){t={values:t}}this._func={};this._mod={};this._props=[];this._timeRes=t.timeResolution==null?6:parseInt(t.timeResolution,10);var n=t.values||[],r={},a=n[0],s=t.autoRotate||i.vars.orientToBezier,o,l,u,c,h;this._autoRotate=s?s instanceof Array?s:[["x","y","rotation",s===true?0:Number(s)||0]]:null;for(o in a){this._props.push(o)}u=this._props.length;while(--u>-1){o=this._props[u];this._overwriteProps.push(o);l=this._func[o]=typeof e[o]==="function"
;r[o]=!l?parseFloat(e[o]):e[o.indexOf("set")||typeof e["get"+o.substr(3)]!=="function"?o:"get"+o.substr(3)]();if(!h)if(r[o]!==n[0][o]){h=r}}this._beziers=t.type!=="cubic"&&t.type!=="quadratic"&&t.type!=="soft"?f(n,isNaN(t.curviness)?1:t.curviness,false,t.type==="thruBasic",t.correlate,h):d(n,t.type,r);this._segCount=this._beziers[o].length;if(this._timeRes){var p=m(this._beziers,this._timeRes);this._length=p.length;this._lengths=p.lengths;this._segments=p.segments;this._l1=this._li=this._s1=this._si=0;this._l2=this._lengths[0];this._curSeg=this._segments[0];this._s2=this._curSeg[0];this._prec=1/this._curSeg.length}if(s=this._autoRotate){this._initialRotations=[];if(!(s[0]instanceof Array)){this._autoRotate=s=[s]}u=s.length;while(--u>-1){for(c=0;c<3;c++){o=s[u][c];this._func[o]=typeof e[o]==="function"?e[o.indexOf("set")||typeof e["get"+o.substr(3)]!=="function"?o:"get"+o.substr(3)]:false}o=s[u][2];this._initialRotations[u]=(this._func[o]?this._func[o].call(this._target):this._target[o])||0;this._overwriteProps.push(o)}}this._startRatio=i.vars.runBackwards?1:0;return true},set:function(t){var i=this._segCount,n=this._func,r=this._target,a=t!==this._startRatio,s,o,l,u,c,h,f,d,p,m;if(!this._timeRes){s=t<0?0:t>=1?i-1:i*t>>0;h=(t-s*(1/i))*i}else{p=this._lengths;m=this._curSeg;t*=this._length;l=this._li;if(t>this._l2&&l<i-1){d=i-1;while(l<d&&(this._l2=p[++l])<=t){}this._l1=p[l-1];this._li=l;this._curSeg=m=this._segments[l];this._s2=m[this._s1=this._si=0]}else if(t<this._l1&&l>0){while(l>0&&(this._l1=p[--l])>=t){}if(l===0&&t<this._l1){this._l1=0}else{l++}this._l2=p[l];this._li=l;this._curSeg=m=this._segments[l];this._s1=m[(this._si=m.length-1)-1]||0;this._s2=m[this._si]}s=l;t-=this._l1;l=this._si;if(t>this._s2&&l<m.length-1){d=m.length-1;while(l<d&&(this._s2=m[++l])<=t){}this._s1=m[l-1];this._si=l}else if(t<this._s1&&l>0){while(l>0&&(this._s1=m[--l])>=t){}if(l===0&&t<this._s1){this._s1=0}else{l++}this._s2=m[l];this._si=l}h=(l+(t-this._s1)/(this._s2-this._s1))*this._prec||0}o=1-h;l=this._props.length;while(--l>-1){u=this._props[l];c=this._beziers[u][s];f=(h*h*c.da+3*o*(h*c.ca+o*c.ba))*h+c.a;if(this._mod[u]){f=this._mod[u](f,r)}if(n[u]){r[u](f)}else{r[u]=f}}if(this._autoRotate){var v=this._autoRotate,g,y,b,x,_,w,T;l=v.length;while(--l>-1){u=v[l][2];w=v[l][3]||0;T=v[l][4]===true?1:e;c=this._beziers[v[l][0]];g=this._beziers[v[l][1]];if(c&&g){c=c[s];g=g[s];y=c.a+(c.b-c.a)*h;x=c.b+(c.c-c.b)*h;y+=(x-y)*h;x+=(c.c+(c.d-c.c)*h-x)*h;b=g.a+(g.b-g.a)*h;_=g.b+(g.c-g.b)*h;b+=(_-b)*h;_+=(g.c+(g.d-g.c)*h-_)*h;f=a?Math.atan2(_-b,x-y)*T+w:this._initialRotations[l];if(this._mod[u]){f=this._mod[u](f,r)}if(n[u]){r[u](f)}else{r[u]=f}}}}}}),g=v.prototype;v.bezierThrough=f;v.cubicToQuadratic=u;v._autoCSS=true;v.quadraticToCubic=function(e,t,i){return new o(e,(2*t+e)/3,(2*t+i)/3,i)};v._cssRegister=function(){var e=s.CSSPlugin;if(!e){return}var t=e._internals,i=t._parseToProxy,n=t._setPluginRatio,r=t.CSSPropTween;t._registerComplexSpecialProp("bezier",{parser:function(e,t,a,s,o,l){if(t instanceof Array){t={values:t}}l=new v;var u=t.values,c=u.length-1,h=[],f={},d,p,m;if(c<0){return o}for(d=0;d<=c;d++){m=i(e,u[d],s,o,l,c!==d);h[d]=m.end}for(p in t){f[p]=t[p]}f.values=h;o=new r(e,"bezier",0,0,m.pt,2);o.data=m;o.plugin=l;o.setRatio=n;if(f.autoRotate===0){f.autoRotate=true}if(f.autoRotate&&!(f.autoRotate instanceof Array)){d=f.autoRotate===true?0:Number(f.autoRotate);f.autoRotate=m.end.left!=null?[["left","top","rotation",d,false]]:m.end.x!=null?[["x","y","rotation",d,false]]:false}if(f.autoRotate){if(!s._transform){s._enableTransforms(false)}m.autoRotate=s._target._gsTransform;m.proxy.rotation=m.autoRotate.rotation||0;s._overwriteProps.push("rotation")}l._onInitTween(m.proxy,f,s._tween);return o}})};g._mod=function(e){var t=this._overwriteProps,i=t.length,n;while(--i>-1){n=e[t[i]];if(n&&typeof n==="function"){this._mod[t[i]]=n}}};g._kill=function(e){var t=this._props,i,n;for(i in this._beziers){if(i in e){delete this._beziers[i];delete this._func[i];n=t.length;while(--n>-1){if(t[n]===i){t.splice(n,1)}}}}t=this._autoRotate;if(t){n=t.length;while(--n>-1){if(e[t[n][2]]){t.splice(n,1)}}}return this._super._kill.call(this,e)}})();i._gsDefine("plugins.CSSPlugin",["plugins.TweenPlugin","TweenLite"],function(e,t){var n=function(){e.call(this,"css");this._overwriteProps.length=0;this.setRatio=n.prototype.setRatio},r=i._gsDefine.globals,a,s,o,l,u={},c=n.prototype=new e("css");c.constructor=n;n.version="1.20.3";n.API=2;n.defaultTransformPerspective=0;n.defaultSkewType="compensated";n.defaultSmoothOrigin=true;c="px";n.suffixMap={top:c,right:c,bottom:c,left:c,width:c,height:c,fontSize:c,padding:c,margin:c,perspective:c,lineHeight:""};var h=/(?:\-|\.|\b)(\d|\.|e\-)+/g,f=/(?:\d|\-\d|\.\d|\-\.\d|\+=\d|\-=\d|\+=.\d|\-=\.\d)+/g,d=/(?:\+=|\-=|\-|\b)[\d\-\.]+[a-zA-Z0-9]*(?:%|\b)/gi,p=/(?![+-]?\d*\.?\d+|[+-]|e[+-]\d+)[^0-9]/g,m=/(?:\d|\-|\+|=|#|\.)*/g,v=/opacity *= *([^)]*)/i,g=/opacity:([^;]*)/i,y=/alpha\(opacity *=.+?\)/i,b=/^(rgb|hsl)/,x=/([A-Z])/g,_=/-([a-z])/gi,w=/(^(?:url\(\"|url\())|(?:(\"\))$|\)$)/gi,T=function(e,t){return t.toUpperCase()},M=/(?:Left|Right|Width)/i,S=/(M11|M12|M21|M22)=[\d\-\.e]+/gi,E=/progid\:DXImageTransform\.Microsoft\.Matrix\(.+?\)/i,A=/,(?=[^\)]*(?:\(|$))/gi,P=/[\s,\(]/i,L=Math.PI/180,R=180/Math.PI,C={},O={style:{}},D=i.document||{createElement:function(){return O}},I=function(e,t){return D.createElementNS?D.createElementNS(t||"http://www.w3.org/1999/xhtml",e):D.createElement(e)},k=I("div"),U=I("img"),F=n._internals={_specialProps:u},N=(i.navigator||{}).userAgent||"",B,z,j,G,H,V,W=function(){var e=N.indexOf("Android"),t=I("a");j=N.indexOf("Safari")!==-1&&N.indexOf("Chrome")===-1&&(e===-1||parseFloat(N.substr(e+8,2))>3);H=j&&parseFloat(N.substr(N.indexOf("Version/")+8,2))<6;G=N.indexOf("Firefox")!==-1;if(/MSIE ([0-9]{1,}[\.0-9]{0,})/.exec(N)||/Trident\/.*rv:([0-9]{1,}[\.0-9]{0,})/.exec(N)){V=parseFloat(RegExp.$1)}if(!t){return false}t.style.cssText="top:1px;opacity:.55;";return/^0.55/.test(t.style.opacity)}(),X=function(e){return v.test(typeof e==="string"?e:(e.currentStyle?e.currentStyle.filter:e.style.filter)||"")?parseFloat(RegExp.$1)/100:1},Y=function(e){if(i.console){console.log(e)}},q,Z,J="",K="",Q=function(e,t){t=t||k;var i=t.style,n,r;if(i[e]!==undefined){return e}e=e.charAt(0).toUpperCase()+e.substr(1);n=["O","Moz","ms","Ms","Webkit"];r=5;while(--r>-1&&i[n[r]+e]===undefined){}if(r>=0){K=r===3?"ms":n[r];J="-"+K.toLowerCase()+"-";return K+e}return null},$=D.defaultView?D.defaultView.getComputedStyle:function(){},ee=n.getStyle=function(e,t,i,n,r){var a;if(!W)if(t==="opacity"){return X(e)}if(!n&&e.style[t]){a=e.style[t]}else if(i=i||$(e)){a=i[t]||i.getPropertyValue(t)||i.getPropertyValue(t.replace(x,"-$1").toLowerCase())}else if(e.currentStyle){a=e.currentStyle[t]}return r!=null&&(!a||a==="none"||a==="auto"||a==="auto auto")?r:a},te=F.convertToPixels=function(e,i,r,a,s){if(a==="px"||!a&&i!=="lineHeight"){return r}if(a==="auto"||!r){return 0}var o=M.test(i),l=e,u=k.style,c=r<0,h=r===1,f,d,p;if(c){r=-r}if(h){r*=100}if(i==="lineHeight"&&!a){d=$(e).lineHeight;e.style.lineHeight=r;f=parseFloat($(e).lineHeight);e.style.lineHeight=d}else if(a==="%"&&i.indexOf("border")!==-1){f=r/100*(o?e.clientWidth:e.clientHeight)}else{u.cssText="border:0 solid red;position:"+ee(e,"position")+";line-height:0;";if(a==="%"||!l.appendChild||a.charAt(0)==="v"||a==="rem"){l=e.parentNode||D.body;if(ee(l,"display").indexOf("flex")!==-1){u.position="absolute"}d=l._gsCache;p=t.ticker.frame;if(d&&o&&d.time===p){return d.width*r/100}u[o?"width":"height"]=r+a}else{u[o?"borderLeftWidth":"borderTopWidth"]=r+a}l.appendChild(k);f=parseFloat(k[o?"offsetWidth":"offsetHeight"]);l.removeChild(k);if(o&&a==="%"&&n.cacheWidths!==false){d=l._gsCache=l._gsCache||{};d.time=p;d.width=f/r*100}if(f===0&&!s){f=te(e,i,r,a,true)}}if(h){f/=100}return c?-f:f},ie=F.calculateOffset=function(e,t,i){if(ee(e,"position",i)!=="absolute"){return 0}var n=t==="left"?"Left":"Top",r=ee(e,"margin"+n,i);return e["offset"+n]-(te(e,t,parseFloat(r),r.replace(m,""))||0)},ne=function(e,t){var i={},n,r,a;if(t=t||$(e,null)){if(n=t.length){while(--n>-1){a=t[n];if(a.indexOf("-transform")===-1||Ce===a){i[a.replace(_,T)]=t.getPropertyValue(a)}}}else{for(n in t){if(n.indexOf("Transform")===-1||Re===n){i[n]=t[n]}}}}else if(t=e.currentStyle||e.style){for(n in t){if(typeof n==="string"&&i[n]===undefined){i[n.replace(_,T)]=t[n]}}}if(!W){i.opacity=X(e)}r=Xe(e,t,false);i.rotation=r.rotation;i.skewX=r.skewX;i.scaleX=r.scaleX;i.scaleY=r.scaleY;i.x=r.x;i.y=r.y;if(De){i.z=r.z;i.rotationX=r.rotationX;i.rotationY=r.rotationY;i.scaleZ=r.scaleZ}if(i.filters){delete i.filters}return i},re=function(e,t,i,n,r){var a={},s=e.style,o,l,u;for(l in i){if(l!=="cssText")if(l!=="length")if(isNaN(l))if(t[l]!==(o=i[l])||r&&r[l])if(l.indexOf("Origin")===-1)if(typeof o==="number"||typeof o==="string"){a[l]=o==="auto"&&(l==="left"||l==="top")?ie(e,l):(o===""||o==="auto"||o==="none")&&typeof t[l]==="string"&&t[l].replace(p,"")!==""?0:o;if(s[l]!==undefined){u=new xe(s,l,s[l],u)}}}if(n){for(l in n){if(l!=="className"){a[l]=n[l]}}}return{difs:a,firstMPT:u}},ae={width:["Left","Right"],height:["Top","Bottom"]},se=["marginLeft","marginRight","marginTop","marginBottom"],oe=function(e,t,i){if((e.nodeName+"").toLowerCase()==="svg"){return(i||$(e))[t]||0}else if(e.getCTM&&He(e)){return e.getBBox()[t]||0}var n=parseFloat(t==="width"?e.offsetWidth:e.offsetHeight),r=ae[t],a=r.length;i=i||$(e,null);while(--a>-1){n-=parseFloat(ee(e,"padding"+r[a],i,true))||0;n-=parseFloat(ee(e,"border"+r[a]+"Width",i,true))||0}return n},le=function(e,t){if(e==="contain"||e==="auto"||e==="auto auto"){return e+" "}if(e==null||e===""){e="0 0"}var i=e.split(" "),n=e.indexOf("left")!==-1?"0%":e.indexOf("right")!==-1?"100%":i[0],r=e.indexOf("top")!==-1?"0%":e.indexOf("bottom")!==-1?"100%":i[1],a;if(i.length>3&&!t){i=e.split(", ").join(",").split(",");e=[];for(a=0;a<i.length;a++){e.push(le(i[a]))}return e.join(",")}if(r==null){r=n==="center"?"50%":"0"}else if(r==="center"){r="50%"}if(n==="center"||isNaN(parseFloat(n))&&(n+"").indexOf("=")===-1){n="50%"}e=n+" "+r+(i.length>2?" "+i[2]:"");if(t){t.oxp=n.indexOf("%")!==-1;t.oyp=r.indexOf("%")!==-1;t.oxr=n.charAt(1)==="=";t.oyr=r.charAt(1)==="=";t.ox=parseFloat(n.replace(p,""));t.oy=parseFloat(r.replace(p,""));t.v=e}return t||e},ue=function(e,t){if(typeof e==="function"){e=e(Z,q)}return typeof e==="string"&&e.charAt(1)==="="?parseInt(e.charAt(0)+"1",10)*parseFloat(e.substr(2)):parseFloat(e)-parseFloat(t)||0},ce=function(e,t){if(typeof e==="function"){e=e(Z,q)}return e==null?t:typeof e==="string"&&e.charAt(1)==="="?parseInt(e.charAt(0)+"1",10)*parseFloat(e.substr(2))+t:parseFloat(e)||0},he=function(e,t,i,n){var r=1e-6,a,s,o,l,u;if(typeof e==="function"){e=e(Z,q)}if(e==null){l=t}else if(typeof e==="number"){l=e}else{a=360;s=e.split("_");u=e.charAt(1)==="=";o=(u?parseInt(e.charAt(0)+"1",10)*parseFloat(s[0].substr(2)):parseFloat(s[0]))*(e.indexOf("rad")===-1?1:R)-(u?0:t);if(s.length){if(n){n[i]=t+o}if(e.indexOf("short")!==-1){o=o%a;if(o!==o%(a/2)){o=o<0?o+a:o-a}}if(e.indexOf("_cw")!==-1&&o<0){o=(o+a*9999999999)%a-(o/a|0)*a}else if(e.indexOf("ccw")!==-1&&o>0){o=(o-a*9999999999)%a-(o/a|0)*a}}l=t+o}if(l<r&&l>-r){l=0}return l},fe={aqua:[0,255,255],lime:[0,255,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,255],navy:[0,0,128],white:[255,255,255],fuchsia:[255,0,255],olive:[128,128,0],yellow:[255,255,0],orange:[255,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[255,0,0],pink:[255,192,203],cyan:[0,255,255],transparent:[255,255,255,0]},de=function(e,t,i){e=e<0?e+1:e>1?e-1:e;return(e*6<1?t+(i-t)*e*6:e<.5?i:e*3<2?t+(i-t)*(2/3-e)*6:t)*255+.5|0},pe=n.parseColor=function(e,t){var i,n,r,a,s,o,l,u,c,d,p;if(!e){i=fe.black}else if(typeof e==="number"){i=[e>>16,e>>8&255,e&255]}else{if(e.charAt(e.length-1)===","){e=e.substr(0,e.length-1)}if(fe[e]){i=fe[e]}else if(e.charAt(0)==="#"){if(e.length===4){n=e.charAt(1);r=e.charAt(2);a=e.charAt(3);e="#"+n+n+r+r+a+a}e=parseInt(e.substr(1),16);i=[e>>16,e>>8&255,e&255]}else if(e.substr(0,3)==="hsl"){i=p=e.match(h);if(!t){s=Number(i[0])%360/360;o=Number(i[1])/100;l=Number(i[2])/100;r=l<=.5?l*(o+1):l+o-l*o;n=l*2-r;if(i.length>3){i[3]=Number(i[3])}i[0]=de(s+1/3,n,r);i[1]=de(s,n,r);i[2]=de(s-1/3,n,r)}else if(e.indexOf("=")!==-1){return e.match(f)}}else{i=e.match(h)||fe.transparent}i[0]=Number(i[0]);i[1]=Number(i[1]);i[2]=Number(i[2]);if(i.length>3){i[3]=Number(i[3])}}if(t&&!p){n=i[0]/255;r=i[1]/255;a=i[2]/255;u=Math.max(n,r,a);c=Math.min(n,r,a);l=(u+c)/2;if(u===c){s=o=0}else{d=u-c;o=l>.5?d/(2-u-c):d/(u+c);s=u===n?(r-a)/d+(r<a?6:0):u===r?(a-n)/d+2:(n-r)/d+4;s*=60}i[0]=s+.5|0;i[1]=o*100+.5|0;i[2]=l*100+.5|0}return i},me=function(e,t){var i=e.match(ve)||[],n=0,r="",a,s,o;if(!i.length){return e}for(a=0;a<i.length;a++){s=i[a];o=e.substr(n,e.indexOf(s,n)-n);n+=o.length+s.length;s=pe(s,t);if(s.length===3){s.push(1)}r+=o+(t?"hsla("+s[0]+","+s[1]+"%,"+s[2]+"%,"+s[3]:"rgba("+s.join(","))+")"}return r+e.substr(n)},ve="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3}){1,2}\\b";for(c in fe){ve+="|"+c+"\\b"}ve=new RegExp(ve+")","gi");n.colorStringFilter=function(e){var t=e[0]+" "+e[1],i;if(ve.test(t)){i=t.indexOf("hsl(")!==-1||t.indexOf("hsla(")!==-1;e[0]=me(e[0],i);e[1]=me(e[1],i)}ve.lastIndex=0};if(!t.defaultStringFilter){t.defaultStringFilter=n.colorStringFilter}var ge=function(e,t,i,n){if(e==null){return function(e){return e}}var r=t?(e.match(ve)||[""])[0]:"",a=e.split(r).join("").match(d)||[],s=e.substr(0,e.indexOf(a[0])),o=e.charAt(e.length-1)===")"?")":"",l=e.indexOf(" ")!==-1?" ":",",u=a.length,c=u>0?a[0].replace(h,""):"",f;if(!u){return function(e){return e}}if(t){f=function(e){var t,h,p,m;if(typeof e==="number"){e+=c}else if(n&&A.test(e)){m=e.replace(A,"|").split("|");for(p=0;p<m.length;p++){m[p]=f(m[p])}return m.join(",")}t=(e.match(ve)||[r])[0];h=e.split(t).join("").match(d)||[];p=h.length;if(u>p--){while(++p<u){h[p]=i?h[(p-1)/2|0]:a[p]}}return s+h.join(l)+l+t+o+(e.indexOf("inset")!==-1?" inset":"")};return f}f=function(e){var t,r,h;if(typeof e==="number"){e+=c}else if(n&&A.test(e)){r=e.replace(A,"|").split("|");for(h=0;h<r.length;h++){r[h]=f(r[h])}return r.join(",")}t=e.match(d)||[];h=t.length;if(u>h--){while(++h<u){t[h]=i?t[(h-1)/2|0]:a[h]}}return s+t.join(l)+o};return f},ye=function(e){e=e.split(",");return function(t,i,n,r,a,s,o){var l=(i+"").split(" "),u;o={};for(u=0;u<4;u++){o[e[u]]=l[u]=l[u]||l[(u-1)/2>>0]}return r.parse(t,o,a,s)}},be=F._setPluginRatio=function(e){this.plugin.setRatio(e);var t=this.data,i=t.proxy,n=t.firstMPT,r=1e-6,a,s,o,l,u;while(n){a=i[n.v];if(n.r){a=Math.round(a)}else if(a<r&&a>-r){a=0}n.t[n.p]=a;n=n._next}if(t.autoRotate){t.autoRotate.rotation=t.mod?t.mod(i.rotation,this.t):i.rotation}if(e===1||e===0){n=t.firstMPT;u=e===1?"e":"b";while(n){s=n.t;if(!s.type){s[u]=s.s+s.xs0}else if(s.type===1){l=s.xs0+s.s+s.xs1;for(o=1;o<s.l;o++){l+=s["xn"+o]+s["xs"+(o+1)]}s[u]=l}n=n._next}}},xe=function(e,t,i,n,r){this.t=e;this.p=t;this.v=i;this.r=r;if(n){n._prev=this;this._next=n}},_e=F._parseToProxy=function(e,t,i,n,r,a){var s=n,o={},l={},u=i._transform,c=C,h,f,d,p,m;i._transform=null;C=t;n=m=i.parse(e,t,n,r);C=c;if(a){i._transform=u;if(s){s._prev=null;if(s._prev){s._prev._next=null}}}while(n&&n!==s){if(n.type<=1){f=n.p;l[f]=n.s+n.c;o[f]=n.s;if(!a){p=new xe(n,"s",f,p,n.r);n.c=0}if(n.type===1){h=n.l;while(--h>0){d="xn"+h;f=n.p+"_"+d;l[f]=n.data[d];o[f]=n[d];if(!a){p=new xe(n,d,f,p,n.rxp[d])}}}}n=n._next}return{proxy:o,end:l,firstMPT:p,pt:m}},we=F.CSSPropTween=function(e,t,i,n,r,s,o,u,c,h,f){this.t=e;this.p=t;this.s=i;this.c=n;this.n=o||t;if(!(e instanceof we)){l.push(this.n)}this.r=u;this.type=s||0;if(c){this.pr=c;a=true}this.b=h===undefined?i:h;this.e=f===undefined?i+n:f;if(r){this._next=r;r._prev=this}},Te=function(e,t,i,n,r,a){var s=new we(e,t,i,n-i,r,-1,a);s.b=i;s.e=s.xs0=n;return s},Me=n.parseComplex=function(e,t,i,r,a,s,o,l,u,c){i=i||s||"";if(typeof r==="function"){r=r(Z,q)}o=new we(e,t,0,0,o,c?2:1,null,false,l,i,r);r+="";if(a&&ve.test(r+i)){r=[i,r];n.colorStringFilter(r);i=r[0];r=r[1]}var d=i.split(", ").join(",").split(" "),p=r.split(", ").join(",").split(" "),m=d.length,v=B!==false,g,y,b,x,_,w,T,M,S,E,P,L,R;if(r.indexOf(",")!==-1||i.indexOf(",")!==-1){if((r+i).indexOf("rgb")!==-1||(r+i).indexOf("hsl")!==-1){d=d.join(" ").replace(A,", ").split(" ");p=p.join(" ").replace(A,", ").split(" ")}else{d=d.join(" ").split(",").join(", ").split(" ");p=p.join(" ").split(",").join(", ").split(" ")}m=d.length}if(m!==p.length){d=(s||"").split(" ");m=d.length}o.plugin=u;o.setRatio=c;ve.lastIndex=0;for(g=0;g<m;g++){x=d[g];_=p[g];M=parseFloat(x);if(M||M===0){o.appendXtra("",M,ue(_,M),_.replace(f,""),v&&_.indexOf("px")!==-1,true)}else if(a&&ve.test(x)){L=_.indexOf(")")+1;L=")"+(L?_.substr(L):"");R=_.indexOf("hsl")!==-1&&W;E=_;x=pe(x,R);_=pe(_,R);S=x.length+_.length>6;if(S&&!W&&_[3]===0){o["xs"+o.l]+=o.l?" transparent":"transparent";o.e=o.e.split(p[g]).join("transparent")}else{if(!W){S=false}if(R){o.appendXtra(E.substr(0,E.indexOf("hsl"))+(S?"hsla(":"hsl("),x[0],ue(_[0],x[0]),",",false,true).appendXtra("",x[1],ue(_[1],x[1]),"%,",false).appendXtra("",x[2],ue(_[2],x[2]),S?"%,":"%"+L,false)}else{o.appendXtra(E.substr(0,E.indexOf("rgb"))+(S?"rgba(":"rgb("),x[0],_[0]-x[0],",",true,true).appendXtra("",x[1],_[1]-x[1],",",true).appendXtra("",x[2],_[2]-x[2],S?",":L,true)}if(S){x=x.length<4?1:x[3];o.appendXtra("",x,(_.length<4?1:_[3])-x,L,false)}}ve.lastIndex=0}else{w=x.match(h);if(!w){o["xs"+o.l]+=o.l||o["xs"+o.l]?" "+_:_}else{T=_.match(f);if(!T||T.length!==w.length){return o}b=0;for(y=0;y<w.length;y++){P=w[y];E=x.indexOf(P,b);o.appendXtra(x.substr(b,E-b),Number(P),ue(T[y],P),"",v&&x.substr(E+P.length,2)==="px",y===0);b=E+P.length}o["xs"+o.l]+=x.substr(b)}}}if(r.indexOf("=")!==-1)if(o.data){L=o.xs0+o.data.s;for(g=1;g<o.l;g++){L+=o["xs"+g]+o.data["xn"+g]}o.e=L+o["xs"+g]}if(!o.l){o.type=-1;o.xs0=o.e}return o.xfirst||o},Se=9;c=we.prototype;c.l=c.pr=0;while(--Se>0){c["xn"+Se]=0;c["xs"+Se]=""}c.xs0="";c._next=c._prev=c.xfirst=c.data=c.plugin=c.setRatio=c.rxp=null;c.appendXtra=function(e,t,i,n,r,a){var s=this,o=s.l;s["xs"+o]+=a&&(o||s["xs"+o])?" "+e:e||"";if(!i)if(o!==0&&!s.plugin){s["xs"+o]+=t+(n||"");return s}s.l++;s.type=s.setRatio?2:1;s["xs"+s.l]=n||"";if(o>0){s.data["xn"+o]=t+i;s.rxp["xn"+o]=r;s["xn"+o]=t;if(!s.plugin){s.xfirst=new we(s,"xn"+o,t,i,s.xfirst||s,0,s.n,r,s.pr);s.xfirst.xs0=0}return s}s.data={s:t+i};s.rxp={};s.s=t;s.c=i;s.r=r;return s};var Ee=function(e,t){t=t||{};this.p=t.prefix?Q(e)||e:e;u[e]=u[this.p]=this;this.format=t.formatter||ge(t.defaultValue,t.color,t.collapsible,t.multi);if(t.parser){this.parse=t.parser}this.clrs=t.color;this.multi=t.multi;this.keyword=t.keyword;this.dflt=t.defaultValue;this.pr=t.priority||0},Ae=F._registerComplexSpecialProp=function(e,t,i){if(typeof t!=="object"){t={parser:i}}var n=e.split(","),r=t.defaultValue,a,s;i=i||[r];for(a=0;a<n.length;a++){t.prefix=a===0&&t.prefix;t.defaultValue=i[a]||r;s=new Ee(n[a],t)}},Pe=F._registerPluginProp=function(e){if(!u[e]){var t=e.charAt(0).toUpperCase()+e.substr(1)+"Plugin";Ae(e,{parser:function(e,i,n,a,s,o,l){var c=r.com.greensock.plugins[t];if(!c){Y("Error: "+t+" js file not loaded.");return s}c._cssRegister();return u[n].parse(e,i,n,a,s,o,l)}})}};c=Ee.prototype;c.parseComplex=function(e,t,i,n,r,a){var s=this.keyword,o,l,u,c,h,f;if(this.multi)if(A.test(i)||A.test(t)){l=t.replace(A,"|").split("|");u=i.replace(A,"|").split("|")}else if(s){l=[t];u=[i]}if(u){c=u.length>l.length?u.length:l.length;for(o=0;o<c;o++){t=l[o]=l[o]||this.dflt;i=u[o]=u[o]||this.dflt;if(s){h=t.indexOf(s);f=i.indexOf(s);if(h!==f){if(f===-1){l[o]=l[o].split(s).join("")}else if(h===-1){l[o]+=" "+s}}}}t=l.join(", ");i=u.join(", ")}return Me(e,this.p,t,i,this.clrs,this.dflt,n,this.pr,r,a)};c.parse=function(e,t,i,n,r,a,s){return this.parseComplex(e.style,this.format(ee(e,this.p,o,false,this.dflt)),this.format(t),r,a)};n.registerSpecialProp=function(e,t,i){Ae(e,{parser:function(e,n,r,a,s,o,l){var u=new we(e,r,0,0,s,2,r,false,i);u.plugin=o;u.setRatio=t(e,n,a._tween,r);return u},priority:i})};n.useSVGTransformAttr=true;var Le="scaleX,scaleY,scaleZ,x,y,z,skewX,skewY,rotation,rotationX,rotationY,perspective,xPercent,yPercent".split(","),Re=Q("transform"),Ce=J+"transform",Oe=Q("transformOrigin"),De=Q("perspective")!==null,Ie=F.Transform=function(){this.perspective=parseFloat(n.defaultTransformPerspective)||0;this.force3D=n.defaultForce3D===false||!De?false:n.defaultForce3D||"auto"},ke=i.SVGElement,Ue,Fe=function(e,t,i){var n=D.createElementNS("http://www.w3.org/2000/svg",e),r=/([a-z])([A-Z])/g,a;for(a in i){n.setAttributeNS(null,a.replace(r,"$1-$2").toLowerCase(),i[a])}t.appendChild(n);return n},Ne=D.documentElement||{},Be=function(){var e=V||/Android/i.test(N)&&!i.chrome,t,n,r;if(D.createElementNS&&!e){t=Fe("svg",Ne);n=Fe("rect",t,{width:100,height:50,x:100});r=n.getBoundingClientRect().width;n.style[Oe]="50% 50%";n.style[Re]="scaleX(0.5)";e=r===n.getBoundingClientRect().width&&!(G&&De);Ne.removeChild(t)}return e}(),ze=function(e,t,i,r,a,s){var o=e._gsTransform,l=We(e,true),u,c,h,f,d,p,m,v,g,y,b,x,_,w;if(o){_=o.xOrigin;w=o.yOrigin}if(!r||(u=r.split(" ")).length<2){m=e.getBBox();if(m.x===0&&m.y===0&&m.width+m.height===0){m={x:parseFloat(e.hasAttribute("x")?e.getAttribute("x"):e.hasAttribute("cx")?e.getAttribute("cx"):0)||0,y:parseFloat(e.hasAttribute("y")?e.getAttribute("y"):e.hasAttribute("cy")?e.getAttribute("cy"):0)||0,width:0,height:0}}t=le(t).split(" ");u=[(t[0].indexOf("%")!==-1?parseFloat(t[0])/100*m.width:parseFloat(t[0]))+m.x,(t[1].indexOf("%")!==-1?parseFloat(t[1])/100*m.height:parseFloat(t[1]))+m.y]}i.xOrigin=f=parseFloat(u[0]);i.yOrigin=d=parseFloat(u[1]);if(r&&l!==Ve){p=l[0];m=l[1];v=l[2];g=l[3];y=l[4];b=l[5];x=p*g-m*v;if(x){c=f*(g/x)+d*(-v/x)+(v*b-g*y)/x;h=f*(-m/x)+d*(p/x)-(p*b-m*y)/x;f=i.xOrigin=u[0]=c;d=i.yOrigin=u[1]=h}}if(o){if(s){i.xOffset=o.xOffset;i.yOffset=o.yOffset;o=i}if(a||a!==false&&n.defaultSmoothOrigin!==false){c=f-_;h=d-w;o.xOffset+=c*l[0]+h*l[2]-c;o.yOffset+=c*l[1]+h*l[3]-h}else{o.xOffset=o.yOffset=0}}if(!s){e.setAttribute("data-svg-origin",u.join(" "))}},je=function(e){var t=I("svg",this.ownerSVGElement&&this.ownerSVGElement.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),i=this.parentNode,n=this.nextSibling,r=this.style.cssText,a;Ne.appendChild(t);t.appendChild(this);this.style.display="block";if(e){try{a=this.getBBox();this._originalGetBBox=this.getBBox;this.getBBox=je}catch(e){}}else if(this._originalGetBBox){a=this._originalGetBBox()}if(n){i.insertBefore(this,n)}else{i.appendChild(this)}Ne.removeChild(t);this.style.cssText=r;return a},Ge=function(e){try{return e.getBBox()}catch(t){return je.call(e,true)}},He=function(e){return!!(ke&&e.getCTM&&(!e.parentNode||e.ownerSVGElement)&&Ge(e))},Ve=[1,0,0,1,0,0],We=function(e,t){var i=e._gsTransform||new Ie,n=1e5,r=e.style,a,s,o,l,u,c;if(Re){s=ee(e,Ce,null,true)}else if(e.currentStyle){s=e.currentStyle.filter.match(S);s=s&&s.length===4?[s[0].substr(4),Number(s[2].substr(4)),Number(s[1].substr(4)),s[3].substr(4),i.x||0,i.y||0].join(","):""}a=!s||s==="none"||s==="matrix(1, 0, 0, 1, 0, 0)";if(Re&&((c=!$(e)||$(e).display==="none")||!e.parentNode)){if(c){l=r.display;r.display="block"}if(!e.parentNode){u=1;Ne.appendChild(e)}s=ee(e,Ce,null,true);a=!s||s==="none"||s==="matrix(1, 0, 0, 1, 0, 0)";if(l){r.display=l}else if(c){Je(r,"display")}if(u){Ne.removeChild(e)}}if(i.svg||e.getCTM&&He(e)){if(a&&(r[Re]+"").indexOf("matrix")!==-1){s=r[Re];a=0}o=e.getAttribute("transform");if(a&&o){if(o.indexOf("matrix")!==-1){s=o;a=0}else if(o.indexOf("translate")!==-1){s="matrix(1,0,0,1,"+o.match(/(?:\-|\b)[\d\-\.e]+\b/gi).join(",")+")";a=0}}}if(a){return Ve}o=(s||"").match(h)||[];Se=o.length;while(--Se>-1){l=Number(o[Se]);o[Se]=(u=l-(l|=0))?(u*n+(u<0?-.5:.5)|0)/n+l:l}return t&&o.length>6?[o[0],o[1],o[4],o[5],o[12],o[13]]:o},Xe=F.getTransform=function(e,i,r,a){if(e._gsTransform&&r&&!a){return e._gsTransform}var s=r?e._gsTransform||new Ie:new Ie,o=s.scaleX<0,l=2e-5,u=1e5,c=De?parseFloat(ee(e,Oe,i,false,"0 0 0").split(" ")[2])||s.zOrigin||0:0,h=parseFloat(n.defaultTransformPerspective)||0,f,d,p,m,v,g;s.svg=!!(e.getCTM&&He(e));if(s.svg){ze(e,ee(e,Oe,i,false,"50% 50%")+"",s,e.getAttribute("data-svg-origin"));Ue=n.useSVGTransformAttr||Be}f=We(e);if(f!==Ve){if(f.length===16){var y=f[0],b=f[1],x=f[2],_=f[3],w=f[4],T=f[5],M=f[6],S=f[7],E=f[8],A=f[9],P=f[10],L=f[12],C=f[13],O=f[14],D=f[11],I=Math.atan2(M,P),k,U,F,N,B,z;if(s.zOrigin){O=-s.zOrigin;L=E*O-f[12];C=A*O-f[13];O=P*O+s.zOrigin-f[14]}s.rotationX=I*R;if(I){B=Math.cos(-I);z=Math.sin(-I);k=w*B+E*z;U=T*B+A*z;F=M*B+P*z;E=w*-z+E*B;A=T*-z+A*B;P=M*-z+P*B;D=S*-z+D*B;w=k;T=U;M=F}I=Math.atan2(-x,P);s.rotationY=I*R;if(I){B=Math.cos(-I);z=Math.sin(-I);k=y*B-E*z;U=b*B-A*z;F=x*B-P*z;A=b*z+A*B;P=x*z+P*B;D=_*z+D*B;y=k;b=U;x=F}I=Math.atan2(b,y);s.rotation=I*R;if(I){B=Math.cos(I);z=Math.sin(I);k=y*B+b*z;U=w*B+T*z;F=E*B+A*z;b=b*B-y*z;T=T*B-w*z;A=A*B-E*z;y=k;w=U;E=F}if(s.rotationX&&Math.abs(s.rotationX)+Math.abs(s.rotation)>359.9){s.rotationX=s.rotation=0;s.rotationY=180-s.rotationY}I=Math.atan2(w,T);s.scaleX=(Math.sqrt(y*y+b*b+x*x)*u+.5|0)/u;s.scaleY=(Math.sqrt(T*T+M*M)*u+.5|0)/u;s.scaleZ=(Math.sqrt(E*E+A*A+P*P)*u+.5|0)/u;y/=s.scaleX;w/=s.scaleY;b/=s.scaleX;T/=s.scaleY;if(Math.abs(I)>l){s.skewX=I*R;w=0;if(s.skewType!=="simple"){s.scaleY*=1/Math.cos(I)}}else{s.skewX=0}s.perspective=D?1/(D<0?-D:D):0;s.x=L;s.y=C;s.z=O;if(s.svg){s.x-=s.xOrigin-(s.xOrigin*y-s.yOrigin*w);s.y-=s.yOrigin-(s.yOrigin*b-s.xOrigin*T)}}else if(!De||a||!f.length||s.x!==f[4]||s.y!==f[5]||!s.rotationX&&!s.rotationY){var j=f.length>=6,G=j?f[0]:1,H=f[1]||0,V=f[2]||0,W=j?f[3]:1;s.x=f[4]||0;s.y=f[5]||0;p=Math.sqrt(G*G+H*H);m=Math.sqrt(W*W+V*V);v=G||H?Math.atan2(H,G)*R:s.rotation||0;g=V||W?Math.atan2(V,W)*R+v:s.skewX||0;s.scaleX=p;s.scaleY=m;s.rotation=v;s.skewX=g;if(De){s.rotationX=s.rotationY=s.z=0;s.perspective=h;s.scaleZ=1}if(s.svg){s.x-=s.xOrigin-(s.xOrigin*G+s.yOrigin*V);s.y-=s.yOrigin-(s.xOrigin*H+s.yOrigin*W)}}if(Math.abs(s.skewX)>90&&Math.abs(s.skewX)<270){if(o){s.scaleX*=-1;s.skewX+=s.rotation<=0?180:-180;s.rotation+=s.rotation<=0?180:-180}else{s.scaleY*=-1;s.skewX+=s.skewX<=0?180:-180}}s.zOrigin=c;for(d in s){if(s[d]<l)if(s[d]>-l){s[d]=0}}}if(r){e._gsTransform=s;if(s.svg){if(Ue&&e.style[Re]){t.delayedCall(.001,function(){Je(e.style,Re)})}else if(!Ue&&e.getAttribute("transform")){t.delayedCall(.001,function(){e.removeAttribute("transform")})}}}return s},Ye=function(e){var t=this.data,i=-t.rotation*L,n=i+t.skewX*L,r=1e5,a=(Math.cos(i)*t.scaleX*r|0)/r,s=(Math.sin(i)*t.scaleX*r|0)/r,o=(Math.sin(n)*-t.scaleY*r|0)/r,l=(Math.cos(n)*t.scaleY*r|0)/r,u=this.t.style,c=this.t.currentStyle,h,f;if(!c){return}f=s;s=-o;o=-f;h=c.filter;u.filter="";var d=this.t.offsetWidth,p=this.t.offsetHeight,g=c.position!=="absolute",y="progid:DXImageTransform.Microsoft.Matrix(M11="+a+", M12="+s+", M21="+o+", M22="+l,b=t.x+d*t.xPercent/100,x=t.y+p*t.yPercent/100,_,w;if(t.ox!=null){_=(t.oxp?d*t.ox*.01:t.ox)-d/2;w=(t.oyp?p*t.oy*.01:t.oy)-p/2;b+=_-(_*a+w*s);x+=w-(_*o+w*l)}if(!g){y+=", sizingMethod='auto expand')"}else{_=d/2;w=p/2;y+=", Dx="+(_-(_*a+w*s)+b)+", Dy="+(w-(_*o+w*l)+x)+")"}if(h.indexOf("DXImageTransform.Microsoft.Matrix(")!==-1){u.filter=h.replace(E,y)}else{u.filter=y+" "+h}if(e===0||e===1)if(a===1)if(s===0)if(o===0)if(l===1)if(!g||y.indexOf("Dx=0, Dy=0")!==-1)if(!v.test(h)||parseFloat(RegExp.$1)===100)if(h.indexOf("gradient("&&h.indexOf("Alpha"))===-1){u.removeAttribute("filter")}if(!g){var T=V<8?1:-1,M,S,A;_=t.ieOffsetX||0;w=t.ieOffsetY||0;t.ieOffsetX=Math.round((d-((a<0?-a:a)*d+(s<0?-s:s)*p))/2+b);t.ieOffsetY=Math.round((p-((l<0?-l:l)*p+(o<0?-o:o)*d))/2+x);for(Se=0;Se<4;Se++){S=se[Se];M=c[S];f=M.indexOf("px")!==-1?parseFloat(M):te(this.t,S,parseFloat(M),M.replace(m,""))||0;if(f!==t[S]){A=Se<2?-t.ieOffsetX:-t.ieOffsetY}else{A=Se<2?_-t.ieOffsetX:w-t.ieOffsetY}u[S]=(t[S]=Math.round(f-A*(Se===0||Se===2?1:T)))+"px"}}},qe=F.set3DTransformRatio=F.setTransformRatio=function(e){var t=this.data,i=this.t.style,n=t.rotation,r=t.rotationX,a=t.rotationY,s=t.scaleX,o=t.scaleY,l=t.scaleZ,u=t.x,c=t.y,h=t.z,f=t.svg,d=t.perspective,p=t.force3D,m=t.skewY,v=t.skewX,g,y,b,x,_,w,T,M,S,E,A,P,R,C,O,D,I,k,U,F,N,B,z;if(m){v+=m;n+=m}if(((e===1||e===0)&&p==="auto"&&(this.tween._totalTime===this.tween._totalDuration||!this.tween._totalTime)||!p)&&!h&&!d&&!a&&!r&&l===1||Ue&&f||!De){if(n||v||f){n*=L;B=v*L;z=1e5;y=Math.cos(n)*s;_=Math.sin(n)*s;b=Math.sin(n-B)*-o;w=Math.cos(n-B)*o;if(B&&t.skewType==="simple"){g=Math.tan(B-m*L);g=Math.sqrt(1+g*g);b*=g;w*=g;if(m){g=Math.tan(m*L);g=Math.sqrt(1+g*g);y*=g;_*=g}}if(f){u+=t.xOrigin-(t.xOrigin*y+t.yOrigin*b)+t.xOffset;c+=t.yOrigin-(t.xOrigin*_+t.yOrigin*w)+t.yOffset;if(Ue&&(t.xPercent||t.yPercent)){O=this.t.getBBox();u+=t.xPercent*.01*O.width;c+=t.yPercent*.01*O.height}O=1e-6;if(u<O)if(u>-O){u=0}if(c<O)if(c>-O){c=0}}U=(y*z|0)/z+","+(_*z|0)/z+","+(b*z|0)/z+","+(w*z|0)/z+","+u+","+c+")";if(f&&Ue){this.t.setAttribute("transform","matrix("+U)}else{i[Re]=(t.xPercent||t.yPercent?"translate("+t.xPercent+"%,"+t.yPercent+"%) matrix(":"matrix(")+U}}else{i[Re]=(t.xPercent||t.yPercent?"translate("+t.xPercent+"%,"+t.yPercent+"%) matrix(":"matrix(")+s+",0,0,"+o+","+u+","+c+")"}return}if(G){O=1e-4;if(s<O&&s>-O){s=l=2e-5}if(o<O&&o>-O){o=l=2e-5}if(d&&!t.z&&!t.rotationX&&!t.rotationY){d=0}}if(n||v){n*=L;D=y=Math.cos(n);I=_=Math.sin(n);if(v){n-=v*L;D=Math.cos(n);I=Math.sin(n);if(t.skewType==="simple"){g=Math.tan((v-m)*L);g=Math.sqrt(1+g*g);D*=g;I*=g;if(t.skewY){g=Math.tan(m*L);g=Math.sqrt(1+g*g);y*=g;_*=g}}}b=-I;w=D}else if(!a&&!r&&l===1&&!d&&!f){i[Re]=(t.xPercent||t.yPercent?"translate("+t.xPercent+"%,"+t.yPercent+"%) translate3d(":"translate3d(")+u+"px,"+c+"px,"+h+"px)"+(s!==1||o!==1?" scale("+s+","+o+")":"");return}else{y=w=1;b=_=0}E=1;x=T=M=S=A=P=0;R=d?-1/d:0;C=t.zOrigin;O=1e-6;F=",";N="0";n=a*L;if(n){D=Math.cos(n);I=Math.sin(n);M=-I;A=R*-I;x=y*I;T=_*I;E=D;R*=D;y*=D;_*=D}n=r*L;if(n){D=Math.cos(n);I=Math.sin(n);g=b*D+x*I;k=w*D+T*I;S=E*I;P=R*I;x=b*-I+x*D;T=w*-I+T*D;E=E*D;R=R*D;b=g;w=k}if(l!==1){x*=l;T*=l;E*=l;R*=l}if(o!==1){b*=o;w*=o;S*=o;P*=o}if(s!==1){y*=s;_*=s;M*=s;A*=s}if(C||f){if(C){u+=x*-C;c+=T*-C;h+=E*-C+C}if(f){u+=t.xOrigin-(t.xOrigin*y+t.yOrigin*b)+t.xOffset;c+=t.yOrigin-(t.xOrigin*_+t.yOrigin*w)+t.yOffset}if(u<O&&u>-O){u=N}if(c<O&&c>-O){c=N}if(h<O&&h>-O){h=0}}U=t.xPercent||t.yPercent?"translate("+t.xPercent+"%,"+t.yPercent+"%) matrix3d(":"matrix3d(";U+=(y<O&&y>-O?N:y)+F+(_<O&&_>-O?N:_)+F+(M<O&&M>-O?N:M);U+=F+(A<O&&A>-O?N:A)+F+(b<O&&b>-O?N:b)+F+(w<O&&w>-O?N:w);if(r||a||l!==1){U+=F+(S<O&&S>-O?N:S)+F+(P<O&&P>-O?N:P)+F+(x<O&&x>-O?N:x);U+=F+(T<O&&T>-O?N:T)+F+(E<O&&E>-O?N:E)+F+(R<O&&R>-O?N:R)+F}else{U+=",0,0,0,0,1,0,"}U+=u+F+c+F+h+F+(d?1+-h/d:1)+")";i[Re]=U};c=Ie.prototype;c.x=c.y=c.z=c.skewX=c.skewY=c.rotation=c.rotationX=c.rotationY=c.zOrigin=c.xPercent=c.yPercent=c.xOffset=c.yOffset=0;c.scaleX=c.scaleY=c.scaleZ=1;Ae("transform,scale,scaleX,scaleY,scaleZ,x,y,z,rotation,rotationX,rotationY,rotationZ,skewX,skewY,shortRotation,shortRotationX,shortRotationY,shortRotationZ,transformOrigin,svgOrigin,transformPerspective,directionalRotation,parseTransform,force3D,skewType,xPercent,yPercent,smoothOrigin",{parser:function(e,t,i,r,a,s,l){if(r._lastParsedTransform===l){return a}r._lastParsedTransform=l;var u=l.scale&&typeof l.scale==="function"?l.scale:0,c;if(typeof l[i]==="function"){c=l[i];l[i]=t}if(u){l.scale=u(Z,e)}var h=e._gsTransform,f=e.style,d=1e-6,p=Le.length,m=l,v={},g="transformOrigin",y=Xe(e,o,true,m.parseTransform),b=m.transform&&(typeof m.transform==="function"?m.transform(Z,q):m.transform),x,_,w,T,M,S,E,A,P;y.skewType=m.skewType||y.skewType||n.defaultSkewType;r._transform=y;if(b&&typeof b==="string"&&Re){_=k.style;_[Re]=b;_.display="block";_.position="absolute";D.body.appendChild(k);x=Xe(k,null,false);if(y.skewType==="simple"){x.scaleY*=Math.cos(x.skewX*L)}if(y.svg){S=y.xOrigin;E=y.yOrigin;x.x-=y.xOffset;x.y-=y.yOffset;if(m.transformOrigin||m.svgOrigin){b={};ze(e,le(m.transformOrigin),b,m.svgOrigin,m.smoothOrigin,true);S=b.xOrigin;E=b.yOrigin;x.x-=b.xOffset-y.xOffset
;x.y-=b.yOffset-y.yOffset}if(S||E){A=We(k,true);x.x-=S-(S*A[0]+E*A[2]);x.y-=E-(S*A[1]+E*A[3])}}D.body.removeChild(k);if(!x.perspective){x.perspective=y.perspective}if(m.xPercent!=null){x.xPercent=ce(m.xPercent,y.xPercent)}if(m.yPercent!=null){x.yPercent=ce(m.yPercent,y.yPercent)}}else if(typeof m==="object"){x={scaleX:ce(m.scaleX!=null?m.scaleX:m.scale,y.scaleX),scaleY:ce(m.scaleY!=null?m.scaleY:m.scale,y.scaleY),scaleZ:ce(m.scaleZ,y.scaleZ),x:ce(m.x,y.x),y:ce(m.y,y.y),z:ce(m.z,y.z),xPercent:ce(m.xPercent,y.xPercent),yPercent:ce(m.yPercent,y.yPercent),perspective:ce(m.transformPerspective,y.perspective)};M=m.directionalRotation;if(M!=null){if(typeof M==="object"){for(_ in M){m[_]=M[_]}}else{m.rotation=M}}if(typeof m.x==="string"&&m.x.indexOf("%")!==-1){x.x=0;x.xPercent=ce(m.x,y.xPercent)}if(typeof m.y==="string"&&m.y.indexOf("%")!==-1){x.y=0;x.yPercent=ce(m.y,y.yPercent)}x.rotation=he("rotation"in m?m.rotation:"shortRotation"in m?m.shortRotation+"_short":"rotationZ"in m?m.rotationZ:y.rotation,y.rotation,"rotation",v);if(De){x.rotationX=he("rotationX"in m?m.rotationX:"shortRotationX"in m?m.shortRotationX+"_short":y.rotationX||0,y.rotationX,"rotationX",v);x.rotationY=he("rotationY"in m?m.rotationY:"shortRotationY"in m?m.shortRotationY+"_short":y.rotationY||0,y.rotationY,"rotationY",v)}x.skewX=he(m.skewX,y.skewX);x.skewY=he(m.skewY,y.skewY)}if(De&&m.force3D!=null){y.force3D=m.force3D;T=true}w=y.force3D||y.z||y.rotationX||y.rotationY||x.z||x.rotationX||x.rotationY||x.perspective;if(!w&&m.scale!=null){x.scaleZ=1}while(--p>-1){P=Le[p];b=x[P]-y[P];if(b>d||b<-d||m[P]!=null||C[P]!=null){T=true;a=new we(y,P,y[P],b,a);if(P in v){a.e=v[P]}a.xs0=0;a.plugin=s;r._overwriteProps.push(a.n)}}b=m.transformOrigin;if(y.svg&&(b||m.svgOrigin)){S=y.xOffset;E=y.yOffset;ze(e,le(b),x,m.svgOrigin,m.smoothOrigin);a=Te(y,"xOrigin",(h?y:x).xOrigin,x.xOrigin,a,g);a=Te(y,"yOrigin",(h?y:x).yOrigin,x.yOrigin,a,g);if(S!==y.xOffset||E!==y.yOffset){a=Te(y,"xOffset",h?S:y.xOffset,y.xOffset,a,g);a=Te(y,"yOffset",h?E:y.yOffset,y.yOffset,a,g)}b="0px 0px"}if(b||De&&w&&y.zOrigin){if(Re){T=true;P=Oe;b=(b||ee(e,P,o,false,"50% 50%"))+"";a=new we(f,P,0,0,a,-1,g);a.b=f[P];a.plugin=s;if(De){_=y.zOrigin;b=b.split(" ");y.zOrigin=(b.length>2&&!(_!==0&&b[2]==="0px")?parseFloat(b[2]):_)||0;a.xs0=a.e=b[0]+" "+(b[1]||"50%")+" 0px";a=new we(y,"zOrigin",0,0,a,-1,a.n);a.b=_;a.xs0=a.e=y.zOrigin}else{a.xs0=a.e=b}}else{le(b+"",y)}}if(T){r._transformType=!(y.svg&&Ue)&&(w||this._transformType===3)?3:2}if(c){l[i]=c}if(u){l.scale=u}return a},prefix:true});Ae("boxShadow",{defaultValue:"0px 0px 0px 0px #999",prefix:true,color:true,multi:true,keyword:"inset"});Ae("borderRadius",{defaultValue:"0px",parser:function(e,t,i,n,r,a){t=this.format(t);var l=["borderTopLeftRadius","borderTopRightRadius","borderBottomRightRadius","borderBottomLeftRadius"],u=e.style,c,h,f,d,p,m,v,g,y,b,x,_,w,T,M,S;y=parseFloat(e.offsetWidth);b=parseFloat(e.offsetHeight);c=t.split(" ");for(h=0;h<l.length;h++){if(this.p.indexOf("border")){l[h]=Q(l[h])}p=d=ee(e,l[h],o,false,"0px");if(p.indexOf(" ")!==-1){d=p.split(" ");p=d[0];d=d[1]}m=f=c[h];v=parseFloat(p);_=p.substr((v+"").length);w=m.charAt(1)==="=";if(w){g=parseInt(m.charAt(0)+"1",10);m=m.substr(2);g*=parseFloat(m);x=m.substr((g+"").length-(g<0?1:0))||""}else{g=parseFloat(m);x=m.substr((g+"").length)}if(x===""){x=s[i]||_}if(x!==_){T=te(e,"borderLeft",v,_);M=te(e,"borderTop",v,_);if(x==="%"){p=T/y*100+"%";d=M/b*100+"%"}else if(x==="em"){S=te(e,"borderLeft",1,"em");p=T/S+"em";d=M/S+"em"}else{p=T+"px";d=M+"px"}if(w){m=parseFloat(p)+g+x;f=parseFloat(d)+g+x}}r=Me(u,l[h],p+" "+d,m+" "+f,false,"0px",r)}return r},prefix:true,formatter:ge("0px 0px 0px 0px",false,true)});Ae("borderBottomLeftRadius,borderBottomRightRadius,borderTopLeftRadius,borderTopRightRadius",{defaultValue:"0px",parser:function(e,t,i,n,r,a){return Me(e.style,i,this.format(ee(e,i,o,false,"0px 0px")),this.format(t),false,"0px",r)},prefix:true,formatter:ge("0px 0px",false,true)});Ae("backgroundPosition",{defaultValue:"0 0",parser:function(e,t,i,n,r,a){var s="background-position",l=o||$(e,null),u=this.format((l?V?l.getPropertyValue(s+"-x")+" "+l.getPropertyValue(s+"-y"):l.getPropertyValue(s):e.currentStyle.backgroundPositionX+" "+e.currentStyle.backgroundPositionY)||"0 0"),c=this.format(t),h,f,d,p,m,v;if(u.indexOf("%")!==-1!==(c.indexOf("%")!==-1)&&c.split(",").length<2){v=ee(e,"backgroundImage").replace(w,"");if(v&&v!=="none"){h=u.split(" ");f=c.split(" ");U.setAttribute("src",v);d=2;while(--d>-1){u=h[d];p=u.indexOf("%")!==-1;if(p!==(f[d].indexOf("%")!==-1)){m=d===0?e.offsetWidth-U.width:e.offsetHeight-U.height;h[d]=p?parseFloat(u)/100*m+"px":parseFloat(u)/m*100+"%"}}u=h.join(" ")}}return this.parseComplex(e.style,u,c,r,a)},formatter:le});Ae("backgroundSize",{defaultValue:"0 0",formatter:function(e){e+="";return le(e.indexOf(" ")===-1?e+" "+e:e)}});Ae("perspective",{defaultValue:"0px",prefix:true});Ae("perspectiveOrigin",{defaultValue:"50% 50%",prefix:true});Ae("transformStyle",{prefix:true});Ae("backfaceVisibility",{prefix:true});Ae("userSelect",{prefix:true});Ae("margin",{parser:ye("marginTop,marginRight,marginBottom,marginLeft")});Ae("padding",{parser:ye("paddingTop,paddingRight,paddingBottom,paddingLeft")});Ae("clip",{defaultValue:"rect(0px,0px,0px,0px)",parser:function(e,t,i,n,r,a){var s,l,u;if(V<9){l=e.currentStyle;u=V<8?" ":",";s="rect("+l.clipTop+u+l.clipRight+u+l.clipBottom+u+l.clipLeft+")";t=this.format(t).split(",").join(u)}else{s=this.format(ee(e,this.p,o,false,this.dflt));t=this.format(t)}return this.parseComplex(e.style,s,t,r,a)}});Ae("textShadow",{defaultValue:"0px 0px 0px #999",color:true,multi:true});Ae("autoRound,strictUnits",{parser:function(e,t,i,n,r){return r}});Ae("border",{defaultValue:"0px solid #000",parser:function(e,t,i,n,r,a){var s=ee(e,"borderTopWidth",o,false,"0px"),l=this.format(t).split(" "),u=l[0].replace(m,"");if(u!=="px"){s=parseFloat(s)/te(e,"borderTopWidth",1,u)+u}return this.parseComplex(e.style,this.format(s+" "+ee(e,"borderTopStyle",o,false,"solid")+" "+ee(e,"borderTopColor",o,false,"#000")),l.join(" "),r,a)},color:true,formatter:function(e){var t=e.split(" ");return t[0]+" "+(t[1]||"solid")+" "+(e.match(ve)||["#000"])[0]}});Ae("borderWidth",{parser:ye("borderTopWidth,borderRightWidth,borderBottomWidth,borderLeftWidth")});Ae("float,cssFloat,styleFloat",{parser:function(e,t,i,n,r,a){var s=e.style,o="cssFloat"in s?"cssFloat":"styleFloat";return new we(s,o,0,0,r,-1,i,false,0,s[o],t)}});var Ze=function(e){var t=this.t,i=t.filter||ee(this.data,"filter")||"",n=this.s+this.c*e|0,r;if(n===100){if(i.indexOf("atrix(")===-1&&i.indexOf("radient(")===-1&&i.indexOf("oader(")===-1){t.removeAttribute("filter");r=!ee(this.data,"filter")}else{t.filter=i.replace(y,"");r=true}}if(!r){if(this.xn1){t.filter=i=i||"alpha(opacity="+n+")"}if(i.indexOf("pacity")===-1){if(n!==0||!this.xn1){t.filter=i+" alpha(opacity="+n+")"}}else{t.filter=i.replace(v,"opacity="+n)}}};Ae("opacity,alpha,autoAlpha",{defaultValue:"1",parser:function(e,t,i,n,r,a){var s=parseFloat(ee(e,"opacity",o,false,"1")),l=e.style,u=i==="autoAlpha";if(typeof t==="string"&&t.charAt(1)==="="){t=(t.charAt(0)==="-"?-1:1)*parseFloat(t.substr(2))+s}if(u&&s===1&&ee(e,"visibility",o)==="hidden"&&t!==0){s=0}if(W){r=new we(l,"opacity",s,t-s,r)}else{r=new we(l,"opacity",s*100,(t-s)*100,r);r.xn1=u?1:0;l.zoom=1;r.type=2;r.b="alpha(opacity="+r.s+")";r.e="alpha(opacity="+(r.s+r.c)+")";r.data=e;r.plugin=a;r.setRatio=Ze}if(u){r=new we(l,"visibility",0,0,r,-1,null,false,0,s!==0?"inherit":"hidden",t===0?"hidden":"inherit");r.xs0="inherit";n._overwriteProps.push(r.n);n._overwriteProps.push(i)}return r}});var Je=function(e,t){if(t){if(e.removeProperty){if(t.substr(0,2)==="ms"||t.substr(0,6)==="webkit"){t="-"+t}e.removeProperty(t.replace(x,"-$1").toLowerCase())}else{e.removeAttribute(t)}}},Ke=function(e){this.t._gsClassPT=this;if(e===1||e===0){this.t.setAttribute("class",e===0?this.b:this.e);var t=this.data,i=this.t.style;while(t){if(!t.v){Je(i,t.p)}else{i[t.p]=t.v}t=t._next}if(e===1&&this.t._gsClassPT===this){this.t._gsClassPT=null}}else if(this.t.getAttribute("class")!==this.e){this.t.setAttribute("class",this.e)}};Ae("className",{parser:function(e,t,i,n,r,s,l){var u=e.getAttribute("class")||"",c=e.style.cssText,h,f,d,p,m;r=n._classNamePT=new we(e,i,0,0,r,2);r.setRatio=Ke;r.pr=-11;a=true;r.b=u;f=ne(e,o);d=e._gsClassPT;if(d){p={};m=d.data;while(m){p[m.p]=1;m=m._next}d.setRatio(1)}e._gsClassPT=r;r.e=t.charAt(1)!=="="?t:u.replace(new RegExp("(?:\\s|^)"+t.substr(2)+"(?![\\w-])"),"")+(t.charAt(0)==="+"?" "+t.substr(2):"");e.setAttribute("class",r.e);h=re(e,f,ne(e),l,p);e.setAttribute("class",u);r.data=h.firstMPT;e.style.cssText=c;r=r.xfirst=n.parse(e,h.difs,r,s);return r}});var Qe=function(e){if(e===1||e===0)if(this.data._totalTime===this.data._totalDuration&&this.data.data!=="isFromStart"){var t=this.t.style,i=u.transform.parse,n,r,a,s,o;if(this.e==="all"){t.cssText="";s=true}else{n=this.e.split(" ").join("").split(",");a=n.length;while(--a>-1){r=n[a];if(u[r]){if(u[r].parse===i){s=true}else{r=r==="transformOrigin"?Oe:u[r].p}}Je(t,r)}}if(s){Je(t,Re);o=this.t._gsTransform;if(o){if(o.svg){this.t.removeAttribute("data-svg-origin");this.t.removeAttribute("transform")}delete this.t._gsTransform}}}};Ae("clearProps",{parser:function(e,t,i,n,r){r=new we(e,i,0,0,r,2);r.setRatio=Qe;r.e=t;r.pr=-10;r.data=n._tween;a=true;return r}});c="bezier,throwProps,physicsProps,physics2D".split(",");Se=c.length;while(Se--){Pe(c[Se])}c=n.prototype;c._firstPT=c._lastParsedTransform=c._transform=null;c._onInitTween=function(e,t,i,r){if(!e.nodeType){return false}this._target=q=e;this._tween=i;this._vars=t;Z=r;B=t.autoRound;a=false;s=t.suffixMap||n.suffixMap;o=$(e,"");l=this._overwriteProps;var c=e.style,h,f,d,p,m,v,y,b,x;if(z)if(c.zIndex===""){h=ee(e,"zIndex",o);if(h==="auto"||h===""){this._addLazySet(c,"zIndex",0)}}if(typeof t==="string"){p=c.cssText;h=ne(e,o);c.cssText=p+";"+t;h=re(e,h,ne(e)).difs;if(!W&&g.test(t)){h.opacity=parseFloat(RegExp.$1)}t=h;c.cssText=p}if(t.className){this._firstPT=f=u.className.parse(e,t.className,"className",this,null,null,t)}else{this._firstPT=f=this.parse(e,t,null)}if(this._transformType){x=this._transformType===3;if(!Re){c.zoom=1}else if(j){z=true;if(c.zIndex===""){y=ee(e,"zIndex",o);if(y==="auto"||y===""){this._addLazySet(c,"zIndex",0)}}if(H){this._addLazySet(c,"WebkitBackfaceVisibility",this._vars.WebkitBackfaceVisibility||(x?"visible":"hidden"))}}d=f;while(d&&d._next){d=d._next}b=new we(e,"transform",0,0,null,2);this._linkCSSP(b,null,d);b.setRatio=Re?qe:Ye;b.data=this._transform||Xe(e,o,true);b.tween=i;b.pr=-1;l.pop()}if(a){while(f){v=f._next;d=p;while(d&&d.pr>f.pr){d=d._next}if(f._prev=d?d._prev:m){f._prev._next=f}else{p=f}if(f._next=d){d._prev=f}else{m=f}f=v}this._firstPT=p}return true};c.parse=function(e,t,i,n){var r=e.style,a,l,c,h,f,d,p,v,g,y;for(a in t){d=t[a];if(typeof d==="function"){d=d(Z,q)}l=u[a];if(l){i=l.parse(e,d,a,this,i,n,t)}else if(a.substr(0,2)==="--"){this._tween._propLookup[a]=this._addTween.call(this._tween,e.style,"setProperty",$(e).getPropertyValue(a)+"",d+"",a,false,a);continue}else{f=ee(e,a,o)+"";g=typeof d==="string";if(a==="color"||a==="fill"||a==="stroke"||a.indexOf("Color")!==-1||g&&b.test(d)){if(!g){d=pe(d);d=(d.length>3?"rgba(":"rgb(")+d.join(",")+")"}i=Me(r,a,f,d,true,"transparent",i,0,n)}else if(g&&P.test(d)){i=Me(r,a,f,d,true,null,i,0,n)}else{c=parseFloat(f);p=c||c===0?f.substr((c+"").length):"";if(f===""||f==="auto"){if(a==="width"||a==="height"){c=oe(e,a,o);p="px"}else if(a==="left"||a==="top"){c=ie(e,a,o);p="px"}else{c=a!=="opacity"?0:1;p=""}}y=g&&d.charAt(1)==="=";if(y){h=parseInt(d.charAt(0)+"1",10);d=d.substr(2);h*=parseFloat(d);v=d.replace(m,"")}else{h=parseFloat(d);v=g?d.replace(m,""):""}if(v===""){v=a in s?s[a]:p}d=h||h===0?(y?h+c:h)+v:t[a];if(p!==v)if(v!==""||a==="lineHeight")if(h||h===0)if(c){c=te(e,a,c,p);if(v==="%"){c/=te(e,a,100,"%")/100;if(t.strictUnits!==true){f=c+"%"}}else if(v==="em"||v==="rem"||v==="vw"||v==="vh"){c/=te(e,a,1,v)}else if(v!=="px"){h=te(e,a,h,v);v="px"}if(y)if(h||h===0){d=h+c+v}}if(y){h+=c}if((c||c===0)&&(h||h===0)){i=new we(r,a,c,h-c,i,0,a,B!==false&&(v==="px"||a==="zIndex"),0,f,d);i.xs0=v}else if(r[a]===undefined||!d&&(d+""==="NaN"||d==null)){Y("invalid "+a+" tween value: "+t[a])}else{i=new we(r,a,h||c||0,0,i,-1,a,false,0,f,d);i.xs0=d==="none"&&(a==="display"||a.indexOf("Style")!==-1)?f:d}}}if(n)if(i&&!i.plugin){i.plugin=n}}return i};c.setRatio=function(e){var t=this._firstPT,i=1e-6,n,r,a;if(e===1&&(this._tween._time===this._tween._duration||this._tween._time===0)){while(t){if(t.type!==2){if(t.r&&t.type!==-1){n=Math.round(t.s+t.c);if(!t.type){t.t[t.p]=n+t.xs0}else if(t.type===1){a=t.l;r=t.xs0+n+t.xs1;for(a=1;a<t.l;a++){r+=t["xn"+a]+t["xs"+(a+1)]}t.t[t.p]=r}}else{t.t[t.p]=t.e}}else{t.setRatio(e)}t=t._next}}else if(e||!(this._tween._time===this._tween._duration||this._tween._time===0)||this._tween._rawPrevTime===-1e-6){while(t){n=t.c*e+t.s;if(t.r){n=Math.round(n)}else if(n<i)if(n>-i){n=0}if(!t.type){t.t[t.p]=n+t.xs0}else if(t.type===1){a=t.l;if(a===2){t.t[t.p]=t.xs0+n+t.xs1+t.xn1+t.xs2}else if(a===3){t.t[t.p]=t.xs0+n+t.xs1+t.xn1+t.xs2+t.xn2+t.xs3}else if(a===4){t.t[t.p]=t.xs0+n+t.xs1+t.xn1+t.xs2+t.xn2+t.xs3+t.xn3+t.xs4}else if(a===5){t.t[t.p]=t.xs0+n+t.xs1+t.xn1+t.xs2+t.xn2+t.xs3+t.xn3+t.xs4+t.xn4+t.xs5}else{r=t.xs0+n+t.xs1;for(a=1;a<t.l;a++){r+=t["xn"+a]+t["xs"+(a+1)]}t.t[t.p]=r}}else if(t.type===-1){t.t[t.p]=t.xs0}else if(t.setRatio){t.setRatio(e)}t=t._next}}else{while(t){if(t.type!==2){t.t[t.p]=t.b}else{t.setRatio(e)}t=t._next}}};c._enableTransforms=function(e){this._transform=this._transform||Xe(this._target,o,true);this._transformType=!(this._transform.svg&&Ue)&&(e||this._transformType===3)?3:2};var $e=function(e){this.t[this.p]=this.e;this.data._linkCSSP(this,this._next,null,true)};c._addLazySet=function(e,t,i){var n=this._firstPT=new we(e,t,0,0,this._firstPT,2);n.e=i;n.setRatio=$e;n.data=this};c._linkCSSP=function(e,t,i,n){if(e){if(t){t._prev=e}if(e._next){e._next._prev=e._prev}if(e._prev){e._prev._next=e._next}else if(this._firstPT===e){this._firstPT=e._next;n=true}if(i){i._next=e}else if(!n&&this._firstPT===null){this._firstPT=e}e._next=t;e._prev=i}return e};c._mod=function(e){var t=this._firstPT;while(t){if(typeof e[t.p]==="function"&&e[t.p]===Math.round){t.r=1}t=t._next}};c._kill=function(t){var i=t,n,r,a;if(t.autoAlpha||t.alpha){i={};for(r in t){i[r]=t[r]}i.opacity=1;if(i.autoAlpha){i.visibility=1}}if(t.className&&(n=this._classNamePT)){a=n.xfirst;if(a&&a._prev){this._linkCSSP(a._prev,n._next,a._prev._prev)}else if(a===this._firstPT){this._firstPT=n._next}if(n._next){this._linkCSSP(n._next,n._next._next,a._prev)}this._classNamePT=null}n=this._firstPT;while(n){if(n.plugin&&n.plugin!==r&&n.plugin._kill){n.plugin._kill(t);r=n.plugin}n=n._next}return e.prototype._kill.call(this,i)};var et=function(e,t,i){var n,r,a,s;if(e.slice){r=e.length;while(--r>-1){et(e[r],t,i)}return}n=e.childNodes;r=n.length;while(--r>-1){a=n[r];s=a.type;if(a.style){t.push(ne(a));if(i){i.push(a)}}if((s===1||s===9||s===11)&&a.childNodes.length){et(a,t,i)}}};n.cascadeTo=function(e,i,n){var r=t.to(e,i,n),a=[r],s=[],o=[],l=[],u=t._internals.reservedProps,c,h,f,d;e=r._targets||r.target;et(e,s,l);r.render(i,true,true);et(e,o);r.render(0,true,true);r._enabled(true);c=l.length;while(--c>-1){h=re(l[c],s[c],o[c]);if(h.firstMPT){h=h.difs;for(f in n){if(u[f]){h[f]=n[f]}}d={};for(f in h){d[f]=s[c][f]}a.push(t.fromTo(l[c],i,d,h))}}return a};e.activate([n]);return n},true);(function(){var e=i._gsDefine.plugin({propName:"roundProps",version:"1.6.0",priority:-1,API:2,init:function(e,t,i){this._tween=i;return true}}),t=function(e){while(e){if(!e.f&&!e.blob){e.m=Math.round}e=e._next}},n=e.prototype;n._onInitAllProps=function(){var e=this._tween,i=e.vars.roundProps.join?e.vars.roundProps:e.vars.roundProps.split(","),n=i.length,r={},a=e._propLookup.roundProps,s,o,l;while(--n>-1){r[i[n]]=Math.round}n=i.length;while(--n>-1){s=i[n];o=e._firstPT;while(o){l=o._next;if(o.pg){o.t._mod(r)}else if(o.n===s){if(o.f===2&&o.t){t(o.t._firstPT)}else{this._add(o.t,s,o.s,o.c);if(l){l._prev=o._prev}if(o._prev){o._prev._next=l}else if(e._firstPT===o){e._firstPT=l}o._next=o._prev=null;e._propLookup[s]=a}}o=l}}return false};n._add=function(e,t,i,n){this._addTween(e,t,i,i+n,t,Math.round);this._overwriteProps.push(t)}})();(function(){i._gsDefine.plugin({propName:"attr",API:2,version:"0.6.1",init:function(e,t,i,n){var r,a;if(typeof e.setAttribute!=="function"){return false}for(r in t){a=t[r];if(typeof a==="function"){a=a(n,e)}this._addTween(e,"setAttribute",e.getAttribute(r)+"",a+"",r,false,r);this._overwriteProps.push(r)}return true}})})();i._gsDefine.plugin({propName:"directionalRotation",version:"0.3.1",API:2,init:function(e,t,i,n){if(typeof t!=="object"){t={rotation:t}}this.finals={};var r=t.useRadians===true?Math.PI*2:360,a=1e-6,s,o,l,u,c,h;for(s in t){if(s!=="useRadians"){u=t[s];if(typeof u==="function"){u=u(n,e)}h=(u+"").split("_");o=h[0];l=parseFloat(typeof e[s]!=="function"?e[s]:e[s.indexOf("set")||typeof e["get"+s.substr(3)]!=="function"?s:"get"+s.substr(3)]());u=this.finals[s]=typeof o==="string"&&o.charAt(1)==="="?l+parseInt(o.charAt(0)+"1",10)*Number(o.substr(2)):Number(o)||0;c=u-l;if(h.length){o=h.join("_");if(o.indexOf("short")!==-1){c=c%r;if(c!==c%(r/2)){c=c<0?c+r:c-r}}if(o.indexOf("_cw")!==-1&&c<0){c=(c+r*9999999999)%r-(c/r|0)*r}else if(o.indexOf("ccw")!==-1&&c>0){c=(c-r*9999999999)%r-(c/r|0)*r}}if(c>a||c<-a){this._addTween(e,s,l,l+c,s);this._overwriteProps.push(s)}}}return true},set:function(e){var t;if(e!==1){this._super.setRatio.call(this,e)}else{t=this._firstPT;while(t){if(t.f){t.t[t.p](this.finals[t.p])}else{t.t[t.p]=this.finals[t.p]}t=t._next}}}})._autoCSS=true;i._gsDefine("easing.Back",["easing.Ease"],function(e){var t=i.GreenSockGlobals||i,n=t.com.greensock,r=Math.PI*2,a=Math.PI/2,s=n._class,o=function(t,i){var n=s("easing."+t,function(){},true),r=n.prototype=new e;r.constructor=n;r.getRatio=i;return n},l=e.register||function(){},u=function(e,t,i,n,r){var a=s("easing."+e,{easeOut:new t,easeIn:new i,easeInOut:new n},true);l(a,e);return a},c=function(e,t,i){this.t=e;this.v=t;if(i){this.next=i;i.prev=this;this.c=i.v-t;this.gap=i.t-e}},h=function(t,i){var n=s("easing."+t,function(e){this._p1=e||e===0?e:1.70158;this._p2=this._p1*1.525},true),r=n.prototype=new e;r.constructor=n;r.getRatio=i;r.config=function(e){return new n(e)};return n},f=u("Back",h("BackOut",function(e){return(e=e-1)*e*((this._p1+1)*e+this._p1)+1}),h("BackIn",function(e){return e*e*((this._p1+1)*e-this._p1)}),h("BackInOut",function(e){return(e*=2)<1?.5*e*e*((this._p2+1)*e-this._p2):.5*((e-=2)*e*((this._p2+1)*e+this._p2)+2)})),d=s("easing.SlowMo",function(e,t,i){t=t||t===0?t:.7;if(e==null){e=.7}else if(e>1){e=1}this._p=e!==1?t:0;this._p1=(1-e)/2;this._p2=e;this._p3=this._p1+this._p2;this._calcEnd=i===true},true),p=d.prototype=new e,m,v,g;p.constructor=d;p.getRatio=function(e){var t=e+(.5-e)*this._p;if(e<this._p1){return this._calcEnd?1-(e=1-e/this._p1)*e:t-(e=1-e/this._p1)*e*e*e*t}else if(e>this._p3){return this._calcEnd?e===1?0:1-(e=(e-this._p3)/this._p1)*e:t+(e-t)*(e=(e-this._p3)/this._p1)*e*e*e}return this._calcEnd?1:t};d.ease=new d(.7,.7);p.config=d.config=function(e,t,i){return new d(e,t,i)};m=s("easing.SteppedEase",function(e,t){e=e||1;this._p1=1/e;this._p2=e+(t?0:1);this._p3=t?1:0},true);p=m.prototype=new e;p.constructor=m;p.getRatio=function(e){if(e<0){e=0}else if(e>=1){e=.999999999}return((this._p2*e|0)+this._p3)*this._p1};p.config=m.config=function(e,t){return new m(e,t)};v=s("easing.RoughEase",function(t){t=t||{};var i=t.taper||"none",n=[],r=0,a=(t.points||20)|0,s=a,o=t.randomize!==false,l=t.clamp===true,u=t.template instanceof e?t.template:null,h=typeof t.strength==="number"?t.strength*.4:.4,f,d,p,m,v,g;while(--s>-1){f=o?Math.random():1/a*s;d=u?u.getRatio(f):f;if(i==="none"){p=h}else if(i==="out"){m=1-f;p=m*m*h}else if(i==="in"){p=f*f*h}else if(f<.5){m=f*2;p=m*m*.5*h}else{m=(1-f)*2;p=m*m*.5*h}if(o){d+=Math.random()*p-p*.5}else if(s%2){d+=p*.5}else{d-=p*.5}if(l){if(d>1){d=1}else if(d<0){d=0}}n[r++]={x:f,y:d}}n.sort(function(e,t){return e.x-t.x});g=new c(1,1,null);s=a;while(--s>-1){v=n[s];g=new c(v.x,v.y,g)}this._prev=new c(0,0,g.t!==0?g:g.next)},true);p=v.prototype=new e;p.constructor=v;p.getRatio=function(e){var t=this._prev;if(e>t.t){while(t.next&&e>=t.t){t=t.next}t=t.prev}else{while(t.prev&&e<=t.t){t=t.prev}}this._prev=t;return t.v+(e-t.t)/t.gap*t.c};p.config=function(e){return new v(e)};v.ease=new v;u("Bounce",o("BounceOut",function(e){if(e<1/2.75){return 7.5625*e*e}else if(e<2/2.75){return 7.5625*(e-=1.5/2.75)*e+.75}else if(e<2.5/2.75){return 7.5625*(e-=2.25/2.75)*e+.9375}return 7.5625*(e-=2.625/2.75)*e+.984375}),o("BounceIn",function(e){if((e=1-e)<1/2.75){return 1-7.5625*e*e}else if(e<2/2.75){return 1-(7.5625*(e-=1.5/2.75)*e+.75)}else if(e<2.5/2.75){return 1-(7.5625*(e-=2.25/2.75)*e+.9375)}return 1-(7.5625*(e-=2.625/2.75)*e+.984375)}),o("BounceInOut",function(e){var t=e<.5;if(t){e=1-e*2}else{e=e*2-1}if(e<1/2.75){e=7.5625*e*e}else if(e<2/2.75){e=7.5625*(e-=1.5/2.75)*e+.75}else if(e<2.5/2.75){e=7.5625*(e-=2.25/2.75)*e+.9375}else{e=7.5625*(e-=2.625/2.75)*e+.984375}return t?(1-e)*.5:e*.5+.5}));u("Circ",o("CircOut",function(e){return Math.sqrt(1-(e=e-1)*e)}),o("CircIn",function(e){return-(Math.sqrt(1-e*e)-1)}),o("CircInOut",function(e){return(e*=2)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)}));g=function(t,i,n){var a=s("easing."+t,function(e,t){this._p1=e>=1?e:1;this._p2=(t||n)/(e<1?e:1);this._p3=this._p2/r*(Math.asin(1/this._p1)||0);this._p2=r/this._p2},true),o=a.prototype=new e;o.constructor=a;o.getRatio=i;o.config=function(e,t){return new a(e,t)};return a};u("Elastic",g("ElasticOut",function(e){return this._p1*Math.pow(2,-10*e)*Math.sin((e-this._p3)*this._p2)+1},.3),g("ElasticIn",function(e){return-(this._p1*Math.pow(2,10*(e-=1))*Math.sin((e-this._p3)*this._p2))},.3),g("ElasticInOut",function(e){return(e*=2)<1?-.5*(this._p1*Math.pow(2,10*(e-=1))*Math.sin((e-this._p3)*this._p2)):this._p1*Math.pow(2,-10*(e-=1))*Math.sin((e-this._p3)*this._p2)*.5+1},.45));u("Expo",o("ExpoOut",function(e){return 1-Math.pow(2,-10*e)}),o("ExpoIn",function(e){return Math.pow(2,10*(e-1))-.001}),o("ExpoInOut",function(e){return(e*=2)<1?.5*Math.pow(2,10*(e-1)):.5*(2-Math.pow(2,-10*(e-1)))}));u("Sine",o("SineOut",function(e){return Math.sin(e*a)}),o("SineIn",function(e){return-Math.cos(e*a)+1}),o("SineInOut",function(e){return-.5*(Math.cos(Math.PI*e)-1)}));s("easing.EaseLookup",{find:function(t){return e.map[t]}},true);l(t.SlowMo,"SlowMo","ease,");l(v,"RoughEase","ease,");l(m,"SteppedEase","ease,");return f},true)});if(i._gsDefine){i._gsQueue.pop()()}(function(e,i){"use strict";var n={},r=e.document,a=e.GreenSockGlobals=e.GreenSockGlobals||e;if(a.TweenLite){return}var s=function(e){var t=e.split("."),i=a,n;for(n=0;n<t.length;n++){i[t[n]]=i=i[t[n]]||{}}return i},o=s("com.greensock"),l=1e-10,u=function(e){var t=[],i=e.length,n;for(n=0;n!==i;t.push(e[n++])){}return t},c=function(){},h=function(){var e=Object.prototype.toString,t=e.call([]);return function(i){return i!=null&&(i instanceof Array||typeof i==="object"&&!!i.push&&e.call(i)===t)}}(),f,d,p,m,v,g={},y=function(r,o,l,u){this.sc=g[r]?g[r].sc:[];g[r]=this;this.gsClass=null;this.func=l;var c=[];this.check=function(h){var f=o.length,d=f,p,m,v,b;while(--f>-1){if((p=g[o[f]]||new y(o[f],[])).gsClass){c[f]=p.gsClass;d--}else if(h){p.sc.push(this)}}if(d===0&&l){m=("com.greensock."+r).split(".");v=m.pop();b=s(m.join("."))[v]=this.gsClass=l.apply(l,c);if(u){a[v]=n[v]=b;if(typeof t!=="undefined"&&t.exports){if(r===i){t.exports=n[i]=b;for(f in n){b[f]=n[f]}}else if(n[i]){n[i][v]=b}}else if(typeof define==="function"&&define.amd){define((e.GreenSockAMDPath?e.GreenSockAMDPath+"/":"")+r.split(".").pop(),[],function(){return b})}}for(f=0;f<this.sc.length;f++){this.sc[f].check()}}};this.check(true)},b=e._gsDefine=function(e,t,i,n){return new y(e,t,i,n)},x=o._class=function(e,t,i){t=t||function(){};b(e,[],function(){return t},i);return t};b.globals=a;var _=[0,0,1,1],w=x("easing.Ease",function(e,t,i,n){this._func=e;this._type=i||0;this._power=n||0;this._params=t?_.concat(t):_},true),T=w.map={},M=w.register=function(e,t,i,n){var r=t.split(","),a=r.length,s=(i||"easeIn,easeOut,easeInOut").split(","),l,u,c,h;while(--a>-1){u=r[a];l=n?x("easing."+u,null,true):o.easing[u]||{};c=s.length;while(--c>-1){h=s[c];T[u+"."+h]=T[h+u]=l[h]=e.getRatio?e:e[h]||new e}}};p=w.prototype;p._calcEnd=false;p.getRatio=function(e){if(this._func){this._params[0]=e;return this._func.apply(null,this._params)}var t=this._type,i=this._power,n=t===1?1-e:t===2?e:e<.5?e*2:(1-e)*2;if(i===1){n*=n}else if(i===2){n*=n*n}else if(i===3){n*=n*n*n}else if(i===4){n*=n*n*n*n}return t===1?1-n:t===2?n:e<.5?n/2:1-n/2};f=["Linear","Quad","Cubic","Quart","Quint,Strong"];d=f.length;while(--d>-1){p=f[d]+",Power"+d;M(new w(null,null,1,d),p,"easeOut",true);M(new w(null,null,2,d),p,"easeIn"+(d===0?",easeNone":""));M(new w(null,null,3,d),p,"easeInOut")}T.linear=o.easing.Linear.easeIn;T.swing=o.easing.Quad.easeInOut;var S=x("events.EventDispatcher",function(e){this._listeners={};this._eventTarget=e||this});p=S.prototype;p.addEventListener=function(e,t,i,n,r){r=r||0;var a=this._listeners[e],s=0,o,l;if(this===m&&!v){m.wake()}if(a==null){this._listeners[e]=a=[]}l=a.length;while(--l>-1){o=a[l];if(o.c===t&&o.s===i){a.splice(l,1)}else if(s===0&&o.pr<r){s=l+1}}a.splice(s,0,{c:t,s:i,up:n,pr:r})};p.removeEventListener=function(e,t){var i=this._listeners[e],n;if(i){n=i.length;while(--n>-1){if(i[n].c===t){i.splice(n,1);return}}}};p.dispatchEvent=function(e){var t=this._listeners[e],i,n,r;if(t){i=t.length;if(i>1){t=t.slice(0)}n=this._eventTarget;while(--i>-1){r=t[i];if(r){if(r.up){r.c.call(r.s||n,{type:e,target:n})}else{r.c.call(r.s||n)}}}}};var E=e.requestAnimationFrame,A=e.cancelAnimationFrame,P=Date.now||function(){return(new Date).getTime()},L=P();f=["ms","moz","webkit","o"];d=f.length;while(--d>-1&&!E){E=e[f[d]+"RequestAnimationFrame"];A=e[f[d]+"CancelAnimationFrame"]||e[f[d]+"CancelRequestAnimationFrame"]}x("Ticker",function(e,t){var i=this,n=P(),a=t!==false&&E?"auto":false,s=500,o=33,u="tick",h,f,d,p,g,y=function(e){var t=P()-L,r,a;if(t>s){n+=t-o}L+=t;i.time=(L-n)/1e3;r=i.time-g;if(!h||r>0||e===true){i.frame++;g+=r+(r>=p?.004:p-r);a=true}if(e!==true){d=f(y)}if(a){i.dispatchEvent(u)}};S.call(i);i.time=i.frame=0;i.tick=function(){y(true)};i.lagSmoothing=function(e,t){if(!arguments.length){return s<1/l}s=e||1/l;o=Math.min(t,s,0)};i.sleep=function(){if(d==null){return}if(!a||!A){clearTimeout(d)}else{A(d)}f=c;d=null;if(i===m){v=false}};i.wake=function(e){if(d!==null){i.sleep()}else if(e){n+=-L+(L=P())}else if(i.frame>10){L=P()-s+5}f=h===0?c:!a||!E?function(e){return setTimeout(e,(g-i.time)*1e3+1|0)}:E;if(i===m){v=true}y(2)};i.fps=function(e){if(!arguments.length){return h}h=e;p=1/(h||60);g=this.time+p;i.wake()};i.useRAF=function(e){if(!arguments.length){return a}i.sleep();a=e;i.fps(h)};i.fps(e);setTimeout(function(){if(a==="auto"&&i.frame<5&&r.visibilityState!=="hidden"){i.useRAF(false)}},1500)});p=o.Ticker.prototype=new o.events.EventDispatcher;p.constructor=o.Ticker;var R=x("core.Animation",function(e,t){this.vars=t=t||{};this._duration=this._totalDuration=e||0;this._delay=Number(t.delay)||0;this._timeScale=1;this._active=t.immediateRender===true;this.data=t.data;this._reversed=t.reversed===true;if(!J){return}if(!v){m.wake()}var i=this.vars.useFrames?Z:J;i.add(this,i._time);if(this.vars.paused){this.paused(true)}});m=R.ticker=new o.Ticker;p=R.prototype;p._dirty=p._gc=p._initted=p._paused=false;p._totalTime=p._time=0;p._rawPrevTime=-1;p._next=p._last=p._onUpdate=p._timeline=p.timeline=null;p._paused=false;var C=function(){if(v&&P()-L>2e3&&(r.visibilityState!=="hidden"||!m.lagSmoothing())){m.wake()}var e=setTimeout(C,2e3);if(e.unref){e.unref()}};C();p.play=function(e,t){if(e!=null){this.seek(e,t)}return this.reversed(false).paused(false)};p.pause=function(e,t){if(e!=null){this.seek(e,t)}return this.paused(true)};p.resume=function(e,t){if(e!=null){this.seek(e,t)}return this.paused(false)};p.seek=function(e,t){return this.totalTime(Number(e),t!==false)};p.restart=function(e,t){return this.reversed(false).paused(false).totalTime(e?-this._delay:0,t!==false,true)};p.reverse=function(e,t){if(e!=null){this.seek(e||this.totalDuration(),t)}return this.reversed(true).paused(false)};p.render=function(e,t,i){};p.invalidate=function(){this._time=this._totalTime=0;this._initted=this._gc=false;this._rawPrevTime=-1;if(this._gc||!this.timeline){this._enabled(true)}return this};p.isActive=function(){var e=this._timeline,t=this._startTime,i;return!e||!this._gc&&!this._paused&&e.isActive()&&(i=e.rawTime(true))>=t&&i<t+this.totalDuration()/this._timeScale-1e-7};p._enabled=function(e,t){if(!v){m.wake()}this._gc=!e;this._active=this.isActive();if(t!==true){if(e&&!this.timeline){this._timeline.add(this,this._startTime-this._delay)}else if(!e&&this.timeline){this._timeline._remove(this,true)}}return false};p._kill=function(e,t){return this._enabled(false,false)};p.kill=function(e,t){this._kill(e,t);return this};p._uncache=function(e){var t=e?this:this.timeline;while(t){t._dirty=true;t=t.timeline}return this};p._swapSelfInParams=function(e){var t=e.length,i=e.concat();while(--t>-1){if(e[t]==="{self}"){i[t]=this}}return i};p._callback=function(e){var t=this.vars,i=t[e],n=t[e+"Params"],r=t[e+"Scope"]||t.callbackScope||this,a=n?n.length:0;switch(a){case 0:i.call(r);break;case 1:i.call(r,n[0]);break;case 2:i.call(r,n[0],n[1]);break;default:i.apply(r,n)}};p.eventCallback=function(e,t,i,n){if((e||"").substr(0,2)==="on"){var r=this.vars;if(arguments.length===1){return r[e]}if(t==null){delete r[e]}else{r[e]=t;r[e+"Params"]=h(i)&&i.join("").indexOf("{self}")!==-1?this._swapSelfInParams(i):i;r[e+"Scope"]=n}if(e==="onUpdate"){this._onUpdate=t}}return this};p.delay=function(e){if(!arguments.length){return this._delay}if(this._timeline.smoothChildTiming){this.startTime(this._startTime+e-this._delay)}this._delay=e;return this};p.duration=function(e){if(!arguments.length){this._dirty=false;return this._duration}this._duration=this._totalDuration=e;this._uncache(true);if(this._timeline.smoothChildTiming)if(this._time>0)if(this._time<this._duration)if(e!==0){this.totalTime(this._totalTime*(e/this._duration),true)}return this};p.totalDuration=function(e){this._dirty=false;return!arguments.length?this._totalDuration:this.duration(e)};p.time=function(e,t){if(!arguments.length){return this._time}if(this._dirty){this.totalDuration()}return this.totalTime(e>this._duration?this._duration:e,t)};p.totalTime=function(e,t,i){if(!v){m.wake()}if(!arguments.length){return this._totalTime}if(this._timeline){if(e<0&&!i){e+=this.totalDuration()}if(this._timeline.smoothChildTiming){if(this._dirty){this.totalDuration()}var n=this._totalDuration,r=this._timeline;if(e>n&&!i){e=n}this._startTime=(this._paused?this._pauseTime:r._time)-(!this._reversed?e:n-e)/this._timeScale;if(!r._dirty){this._uncache(false)}if(r._timeline){while(r._timeline){if(r._timeline._time!==(r._startTime+r._totalTime)/r._timeScale){r.totalTime(r._totalTime,true)}r=r._timeline}}}if(this._gc){this._enabled(true,false)}if(this._totalTime!==e||this._duration===0){if(U.length){Q()}this.render(e,t,false);if(U.length){Q()}}}return this};p.progress=p.totalProgress=function(e,t){var i=this.duration();return!arguments.length?i?this._time/i:this.ratio:this.totalTime(i*e,t)};p.startTime=function(e){if(!arguments.length){return this._startTime}if(e!==this._startTime){this._startTime=e;if(this.timeline)if(this.timeline._sortChildren){this.timeline.add(this,e-this._delay)}}return this};p.endTime=function(e){return this._startTime+(e!=false?this.totalDuration():this.duration())/this._timeScale};p.timeScale=function(e){if(!arguments.length){return this._timeScale}var t,i;e=e||l;if(this._timeline&&this._timeline.smoothChildTiming){t=this._pauseTime;i=t||t===0?t:this._timeline.totalTime();this._startTime=i-(i-this._startTime)*this._timeScale/e}
this._timeScale=e;i=this.timeline;while(i&&i.timeline){i._dirty=true;i.totalDuration();i=i.timeline}return this};p.reversed=function(e){if(!arguments.length){return this._reversed}if(e!=this._reversed){this._reversed=e;this.totalTime(this._timeline&&!this._timeline.smoothChildTiming?this.totalDuration()-this._totalTime:this._totalTime,true)}return this};p.paused=function(e){if(!arguments.length){return this._paused}var t=this._timeline,i,n;if(e!=this._paused)if(t){if(!v&&!e){m.wake()}i=t.rawTime();n=i-this._pauseTime;if(!e&&t.smoothChildTiming){this._startTime+=n;this._uncache(false)}this._pauseTime=e?i:null;this._paused=e;this._active=this.isActive();if(!e&&n!==0&&this._initted&&this.duration()){i=t.smoothChildTiming?this._totalTime:(i-this._startTime)/this._timeScale;this.render(i,i===this._totalTime,true)}}if(this._gc&&!e){this._enabled(true,false)}return this};var O=x("core.SimpleTimeline",function(e){R.call(this,0,e);this.autoRemoveChildren=this.smoothChildTiming=true});p=O.prototype=new R;p.constructor=O;p.kill()._gc=false;p._first=p._last=p._recent=null;p._sortChildren=false;p.add=p.insert=function(e,t,i,n){var r,a;e._startTime=Number(t||0)+e._delay;if(e._paused)if(this!==e._timeline){e._pauseTime=e._startTime+(this.rawTime()-e._startTime)/e._timeScale}if(e.timeline){e.timeline._remove(e,true)}e.timeline=e._timeline=this;if(e._gc){e._enabled(true,true)}r=this._last;if(this._sortChildren){a=e._startTime;while(r&&r._startTime>a){r=r._prev}}if(r){e._next=r._next;r._next=e}else{e._next=this._first;this._first=e}if(e._next){e._next._prev=e}else{this._last=e}e._prev=r;this._recent=e;if(this._timeline){this._uncache(true)}return this};p._remove=function(e,t){if(e.timeline===this){if(!t){e._enabled(false,true)}if(e._prev){e._prev._next=e._next}else if(this._first===e){this._first=e._next}if(e._next){e._next._prev=e._prev}else if(this._last===e){this._last=e._prev}e._next=e._prev=e.timeline=null;if(e===this._recent){this._recent=this._last}if(this._timeline){this._uncache(true)}}return this};p.render=function(e,t,i){var n=this._first,r;this._totalTime=this._time=this._rawPrevTime=e;while(n){r=n._next;if(n._active||e>=n._startTime&&!n._paused&&!n._gc){if(!n._reversed){n.render((e-n._startTime)*n._timeScale,t,i)}else{n.render((!n._dirty?n._totalDuration:n.totalDuration())-(e-n._startTime)*n._timeScale,t,i)}}n=r}};p.rawTime=function(){if(!v){m.wake()}return this._totalTime};var D=x("TweenLite",function(t,i,n){R.call(this,i,n);this.render=D.prototype.render;if(t==null){throw"Cannot tween a null target."}this.target=t=typeof t!=="string"?t:D.selector(t)||t;var r=t.jquery||t.length&&t!==e&&t[0]&&(t[0]===e||t[0].nodeType&&t[0].style&&!t.nodeType),a=this.vars.overwrite,s,o,c;this._overwrite=a=a==null?q[D.defaultOverwrite]:typeof a==="number"?a>>0:q[a];if((r||t instanceof Array||t.push&&h(t))&&typeof t[0]!=="number"){this._targets=c=u(t);this._propLookup=[];this._siblings=[];for(s=0;s<c.length;s++){o=c[s];if(!o){c.splice(s--,1);continue}else if(typeof o==="string"){o=c[s--]=D.selector(o);if(typeof o==="string"){c.splice(s+1,1)}continue}else if(o.length&&o!==e&&o[0]&&(o[0]===e||o[0].nodeType&&o[0].style&&!o.nodeType)){c.splice(s--,1);this._targets=c=c.concat(u(o));continue}this._siblings[s]=$(o,this,false);if(a===1)if(this._siblings[s].length>1){te(o,this,null,1,this._siblings[s])}}}else{this._propLookup={};this._siblings=$(t,this,false);if(a===1)if(this._siblings.length>1){te(t,this,null,1,this._siblings)}}if(this.vars.immediateRender||i===0&&this._delay===0&&this.vars.immediateRender!==false){this._time=-l;this.render(Math.min(0,-this._delay))}},true),I=function(t){return t&&t.length&&t!==e&&t[0]&&(t[0]===e||t[0].nodeType&&t[0].style&&!t.nodeType)},k=function(e,t){var i={},n;for(n in e){if(!Y[n]&&(!(n in t)||n==="transform"||n==="x"||n==="y"||n==="width"||n==="height"||n==="className"||n==="border")&&(!V[n]||V[n]&&V[n]._autoCSS)){i[n]=e[n];delete e[n]}}e.css=i};p=D.prototype=new R;p.constructor=D;p.kill()._gc=false;p.ratio=0;p._firstPT=p._targets=p._overwrittenProps=p._startAt=null;p._notifyPluginsOfEnabled=p._lazy=false;D.version="1.20.3";D.defaultEase=p._ease=new w(null,null,1,1);D.defaultOverwrite="auto";D.ticker=m;D.autoSleep=120;D.lagSmoothing=function(e,t){m.lagSmoothing(e,t)};D.selector=e.$||e.jQuery||function(t){var i=e.$||e.jQuery;if(i){D.selector=i;return i(t)}return typeof r==="undefined"?t:r.querySelectorAll?r.querySelectorAll(t):r.getElementById(t.charAt(0)==="#"?t.substr(1):t)};var U=[],F={},N=/(?:(-|-=|\+=)?\d*\.?\d*(?:e[\-+]?\d+)?)[0-9]/gi,B=/[\+-]=-?[\.\d]/,z=function(e){var t=this._firstPT,i=1e-6,n;while(t){n=!t.blob?t.c*e+t.s:e===1&&this.end!=null?this.end:e?this.join(""):this.start;if(t.m){n=t.m(n,this._target||t.t)}else if(n<i)if(n>-i&&!t.blob){n=0}if(!t.f){t.t[t.p]=n}else if(t.fp){t.t[t.p](t.fp,n)}else{t.t[t.p](n)}t=t._next}},j=function(e,t,i,n){var r=[],a=0,s="",o=0,l,u,c,h,f,d,p;r.start=e;r.end=t;e=r[0]=e+"";t=r[1]=t+"";if(i){i(r);e=r[0];t=r[1]}r.length=0;l=e.match(N)||[];u=t.match(N)||[];if(n){n._next=null;n.blob=1;r._firstPT=r._applyPT=n}f=u.length;for(h=0;h<f;h++){p=u[h];d=t.substr(a,t.indexOf(p,a)-a);s+=d||!h?d:",";a+=d.length;if(o){o=(o+1)%5}else if(d.substr(-5)==="rgba("){o=1}if(p===l[h]||l.length<=h){s+=p}else{if(s){r.push(s);s=""}c=parseFloat(l[h]);r.push(c);r._firstPT={_next:r._firstPT,t:r,p:r.length-1,s:c,c:(p.charAt(1)==="="?parseInt(p.charAt(0)+"1",10)*parseFloat(p.substr(2)):parseFloat(p)-c)||0,f:0,m:o&&o<4?Math.round:0}}a+=p.length}s+=t.substr(a);if(s){r.push(s)}r.setRatio=z;if(B.test(t)){r.end=null}return r},G=function(e,t,i,n,r,a,s,o,l){if(typeof n==="function"){n=n(l||0,e)}var u=typeof e[t],c=u!=="function"?"":t.indexOf("set")||typeof e["get"+t.substr(3)]!=="function"?t:"get"+t.substr(3),h=i!=="get"?i:!c?e[t]:s?e[c](s):e[c](),f=typeof n==="string"&&n.charAt(1)==="=",d={t:e,p:t,s:h,f:u==="function",pg:0,n:r||t,m:!a?0:typeof a==="function"?a:Math.round,pr:0,c:f?parseInt(n.charAt(0)+"1",10)*parseFloat(n.substr(2)):parseFloat(n)-h||0},p;if(typeof h!=="number"||typeof n!=="number"&&!f){if(s||isNaN(h)||!f&&isNaN(n)||typeof h==="boolean"||typeof n==="boolean"){d.fp=s;p=j(h,f?parseFloat(d.s)+d.c:n,o||D.defaultStringFilter,d);d={t:p,p:"setRatio",s:0,c:1,f:2,pg:0,n:r||t,pr:0,m:0}}else{d.s=parseFloat(h);if(!f){d.c=parseFloat(n)-d.s||0}}}if(d.c){if(d._next=this._firstPT){d._next._prev=d}this._firstPT=d;return d}},H=D._internals={isArray:h,isSelector:I,lazyTweens:U,blobDif:j},V=D._plugins={},W=H.tweenLookup={},X=0,Y=H.reservedProps={ease:1,delay:1,overwrite:1,onComplete:1,onCompleteParams:1,onCompleteScope:1,useFrames:1,runBackwards:1,startAt:1,onUpdate:1,onUpdateParams:1,onUpdateScope:1,onStart:1,onStartParams:1,onStartScope:1,onReverseComplete:1,onReverseCompleteParams:1,onReverseCompleteScope:1,onRepeat:1,onRepeatParams:1,onRepeatScope:1,easeParams:1,yoyo:1,immediateRender:1,repeat:1,repeatDelay:1,data:1,paused:1,reversed:1,autoCSS:1,lazy:1,onOverwrite:1,callbackScope:1,stringFilter:1,id:1,yoyoEase:1},q={none:0,all:1,auto:2,concurrent:3,allOnStart:4,preexisting:5,true:1,false:0},Z=R._rootFramesTimeline=new O,J=R._rootTimeline=new O,K=30,Q=H.lazyRender=function(){var e=U.length,t;F={};while(--e>-1){t=U[e];if(t&&t._lazy!==false){t.render(t._lazy[0],t._lazy[1],true);t._lazy=false}}U.length=0};J._startTime=m.time;Z._startTime=m.frame;J._active=Z._active=true;setTimeout(Q,1);R._updateRoot=D.render=function(){var e,t,i;if(U.length){Q()}J.render((m.time-J._startTime)*J._timeScale,false,false);Z.render((m.frame-Z._startTime)*Z._timeScale,false,false);if(U.length){Q()}if(m.frame>=K){K=m.frame+(parseInt(D.autoSleep,10)||120);for(i in W){t=W[i].tweens;e=t.length;while(--e>-1){if(t[e]._gc){t.splice(e,1)}}if(t.length===0){delete W[i]}}i=J._first;if(!i||i._paused)if(D.autoSleep&&!Z._first&&m._listeners.tick.length===1){while(i&&i._paused){i=i._next}if(!i){m.sleep()}}}};m.addEventListener("tick",R._updateRoot);var $=function(e,t,i){var n=e._gsTweenID,r,a;if(!W[n||(e._gsTweenID=n="t"+X++)]){W[n]={target:e,tweens:[]}}if(t){r=W[n].tweens;r[a=r.length]=t;if(i){while(--a>-1){if(r[a]===t){r.splice(a,1)}}}}return W[n].tweens},ee=function(e,t,i,n){var r=e.vars.onOverwrite,a,s;if(r){a=r(e,t,i,n)}r=D.onOverwrite;if(r){s=r(e,t,i,n)}return a!==false&&s!==false},te=function(e,t,i,n,r){var a,s,o,u;if(n===1||n>=4){u=r.length;for(a=0;a<u;a++){if((o=r[a])!==t){if(!o._gc){if(o._kill(null,e,t)){s=true}}}else if(n===5){break}}return s}var c=t._startTime+l,h=[],f=0,d=t._duration===0,p;a=r.length;while(--a>-1){if((o=r[a])===t||o._gc||o._paused){}else if(o._timeline!==t._timeline){p=p||ie(t,0,d);if(ie(o,p,d)===0){h[f++]=o}}else if(o._startTime<=c)if(o._startTime+o.totalDuration()/o._timeScale>c)if(!((d||!o._initted)&&c-o._startTime<=2e-10)){h[f++]=o}}a=f;while(--a>-1){o=h[a];if(n===2)if(o._kill(i,e,t)){s=true}if(n!==2||!o._firstPT&&o._initted){if(n!==2&&!ee(o,t)){continue}if(o._enabled(false,false)){s=true}}}return s},ie=function(e,t,i){var n=e._timeline,r=n._timeScale,a=e._startTime;while(n._timeline){a+=n._startTime;r*=n._timeScale;if(n._paused){return-100}n=n._timeline}a/=r;return a>t?a-t:i&&a===t||!e._initted&&a-t<2*l?l:(a+=e.totalDuration()/e._timeScale/r)>t+l?0:a-t-l};p._init=function(){var e=this.vars,t=this._overwrittenProps,i=this._duration,n=!!e.immediateRender,r=e.ease,a,s,o,l,u,c;if(e.startAt){if(this._startAt){this._startAt.render(-1,true);this._startAt.kill()}u={};for(l in e.startAt){u[l]=e.startAt[l]}u.data="isStart";u.overwrite=false;u.immediateRender=true;u.lazy=n&&e.lazy!==false;u.startAt=u.delay=null;u.onUpdate=e.onUpdate;u.onUpdateParams=e.onUpdateParams;u.onUpdateScope=e.onUpdateScope||e.callbackScope||this;this._startAt=D.to(this.target,0,u);if(n){if(this._time>0){this._startAt=null}else if(i!==0){return}}}else if(e.runBackwards&&i!==0){if(this._startAt){this._startAt.render(-1,true);this._startAt.kill();this._startAt=null}else{if(this._time!==0){n=false}o={};for(l in e){if(!Y[l]||l==="autoCSS"){o[l]=e[l]}}o.overwrite=0;o.data="isFromStart";o.lazy=n&&e.lazy!==false;o.immediateRender=n;this._startAt=D.to(this.target,0,o);if(!n){this._startAt._init();this._startAt._enabled(false);if(this.vars.immediateRender){this._startAt=null}}else if(this._time===0){return}}}this._ease=r=!r?D.defaultEase:r instanceof w?r:typeof r==="function"?new w(r,e.easeParams):T[r]||D.defaultEase;if(e.easeParams instanceof Array&&r.config){this._ease=r.config.apply(r,e.easeParams)}this._easeType=this._ease._type;this._easePower=this._ease._power;this._firstPT=null;if(this._targets){c=this._targets.length;for(a=0;a<c;a++){if(this._initProps(this._targets[a],this._propLookup[a]={},this._siblings[a],t?t[a]:null,a)){s=true}}}else{s=this._initProps(this.target,this._propLookup,this._siblings,t,0)}if(s){D._onPluginEvent("_onInitAllProps",this)}if(t)if(!this._firstPT)if(typeof this.target!=="function"){this._enabled(false,false)}if(e.runBackwards){o=this._firstPT;while(o){o.s+=o.c;o.c=-o.c;o=o._next}}this._onUpdate=e.onUpdate;this._initted=true};p._initProps=function(t,i,n,r,a){var s,o,l,u,c,f;if(t==null){return false}if(F[t._gsTweenID]){Q()}if(!this.vars.css)if(t.style)if(t!==e&&t.nodeType)if(V.css)if(this.vars.autoCSS!==false){k(this.vars,t)}for(s in this.vars){f=this.vars[s];if(Y[s]){if(f)if(f instanceof Array||f.push&&h(f))if(f.join("").indexOf("{self}")!==-1){this.vars[s]=f=this._swapSelfInParams(f,this)}}else if(V[s]&&(u=new V[s])._onInitTween(t,this.vars[s],this,a)){this._firstPT=c={_next:this._firstPT,t:u,p:"setRatio",s:0,c:1,f:1,n:s,pg:1,pr:u._priority,m:0};o=u._overwriteProps.length;while(--o>-1){i[u._overwriteProps[o]]=this._firstPT}if(u._priority||u._onInitAllProps){l=true}if(u._onDisable||u._onEnable){this._notifyPluginsOfEnabled=true}if(c._next){c._next._prev=c}}else{i[s]=G.call(this,t,s,"get",f,s,0,null,this.vars.stringFilter,a)}}if(r)if(this._kill(r,t)){return this._initProps(t,i,n,r,a)}if(this._overwrite>1)if(this._firstPT)if(n.length>1)if(te(t,this,i,this._overwrite,n)){this._kill(i,t);return this._initProps(t,i,n,r,a)}if(this._firstPT)if(this.vars.lazy!==false&&this._duration||this.vars.lazy&&!this._duration){F[t._gsTweenID]=true}return l};p.render=function(e,t,i){var n=this._time,r=this._duration,a=this._rawPrevTime,s,o,u,c;if(e>=r-1e-7&&e>=0){this._totalTime=this._time=r;this.ratio=this._ease._calcEnd?this._ease.getRatio(1):1;if(!this._reversed){s=true;o="onComplete";i=i||this._timeline.autoRemoveChildren}if(r===0)if(this._initted||!this.vars.lazy||i){if(this._startTime===this._timeline._duration){e=0}if(a<0||e<=0&&e>=-1e-7||a===l&&this.data!=="isPause")if(a!==e){i=true;if(a>l){o="onReverseComplete"}}this._rawPrevTime=c=!t||e||a===e?e:l}}else if(e<1e-7){this._totalTime=this._time=0;this.ratio=this._ease._calcEnd?this._ease.getRatio(0):0;if(n!==0||r===0&&a>0){o="onReverseComplete";s=this._reversed}if(e<0){this._active=false;if(r===0)if(this._initted||!this.vars.lazy||i){if(a>=0&&!(a===l&&this.data==="isPause")){i=true}this._rawPrevTime=c=!t||e||a===e?e:l}}if(!this._initted||this._startAt&&this._startAt.progress()){i=true}}else{this._totalTime=this._time=e;if(this._easeType){var h=e/r,f=this._easeType,d=this._easePower;if(f===1||f===3&&h>=.5){h=1-h}if(f===3){h*=2}if(d===1){h*=h}else if(d===2){h*=h*h}else if(d===3){h*=h*h*h}else if(d===4){h*=h*h*h*h}if(f===1){this.ratio=1-h}else if(f===2){this.ratio=h}else if(e/r<.5){this.ratio=h/2}else{this.ratio=1-h/2}}else{this.ratio=this._ease.getRatio(e/r)}}if(this._time===n&&!i){return}else if(!this._initted){this._init();if(!this._initted||this._gc){return}else if(!i&&this._firstPT&&(this.vars.lazy!==false&&this._duration||this.vars.lazy&&!this._duration)){this._time=this._totalTime=n;this._rawPrevTime=a;U.push(this);this._lazy=[e,t];return}if(this._time&&!s){this.ratio=this._ease.getRatio(this._time/r)}else if(s&&this._ease._calcEnd){this.ratio=this._ease.getRatio(this._time===0?0:1)}}if(this._lazy!==false){this._lazy=false}if(!this._active)if(!this._paused&&this._time!==n&&e>=0){this._active=true}if(n===0){if(this._startAt){if(e>=0){this._startAt.render(e,true,i)}else if(!o){o="_dummyGS"}}if(this.vars.onStart)if(this._time!==0||r===0)if(!t){this._callback("onStart")}}u=this._firstPT;while(u){if(u.f){u.t[u.p](u.c*this.ratio+u.s)}else{u.t[u.p]=u.c*this.ratio+u.s}u=u._next}if(this._onUpdate){if(e<0)if(this._startAt&&e!==-1e-4){this._startAt.render(e,true,i)}if(!t)if(this._time!==n||s||i){this._callback("onUpdate")}}if(o)if(!this._gc||i){if(e<0&&this._startAt&&!this._onUpdate&&e!==-1e-4){this._startAt.render(e,true,i)}if(s){if(this._timeline.autoRemoveChildren){this._enabled(false,false)}this._active=false}if(!t&&this.vars[o]){this._callback(o)}if(r===0&&this._rawPrevTime===l&&c!==l){this._rawPrevTime=0}}};p._kill=function(e,t,i){if(e==="all"){e=null}if(e==null)if(t==null||t===this.target){this._lazy=false;return this._enabled(false,false)}t=typeof t!=="string"?t||this._targets||this.target:D.selector(t)||t;var n=i&&this._time&&i._startTime===this._startTime&&this._timeline===i._timeline,r,a,s,o,l,u,c,f,d;if((h(t)||I(t))&&typeof t[0]!=="number"){r=t.length;while(--r>-1){if(this._kill(e,t[r],i)){u=true}}}else{if(this._targets){r=this._targets.length;while(--r>-1){if(t===this._targets[r]){l=this._propLookup[r]||{};this._overwrittenProps=this._overwrittenProps||[];a=this._overwrittenProps[r]=e?this._overwrittenProps[r]||{}:"all";break}}}else if(t!==this.target){return false}else{l=this._propLookup;a=this._overwrittenProps=e?this._overwrittenProps||{}:"all"}if(l){c=e||l;f=e!==a&&a!=="all"&&e!==l&&(typeof e!=="object"||!e._tempKill);if(i&&(D.onOverwrite||this.vars.onOverwrite)){for(s in c){if(l[s]){if(!d){d=[]}d.push(s)}}if((d||!e)&&!ee(this,i,t,d)){return false}}for(s in c){if(o=l[s]){if(n){if(o.f){o.t[o.p](o.s)}else{o.t[o.p]=o.s}u=true}if(o.pg&&o.t._kill(c)){u=true}if(!o.pg||o.t._overwriteProps.length===0){if(o._prev){o._prev._next=o._next}else if(o===this._firstPT){this._firstPT=o._next}if(o._next){o._next._prev=o._prev}o._next=o._prev=null}delete l[s]}if(f){a[s]=1}}if(!this._firstPT&&this._initted){this._enabled(false,false)}}}return u};p.invalidate=function(){if(this._notifyPluginsOfEnabled){D._onPluginEvent("_onDisable",this)}this._firstPT=this._overwrittenProps=this._startAt=this._onUpdate=null;this._notifyPluginsOfEnabled=this._active=this._lazy=false;this._propLookup=this._targets?{}:[];R.prototype.invalidate.call(this);if(this.vars.immediateRender){this._time=-l;this.render(Math.min(0,-this._delay))}return this};p._enabled=function(e,t){if(!v){m.wake()}if(e&&this._gc){var i=this._targets,n;if(i){n=i.length;while(--n>-1){this._siblings[n]=$(i[n],this,true)}}else{this._siblings=$(this.target,this,true)}}R.prototype._enabled.call(this,e,t);if(this._notifyPluginsOfEnabled)if(this._firstPT){return D._onPluginEvent(e?"_onEnable":"_onDisable",this)}return false};D.to=function(e,t,i){return new D(e,t,i)};D.from=function(e,t,i){i.runBackwards=true;i.immediateRender=i.immediateRender!=false;return new D(e,t,i)};D.fromTo=function(e,t,i,n){n.startAt=i;n.immediateRender=n.immediateRender!=false&&i.immediateRender!=false;return new D(e,t,n)};D.delayedCall=function(e,t,i,n,r){return new D(t,0,{delay:e,onComplete:t,onCompleteParams:i,callbackScope:n,onReverseComplete:t,onReverseCompleteParams:i,immediateRender:false,lazy:false,useFrames:r,overwrite:0})};D.set=function(e,t){return new D(e,0,t)};D.getTweensOf=function(e,t){if(e==null){return[]}e=typeof e!=="string"?e:D.selector(e)||e;var i,n,r,a;if((h(e)||I(e))&&typeof e[0]!=="number"){i=e.length;n=[];while(--i>-1){n=n.concat(D.getTweensOf(e[i],t))}i=n.length;while(--i>-1){a=n[i];r=i;while(--r>-1){if(a===n[r]){n.splice(i,1)}}}}else if(e._gsTweenID){n=$(e).concat();i=n.length;while(--i>-1){if(n[i]._gc||t&&!n[i].isActive()){n.splice(i,1)}}}return n||[]};D.killTweensOf=D.killDelayedCallsTo=function(e,t,i){if(typeof t==="object"){i=t;t=false}var n=D.getTweensOf(e,t),r=n.length;while(--r>-1){n[r]._kill(i,e)}};var ne=x("plugins.TweenPlugin",function(e,t){this._overwriteProps=(e||"").split(",");this._propName=this._overwriteProps[0];this._priority=t||0;this._super=ne.prototype},true);p=ne.prototype;ne.version="1.19.0";ne.API=2;p._firstPT=null;p._addTween=G;p.setRatio=z;p._kill=function(e){var t=this._overwriteProps,i=this._firstPT,n;if(e[this._propName]!=null){this._overwriteProps=[]}else{n=t.length;while(--n>-1){if(e[t[n]]!=null){t.splice(n,1)}}}while(i){if(e[i.n]!=null){if(i._next){i._next._prev=i._prev}if(i._prev){i._prev._next=i._next;i._prev=null}else if(this._firstPT===i){this._firstPT=i._next}}i=i._next}return false};p._mod=p._roundProps=function(e){var t=this._firstPT,i;while(t){i=e[this._propName]||t.n!=null&&e[t.n.split(this._propName+"_").join("")];if(i&&typeof i==="function"){if(t.f===2){t.t._applyPT.m=i}else{t.m=i}}t=t._next}};D._onPluginEvent=function(e,t){var i=t._firstPT,n,r,a,s,o;if(e==="_onInitAllProps"){while(i){o=i._next;r=a;while(r&&r.pr>i.pr){r=r._next}if(i._prev=r?r._prev:s){i._prev._next=i}else{a=i}if(i._next=r){r._prev=i}else{s=i}i=o}i=t._firstPT=a}while(i){if(i.pg)if(typeof i.t[e]==="function")if(i.t[e]()){n=true}i=i._next}return n};ne.activate=function(e){var t=e.length;while(--t>-1){if(e[t].API===ne.API){V[(new e[t])._propName]=e[t]}}return true};b.plugin=function(e){if(!e||!e.propName||!e.init||!e.API){throw"illegal plugin definition."}var t=e.propName,i=e.priority||0,n=e.overwriteProps,r={init:"_onInitTween",set:"setRatio",kill:"_kill",round:"_mod",mod:"_mod",initAll:"_onInitAllProps"},a=x("plugins."+t.charAt(0).toUpperCase()+t.substr(1)+"Plugin",function(){ne.call(this,t,i);this._overwriteProps=n||[]},e.global===true),s=a.prototype=new ne(t),o;s.constructor=a;a.API=e.API;for(o in r){if(typeof e[o]==="function"){s[r[o]]=e[o]}}a.version=e.version;ne.activate([a]);return a};f=e._gsQueue;if(f){for(d=0;d<f.length;d++){f[d]()}for(p in g){if(!g[p].func){e.console.log("GSAP encountered missing dependency: "+p)}}}v=false})(typeof t!=="undefined"&&t.exports&&typeof e!=="undefined"?e:this||window,"TweenMax")}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{}],20:[function(e,t,i){t.exports=function(e){function t(n){if(i[n])return i[n].exports;var r=i[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,t),r.l=!0,r.exports}var i={};return t.m=e,t.c=i,t.i=function(e){return e},t.d=function(e,i,n){t.o(e,i)||Object.defineProperty(e,i,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var i=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(i,"a",i),i},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=50)}([function(e,t,i){"use strict";function n(e){for(var t=document.createElement(e),i=arguments.length,n=Array(i>1?i-1:0),r=1;r<i;r++)n[r-1]=arguments[r];return s.apply(void 0,[t].concat(n)),t}function r(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document.body;t.appendChild(e)}function a(e){var t={left:0,top:0};if(e.offsetParent)do{t.left+=e.offsetLeft,t.top+=e.offsetTop}while(e=e.offsetParent);return t}function s(e){for(var t=arguments.length,i=Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];i.forEach(function(t){return o(e,t)})}function o(e,t){l(e,t)||(e.classList?e.classList.add(t):e.className+=" "+t)}function l(e,t){return e.classList?e.classList.contains(t):new RegExp("(^| )"+t+"( |$)","gi").test(e.className)}function u(e,t){l(e,t)&&(e.classList?e.classList.remove(t):e.className=e.className.replace(new RegExp("(^|\\b)"+t.split(" ").join("|")+"(\\b|$)","gi")," "))}function c(e,t){l(e,t)?u(e,t):o(e,t)}Object.defineProperty(t,"__esModule",{value:!0}),t.createElement=n,t.appendElement=r,t.offset=a,t.addClasses=s,t.addClass=o,t.hasClass=l,t.removeClass=u,t.toggleClass=c},function(e,t){e.exports=function(){var e=[];return e.toString=function(){for(var e=[],t=0;t<this.length;t++){var i=this[t];i[2]?e.push("@media "+i[2]+"{"+i[1]+"}"):e.push(i[1])}return e.join("")},e.i=function(t,i){"string"==typeof t&&(t=[[null,t,""]]);for(var n={},r=0;r<this.length;r++){var a=this[r][0];"number"==typeof a&&(n[a]=!0)}for(r=0;r<t.length;r++){var s=t[r];"number"==typeof s[0]&&n[s[0]]||(i&&!s[2]?s[2]=i:i&&(s[2]="("+s[2]+") and ("+i+")"),e.push(s))}},e}},function(e,t){function i(e,t){for(var i=0;i<e.length;i++){var n=e[i],r=f[n.id];if(r){r.refs++;for(var a=0;a<r.parts.length;a++)r.parts[a](n.parts[a]);for(;a<n.parts.length;a++)r.parts.push(l(n.parts[a],t))}else{for(var s=[],a=0;a<n.parts.length;a++)s.push(l(n.parts[a],t));f[n.id]={id:n.id,refs:1,parts:s}}}}function n(e){for(var t=[],i={},n=0;n<e.length;n++){var r=e[n],a=r[0],s=r[1],o=r[2],l=r[3],u={css:s,media:o,sourceMap:l};i[a]?i[a].parts.push(u):t.push(i[a]={id:a,parts:[u]})}return t}function r(e,t){var i=m(),n=y[y.length-1];if("top"===e.insertAt)n?n.nextSibling?i.insertBefore(t,n.nextSibling):i.appendChild(t):i.insertBefore(t,i.firstChild),y.push(t);else{if("bottom"!==e.insertAt)throw new Error("Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.");i.appendChild(t)}}function a(e){e.parentNode.removeChild(e);var t=y.indexOf(e);t>=0&&y.splice(t,1)}function s(e){var t=document.createElement("style");return t.type="text/css",r(e,t),t}function o(e){var t=document.createElement("link");return t.rel="stylesheet",r(e,t),t}function l(e,t){var i,n,r;if(t.singleton){var l=g++;i=v||(v=s(t)),n=u.bind(null,i,l,!1),r=u.bind(null,i,l,!0)}else e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(i=o(t),n=h.bind(null,i),r=function(){a(i),i.href&&URL.revokeObjectURL(i.href)}):(i=s(t),n=c.bind(null,i),r=function(){a(i)});return n(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;n(e=t)}else r()}}function u(e,t,i,n){var r=i?"":n.css;if(e.styleSheet)e.styleSheet.cssText=b(t,r);else{var a=document.createTextNode(r),s=e.childNodes;s[t]&&e.removeChild(s[t]),s.length?e.insertBefore(a,s[t]):e.appendChild(a)}}function c(e,t){var i=t.css,n=t.media;if(n&&e.setAttribute("media",n),e.styleSheet)e.styleSheet.cssText=i;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(i))}}function h(e,t){var i=t.css,n=t.sourceMap;n&&(i+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(n))))+" */");var r=new Blob([i],{type:"text/css"}),a=e.href;e.href=URL.createObjectURL(r),a&&URL.revokeObjectURL(a)}var f={},d=function(e){var t;return function(){return"undefined"==typeof t&&(t=e.apply(this,arguments)),t}},p=d(function(){return/msie [6-9]\b/.test(window.navigator.userAgent.toLowerCase())}),m=d(function(){return document.head||document.getElementsByTagName("head")[0]}),v=null,g=0,y=[];e.exports=function(e,t){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");t=t||{},"undefined"==typeof t.singleton&&(t.singleton=p()),"undefined"==typeof t.insertAt&&(t.insertAt="bottom");var r=n(e);return i(r,t),function(e){for(var a=[],s=0;s<r.length;s++){var o=r[s],l=f[o.id];l.refs--,a.push(l)}if(e){var u=n(e);i(u,t)}for(var s=0;s<a.length;s++){var l=a[s];if(0===l.refs){for(var c=0;c<l.parts.length;c++)l.parts[c]();delete f[l.id]}}}};var b=function(){var e=[];return function(t,i){return e[t]=i,e.filter(Boolean).join("\n")}}()},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),l=i(5),u=n(l),c=i(8),h=n(c),f=function(e){function t(e,i){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";r(this,t),n.classNames=n.classNames||[],n.classNames.push("guigui-component");var o=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,n,s));return(0,h.default)(o),o.onWatch=o.onWatch.bind(o),o.isWatched=n.watch===!0,o._targetObject=e,o._targetProperty=i,o._value=e[i],o.onEndInteraction(),o}return s(t,e),o(t,[{key:"invalidate",value:function(){this._value=this._targetObject[this._targetProperty]}},{key:"onWatch",value:function(){this._targetObject[this._targetProperty]!==this._value&&this.invalidate()}},{key:"onStartInteraction",value:function(){this.isWatched&&clearInterval(this._watchInterval)}},{key:"onEndInteraction",value:function(){this.isWatched&&(this._watchInterval=setInterval(this.onWatch,100))}}]),t}(u.default);t.default=f},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=(t.isBoolean=function(e){return e===!0||e===!1},t.isFunction=function(e){return"function"==typeof e});t.isNumber=function(e){return"number"==typeof e},t.isArray=function(e){return Array.isArray(e)},t.isObject=function(e){return null!==e&&"object"===("undefined"==typeof e?"undefined":n(e))},t.isThreejsColor=function(e){return e.isColor&&r(e.setHex)&&r(e.getHex)}},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e){if(Array.isArray(e)){for(var t=0,i=Array(e.length);t<e.length;t++)i[t]=e[t];return i}return Array.from(e)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),o=i(18),l=n(o),u=i(0),c=i(19),h=function(){function e(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";a(this,e),this.classNames=t.classNames||[],this.$el=u.createElement.apply(void 0,["div"].concat(r(this.classNames))),this.parent=null,this.$el.innerHTML=i}return s(e,[{key:"render",value:function(){}},{key:"appendTo",value:function(e){(0,l.default)(e)?(this.parent=e,e.appendChild(this.$el)):(0,c.warn)(e+" is not a valid dom element")}},{key:"remove",value:function(){this.parent&&(this.parent.removeChild(this.$el),this.parent=null)}}]),e}();t.default=h},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),l=i(17),u=n(l),c=i(5),h=n(c),f=i(0),d=i(7),p=n(d),m=function(e){function t(e,i){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;r(this,t),i.classNames=i.classNames||["guigui-folder"],n=n||'\n      <div class="guigui-folder-head">\n        <h2 class="guigui-folder-label">'+e+'</h2>\n        <div class="guigui-folder-toggle">\n          <div class="guigui-folder-toggle-line"></div>\n          <div class="guigui-folder-toggle-line"></div>\n        </div>\n      </div>\n      <div class="guigui-folder-content"></div>\n    ';var s=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,i,n));return s.toggle=s.toggle.bind(s),s.folderName=e,s.components=[],s.folders=[],s.$content=s.$el.querySelector("."+i.classNames[0]+"-content"),s.$head=s.$el.querySelector("."+i.classNames[0]+"-head"),s.$head.addEventListener("click",s.toggle),s}return s(t,e),o(t,[{key:"toggle",value:function(){(0,f.toggleClass)(this.$el,this.classNames[0]+"--opened")}},{key:"close",value:function(){(0,f.removeClass)(this.$el,this.classNames[0]+"--opened")}},{key:"open",value:function(){(0,f.addClass)(this.$el,this.classNames[0]+"--opened")}},{key:"addFolder",value:function(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=new t(e,i);return this.folders.push(n),n.appendTo(this.$content),n}},{key:"add",value:function(e,t,i,n){var r=(0,u.default)(e,t,i,n);return this.components.push(r),r.appendTo(this.$content),r}},{key:"addColorPicker",value:function(){return this.addColor.apply(this,arguments)}},{key:"addColor",value:function(e,t,i){var n=new p.default(e,t,i);return this.components.push(n),n.appendTo(this.$content),n}}]),t}(h.default);t.default=m},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){
if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),l=function e(t,i,n){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,i);if(void 0===r){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,i,n)}if("value"in r)return r.value;var s=r.get;if(void 0!==s)return s.call(n)},u=i(3),c=n(u),h=i(0),f=i(4),d=i(40),p=n(d);i(41);var m=function(e){function t(e,i){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};r(this,t);var s=n.label,o=void 0===s?i:s,l='\n      <div class="guigui-colorpicker-label">'+o+'</div>\n      <div class="guigui-colorpicker-state">\n        <input type="text" class="guigui-colorpicker-text" value="#FF0000"/>\n      </div>\n    ',u=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,i,{classNames:["guigui-colorpicker"]},l));u.onColorPickerClick=u.onColorPickerClick.bind(u),u.onColorPickerUpdate=u.onColorPickerUpdate.bind(u),u.onPickerMouseLeave=u.onPickerMouseLeave.bind(u),u.onFinishedInteracting=u.onFinishedInteracting.bind(u),u.onTextChange=u.onTextChange.bind(u);var c=e[i];return u.isThreejsColor=(0,f.isThreejsColor)(c),u.initialColorFormat=(0,f.isNumber)(c)||u.isThreejsColor?"number":"string",u.isOpened=!1,u.$text=u.$el.querySelector(".guigui-colorpicker-text"),u.$state=u.$el.querySelector(".guigui-colorpicker-state"),u.colorPicker=new p.default({el:u.$el,color:u.isThreejsColor?u._targetObject[u._targetProperty].getHex():u._targetObject[u._targetProperty],background:"#30343c"}),u.$picker=u.colorPicker.$el,u.colorPicker.onChange(u.onColorPickerUpdate),u.$text.value=u.colorPicker.color.toHexString(),u.onTextChange(),u.$state.addEventListener("click",u.onColorPickerClick),u.$text.addEventListener("change",u.onTextChange),u}return s(t,e),o(t,[{key:"remove",value:function(){this.$state.removeEventListener("click",this.onColorPickerClick),this.$picker.removeEventListener("mouseleave",this.onPickerMouseLeave),window.removeEventListener("mouseup",this.onFinishedInteracting),l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"remove",this).call(this)}},{key:"getColor",value:function(){return"number"===this.initialColorFormat?this.colorPicker.getHexNumber():this.colorPicker.getHexString()}},{key:"_closePicker",value:function(){this.isOpened=!1,(0,h.removeClass)(this.$el,"guigui-colorpicker--opened"),this.onEndInteraction()}},{key:"invalidate",value:function(){this.colorPicker.setColor(this._value),this.onColorPickerUpdate()}},{key:"onTextChange",value:function(){this.colorPicker.setColor(this.$text.value)}},{key:"onColorPickerClick",value:function(){this.isOpened=!this.isOpened,this.isOpened?(this.onStartInteraction(),(0,h.addClass)(this.$el,"guigui-colorpicker--opened"),this.$picker.addEventListener("mouseleave",this.onPickerMouseLeave)):this._closePicker()}},{key:"onPickerMouseLeave",value:function(){this.$picker.removeEventListener("mouseleave",this.onPickerMouseLeave),this.colorPicker.choosing?window.addEventListener("mouseup",this.onFinishedInteracting):this._closePicker()}},{key:"onFinishedInteracting",value:function(){window.removeEventListener("mouseup",this.onFinishedInteracting),this._closePicker()}},{key:"onColorPickerUpdate",value:function(){var e=this.colorPicker.getHexString(),t=this.getColor();this._value=t,this.$state.style.background=e,this.$text.value=e,this.$text.style.color=this.colorPicker.isDark()?"white":"black",this.isThreejsColor?this._targetObject[this._targetProperty].setHex(t):this._targetObject[this._targetProperty]=t,this.emit("update",t)}}]),t}(c.default);t.default=m},function(e,t,i){function n(e){if(e)return r(e)}function r(e){for(var t in n.prototype)e[t]=n.prototype[t];return e}e.exports=n,n.prototype.on=n.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this},n.prototype.once=function(e,t){function i(){this.off(e,i),t.apply(this,arguments)}return i.fn=t,this.on(e,i),this},n.prototype.off=n.prototype.removeListener=n.prototype.removeAllListeners=n.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var i=this._callbacks["$"+e];if(!i)return this;if(1==arguments.length)return delete this._callbacks["$"+e],this;for(var n,r=0;r<i.length;r++)if(n=i[r],n===t||n.fn===t){i.splice(r,1);break}return this},n.prototype.emit=function(e){this._callbacks=this._callbacks||{};var t=[].slice.call(arguments,1),i=this._callbacks["$"+e];if(i){i=i.slice(0);for(var n=0,r=i.length;n<r;++n)i[n].apply(this,t)}return this},n.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]},n.prototype.hasListeners=function(e){return!!this.listeners(e).length}},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),l=i(5),u=n(l),c=i(0),h=function(e){function t(e,i){r(this,t);var n='\n      <div class="guigui-toggle-line"></div>\n      <div class="guigui-toggle-line"></div>\n    ',s=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,{classNames:["guigui-toggle"]},n));return s.toggle=s.toggle.bind(s),s.$container=e,s.containerClass=i,s.$el.addEventListener("click",s.toggle),s}return s(t,e),o(t,[{key:"toggle",value:function(){(0,c.toggleClass)(this.$el,this.classNames[0]+"--opened"),(0,c.toggleClass)(this.$container,this.containerClass+"--opened")}}]),t}(u.default);t.default=h},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=i(6),l=n(o),u=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";r(this,t);var i='\n      <div class="guigui-panel-head">\n        <h2 class="guigui-panel-label">'+e+'</h2>\n      </div>\n      <div class="guigui-panel-content"></div>\n    ';return a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,{classNames:["guigui-panel","guigui-panel--opened"]},i))}return s(t,e),t}(l.default);t.default=u},function(e,t,i){var n=i(29);"string"==typeof n&&(n=[[e.i,n,""]]);i(2)(n,{});n.locals&&(e.exports=n.locals)},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),l=function e(t,i,n){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,i);if(void 0===r){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,i,n)}if("value"in r)return r.value;var s=r.get;if(void 0!==s)return s.call(n)},u=i(3),c=n(u),h=i(0);i(42);var f=function(e){function t(e,i){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};r(this,t);var s=n.label,o=void 0===s?i:s,l=n.scope,u=void 0===l?e:l,c='\n      <div class="guigui-launcher-label">'+o+"<span>()</span></div>\n    ",h=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,i,{classNames:["guigui-launcher"]},c));return h.onButtonClick=h.onButtonClick.bind(h),h.onMouseDown=h.onMouseDown.bind(h),h.onMouseUp=h.onMouseUp.bind(h),h.labelText=o,h.callbackScope=u,h.$el.addEventListener("click",h.onButtonClick),h.$el.addEventListener("mousedown",h.onMouseDown),h}return s(t,e),o(t,[{key:"remove",value:function(){this.$el.removeEventListener("click",this.onButtonClick),this.$el.removeEventListener("mousedown",this.onMouseDown),window.removeEventListener("mouseup",this.onMouseUp),l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"remove",this).call(this)}},{key:"onButtonClick",value:function(e){this._targetObject[this._targetProperty].call(this.callbackScope)}},{key:"onMouseDown",value:function(e){(0,h.addClass)(this.$el,"guigui-launcher--pressed"),window.addEventListener("mouseup",this.onMouseUp)}},{key:"onMouseUp",value:function(e){window.removeEventListener("mouseup",this.onMouseUp),(0,h.removeClass)(this.$el,"guigui-launcher--pressed")}}]),t}(c.default);t.default=f},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),l=function e(t,i,n){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,i);if(void 0===r){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,i,n)}if("value"in r)return r.value;var s=r.get;if(void 0!==s)return s.call(n)},u=i(3),c=n(u),h=(i(0),i(4));i(43);var f=function(e){function t(e,i,n){var s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};r(this,t);var o=s.label,l=void 0===o?i:o,u=e[i];n=n.map(function(e){return(0,h.isObject)(e)&&e.name&&e.value?e:{name:e,value:e}});var c=n.map(function(e){var t=e.value,i=e.name,n=t===u?"selected":"";return"<option "+n+' value="'+t+'">'+i+"</option>"}).join(""),f='\n      <div class="guigui-select-label">'+l+"</div>\n      <select>\n        "+c+"\n      </select>\n    ",d=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,i,{classNames:["guigui-select"]},f));return d.onSelectChange=d.onSelectChange.bind(d),d.$select=d.$el.querySelector("select"),d.value=u,d.$select.addEventListener("change",d.onSelectChange),d}return s(t,e),o(t,[{key:"onSelectChange",value:function(e){this.value=this.$select.value}},{key:"invalidate",value:function(){l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"invalidate",this).call(this),this.value=this._value}},{key:"value",get:function(){return this.$select.value},set:function(e){this.$select.value=e,this._value=e,this._targetObject[this._targetProperty]=e,this.emit("update",this.sliderValue)}}]),t}(c.default);t.default=f},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),l=function e(t,i,n){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,i);if(void 0===r){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,i,n)}if("value"in r)return r.value;var s=r.get;if(void 0!==s)return s.call(n)},u=i(3),c=n(u),h=i(20),f=i(0);i(44);var d=function(e){function t(e,i){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};r(this,t);var s=n.step,o=void 0===s?1:s,l=n.min,u=void 0===l?0:l,c=n.max,f=void 0===c?100:c,d=n.watch,p=void 0!==d&&d,m=n.label,v=void 0===m?i:m,g=n.minText,y=void 0===g?(0,h.format)(u,o.toString()):g,b=n.maxText,x=void 0===b?(0,h.format)(f,o.toString()):b,_='\n      <div class="guigui-slider-label">'+v+'</div>\n      <div class="guigui-slider-container">\n        <div class="guigui-slider-background"></div>\n        <div class="guigui-slider-handle"></div>\n          <div class="guigui-slider-indice guigui-slider-indice--min">'+y+'</div>\n          <div class="guigui-slider-indice guigui-slider-indice--max">'+x+'</div>\n        </div>\n        <input type="text" class="guigui-slider-value" value="0"/>\n      </div>\n    ',w=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,i,{watch:p,classNames:["guigui-slider"]},_));return w.onSliderStartDrag=w.onSliderStartDrag.bind(w),w.onSliderStopDrag=w.onSliderStopDrag.bind(w),w.onSliderDrag=w.onSliderDrag.bind(w),w.onTextStartDrag=w.onTextStartDrag.bind(w),w.onTextStopDrag=w.onTextStopDrag.bind(w),w.onTextDrag=w.onTextDrag.bind(w),w.onTextKeyDown=w.onTextKeyDown.bind(w),w.onTextChange=w.onTextChange.bind(w),w.step=o,w.min=u,w.max=f,w.labelText=v||i,w.isWatched=p===!0,w.minText=y,w.maxText=x,w.textValueSlowingFactor=.1,w.sliderValue=0,w.$container=w.$el.querySelector(".guigui-slider-container"),w.$handle=w.$el.querySelector(".guigui-slider-handle"),w.$background=w.$el.querySelector(".guigui-slider-background"),w.$value=w.$el.querySelector(".guigui-slider-value"),w.$container.addEventListener("mousedown",w.onSliderStartDrag),w.$value.addEventListener("mousedown",w.onTextStartDrag),w.$value.addEventListener("keydown",w.onTextKeyDown),w.$value.addEventListener("change",w.onTextChange),w.value=w._targetObject[w._targetProperty],w}return s(t,e),o(t,[{key:"remove",value:function(){this.$container.removeEventListener("mousedown",this.onSliderStartDrag),this.$value.removeEventListener("mousedown",this.onTextStartDrag),this.$value.removeEventListener("keydown",this.onTextKeyDown),this.$value.removeEventListener("change",this.onTextChange),this.onSliderStopDrag(),this.onTextStopDrag(),l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"remove",this).call(this)}},{key:"onSliderStartDrag",value:function(e){this.onStartInteraction(),this.onSliderDrag(e),window.addEventListener("mouseup",this.onSliderStopDrag),window.addEventListener("mousemove",this.onSliderDrag),e.preventDefault()}},{key:"onSliderStopDrag",value:function(e){window.removeEventListener("mouseup",this.onSliderStopDrag),window.removeEventListener("mousemove",this.onSliderDrag),this.onEndInteraction(),e.preventDefault()}},{key:"onSliderDrag",value:function(e){var t=(e.clientX-(0,f.offset)(this.$handle).left)/this.$background.offsetWidth;this.value=this.min+(this.max-this.min)*t,e.preventDefault()}},{key:"onTextStartDrag",value:function(e){this.startY=e.clientY,this.startValue=this.value,window.addEventListener("mouseup",this.onTextStopDrag),window.addEventListener("mousemove",this.onTextDrag),e.preventDefault()}},{key:"onTextStopDrag",value:function(e){window.removeEventListener("mouseup",this.onTextStopDrag),window.removeEventListener("mousemove",this.onTextDrag),e.preventDefault()}},{key:"onTextDrag",value:function(e){var t=this.startY-e.clientY;this.value=this.startValue+t*this.step*this.textValueSlowingFactor,e.preventDefault()}},{key:"onTextKeyDown",value:function(e){if(38===e.keyCode)this.value+=this.step;else{if(40!==e.keyCode)return;this.value-=this.step}e.preventDefault()}},{key:"onTextChange",value:function(){this.$value.value.match(/^[+-]?\d+(\.\d+)?$/g)?this.value=Number(this.$value.value):this.value=this.sliderValue}},{key:"updateTarget",value:function(){return this._targetObject[this._targetProperty]=this.sliderValue,this}},{key:"updateText",value:function(){return isNaN(this.sliderValue)||(this.$value.value=(0,h.format)(this.sliderValue,this.step.toString())),this}},{key:"updateSlider",value:function(){return this.$handle.style.transform="scaleX("+(1-(this.sliderValue-this.min)/(this.max-this.min))+")",this}},{key:"invalidate",value:function(){l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"invalidate",this).call(this),this.value=this._value}},{key:"value",get:function(){return this.sliderValue},set:function(e){this.sliderValue=(0,h.clamp)((0,h.toPrecision)(e,this.step),this.min,this.max),this._value=this.sliderValue,this.updateTarget().updateSlider().updateText(),this.emit("update",this.sliderValue)}}]),t}(c.default);t.default=d},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),l=function e(t,i,n){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,i);if(void 0===r){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,i,n)}if("value"in r)return r.value;var s=r.get;if(void 0!==s)return s.call(n)},u=i(3),c=n(u);i(0),i(4);i(45);var h=function(e){function t(e,i){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};r(this,t);var s=n.label,o=void 0===s?i:s,l=e[i],u='\n      <div class="guigui-text-label">'+o+'</div>\n      <input type="text" class="guigui-text-value" value="'+l+'"/>\n    ',c=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,i,{classNames:["guigui-text"]},u));return c.onInputChange=c.onInputChange.bind(c),c.$input=c.$el.querySelector("input"),c.value=l,c.$input.addEventListener("input",c.onInputChange),c}return s(t,e),o(t,[{key:"onInputChange",value:function(e){this.value=this.$input.value,console.log("onInputChange",this.value)}},{key:"invalidate",value:function(){l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"invalidate",this).call(this),this.value=this._value}},{key:"value",get:function(){return this.$input.value},set:function(e){this.$input.value=e,this._value=e,this._targetObject[this._targetProperty]=e,this.emit("update",this.sliderValue)}}]),t}(c.default);t.default=h},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),l=i(3),u=n(l),c=i(0);i(46);var h=function(e){function t(e,i){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};r(this,t);var s=n.label,o=void 0===s?i:s,l='\n      <div class="guigui-toggler-label">'+o+'</div>\n      <div class="guigui-toggler-state">\n        <div class="guigui-toggler-handle"></div>\n      </div>\n    ',u=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,i,{classNames:["guigui-toggler"]},l));return u.onTogglerClick=u.onTogglerClick.bind(u),u.labelText=o,u.isSelected=!1,u.value=u._targetObject[u._targetProperty]===!0,u.$el.addEventListener("click",u.onTogglerClick),u}return s(t,e),o(t,[{key:"onTogglerClick",value:function(e){this.onStartInteraction(),this.value=!this.value,this.onEndInteraction()}},{key:"value",get:function(){return this.isSelected},set:function(e){e?(this.isSelected=!0,(0,c.addClass)(this.$el,"guigui-toggler--selected")):(this.isSelected=!1,(0,c.removeClass)(this.$el,"guigui-toggler--selected")),this._targetObject[this._targetProperty]=e,this.emit("update",e)}}]),t}(u.default);t.default=h},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t,i,n){var r=e[t];return(0,a.isArray)(i)?new v.default(e,t,i,n):(n=i,(0,a.isBoolean)(r)?new o.default(e,t,n):(0,a.isNumber)(r)?new u.default(e,t,n):(0,a.isFunction)(r)?new h.default(e,t,n):new d.default(e,t,n))}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var a=i(4),s=i(16),o=n(s),l=i(14),u=n(l),c=i(12),h=n(c),f=i(15),d=n(f),p=i(7),m=(n(p),i(13)),v=n(m)},function(e,t,i){"use strict";function n(e){return"object"===("undefined"==typeof Node?"undefined":r(Node))?e instanceof Node:e&&"object"===("undefined"==typeof e?"undefined":r(e))&&"number"==typeof e.nodeType&&"string"==typeof e.nodeName}Object.defineProperty(t,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.default=n},function(e,t,i){"use strict";function n(e){console.warn("[guigui]",e)}Object.defineProperty(t,"__esModule",{value:!0}),t.warn=n},function(e,t,i){"use strict";function n(e,t){var i=Math.pow(10,t);return(Math.round(e*i)/i).toFixed(t)}function r(e,t){var i=String(t).split(".")[1];return n(e,i?i.length:0)}function a(e,t,i){return Math.min(Math.max(e,t),i)}function s(e,t){return Math.round(e/t)*t}Object.defineProperty(t,"__esModule",{value:!0}),t.toFixed=n,t.format=r,t.clamp=a,t.toPrecision=s},function(e,t,i){"use strict";function n(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");return"="===e[t-2]?2:"="===e[t-1]?1:0}function r(e){return 3*e.length/4-n(e)}function a(e){var t,i,r,a,s,o,l=e.length;s=n(e),o=new h(3*l/4-s),r=s>0?l-4:l;var u=0;for(t=0,i=0;t<r;t+=4,i+=3)a=c[e.charCodeAt(t)]<<18|c[e.charCodeAt(t+1)]<<12|c[e.charCodeAt(t+2)]<<6|c[e.charCodeAt(t+3)],o[u++]=a>>16&255,o[u++]=a>>8&255,o[u++]=255&a;return 2===s?(a=c[e.charCodeAt(t)]<<2|c[e.charCodeAt(t+1)]>>4,o[u++]=255&a):1===s&&(a=c[e.charCodeAt(t)]<<10|c[e.charCodeAt(t+1)]<<4|c[e.charCodeAt(t+2)]>>2,o[u++]=a>>8&255,o[u++]=255&a),o}function s(e){return u[e>>18&63]+u[e>>12&63]+u[e>>6&63]+u[63&e]}function o(e,t,i){for(var n,r=[],a=t;a<i;a+=3)n=(e[a]<<16)+(e[a+1]<<8)+e[a+2],r.push(s(n));return r.join("")}function l(e){for(var t,i=e.length,n=i%3,r="",a=[],s=16383,l=0,c=i-n;l<c;l+=s)a.push(o(e,l,l+s>c?c:l+s));return 1===n?(t=e[i-1],r+=u[t>>2],r+=u[t<<4&63],r+="=="):2===n&&(t=(e[i-2]<<8)+e[i-1],r+=u[t>>10],r+=u[t>>4&63],r+=u[t<<2&63],r+="="),a.push(r),a.join("")}t.byteLength=r,t.toByteArray=a,t.fromByteArray=l;for(var u=[],c=[],h="undefined"!=typeof Uint8Array?Uint8Array:Array,f="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",d=0,p=f.length;d<p;++d)u[d]=f[d],c[f.charCodeAt(d)]=d;c["-".charCodeAt(0)]=62,c["_".charCodeAt(0)]=63},function(e,t,i){"use strict";(function(e){function n(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(e){return!1}}function r(){return s.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function a(e,t){if(r()<t)throw new RangeError("Invalid typed array length");return s.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t),e.__proto__=s.prototype):(null===e&&(e=new s(t)),e.length=t),e}function s(e,t,i){if(!(s.TYPED_ARRAY_SUPPORT||this instanceof s))return new s(e,t,i);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return c(this,e)}return o(this,e,t,i)}function o(e,t,i,n){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?d(e,t,i,n):"string"==typeof t?h(e,t,i):p(e,t)}function l(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function u(e,t,i,n){return l(t),t<=0?a(e,t):void 0!==i?"string"==typeof n?a(e,t).fill(i,n):a(e,t).fill(i):a(e,t)}function c(e,t){if(l(t),e=a(e,t<0?0:0|m(t)),!s.TYPED_ARRAY_SUPPORT)for(var i=0;i<t;++i)e[i]=0;return e}function h(e,t,i){if("string"==typeof i&&""!==i||(i="utf8"),!s.isEncoding(i))throw new TypeError('"encoding" must be a valid string encoding');var n=0|g(t,i);e=a(e,n);var r=e.write(t,i);return r!==n&&(e=e.slice(0,r)),e}function f(e,t){var i=t.length<0?0:0|m(t.length);e=a(e,i);for(var n=0;n<i;n+=1)e[n]=255&t[n];return e}function d(e,t,i,n){if(t.byteLength,i<0||t.byteLength<i)throw new RangeError("'offset' is out of bounds");if(t.byteLength<i+(n||0))throw new RangeError("'length' is out of bounds");return t=void 0===i&&void 0===n?new Uint8Array(t):void 0===n?new Uint8Array(t,i):new Uint8Array(t,i,n),s.TYPED_ARRAY_SUPPORT?(e=t,e.__proto__=s.prototype):e=f(e,t),e}function p(e,t){if(s.isBuffer(t)){var i=0|m(t.length);return e=a(e,i),0===e.length?e:(t.copy(e,0,0,i),e)}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||J(t.length)?a(e,0):f(e,t);if("Buffer"===t.type&&$(t.data))return f(e,t.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function m(e){if(e>=r())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+r().toString(16)+" bytes");return 0|e}function v(e){return+e!=e&&(e=0),s.alloc(+e)}function g(e,t){if(s.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var i=e.length;if(0===i)return 0;for(var n=!1;;)switch(t){case"ascii":case"latin1":case"binary":return i;case"utf8":case"utf-8":case void 0:return W(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*i;case"hex":return i>>>1;case"base64":return q(e).length;default:if(n)return W(e).length;t=(""+t).toLowerCase(),n=!0}}function y(e,t,i){var n=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===i||i>this.length)&&(i=this.length),i<=0)return"";if(i>>>=0,t>>>=0,i<=t)return"";for(e||(e="utf8");;)switch(e){case"hex":return D(this,t,i);case"utf8":case"utf-8":return L(this,t,i);case"ascii":return C(this,t,i);case"latin1":case"binary":return O(this,t,i);case"base64":return P(this,t,i);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return I(this,t,i);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}}function b(e,t,i){var n=e[t];e[t]=e[i],e[i]=n}function x(e,t,i,n,r){if(0===e.length)return-1;if("string"==typeof i?(n=i,i=0):i>2147483647?i=2147483647:i<-2147483648&&(i=-2147483648),i=+i,isNaN(i)&&(i=r?0:e.length-1),i<0&&(i=e.length+i),i>=e.length){if(r)return-1;i=e.length-1}else if(i<0){if(!r)return-1;i=0}if("string"==typeof t&&(t=s.from(t,n)),s.isBuffer(t))return 0===t.length?-1:_(e,t,i,n,r);if("number"==typeof t)return t&=255,s.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?r?Uint8Array.prototype.indexOf.call(e,t,i):Uint8Array.prototype.lastIndexOf.call(e,t,i):_(e,[t],i,n,r);throw new TypeError("val must be string, number or Buffer")}function _(e,t,i,n,r){function a(e,t){return 1===s?e[t]:e.readUInt16BE(t*s)}var s=1,o=e.length,l=t.length;if(void 0!==n&&(n=String(n).toLowerCase(),"ucs2"===n||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(e.length<2||t.length<2)return-1;s=2,o/=2,l/=2,i/=2}var u;if(r){var c=-1;for(u=i;u<o;u++)if(a(e,u)===a(t,c===-1?0:u-c)){if(c===-1&&(c=u),u-c+1===l)return c*s}else c!==-1&&(u-=u-c),c=-1}else for(i+l>o&&(i=o-l),u=i;u>=0;u--){for(var h=!0,f=0;f<l;f++)if(a(e,u+f)!==a(t,f)){h=!1;break}if(h)return u}return-1}function w(e,t,i,n){i=Number(i)||0;var r=e.length-i;n?(n=Number(n),n>r&&(n=r)):n=r;var a=t.length;if(a%2!==0)throw new TypeError("Invalid hex string");n>a/2&&(n=a/2);for(var s=0;s<n;++s){var o=parseInt(t.substr(2*s,2),16);if(isNaN(o))return s;e[i+s]=o}return s}function T(e,t,i,n){return Z(W(t,e.length-i),e,i,n)}function M(e,t,i,n){return Z(X(t),e,i,n)}function S(e,t,i,n){return M(e,t,i,n)}function E(e,t,i,n){return Z(q(t),e,i,n)}function A(e,t,i,n){return Z(Y(t,e.length-i),e,i,n)}function P(e,t,i){return 0===t&&i===e.length?K.fromByteArray(e):K.fromByteArray(e.slice(t,i))}function L(e,t,i){i=Math.min(e.length,i);for(var n=[],r=t;r<i;){var a=e[r],s=null,o=a>239?4:a>223?3:a>191?2:1;if(r+o<=i){var l,u,c,h;switch(o){case 1:a<128&&(s=a);break;case 2:l=e[r+1],128===(192&l)&&(h=(31&a)<<6|63&l,h>127&&(s=h));break;case 3:l=e[r+1],u=e[r+2],128===(192&l)&&128===(192&u)&&(h=(15&a)<<12|(63&l)<<6|63&u,h>2047&&(h<55296||h>57343)&&(s=h));break;case 4:l=e[r+1],u=e[r+2],c=e[r+3],128===(192&l)&&128===(192&u)&&128===(192&c)&&(h=(15&a)<<18|(63&l)<<12|(63&u)<<6|63&c,h>65535&&h<1114112&&(s=h))}}null===s?(s=65533,
o=1):s>65535&&(s-=65536,n.push(s>>>10&1023|55296),s=56320|1023&s),n.push(s),r+=o}return R(n)}function R(e){var t=e.length;if(t<=ee)return String.fromCharCode.apply(String,e);for(var i="",n=0;n<t;)i+=String.fromCharCode.apply(String,e.slice(n,n+=ee));return i}function C(e,t,i){var n="";i=Math.min(e.length,i);for(var r=t;r<i;++r)n+=String.fromCharCode(127&e[r]);return n}function O(e,t,i){var n="";i=Math.min(e.length,i);for(var r=t;r<i;++r)n+=String.fromCharCode(e[r]);return n}function D(e,t,i){var n=e.length;(!t||t<0)&&(t=0),(!i||i<0||i>n)&&(i=n);for(var r="",a=t;a<i;++a)r+=V(e[a]);return r}function I(e,t,i){for(var n=e.slice(t,i),r="",a=0;a<n.length;a+=2)r+=String.fromCharCode(n[a]+256*n[a+1]);return r}function k(e,t,i){if(e%1!==0||e<0)throw new RangeError("offset is not uint");if(e+t>i)throw new RangeError("Trying to access beyond buffer length")}function U(e,t,i,n,r,a){if(!s.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>r||t<a)throw new RangeError('"value" argument is out of bounds');if(i+n>e.length)throw new RangeError("Index out of range")}function F(e,t,i,n){t<0&&(t=65535+t+1);for(var r=0,a=Math.min(e.length-i,2);r<a;++r)e[i+r]=(t&255<<8*(n?r:1-r))>>>8*(n?r:1-r)}function N(e,t,i,n){t<0&&(t=4294967295+t+1);for(var r=0,a=Math.min(e.length-i,4);r<a;++r)e[i+r]=t>>>8*(n?r:3-r)&255}function B(e,t,i,n,r,a){if(i+n>e.length)throw new RangeError("Index out of range");if(i<0)throw new RangeError("Index out of range")}function z(e,t,i,n,r){return r||B(e,t,i,4,3.4028234663852886e38,-3.4028234663852886e38),Q.write(e,t,i,n,23,4),i+4}function j(e,t,i,n,r){return r||B(e,t,i,8,1.7976931348623157e308,-1.7976931348623157e308),Q.write(e,t,i,n,52,8),i+8}function G(e){if(e=H(e).replace(te,""),e.length<2)return"";for(;e.length%4!==0;)e+="=";return e}function H(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function V(e){return e<16?"0"+e.toString(16):e.toString(16)}function W(e,t){t=t||1/0;for(var i,n=e.length,r=null,a=[],s=0;s<n;++s){if(i=e.charCodeAt(s),i>55295&&i<57344){if(!r){if(i>56319){(t-=3)>-1&&a.push(239,191,189);continue}if(s+1===n){(t-=3)>-1&&a.push(239,191,189);continue}r=i;continue}if(i<56320){(t-=3)>-1&&a.push(239,191,189),r=i;continue}i=(r-55296<<10|i-56320)+65536}else r&&(t-=3)>-1&&a.push(239,191,189);if(r=null,i<128){if((t-=1)<0)break;a.push(i)}else if(i<2048){if((t-=2)<0)break;a.push(i>>6|192,63&i|128)}else if(i<65536){if((t-=3)<0)break;a.push(i>>12|224,i>>6&63|128,63&i|128)}else{if(!(i<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;a.push(i>>18|240,i>>12&63|128,i>>6&63|128,63&i|128)}}return a}function X(e){for(var t=[],i=0;i<e.length;++i)t.push(255&e.charCodeAt(i));return t}function Y(e,t){for(var i,n,r,a=[],s=0;s<e.length&&!((t-=2)<0);++s)i=e.charCodeAt(s),n=i>>8,r=i%256,a.push(r),a.push(n);return a}function q(e){return K.toByteArray(G(e))}function Z(e,t,i,n){for(var r=0;r<n&&!(r+i>=t.length||r>=e.length);++r)t[r+i]=e[r];return r}function J(e){return e!==e}var K=i(21),Q=i(33),$=i(37);t.Buffer=s,t.SlowBuffer=v,t.INSPECT_MAX_BYTES=50,s.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:n(),t.kMaxLength=r(),s.poolSize=8192,s._augment=function(e){return e.__proto__=s.prototype,e},s.from=function(e,t,i){return o(null,e,t,i)},s.TYPED_ARRAY_SUPPORT&&(s.prototype.__proto__=Uint8Array.prototype,s.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&s[Symbol.species]===s&&Object.defineProperty(s,Symbol.species,{value:null,configurable:!0})),s.alloc=function(e,t,i){return u(null,e,t,i)},s.allocUnsafe=function(e){return c(null,e)},s.allocUnsafeSlow=function(e){return c(null,e)},s.isBuffer=function(e){return!(null==e||!e._isBuffer)},s.compare=function(e,t){if(!s.isBuffer(e)||!s.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var i=e.length,n=t.length,r=0,a=Math.min(i,n);r<a;++r)if(e[r]!==t[r]){i=e[r],n=t[r];break}return i<n?-1:n<i?1:0},s.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},s.concat=function(e,t){if(!$(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return s.alloc(0);var i;if(void 0===t)for(t=0,i=0;i<e.length;++i)t+=e[i].length;var n=s.allocUnsafe(t),r=0;for(i=0;i<e.length;++i){var a=e[i];if(!s.isBuffer(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(n,r),r+=a.length}return n},s.byteLength=g,s.prototype._isBuffer=!0,s.prototype.swap16=function(){var e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)b(this,t,t+1);return this},s.prototype.swap32=function(){var e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)b(this,t,t+3),b(this,t+1,t+2);return this},s.prototype.swap64=function(){var e=this.length;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)b(this,t,t+7),b(this,t+1,t+6),b(this,t+2,t+5),b(this,t+3,t+4);return this},s.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?L(this,0,e):y.apply(this,arguments)},s.prototype.equals=function(e){if(!s.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===s.compare(this,e)},s.prototype.inspect=function(){var e="",i=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,i).match(/.{2}/g).join(" "),this.length>i&&(e+=" ... ")),"<Buffer "+e+">"},s.prototype.compare=function(e,t,i,n,r){if(!s.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===i&&(i=e?e.length:0),void 0===n&&(n=0),void 0===r&&(r=this.length),t<0||i>e.length||n<0||r>this.length)throw new RangeError("out of range index");if(n>=r&&t>=i)return 0;if(n>=r)return-1;if(t>=i)return 1;if(t>>>=0,i>>>=0,n>>>=0,r>>>=0,this===e)return 0;for(var a=r-n,o=i-t,l=Math.min(a,o),u=this.slice(n,r),c=e.slice(t,i),h=0;h<l;++h)if(u[h]!==c[h]){a=u[h],o=c[h];break}return a<o?-1:o<a?1:0},s.prototype.includes=function(e,t,i){return this.indexOf(e,t,i)!==-1},s.prototype.indexOf=function(e,t,i){return x(this,e,t,i,!0)},s.prototype.lastIndexOf=function(e,t,i){return x(this,e,t,i,!1)},s.prototype.write=function(e,t,i,n){if(void 0===t)n="utf8",i=this.length,t=0;else if(void 0===i&&"string"==typeof t)n=t,i=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(i)?(i|=0,void 0===n&&(n="utf8")):(n=i,i=void 0)}var r=this.length-t;if((void 0===i||i>r)&&(i=r),e.length>0&&(i<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var a=!1;;)switch(n){case"hex":return w(this,e,t,i);case"utf8":case"utf-8":return T(this,e,t,i);case"ascii":return M(this,e,t,i);case"latin1":case"binary":return S(this,e,t,i);case"base64":return E(this,e,t,i);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return A(this,e,t,i);default:if(a)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),a=!0}},s.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var ee=4096;s.prototype.slice=function(e,t){var i=this.length;e=~~e,t=void 0===t?i:~~t,e<0?(e+=i,e<0&&(e=0)):e>i&&(e=i),t<0?(t+=i,t<0&&(t=0)):t>i&&(t=i),t<e&&(t=e);var n;if(s.TYPED_ARRAY_SUPPORT)n=this.subarray(e,t),n.__proto__=s.prototype;else{var r=t-e;n=new s(r,void 0);for(var a=0;a<r;++a)n[a]=this[a+e]}return n},s.prototype.readUIntLE=function(e,t,i){e|=0,t|=0,i||k(e,t,this.length);for(var n=this[e],r=1,a=0;++a<t&&(r*=256);)n+=this[e+a]*r;return n},s.prototype.readUIntBE=function(e,t,i){e|=0,t|=0,i||k(e,t,this.length);for(var n=this[e+--t],r=1;t>0&&(r*=256);)n+=this[e+--t]*r;return n},s.prototype.readUInt8=function(e,t){return t||k(e,1,this.length),this[e]},s.prototype.readUInt16LE=function(e,t){return t||k(e,2,this.length),this[e]|this[e+1]<<8},s.prototype.readUInt16BE=function(e,t){return t||k(e,2,this.length),this[e]<<8|this[e+1]},s.prototype.readUInt32LE=function(e,t){return t||k(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},s.prototype.readUInt32BE=function(e,t){return t||k(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},s.prototype.readIntLE=function(e,t,i){e|=0,t|=0,i||k(e,t,this.length);for(var n=this[e],r=1,a=0;++a<t&&(r*=256);)n+=this[e+a]*r;return r*=128,n>=r&&(n-=Math.pow(2,8*t)),n},s.prototype.readIntBE=function(e,t,i){e|=0,t|=0,i||k(e,t,this.length);for(var n=t,r=1,a=this[e+--n];n>0&&(r*=256);)a+=this[e+--n]*r;return r*=128,a>=r&&(a-=Math.pow(2,8*t)),a},s.prototype.readInt8=function(e,t){return t||k(e,1,this.length),128&this[e]?(255-this[e]+1)*-1:this[e]},s.prototype.readInt16LE=function(e,t){t||k(e,2,this.length);var i=this[e]|this[e+1]<<8;return 32768&i?4294901760|i:i},s.prototype.readInt16BE=function(e,t){t||k(e,2,this.length);var i=this[e+1]|this[e]<<8;return 32768&i?4294901760|i:i},s.prototype.readInt32LE=function(e,t){return t||k(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},s.prototype.readInt32BE=function(e,t){return t||k(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},s.prototype.readFloatLE=function(e,t){return t||k(e,4,this.length),Q.read(this,e,!0,23,4)},s.prototype.readFloatBE=function(e,t){return t||k(e,4,this.length),Q.read(this,e,!1,23,4)},s.prototype.readDoubleLE=function(e,t){return t||k(e,8,this.length),Q.read(this,e,!0,52,8)},s.prototype.readDoubleBE=function(e,t){return t||k(e,8,this.length),Q.read(this,e,!1,52,8)},s.prototype.writeUIntLE=function(e,t,i,n){if(e=+e,t|=0,i|=0,!n){var r=Math.pow(2,8*i)-1;U(this,e,t,i,r,0)}var a=1,s=0;for(this[t]=255&e;++s<i&&(a*=256);)this[t+s]=e/a&255;return t+i},s.prototype.writeUIntBE=function(e,t,i,n){if(e=+e,t|=0,i|=0,!n){var r=Math.pow(2,8*i)-1;U(this,e,t,i,r,0)}var a=i-1,s=1;for(this[t+a]=255&e;--a>=0&&(s*=256);)this[t+a]=e/s&255;return t+i},s.prototype.writeUInt8=function(e,t,i){return e=+e,t|=0,i||U(this,e,t,1,255,0),s.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},s.prototype.writeUInt16LE=function(e,t,i){return e=+e,t|=0,i||U(this,e,t,2,65535,0),s.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):F(this,e,t,!0),t+2},s.prototype.writeUInt16BE=function(e,t,i){return e=+e,t|=0,i||U(this,e,t,2,65535,0),s.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):F(this,e,t,!1),t+2},s.prototype.writeUInt32LE=function(e,t,i){return e=+e,t|=0,i||U(this,e,t,4,4294967295,0),s.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):N(this,e,t,!0),t+4},s.prototype.writeUInt32BE=function(e,t,i){return e=+e,t|=0,i||U(this,e,t,4,4294967295,0),s.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):N(this,e,t,!1),t+4},s.prototype.writeIntLE=function(e,t,i,n){if(e=+e,t|=0,!n){var r=Math.pow(2,8*i-1);U(this,e,t,i,r-1,-r)}var a=0,s=1,o=0;for(this[t]=255&e;++a<i&&(s*=256);)e<0&&0===o&&0!==this[t+a-1]&&(o=1),this[t+a]=(e/s>>0)-o&255;return t+i},s.prototype.writeIntBE=function(e,t,i,n){if(e=+e,t|=0,!n){var r=Math.pow(2,8*i-1);U(this,e,t,i,r-1,-r)}var a=i-1,s=1,o=0;for(this[t+a]=255&e;--a>=0&&(s*=256);)e<0&&0===o&&0!==this[t+a+1]&&(o=1),this[t+a]=(e/s>>0)-o&255;return t+i},s.prototype.writeInt8=function(e,t,i){return e=+e,t|=0,i||U(this,e,t,1,127,-128),s.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},s.prototype.writeInt16LE=function(e,t,i){return e=+e,t|=0,i||U(this,e,t,2,32767,-32768),s.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):F(this,e,t,!0),t+2},s.prototype.writeInt16BE=function(e,t,i){return e=+e,t|=0,i||U(this,e,t,2,32767,-32768),s.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):F(this,e,t,!1),t+2},s.prototype.writeInt32LE=function(e,t,i){return e=+e,t|=0,i||U(this,e,t,4,2147483647,-2147483648),s.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):N(this,e,t,!0),t+4},s.prototype.writeInt32BE=function(e,t,i){return e=+e,t|=0,i||U(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),s.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):N(this,e,t,!1),t+4},s.prototype.writeFloatLE=function(e,t,i){return z(this,e,t,!0,i)},s.prototype.writeFloatBE=function(e,t,i){return z(this,e,t,!1,i)},s.prototype.writeDoubleLE=function(e,t,i){return j(this,e,t,!0,i)},s.prototype.writeDoubleBE=function(e,t,i){return j(this,e,t,!1,i)},s.prototype.copy=function(e,t,i,n){if(i||(i=0),n||0===n||(n=this.length),t>=e.length&&(t=e.length),t||(t=0),n>0&&n<i&&(n=i),n===i)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(i<0||i>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-t<n-i&&(n=e.length-t+i);var r,a=n-i;if(this===e&&i<t&&t<n)for(r=a-1;r>=0;--r)e[r+t]=this[r+i];else if(a<1e3||!s.TYPED_ARRAY_SUPPORT)for(r=0;r<a;++r)e[r+t]=this[r+i];else Uint8Array.prototype.set.call(e,this.subarray(i,i+a),t);return a},s.prototype.fill=function(e,t,i,n){if("string"==typeof e){if("string"==typeof t?(n=t,t=0,i=this.length):"string"==typeof i&&(n=i,i=this.length),1===e.length){var r=e.charCodeAt(0);r<256&&(e=r)}if(void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!s.isEncoding(n))throw new TypeError("Unknown encoding: "+n)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<i)throw new RangeError("Out of range index");if(i<=t)return this;t>>>=0,i=void 0===i?this.length:i>>>0,e||(e=0);var a;if("number"==typeof e)for(a=t;a<i;++a)this[a]=e;else{var o=s.isBuffer(e)?e:W(new s(e,n).toString()),l=o.length;for(a=0;a<i-t;++a)this[a+t]=o[a%l]}return this};var te=/[^+\/0-9A-Za-z-_]/g}).call(t,i(49))},function(e,t,i){t=e.exports=i(1)(),t.push([e.i,".guigui-colorpicker-label{font-size:12px;line-height:18px;font-style:italic;text-align:center;overflow:hidden;text-overflow:ellipsis;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;float:left;width:calc(31.5% - 20px);padding:0 5px;margin-right:10px}.guigui-colorpicker{clear:both}.guigui-colorpicker-state{background:#b89089;width:calc(68.5% - 8px);height:10px;float:left;padding:4px;box-shadow:inset 0 1px 8px rgba(0,0,0,.2),inset 0 -1px 1px hsla(0,0%,100%,.0980392)}.guigui-colorpicker-text{color:#000;background:none;font-size:11px;line-height:12px;font-family:Arial;margin:0;border:0;padding:3px 0;display:inline-block;vertical-align:middle;white-space:normal;box-sizing:content-box;outline:0;position:relative;top:-4px}@-moz-document url-prefix(){.guigui-colorpicker-text{top:-6px}}.guigui-colorpicker .Scp{padding:5px;background:#30343c;width:175px;height:150px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;position:absolute;z-index:999;top:26px;right:4px;display:none;box-shadow:inset 0 1px 1px hsla(0,0%,100%,.0588235);border:1px solid #1d1f24}.guigui-colorpicker .Scp-saturation{background:-webkit-linear-gradient(left,#fff,#ff2600);background:linear-gradient(90deg,#fff 0,#ff2600);position:relative;width:calc(100% - 25px);height:100%;float:left;margin-right:5px}.guigui-colorpicker .Scp-hue{width:20px;height:100%;position:relative;float:left;background:-webkit-linear-gradient(red,#f0f 17%,#00f 34%,#0ff 50%,#0f0 67%,#ff0 84%,red);background:linear-gradient(red,#f0f 17%,#00f 34%,#0ff 50%,#0f0 67%,#ff0 84%,red)}.guigui-colorpicker .Scp-brightness{width:100%;height:100%;background:-webkit-linear-gradient(hsla(0,0%,100%,0),#000);background:linear-gradient(hsla(0,0%,100%,0),#000)}.guigui-colorpicker .Scp-sbSelector{-webkit-transform:translateX(38.3152px) translateY(41.7647px);transform:translateX(38.3152px) translateY(41.7647px);background:#b89089;border:2px solid #000;position:absolute;width:14px;height:14px;border-radius:10px;top:-7px;left:-7px;box-sizing:border-box;z-index:10}.guigui-colorpicker .Scp-hSelector{-webkit-transform:translateY(146.277px);transform:translateY(146.277px);position:absolute;background:#fff;border-bottom:1px solid #000;right:-3px;width:10px;height:2px}.guigui-colorpicker--opened .Scp{display:block}",""])},function(e,t,i){t=e.exports=i(1)(),t.push([e.i,".guigui-launcher-label{font-size:12px;line-height:18px;font-style:italic;text-align:center;overflow:hidden;text-overflow:ellipsis}.guigui-launcher,.guigui-launcher-label{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.guigui-launcher{cursor:pointer}.guigui .guigui-launcher--pressed{background:#36383f}.guigui-launcher-label{text-transform:capitalize}.guigui-launcher-label span{position:relative;top:-1px;left:4px;color:#3d77eb}",""])},function(e,t,i){t=e.exports=i(1)(),t.push([e.i,".guigui-select-label{font-size:12px;line-height:18px;font-style:italic;text-align:center;overflow:hidden;text-overflow:ellipsis;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;float:left;width:calc(31.5% - 20px);padding:0 5px;margin-right:10px}.guigui-select select{width:calc(68.5% - 10px);background:#22252b;color:#3d77eb;line-height:12px;box-sizing:content-box}.guigui-select{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.guigui-select select{border:none;-webkit-appearance:none;-moz-appearance:none;appearance:none;padding:3px 5px;border-radius:0;background-image:url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiA/PjwhRE9DVFlQRSBzdmcgIFBVQkxJQyAnLS8vVzNDLy9EVEQgU1ZHIDEuMS8vRU4nICAnaHR0cDovL3d3dy53My5vcmcvR3JhcGhpY3MvU1ZHLzEuMS9EVEQvc3ZnMTEuZHRkJz48c3ZnIGhlaWdodD0iNTEycHgiIGZpbGw9IiMzRDc3RUIiIGlkPSJMYXllcl8xIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA1MTIgNTEyOyIgdmVyc2lvbj0iMS4xIiB2aWV3Qm94PSIwIDAgNTEyIDUxMiIgd2lkdGg9IjUxMnB4IiB4bWw6c3BhY2U9InByZXNlcnZlIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIj48cGF0aCBkPSJNOTguOSwxODQuN2wxLjgsMi4xbDEzNiwxNTYuNWM0LjYsNS4zLDExLjUsOC42LDE5LjIsOC42YzcuNywwLDE0LjYtMy40LDE5LjItOC42TDQxMSwxODcuMWwyLjMtMi42ICBjMS43LTIuNSwyLjctNS41LDIuNy04LjdjMC04LjctNy40LTE1LjgtMTYuNi0xNS44djBIMTEyLjZ2MGMtOS4yLDAtMTYuNiw3LjEtMTYuNiwxNS44Qzk2LDE3OS4xLDk3LjEsMTgyLjIsOTguOSwxODQuN3oiLz48L3N2Zz4=);background-repeat:no-repeat;background-size:14px 14px;background-position:calc(100% - 2px) 50%}.guigui-select select:focus{outline:none}.guigui-select select::-moz-focus-inner{border:0}@-moz-document url-prefix(){.guigui-select select{padding:1px 5px;position:relative;top:-3px}}",""])},function(e,t,i){t=e.exports=i(1)(),t.push([e.i,".guigui-slider-label{font-size:12px;line-height:18px;font-style:italic;text-align:center;overflow:hidden;text-overflow:ellipsis;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;float:left;width:calc(29.5% - 10px);padding:0 5px}.guigui-slider-container{float:left;width:calc(50% - 20px);margin:0 10px;height:100%;position:relative;cursor:ew-resize}.guigui-slider-background,.guigui-slider-handle{position:absolute;width:100%;height:18%;top:5%;pointer-events:none}.guigui-slider-background{background:-webkit-linear-gradient(left,#3d77eb,#00d2da);background:linear-gradient(90deg,#3d77eb 0,#00d2da);pointer-events:none}.guigui-slider-handle{background:#22252b;right:0;-webkit-transform-origin:right center 0;transform-origin:right center 0}.guigui-slider-indice{color:#6b6b6b;font-size:9px;line-height:7px;bottom:0;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;position:absolute;pointer-events:none}.guigui-slider-indice.guigui-slider-indice--min{left:0}.guigui-slider-indice.guigui-slider-indice--max{right:0}.guigui-slider-value{float:left;font-family:Courier New,Arial;background:#22252b;color:#3d77eb;height:100%;line-height:1;width:20.5%;font-size:10px;text-align:center;margin:0;border:0;padding:0;display:inline-block;vertical-align:middle;white-space:normal;box-sizing:content-box;outline:0}",""])},function(e,t,i){t=e.exports=i(1)(),t.push([e.i,".guigui-text-label{font-size:12px;line-height:18px;font-style:italic;text-align:center;overflow:hidden;text-overflow:ellipsis;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;float:left;width:calc(31.5% - 20px);padding:0 5px;margin-right:10px}.guigui-text-value{width:calc(68.5% - 10px);background:#22252b;color:#3d77eb;line-height:12px;box-sizing:content-box}.guigui-text{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.guigui-text-value{float:left;height:10px;font-size:11px;text-align:left;margin:0;border:0;padding:4px 5px;display:inline-block;vertical-align:middle;white-space:normal;outline:0}",""])},function(e,t,i){t=e.exports=i(1)(),t.push([e.i,".guigui-toggler-label{font-size:12px;line-height:18px;font-style:italic;text-align:center;overflow:hidden;text-overflow:ellipsis}.guigui-toggler,.guigui-toggler-label{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.guigui-toggler{cursor:pointer}.guigui-toggler-label{float:left;width:calc(90% - 27px);padding:0 5px}.guigui-toggler-handle,.guigui-toggler-state{border-radius:2px}.guigui-toggler-state{position:relative;background:#1d1f24;height:100%;width:17px;float:left;margin:0 0 0 10px;box-shadow:0 2px 1px hsla(0,0%,100%,.0470588)}.guigui-toggler-handle{position:absolute;background:#3d77eb;width:54%;height:50%;top:25%;left:23%;display:none}.guigui-toggler--selected .guigui-toggler-handle{display:block}",""])},function(e,t,i){t=e.exports=i(1)(),t.push([e.i,".guigui-component,.guigui-folder,.guigui-panel,.guigui-toggle{border:1px solid #111;box-shadow:inset 0 1px 1px hsla(0,0%,100%,.06);background:-webkit-linear-gradient(hsla(0,0%,100%,.0196078),hsla(0,0%,100%,0)) #292c33;background:linear-gradient(hsla(0,0%,100%,.0196078),hsla(0,0%,100%,0)) #292c33}.guigui{position:absolute;z-index:999;top:10px;right:10px;width:calc(100% - 20px);color:#fff}.guigui-container{margin-top:30px;display:none}.guigui-container--opened{display:block}.guigui-component,.guigui-folder,.guigui-panel{box-sizing:border-box;padding:5px;position:relative}.guigui-folder,.guigui-panel{background:-webkit-linear-gradient(hsla(0,0%,100%,.0196078),hsla(0,0%,100%,0)) #22252b;background:linear-gradient(hsla(0,0%,100%,.0196078),hsla(0,0%,100%,0)) #22252b}.guigui-panel{width:300px;float:right;margin:10px 0 0 10px}.guigui-panel>.guigui-panel-content{display:none}.guigui-panel-label{margin:0;text-align:center;width:100%;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.guigui-panel--opened>.guigui-panel-content{display:block}.guigui-folder{margin:5px 0}.guigui-folder>.guigui-folder-content{margin-top:5px;display:none}.guigui-folder-head{padding:1px 0}.guigui-folder-label{margin:0;text-align:center;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.guigui-folder--opened>.guigui-folder-content{display:block}.guigui-component{margin-top:3px;height:17px;box-sizing:content-box}.guigui-component+.guigui-component{margin-top:-1px}.guigui{font-family:Arial,sans-serif;color:#bbbdc0}.guigui-folder-label,.guigui-panel-label{font-weight:400}.guigui-folder-label{font-size:13px}.guigui-panel-label{font-size:14px;line-height:21px}.guigui-toggle{position:absolute;top:0;right:0;width:30px;height:30px}.guigui-toggle-line{-webkit-transition:-webkit-transform .5s cubic-bezier(.19,1,.22,1);transition:-webkit-transform .5s cubic-bezier(.19,1,.22,1);transition:transform .5s cubic-bezier(.19,1,.22,1);transition:transform .5s cubic-bezier(.19,1,.22,1),-webkit-transform .5s cubic-bezier(.19,1,.22,1)}.guigui-toggle--opened .guigui-toggle-line{-webkit-transform:translate3d(-50%,-50%,1px) rotate(45deg);transform:translate3d(-50%,-50%,1px) rotate(45deg)}.guigui-toggle--opened .guigui-toggle-line:first-child{-webkit-transform:translate3d(-50%,-50%,1px) rotate(135deg);transform:translate3d(-50%,-50%,1px) rotate(135deg)}.guigui-folder-head,.guigui-panel-head,.guigui-toggle{cursor:pointer}.guigui-folder-toggle,.guigui-panel-toggle{position:absolute}.guigui-panel-toggle{top:11px;right:11px;width:14px;height:14px}.guigui-folder-toggle{top:7px;right:7px;width:12px;height:12px}.guigui-folder-toggle-line,.guigui-panel-toggle-line,.guigui-toggle-line{position:absolute;top:50%;left:50%;-webkit-transform:translate3d(-50%,-50%,1px);transform:translate3d(-50%,-50%,1px);width:2px;height:100%;background:#3d77eb}.guigui-folder-toggle-line:first-child,.guigui-panel-toggle-line:first-child,.guigui-toggle-line:first-child{-webkit-transform:translate3d(-50%,-50%,1px) rotate(90deg);transform:translate3d(-50%,-50%,1px) rotate(90deg)}.guigui-toggle-line{height:60%}.guigui-folder>.guigui-folder-head .guigui-folder-toggle-line:last-child{display:block}.guigui-folder--opened>.guigui-folder-head .guigui-folder-toggle-line:last-child{display:none}",""])},function(e,t,i){"use strict";function n(e,t){var i,n,r,a=[];o(t);for(i in t)d.call(t,i)&&(n=t[i],d.call(h.transform,i)?(r=h.transform[i],c(n)&&(n=n.join(r.separator)),a.push(i+"("+f(n,r.defaultUnit,r.separator)+")")):d.call(h,i)?(r=h[i],c(n)&&(n=n.join(r.separator)),e.style[u(i)]=f(n,r.defaultUnit,r.separator)):console.warn("dom-transform: this property (`"+i+"`) is not supported."));e.style[p]=a.join(" ")}function r(e,t){var i=e.style;if("string"==typeof t)return d.call(h.transform,t)?i[p]:i[u(t)];t||(t=l());var n={};return t.forEach(function(e){n[e]=i[u(e)]}),n}function a(e,t){var i=e.style;return"string"==typeof t?void(i[u(t)]=null):(t||(t=l()),void t.forEach(function(e){i[u(e)]=null}))}function s(){return p.length>0}function o(e){var t;for(t in e)d.call(m,t)&&(e[m[t]]=e[t],delete e[t])}function l(){return Object.keys(h).map(function(e){return e})}var u=i(39),c=i(34),h=i(32),f=i(31),d=Object.prototype.hasOwnProperty,p=u("transform"),m={x:"translateX",y:"translateY",z:"translateZ",origin:"transformOrigin"};t=e.exports=n,t.get=r,t.reset=a,t.isSupported=s},function(e,t,i){"use strict";var n=i(48),r=/^-?\d+(\.\d+)?$/;e.exports=function(e,t,i){if(i=i||",","number"==typeof e)return""+e+t;var a=new RegExp(i,"g"),s=e.split(a.test(e)?i:" ");return s.map(function(e){return e=n(e),r.test(e)&&(e+=t),e}).join(i)}},function(e,t,i){"use strict";e.exports={transform:{translate:{defaultUnit:"px"},translate3d:{defaultUnit:"px"},translateX:{defaultUnit:"px"},translateY:{defaultUnit:"px"},translateZ:{defaultUnit:"px"},scale:{defaultUnit:""},scale3d:{defaultUnit:""},scaleX:{defaultUnit:""},scaleY:{defaultUnit:""},scaleZ:{defaultUnit:""},rotate:{defaultUnit:"deg"},rotate3d:{defaultUnit:""},rotateX:{defaultUnit:"deg"},rotateY:{defaultUnit:"deg"},rotateZ:{defaultUnit:"deg"},skew:{defaultUnit:"deg"},skewX:{defaultUnit:"deg"},skewY:{defaultUnit:"deg"},perspective:{defaultUnit:"px"},matrix:{defaultUnit:""},matrix3d:{defaultUnit:""}},transformOrigin:{defaultUnit:"px",separator:" "}}},function(e,t){t.read=function(e,t,i,n,r){var a,s,o=8*r-n-1,l=(1<<o)-1,u=l>>1,c=-7,h=i?r-1:0,f=i?-1:1,d=e[t+h];for(h+=f,a=d&(1<<-c)-1,d>>=-c,c+=o;c>0;a=256*a+e[t+h],h+=f,c-=8);for(s=a&(1<<-c)-1,a>>=-c,c+=n;c>0;s=256*s+e[t+h],h+=f,c-=8);if(0===a)a=1-u;else{if(a===l)return s?NaN:(d?-1:1)*(1/0);s+=Math.pow(2,n),a-=u}return(d?-1:1)*s*Math.pow(2,a-n)},t.write=function(e,t,i,n,r,a){var s,o,l,u=8*a-r-1,c=(1<<u)-1,h=c>>1,f=23===r?Math.pow(2,-24)-Math.pow(2,-77):0,d=n?0:a-1,p=n?1:-1,m=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(o=isNaN(t)?1:0,s=c):(s=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-s))<1&&(s--,l*=2),t+=s+h>=1?f/l:f*Math.pow(2,1-h),t*l>=2&&(s++,l/=2),s+h>=c?(o=0,s=c):s+h>=1?(o=(t*l-1)*Math.pow(2,r),s+=h):(o=t*Math.pow(2,h-1)*Math.pow(2,r),s=0));r>=8;e[i+d]=255&o,d+=p,o/=256,r-=8);for(s=s<<r|o,u+=r;u>0;e[i+d]=255&s,d+=p,s/=256,u-=8);e[i+d-p]|=128*m}},function(e,t){var i=Array.isArray,n=Object.prototype.toString;e.exports=i||function(e){return!!e&&"[object Array]"==n.call(e)}},function(e,t){function i(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}function n(e){return"function"==typeof e.readFloatLE&&"function"==typeof e.slice&&i(e.slice(0,0))}e.exports=function(e){return null!=e&&(i(e)||n(e)||!!e._isBuffer)}},function(e,t,i){"use strict";var n=i(38);e.exports=function(e){var t=n(e);if("string"===t){if(!e.trim())return!1}else if("number"!==t)return!1;return e-e+1>=0}},function(e,t){var i={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==i.call(e)}},function(e,t,i){(function(t){var n=i(35),r=Object.prototype.toString;e.exports=function(e){if("undefined"==typeof e)return"undefined";if(null===e)return"null";if(e===!0||e===!1||e instanceof Boolean)return"boolean";if("string"==typeof e||e instanceof String)return"string";if("number"==typeof e||e instanceof Number)return"number";if("function"==typeof e||e instanceof Function)return"function";if("undefined"!=typeof Array.isArray&&Array.isArray(e))return"array";if(e instanceof RegExp)return"regexp";if(e instanceof Date)return"date";var i=r.call(e);return"[object RegExp]"===i?"regexp":"[object Date]"===i?"date":"[object Arguments]"===i?"arguments":"[object Error]"===i?"error":"undefined"!=typeof t&&n(e)?"buffer":"[object Set]"===i?"set":"[object WeakSet]"===i?"weakset":"[object Map]"===i?"map":"[object WeakMap]"===i?"weakmap":"[object Symbol]"===i?"symbol":"[object Int8Array]"===i?"int8array":"[object Uint8Array]"===i?"uint8array":"[object Uint8ClampedArray]"===i?"uint8clampedarray":"[object Int16Array]"===i?"int16array":"[object Uint16Array]"===i?"uint16array":"[object Int32Array]"===i?"int32array":"[object Uint32Array]"===i?"uint32array":"[object Float32Array]"===i?"float32array":"[object Float64Array]"===i?"float64array":"object"}}).call(t,i(22).Buffer)},function(e,t){function i(e){if(e=e.replace(/-([a-z])/g,function(e,t){return t.toUpperCase()}),void 0!==a[e])return e;for(var t=e.charAt(0).toUpperCase()+e.slice(1),i=s.length;i--;){var n=s[i]+t;if(void 0!==a[n])return n}return e}function n(e){return e in l?l[e]:l[e]=i(e)}function r(e){return e=i(e),o.test(e)&&(e="-"+e.replace(o,"-$1"),o.lastIndex=0),e.toLowerCase()}var a="undefined"!=typeof document?document.createElement("p").style:{},s=["O","ms","Moz","Webkit"],o=/([A-Z])/g,l={};e.exports=n,e.exports.dash=r},function(e,t,i){"use strict";!function(){function t(e){return e=e||{},this.color=null,this.width=0,this.widthUnits="px",this.height=0,this.heightUnits="px",this.hue=0,this.position={x:0,y:0},this.huePosition=0,this.saturationWidth=0,this.hueHeight=0,this.maxHue=0,this.inputIsNumber=!1,this._onSaturationMouseDown=this._onSaturationMouseDown.bind(this),this._onSaturationMouseMove=this._onSaturationMouseMove.bind(this),this._onSaturationMouseUp=this._onSaturationMouseUp.bind(this),this._onHueMouseDown=this._onHueMouseDown.bind(this),this._onHueMouseMove=this._onHueMouseMove.bind(this),this._onHueMouseUp=this._onHueMouseUp.bind(this),this.$el=document.createElement("div"),this.$el.className="Scp",this.$el.innerHTML=['<div class="Scp-saturation">','<div class="Scp-brightness"></div>','<div class="Scp-sbSelector"></div>',"</div>",'<div class="Scp-hue">','<div class="Scp-hSelector"></div>',"</div>"].join(""),this.$saturation=this.$el.querySelector(".Scp-saturation"),this.$hue=this.$el.querySelector(".Scp-hue"),this.$sbSelector=this.$el.querySelector(".Scp-sbSelector"),this.$hSelector=this.$el.querySelector(".Scp-hSelector"),this.$saturation.addEventListener("mousedown",this._onSaturationMouseDown),this.$saturation.addEventListener("touchstart",this._onSaturationMouseDown),this.$hue.addEventListener("mousedown",this._onHueMouseDown),this.$hue.addEventListener("touchstart",this._onHueMouseDown),e.el&&this.appendTo(e.el),e.background&&this.setBackgroundColor(e.background),e.widthUnits&&(this.widthUnits=e.widthUnits),e.heightUnits&&(this.heightUnits=e.heightUnits),this.setSize(e.width||175,e.height||150),this.setColor(e.color),this}function n(e,t,i){
return Math.min(Math.max(e,t),i)}function r(e){return e=0===e.type.indexOf("touch")?e.touches[0]:e,{x:e.clientX,y:e.clientY}}function a(e){return e="#"+("00000"+(0|e).toString(16)).substr(-6)}var s=i(8),o=i(36),l=i(47),u=i(30);s(t.prototype),t.prototype.appendTo=function(e){return e.appendChild(this.$el),this},t.prototype.remove=function(){this._onSaturationMouseUp(),this._onHueMouseUp(),this.$saturation.removeEventListener("mousedown",this._onSaturationMouseDown),this.$saturation.removeEventListener("touchstart",this._onSaturationMouseDown),this.$hue.removeEventListener("mousedown",this._onHueMouseDown),this.$hue.removeEventListener("touchstart",this._onHueMouseDown),this.off(),this.$el.parentNode&&this.$el.parentNode.removeChild(this.$el)},t.prototype.setColor=function(e){o(e)?(this.inputIsNumber=!0,e=a(e)):this.inputIsNumber=!1,this.color=l(e);var t=this.color.toHsv();return isNaN(t.h)||(this.hue=t.h),this._moveSelectorTo(this.saturationWidth*t.s,(1-t.v)*this.hueHeight),this._moveHueTo((1-this.hue/360)*this.hueHeight),this._updateHue(),this},t.prototype.setSize=function(e,t){return this.width=e,this.height=t,this.$el.style.width=this.width+this.widthUnits,this.$el.style.height=this.height+this.heightUnits,this.saturationWidth=this.width-25,this.$saturation.style.width=this.saturationWidth+"px",this.hueHeight=this.height,this.maxHue=this.hueHeight-2,this},t.prototype.setBackgroundColor=function(e){return o(e)&&(e=a(e)),this.$el.style.padding="5px",this.$el.style.background=l(e).toHexString(),this},t.prototype.setNoBackground=function(){this.$el.style.padding="0px",this.$el.style.background="none"},t.prototype.onChange=function(e){return this.on("update",e),this.emit("update",this.getHexString()),this},t.prototype.getColor=function(){return this.inputIsNumber?this.getHexNumber():this.color.toString()},t.prototype.getHexString=function(){return this.color.toHexString().toUpperCase()},t.prototype.getHexNumber=function(){return parseInt(this.color.toHex(),16)},t.prototype.getRGB=function(){return this.color.toRgb()},t.prototype.getHSV=function(){return this.color.toHsv()},t.prototype.isDark=function(){return this.color.isDark()},t.prototype.isLight=function(){return this.color.isLight()},t.prototype._moveSelectorTo=function(e,t){this.position.x=n(e,0,this.saturationWidth),this.position.y=n(t,0,this.hueHeight),u(this.$sbSelector,{x:this.position.x,y:this.position.y})},t.prototype._updateColorFromPosition=function(){this.color=l({h:this.hue,s:this.position.x/this.saturationWidth,v:1-this.position.y/this.hueHeight}),this._updateColor()},t.prototype._moveHueTo=function(e){this.huePosition=n(e,0,this.maxHue),u(this.$hSelector,{y:this.huePosition})},t.prototype._updateHueFromPosition=function(){var e=this.color.toHsv();this.hue=360*(1-this.huePosition/this.maxHue),this.color=l({h:this.hue,s:e.s,v:e.v}),this._updateHue()},t.prototype._updateHue=function(){var e=l({h:this.hue,s:1,v:1});this.$saturation.style.background="linear-gradient(to right, #fff, "+e.toHexString()+")",this._updateColor()},t.prototype._updateColor=function(){this.$sbSelector.style.background=this.color.toHexString(),this.$sbSelector.style.borderColor=this.color.isDark()?"#fff":"#000",this.emit("update",this.color.toHexString())},t.prototype._onSaturationMouseDown=function(e){var t=this.$saturation.getBoundingClientRect(),i=r(e).x,n=r(e).y;this._moveSelectorTo(i-t.left,n-t.top),this._updateColorFromPosition(),window.addEventListener("mouseup",this._onSaturationMouseUp),window.addEventListener("touchend",this._onSaturationMouseUp),window.addEventListener("mousemove",this._onSaturationMouseMove),window.addEventListener("touchmove",this._onSaturationMouseMove),e.preventDefault()},t.prototype._onSaturationMouseMove=function(e){var t=this.$saturation.getBoundingClientRect(),i=r(e).x,n=r(e).y;this._moveSelectorTo(i-t.left,n-t.top),this._updateColorFromPosition()},t.prototype._onSaturationMouseUp=function(){window.removeEventListener("mouseup",this._onSaturationMouseUp),window.removeEventListener("touchend",this._onSaturationMouseUp),window.removeEventListener("mousemove",this._onSaturationMouseMove),window.removeEventListener("touchmove",this._onSaturationMouseMove)},t.prototype._onHueMouseDown=function(e){var t=this.$hue.getBoundingClientRect(),i=r(e).y;this._moveHueTo(i-t.top),this._updateHueFromPosition(),window.addEventListener("mouseup",this._onHueMouseUp),window.addEventListener("touchend",this._onHueMouseUp),window.addEventListener("mousemove",this._onHueMouseMove),window.addEventListener("touchmove",this._onHueMouseMove),e.preventDefault()},t.prototype._onHueMouseMove=function(e){var t=this.$hue.getBoundingClientRect(),i=r(e).y;this._moveHueTo(i-t.top),this._updateHueFromPosition()},t.prototype._onHueMouseUp=function(){window.removeEventListener("mouseup",this._onHueMouseUp),window.removeEventListener("touchend",this._onHueMouseUp),window.removeEventListener("mousemove",this._onHueMouseMove),window.removeEventListener("touchmove",this._onHueMouseMove)},"undefined"!=typeof e&&e.exports&&(e.exports=t)}()},function(e,t,i){var n=i(23);"string"==typeof n&&(n=[[e.i,n,""]]);i(2)(n,{});n.locals&&(e.exports=n.locals)},function(e,t,i){var n=i(24);"string"==typeof n&&(n=[[e.i,n,""]]);i(2)(n,{});n.locals&&(e.exports=n.locals)},function(e,t,i){var n=i(25);"string"==typeof n&&(n=[[e.i,n,""]]);i(2)(n,{});n.locals&&(e.exports=n.locals)},function(e,t,i){var n=i(26);"string"==typeof n&&(n=[[e.i,n,""]]);i(2)(n,{});n.locals&&(e.exports=n.locals)},function(e,t,i){var n=i(27);"string"==typeof n&&(n=[[e.i,n,""]]);i(2)(n,{});n.locals&&(e.exports=n.locals)},function(e,t,i){var n=i(28);"string"==typeof n&&(n=[[e.i,n,""]]);i(2)(n,{});n.locals&&(e.exports=n.locals)},function(e,t,i){var n;!function(r){function a(e,t){if(e=e?e:"",t=t||{},e instanceof a)return e;if(!(this instanceof a))return new a(e,t);var i=s(e);this._originalInput=e,this._r=i.r,this._g=i.g,this._b=i.b,this._a=i.a,this._roundA=W(100*this._a)/100,this._format=t.format||i.format,this._gradientType=t.gradientType,this._r<1&&(this._r=W(this._r)),this._g<1&&(this._g=W(this._g)),this._b<1&&(this._b=W(this._b)),this._ok=i.ok,this._tc_id=V++}function s(e){var t={r:0,g:0,b:0},i=1,n=null,r=null,a=null,s=!1,l=!1;return"string"==typeof e&&(e=z(e)),"object"==typeof e&&(B(e.r)&&B(e.g)&&B(e.b)?(t=o(e.r,e.g,e.b),s=!0,l="%"===String(e.r).substr(-1)?"prgb":"rgb"):B(e.h)&&B(e.s)&&B(e.v)?(n=U(e.s),r=U(e.v),t=h(e.h,n,r),s=!0,l="hsv"):B(e.h)&&B(e.s)&&B(e.l)&&(n=U(e.s),a=U(e.l),t=u(e.h,n,a),s=!0,l="hsl"),e.hasOwnProperty("a")&&(i=e.a)),i=L(i),{ok:s,format:e.format||l,r:X(255,Y(t.r,0)),g:X(255,Y(t.g,0)),b:X(255,Y(t.b,0)),a:i}}function o(e,t,i){return{r:255*R(e,255),g:255*R(t,255),b:255*R(i,255)}}function l(e,t,i){e=R(e,255),t=R(t,255),i=R(i,255);var n,r,a=Y(e,t,i),s=X(e,t,i),o=(a+s)/2;if(a==s)n=r=0;else{var l=a-s;switch(r=o>.5?l/(2-a-s):l/(a+s),a){case e:n=(t-i)/l+(t<i?6:0);break;case t:n=(i-e)/l+2;break;case i:n=(e-t)/l+4}n/=6}return{h:n,s:r,l:o}}function u(e,t,i){function n(e,t,i){return i<0&&(i+=1),i>1&&(i-=1),i<1/6?e+6*(t-e)*i:i<.5?t:i<2/3?e+(t-e)*(2/3-i)*6:e}var r,a,s;if(e=R(e,360),t=R(t,100),i=R(i,100),0===t)r=a=s=i;else{var o=i<.5?i*(1+t):i+t-i*t,l=2*i-o;r=n(l,o,e+1/3),a=n(l,o,e),s=n(l,o,e-1/3)}return{r:255*r,g:255*a,b:255*s}}function c(e,t,i){e=R(e,255),t=R(t,255),i=R(i,255);var n,r,a=Y(e,t,i),s=X(e,t,i),o=a,l=a-s;if(r=0===a?0:l/a,a==s)n=0;else{switch(a){case e:n=(t-i)/l+(t<i?6:0);break;case t:n=(i-e)/l+2;break;case i:n=(e-t)/l+4}n/=6}return{h:n,s:r,v:o}}function h(e,t,i){e=6*R(e,360),t=R(t,100),i=R(i,100);var n=r.floor(e),a=e-n,s=i*(1-t),o=i*(1-a*t),l=i*(1-(1-a)*t),u=n%6,c=[i,o,s,s,l,i][u],h=[l,i,i,o,s,s][u],f=[s,s,l,i,i,o][u];return{r:255*c,g:255*h,b:255*f}}function f(e,t,i,n){var r=[k(W(e).toString(16)),k(W(t).toString(16)),k(W(i).toString(16))];return n&&r[0].charAt(0)==r[0].charAt(1)&&r[1].charAt(0)==r[1].charAt(1)&&r[2].charAt(0)==r[2].charAt(1)?r[0].charAt(0)+r[1].charAt(0)+r[2].charAt(0):r.join("")}function d(e,t,i,n,r){var a=[k(W(e).toString(16)),k(W(t).toString(16)),k(W(i).toString(16)),k(F(n))];return r&&a[0].charAt(0)==a[0].charAt(1)&&a[1].charAt(0)==a[1].charAt(1)&&a[2].charAt(0)==a[2].charAt(1)&&a[3].charAt(0)==a[3].charAt(1)?a[0].charAt(0)+a[1].charAt(0)+a[2].charAt(0)+a[3].charAt(0):a.join("")}function p(e,t,i,n){var r=[k(F(n)),k(W(e).toString(16)),k(W(t).toString(16)),k(W(i).toString(16))];return r.join("")}function m(e,t){t=0===t?0:t||10;var i=a(e).toHsl();return i.s-=t/100,i.s=C(i.s),a(i)}function v(e,t){t=0===t?0:t||10;var i=a(e).toHsl();return i.s+=t/100,i.s=C(i.s),a(i)}function g(e){return a(e).desaturate(100)}function y(e,t){t=0===t?0:t||10;var i=a(e).toHsl();return i.l+=t/100,i.l=C(i.l),a(i)}function b(e,t){t=0===t?0:t||10;var i=a(e).toRgb();return i.r=Y(0,X(255,i.r-W(255*-(t/100)))),i.g=Y(0,X(255,i.g-W(255*-(t/100)))),i.b=Y(0,X(255,i.b-W(255*-(t/100)))),a(i)}function x(e,t){t=0===t?0:t||10;var i=a(e).toHsl();return i.l-=t/100,i.l=C(i.l),a(i)}function _(e,t){var i=a(e).toHsl(),n=(i.h+t)%360;return i.h=n<0?360+n:n,a(i)}function w(e){var t=a(e).toHsl();return t.h=(t.h+180)%360,a(t)}function T(e){var t=a(e).toHsl(),i=t.h;return[a(e),a({h:(i+120)%360,s:t.s,l:t.l}),a({h:(i+240)%360,s:t.s,l:t.l})]}function M(e){var t=a(e).toHsl(),i=t.h;return[a(e),a({h:(i+90)%360,s:t.s,l:t.l}),a({h:(i+180)%360,s:t.s,l:t.l}),a({h:(i+270)%360,s:t.s,l:t.l})]}function S(e){var t=a(e).toHsl(),i=t.h;return[a(e),a({h:(i+72)%360,s:t.s,l:t.l}),a({h:(i+216)%360,s:t.s,l:t.l})]}function E(e,t,i){t=t||6,i=i||30;var n=a(e).toHsl(),r=360/i,s=[a(e)];for(n.h=(n.h-(r*t>>1)+720)%360;--t;)n.h=(n.h+r)%360,s.push(a(n));return s}function A(e,t){t=t||6;for(var i=a(e).toHsv(),n=i.h,r=i.s,s=i.v,o=[],l=1/t;t--;)o.push(a({h:n,s:r,v:s})),s=(s+l)%1;return o}function P(e){var t={};for(var i in e)e.hasOwnProperty(i)&&(t[e[i]]=i);return t}function L(e){return e=parseFloat(e),(isNaN(e)||e<0||e>1)&&(e=1),e}function R(e,t){D(e)&&(e="100%");var i=I(e);return e=X(t,Y(0,parseFloat(e))),i&&(e=parseInt(e*t,10)/100),r.abs(e-t)<1e-6?1:e%t/parseFloat(t)}function C(e){return X(1,Y(0,e))}function O(e){return parseInt(e,16)}function D(e){return"string"==typeof e&&e.indexOf(".")!=-1&&1===parseFloat(e)}function I(e){return"string"==typeof e&&e.indexOf("%")!=-1}function k(e){return 1==e.length?"0"+e:""+e}function U(e){return e<=1&&(e=100*e+"%"),e}function F(e){return r.round(255*parseFloat(e)).toString(16)}function N(e){return O(e)/255}function B(e){return!!K.CSS_UNIT.exec(e)}function z(e){e=e.replace(G,"").replace(H,"").toLowerCase();var t=!1;if(Z[e])e=Z[e],t=!0;else if("transparent"==e)return{r:0,g:0,b:0,a:0,format:"name"};var i;return(i=K.rgb.exec(e))?{r:i[1],g:i[2],b:i[3]}:(i=K.rgba.exec(e))?{r:i[1],g:i[2],b:i[3],a:i[4]}:(i=K.hsl.exec(e))?{h:i[1],s:i[2],l:i[3]}:(i=K.hsla.exec(e))?{h:i[1],s:i[2],l:i[3],a:i[4]}:(i=K.hsv.exec(e))?{h:i[1],s:i[2],v:i[3]}:(i=K.hsva.exec(e))?{h:i[1],s:i[2],v:i[3],a:i[4]}:(i=K.hex8.exec(e))?{r:O(i[1]),g:O(i[2]),b:O(i[3]),a:N(i[4]),format:t?"name":"hex8"}:(i=K.hex6.exec(e))?{r:O(i[1]),g:O(i[2]),b:O(i[3]),format:t?"name":"hex"}:(i=K.hex4.exec(e))?{r:O(i[1]+""+i[1]),g:O(i[2]+""+i[2]),b:O(i[3]+""+i[3]),a:N(i[4]+""+i[4]),format:t?"name":"hex8"}:!!(i=K.hex3.exec(e))&&{r:O(i[1]+""+i[1]),g:O(i[2]+""+i[2]),b:O(i[3]+""+i[3]),format:t?"name":"hex"}}function j(e){var t,i;return e=e||{level:"AA",size:"small"},t=(e.level||"AA").toUpperCase(),i=(e.size||"small").toLowerCase(),"AA"!==t&&"AAA"!==t&&(t="AA"),"small"!==i&&"large"!==i&&(i="small"),{level:t,size:i}}var G=/^\s+/,H=/\s+$/,V=0,W=r.round,X=r.min,Y=r.max,q=r.random;a.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var e=this.toRgb();return(299*e.r+587*e.g+114*e.b)/1e3},getLuminance:function(){var e,t,i,n,a,s,o=this.toRgb();return e=o.r/255,t=o.g/255,i=o.b/255,n=e<=.03928?e/12.92:r.pow((e+.055)/1.055,2.4),a=t<=.03928?t/12.92:r.pow((t+.055)/1.055,2.4),s=i<=.03928?i/12.92:r.pow((i+.055)/1.055,2.4),.2126*n+.7152*a+.0722*s},setAlpha:function(e){return this._a=L(e),this._roundA=W(100*this._a)/100,this},toHsv:function(){var e=c(this._r,this._g,this._b);return{h:360*e.h,s:e.s,v:e.v,a:this._a}},toHsvString:function(){var e=c(this._r,this._g,this._b),t=W(360*e.h),i=W(100*e.s),n=W(100*e.v);return 1==this._a?"hsv("+t+", "+i+"%, "+n+"%)":"hsva("+t+", "+i+"%, "+n+"%, "+this._roundA+")"},toHsl:function(){var e=l(this._r,this._g,this._b);return{h:360*e.h,s:e.s,l:e.l,a:this._a}},toHslString:function(){var e=l(this._r,this._g,this._b),t=W(360*e.h),i=W(100*e.s),n=W(100*e.l);return 1==this._a?"hsl("+t+", "+i+"%, "+n+"%)":"hsla("+t+", "+i+"%, "+n+"%, "+this._roundA+")"},toHex:function(e){return f(this._r,this._g,this._b,e)},toHexString:function(e){return"#"+this.toHex(e)},toHex8:function(e){return d(this._r,this._g,this._b,this._a,e)},toHex8String:function(e){return"#"+this.toHex8(e)},toRgb:function(){return{r:W(this._r),g:W(this._g),b:W(this._b),a:this._a}},toRgbString:function(){return 1==this._a?"rgb("+W(this._r)+", "+W(this._g)+", "+W(this._b)+")":"rgba("+W(this._r)+", "+W(this._g)+", "+W(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:W(100*R(this._r,255))+"%",g:W(100*R(this._g,255))+"%",b:W(100*R(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return 1==this._a?"rgb("+W(100*R(this._r,255))+"%, "+W(100*R(this._g,255))+"%, "+W(100*R(this._b,255))+"%)":"rgba("+W(100*R(this._r,255))+"%, "+W(100*R(this._g,255))+"%, "+W(100*R(this._b,255))+"%, "+this._roundA+")"},toName:function(){return 0===this._a?"transparent":!(this._a<1)&&(J[f(this._r,this._g,this._b,!0)]||!1)},toFilter:function(e){var t="#"+p(this._r,this._g,this._b,this._a),i=t,n=this._gradientType?"GradientType = 1, ":"";if(e){var r=a(e);i="#"+p(r._r,r._g,r._b,r._a)}return"progid:DXImageTransform.Microsoft.gradient("+n+"startColorstr="+t+",endColorstr="+i+")"},toString:function(e){var t=!!e;e=e||this._format;var i=!1,n=this._a<1&&this._a>=0,r=!t&&n&&("hex"===e||"hex6"===e||"hex3"===e||"hex4"===e||"hex8"===e||"name"===e);return r?"name"===e&&0===this._a?this.toName():this.toRgbString():("rgb"===e&&(i=this.toRgbString()),"prgb"===e&&(i=this.toPercentageRgbString()),"hex"!==e&&"hex6"!==e||(i=this.toHexString()),"hex3"===e&&(i=this.toHexString(!0)),"hex4"===e&&(i=this.toHex8String(!0)),"hex8"===e&&(i=this.toHex8String()),"name"===e&&(i=this.toName()),"hsl"===e&&(i=this.toHslString()),"hsv"===e&&(i=this.toHsvString()),i||this.toHexString())},clone:function(){return a(this.toString())},_applyModification:function(e,t){var i=e.apply(null,[this].concat([].slice.call(t)));return this._r=i._r,this._g=i._g,this._b=i._b,this.setAlpha(i._a),this},lighten:function(){return this._applyModification(y,arguments)},brighten:function(){return this._applyModification(b,arguments)},darken:function(){return this._applyModification(x,arguments)},desaturate:function(){return this._applyModification(m,arguments)},saturate:function(){return this._applyModification(v,arguments)},greyscale:function(){return this._applyModification(g,arguments)},spin:function(){return this._applyModification(_,arguments)},_applyCombination:function(e,t){return e.apply(null,[this].concat([].slice.call(t)))},analogous:function(){return this._applyCombination(E,arguments)},complement:function(){return this._applyCombination(w,arguments)},monochromatic:function(){return this._applyCombination(A,arguments)},splitcomplement:function(){return this._applyCombination(S,arguments)},triad:function(){return this._applyCombination(T,arguments)},tetrad:function(){return this._applyCombination(M,arguments)}},a.fromRatio=function(e,t){if("object"==typeof e){var i={};for(var n in e)e.hasOwnProperty(n)&&("a"===n?i[n]=e[n]:i[n]=U(e[n]));e=i}return a(e,t)},a.equals=function(e,t){return!(!e||!t)&&a(e).toRgbString()==a(t).toRgbString()},a.random=function(){return a.fromRatio({r:q(),g:q(),b:q()})},a.mix=function(e,t,i){i=0===i?0:i||50;var n=a(e).toRgb(),r=a(t).toRgb(),s=i/100,o={r:(r.r-n.r)*s+n.r,g:(r.g-n.g)*s+n.g,b:(r.b-n.b)*s+n.b,a:(r.a-n.a)*s+n.a};return a(o)},a.readability=function(e,t){var i=a(e),n=a(t);return(r.max(i.getLuminance(),n.getLuminance())+.05)/(r.min(i.getLuminance(),n.getLuminance())+.05)},a.isReadable=function(e,t,i){var n,r,s=a.readability(e,t);switch(r=!1,n=j(i),n.level+n.size){case"AAsmall":case"AAAlarge":r=s>=4.5;break;case"AAlarge":r=s>=3;break;case"AAAsmall":r=s>=7}return r},a.mostReadable=function(e,t,i){var n,r,s,o,l=null,u=0;i=i||{},r=i.includeFallbackColors,s=i.level,o=i.size;for(var c=0;c<t.length;c++)n=a.readability(e,t[c]),n>u&&(u=n,l=a(t[c]));return a.isReadable(e,l,{level:s,size:o})||!r?l:(i.includeFallbackColors=!1,a.mostReadable(e,["#fff","#000"],i))};var Z=a.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},J=a.hexNames=P(Z),K=function(){var e="[-\\+]?\\d+%?",t="[-\\+]?\\d*\\.\\d+%?",i="(?:"+t+")|(?:"+e+")",n="[\\s|\\(]+("+i+")[,|\\s]+("+i+")[,|\\s]+("+i+")\\s*\\)?",r="[\\s|\\(]+("+i+")[,|\\s]+("+i+")[,|\\s]+("+i+")[,|\\s]+("+i+")\\s*\\)?";return{CSS_UNIT:new RegExp(i),rgb:new RegExp("rgb"+n),rgba:new RegExp("rgba"+r),hsl:new RegExp("hsl"+n),hsla:new RegExp("hsla"+r),hsv:new RegExp("hsv"+n),hsva:new RegExp("hsva"+r),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();"undefined"!=typeof e&&e.exports?e.exports=a:(n=function(){return a}.call(t,i,t,e),!(void 0!==n&&(e.exports=n)))}(Math)},function(e,t){function i(e){return e.replace(/^\s*|\s*$/g,"")}t=e.exports=i,t.left=function(e){return e.replace(/^\s*/,"")},t.right=function(e){return e.replace(/\s*$/,"")}},function(e,t){var i;i=function(){return this}();try{i=i||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(i=window)}e.exports=i},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";""===e&&(e="Settings",g.length>0&&(e+=" "+(g.length+1)));var t=new f.default(e);return g.push(t),t.appendTo(b),t}function a(){var e;return(e=c()).add.apply(e,arguments)}function s(){var e;return(e=c()).addColor.apply(e,arguments)}function o(){var e;return(e=c()).addColor.apply(e,arguments)}function l(){var e;return(e=c()).addFolder.apply(e,arguments)}function u(e){return e<g.length?g[e]:null}function c(){return u(0)||r()}var h=i(10),f=n(h),d=i(6),p=(n(d),i(9)),m=n(p),v=i(0);i(11);var g=[],y=(0,v.createElement)("div","guigui"),b=(0,v.createElement)("div","guigui-container"),x=new m.default(b,"guigui-container");(0,v.appendElement)(y),(0,v.appendElement)(b,y),x.appendTo(y),e.exports={addPanel:r,addFolder:l,add:a,addColor:s,addColorPicker:o,getPanel:u}}])},{}],21:[function(e,t,i){var n=[].indexOf;t.exports=function(e,t){if(n)return e.indexOf(t);for(var i=0;i<e.length;++i){if(e[i]===t)return i}return-1}},{}],22:[function(e,t,i){if(typeof Object.create==="function"){t.exports=function e(t,i){t.super_=i;t.prototype=Object.create(i.prototype,{constructor:{value:t,enumerable:false,writable:true,configurable:true}})}}else{t.exports=function e(t,i){t.super_=i;var n=function(){};n.prototype=i.prototype;t.prototype=new n;t.prototype.constructor=t}}},{}],23:[function(e,t,i){var n={left:0,top:0};t.exports=r;function r(e,t,i){t=t||e.currentTarget||e.srcElement;if(!Array.isArray(i)){i=[0,0]}var n=e.clientX||0;var r=e.clientY||0;var s=a(t);i[0]=n-s.left;i[1]=r-s.top;return i}function a(e){if(e===window||e===document||e===document.body){return n}else{return e.getBoundingClientRect()}}},{}],24:[function(e,t,i){"use strict";var n=e("to-px");t.exports=r;function r(e,t,i){if(typeof e==="function"){i=!!t;t=e;e=window}var r=n("ex",e);var a=function(e){if(i){e.preventDefault()}var n=e.deltaX||0;var a=e.deltaY||0;var s=e.deltaZ||0;var o=e.deltaMode;var l=1;switch(o){case 1:l=r;break;case 2:l=window.innerHeight;break}n*=l;a*=l;s*=l;if(n||a||s){return t(n,a,s,e)}};e.addEventListener("wheel",a);return a}},{"to-px":32}],25:[function(e,t,i){t.exports=function e(t,i){if(!i)i=[0,""];t=String(t);var n=parseFloat(t,10);i[0]=n;i[1]=t.match(/[\d.\-\+]*\s*(.*)/)[1]||"";return i}},{}],26:[function(e,t,i){var n=t.exports={};var r;var a;function s(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}(function(){try{if(typeof setTimeout==="function"){r=setTimeout}else{r=s}}catch(e){r=s}try{if(typeof clearTimeout==="function"){a=clearTimeout}else{a=o}}catch(e){a=o}})();function l(e){if(r===setTimeout){return setTimeout(e,0)}if((r===s||!r)&&setTimeout){r=setTimeout;return setTimeout(e,0)}try{return r(e,0)}catch(t){try{return r.call(null,e,0)}catch(t){return r.call(this,e,0)}}}function u(e){if(a===clearTimeout){return clearTimeout(e)}if((a===o||!a)&&clearTimeout){a=clearTimeout;return clearTimeout(e)}try{return a(e)}catch(t){try{return a.call(null,e)}catch(t){return a.call(this,e)}}}var c=[];var h=false;var f;var d=-1;function p(){if(!h||!f){return}h=false;if(f.length){c=f.concat(c)}else{d=-1}if(c.length){m()}}function m(){if(h){return}var e=l(p);h=true;var t=c.length;while(t){f=c;c=[];while(++d<t){if(f){f[d].run()}}d=-1;t=c.length}f=null;h=false;u(e)}n.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1){for(var i=1;i<arguments.length;i++){t[i-1]=arguments[i]}}c.push(new v(e,t));if(c.length===1&&!h){l(m)}};function v(e,t){this.fun=e;this.array=t}v.prototype.run=function(){this.fun.apply(null,this.array)};n.title="browser";n.browser=true;n.env={};n.argv=[];n.version="";n.versions={};function g(){}n.on=g;n.addListener=g;n.once=g;n.off=g;n.removeListener=g;n.removeAllListeners=g;n.emit=g;n.prependListener=g;n.prependOnceListener=g;n.listeners=function(e){return[]};n.binding=function(e){throw new Error("process.binding is not supported")};n.cwd=function(){return"/"};n.chdir=function(e){throw new Error("process.chdir is not supported")};n.umask=function(){return 0}},{}],27:[function(e,t,i){var n=e("inherits");var r=e("events").EventEmitter;var a=e("right-now");var s=e("raf");t.exports=o;function o(e){if(!(this instanceof o))return new o(e);this.running=false;this.last=a();this._frame=0;this._tick=this.tick.bind(this);if(e)this.on("tick",e)}n(o,r);o.prototype.start=function(){if(this.running)return;this.running=true;this.last=a();this._frame=s(this._tick);return this};o.prototype.stop=function(){this.running=false;if(this._frame!==0)s.cancel(this._frame);this._frame=0;return this};o.prototype.tick=function(){this._frame=s(this._tick);var e=a();var t=e-this.last;this.emit("tick",t);this.last=e}},{events:18,inherits:22,raf:29,"right-now":30}],28:[function(e,t,i){(function(e){(function(){var i,n,r,a,s,o;if(typeof performance!=="undefined"&&performance!==null&&performance.now){t.exports=function(){return performance.now()}}else if(typeof e!=="undefined"&&e!==null&&e.hrtime){t.exports=function(){return(i()-s)/1e6};n=e.hrtime;i=function(){var e;e=n();return e[0]*1e9+e[1]};a=i();o=e.uptime()*1e9;s=a-o}else if(Date.now){t.exports=function(){return Date.now()-r};r=Date.now()}else{t.exports=function(){return(new Date).getTime()-r};r=(new Date).getTime()}}).call(this)}).call(this,e("_process"))},{_process:26}],29:[function(e,t,i){(function(i){var n=e("performance-now"),r=typeof window==="undefined"?i:window,a=["moz","webkit"],s="AnimationFrame",o=r["request"+s],l=r["cancel"+s]||r["cancelRequest"+s];for(var u=0;!o&&u<a.length;u++){o=r[a[u]+"Request"+s];l=r[a[u]+"Cancel"+s]||r[a[u]+"CancelRequest"+s]}if(!o||!l){var c=0,h=0,f=[],d=1e3/60;o=function(e){if(f.length===0){var t=n(),i=Math.max(0,d-(t-c));c=i+t;setTimeout(function(){var e=f.slice(0);f.length=0;for(var t=0;t<e.length;t++){if(!e[t].cancelled){try{e[t].callback(c)}catch(e){setTimeout(function(){throw e},0)}}}},Math.round(i))}f.push({handle:++h,callback:e,cancelled:false});return h};l=function(e){for(var t=0;t<f.length;t++){if(f[t].handle===e){f[t].cancelled=true}}}}t.exports=function(e){return o.call(r,e)};t.exports.cancel=function(){l.apply(r,arguments)};t.exports.polyfill=function(e){if(!e){e=r}e.requestAnimationFrame=o;e.cancelAnimationFrame=l}}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"performance-now":28}],30:[function(e,t,i){(function(e){t.exports=e.performance&&e.performance.now?function e(){return performance.now()}:Date.now||function e(){return+new Date}}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{}],31:[function(e,t,i){(function(e,n){typeof i==="object"&&typeof t!=="undefined"?n(i):typeof define==="function"&&define.amd?define(["exports"],n):n(e.THREE=e.THREE||{})})(this,function(e){"use strict";if(Number.EPSILON===undefined){Number.EPSILON=Math.pow(2,-52)}if(Number.isInteger===undefined){Number.isInteger=function(e){return typeof e==="number"&&isFinite(e)&&Math.floor(e)===e}}if(Math.sign===undefined){Math.sign=function(e){return e<0?-1:e>0?1:+e}}if(Function.prototype.name===undefined){Object.defineProperty(Function.prototype,"name",{get:function(){return this.toString().match(/^\s*function\s*([^\(\s]*)/)[1]}})}if(Object.assign===undefined){(function(){Object.assign=function(e){"use strict";if(e===undefined||e===null){throw new TypeError("Cannot convert undefined or null to object")}var t=Object(e);for(var i=1;i<arguments.length;i++){var n=arguments[i];if(n!==undefined&&n!==null){for(var r in n){if(Object.prototype.hasOwnProperty.call(n,r)){t[r]=n[r]}}}}return t}})()}function t(){}Object.assign(t.prototype,{addEventListener:function(e,t){if(this._listeners===undefined)this._listeners={};var i=this._listeners;if(i[e]===undefined){i[e]=[]}if(i[e].indexOf(t)===-1){i[e].push(t)}},hasEventListener:function(e,t){if(this._listeners===undefined)return false;var i=this._listeners;return i[e]!==undefined&&i[e].indexOf(t)!==-1},removeEventListener:function(e,t){if(this._listeners===undefined)return;var i=this._listeners;var n=i[e];if(n!==undefined){var r=n.indexOf(t);if(r!==-1){n.splice(r,1)}}},dispatchEvent:function(e){if(this._listeners===undefined)return;var t=this._listeners;var i=t[e.type];if(i!==undefined){e.target=this;var n=i.slice(0);for(var r=0,a=n.length;r<a;r++){n[r].call(this,e)}}}});var i="87";var n={LEFT:0,MIDDLE:1,RIGHT:2};var r=0;var a=1;var s=2;var o=3;var l=0;var u=1;var c=0;var h=1;var f=2;var d=0;var p=1;var m=2;var v=1;var g=2;var y=0;var b=1;var x=2;var _=0;var w=1;var T=2;var M=3;var S=4;var E=5;var A=100;var P=101;var L=102;var R=103;var C=104;var O=200;var D=201;var I=202;var k=203;var U=204;var F=205;var N=206;var B=207;var z=208;var j=209;var G=210;var H=0;var V=1;var W=2;var X=3;var Y=4;var q=5;var Z=6;var J=7;var K=0;var Q=1;var $=2;var ee=0;var te=1;var ie=2;var ne=3;var re=4;var ae=300;var se=301;var oe=302;var le=303;var ue=304;var ce=305;var he=306;var fe=307;var de=1e3;var pe=1001;var me=1002;var ve=1003;var ge=1004;var ye=1005;var be=1006;var xe=1007;var _e=1008;var we=1009;var Te=1010;var Me=1011;var Se=1012;var Ee=1013;var Ae=1014;var Pe=1015;var Le=1016;var Re=1017;var Ce=1018;var Oe=1019;var De=1020;var Ie=1021;var ke=1022;var Ue=1023;var Fe=1024;var Ne=1025;var Be=Ue;var ze=1026;var je=1027;var Ge=2001;var He=2002;var Ve=2003;var We=2004;var Xe=2100;var Ye=2101;var qe=2102;var Ze=2103;var Je=2151;var Ke=2200;var Qe=2201;var $e=2202;var et=2300;var tt=2301;var it=2302;var nt=2400;var rt=2401;var at=2402;var st=0;var ot=1;var lt=2;var ut=3e3;var ct=3001;var ht=3007;var ft=3002;var dt=3003;var pt=3004;var mt=3005;var vt=3006;var gt=3200;var yt=3201;var bt={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:function(){var e="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split("");var t=new Array(36);var i=0,n;return function r(){for(var a=0;a<36;a++){if(a===8||a===13||a===18||a===23){t[a]="-"}else if(a===14){t[a]="4"}else{if(i<=2)i=33554432+Math.random()*16777216|0;n=i&15;i=i>>4;t[a]=e[a===19?n&3|8:n]}}return t.join("")}}(),clamp:function(e,t,i){return Math.max(t,Math.min(i,e))},euclideanModulo:function(e,t){return(e%t+t)%t},mapLinear:function(e,t,i,n,r){return n+(e-t)*(r-n)/(i-t)},lerp:function(e,t,i){return(1-i)*e+i*t},smoothstep:function(e,t,i){if(e<=t)return 0;if(e>=i)return 1;e=(e-t)/(i-t);return e*e*(3-2*e)},smootherstep:function(e,t,i){if(e<=t)return 0;if(e>=i)return 1;e=(e-t)/(i-t);return e*e*e*(e*(e*6-15)+10)},randInt:function(e,t){return e+Math.floor(Math.random()*(t-e+1))},randFloat:function(e,t){return e+Math.random()*(t-e)},randFloatSpread:function(e){return e*(.5-Math.random())},degToRad:function(e){return e*bt.DEG2RAD},radToDeg:function(e){return e*bt.RAD2DEG},isPowerOfTwo:function(e){return(e&e-1)===0&&e!==0},nearestPowerOfTwo:function(e){return Math.pow(2,Math.round(Math.log(e)/Math.LN2))},nextPowerOfTwo:function(e){e--;e|=e>>1;e|=e>>2;e|=e>>4;e|=e>>8;e|=e>>16;e++;return e}};function xt(e,t){this.x=e||0;this.y=t||0}Object.defineProperties(xt.prototype,{width:{get:function(){return this.x},set:function(e){this.x=e}},height:{get:function(){return this.y},set:function(e){this.y=e}}})
;Object.assign(xt.prototype,{isVector2:true,set:function(e,t){this.x=e;this.y=t;return this},setScalar:function(e){this.x=e;this.y=e;return this},setX:function(e){this.x=e;return this},setY:function(e){this.y=e;return this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}},clone:function(){return new this.constructor(this.x,this.y)},copy:function(e){this.x=e.x;this.y=e.y;return this},add:function(e,t){if(t!==undefined){console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead.");return this.addVectors(e,t)}this.x+=e.x;this.y+=e.y;return this},addScalar:function(e){this.x+=e;this.y+=e;return this},addVectors:function(e,t){this.x=e.x+t.x;this.y=e.y+t.y;return this},addScaledVector:function(e,t){this.x+=e.x*t;this.y+=e.y*t;return this},sub:function(e,t){if(t!==undefined){console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead.");return this.subVectors(e,t)}this.x-=e.x;this.y-=e.y;return this},subScalar:function(e){this.x-=e;this.y-=e;return this},subVectors:function(e,t){this.x=e.x-t.x;this.y=e.y-t.y;return this},multiply:function(e){this.x*=e.x;this.y*=e.y;return this},multiplyScalar:function(e){this.x*=e;this.y*=e;return this},divide:function(e){this.x/=e.x;this.y/=e.y;return this},divideScalar:function(e){return this.multiplyScalar(1/e)},min:function(e){this.x=Math.min(this.x,e.x);this.y=Math.min(this.y,e.y);return this},max:function(e){this.x=Math.max(this.x,e.x);this.y=Math.max(this.y,e.y);return this},clamp:function(e,t){this.x=Math.max(e.x,Math.min(t.x,this.x));this.y=Math.max(e.y,Math.min(t.y,this.y));return this},clampScalar:function(){var e=new xt;var t=new xt;return function i(n,r){e.set(n,n);t.set(r,r);return this.clamp(e,t)}}(),clampLength:function(e,t){var i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))},floor:function(){this.x=Math.floor(this.x);this.y=Math.floor(this.y);return this},ceil:function(){this.x=Math.ceil(this.x);this.y=Math.ceil(this.y);return this},round:function(){this.x=Math.round(this.x);this.y=Math.round(this.y);return this},roundToZero:function(){this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x);this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y);return this},negate:function(){this.x=-this.x;this.y=-this.y;return this},dot:function(e){return this.x*e.x+this.y*e.y},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)},normalize:function(){return this.divideScalar(this.length()||1)},angle:function(){var e=Math.atan2(this.y,this.x);if(e<0)e+=2*Math.PI;return e},distanceTo:function(e){return Math.sqrt(this.distanceToSquared(e))},distanceToSquared:function(e){var t=this.x-e.x,i=this.y-e.y;return t*t+i*i},distanceToManhattan:function(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)},setLength:function(e){return this.normalize().multiplyScalar(e)},lerp:function(e,t){this.x+=(e.x-this.x)*t;this.y+=(e.y-this.y)*t;return this},lerpVectors:function(e,t,i){return this.subVectors(t,e).multiplyScalar(i).add(e)},equals:function(e){return e.x===this.x&&e.y===this.y},fromArray:function(e,t){if(t===undefined)t=0;this.x=e[t];this.y=e[t+1];return this},toArray:function(e,t){if(e===undefined)e=[];if(t===undefined)t=0;e[t]=this.x;e[t+1]=this.y;return e},fromBufferAttribute:function(e,t,i){if(i!==undefined){console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute().")}this.x=e.getX(t);this.y=e.getY(t);return this},rotateAround:function(e,t){var i=Math.cos(t),n=Math.sin(t);var r=this.x-e.x;var a=this.y-e.y;this.x=r*i-a*n+e.x;this.y=r*n+a*i+e.y;return this}});var _t=0;function wt(e,t,i,n,r,a,s,o,l,u){Object.defineProperty(this,"id",{value:_t++});this.uuid=bt.generateUUID();this.name="";this.image=e!==undefined?e:wt.DEFAULT_IMAGE;this.mipmaps=[];this.mapping=t!==undefined?t:wt.DEFAULT_MAPPING;this.wrapS=i!==undefined?i:pe;this.wrapT=n!==undefined?n:pe;this.magFilter=r!==undefined?r:be;this.minFilter=a!==undefined?a:_e;this.anisotropy=l!==undefined?l:1;this.format=s!==undefined?s:Ue;this.type=o!==undefined?o:we;this.offset=new xt(0,0);this.repeat=new xt(1,1);this.generateMipmaps=true;this.premultiplyAlpha=false;this.flipY=true;this.unpackAlignment=4;this.encoding=u!==undefined?u:ut;this.version=0;this.onUpdate=null}wt.DEFAULT_IMAGE=undefined;wt.DEFAULT_MAPPING=ae;Object.defineProperty(wt.prototype,"needsUpdate",{set:function(e){if(e===true)this.version++}});Object.assign(wt.prototype,t.prototype,{constructor:wt,isTexture:true,clone:function(){return(new this.constructor).copy(this)},copy:function(e){this.name=e.name;this.image=e.image;this.mipmaps=e.mipmaps.slice(0);this.mapping=e.mapping;this.wrapS=e.wrapS;this.wrapT=e.wrapT;this.magFilter=e.magFilter;this.minFilter=e.minFilter;this.anisotropy=e.anisotropy;this.format=e.format;this.type=e.type;this.offset.copy(e.offset);this.repeat.copy(e.repeat);this.generateMipmaps=e.generateMipmaps;this.premultiplyAlpha=e.premultiplyAlpha;this.flipY=e.flipY;this.unpackAlignment=e.unpackAlignment;this.encoding=e.encoding;return this},toJSON:function(e){if(e.textures[this.uuid]!==undefined){return e.textures[this.uuid]}function t(e){var t;if(e instanceof HTMLCanvasElement){t=e}else{t=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");t.width=e.width;t.height=e.height;var i=t.getContext("2d");if(e instanceof ImageData){i.putImageData(e,0,0)}else{i.drawImage(e,0,0,e.width,e.height)}}if(t.width>2048||t.height>2048){return t.toDataURL("image/jpeg",.6)}else{return t.toDataURL("image/png")}}var i={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],wrap:[this.wrapS,this.wrapT],minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY};if(this.image!==undefined){var n=this.image;if(n.uuid===undefined){n.uuid=bt.generateUUID()}if(e.images[n.uuid]===undefined){e.images[n.uuid]={uuid:n.uuid,url:t(n)}}i.image=n.uuid}e.textures[this.uuid]=i;return i},dispose:function(){this.dispatchEvent({type:"dispose"})},transformUv:function(e){if(this.mapping!==ae)return;e.multiply(this.repeat);e.add(this.offset);if(e.x<0||e.x>1){switch(this.wrapS){case de:e.x=e.x-Math.floor(e.x);break;case pe:e.x=e.x<0?0:1;break;case me:if(Math.abs(Math.floor(e.x)%2)===1){e.x=Math.ceil(e.x)-e.x}else{e.x=e.x-Math.floor(e.x)}break}}if(e.y<0||e.y>1){switch(this.wrapT){case de:e.y=e.y-Math.floor(e.y);break;case pe:e.y=e.y<0?0:1;break;case me:if(Math.abs(Math.floor(e.y)%2)===1){e.y=Math.ceil(e.y)-e.y}else{e.y=e.y-Math.floor(e.y)}break}}if(this.flipY){e.y=1-e.y}}});function Tt(e,t,i,n){this.x=e||0;this.y=t||0;this.z=i||0;this.w=n!==undefined?n:1}Object.assign(Tt.prototype,{isVector4:true,set:function(e,t,i,n){this.x=e;this.y=t;this.z=i;this.w=n;return this},setScalar:function(e){this.x=e;this.y=e;this.z=e;this.w=e;return this},setX:function(e){this.x=e;return this},setY:function(e){this.y=e;return this},setZ:function(e){this.z=e;return this},setW:function(e){this.w=e;return this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}},clone:function(){return new this.constructor(this.x,this.y,this.z,this.w)},copy:function(e){this.x=e.x;this.y=e.y;this.z=e.z;this.w=e.w!==undefined?e.w:1;return this},add:function(e,t){if(t!==undefined){console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead.");return this.addVectors(e,t)}this.x+=e.x;this.y+=e.y;this.z+=e.z;this.w+=e.w;return this},addScalar:function(e){this.x+=e;this.y+=e;this.z+=e;this.w+=e;return this},addVectors:function(e,t){this.x=e.x+t.x;this.y=e.y+t.y;this.z=e.z+t.z;this.w=e.w+t.w;return this},addScaledVector:function(e,t){this.x+=e.x*t;this.y+=e.y*t;this.z+=e.z*t;this.w+=e.w*t;return this},sub:function(e,t){if(t!==undefined){console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead.");return this.subVectors(e,t)}this.x-=e.x;this.y-=e.y;this.z-=e.z;this.w-=e.w;return this},subScalar:function(e){this.x-=e;this.y-=e;this.z-=e;this.w-=e;return this},subVectors:function(e,t){this.x=e.x-t.x;this.y=e.y-t.y;this.z=e.z-t.z;this.w=e.w-t.w;return this},multiplyScalar:function(e){this.x*=e;this.y*=e;this.z*=e;this.w*=e;return this},applyMatrix4:function(e){var t=this.x,i=this.y,n=this.z,r=this.w;var a=e.elements;this.x=a[0]*t+a[4]*i+a[8]*n+a[12]*r;this.y=a[1]*t+a[5]*i+a[9]*n+a[13]*r;this.z=a[2]*t+a[6]*i+a[10]*n+a[14]*r;this.w=a[3]*t+a[7]*i+a[11]*n+a[15]*r;return this},divideScalar:function(e){return this.multiplyScalar(1/e)},setAxisAngleFromQuaternion:function(e){this.w=2*Math.acos(e.w);var t=Math.sqrt(1-e.w*e.w);if(t<1e-4){this.x=1;this.y=0;this.z=0}else{this.x=e.x/t;this.y=e.y/t;this.z=e.z/t}return this},setAxisAngleFromRotationMatrix:function(e){var t,i,n,r,a=.01,s=.1,o=e.elements,l=o[0],u=o[4],c=o[8],h=o[1],f=o[5],d=o[9],p=o[2],m=o[6],v=o[10];if(Math.abs(u-h)<a&&Math.abs(c-p)<a&&Math.abs(d-m)<a){if(Math.abs(u+h)<s&&Math.abs(c+p)<s&&Math.abs(d+m)<s&&Math.abs(l+f+v-3)<s){this.set(1,0,0,0);return this}t=Math.PI;var g=(l+1)/2;var y=(f+1)/2;var b=(v+1)/2;var x=(u+h)/4;var _=(c+p)/4;var w=(d+m)/4;if(g>y&&g>b){if(g<a){i=0;n=.707106781;r=.707106781}else{i=Math.sqrt(g);n=x/i;r=_/i}}else if(y>b){if(y<a){i=.707106781;n=0;r=.707106781}else{n=Math.sqrt(y);i=x/n;r=w/n}}else{if(b<a){i=.707106781;n=.707106781;r=0}else{r=Math.sqrt(b);i=_/r;n=w/r}}this.set(i,n,r,t);return this}var T=Math.sqrt((m-d)*(m-d)+(c-p)*(c-p)+(h-u)*(h-u));if(Math.abs(T)<.001)T=1;this.x=(m-d)/T;this.y=(c-p)/T;this.z=(h-u)/T;this.w=Math.acos((l+f+v-1)/2);return this},min:function(e){this.x=Math.min(this.x,e.x);this.y=Math.min(this.y,e.y);this.z=Math.min(this.z,e.z);this.w=Math.min(this.w,e.w);return this},max:function(e){this.x=Math.max(this.x,e.x);this.y=Math.max(this.y,e.y);this.z=Math.max(this.z,e.z);this.w=Math.max(this.w,e.w);return this},clamp:function(e,t){this.x=Math.max(e.x,Math.min(t.x,this.x));this.y=Math.max(e.y,Math.min(t.y,this.y));this.z=Math.max(e.z,Math.min(t.z,this.z));this.w=Math.max(e.w,Math.min(t.w,this.w));return this},clampScalar:function(){var e,t;return function i(n,r){if(e===undefined){e=new Tt;t=new Tt}e.set(n,n,n,n);t.set(r,r,r,r);return this.clamp(e,t)}}(),clampLength:function(e,t){var i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))},floor:function(){this.x=Math.floor(this.x);this.y=Math.floor(this.y);this.z=Math.floor(this.z);this.w=Math.floor(this.w);return this},ceil:function(){this.x=Math.ceil(this.x);this.y=Math.ceil(this.y);this.z=Math.ceil(this.z);this.w=Math.ceil(this.w);return this},round:function(){this.x=Math.round(this.x);this.y=Math.round(this.y);this.z=Math.round(this.z);this.w=Math.round(this.w);return this},roundToZero:function(){this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x);this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y);this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z);this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w);return this},negate:function(){this.x=-this.x;this.y=-this.y;this.z=-this.z;this.w=-this.w;return this},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(e){return this.normalize().multiplyScalar(e)},lerp:function(e,t){this.x+=(e.x-this.x)*t;this.y+=(e.y-this.y)*t;this.z+=(e.z-this.z)*t;this.w+=(e.w-this.w)*t;return this},lerpVectors:function(e,t,i){return this.subVectors(t,e).multiplyScalar(i).add(e)},equals:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w},fromArray:function(e,t){if(t===undefined)t=0;this.x=e[t];this.y=e[t+1];this.z=e[t+2];this.w=e[t+3];return this},toArray:function(e,t){if(e===undefined)e=[];if(t===undefined)t=0;e[t]=this.x;e[t+1]=this.y;e[t+2]=this.z;e[t+3]=this.w;return e},fromBufferAttribute:function(e,t,i){if(i!==undefined){console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute().")}this.x=e.getX(t);this.y=e.getY(t);this.z=e.getZ(t);this.w=e.getW(t);return this}});function Mt(e,t,i){this.uuid=bt.generateUUID();this.width=e;this.height=t;this.scissor=new Tt(0,0,e,t);this.scissorTest=false;this.viewport=new Tt(0,0,e,t);i=i||{};if(i.minFilter===undefined)i.minFilter=be;this.texture=new wt(undefined,undefined,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.encoding);this.depthBuffer=i.depthBuffer!==undefined?i.depthBuffer:true;this.stencilBuffer=i.stencilBuffer!==undefined?i.stencilBuffer:true;this.depthTexture=i.depthTexture!==undefined?i.depthTexture:null}Object.assign(Mt.prototype,t.prototype,{isWebGLRenderTarget:true,setSize:function(e,t){if(this.width!==e||this.height!==t){this.width=e;this.height=t;this.dispose()}this.viewport.set(0,0,e,t);this.scissor.set(0,0,e,t)},clone:function(){return(new this.constructor).copy(this)},copy:function(e){this.width=e.width;this.height=e.height;this.viewport.copy(e.viewport);this.texture=e.texture.clone();this.depthBuffer=e.depthBuffer;this.stencilBuffer=e.stencilBuffer;this.depthTexture=e.depthTexture;return this},dispose:function(){this.dispatchEvent({type:"dispose"})}});function St(e,t,i){Mt.call(this,e,t,i);this.activeCubeFace=0;this.activeMipMapLevel=0}St.prototype=Object.create(Mt.prototype);St.prototype.constructor=St;St.prototype.isWebGLRenderTargetCube=true;function Et(e,t,i,n){this._x=e||0;this._y=t||0;this._z=i||0;this._w=n!==undefined?n:1}Object.assign(Et,{slerp:function(e,t,i,n){return i.copy(e).slerp(t,n)},slerpFlat:function(e,t,i,n,r,a,s){var o=i[n+0],l=i[n+1],u=i[n+2],c=i[n+3],h=r[a+0],f=r[a+1],d=r[a+2],p=r[a+3];if(c!==p||o!==h||l!==f||u!==d){var m=1-s,v=o*h+l*f+u*d+c*p,g=v>=0?1:-1,y=1-v*v;if(y>Number.EPSILON){var b=Math.sqrt(y),x=Math.atan2(b,v*g);m=Math.sin(m*x)/b;s=Math.sin(s*x)/b}var _=s*g;o=o*m+h*_;l=l*m+f*_;u=u*m+d*_;c=c*m+p*_;if(m===1-s){var w=1/Math.sqrt(o*o+l*l+u*u+c*c);o*=w;l*=w;u*=w;c*=w}}e[t]=o;e[t+1]=l;e[t+2]=u;e[t+3]=c}});Object.defineProperties(Et.prototype,{x:{get:function(){return this._x},set:function(e){this._x=e;this.onChangeCallback()}},y:{get:function(){return this._y},set:function(e){this._y=e;this.onChangeCallback()}},z:{get:function(){return this._z},set:function(e){this._z=e;this.onChangeCallback()}},w:{get:function(){return this._w},set:function(e){this._w=e;this.onChangeCallback()}}});Object.assign(Et.prototype,{set:function(e,t,i,n){this._x=e;this._y=t;this._z=i;this._w=n;this.onChangeCallback();return this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._w)},copy:function(e){this._x=e.x;this._y=e.y;this._z=e.z;this._w=e.w;this.onChangeCallback();return this},setFromEuler:function(e,t){if(!(e&&e.isEuler)){throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.")}var i=e._x,n=e._y,r=e._z,a=e.order;var s=Math.cos;var o=Math.sin;var l=s(i/2);var u=s(n/2);var c=s(r/2);var h=o(i/2);var f=o(n/2);var d=o(r/2);if(a==="XYZ"){this._x=h*u*c+l*f*d;this._y=l*f*c-h*u*d;this._z=l*u*d+h*f*c;this._w=l*u*c-h*f*d}else if(a==="YXZ"){this._x=h*u*c+l*f*d;this._y=l*f*c-h*u*d;this._z=l*u*d-h*f*c;this._w=l*u*c+h*f*d}else if(a==="ZXY"){this._x=h*u*c-l*f*d;this._y=l*f*c+h*u*d;this._z=l*u*d+h*f*c;this._w=l*u*c-h*f*d}else if(a==="ZYX"){this._x=h*u*c-l*f*d;this._y=l*f*c+h*u*d;this._z=l*u*d-h*f*c;this._w=l*u*c+h*f*d}else if(a==="YZX"){this._x=h*u*c+l*f*d;this._y=l*f*c+h*u*d;this._z=l*u*d-h*f*c;this._w=l*u*c-h*f*d}else if(a==="XZY"){this._x=h*u*c-l*f*d;this._y=l*f*c-h*u*d;this._z=l*u*d+h*f*c;this._w=l*u*c+h*f*d}if(t!==false)this.onChangeCallback();return this},setFromAxisAngle:function(e,t){var i=t/2,n=Math.sin(i);this._x=e.x*n;this._y=e.y*n;this._z=e.z*n;this._w=Math.cos(i);this.onChangeCallback();return this},setFromRotationMatrix:function(e){var t=e.elements,i=t[0],n=t[4],r=t[8],a=t[1],s=t[5],o=t[9],l=t[2],u=t[6],c=t[10],h=i+s+c,f;if(h>0){f=.5/Math.sqrt(h+1);this._w=.25/f;this._x=(u-o)*f;this._y=(r-l)*f;this._z=(a-n)*f}else if(i>s&&i>c){f=2*Math.sqrt(1+i-s-c);this._w=(u-o)/f;this._x=.25*f;this._y=(n+a)/f;this._z=(r+l)/f}else if(s>c){f=2*Math.sqrt(1+s-i-c);this._w=(r-l)/f;this._x=(n+a)/f;this._y=.25*f;this._z=(o+u)/f}else{f=2*Math.sqrt(1+c-i-s);this._w=(a-n)/f;this._x=(r+l)/f;this._y=(o+u)/f;this._z=.25*f}this.onChangeCallback();return this},setFromUnitVectors:function(){var e=new At;var t;var i=1e-6;return function n(r,a){if(e===undefined)e=new At;t=r.dot(a)+1;if(t<i){t=0;if(Math.abs(r.x)>Math.abs(r.z)){e.set(-r.y,r.x,0)}else{e.set(0,-r.z,r.y)}}else{e.crossVectors(r,a)}this._x=e.x;this._y=e.y;this._z=e.z;this._w=t;return this.normalize()}}(),inverse:function(){return this.conjugate().normalize()},conjugate:function(){this._x*=-1;this._y*=-1;this._z*=-1;this.onChangeCallback();return this},dot:function(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var e=this.length();if(e===0){this._x=0;this._y=0;this._z=0;this._w=1}else{e=1/e;this._x=this._x*e;this._y=this._y*e;this._z=this._z*e;this._w=this._w*e}this.onChangeCallback();return this},multiply:function(e,t){if(t!==undefined){console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead.");return this.multiplyQuaternions(e,t)}return this.multiplyQuaternions(this,e)},premultiply:function(e){return this.multiplyQuaternions(e,this)},multiplyQuaternions:function(e,t){var i=e._x,n=e._y,r=e._z,a=e._w;var s=t._x,o=t._y,l=t._z,u=t._w;this._x=i*u+a*s+n*l-r*o;this._y=n*u+a*o+r*s-i*l;this._z=r*u+a*l+i*o-n*s;this._w=a*u-i*s-n*o-r*l;this.onChangeCallback();return this},slerp:function(e,t){if(t===0)return this;if(t===1)return this.copy(e);var i=this._x,n=this._y,r=this._z,a=this._w;var s=a*e._w+i*e._x+n*e._y+r*e._z;if(s<0){this._w=-e._w;this._x=-e._x;this._y=-e._y;this._z=-e._z;s=-s}else{this.copy(e)}if(s>=1){this._w=a;this._x=i;this._y=n;this._z=r;return this}var o=Math.sqrt(1-s*s);if(Math.abs(o)<.001){this._w=.5*(a+this._w);this._x=.5*(i+this._x);this._y=.5*(n+this._y);this._z=.5*(r+this._z);return this}var l=Math.atan2(o,s);var u=Math.sin((1-t)*l)/o,c=Math.sin(t*l)/o;this._w=a*u+this._w*c;this._x=i*u+this._x*c;this._y=n*u+this._y*c;this._z=r*u+this._z*c;this.onChangeCallback();return this},equals:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w},fromArray:function(e,t){if(t===undefined)t=0;this._x=e[t];this._y=e[t+1];this._z=e[t+2];this._w=e[t+3];this.onChangeCallback();return this},toArray:function(e,t){if(e===undefined)e=[];if(t===undefined)t=0;e[t]=this._x;e[t+1]=this._y;e[t+2]=this._z;e[t+3]=this._w;return e},onChange:function(e){this.onChangeCallback=e;return this},onChangeCallback:function(){}});function At(e,t,i){this.x=e||0;this.y=t||0;this.z=i||0}Object.assign(At.prototype,{isVector3:true,set:function(e,t,i){this.x=e;this.y=t;this.z=i;return this},setScalar:function(e){this.x=e;this.y=e;this.z=e;return this},setX:function(e){this.x=e;return this},setY:function(e){this.y=e;return this},setZ:function(e){this.z=e;return this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}},clone:function(){return new this.constructor(this.x,this.y,this.z)},copy:function(e){this.x=e.x;this.y=e.y;this.z=e.z;return this},add:function(e,t){if(t!==undefined){console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead.");return this.addVectors(e,t)}this.x+=e.x;this.y+=e.y;this.z+=e.z;return this},addScalar:function(e){this.x+=e;this.y+=e;this.z+=e;return this},addVectors:function(e,t){this.x=e.x+t.x;this.y=e.y+t.y;this.z=e.z+t.z;return this},addScaledVector:function(e,t){this.x+=e.x*t;this.y+=e.y*t;this.z+=e.z*t;return this},sub:function(e,t){if(t!==undefined){console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead.");return this.subVectors(e,t)}this.x-=e.x;this.y-=e.y;this.z-=e.z;return this},subScalar:function(e){this.x-=e;this.y-=e;this.z-=e;return this},subVectors:function(e,t){this.x=e.x-t.x;this.y=e.y-t.y;this.z=e.z-t.z;return this},multiply:function(e,t){if(t!==undefined){console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead.");return this.multiplyVectors(e,t)}this.x*=e.x;this.y*=e.y;this.z*=e.z;return this},multiplyScalar:function(e){this.x*=e;this.y*=e;this.z*=e;return this},multiplyVectors:function(e,t){this.x=e.x*t.x;this.y=e.y*t.y;this.z=e.z*t.z;return this},applyEuler:function(){var e=new Et;return function t(i){if(!(i&&i.isEuler)){console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order.")}return this.applyQuaternion(e.setFromEuler(i))}}(),applyAxisAngle:function(){var e=new Et;return function t(i,n){return this.applyQuaternion(e.setFromAxisAngle(i,n))}}(),applyMatrix3:function(e){var t=this.x,i=this.y,n=this.z;var r=e.elements;this.x=r[0]*t+r[3]*i+r[6]*n;this.y=r[1]*t+r[4]*i+r[7]*n;this.z=r[2]*t+r[5]*i+r[8]*n;return this},applyMatrix4:function(e){var t=this.x,i=this.y,n=this.z;var r=e.elements;var a=1/(r[3]*t+r[7]*i+r[11]*n+r[15]);this.x=(r[0]*t+r[4]*i+r[8]*n+r[12])*a;this.y=(r[1]*t+r[5]*i+r[9]*n+r[13])*a;this.z=(r[2]*t+r[6]*i+r[10]*n+r[14])*a;return this},applyQuaternion:function(e){var t=this.x,i=this.y,n=this.z;var r=e.x,a=e.y,s=e.z,o=e.w;var l=o*t+a*n-s*i;var u=o*i+s*t-r*n;var c=o*n+r*i-a*t;var h=-r*t-a*i-s*n;this.x=l*o+h*-r+u*-s-c*-a;this.y=u*o+h*-a+c*-r-l*-s;this.z=c*o+h*-s+l*-a-u*-r;return this},project:function(){var e=new Pt;return function t(i){e.multiplyMatrices(i.projectionMatrix,e.getInverse(i.matrixWorld));return this.applyMatrix4(e)}}(),unproject:function(){var e=new Pt;return function t(i){e.multiplyMatrices(i.matrixWorld,e.getInverse(i.projectionMatrix));return this.applyMatrix4(e)}}(),transformDirection:function(e){var t=this.x,i=this.y,n=this.z;var r=e.elements;this.x=r[0]*t+r[4]*i+r[8]*n;this.y=r[1]*t+r[5]*i+r[9]*n;this.z=r[2]*t+r[6]*i+r[10]*n;return this.normalize()},divide:function(e){this.x/=e.x;this.y/=e.y;this.z/=e.z;return this},divideScalar:function(e){return this.multiplyScalar(1/e)},min:function(e){this.x=Math.min(this.x,e.x);this.y=Math.min(this.y,e.y);this.z=Math.min(this.z,e.z);return this},max:function(e){this.x=Math.max(this.x,e.x);this.y=Math.max(this.y,e.y);this.z=Math.max(this.z,e.z);return this},clamp:function(e,t){this.x=Math.max(e.x,Math.min(t.x,this.x));this.y=Math.max(e.y,Math.min(t.y,this.y));this.z=Math.max(e.z,Math.min(t.z,this.z));return this},clampScalar:function(){var e=new At;var t=new At;return function i(n,r){e.set(n,n,n);t.set(r,r,r);return this.clamp(e,t)}}(),clampLength:function(e,t){var i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))},floor:function(){this.x=Math.floor(this.x);this.y=Math.floor(this.y);this.z=Math.floor(this.z);return this},ceil:function(){this.x=Math.ceil(this.x);this.y=Math.ceil(this.y);this.z=Math.ceil(this.z);return this},round:function(){this.x=Math.round(this.x);this.y=Math.round(this.y);this.z=Math.round(this.z);return this},roundToZero:function(){this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x);this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y);this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z);return this},negate:function(){this.x=-this.x;this.y=-this.y;this.z=-this.z;return this},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(e){return this.normalize().multiplyScalar(e)},lerp:function(e,t){this.x+=(e.x-this.x)*t;this.y+=(e.y-this.y)*t;this.z+=(e.z-this.z)*t;return this},lerpVectors:function(e,t,i){return this.subVectors(t,e).multiplyScalar(i).add(e)},cross:function(e,t){if(t!==undefined){console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead.");return this.crossVectors(e,t)}var i=this.x,n=this.y,r=this.z;this.x=n*e.z-r*e.y;this.y=r*e.x-i*e.z;this.z=i*e.y-n*e.x;return this},crossVectors:function(e,t){var i=e.x,n=e.y,r=e.z;var a=t.x,s=t.y,o=t.z;this.x=n*o-r*s;this.y=r*a-i*o;this.z=i*s-n*a;return this},projectOnVector:function(e){var t=e.dot(this)/e.lengthSq();return this.copy(e).multiplyScalar(t)},projectOnPlane:function(){var e=new At;return function t(i){e.copy(this).projectOnVector(i);return this.sub(e)}}(),reflect:function(){var e=new At;return function t(i){return this.sub(e.copy(i).multiplyScalar(2*this.dot(i)))}}(),angleTo:function(e){var t=this.dot(e)/Math.sqrt(this.lengthSq()*e.lengthSq());return Math.acos(bt.clamp(t,-1,1))},distanceTo:function(e){return Math.sqrt(this.distanceToSquared(e))},distanceToSquared:function(e){var t=this.x-e.x,i=this.y-e.y,n=this.z-e.z;return t*t+i*i+n*n},distanceToManhattan:function(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)},setFromSpherical:function(e){var t=Math.sin(e.phi)*e.radius;this.x=t*Math.sin(e.theta);this.y=Math.cos(e.phi)*e.radius;this.z=t*Math.cos(e.theta);return this},setFromCylindrical:function(e){this.x=e.radius*Math.sin(e.theta);this.y=e.y;this.z=e.radius*Math.cos(e.theta);return this},setFromMatrixPosition:function(e){var t=e.elements;this.x=t[12];this.y=t[13];this.z=t[14];return this},setFromMatrixScale:function(e){var t=this.setFromMatrixColumn(e,0).length();var i=this.setFromMatrixColumn(e,1).length();var n=this.setFromMatrixColumn(e,2).length();this.x=t;this.y=i;this.z=n;return this},setFromMatrixColumn:function(e,t){return this.fromArray(e.elements,t*4)},equals:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z},fromArray:function(e,t){if(t===undefined)t=0;this.x=e[t];this.y=e[t+1];this.z=e[t+2];return this},toArray:function(e,t){if(e===undefined)e=[];if(t===undefined)t=0;e[t]=this.x;e[t+1]=this.y;e[t+2]=this.z;return e},fromBufferAttribute:function(e,t,i){if(i!==undefined){console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute().")}this.x=e.getX(t);this.y=e.getY(t);this.z=e.getZ(t);return this}});function Pt(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];if(arguments.length>0){console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}}Object.assign(Pt.prototype,{isMatrix4:true,set:function(e,t,i,n,r,a,s,o,l,u,c,h,f,d,p,m){var v=this.elements;v[0]=e;v[4]=t;v[8]=i;v[12]=n;v[1]=r;v[5]=a;v[9]=s;v[13]=o;v[2]=l;v[6]=u;v[10]=c;v[14]=h;v[3]=f;v[7]=d;v[11]=p;v[15]=m;return this},identity:function(){this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1);return this},clone:function(){return(new Pt).fromArray(this.elements)},copy:function(e){var t=this.elements;var i=e.elements;t[0]=i[0];t[1]=i[1];t[2]=i[2];t[3]=i[3];t[4]=i[4];t[5]=i[5];t[6]=i[6];t[7]=i[7];t[8]=i[8];t[9]=i[9];t[10]=i[10];t[11]=i[11];t[12]=i[12];t[13]=i[13];t[14]=i[14];t[15]=i[15];return this},copyPosition:function(e){var t=this.elements,i=e.elements;t[12]=i[12];t[13]=i[13];t[14]=i[14];return this},extractBasis:function(e,t,i){e.setFromMatrixColumn(this,0);t.setFromMatrixColumn(this,1);i.setFromMatrixColumn(this,2);return this},makeBasis:function(e,t,i){this.set(e.x,t.x,i.x,0,e.y,t.y,i.y,0,e.z,t.z,i.z,0,0,0,0,1);return this},extractRotation:function(){var e=new At;return function t(i){var n=this.elements;var r=i.elements;var a=1/e.setFromMatrixColumn(i,0).length();var s=1/e.setFromMatrixColumn(i,1).length();var o=1/e.setFromMatrixColumn(i,2).length();n[0]=r[0]*a;n[1]=r[1]*a;n[2]=r[2]*a;n[4]=r[4]*s;n[5]=r[5]*s;n[6]=r[6]*s;n[8]=r[8]*o;n[9]=r[9]*o;n[10]=r[10]*o;return this}}(),makeRotationFromEuler:function(e){if(!(e&&e.isEuler)){console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.")}var t=this.elements;var i=e.x,n=e.y,r=e.z;var a=Math.cos(i),s=Math.sin(i);var o=Math.cos(n),l=Math.sin(n);var u=Math.cos(r),c=Math.sin(r);if(e.order==="XYZ"){var h=a*u,f=a*c,d=s*u,p=s*c;t[0]=o*u;t[4]=-o*c;t[8]=l;t[1]=f+d*l;t[5]=h-p*l;t[9]=-s*o;t[2]=p-h*l;t[6]=d+f*l;t[10]=a*o}else if(e.order==="YXZ"){var m=o*u,v=o*c,g=l*u,y=l*c;t[0]=m+y*s;t[4]=g*s-v;t[8]=a*l;t[1]=a*c;t[5]=a*u;t[9]=-s;t[2]=v*s-g;t[6]=y+m*s;t[10]=a*o}else if(e.order==="ZXY"){var m=o*u,v=o*c,g=l*u,y=l*c;t[0]=m-y*s;t[4]=-a*c;t[8]=g+v*s;t[1]=v+g*s;t[5]=a*u;t[9]=y-m*s;t[2]=-a*l;t[6]=s;t[10]=a*o}else if(e.order==="ZYX"){var h=a*u,f=a*c,d=s*u,p=s*c;t[0]=o*u;t[4]=d*l-f;t[8]=h*l+p;t[1]=o*c;t[5]=p*l+h;t[9]=f*l-d;t[2]=-l;t[6]=s*o;t[10]=a*o}else if(e.order==="YZX"){var b=a*o,x=a*l,_=s*o,w=s*l;t[0]=o*u;t[4]=w-b*c;t[8]=_*c+x;t[1]=c;t[5]=a*u;t[9]=-s*u;t[2]=-l*u;t[6]=x*c+_;t[10]=b-w*c}else if(e.order==="XZY"){var b=a*o,x=a*l,_=s*o,w=s*l;t[0]=o*u;t[4]=-c;t[8]=l*u;t[1]=b*c+w;t[5]=a*u;t[9]=x*c-_;t[2]=_*c-x;t[6]=s*u;t[10]=w*c+b}t[3]=0;t[7]=0;t[11]=0;t[12]=0;t[13]=0;t[14]=0;t[15]=1;return this},makeRotationFromQuaternion:function(e){var t=this.elements;var i=e._x,n=e._y,r=e._z,a=e._w;var s=i+i,o=n+n,l=r+r;var u=i*s,c=i*o,h=i*l;var f=n*o,d=n*l,p=r*l;var m=a*s,v=a*o,g=a*l;t[0]=1-(f+p);t[4]=c-g;t[8]=h+v;t[1]=c+g;t[5]=1-(u+p);t[9]=d-m;t[2]=h-v;t[6]=d+m;t[10]=1-(u+f);t[3]=0;t[7]=0;t[11]=0;t[12]=0;t[13]=0;t[14]=0;t[15]=1;return this},lookAt:function(){var e=new At;var t=new At;var i=new At;return function n(r,a,s){var o=this.elements;i.subVectors(r,a);if(i.lengthSq()===0){i.z=1}i.normalize();e.crossVectors(s,i);if(e.lengthSq()===0){if(Math.abs(s.z)===1){i.x+=1e-4}else{i.z+=1e-4}i.normalize();e.crossVectors(s,i)}e.normalize();t.crossVectors(i,e);o[0]=e.x;o[4]=t.x;o[8]=i.x;o[1]=e.y;o[5]=t.y;o[9]=i.y;o[2]=e.z;o[6]=t.z;o[10]=i.z;return this}}(),multiply:function(e,t){if(t!==undefined){console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead.");return this.multiplyMatrices(e,t)}return this.multiplyMatrices(this,e)},premultiply:function(e){return this.multiplyMatrices(e,this)},multiplyMatrices:function(e,t){var i=e.elements;var n=t.elements;var r=this.elements;var a=i[0],s=i[4],o=i[8],l=i[12];var u=i[1],c=i[5],h=i[9],f=i[13];var d=i[2],p=i[6],m=i[10],v=i[14];var g=i[3],y=i[7],b=i[11],x=i[15];var _=n[0],w=n[4],T=n[8],M=n[12];var S=n[1],E=n[5],A=n[9],P=n[13];var L=n[2],R=n[6],C=n[10],O=n[14];var D=n[3],I=n[7],k=n[11],U=n[15];r[0]=a*_+s*S+o*L+l*D;r[4]=a*w+s*E+o*R+l*I;r[8]=a*T+s*A+o*C+l*k;r[12]=a*M+s*P+o*O+l*U;r[1]=u*_+c*S+h*L+f*D;r[5]=u*w+c*E+h*R+f*I;r[9]=u*T+c*A+h*C+f*k;r[13]=u*M+c*P+h*O+f*U;r[2]=d*_+p*S+m*L+v*D;r[6]=d*w+p*E+m*R+v*I;r[10]=d*T+p*A+m*C+v*k;r[14]=d*M+p*P+m*O+v*U;r[3]=g*_+y*S+b*L+x*D;r[7]=g*w+y*E+b*R+x*I;r[11]=g*T+y*A+b*C+x*k;r[15]=g*M+y*P+b*O+x*U;return this},multiplyScalar:function(e){var t=this.elements;t[0]*=e;t[4]*=e;t[8]*=e;t[12]*=e;t[1]*=e
;t[5]*=e;t[9]*=e;t[13]*=e;t[2]*=e;t[6]*=e;t[10]*=e;t[14]*=e;t[3]*=e;t[7]*=e;t[11]*=e;t[15]*=e;return this},applyToBufferAttribute:function(){var e=new At;return function t(i){for(var n=0,r=i.count;n<r;n++){e.x=i.getX(n);e.y=i.getY(n);e.z=i.getZ(n);e.applyMatrix4(this);i.setXYZ(n,e.x,e.y,e.z)}return i}}(),determinant:function(){var e=this.elements;var t=e[0],i=e[4],n=e[8],r=e[12];var a=e[1],s=e[5],o=e[9],l=e[13];var u=e[2],c=e[6],h=e[10],f=e[14];var d=e[3],p=e[7],m=e[11],v=e[15];return d*(+r*o*c-n*l*c-r*s*h+i*l*h+n*s*f-i*o*f)+p*(+t*o*f-t*l*h+r*a*h-n*a*f+n*l*u-r*o*u)+m*(+t*l*c-t*s*f-r*a*c+i*a*f+r*s*u-i*l*u)+v*(-n*s*u-t*o*c+t*s*h+n*a*c-i*a*h+i*o*u)},transpose:function(){var e=this.elements;var t;t=e[1];e[1]=e[4];e[4]=t;t=e[2];e[2]=e[8];e[8]=t;t=e[6];e[6]=e[9];e[9]=t;t=e[3];e[3]=e[12];e[12]=t;t=e[7];e[7]=e[13];e[13]=t;t=e[11];e[11]=e[14];e[14]=t;return this},setPosition:function(e){var t=this.elements;t[12]=e.x;t[13]=e.y;t[14]=e.z;return this},getInverse:function(e,t){var i=this.elements,n=e.elements,r=n[0],a=n[1],s=n[2],o=n[3],l=n[4],u=n[5],c=n[6],h=n[7],f=n[8],d=n[9],p=n[10],m=n[11],v=n[12],g=n[13],y=n[14],b=n[15],x=d*y*h-g*p*h+g*c*m-u*y*m-d*c*b+u*p*b,_=v*p*h-f*y*h-v*c*m+l*y*m+f*c*b-l*p*b,w=f*g*h-v*d*h+v*u*m-l*g*m-f*u*b+l*d*b,T=v*d*c-f*g*c-v*u*p+l*g*p+f*u*y-l*d*y;var M=r*x+a*_+s*w+o*T;if(M===0){var S="THREE.Matrix4: .getInverse() can't invert matrix, determinant is 0";if(t===true){throw new Error(S)}else{console.warn(S)}return this.identity()}var E=1/M;i[0]=x*E;i[1]=(g*p*o-d*y*o-g*s*m+a*y*m+d*s*b-a*p*b)*E;i[2]=(u*y*o-g*c*o+g*s*h-a*y*h-u*s*b+a*c*b)*E;i[3]=(d*c*o-u*p*o-d*s*h+a*p*h+u*s*m-a*c*m)*E;i[4]=_*E;i[5]=(f*y*o-v*p*o+v*s*m-r*y*m-f*s*b+r*p*b)*E;i[6]=(v*c*o-l*y*o-v*s*h+r*y*h+l*s*b-r*c*b)*E;i[7]=(l*p*o-f*c*o+f*s*h-r*p*h-l*s*m+r*c*m)*E;i[8]=w*E;i[9]=(v*d*o-f*g*o-v*a*m+r*g*m+f*a*b-r*d*b)*E;i[10]=(l*g*o-v*u*o+v*a*h-r*g*h-l*a*b+r*u*b)*E;i[11]=(f*u*o-l*d*o-f*a*h+r*d*h+l*a*m-r*u*m)*E;i[12]=T*E;i[13]=(f*g*s-v*d*s+v*a*p-r*g*p-f*a*y+r*d*y)*E;i[14]=(v*u*s-l*g*s-v*a*c+r*g*c+l*a*y-r*u*y)*E;i[15]=(l*d*s-f*u*s+f*a*c-r*d*c-l*a*p+r*u*p)*E;return this},scale:function(e){var t=this.elements;var i=e.x,n=e.y,r=e.z;t[0]*=i;t[4]*=n;t[8]*=r;t[1]*=i;t[5]*=n;t[9]*=r;t[2]*=i;t[6]*=n;t[10]*=r;t[3]*=i;t[7]*=n;t[11]*=r;return this},getMaxScaleOnAxis:function(){var e=this.elements;var t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2];var i=e[4]*e[4]+e[5]*e[5]+e[6]*e[6];var n=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,i,n))},makeTranslation:function(e,t,i){this.set(1,0,0,e,0,1,0,t,0,0,1,i,0,0,0,1);return this},makeRotationX:function(e){var t=Math.cos(e),i=Math.sin(e);this.set(1,0,0,0,0,t,-i,0,0,i,t,0,0,0,0,1);return this},makeRotationY:function(e){var t=Math.cos(e),i=Math.sin(e);this.set(t,0,i,0,0,1,0,0,-i,0,t,0,0,0,0,1);return this},makeRotationZ:function(e){var t=Math.cos(e),i=Math.sin(e);this.set(t,-i,0,0,i,t,0,0,0,0,1,0,0,0,0,1);return this},makeRotationAxis:function(e,t){var i=Math.cos(t);var n=Math.sin(t);var r=1-i;var a=e.x,s=e.y,o=e.z;var l=r*a,u=r*s;this.set(l*a+i,l*s-n*o,l*o+n*s,0,l*s+n*o,u*s+i,u*o-n*a,0,l*o-n*s,u*o+n*a,r*o*o+i,0,0,0,0,1);return this},makeScale:function(e,t,i){this.set(e,0,0,0,0,t,0,0,0,0,i,0,0,0,0,1);return this},makeShear:function(e,t,i){this.set(1,t,i,0,e,1,i,0,e,t,1,0,0,0,0,1);return this},compose:function(e,t,i){this.makeRotationFromQuaternion(t);this.scale(i);this.setPosition(e);return this},decompose:function(){var e=new At;var t=new Pt;return function i(n,r,a){var s=this.elements;var o=e.set(s[0],s[1],s[2]).length();var l=e.set(s[4],s[5],s[6]).length();var u=e.set(s[8],s[9],s[10]).length();var c=this.determinant();if(c<0)o=-o;n.x=s[12];n.y=s[13];n.z=s[14];t.copy(this);var h=1/o;var f=1/l;var d=1/u;t.elements[0]*=h;t.elements[1]*=h;t.elements[2]*=h;t.elements[4]*=f;t.elements[5]*=f;t.elements[6]*=f;t.elements[8]*=d;t.elements[9]*=d;t.elements[10]*=d;r.setFromRotationMatrix(t);a.x=o;a.y=l;a.z=u;return this}}(),makePerspective:function(e,t,i,n,r,a){if(a===undefined){console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.")}var s=this.elements;var o=2*r/(t-e);var l=2*r/(i-n);var u=(t+e)/(t-e);var c=(i+n)/(i-n);var h=-(a+r)/(a-r);var f=-2*a*r/(a-r);s[0]=o;s[4]=0;s[8]=u;s[12]=0;s[1]=0;s[5]=l;s[9]=c;s[13]=0;s[2]=0;s[6]=0;s[10]=h;s[14]=f;s[3]=0;s[7]=0;s[11]=-1;s[15]=0;return this},makeOrthographic:function(e,t,i,n,r,a){var s=this.elements;var o=1/(t-e);var l=1/(i-n);var u=1/(a-r);var c=(t+e)*o;var h=(i+n)*l;var f=(a+r)*u;s[0]=2*o;s[4]=0;s[8]=0;s[12]=-c;s[1]=0;s[5]=2*l;s[9]=0;s[13]=-h;s[2]=0;s[6]=0;s[10]=-2*u;s[14]=-f;s[3]=0;s[7]=0;s[11]=0;s[15]=1;return this},equals:function(e){var t=this.elements;var i=e.elements;for(var n=0;n<16;n++){if(t[n]!==i[n])return false}return true},fromArray:function(e,t){if(t===undefined)t=0;for(var i=0;i<16;i++){this.elements[i]=e[i+t]}return this},toArray:function(e,t){if(e===undefined)e=[];if(t===undefined)t=0;var i=this.elements;e[t]=i[0];e[t+1]=i[1];e[t+2]=i[2];e[t+3]=i[3];e[t+4]=i[4];e[t+5]=i[5];e[t+6]=i[6];e[t+7]=i[7];e[t+8]=i[8];e[t+9]=i[9];e[t+10]=i[10];e[t+11]=i[11];e[t+12]=i[12];e[t+13]=i[13];e[t+14]=i[14];e[t+15]=i[15];return e}});function Lt(e,t,i,n,r,a,s,o,l,u,c,h){wt.call(this,null,a,s,o,l,u,n,r,c,h);this.image={data:e,width:t,height:i};this.magFilter=l!==undefined?l:ve;this.minFilter=u!==undefined?u:ve;this.generateMipmaps=false;this.flipY=false;this.unpackAlignment=1}Lt.prototype=Object.create(wt.prototype);Lt.prototype.constructor=Lt;Lt.prototype.isDataTexture=true;function Rt(e,t,i,n,r,a,s,o,l,u){e=e!==undefined?e:[];t=t!==undefined?t:se;wt.call(this,e,t,i,n,r,a,s,o,l,u);this.flipY=false}Rt.prototype=Object.create(wt.prototype);Rt.prototype.constructor=Rt;Rt.prototype.isCubeTexture=true;Object.defineProperty(Rt.prototype,"images",{get:function(){return this.image},set:function(e){this.image=e}});var Ct=new wt;var Ot=new Rt;function Dt(){this.seq=[];this.map={}}var It=[];var kt=[];var Ut=new Float32Array(16);var Ft=new Float32Array(9);function Nt(e,t,i){var n=e[0];if(n<=0||n>0)return e;var r=t*i,a=It[r];if(a===undefined){a=new Float32Array(r);It[r]=a}if(t!==0){n.toArray(a,0);for(var s=1,o=0;s!==t;++s){o+=i;e[s].toArray(a,o)}}return a}function Bt(e,t){var i=kt[t];if(i===undefined){i=new Int32Array(t);kt[t]=i}for(var n=0;n!==t;++n)i[n]=e.allocTextureUnit();return i}function zt(e,t){e.uniform1f(this.addr,t)}function jt(e,t){e.uniform1i(this.addr,t)}function Gt(e,t){if(t.x===undefined)e.uniform2fv(this.addr,t);else e.uniform2f(this.addr,t.x,t.y)}function Ht(e,t){if(t.x!==undefined)e.uniform3f(this.addr,t.x,t.y,t.z);else if(t.r!==undefined)e.uniform3f(this.addr,t.r,t.g,t.b);else e.uniform3fv(this.addr,t)}function Vt(e,t){if(t.x===undefined)e.uniform4fv(this.addr,t);else e.uniform4f(this.addr,t.x,t.y,t.z,t.w)}function Wt(e,t){e.uniformMatrix2fv(this.addr,false,t.elements||t)}function Xt(e,t){if(t.elements===undefined){e.uniformMatrix3fv(this.addr,false,t)}else{Ft.set(t.elements);e.uniformMatrix3fv(this.addr,false,Ft)}}function Yt(e,t){if(t.elements===undefined){e.uniformMatrix4fv(this.addr,false,t)}else{Ut.set(t.elements);e.uniformMatrix4fv(this.addr,false,Ut)}}function qt(e,t,i){var n=i.allocTextureUnit();e.uniform1i(this.addr,n);i.setTexture2D(t||Ct,n)}function Zt(e,t,i){var n=i.allocTextureUnit();e.uniform1i(this.addr,n);i.setTextureCube(t||Ot,n)}function Jt(e,t){e.uniform2iv(this.addr,t)}function Kt(e,t){e.uniform3iv(this.addr,t)}function Qt(e,t){e.uniform4iv(this.addr,t)}function $t(e){switch(e){case 5126:return zt;case 35664:return Gt;case 35665:return Ht;case 35666:return Vt;case 35674:return Wt;case 35675:return Xt;case 35676:return Yt;case 35678:case 36198:return qt;case 35680:return Zt;case 5124:case 35670:return jt;case 35667:case 35671:return Jt;case 35668:case 35672:return Kt;case 35669:case 35673:return Qt}}function ei(e,t){e.uniform1fv(this.addr,t)}function ti(e,t){e.uniform1iv(this.addr,t)}function ii(e,t){e.uniform2fv(this.addr,Nt(t,this.size,2))}function ni(e,t){e.uniform3fv(this.addr,Nt(t,this.size,3))}function ri(e,t){e.uniform4fv(this.addr,Nt(t,this.size,4))}function ai(e,t){e.uniformMatrix2fv(this.addr,false,Nt(t,this.size,4))}function si(e,t){e.uniformMatrix3fv(this.addr,false,Nt(t,this.size,9))}function oi(e,t){e.uniformMatrix4fv(this.addr,false,Nt(t,this.size,16))}function li(e,t,i){var n=t.length,r=Bt(i,n);e.uniform1iv(this.addr,r);for(var a=0;a!==n;++a){i.setTexture2D(t[a]||Ct,r[a])}}function ui(e,t,i){var n=t.length,r=Bt(i,n);e.uniform1iv(this.addr,r);for(var a=0;a!==n;++a){i.setTextureCube(t[a]||Ot,r[a])}}function ci(e){switch(e){case 5126:return ei;case 35664:return ii;case 35665:return ni;case 35666:return ri;case 35674:return ai;case 35675:return si;case 35676:return oi;case 35678:return li;case 35680:return ui;case 5124:case 35670:return ti;case 35667:case 35671:return Jt;case 35668:case 35672:return Kt;case 35669:case 35673:return Qt}}function hi(e,t,i){this.id=e;this.addr=i;this.setValue=$t(t.type)}function fi(e,t,i){this.id=e;this.addr=i;this.size=t.size;this.setValue=ci(t.type)}function di(e){this.id=e;Dt.call(this)}di.prototype.setValue=function(e,t){var i=this.seq;for(var n=0,r=i.length;n!==r;++n){var a=i[n];a.setValue(e,t[a.id])}};var pi=/([\w\d_]+)(\])?(\[|\.)?/g;function mi(e,t){e.seq.push(t);e.map[t.id]=t}function vi(e,t,i){var n=e.name,r=n.length;pi.lastIndex=0;for(;;){var a=pi.exec(n),s=pi.lastIndex,o=a[1],l=a[2]==="]",u=a[3];if(l)o=o|0;if(u===undefined||u==="["&&s+2===r){mi(i,u===undefined?new hi(o,e,t):new fi(o,e,t));break}else{var c=i.map,h=c[o];if(h===undefined){h=new di(o);mi(i,h)}i=h}}}function gi(e,t,i){Dt.call(this);this.renderer=i;var n=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(var r=0;r<n;++r){var a=e.getActiveUniform(t,r),s=a.name,o=e.getUniformLocation(t,s);vi(a,o,this)}}gi.prototype.setValue=function(e,t,i){var n=this.map[t];if(n!==undefined)n.setValue(e,i,this.renderer)};gi.prototype.setOptional=function(e,t,i){var n=t[i];if(n!==undefined)this.setValue(e,i,n)};gi.upload=function(e,t,i,n){for(var r=0,a=t.length;r!==a;++r){var s=t[r],o=i[s.id];if(o.needsUpdate!==false){s.setValue(e,o.value,n)}}};gi.seqWithValue=function(e,t){var i=[];for(var n=0,r=e.length;n!==r;++n){var a=e[n];if(a.id in t)i.push(a)}return i};var yi={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function bi(e,t,i){if(t===undefined&&i===undefined){return this.set(e)}return this.setRGB(e,t,i)}Object.assign(bi.prototype,{isColor:true,r:1,g:1,b:1,set:function(e){if(e&&e.isColor){this.copy(e)}else if(typeof e==="number"){this.setHex(e)}else if(typeof e==="string"){this.setStyle(e)}return this},setScalar:function(e){this.r=e;this.g=e;this.b=e;return this},setHex:function(e){e=Math.floor(e);this.r=(e>>16&255)/255;this.g=(e>>8&255)/255;this.b=(e&255)/255;return this},setRGB:function(e,t,i){this.r=e;this.g=t;this.b=i;return this},setHSL:function(){function e(e,t,i){if(i<0)i+=1;if(i>1)i-=1;if(i<1/6)return e+(t-e)*6*i;if(i<1/2)return t;if(i<2/3)return e+(t-e)*6*(2/3-i);return e}return function t(i,n,r){i=bt.euclideanModulo(i,1);n=bt.clamp(n,0,1);r=bt.clamp(r,0,1);if(n===0){this.r=this.g=this.b=r}else{var a=r<=.5?r*(1+n):r+n-r*n;var s=2*r-a;this.r=e(s,a,i+1/3);this.g=e(s,a,i);this.b=e(s,a,i-1/3)}return this}}(),setStyle:function(e){function t(t){if(t===undefined)return;if(parseFloat(t)<1){console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}}var i;if(i=/^((?:rgb|hsl)a?)\(\s*([^\)]*)\)/.exec(e)){var n;var r=i[1];var a=i[2];switch(r){case"rgb":case"rgba":if(n=/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(a)){this.r=Math.min(255,parseInt(n[1],10))/255;this.g=Math.min(255,parseInt(n[2],10))/255;this.b=Math.min(255,parseInt(n[3],10))/255;t(n[5]);return this}if(n=/^(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(a)){this.r=Math.min(100,parseInt(n[1],10))/100;this.g=Math.min(100,parseInt(n[2],10))/100;this.b=Math.min(100,parseInt(n[3],10))/100;t(n[5]);return this}break;case"hsl":case"hsla":if(n=/^([0-9]*\.?[0-9]+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(a)){var s=parseFloat(n[1])/360;var o=parseInt(n[2],10)/100;var l=parseInt(n[3],10)/100;t(n[5]);return this.setHSL(s,o,l)}break}}else if(i=/^\#([A-Fa-f0-9]+)$/.exec(e)){var u=i[1];var c=u.length;if(c===3){this.r=parseInt(u.charAt(0)+u.charAt(0),16)/255;this.g=parseInt(u.charAt(1)+u.charAt(1),16)/255;this.b=parseInt(u.charAt(2)+u.charAt(2),16)/255;return this}else if(c===6){this.r=parseInt(u.charAt(0)+u.charAt(1),16)/255;this.g=parseInt(u.charAt(2)+u.charAt(3),16)/255;this.b=parseInt(u.charAt(4)+u.charAt(5),16)/255;return this}}if(e&&e.length>0){var u=yi[e];if(u!==undefined){this.setHex(u)}else{console.warn("THREE.Color: Unknown color "+e)}}return this},clone:function(){return new this.constructor(this.r,this.g,this.b)},copy:function(e){this.r=e.r;this.g=e.g;this.b=e.b;return this},copyGammaToLinear:function(e,t){if(t===undefined)t=2;this.r=Math.pow(e.r,t);this.g=Math.pow(e.g,t);this.b=Math.pow(e.b,t);return this},copyLinearToGamma:function(e,t){if(t===undefined)t=2;var i=t>0?1/t:1;this.r=Math.pow(e.r,i);this.g=Math.pow(e.g,i);this.b=Math.pow(e.b,i);return this},convertGammaToLinear:function(){var e=this.r,t=this.g,i=this.b;this.r=e*e;this.g=t*t;this.b=i*i;return this},convertLinearToGamma:function(){this.r=Math.sqrt(this.r);this.g=Math.sqrt(this.g);this.b=Math.sqrt(this.b);return this},getHex:function(){return this.r*255<<16^this.g*255<<8^this.b*255<<0},getHexString:function(){return("000000"+this.getHex().toString(16)).slice(-6)},getHSL:function(e){var t=e||{h:0,s:0,l:0};var i=this.r,n=this.g,r=this.b;var a=Math.max(i,n,r);var s=Math.min(i,n,r);var o,l;var u=(s+a)/2;if(s===a){o=0;l=0}else{var c=a-s;l=u<=.5?c/(a+s):c/(2-a-s);switch(a){case i:o=(n-r)/c+(n<r?6:0);break;case n:o=(r-i)/c+2;break;case r:o=(i-n)/c+4;break}o/=6}t.h=o;t.s=l;t.l=u;return t},getStyle:function(){return"rgb("+(this.r*255|0)+","+(this.g*255|0)+","+(this.b*255|0)+")"},offsetHSL:function(e,t,i){var n=this.getHSL();n.h+=e;n.s+=t;n.l+=i;this.setHSL(n.h,n.s,n.l);return this},add:function(e){this.r+=e.r;this.g+=e.g;this.b+=e.b;return this},addColors:function(e,t){this.r=e.r+t.r;this.g=e.g+t.g;this.b=e.b+t.b;return this},addScalar:function(e){this.r+=e;this.g+=e;this.b+=e;return this},sub:function(e){this.r=Math.max(0,this.r-e.r);this.g=Math.max(0,this.g-e.g);this.b=Math.max(0,this.b-e.b);return this},multiply:function(e){this.r*=e.r;this.g*=e.g;this.b*=e.b;return this},multiplyScalar:function(e){this.r*=e;this.g*=e;this.b*=e;return this},lerp:function(e,t){this.r+=(e.r-this.r)*t;this.g+=(e.g-this.g)*t;this.b+=(e.b-this.b)*t;return this},equals:function(e){return e.r===this.r&&e.g===this.g&&e.b===this.b},fromArray:function(e,t){if(t===undefined)t=0;this.r=e[t];this.g=e[t+1];this.b=e[t+2];return this},toArray:function(e,t){if(e===undefined)e=[];if(t===undefined)t=0;e[t]=this.r;e[t+1]=this.g;e[t+2]=this.b;return e},toJSON:function(){return this.getHex()}});var xi={common:{diffuse:{value:new bi(15658734)},opacity:{value:1},map:{value:null},offsetRepeat:{value:new Tt(0,0,1,1)},alphaMap:{value:null}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new xt(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new bi(16777215)}},lights:{ambientLightColor:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}}},points:{diffuse:{value:new bi(15658734)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},offsetRepeat:{value:new Tt(0,0,1,1)}}};var _i={merge:function(e){var t={};for(var i=0;i<e.length;i++){var n=this.clone(e[i]);for(var r in n){t[r]=n[r]}}return t},clone:function(e){var t={};for(var i in e){t[i]={};for(var n in e[i]){var r=e[i][n];if(r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture)){t[i][n]=r.clone()}else if(Array.isArray(r)){t[i][n]=r.slice()}else{t[i][n]=r}}}return t}};var wi="#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif\n";var Ti="#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif\n";var Mi="#ifdef ALPHATEST\n\tif ( diffuseColor.a < ALPHATEST ) discard;\n#endif\n";var Si="#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( PHYSICAL )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );\n\t#endif\n#endif\n";var Ei="#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif";var Ai="\nvec3 transformed = vec3( position );\n";var Pi="\nvec3 objectNormal = vec3( normal );\n";var Li="float punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\tif( decayExponent > 0.0 ) {\n#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\tfloat maxDistanceCutoffFactor = pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\treturn distanceFalloff * maxDistanceCutoffFactor;\n#else\n\t\treturn pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\n#endif\n\t}\n\treturn 1.0;\n}\nvec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );\n\treturn ( 1.0 - specularColor ) * fresnel + specularColor;\n}\nfloat G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\tfloat gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\treturn 1.0 / ( gl * gv );\n}\nfloat G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNL = saturate( dot( geometry.normal, incidentLight.direction ) );\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( G * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE  = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS  = 0.5 / LUT_SIZE;\n\tfloat theta = acos( dot( N, V ) );\n\tvec2 uv = vec2(\n\t\tsqrt( saturate( roughness ) ),\n\t\tsaturate( theta / ( 0.5 * PI ) ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.86267 + (0.49788 + 0.01436 * y ) * y;\n\tfloat b = 3.45068 + (4.18814 + y) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = (x > 0.0) ? v : 0.5 * inversesqrt( 1.0 - x * x ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transpose( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tvec3 result = vec3( LTC_ClippedSphereFormFactor( vectorFormFactor ) );\n\treturn result;\n}\nvec3 BRDF_Specular_GGX_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 AB = vec2( -1.04, 1.04 ) * a004 + r.zw;\n\treturn specularColor * AB.x + AB.y;\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\nfloat GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {\n\treturn ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );\n}\nfloat BlinnExponentToGGXRoughness( const in float blinnExponent ) {\n\treturn sqrt( 2.0 / ( blinnExponent + 2.0 ) );\n}\n";var Ri="#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\n\t\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\n\t\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 );\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif\n";var Ci="#if NUM_CLIPPING_PLANES > 0\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; ++ i ) {\n\t\tvec4 plane = clippingPlanes[ i ];\n\t\tif ( dot( vViewPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t\t\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; ++ i ) {\n\t\t\tvec4 plane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vViewPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\tif ( clipped ) discard;\n\t\n\t#endif\n#endif\n";var Oi="#if NUM_CLIPPING_PLANES > 0\n\t#if ! defined( PHYSICAL ) && ! defined( PHONG )\n\t\tvarying vec3 vViewPosition;\n\t#endif\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif\n";var Di="#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG )\n\tvarying vec3 vViewPosition;\n#endif\n";var Ii="#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n";var ki="#ifdef USE_COLOR\n\tdiffuseColor.rgb *= vColor;\n#endif";var Ui="#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif\n";var Fi="#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif";var Ni="#ifdef USE_COLOR\n\tvColor.xyz = color.xyz;\n#endif";var Bi="#define PI 3.14159265359\n#define PI2 6.28318530718\n#define PI_HALF 1.5707963267949\n#define RECIPROCAL_PI 0.31830988618\n#define RECIPROCAL_PI2 0.15915494\n#define LOG2 1.442695\n#define EPSILON 1e-6\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#define whiteCompliment(a) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract(sin(sn) * c);\n}\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\tfloat distance = dot( planeNormal, point - pointOnPlane );\n\treturn - distance * planeNormal + point;\n}\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn sign( dot( point - pointOnPlane, planeNormal ) );\n}\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\n}\nmat3 transpose( const in mat3 v ) {\n\tmat3 tmp;\n\ttmp[0] = vec3(v[0].x, v[1].x, v[2].x);\n\ttmp[1] = vec3(v[0].y, v[1].y, v[2].y);\n\ttmp[2] = vec3(v[0].z, v[1].z, v[2].z);\n\treturn tmp;\n}\n"
;var zi="#ifdef ENVMAP_TYPE_CUBE_UV\n#define cubeUV_textureSize (1024.0)\nint getFaceFromDirection(vec3 direction) {\n\tvec3 absDirection = abs(direction);\n\tint face = -1;\n\tif( absDirection.x > absDirection.z ) {\n\t\tif(absDirection.x > absDirection.y )\n\t\t\tface = direction.x > 0.0 ? 0 : 3;\n\t\telse\n\t\t\tface = direction.y > 0.0 ? 1 : 4;\n\t}\n\telse {\n\t\tif(absDirection.z > absDirection.y )\n\t\t\tface = direction.z > 0.0 ? 2 : 5;\n\t\telse\n\t\t\tface = direction.y > 0.0 ? 1 : 4;\n\t}\n\treturn face;\n}\n#define cubeUV_maxLods1  (log2(cubeUV_textureSize*0.25) - 1.0)\n#define cubeUV_rangeClamp (exp2((6.0 - 1.0) * 2.0))\nvec2 MipLevelInfo( vec3 vec, float roughnessLevel, float roughness ) {\n\tfloat scale = exp2(cubeUV_maxLods1 - roughnessLevel);\n\tfloat dxRoughness = dFdx(roughness);\n\tfloat dyRoughness = dFdy(roughness);\n\tvec3 dx = dFdx( vec * scale * dxRoughness );\n\tvec3 dy = dFdy( vec * scale * dyRoughness );\n\tfloat d = max( dot( dx, dx ), dot( dy, dy ) );\n\td = clamp(d, 1.0, cubeUV_rangeClamp);\n\tfloat mipLevel = 0.5 * log2(d);\n\treturn vec2(floor(mipLevel), fract(mipLevel));\n}\n#define cubeUV_maxLods2 (log2(cubeUV_textureSize*0.25) - 2.0)\n#define cubeUV_rcpTextureSize (1.0 / cubeUV_textureSize)\nvec2 getCubeUV(vec3 direction, float roughnessLevel, float mipLevel) {\n\tmipLevel = roughnessLevel > cubeUV_maxLods2 - 3.0 ? 0.0 : mipLevel;\n\tfloat a = 16.0 * cubeUV_rcpTextureSize;\n\tvec2 exp2_packed = exp2( vec2( roughnessLevel, mipLevel ) );\n\tvec2 rcp_exp2_packed = vec2( 1.0 ) / exp2_packed;\n\tfloat powScale = exp2_packed.x * exp2_packed.y;\n\tfloat scale = rcp_exp2_packed.x * rcp_exp2_packed.y * 0.25;\n\tfloat mipOffset = 0.75*(1.0 - rcp_exp2_packed.y) * rcp_exp2_packed.x;\n\tbool bRes = mipLevel == 0.0;\n\tscale =  bRes && (scale < a) ? a : scale;\n\tvec3 r;\n\tvec2 offset;\n\tint face = getFaceFromDirection(direction);\n\tfloat rcpPowScale = 1.0 / powScale;\n\tif( face == 0) {\n\t\tr = vec3(direction.x, -direction.z, direction.y);\n\t\toffset = vec2(0.0+mipOffset,0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 1) {\n\t\tr = vec3(direction.y, direction.x, direction.z);\n\t\toffset = vec2(scale+mipOffset, 0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 2) {\n\t\tr = vec3(direction.z, direction.x, direction.y);\n\t\toffset = vec2(2.0*scale+mipOffset, 0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 3) {\n\t\tr = vec3(direction.x, direction.z, direction.y);\n\t\toffset = vec2(0.0+mipOffset,0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\telse if( face == 4) {\n\t\tr = vec3(direction.y, direction.x, -direction.z);\n\t\toffset = vec2(scale+mipOffset, 0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\telse {\n\t\tr = vec3(direction.z, -direction.x, direction.y);\n\t\toffset = vec2(2.0*scale+mipOffset, 0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\tr = normalize(r);\n\tfloat texelOffset = 0.5 * cubeUV_rcpTextureSize;\n\tvec2 s = ( r.yz / abs( r.x ) + vec2( 1.0 ) ) * 0.5;\n\tvec2 base = offset + vec2( texelOffset );\n\treturn base + s * ( scale - 2.0 * texelOffset );\n}\n#define cubeUV_maxLods3 (log2(cubeUV_textureSize*0.25) - 3.0)\nvec4 textureCubeUV(vec3 reflectedDirection, float roughness ) {\n\tfloat roughnessVal = roughness* cubeUV_maxLods3;\n\tfloat r1 = floor(roughnessVal);\n\tfloat r2 = r1 + 1.0;\n\tfloat t = fract(roughnessVal);\n\tvec2 mipInfo = MipLevelInfo(reflectedDirection, r1, roughness);\n\tfloat s = mipInfo.y;\n\tfloat level0 = mipInfo.x;\n\tfloat level1 = level0 + 1.0;\n\tlevel1 = level1 > 5.0 ? 5.0 : level1;\n\tlevel0 += min( floor( s + 0.5 ), 5.0 );\n\tvec2 uv_10 = getCubeUV(reflectedDirection, r1, level0);\n\tvec4 color10 = envMapTexelToLinear(texture2D(envMap, uv_10));\n\tvec2 uv_20 = getCubeUV(reflectedDirection, r2, level0);\n\tvec4 color20 = envMapTexelToLinear(texture2D(envMap, uv_20));\n\tvec4 result = mix(color10, color20, t);\n\treturn vec4(result.rgb, 1.0);\n}\n#endif\n";var ji="vec3 transformedNormal = normalMatrix * objectNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n";var Gi="#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif\n";var Hi="#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, uv ).x * displacementScale + displacementBias );\n#endif\n";var Vi="#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\temissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif\n";var Wi="#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif\n";var Xi="  gl_FragColor = linearToOutputTexel( gl_FragColor );\n";var Yi="\nvec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.xyz, vec3( gammaFactor ) ), value.w );\n}\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.xyz, vec3( 1.0 / gammaFactor ) ), value.w );\n}\nvec4 sRGBToLinear( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.w );\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.w );\n}\nvec4 RGBEToLinear( in vec4 value ) {\n\treturn vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\n}\nvec4 LinearToRGBE( in vec4 value ) {\n\tfloat maxComponent = max( max( value.r, value.g ), value.b );\n\tfloat fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\n\treturn vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\n}\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.xyz * value.w * maxRange, 1.0 );\n}\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.x, max( value.g, value.b ) );\n\tfloat M      = clamp( maxRGB / maxRange, 0.0, 1.0 );\n\tM            = ceil( M * 255.0 ) / 255.0;\n\treturn vec4( value.rgb / ( M * maxRange ), M );\n}\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\n}\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.x, max( value.g, value.b ) );\n\tfloat D      = max( maxRange / maxRGB, 1.0 );\n\tD            = min( floor( D ) / 255.0, 1.0 );\n\treturn vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\n}\nconst mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );\nvec4 LinearToLogLuv( in vec4 value )  {\n\tvec3 Xp_Y_XYZp = value.rgb * cLogLuvM;\n\tXp_Y_XYZp = max(Xp_Y_XYZp, vec3(1e-6, 1e-6, 1e-6));\n\tvec4 vResult;\n\tvResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;\n\tfloat Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;\n\tvResult.w = fract(Le);\n\tvResult.z = (Le - (floor(vResult.w*255.0))/255.0)/255.0;\n\treturn vResult;\n}\nconst mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );\nvec4 LogLuvToLinear( in vec4 value ) {\n\tfloat Le = value.z * 255.0 + value.w;\n\tvec3 Xp_Y_XYZp;\n\tXp_Y_XYZp.y = exp2((Le - 127.0) / 2.0);\n\tXp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;\n\tXp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;\n\tvec3 vRGB = Xp_Y_XYZp.rgb * cLogLuvInverseM;\n\treturn vec4( max(vRGB, 0.0), 1.0 );\n}\n";var qi="#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvec3 cameraToVertex = normalize( vWorldPosition - cameraPosition );\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\tvec2 sampleUV;\n\t\treflectVec = normalize( reflectVec );\n\t\tsampleUV.y = asin( clamp( reflectVec.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\t\tsampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\tvec4 envColor = texture2D( envMap, sampleUV );\n\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\treflectVec = normalize( reflectVec );\n\t\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0, 0.0, 1.0 ) );\n\t\tvec4 envColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5 );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\tenvColor = envMapTexelToLinear( envColor );\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif\n";var Zi="#if defined( USE_ENVMAP ) || defined( PHYSICAL )\n\tuniform float reflectivity;\n\tuniform float envMapIntensity;\n#endif\n#ifdef USE_ENVMAP\n\t#if ! defined( PHYSICAL ) && ( defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) )\n\t\tvarying vec3 vWorldPosition;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\tuniform float flipEnvMap;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( PHYSICAL )\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif\n";var Ji="#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif\n";var Ki="#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif\n";var Qi="\n#ifdef USE_FOG\nfogDepth = -mvPosition.z;\n#endif";var $i="#ifdef USE_FOG\n  varying float fogDepth;\n#endif\n";var en="#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = whiteCompliment( exp2( - fogDensity * fogDensity * fogDepth * fogDepth * LOG2 ) );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, fogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif\n";var tn="#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float fogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif\n";var nn="#ifdef TOON\n\tuniform sampler2D gradientMap;\n\tvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\t\tfloat dotNL = dot( normal, lightDirection );\n\t\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t\t#ifdef USE_GRADIENTMAP\n\t\t\treturn texture2D( gradientMap, coord ).rgb;\n\t\t#else\n\t\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\t\t#endif\n\t}\n#endif\n";var rn="#ifdef USE_LIGHTMAP\n\treflectedLight.indirectDiffuse += PI * texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n#endif\n";var an="#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif";var sn="vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\n#if NUM_POINT_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_DIR_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvLightFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );\n\t\t#endif\n\t}\n#endif\n";var on="uniform vec3 ambientLightColor;\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treturn irradiance;\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tdirectLight.color = directionalLight.color;\n\t\tdirectLight.direction = directionalLight.direction;\n\t\tdirectLight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t\tfloat shadowCameraNear;\n\t\tfloat shadowCameraFar;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tdirectLight.color = pointLight.color;\n\t\tdirectLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );\n\t\tdirectLight.visible = ( directLight.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight  ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tfloat angleCos = dot( directLight.direction, spotLight.direction );\n\t\tif ( angleCos > spotLight.coneCos ) {\n\t\t\tfloat spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\t\tdirectLight.color = spotLight.color;\n\t\t\tdirectLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tdirectLight.visible = true;\n\t\t} else {\n\t\t\tdirectLight.color = vec3( 0.0 );\n\t\t\tdirectLight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltcMat;\tuniform sampler2D ltcMag;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {\n\t\tfloat dotNL = dot( geometry.normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tirradiance *= PI;\n\t\t#endif\n\t\treturn irradiance;\n\t}\n#endif\n#if defined( USE_ENVMAP ) && defined( PHYSICAL )\n\tvec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {\n\t\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\tvec4 envMapColor = textureCubeUV( queryVec, 1.0 );\n\t\t#else\n\t\t\tvec4 envMapColor = vec4( 0.0 );\n\t\t#endif\n\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t}\n\tfloat getSpecularMIPLevel( const in float blinnShininessExponent, const in int maxMIPLevel ) {\n\t\tfloat maxMIPLevelScalar = float( maxMIPLevel );\n\t\tfloat desiredMIPLevel = maxMIPLevelScalar - 0.79248 - 0.5 * log2( pow2( blinnShininessExponent ) + 1.0 );\n\t\treturn clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );\n\t}\n\tvec3 getLightProbeIndirectRadiance( const in GeometricContext geometry, const in float blinnShininessExponent, const in int maxMIPLevel ) {\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( -geometry.viewDir, geometry.normal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( -geometry.viewDir, geometry.normal, refractionRatio );\n\t\t#endif\n\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\tfloat specularMIPLevel = getSpecularMIPLevel( blinnShininessExponent, maxMIPLevel );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\tvec4 envMapColor = textureCubeUV(queryReflectVec, BlinnExponentToGGXRoughness(blinnShininessExponent));\n\t\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\t\tvec2 sampleUV;\n\t\t\tsampleUV.y = asin( clamp( reflectVec.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\t\t\tsampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, sampleUV, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, sampleUV, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\t\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0,0.0,1.0 ) );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#endif\n\t\treturn envMapColor.rgb * envMapIntensity;\n\t}\n#endif\n";var ln="BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;\n";var un="varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\nstruct BlinnPhongMaterial {\n\tvec3\tdiffuseColor;\n\tvec3\tspecularColor;\n\tfloat\tspecularShininess;\n\tfloat\tspecularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\t#ifdef TOON\n\t\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\t#else\n\t\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\t\tvec3 irradiance = dotNL * directLight.color;\n\t#endif\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)\n";var cn="PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nmaterial.specularRoughness = clamp( roughnessFactor, 0.04, 1.0 );\n#ifdef STANDARD\n\tmaterial.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.clearCoat = saturate( clearCoat );\tmaterial.clearCoatRoughness = clamp( clearCoatRoughness, 0.04, 1.0 );\n#endif\n";var hn="struct PhysicalMaterial {\n\tvec3\tdiffuseColor;\n\tfloat\tspecularRoughness;\n\tvec3\tspecularColor;\n\t#ifndef STANDARD\n\t\tfloat clearCoat;\n\t\tfloat clearCoatRoughness;\n\t#endif\n};\n#define MAXIMUM_SPECULAR_COEFFICIENT 0.16\n#define DEFAULT_SPECULAR_COEFFICIENT 0.04\nfloat clearCoatDHRApprox( const in float roughness, const in float dotNL ) {\n\treturn DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.specularRoughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos - halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos + halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos + halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos - halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tfloat norm = texture2D( ltcMag, uv ).a;\n\t\tvec4 t = texture2D( ltcMat, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3(   1,   0, t.y ),\n\t\t\tvec3(   0, t.z,   0 ),\n\t\t\tvec3( t.w,   0, t.x )\n\t\t);\n\t\treflectedLight.directSpecular += lightColor * material.specularColor * norm * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\t#ifndef STANDARD\n\t\tfloat clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );\n\t#else\n\t\tfloat clearCoatDHR = 0.0;\n\t#endif\n\treflectedLight.directSpecular += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry, material.specularColor, material.specularRoughness );\n\treflectedLight.directDiffuse += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\t#ifndef STANDARD\n\t\treflectedLight.directSpecular += irradiance * material.clearCoat * BRDF_Specular_GGX( directLight, geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );\n\t#endif\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 clearCoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t#ifndef STANDARD\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\tfloat dotNL = dotNV;\n\t\tfloat clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );\n\t#else\n\t\tfloat clearCoatDHR = 0.0;\n\t#endif\n\treflectedLight.indirectSpecular += ( 1.0 - clearCoatDHR ) * radiance * BRDF_Specular_GGX_Environment( geometry, material.specularColor, material.specularRoughness );\n\t#ifndef STANDARD\n\t\treflectedLight.indirectSpecular += clearCoatRadiance * material.clearCoat * BRDF_Specular_GGX_Environment( geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );\n\t#endif\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\n#define Material_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.specularRoughness )\n#define Material_ClearCoat_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.clearCoatRoughness )\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}\n"
;var fn="\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = normalize( vViewPosition );\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointDirectLightIrradiance( pointLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( pointLight.shadow, directLight.visible ) ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotDirectLightIrradiance( spotLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( spotLight.shadow, directLight.visible ) ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( directionalLight.shadow, directLight.visible ) ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\t#ifdef USE_LIGHTMAP\n\t\tvec3 lightMapIrradiance = texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tlightMapIrradiance *= PI;\n\t\t#endif\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t}\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( PHYSICAL ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tirradiance += getLightProbeIndirectIrradiance( geometry, 8 );\n\t#endif\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tvec3 radiance = getLightProbeIndirectRadiance( geometry, Material_BlinnShininessExponent( material ), 8 );\n\t#ifndef STANDARD\n\t\tvec3 clearCoatRadiance = getLightProbeIndirectRadiance( geometry, Material_ClearCoat_BlinnShininessExponent( material ), 8 );\n\t#else\n\t\tvec3 clearCoatRadiance = vec3( 0.0 );\n\t#endif\n\tRE_IndirectSpecular( radiance, clearCoatRadiance, geometry, material, reflectedLight );\n#endif\n";var dn="#if defined(USE_LOGDEPTHBUF) && defined(USE_LOGDEPTHBUF_EXT)\n\tgl_FragDepthEXT = log2(vFragDepth) * logDepthBufFC * 0.5;\n#endif";var pn="#ifdef USE_LOGDEPTHBUF\n\tuniform float logDepthBufFC;\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t#endif\n#endif\n";var mn="#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t#endif\n\tuniform float logDepthBufFC;\n#endif";var vn="#ifdef USE_LOGDEPTHBUF\n\tgl_Position.z = log2(max( EPSILON, gl_Position.w + 1.0 )) * logDepthBufFC;\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t#else\n\t\tgl_Position.z = (gl_Position.z - 1.0) * gl_Position.w;\n\t#endif\n#endif\n";var gn="#ifdef USE_MAP\n\tvec4 texelColor = texture2D( map, vUv );\n\ttexelColor = mapTexelToLinear( texelColor );\n\tdiffuseColor *= texelColor;\n#endif\n";var yn="#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n";var bn="#ifdef USE_MAP\n\tvec4 mapTexel = texture2D( map, vec2( gl_PointCoord.x, 1.0 - gl_PointCoord.y ) * offsetRepeat.zw + offsetRepeat.xy );\n\tdiffuseColor *= mapTexelToLinear( mapTexel );\n#endif\n";var xn="#ifdef USE_MAP\n\tuniform vec4 offsetRepeat;\n\tuniform sampler2D map;\n#endif\n";var _n="float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif\n";var wn="#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif";var Tn="#ifdef USE_MORPHNORMALS\n\tobjectNormal += ( morphNormal0 - normal ) * morphTargetInfluences[ 0 ];\n\tobjectNormal += ( morphNormal1 - normal ) * morphTargetInfluences[ 1 ];\n\tobjectNormal += ( morphNormal2 - normal ) * morphTargetInfluences[ 2 ];\n\tobjectNormal += ( morphNormal3 - normal ) * morphTargetInfluences[ 3 ];\n#endif\n";var Mn="#ifdef USE_MORPHTARGETS\n\t#ifndef USE_MORPHNORMALS\n\tuniform float morphTargetInfluences[ 8 ];\n\t#else\n\tuniform float morphTargetInfluences[ 4 ];\n\t#endif\n#endif";var Sn="#ifdef USE_MORPHTARGETS\n\ttransformed += ( morphTarget0 - position ) * morphTargetInfluences[ 0 ];\n\ttransformed += ( morphTarget1 - position ) * morphTargetInfluences[ 1 ];\n\ttransformed += ( morphTarget2 - position ) * morphTargetInfluences[ 2 ];\n\ttransformed += ( morphTarget3 - position ) * morphTargetInfluences[ 3 ];\n\t#ifndef USE_MORPHNORMALS\n\ttransformed += ( morphTarget4 - position ) * morphTargetInfluences[ 4 ];\n\ttransformed += ( morphTarget5 - position ) * morphTargetInfluences[ 5 ];\n\ttransformed += ( morphTarget6 - position ) * morphTargetInfluences[ 6 ];\n\ttransformed += ( morphTarget7 - position ) * morphTargetInfluences[ 7 ];\n\t#endif\n#endif\n";var En="#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t#endif\n#endif\n#ifdef USE_NORMALMAP\n\tnormal = perturbNormal2Arb( -vViewPosition, normal );\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\n#endif\n";var An="#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm ) {\n\t\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\n\t\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tvec3 S = normalize( q0 * st1.t - q1 * st0.t );\n\t\tvec3 T = normalize( -q0 * st1.s + q1 * st0.s );\n\t\tvec3 N = normalize( surf_norm );\n\t\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t\tmapN.xy = normalScale * mapN.xy;\n\t\tmat3 tsn = mat3( S, T, N );\n\t\treturn normalize( tsn * mapN );\n\t}\n#endif\n";var Pn="vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 1.0 - 2.0 * rgb.xyz;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256.,  256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn (( near + viewZ ) * far ) / (( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}\n";var Ln="#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif\n";var Rn="vec4 mvPosition = modelViewMatrix * vec4( transformed, 1.0 );\ngl_Position = projectionMatrix * mvPosition;\n";var Cn="#if defined( DITHERING )\n  gl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif\n";var On="#if defined( DITHERING )\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif\n";var Dn="float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif\n";var In="#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif";var kn="#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHTS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHTS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHTS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tfloat texture2DShadowLerp( sampler2D depths, vec2 size, vec2 uv, float compare ) {\n\t\tconst vec2 offset = vec2( 0.0, 1.0 );\n\t\tvec2 texelSize = vec2( 1.0 ) / size;\n\t\tvec2 centroidUV = floor( uv * size + 0.5 ) / size;\n\t\tfloat lb = texture2DCompare( depths, centroidUV + texelSize * offset.xx, compare );\n\t\tfloat lt = texture2DCompare( depths, centroidUV + texelSize * offset.xy, compare );\n\t\tfloat rb = texture2DCompare( depths, centroidUV + texelSize * offset.yx, compare );\n\t\tfloat rt = texture2DCompare( depths, centroidUV + texelSize * offset.yy, compare );\n\t\tvec2 f = fract( uv * size + 0.5 );\n\t\tfloat a = mix( lb, lt, f.y );\n\t\tfloat b = mix( rb, rt, f.y );\n\t\tfloat c = mix( a, b, f.x );\n\t\treturn c;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tshadow = (\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif\n";var Un="#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHTS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHTS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHTS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\n\t#endif\n#endif\n";var Fn="#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n#endif\n";var Nn="float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\tDirectionalLight directionalLight;\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tshadow *= bool( directionalLight.shadow ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\tSpotLight spotLight;\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tshadow *= bool( spotLight.shadow ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\tPointLight pointLight;\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tshadow *= bool( pointLight.shadow ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#endif\n\t#endif\n\treturn shadow;\n}\n";var Bn="#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif";var zn="#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\t#ifdef BONE_TEXTURE\n\t\tuniform sampler2D boneTexture;\n\t\tuniform int boneTextureSize;\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\t\ty = dy * ( y + 0.5 );\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\t\treturn bone;\n\t\t}\n\t#else\n\t\tuniform mat4 boneMatrices[ MAX_BONES ];\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tmat4 bone = boneMatrices[ int(i) ];\n\t\t\treturn bone;\n\t\t}\n\t#endif\n#endif\n";var jn="#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif\n";var Gn="#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix  = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n#endif\n";var Hn="float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif";var Vn="#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif";var Wn="#if defined( TONE_MAPPING )\n  gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif\n";var Xn="#define saturate(a) clamp( a, 0.0, 1.0 )\nuniform float toneMappingExposure;\nuniform float toneMappingWhitePoint;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\n#define Uncharted2Helper( x ) max( ( ( x * ( 0.15 * x + 0.10 * 0.50 ) + 0.20 * 0.02 ) / ( x * ( 0.15 * x + 0.50 ) + 0.20 * 0.30 ) ) - 0.02 / 0.30, vec3( 0.0 ) )\nvec3 Uncharted2ToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( Uncharted2Helper( color ) / Uncharted2Helper( vec3( toneMappingWhitePoint ) ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\n";var Yn="#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvarying vec2 vUv;\n#endif";var qn="#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvarying vec2 vUv;\n\tuniform vec4 offsetRepeat;\n#endif\n";var Zn="#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvUv = uv * offsetRepeat.zw + offsetRepeat.xy;\n#endif";var Jn="#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif";var Kn="#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n#endif";var Qn="#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = uv2;\n#endif";var $n="#if defined( USE_ENVMAP ) || defined( PHONG ) || defined( PHYSICAL ) || defined( LAMBERT ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP )\n\tvec4 worldPosition = modelMatrix * vec4( transformed, 1.0 );\n#endif\n";var er="uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldPosition;\nvoid main() {\n\tgl_FragColor = textureCube( tCube, vec3( tFlip * vWorldPosition.x, vWorldPosition.yz ) );\n\tgl_FragColor.a *= opacity;\n}\n";var tr="varying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tvWorldPosition = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}\n";var ir="#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( gl_FragCoord.z ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( gl_FragCoord.z );\n\t#endif\n}\n";var nr="#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n}\n";var rr="#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}\n";var ar="#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}\n";var sr="uniform sampler2D tEquirect;\nvarying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldPosition );\n\tvec2 sampleUV;\n\tsampleUV.y = asin( clamp( direction.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\tsampleUV.x = atan( direction.z, direction.x ) * RECIPROCAL_PI2 + 0.5;\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n}\n";var or="varying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tvWorldPosition = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}\n";var lr="uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n";var ur="uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\tvLineDistance = scale * lineDistance;\n\tvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}\n";var cr="uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\treflectedLight.indirectDiffuse += texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n";var hr="#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_ENVMAP\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}\n"
;var fr="uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <bsdfs>\n#include <lights_pars>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\treflectedLight.indirectDiffuse = getAmbientLightIrradiance( ambientLightColor );\n\t#include <lightmap_fragment>\n\treflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}\n";var dr="#define LAMBERT\nvarying vec3 vLightFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n";var pr="#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_template>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}\n";var mr="#define PHONG\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n";var vr="#define PHYSICAL\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifndef STANDARD\n\tuniform float clearCoat;\n\tuniform float clearCoatRoughness;\n#endif\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <lights_pars>\n#include <lights_physical_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_template>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}\n";var gr="#define PHYSICAL\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n";var yr="#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\nvoid main() {\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n}\n";var br="#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}\n";var xr="uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n";var _r="uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#ifdef USE_SIZEATTENUATION\n\t\tgl_PointSize = size * ( scale / - mvPosition.z );\n\t#else\n\t\tgl_PointSize = size;\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n";var wr="uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <bsdfs>\n#include <lights_pars>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n}\n";var Tr="#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n}\n";var Mr={alphamap_fragment:wi,alphamap_pars_fragment:Ti,alphatest_fragment:Mi,aomap_fragment:Si,aomap_pars_fragment:Ei,begin_vertex:Ai,beginnormal_vertex:Pi,bsdfs:Li,bumpmap_pars_fragment:Ri,clipping_planes_fragment:Ci,clipping_planes_pars_fragment:Oi,clipping_planes_pars_vertex:Di,clipping_planes_vertex:Ii,color_fragment:ki,color_pars_fragment:Ui,color_pars_vertex:Fi,color_vertex:Ni,common:Bi,cube_uv_reflection_fragment:zi,defaultnormal_vertex:ji,displacementmap_pars_vertex:Gi,displacementmap_vertex:Hi,emissivemap_fragment:Vi,emissivemap_pars_fragment:Wi,encodings_fragment:Xi,encodings_pars_fragment:Yi,envmap_fragment:qi,envmap_pars_fragment:Zi,envmap_pars_vertex:Ji,envmap_vertex:Ki,fog_vertex:Qi,fog_pars_vertex:$i,fog_fragment:en,fog_pars_fragment:tn,gradientmap_pars_fragment:nn,lightmap_fragment:rn,lightmap_pars_fragment:an,lights_lambert_vertex:sn,lights_pars:on,lights_phong_fragment:ln,lights_phong_pars_fragment:un,lights_physical_fragment:cn,lights_physical_pars_fragment:hn,lights_template:fn,logdepthbuf_fragment:dn,logdepthbuf_pars_fragment:pn,logdepthbuf_pars_vertex:mn,logdepthbuf_vertex:vn,map_fragment:gn,map_pars_fragment:yn,map_particle_fragment:bn,map_particle_pars_fragment:xn,metalnessmap_fragment:_n,metalnessmap_pars_fragment:wn,morphnormal_vertex:Tn,morphtarget_pars_vertex:Mn,morphtarget_vertex:Sn,normal_fragment:En,normalmap_pars_fragment:An,packing:Pn,premultiplied_alpha_fragment:Ln,project_vertex:Rn,dithering_fragment:Cn,dithering_pars_fragment:On,roughnessmap_fragment:Dn,roughnessmap_pars_fragment:In,shadowmap_pars_fragment:kn,shadowmap_pars_vertex:Un,shadowmap_vertex:Fn,shadowmask_pars_fragment:Nn,skinbase_vertex:Bn,skinning_pars_vertex:zn,skinning_vertex:jn,skinnormal_vertex:Gn,specularmap_fragment:Hn,specularmap_pars_fragment:Vn,tonemapping_fragment:Wn,tonemapping_pars_fragment:Xn,uv_pars_fragment:Yn,uv_pars_vertex:qn,uv_vertex:Zn,uv2_pars_fragment:Jn,uv2_pars_vertex:Kn,uv2_vertex:Qn,worldpos_vertex:$n,cube_frag:er,cube_vert:tr,depth_frag:ir,depth_vert:nr,distanceRGBA_frag:rr,distanceRGBA_vert:ar,equirect_frag:sr,equirect_vert:or,linedashed_frag:lr,linedashed_vert:ur,meshbasic_frag:cr,meshbasic_vert:hr,meshlambert_frag:fr,meshlambert_vert:dr,meshphong_frag:pr,meshphong_vert:mr,meshphysical_frag:vr,meshphysical_vert:gr,normal_frag:yr,normal_vert:br,points_frag:xr,points_vert:_r,shadow_frag:wr,shadow_vert:Tr};var Sr={basic:{uniforms:_i.merge([xi.common,xi.specularmap,xi.envmap,xi.aomap,xi.lightmap,xi.fog]),vertexShader:Mr.meshbasic_vert,fragmentShader:Mr.meshbasic_frag},lambert:{uniforms:_i.merge([xi.common,xi.specularmap,xi.envmap,xi.aomap,xi.lightmap,xi.emissivemap,xi.fog,xi.lights,{emissive:{value:new bi(0)}}]),vertexShader:Mr.meshlambert_vert,fragmentShader:Mr.meshlambert_frag},phong:{uniforms:_i.merge([xi.common,xi.specularmap,xi.envmap,xi.aomap,xi.lightmap,xi.emissivemap,xi.bumpmap,xi.normalmap,xi.displacementmap,xi.gradientmap,xi.fog,xi.lights,{emissive:{value:new bi(0)},specular:{value:new bi(1118481)},shininess:{value:30}}]),vertexShader:Mr.meshphong_vert,fragmentShader:Mr.meshphong_frag},standard:{uniforms:_i.merge([xi.common,xi.envmap,xi.aomap,xi.lightmap,xi.emissivemap,xi.bumpmap,xi.normalmap,xi.displacementmap,xi.roughnessmap,xi.metalnessmap,xi.fog,xi.lights,{emissive:{value:new bi(0)},roughness:{value:.5},metalness:{value:.5},envMapIntensity:{value:1}}]),vertexShader:Mr.meshphysical_vert,fragmentShader:Mr.meshphysical_frag},points:{uniforms:_i.merge([xi.points,xi.fog]),vertexShader:Mr.points_vert,fragmentShader:Mr.points_frag},dashed:{uniforms:_i.merge([xi.common,xi.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Mr.linedashed_vert,fragmentShader:Mr.linedashed_frag},depth:{uniforms:_i.merge([xi.common,xi.displacementmap]),vertexShader:Mr.depth_vert,fragmentShader:Mr.depth_frag},normal:{uniforms:_i.merge([xi.common,xi.bumpmap,xi.normalmap,xi.displacementmap,{opacity:{value:1}}]),vertexShader:Mr.normal_vert,fragmentShader:Mr.normal_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:Mr.cube_vert,fragmentShader:Mr.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Mr.equirect_vert,fragmentShader:Mr.equirect_frag},distanceRGBA:{uniforms:_i.merge([xi.common,xi.displacementmap,{referencePosition:{value:new At},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Mr.distanceRGBA_vert,fragmentShader:Mr.distanceRGBA_frag},shadow:{uniforms:_i.merge([xi.lights,{color:{value:new bi(0)},opacity:{value:1}}]),vertexShader:Mr.shadow_vert,fragmentShader:Mr.shadow_frag}};Sr.physical={uniforms:_i.merge([Sr.standard.uniforms,{clearCoat:{value:0},clearCoatRoughness:{value:0}}]),vertexShader:Mr.meshphysical_vert,fragmentShader:Mr.meshphysical_frag};function Er(e,t){this.min=e!==undefined?e:new xt(+Infinity,+Infinity);this.max=t!==undefined?t:new xt(-Infinity,-Infinity)}Object.assign(Er.prototype,{set:function(e,t){this.min.copy(e);this.max.copy(t);return this},setFromPoints:function(e){this.makeEmpty();for(var t=0,i=e.length;t<i;t++){this.expandByPoint(e[t])}return this},setFromCenterAndSize:function(){var e=new xt;return function t(i,n){var r=e.copy(n).multiplyScalar(.5);this.min.copy(i).sub(r);this.max.copy(i).add(r);return this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(e){this.min.copy(e.min);this.max.copy(e.max);return this},makeEmpty:function(){this.min.x=this.min.y=+Infinity;this.max.x=this.max.y=-Infinity;return this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y},getCenter:function(e){var t=e||new xt;return this.isEmpty()?t.set(0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(e){var t=e||new xt;return this.isEmpty()?t.set(0,0):t.subVectors(this.max,this.min)},expandByPoint:function(e){this.min.min(e);this.max.max(e);return this},expandByVector:function(e){this.min.sub(e);this.max.add(e);return this},expandByScalar:function(e){this.min.addScalar(-e);this.max.addScalar(e);return this},containsPoint:function(e){return e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y?false:true},containsBox:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y},getParameter:function(e,t){var i=t||new xt;return i.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))},intersectsBox:function(e){return e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y?false:true},clampPoint:function(e,t){var i=t||new xt;return i.copy(e).clamp(this.min,this.max)},distanceToPoint:function(){var e=new xt;return function t(i){var n=e.copy(i).clamp(this.min,this.max);return n.sub(i).length()}}(),intersect:function(e){this.min.max(e.min);this.max.min(e.max);return this},union:function(e){this.min.min(e.min);this.max.max(e.max);return this},translate:function(e){this.min.add(e);this.max.add(e);return this},equals:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)}});function Ar(e,t,i,n,r){var a,s;var o,l,u,c;var h,f;function d(){var e=new Float32Array([-1,-1,0,0,1,-1,1,0,1,1,1,1,-1,1,0,1]);var n=new Uint16Array([0,1,2,0,2,3]);a=t.createBuffer();s=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,a);t.bufferData(t.ARRAY_BUFFER,e,t.STATIC_DRAW);t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,s);t.bufferData(t.ELEMENT_ARRAY_BUFFER,n,t.STATIC_DRAW);h=t.createTexture();f=t.createTexture();i.bindTexture(t.TEXTURE_2D,h);t.texImage2D(t.TEXTURE_2D,0,t.RGB,16,16,0,t.RGB,t.UNSIGNED_BYTE,null);t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE);t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE);t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST);t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST);i.bindTexture(t.TEXTURE_2D,f);t.texImage2D(t.TEXTURE_2D,0,t.RGBA,16,16,0,t.RGBA,t.UNSIGNED_BYTE,null);t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE);t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE);t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST);t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST);o={vertexShader:["uniform lowp int renderType;","uniform vec3 screenPosition;","uniform vec2 scale;","uniform float rotation;","uniform sampler2D occlusionMap;","attribute vec2 position;","attribute vec2 uv;","varying vec2 vUV;","varying float vVisibility;","void main() {","vUV = uv;","vec2 pos = position;","if ( renderType == 2 ) {","vec4 visibility = texture2D( occlusionMap, vec2( 0.1, 0.1 ) );","visibility += texture2D( occlusionMap, vec2( 0.5, 0.1 ) );","visibility += texture2D( occlusionMap, vec2( 0.9, 0.1 ) );","visibility += texture2D( occlusionMap, vec2( 0.9, 0.5 ) );","visibility += texture2D( occlusionMap, vec2( 0.9, 0.9 ) );","visibility += texture2D( occlusionMap, vec2( 0.5, 0.9 ) );","visibility += texture2D( occlusionMap, vec2( 0.1, 0.9 ) );","visibility += texture2D( occlusionMap, vec2( 0.1, 0.5 ) );","visibility += texture2D( occlusionMap, vec2( 0.5, 0.5 ) );","vVisibility =        visibility.r / 9.0;","vVisibility *= 1.0 - visibility.g / 9.0;","vVisibility *=       visibility.b / 9.0;","vVisibility *= 1.0 - visibility.a / 9.0;","pos.x = cos( rotation ) * position.x - sin( rotation ) * position.y;","pos.y = sin( rotation ) * position.x + cos( rotation ) * position.y;","}","gl_Position = vec4( ( pos * scale + screenPosition.xy ).xy, screenPosition.z, 1.0 );","}"].join("\n"),fragmentShader:["uniform lowp int renderType;","uniform sampler2D map;","uniform float opacity;","uniform vec3 color;","varying vec2 vUV;","varying float vVisibility;","void main() {","if ( renderType == 0 ) {","gl_FragColor = vec4( 1.0, 0.0, 1.0, 0.0 );","} else if ( renderType == 1 ) {","gl_FragColor = texture2D( map, vUV );","} else {","vec4 texture = texture2D( map, vUV );","texture.a *= opacity * vVisibility;","gl_FragColor = texture;","gl_FragColor.rgb *= color;","}","}"].join("\n")};l=p(o);u={vertex:t.getAttribLocation(l,"position"),uv:t.getAttribLocation(l,"uv")};c={renderType:t.getUniformLocation(l,"renderType"),map:t.getUniformLocation(l,"map"),occlusionMap:t.getUniformLocation(l,"occlusionMap"),opacity:t.getUniformLocation(l,"opacity"),color:t.getUniformLocation(l,"color"),scale:t.getUniformLocation(l,"scale"),rotation:t.getUniformLocation(l,"rotation"),screenPosition:t.getUniformLocation(l,"screenPosition")}}this.render=function(e,r,o,p){if(e.length===0)return;var m=new At;var v=p.w/p.z,g=p.z*.5,y=p.w*.5;var b=16/p.w,x=new xt(b*v,b);var _=new At(1,1,0),w=new xt(1,1);var T=new Er;T.min.set(p.x,p.y);T.max.set(p.x+(p.z-16),p.y+(p.w-16));if(l===undefined){d()}i.useProgram(l);i.initAttributes();i.enableAttribute(u.vertex);i.enableAttribute(u.uv);i.disableUnusedAttributes();t.uniform1i(c.occlusionMap,0);t.uniform1i(c.map,1);t.bindBuffer(t.ARRAY_BUFFER,a);t.vertexAttribPointer(u.vertex,2,t.FLOAT,false,2*8,0);t.vertexAttribPointer(u.uv,2,t.FLOAT,false,2*8,8);t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,s);i.disable(t.CULL_FACE);i.buffers.depth.setMask(false);for(var M=0,S=e.length;M<S;M++){b=16/p.w;x.set(b*v,b);var E=e[M];m.set(E.matrixWorld.elements[12],E.matrixWorld.elements[13],E.matrixWorld.elements[14]);m.applyMatrix4(o.matrixWorldInverse);m.applyMatrix4(o.projectionMatrix);_.copy(m);w.x=p.x+_.x*g+g-8;w.y=p.y+_.y*y+y-8;if(T.containsPoint(w)===true){i.activeTexture(t.TEXTURE0);i.bindTexture(t.TEXTURE_2D,null);i.activeTexture(t.TEXTURE1);i.bindTexture(t.TEXTURE_2D,h);t.copyTexImage2D(t.TEXTURE_2D,0,t.RGB,w.x,w.y,16,16,0);t.uniform1i(c.renderType,0);t.uniform2f(c.scale,x.x,x.y);t.uniform3f(c.screenPosition,_.x,_.y,_.z);i.disable(t.BLEND);i.enable(t.DEPTH_TEST);t.drawElements(t.TRIANGLES,6,t.UNSIGNED_SHORT,0);i.activeTexture(t.TEXTURE0);i.bindTexture(t.TEXTURE_2D,f);t.copyTexImage2D(t.TEXTURE_2D,0,t.RGBA,w.x,w.y,16,16,0);t.uniform1i(c.renderType,1);i.disable(t.DEPTH_TEST);i.activeTexture(t.TEXTURE1);i.bindTexture(t.TEXTURE_2D,h);t.drawElements(t.TRIANGLES,6,t.UNSIGNED_SHORT,0);E.positionScreen.copy(_);if(E.customUpdateCallback){E.customUpdateCallback(E)}else{E.updateLensFlares()}t.uniform1i(c.renderType,2);i.enable(t.BLEND);for(var A=0,P=E.lensFlares.length;A<P;A++){var L=E.lensFlares[A];if(L.opacity>.001&&L.scale>.001){_.x=L.x;_.y=L.y;_.z=L.z;b=L.size*L.scale/p.w;x.x=b*v;x.y=b;t.uniform3f(c.screenPosition,_.x,_.y,_.z);t.uniform2f(c.scale,x.x,x.y);t.uniform1f(c.rotation,L.rotation);t.uniform1f(c.opacity,L.opacity);t.uniform3f(c.color,L.color.r,L.color.g,L.color.b);i.setBlending(L.blending,L.blendEquation,L.blendSrc,L.blendDst);n.setTexture2D(L.texture,1);t.drawElements(t.TRIANGLES,6,t.UNSIGNED_SHORT,0)}}}}i.enable(t.CULL_FACE);i.enable(t.DEPTH_TEST);i.buffers.depth.setMask(true);i.reset()};function p(e){var i=t.createProgram();var n=t.createShader(t.FRAGMENT_SHADER);var a=t.createShader(t.VERTEX_SHADER);var s="precision "+r.precision+" float;\n";t.shaderSource(n,s+e.fragmentShader);t.shaderSource(a,s+e.vertexShader);t.compileShader(n);t.compileShader(a);t.attachShader(i,n);t.attachShader(i,a);t.linkProgram(i);return i}}function Pr(e,t,i,n,r,a,s,o,l){wt.call(this,e,t,i,n,r,a,s,o,l);this.needsUpdate=true}Pr.prototype=Object.create(wt.prototype);Pr.prototype.constructor=Pr;function Lr(e,t,i,n,r){var a,s;var o,l,u;var c;var h=new At;var f=new Et;var d=new At;function p(){var e=new Float32Array([-.5,-.5,0,0,.5,-.5,1,0,.5,.5,1,1,-.5,.5,0,1]);var i=new Uint16Array([0,1,2,0,2,3]);a=t.createBuffer();s=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,a);t.bufferData(t.ARRAY_BUFFER,e,t.STATIC_DRAW);t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,s);t.bufferData(t.ELEMENT_ARRAY_BUFFER,i,t.STATIC_DRAW);o=m();l={position:t.getAttribLocation(o,"position"),uv:t.getAttribLocation(o,"uv")};u={uvOffset:t.getUniformLocation(o,"uvOffset"),uvScale:t.getUniformLocation(o,"uvScale"),rotation:t.getUniformLocation(o,"rotation"),scale:t.getUniformLocation(o,"scale"),color:t.getUniformLocation(o,"color"),map:t.getUniformLocation(o,"map"),opacity:t.getUniformLocation(o,"opacity"),modelViewMatrix:t.getUniformLocation(o,"modelViewMatrix"),projectionMatrix:t.getUniformLocation(o,"projectionMatrix"),fogType:t.getUniformLocation(o,"fogType"),fogDensity:t.getUniformLocation(o,"fogDensity"),fogNear:t.getUniformLocation(o,"fogNear"),fogFar:t.getUniformLocation(o,"fogFar"),fogColor:t.getUniformLocation(o,"fogColor"),alphaTest:t.getUniformLocation(o,"alphaTest")};var n=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");n.width=8;n.height=8;var r=n.getContext("2d");r.fillStyle="white";r.fillRect(0,0,8,8);c=new Pr(n)}this.render=function(r,m,g){if(r.length===0)return;if(o===undefined){p()}i.useProgram(o);i.initAttributes();i.enableAttribute(l.position);i.enableAttribute(l.uv);i.disableUnusedAttributes();i.disable(t.CULL_FACE);i.enable(t.BLEND);t.bindBuffer(t.ARRAY_BUFFER,a);t.vertexAttribPointer(l.position,2,t.FLOAT,false,2*8,0);t.vertexAttribPointer(l.uv,2,t.FLOAT,false,2*8,8);t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,s);t.uniformMatrix4fv(u.projectionMatrix,false,g.projectionMatrix.elements);i.activeTexture(t.TEXTURE0);t.uniform1i(u.map,0);var y=0;var b=0;var x=m.fog;if(x){t.uniform3f(u.fogColor,x.color.r,x.color.g,x.color.b);if(x.isFog){t.uniform1f(u.fogNear,x.near);t.uniform1f(u.fogFar,x.far);t.uniform1i(u.fogType,1);y=1;b=1}else if(x.isFogExp2){t.uniform1f(u.fogDensity,x.density);t.uniform1i(u.fogType,2);y=2;b=2}}else{t.uniform1i(u.fogType,0);y=0;b=0}for(var _=0,w=r.length;_<w;_++){var T=r[_];T.modelViewMatrix.multiplyMatrices(g.matrixWorldInverse,T.matrixWorld);T.z=-T.modelViewMatrix.elements[14]}r.sort(v);var M=[];for(var _=0,w=r.length;_<w;_++){var T=r[_];var S=T.material;if(S.visible===false)continue;T.onBeforeRender(e,m,g,undefined,S,undefined);t.uniform1f(u.alphaTest,S.alphaTest);t.uniformMatrix4fv(u.modelViewMatrix,false,T.modelViewMatrix.elements);T.matrixWorld.decompose(h,f,d);M[0]=d.x;M[1]=d.y;var E=0;if(m.fog&&S.fog){E=b}if(y!==E){t.uniform1i(u.fogType,E);y=E}if(S.map!==null){t.uniform2f(u.uvOffset,S.map.offset.x,S.map.offset.y);t.uniform2f(u.uvScale,S.map.repeat.x,S.map.repeat.y)}else{t.uniform2f(u.uvOffset,0,0);t.uniform2f(u.uvScale,1,1)}t.uniform1f(u.opacity,S.opacity);t.uniform3f(u.color,S.color.r,S.color.g,S.color.b);t.uniform1f(u.rotation,S.rotation);t.uniform2fv(u.scale,M);i.setBlending(S.blending,S.blendEquation,S.blendSrc,S.blendDst,S.blendEquationAlpha,S.blendSrcAlpha,S.blendDstAlpha,S.premultipliedAlpha);i.buffers.depth.setTest(S.depthTest);i.buffers.depth.setMask(S.depthWrite);n.setTexture2D(S.map||c,0);t.drawElements(t.TRIANGLES,6,t.UNSIGNED_SHORT,0);T.onAfterRender(e,m,g,undefined,S,undefined)}i.enable(t.CULL_FACE);i.reset()};function m(){var e=t.createProgram();var i=t.createShader(t.VERTEX_SHADER);var n=t.createShader(t.FRAGMENT_SHADER);t.shaderSource(i,["precision "+r.precision+" float;","#define SHADER_NAME "+"SpriteMaterial","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform float rotation;","uniform vec2 scale;","uniform vec2 uvOffset;","uniform vec2 uvScale;","attribute vec2 position;","attribute vec2 uv;","varying vec2 vUV;","void main() {","vUV = uvOffset + uv * uvScale;","vec2 alignedPosition = position * scale;","vec2 rotatedPosition;","rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;","rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;","vec4 finalPosition;","finalPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );","finalPosition.xy += rotatedPosition;","finalPosition = projectionMatrix * finalPosition;","gl_Position = finalPosition;","}"].join("\n"));t.shaderSource(n,["precision "+r.precision+" float;","#define SHADER_NAME "+"SpriteMaterial","uniform vec3 color;","uniform sampler2D map;","uniform float opacity;","uniform int fogType;","uniform vec3 fogColor;","uniform float fogDensity;","uniform float fogNear;","uniform float fogFar;","uniform float alphaTest;","varying vec2 vUV;","void main() {","vec4 texture = texture2D( map, vUV );","if ( texture.a < alphaTest ) discard;","gl_FragColor = vec4( color * texture.xyz, texture.a * opacity );","if ( fogType > 0 ) {","float depth = gl_FragCoord.z / gl_FragCoord.w;","float fogFactor = 0.0;","if ( fogType == 1 ) {","fogFactor = smoothstep( fogNear, fogFar, depth );","} else {","const float LOG2 = 1.442695;","fogFactor = exp2( - fogDensity * fogDensity * depth * depth * LOG2 );","fogFactor = 1.0 - clamp( fogFactor, 0.0, 1.0 );","}","gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );","}","}"].join("\n"));t.compileShader(i);t.compileShader(n);t.attachShader(e,i);t.attachShader(e,n);t.linkProgram(e);return e}function v(e,t){if(e.renderOrder!==t.renderOrder){return e.renderOrder-t.renderOrder}else if(e.z!==t.z){return t.z-e.z}else{return t.id-e.id}}}var Rr=0;function Cr(){Object.defineProperty(this,"id",{value:Rr++});this.uuid=bt.generateUUID();this.name="";this.type="Material";this.fog=true;this.lights=true;this.blending=w;this.side=d;this.flatShading=false
;this.vertexColors=y;this.opacity=1;this.transparent=false;this.blendSrc=U;this.blendDst=F;this.blendEquation=A;this.blendSrcAlpha=null;this.blendDstAlpha=null;this.blendEquationAlpha=null;this.depthFunc=X;this.depthTest=true;this.depthWrite=true;this.clippingPlanes=null;this.clipIntersection=false;this.clipShadows=false;this.colorWrite=true;this.precision=null;this.polygonOffset=false;this.polygonOffsetFactor=0;this.polygonOffsetUnits=0;this.dithering=false;this.alphaTest=0;this.premultipliedAlpha=false;this.overdraw=0;this.visible=true;this.userData={};this.needsUpdate=true}Object.assign(Cr.prototype,t.prototype,{isMaterial:true,onBeforeCompile:function(){},setValues:function(e){if(e===undefined)return;for(var t in e){var i=e[t];if(i===undefined){console.warn("THREE.Material: '"+t+"' parameter is undefined.");continue}if(t==="shading"){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.");this.flatShading=i===v?true:false;continue}var n=this[t];if(n===undefined){console.warn("THREE."+this.type+": '"+t+"' is not a property of this material.");continue}if(n&&n.isColor){n.set(i)}else if(n&&n.isVector3&&(i&&i.isVector3)){n.copy(i)}else if(t==="overdraw"){this[t]=Number(i)}else{this[t]=i}}},toJSON:function(e){var t=e===undefined;if(t){e={textures:{},images:{}}}var i={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};i.uuid=this.uuid;i.type=this.type;if(this.name!=="")i.name=this.name;if(this.color&&this.color.isColor)i.color=this.color.getHex();if(this.roughness!==undefined)i.roughness=this.roughness;if(this.metalness!==undefined)i.metalness=this.metalness;if(this.emissive&&this.emissive.isColor)i.emissive=this.emissive.getHex();if(this.specular&&this.specular.isColor)i.specular=this.specular.getHex();if(this.shininess!==undefined)i.shininess=this.shininess;if(this.clearCoat!==undefined)i.clearCoat=this.clearCoat;if(this.clearCoatRoughness!==undefined)i.clearCoatRoughness=this.clearCoatRoughness;if(this.map&&this.map.isTexture)i.map=this.map.toJSON(e).uuid;if(this.alphaMap&&this.alphaMap.isTexture)i.alphaMap=this.alphaMap.toJSON(e).uuid;if(this.lightMap&&this.lightMap.isTexture)i.lightMap=this.lightMap.toJSON(e).uuid;if(this.bumpMap&&this.bumpMap.isTexture){i.bumpMap=this.bumpMap.toJSON(e).uuid;i.bumpScale=this.bumpScale}if(this.normalMap&&this.normalMap.isTexture){i.normalMap=this.normalMap.toJSON(e).uuid;i.normalScale=this.normalScale.toArray()}if(this.displacementMap&&this.displacementMap.isTexture){i.displacementMap=this.displacementMap.toJSON(e).uuid;i.displacementScale=this.displacementScale;i.displacementBias=this.displacementBias}if(this.roughnessMap&&this.roughnessMap.isTexture)i.roughnessMap=this.roughnessMap.toJSON(e).uuid;if(this.metalnessMap&&this.metalnessMap.isTexture)i.metalnessMap=this.metalnessMap.toJSON(e).uuid;if(this.emissiveMap&&this.emissiveMap.isTexture)i.emissiveMap=this.emissiveMap.toJSON(e).uuid;if(this.specularMap&&this.specularMap.isTexture)i.specularMap=this.specularMap.toJSON(e).uuid;if(this.envMap&&this.envMap.isTexture){i.envMap=this.envMap.toJSON(e).uuid;i.reflectivity=this.reflectivity}if(this.gradientMap&&this.gradientMap.isTexture){i.gradientMap=this.gradientMap.toJSON(e).uuid}if(this.size!==undefined)i.size=this.size;if(this.sizeAttenuation!==undefined)i.sizeAttenuation=this.sizeAttenuation;if(this.blending!==w)i.blending=this.blending;if(this.flatShading===true)i.flatShading=this.flatShading;if(this.side!==d)i.side=this.side;if(this.vertexColors!==y)i.vertexColors=this.vertexColors;if(this.opacity<1)i.opacity=this.opacity;if(this.transparent===true)i.transparent=this.transparent;i.depthFunc=this.depthFunc;i.depthTest=this.depthTest;i.depthWrite=this.depthWrite;if(this.dithering===true)i.dithering=true;if(this.alphaTest>0)i.alphaTest=this.alphaTest;if(this.premultipliedAlpha===true)i.premultipliedAlpha=this.premultipliedAlpha;if(this.wireframe===true)i.wireframe=this.wireframe;if(this.wireframeLinewidth>1)i.wireframeLinewidth=this.wireframeLinewidth;if(this.wireframeLinecap!=="round")i.wireframeLinecap=this.wireframeLinecap;if(this.wireframeLinejoin!=="round")i.wireframeLinejoin=this.wireframeLinejoin;if(this.morphTargets===true)i.morphTargets=true;if(this.skinning===true)i.skinning=true;if(this.visible===false)i.visible=false;if(JSON.stringify(this.userData)!=="{}")i.userData=this.userData;function n(e){var t=[];for(var i in e){var n=e[i];delete n.metadata;t.push(n)}return t}if(t){var r=n(e.textures);var a=n(e.images);if(r.length>0)i.textures=r;if(a.length>0)i.images=a}return i},clone:function(){return(new this.constructor).copy(this)},copy:function(e){this.name=e.name;this.fog=e.fog;this.lights=e.lights;this.blending=e.blending;this.side=e.side;this.flatShading=e.flatShading;this.vertexColors=e.vertexColors;this.opacity=e.opacity;this.transparent=e.transparent;this.blendSrc=e.blendSrc;this.blendDst=e.blendDst;this.blendEquation=e.blendEquation;this.blendSrcAlpha=e.blendSrcAlpha;this.blendDstAlpha=e.blendDstAlpha;this.blendEquationAlpha=e.blendEquationAlpha;this.depthFunc=e.depthFunc;this.depthTest=e.depthTest;this.depthWrite=e.depthWrite;this.colorWrite=e.colorWrite;this.precision=e.precision;this.polygonOffset=e.polygonOffset;this.polygonOffsetFactor=e.polygonOffsetFactor;this.polygonOffsetUnits=e.polygonOffsetUnits;this.dithering=e.dithering;this.alphaTest=e.alphaTest;this.premultipliedAlpha=e.premultipliedAlpha;this.overdraw=e.overdraw;this.visible=e.visible;this.userData=JSON.parse(JSON.stringify(e.userData));this.clipShadows=e.clipShadows;this.clipIntersection=e.clipIntersection;var t=e.clippingPlanes,i=null;if(t!==null){var n=t.length;i=new Array(n);for(var r=0;r!==n;++r)i[r]=t[r].clone()}this.clippingPlanes=i;return this},dispose:function(){this.dispatchEvent({type:"dispose"})}});function Or(e){Cr.call(this);this.type="ShaderMaterial";this.defines={};this.uniforms={};this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}";this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}";this.linewidth=1;this.wireframe=false;this.wireframeLinewidth=1;this.fog=false;this.lights=false;this.clipping=false;this.skinning=false;this.morphTargets=false;this.morphNormals=false;this.extensions={derivatives:false,fragDepth:false,drawBuffers:false,shaderTextureLOD:false};this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]};this.index0AttributeName=undefined;if(e!==undefined){if(e.attributes!==undefined){console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead.")}this.setValues(e)}}Or.prototype=Object.create(Cr.prototype);Or.prototype.constructor=Or;Or.prototype.isShaderMaterial=true;Or.prototype.copy=function(e){Cr.prototype.copy.call(this,e);this.fragmentShader=e.fragmentShader;this.vertexShader=e.vertexShader;this.uniforms=_i.clone(e.uniforms);this.defines=e.defines;this.wireframe=e.wireframe;this.wireframeLinewidth=e.wireframeLinewidth;this.lights=e.lights;this.clipping=e.clipping;this.skinning=e.skinning;this.morphTargets=e.morphTargets;this.morphNormals=e.morphNormals;this.extensions=e.extensions;return this};Or.prototype.toJSON=function(e){var t=Cr.prototype.toJSON.call(this,e);t.uniforms=this.uniforms;t.vertexShader=this.vertexShader;t.fragmentShader=this.fragmentShader;return t};function Dr(e){Cr.call(this);this.type="MeshDepthMaterial";this.depthPacking=gt;this.skinning=false;this.morphTargets=false;this.map=null;this.alphaMap=null;this.displacementMap=null;this.displacementScale=1;this.displacementBias=0;this.wireframe=false;this.wireframeLinewidth=1;this.fog=false;this.lights=false;this.setValues(e)}Dr.prototype=Object.create(Cr.prototype);Dr.prototype.constructor=Dr;Dr.prototype.isMeshDepthMaterial=true;Dr.prototype.copy=function(e){Cr.prototype.copy.call(this,e);this.depthPacking=e.depthPacking;this.skinning=e.skinning;this.morphTargets=e.morphTargets;this.map=e.map;this.alphaMap=e.alphaMap;this.displacementMap=e.displacementMap;this.displacementScale=e.displacementScale;this.displacementBias=e.displacementBias;this.wireframe=e.wireframe;this.wireframeLinewidth=e.wireframeLinewidth;return this};function Ir(e){Cr.call(this);this.type="MeshDistanceMaterial";this.referencePosition=new At;this.nearDistance=1;this.farDistance=1e3;this.skinning=false;this.morphTargets=false;this.map=null;this.alphaMap=null;this.displacementMap=null;this.displacementScale=1;this.displacementBias=0;this.fog=false;this.lights=false;this.setValues(e)}Ir.prototype=Object.create(Cr.prototype);Ir.prototype.constructor=Ir;Ir.prototype.isMeshDistanceMaterial=true;Ir.prototype.copy=function(e){Cr.prototype.copy.call(this,e);this.referencePosition.copy(e.referencePosition);this.nearDistance=e.nearDistance;this.farDistance=e.farDistance;this.skinning=e.skinning;this.morphTargets=e.morphTargets;this.map=e.map;this.alphaMap=e.alphaMap;this.displacementMap=e.displacementMap;this.displacementScale=e.displacementScale;this.displacementBias=e.displacementBias;return this};function kr(e,t){this.min=e!==undefined?e:new At(+Infinity,+Infinity,+Infinity);this.max=t!==undefined?t:new At(-Infinity,-Infinity,-Infinity)}Object.assign(kr.prototype,{isBox3:true,set:function(e,t){this.min.copy(e);this.max.copy(t);return this},setFromArray:function(e){var t=+Infinity;var i=+Infinity;var n=+Infinity;var r=-Infinity;var a=-Infinity;var s=-Infinity;for(var o=0,l=e.length;o<l;o+=3){var u=e[o];var c=e[o+1];var h=e[o+2];if(u<t)t=u;if(c<i)i=c;if(h<n)n=h;if(u>r)r=u;if(c>a)a=c;if(h>s)s=h}this.min.set(t,i,n);this.max.set(r,a,s);return this},setFromBufferAttribute:function(e){var t=+Infinity;var i=+Infinity;var n=+Infinity;var r=-Infinity;var a=-Infinity;var s=-Infinity;for(var o=0,l=e.count;o<l;o++){var u=e.getX(o);var c=e.getY(o);var h=e.getZ(o);if(u<t)t=u;if(c<i)i=c;if(h<n)n=h;if(u>r)r=u;if(c>a)a=c;if(h>s)s=h}this.min.set(t,i,n);this.max.set(r,a,s);return this},setFromPoints:function(e){this.makeEmpty();for(var t=0,i=e.length;t<i;t++){this.expandByPoint(e[t])}return this},setFromCenterAndSize:function(){var e=new At;return function t(i,n){var r=e.copy(n).multiplyScalar(.5);this.min.copy(i).sub(r);this.max.copy(i).add(r);return this}}(),setFromObject:function(e){this.makeEmpty();return this.expandByObject(e)},clone:function(){return(new this.constructor).copy(this)},copy:function(e){this.min.copy(e.min);this.max.copy(e.max);return this},makeEmpty:function(){this.min.x=this.min.y=this.min.z=+Infinity;this.max.x=this.max.y=this.max.z=-Infinity;return this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},getCenter:function(e){var t=e||new At;return this.isEmpty()?t.set(0,0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(e){var t=e||new At;return this.isEmpty()?t.set(0,0,0):t.subVectors(this.max,this.min)},expandByPoint:function(e){this.min.min(e);this.max.max(e);return this},expandByVector:function(e){this.min.sub(e);this.max.add(e);return this},expandByScalar:function(e){this.min.addScalar(-e);this.max.addScalar(e);return this},expandByObject:function(){var e=new At;return function t(i){var n=this;i.updateMatrixWorld(true);i.traverse(function(t){var i,r;var a=t.geometry;if(a!==undefined){if(a.isGeometry){var s=a.vertices;for(i=0,r=s.length;i<r;i++){e.copy(s[i]);e.applyMatrix4(t.matrixWorld);n.expandByPoint(e)}}else if(a.isBufferGeometry){var o=a.attributes.position;if(o!==undefined){for(i=0,r=o.count;i<r;i++){e.fromBufferAttribute(o,i).applyMatrix4(t.matrixWorld);n.expandByPoint(e)}}}}});return this}}(),containsPoint:function(e){return e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z?false:true},containsBox:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z},getParameter:function(e,t){var i=t||new At;return i.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))},intersectsBox:function(e){return e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z?false:true},intersectsSphere:function(){var e=new At;return function t(i){this.clampPoint(i.center,e);return e.distanceToSquared(i.center)<=i.radius*i.radius}}(),intersectsPlane:function(e){var t,i;if(e.normal.x>0){t=e.normal.x*this.min.x;i=e.normal.x*this.max.x}else{t=e.normal.x*this.max.x;i=e.normal.x*this.min.x}if(e.normal.y>0){t+=e.normal.y*this.min.y;i+=e.normal.y*this.max.y}else{t+=e.normal.y*this.max.y;i+=e.normal.y*this.min.y}if(e.normal.z>0){t+=e.normal.z*this.min.z;i+=e.normal.z*this.max.z}else{t+=e.normal.z*this.max.z;i+=e.normal.z*this.min.z}return t<=e.constant&&i>=e.constant},clampPoint:function(e,t){var i=t||new At;return i.copy(e).clamp(this.min,this.max)},distanceToPoint:function(){var e=new At;return function t(i){var n=e.copy(i).clamp(this.min,this.max);return n.sub(i).length()}}(),getBoundingSphere:function(){var e=new At;return function t(i){var n=i||new Ur;this.getCenter(n.center);n.radius=this.getSize(e).length()*.5;return n}}(),intersect:function(e){this.min.max(e.min);this.max.min(e.max);if(this.isEmpty())this.makeEmpty();return this},union:function(e){this.min.min(e.min);this.max.max(e.max);return this},applyMatrix4:function(){var e=[new At,new At,new At,new At,new At,new At,new At,new At];return function t(i){if(this.isEmpty())return this;e[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(i);e[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(i);e[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(i);e[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(i);e[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(i);e[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(i);e[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(i);e[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(i);this.setFromPoints(e);return this}}(),translate:function(e){this.min.add(e);this.max.add(e);return this},equals:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)}});function Ur(e,t){this.center=e!==undefined?e:new At;this.radius=t!==undefined?t:0}Object.assign(Ur.prototype,{set:function(e,t){this.center.copy(e);this.radius=t;return this},setFromPoints:function(){var e=new kr;return function t(i,n){var r=this.center;if(n!==undefined){r.copy(n)}else{e.setFromPoints(i).getCenter(r)}var a=0;for(var s=0,o=i.length;s<o;s++){a=Math.max(a,r.distanceToSquared(i[s]))}this.radius=Math.sqrt(a);return this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(e){this.center.copy(e.center);this.radius=e.radius;return this},empty:function(){return this.radius<=0},containsPoint:function(e){return e.distanceToSquared(this.center)<=this.radius*this.radius},distanceToPoint:function(e){return e.distanceTo(this.center)-this.radius},intersectsSphere:function(e){var t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t},intersectsBox:function(e){return e.intersectsSphere(this)},intersectsPlane:function(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius},clampPoint:function(e,t){var i=this.center.distanceToSquared(e);var n=t||new At;n.copy(e);if(i>this.radius*this.radius){n.sub(this.center).normalize();n.multiplyScalar(this.radius).add(this.center)}return n},getBoundingBox:function(e){var t=e||new kr;t.set(this.center,this.center);t.expandByScalar(this.radius);return t},applyMatrix4:function(e){this.center.applyMatrix4(e);this.radius=this.radius*e.getMaxScaleOnAxis();return this},translate:function(e){this.center.add(e);return this},equals:function(e){return e.center.equals(this.center)&&e.radius===this.radius}});function Fr(){this.elements=[1,0,0,0,1,0,0,0,1];if(arguments.length>0){console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}}Object.assign(Fr.prototype,{isMatrix3:true,set:function(e,t,i,n,r,a,s,o,l){var u=this.elements;u[0]=e;u[1]=n;u[2]=s;u[3]=t;u[4]=r;u[5]=o;u[6]=i;u[7]=a;u[8]=l;return this},identity:function(){this.set(1,0,0,0,1,0,0,0,1);return this},clone:function(){return(new this.constructor).fromArray(this.elements)},copy:function(e){var t=this.elements;var i=e.elements;t[0]=i[0];t[1]=i[1];t[2]=i[2];t[3]=i[3];t[4]=i[4];t[5]=i[5];t[6]=i[6];t[7]=i[7];t[8]=i[8];return this},setFromMatrix4:function(e){var t=e.elements;this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]);return this},applyToBufferAttribute:function(){var e=new At;return function t(i){for(var n=0,r=i.count;n<r;n++){e.x=i.getX(n);e.y=i.getY(n);e.z=i.getZ(n);e.applyMatrix3(this);i.setXYZ(n,e.x,e.y,e.z)}return i}}(),multiply:function(e){return this.multiplyMatrices(this,e)},premultiply:function(e){return this.multiplyMatrices(e,this)},multiplyMatrices:function(e,t){var i=e.elements;var n=t.elements;var r=this.elements;var a=i[0],s=i[3],o=i[6];var l=i[1],u=i[4],c=i[7];var h=i[2],f=i[5],d=i[8];var p=n[0],m=n[3],v=n[6];var g=n[1],y=n[4],b=n[7];var x=n[2],_=n[5],w=n[8];r[0]=a*p+s*g+o*x;r[3]=a*m+s*y+o*_;r[6]=a*v+s*b+o*w;r[1]=l*p+u*g+c*x;r[4]=l*m+u*y+c*_;r[7]=l*v+u*b+c*w;r[2]=h*p+f*g+d*x;r[5]=h*m+f*y+d*_;r[8]=h*v+f*b+d*w;return this},multiplyScalar:function(e){var t=this.elements;t[0]*=e;t[3]*=e;t[6]*=e;t[1]*=e;t[4]*=e;t[7]*=e;t[2]*=e;t[5]*=e;t[8]*=e;return this},determinant:function(){var e=this.elements;var t=e[0],i=e[1],n=e[2],r=e[3],a=e[4],s=e[5],o=e[6],l=e[7],u=e[8];return t*a*u-t*s*l-i*r*u+i*s*o+n*r*l-n*a*o},getInverse:function(e,t){if(e&&e.isMatrix4){console.error("THREE.Matrix3: .getInverse() no longer takes a Matrix4 argument.")}var i=e.elements,n=this.elements,r=i[0],a=i[1],s=i[2],o=i[3],l=i[4],u=i[5],c=i[6],h=i[7],f=i[8],d=f*l-u*h,p=u*c-f*o,m=h*o-l*c,v=r*d+a*p+s*m;if(v===0){var g="THREE.Matrix3: .getInverse() can't invert matrix, determinant is 0";if(t===true){throw new Error(g)}else{console.warn(g)}return this.identity()}var y=1/v;n[0]=d*y;n[1]=(s*h-f*a)*y;n[2]=(u*a-s*l)*y;n[3]=p*y;n[4]=(f*r-s*c)*y;n[5]=(s*o-u*r)*y;n[6]=m*y;n[7]=(a*c-h*r)*y;n[8]=(l*r-a*o)*y;return this},transpose:function(){var e,t=this.elements;e=t[1];t[1]=t[3];t[3]=e;e=t[2];t[2]=t[6];t[6]=e;e=t[5];t[5]=t[7];t[7]=e;return this},getNormalMatrix:function(e){return this.setFromMatrix4(e).getInverse(this).transpose()},transposeIntoArray:function(e){var t=this.elements;e[0]=t[0];e[1]=t[3];e[2]=t[6];e[3]=t[1];e[4]=t[4];e[5]=t[7];e[6]=t[2];e[7]=t[5];e[8]=t[8];return this},equals:function(e){var t=this.elements;var i=e.elements;for(var n=0;n<9;n++){if(t[n]!==i[n])return false}return true},fromArray:function(e,t){if(t===undefined)t=0;for(var i=0;i<9;i++){this.elements[i]=e[i+t]}return this},toArray:function(e,t){if(e===undefined)e=[];if(t===undefined)t=0;var i=this.elements;e[t]=i[0];e[t+1]=i[1];e[t+2]=i[2];e[t+3]=i[3];e[t+4]=i[4];e[t+5]=i[5];e[t+6]=i[6];e[t+7]=i[7];e[t+8]=i[8];return e}});function Nr(e,t){this.normal=e!==undefined?e:new At(1,0,0);this.constant=t!==undefined?t:0}Object.assign(Nr.prototype,{set:function(e,t){this.normal.copy(e);this.constant=t;return this},setComponents:function(e,t,i,n){this.normal.set(e,t,i);this.constant=n;return this},setFromNormalAndCoplanarPoint:function(e,t){this.normal.copy(e);this.constant=-t.dot(this.normal);return this},setFromCoplanarPoints:function(){var e=new At;var t=new At;return function i(n,r,a){var s=e.subVectors(a,r).cross(t.subVectors(n,r)).normalize();this.setFromNormalAndCoplanarPoint(s,n);return this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(e){this.normal.copy(e.normal);this.constant=e.constant;return this},normalize:function(){var e=1/this.normal.length();this.normal.multiplyScalar(e);this.constant*=e;return this},negate:function(){this.constant*=-1;this.normal.negate();return this},distanceToPoint:function(e){return this.normal.dot(e)+this.constant},distanceToSphere:function(e){return this.distanceToPoint(e.center)-e.radius},projectPoint:function(e,t){var i=t||new At;return i.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)},intersectLine:function(){var e=new At;return function t(i,n){var r=n||new At;var a=i.delta(e);var s=this.normal.dot(a);if(s===0){if(this.distanceToPoint(i.start)===0){return r.copy(i.start)}return undefined}var o=-(i.start.dot(this.normal)+this.constant)/s;if(o<0||o>1){return undefined}return r.copy(a).multiplyScalar(o).add(i.start)}}(),intersectsLine:function(e){var t=this.distanceToPoint(e.start);var i=this.distanceToPoint(e.end);return t<0&&i>0||i<0&&t>0},intersectsBox:function(e){return e.intersectsPlane(this)},intersectsSphere:function(e){return e.intersectsPlane(this)},coplanarPoint:function(e){var t=e||new At;return t.copy(this.normal).multiplyScalar(-this.constant)},applyMatrix4:function(){var e=new At;var t=new Fr;return function i(n,r){var a=r||t.getNormalMatrix(n);var s=this.coplanarPoint(e).applyMatrix4(n);var o=this.normal.applyMatrix3(a).normalize();this.constant=-s.dot(o);return this}}(),translate:function(e){this.constant-=e.dot(this.normal);return this},equals:function(e){return e.normal.equals(this.normal)&&e.constant===this.constant}});function Br(e,t,i,n,r,a){this.planes=[e!==undefined?e:new Nr,t!==undefined?t:new Nr,i!==undefined?i:new Nr,n!==undefined?n:new Nr,r!==undefined?r:new Nr,a!==undefined?a:new Nr]}Object.assign(Br.prototype,{set:function(e,t,i,n,r,a){var s=this.planes;s[0].copy(e);s[1].copy(t);s[2].copy(i);s[3].copy(n);s[4].copy(r);s[5].copy(a);return this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){var t=this.planes;for(var i=0;i<6;i++){t[i].copy(e.planes[i])}return this},setFromMatrix:function(e){var t=this.planes;var i=e.elements;var n=i[0],r=i[1],a=i[2],s=i[3];var o=i[4],l=i[5],u=i[6],c=i[7];var h=i[8],f=i[9],d=i[10],p=i[11];var m=i[12],v=i[13],g=i[14],y=i[15];t[0].setComponents(s-n,c-o,p-h,y-m).normalize();t[1].setComponents(s+n,c+o,p+h,y+m).normalize();t[2].setComponents(s+r,c+l,p+f,y+v).normalize();t[3].setComponents(s-r,c-l,p-f,y-v).normalize();t[4].setComponents(s-a,c-u,p-d,y-g).normalize();t[5].setComponents(s+a,c+u,p+d,y+g).normalize();return this},intersectsObject:function(){var e=new Ur;return function t(i){var n=i.geometry;if(n.boundingSphere===null)n.computeBoundingSphere();e.copy(n.boundingSphere).applyMatrix4(i.matrixWorld);return this.intersectsSphere(e)}}(),intersectsSprite:function(){var e=new Ur;return function t(i){e.center.set(0,0,0);e.radius=.7071067811865476;e.applyMatrix4(i.matrixWorld);return this.intersectsSphere(e)}}(),intersectsSphere:function(e){var t=this.planes;var i=e.center;var n=-e.radius;for(var r=0;r<6;r++){var a=t[r].distanceToPoint(i);if(a<n){return false}}return true},intersectsBox:function(){var e=new At,t=new At;return function i(n){var r=this.planes;for(var a=0;a<6;a++){var s=r[a];e.x=s.normal.x>0?n.min.x:n.max.x;t.x=s.normal.x>0?n.max.x:n.min.x;e.y=s.normal.y>0?n.min.y:n.max.y;t.y=s.normal.y>0?n.max.y:n.min.y;e.z=s.normal.z>0?n.min.z:n.max.z;t.z=s.normal.z>0?n.max.z:n.min.z;var o=s.distanceToPoint(e);var l=s.distanceToPoint(t);if(o<0&&l<0){return false}}return true}}(),containsPoint:function(e){var t=this.planes;for(var i=0;i<6;i++){if(t[i].distanceToPoint(e)<0){return false}}return true}});function zr(e,t,i){var n=new Br,r=new Pt,a=new xt,s=new xt(i,i),o=new At,l=new At,u=1,c=2,f=(u|c)+1,v=new Array(f),g=new Array(f),y={};var b=[new At(1,0,0),new At(-1,0,0),new At(0,0,1),new At(0,0,-1),new At(0,1,0),new At(0,-1,0)];var x=[new At(0,1,0),new At(0,1,0),new At(0,1,0),new At(0,1,0),new At(0,0,1),new At(0,0,-1)];var _=[new Tt,new Tt,new Tt,new Tt,new Tt,new Tt];for(var w=0;w!==f;++w){var T=(w&u)!==0;var M=(w&c)!==0;var S=new Dr({depthPacking:yt,morphTargets:T,skinning:M});v[w]=S;var E=new Ir({morphTargets:T,skinning:M});g[w]=E}var A=this;this.enabled=false;this.autoUpdate=true;this.needsUpdate=false;this.type=h;this.renderReverseSided=true;this.renderSingleSided=true;this.render=function(t,i,u){if(A.enabled===false)return;if(A.autoUpdate===false&&A.needsUpdate===false)return;if(t.length===0)return;var c=e.context;var h=e.state;h.disable(c.BLEND);h.buffers.color.setClear(1,1,1,1);h.buffers.depth.setTest(true);h.setScissorTest(false);var f;for(var d=0,p=t.length;d<p;d++){var m=t[d];var v=m.shadow;var g=m&&m.isPointLight;if(v===undefined){console.warn("THREE.WebGLShadowMap:",m,"has no shadow.");continue}var y=v.camera;a.copy(v.mapSize);a.min(s);if(g){var w=a.x;var T=a.y;_[0].set(w*2,T,w,T);_[1].set(0,T,w,T);_[2].set(w*3,T,w,T);_[3].set(w,T,w,T);_[4].set(w*3,0,w,T);_[5].set(w,0,w,T);a.x*=4;a.y*=2}if(v.map===null){var M={minFilter:ve,magFilter:ve,format:Ue};v.map=new Mt(a.x,a.y,M);v.map.texture.name=m.name+".shadowMap";y.updateProjectionMatrix()}if(v.isSpotLightShadow){v.update(m)}var S=v.map;var E=v.matrix;l.setFromMatrixPosition(m.matrixWorld);y.position.copy(l);if(g){f=6;E.makeTranslation(-l.x,-l.y,-l.z)}else{f=1;o.setFromMatrixPosition(m.target.matrixWorld);y.lookAt(o);y.updateMatrixWorld();E.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1);E.multiply(y.projectionMatrix);E.multiply(y.matrixWorldInverse)}e.setRenderTarget(S);e.clear();for(var P=0;P<f;P++){if(g){o.copy(y.position);o.add(b[P]);y.up.copy(x[P]);y.lookAt(o);y.updateMatrixWorld();var R=_[P];h.viewport(R)}r.multiplyMatrices(y.projectionMatrix,y.matrixWorldInverse);n.setFromMatrix(r);L(i,u,y,g)}}A.needsUpdate=false};function P(t,i,n,r,a,s){var o=t.geometry;var l=null;var h=v;var f=t.customDepthMaterial;if(n){h=g;f=t.customDistanceMaterial}if(!f){var b=false;if(i.morphTargets){if(o&&o.isBufferGeometry){b=o.morphAttributes&&o.morphAttributes.position&&o.morphAttributes.position.length>0}else if(o&&o.isGeometry){b=o.morphTargets&&o.morphTargets.length>0}}if(t.isSkinnedMesh&&i.skinning===false){console.warn("THREE.WebGLShadowMap: THREE.SkinnedMesh with material.skinning set to false:",t)}var x=t.isSkinnedMesh&&i.skinning;var _=0;if(b)_|=u;if(x)_|=c;l=h[_]}else{l=f}if(e.localClippingEnabled&&i.clipShadows===true&&i.clippingPlanes.length!==0){var w=l.uuid,T=i.uuid;var M=y[w];if(M===undefined){M={};y[w]=M}var S=M[T];if(S===undefined){S=l.clone();M[T]=S}l=S}l.visible=i.visible;l.wireframe=i.wireframe;var E=i.side;if(A.renderSingleSided&&E==m){E=d}if(A.renderReverseSided){if(E===d)E=p;else if(E===p)E=d}l.side=E;l.clipShadows=i.clipShadows;l.clippingPlanes=i.clippingPlanes;l.clipIntersection=i.clipIntersection;l.wireframeLinewidth=i.wireframeLinewidth;l.linewidth=i.linewidth;if(n&&l.isMeshDistanceMaterial){l.referencePosition.copy(r);l.nearDistance=a;l.farDistance=s}return l}function L(i,r,a,s){if(i.visible===false)return;var o=i.layers.test(r.layers);if(o&&(i.isMesh||i.isLine||i.isPoints)){if(i.castShadow&&(!i.frustumCulled||n.intersectsObject(i))){i.modelViewMatrix.multiplyMatrices(a.matrixWorldInverse,i.matrixWorld);var u=t.update(i);var c=i.material;if(Array.isArray(c)){var h=u.groups;for(var f=0,d=h.length;f<d;f++){var p=h[f];var m=c[p.materialIndex];if(m&&m.visible){var v=P(i,m,s,l,a.near,a.far);e.renderBufferDirect(a,null,u,v,i,p)}}}else if(c.visible){var v=P(i,c,s,l,a.near,a.far);e.renderBufferDirect(a,null,u,v,i,null)}}}var g=i.children;for(var y=0,b=g.length;y<b;y++){L(g[y],r,a,s)}}}function jr(e){var t={};function i(t,i){var n=t.array;var r=t.dynamic?e.DYNAMIC_DRAW:e.STATIC_DRAW;var a=e.createBuffer();e.bindBuffer(i,a);e.bufferData(i,n,r);t.onUploadCallback();var s=e.FLOAT;if(n instanceof Float32Array){s=e.FLOAT}else if(n instanceof Float64Array){console.warn("THREE.WebGLAttributes: Unsupported data buffer format: Float64Array.")}else if(n instanceof Uint16Array){s=e.UNSIGNED_SHORT}else if(n instanceof Int16Array){s=e.SHORT}else if(n instanceof Uint32Array){s=e.UNSIGNED_INT}else if(n instanceof Int32Array){s=e.INT}else if(n instanceof Int8Array){s=e.BYTE}else if(n instanceof Uint8Array){s=e.UNSIGNED_BYTE}return{buffer:a,type:s,bytesPerElement:n.BYTES_PER_ELEMENT,version:t.version}}function n(t,i,n){var r=i.array;var a=i.updateRange;e.bindBuffer(n,t);if(i.dynamic===false){e.bufferData(n,r,e.STATIC_DRAW)}else if(a.count===-1){e.bufferSubData(n,0,r)}else if(a.count===0){console.error("THREE.WebGLObjects.updateBuffer: dynamic THREE.BufferAttribute marked as needsUpdate but updateRange.count is 0, ensure you are using set methods or updating manually.")}else{e.bufferSubData(n,a.offset*r.BYTES_PER_ELEMENT,r.subarray(a.offset,a.offset+a.count));a.count=-1}}function r(e){if(e.isInterleavedBufferAttribute)e=e.data;return t[e.uuid]}function a(i){if(i.isInterleavedBufferAttribute)i=i.data;var n=t[i.uuid];if(n){e.deleteBuffer(n.buffer);delete t[i.uuid]}}function s(e,r){if(e.isInterleavedBufferAttribute)e=e.data;var a=t[e.uuid];if(a===undefined){t[e.uuid]=i(e,r)}else if(a.version<e.version){n(a.buffer,e,r);a.version=e.version}}return{get:r,remove:a,update:s}}function Gr(e,t,i,n){this._x=e||0;this._y=t||0;this._z=i||0;this._order=n||Gr.DefaultOrder}Gr.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"];Gr.DefaultOrder="XYZ";Object.defineProperties(Gr.prototype,{x:{get:function(){return this._x},set:function(e){this._x=e;this.onChangeCallback()}},y:{get:function(){return this._y},set:function(e){this._y=e;this.onChangeCallback()}},z:{get:function(){return this._z},set:function(e){this._z=e;this.onChangeCallback()}},order:{get:function(){return this._order},set:function(e){this._order=e;this.onChangeCallback()}}});Object.assign(Gr.prototype,{isEuler:true,set:function(e,t,i,n){this._x=e;this._y=t;this._z=i;this._order=n||this._order;this.onChangeCallback();return this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._order)},copy:function(e){this._x=e._x;this._y=e._y;this._z=e._z;this._order=e._order;this.onChangeCallback();return this},setFromRotationMatrix:function(e,t,i){var n=bt.clamp;var r=e.elements;var a=r[0],s=r[4],o=r[8];var l=r[1],u=r[5],c=r[9];var h=r[2],f=r[6],d=r[10];t=t||this._order;if(t==="XYZ"){this._y=Math.asin(n(o,-1,1));if(Math.abs(o)<.99999){this._x=Math.atan2(-c,d);this._z=Math.atan2(-s,a)}else{this._x=Math.atan2(f,u);this._z=0}}else if(t==="YXZ"){this._x=Math.asin(-n(c,-1,1));if(Math.abs(c)<.99999){this._y=Math.atan2(o,d);this._z=Math.atan2(l,u)}else{this._y=Math.atan2(-h,a);this._z=0}}else if(t==="ZXY"){this._x=Math.asin(n(f,-1,1));if(Math.abs(f)<.99999){this._y=Math.atan2(-h,d);this._z=Math.atan2(-s,u)}else{this._y=0;this._z=Math.atan2(l,a)}}else if(t==="ZYX"){this._y=Math.asin(-n(h,-1,1));if(Math.abs(h)<.99999){this._x=Math.atan2(f,d);this._z=Math.atan2(l,a)}else{this._x=0;this._z=Math.atan2(-s,u)}}else if(t==="YZX"){this._z=Math.asin(n(l,-1,1));if(Math.abs(l)<.99999){this._x=Math.atan2(-c,u);this._y=Math.atan2(-h,a)}else{this._x=0;this._y=Math.atan2(o,d)}}else if(t==="XZY"){this._z=Math.asin(-n(s,-1,1));if(Math.abs(s)<.99999){this._x=Math.atan2(f,u);this._y=Math.atan2(o,a)}else{this._x=Math.atan2(-c,d);this._y=0}}else{console.warn("THREE.Euler: .setFromRotationMatrix() given unsupported order: "+t)}this._order=t;if(i!==false)this.onChangeCallback();return this},setFromQuaternion:function(){var e=new Pt;return function t(i,n,r){e.makeRotationFromQuaternion(i);return this.setFromRotationMatrix(e,n,r)}}(),setFromVector3:function(e,t){return this.set(e.x,e.y,e.z,t||this._order)},reorder:function(){var e=new Et;return function t(i){e.setFromEuler(this);return this.setFromQuaternion(e,i)}}(),equals:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order},fromArray:function(e){this._x=e[0];this._y=e[1];this._z=e[2];if(e[3]!==undefined)this._order=e[3];this.onChangeCallback();return this},toArray:function(e,t){if(e===undefined)e=[];if(t===undefined)t=0;e[t]=this._x;e[t+1]=this._y;e[t+2]=this._z;e[t+3]=this._order;return e},toVector3:function(e){if(e){return e.set(this._x,this._y,this._z)}else{return new At(this._x,this._y,this._z)}},onChange:function(e){this.onChangeCallback=e;return this},onChangeCallback:function(){}});function Hr(){this.mask=1|0}Object.assign(Hr.prototype,{set:function(e){this.mask=1<<e|0},enable:function(e){this.mask|=1<<e|0},toggle:function(e){this.mask^=1<<e|0},disable:function(e){
this.mask&=~(1<<e|0)},test:function(e){return(this.mask&e.mask)!==0}});var Vr=0;function Wr(){Object.defineProperty(this,"id",{value:Vr++});this.uuid=bt.generateUUID();this.name="";this.type="Object3D";this.parent=null;this.children=[];this.up=Wr.DefaultUp.clone();var e=new At;var t=new Gr;var i=new Et;var n=new At(1,1,1);function r(){i.setFromEuler(t,false)}function a(){t.setFromQuaternion(i,undefined,false)}t.onChange(r);i.onChange(a);Object.defineProperties(this,{position:{enumerable:true,value:e},rotation:{enumerable:true,value:t},quaternion:{enumerable:true,value:i},scale:{enumerable:true,value:n},modelViewMatrix:{value:new Pt},normalMatrix:{value:new Fr}});this.matrix=new Pt;this.matrixWorld=new Pt;this.matrixAutoUpdate=Wr.DefaultMatrixAutoUpdate;this.matrixWorldNeedsUpdate=false;this.layers=new Hr;this.visible=true;this.castShadow=false;this.receiveShadow=false;this.frustumCulled=true;this.renderOrder=0;this.userData={}}Wr.DefaultUp=new At(0,1,0);Wr.DefaultMatrixAutoUpdate=true;Object.assign(Wr.prototype,t.prototype,{isObject3D:true,onBeforeRender:function(){},onAfterRender:function(){},applyMatrix:function(e){this.matrix.multiplyMatrices(e,this.matrix);this.matrix.decompose(this.position,this.quaternion,this.scale)},applyQuaternion:function(e){this.quaternion.premultiply(e);return this},setRotationFromAxisAngle:function(e,t){this.quaternion.setFromAxisAngle(e,t)},setRotationFromEuler:function(e){this.quaternion.setFromEuler(e,true)},setRotationFromMatrix:function(e){this.quaternion.setFromRotationMatrix(e)},setRotationFromQuaternion:function(e){this.quaternion.copy(e)},rotateOnAxis:function(){var e=new Et;return function t(i,n){e.setFromAxisAngle(i,n);this.quaternion.multiply(e);return this}}(),rotateX:function(){var e=new At(1,0,0);return function t(i){return this.rotateOnAxis(e,i)}}(),rotateY:function(){var e=new At(0,1,0);return function t(i){return this.rotateOnAxis(e,i)}}(),rotateZ:function(){var e=new At(0,0,1);return function t(i){return this.rotateOnAxis(e,i)}}(),translateOnAxis:function(){var e=new At;return function t(i,n){e.copy(i).applyQuaternion(this.quaternion);this.position.add(e.multiplyScalar(n));return this}}(),translateX:function(){var e=new At(1,0,0);return function t(i){return this.translateOnAxis(e,i)}}(),translateY:function(){var e=new At(0,1,0);return function t(i){return this.translateOnAxis(e,i)}}(),translateZ:function(){var e=new At(0,0,1);return function t(i){return this.translateOnAxis(e,i)}}(),localToWorld:function(e){return e.applyMatrix4(this.matrixWorld)},worldToLocal:function(){var e=new Pt;return function t(i){return i.applyMatrix4(e.getInverse(this.matrixWorld))}}(),lookAt:function(){var e=new Pt;return function t(i){if(this.isCamera){e.lookAt(this.position,i,this.up)}else{e.lookAt(i,this.position,this.up)}this.quaternion.setFromRotationMatrix(e)}}(),add:function(e){if(arguments.length>1){for(var t=0;t<arguments.length;t++){this.add(arguments[t])}return this}if(e===this){console.error("THREE.Object3D.add: object can't be added as a child of itself.",e);return this}if(e&&e.isObject3D){if(e.parent!==null){e.parent.remove(e)}e.parent=this;e.dispatchEvent({type:"added"});this.children.push(e)}else{console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e)}return this},remove:function(e){if(arguments.length>1){for(var t=0;t<arguments.length;t++){this.remove(arguments[t])}return this}var i=this.children.indexOf(e);if(i!==-1){e.parent=null;e.dispatchEvent({type:"removed"});this.children.splice(i,1)}return this},getObjectById:function(e){return this.getObjectByProperty("id",e)},getObjectByName:function(e){return this.getObjectByProperty("name",e)},getObjectByProperty:function(e,t){if(this[e]===t)return this;for(var i=0,n=this.children.length;i<n;i++){var r=this.children[i];var a=r.getObjectByProperty(e,t);if(a!==undefined){return a}}return undefined},getWorldPosition:function(e){var t=e||new At;this.updateMatrixWorld(true);return t.setFromMatrixPosition(this.matrixWorld)},getWorldQuaternion:function(){var e=new At;var t=new At;return function i(n){var r=n||new Et;this.updateMatrixWorld(true);this.matrixWorld.decompose(e,r,t);return r}}(),getWorldRotation:function(){var e=new Et;return function t(i){var n=i||new Gr;this.getWorldQuaternion(e);return n.setFromQuaternion(e,this.rotation.order,false)}}(),getWorldScale:function(){var e=new At;var t=new Et;return function i(n){var r=n||new At;this.updateMatrixWorld(true);this.matrixWorld.decompose(e,t,r);return r}}(),getWorldDirection:function(){var e=new Et;return function t(i){var n=i||new At;this.getWorldQuaternion(e);return n.set(0,0,1).applyQuaternion(e)}}(),raycast:function(){},traverse:function(e){e(this);var t=this.children;for(var i=0,n=t.length;i<n;i++){t[i].traverse(e)}},traverseVisible:function(e){if(this.visible===false)return;e(this);var t=this.children;for(var i=0,n=t.length;i<n;i++){t[i].traverseVisible(e)}},traverseAncestors:function(e){var t=this.parent;if(t!==null){e(t);t.traverseAncestors(e)}},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale);this.matrixWorldNeedsUpdate=true},updateMatrixWorld:function(e){if(this.matrixAutoUpdate)this.updateMatrix();if(this.matrixWorldNeedsUpdate||e){if(this.parent===null){this.matrixWorld.copy(this.matrix)}else{this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)}this.matrixWorldNeedsUpdate=false;e=true}var t=this.children;for(var i=0,n=t.length;i<n;i++){t[i].updateMatrixWorld(e)}},toJSON:function(e){var t=e===undefined||e==="";var i={};if(t){e={geometries:{},materials:{},textures:{},images:{}};i.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"}}var n={};n.uuid=this.uuid;n.type=this.type;if(this.name!=="")n.name=this.name;if(this.castShadow===true)n.castShadow=true;if(this.receiveShadow===true)n.receiveShadow=true;if(this.visible===false)n.visible=false;if(JSON.stringify(this.userData)!=="{}")n.userData=this.userData;n.matrix=this.matrix.toArray();function r(t,i){if(t[i.uuid]===undefined){t[i.uuid]=i.toJSON(e)}return i.uuid}if(this.geometry!==undefined){n.geometry=r(e.geometries,this.geometry)}if(this.material!==undefined){if(Array.isArray(this.material)){var a=[];for(var s=0,o=this.material.length;s<o;s++){a.push(r(e.materials,this.material[s]))}n.material=a}else{n.material=r(e.materials,this.material)}}if(this.children.length>0){n.children=[];for(var s=0;s<this.children.length;s++){n.children.push(this.children[s].toJSON(e).object)}}if(t){var l=f(e.geometries);var u=f(e.materials);var c=f(e.textures);var h=f(e.images);if(l.length>0)i.geometries=l;if(u.length>0)i.materials=u;if(c.length>0)i.textures=c;if(h.length>0)i.images=h}i.object=n;return i;function f(e){var t=[];for(var i in e){var n=e[i];delete n.metadata;t.push(n)}return t}},clone:function(e){return(new this.constructor).copy(this,e)},copy:function(e,t){if(t===undefined)t=true;this.name=e.name;this.up.copy(e.up);this.position.copy(e.position);this.quaternion.copy(e.quaternion);this.scale.copy(e.scale);this.matrix.copy(e.matrix);this.matrixWorld.copy(e.matrixWorld);this.matrixAutoUpdate=e.matrixAutoUpdate;this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate;this.layers.mask=e.layers.mask;this.visible=e.visible;this.castShadow=e.castShadow;this.receiveShadow=e.receiveShadow;this.frustumCulled=e.frustumCulled;this.renderOrder=e.renderOrder;this.userData=JSON.parse(JSON.stringify(e.userData));if(t===true){for(var i=0;i<e.children.length;i++){var n=e.children[i];this.add(n.clone())}}return this}});function Xr(){Wr.call(this);this.type="Camera";this.matrixWorldInverse=new Pt;this.projectionMatrix=new Pt}Xr.prototype=Object.assign(Object.create(Wr.prototype),{constructor:Xr,isCamera:true,copy:function(e,t){Wr.prototype.copy.call(this,e,t);this.matrixWorldInverse.copy(e.matrixWorldInverse);this.projectionMatrix.copy(e.projectionMatrix);return this},getWorldDirection:function(){var e=new Et;return function t(i){var n=i||new At;this.getWorldQuaternion(e);return n.set(0,0,-1).applyQuaternion(e)}}(),updateMatrixWorld:function(e){Wr.prototype.updateMatrixWorld.call(this,e);this.matrixWorldInverse.getInverse(this.matrixWorld)},clone:function(){return(new this.constructor).copy(this)}});function Yr(e,t,i,n,r,a){Xr.call(this);this.type="OrthographicCamera";this.zoom=1;this.view=null;this.left=e;this.right=t;this.top=i;this.bottom=n;this.near=r!==undefined?r:.1;this.far=a!==undefined?a:2e3;this.updateProjectionMatrix()}Yr.prototype=Object.assign(Object.create(Xr.prototype),{constructor:Yr,isOrthographicCamera:true,copy:function(e,t){Xr.prototype.copy.call(this,e,t);this.left=e.left;this.right=e.right;this.top=e.top;this.bottom=e.bottom;this.near=e.near;this.far=e.far;this.zoom=e.zoom;this.view=e.view===null?null:Object.assign({},e.view);return this},setViewOffset:function(e,t,i,n,r,a){this.view={fullWidth:e,fullHeight:t,offsetX:i,offsetY:n,width:r,height:a};this.updateProjectionMatrix()},clearViewOffset:function(){this.view=null;this.updateProjectionMatrix()},updateProjectionMatrix:function(){var e=(this.right-this.left)/(2*this.zoom);var t=(this.top-this.bottom)/(2*this.zoom);var i=(this.right+this.left)/2;var n=(this.top+this.bottom)/2;var r=i-e;var a=i+e;var s=n+t;var o=n-t;if(this.view!==null){var l=this.zoom/(this.view.width/this.view.fullWidth);var u=this.zoom/(this.view.height/this.view.fullHeight);var c=(this.right-this.left)/this.view.width;var h=(this.top-this.bottom)/this.view.height;r+=c*(this.view.offsetX/l);a=r+c*(this.view.width/l);s-=h*(this.view.offsetY/u);o=s-h*(this.view.height/u)}this.projectionMatrix.makeOrthographic(r,a,s,o,this.near,this.far)},toJSON:function(e){var t=Wr.prototype.toJSON.call(this,e);t.object.zoom=this.zoom;t.object.left=this.left;t.object.right=this.right;t.object.top=this.top;t.object.bottom=this.bottom;t.object.near=this.near;t.object.far=this.far;if(this.view!==null)t.object.view=Object.assign({},this.view);return t}});function qr(e,t,i,n){Xr.call(this);this.type="PerspectiveCamera";this.fov=e!==undefined?e:50;this.zoom=1;this.near=i!==undefined?i:.1;this.far=n!==undefined?n:2e3;this.focus=10;this.aspect=t!==undefined?t:1;this.view=null;this.filmGauge=35;this.filmOffset=0;this.updateProjectionMatrix()}qr.prototype=Object.assign(Object.create(Xr.prototype),{constructor:qr,isPerspectiveCamera:true,copy:function(e,t){Xr.prototype.copy.call(this,e,t);this.fov=e.fov;this.zoom=e.zoom;this.near=e.near;this.far=e.far;this.focus=e.focus;this.aspect=e.aspect;this.view=e.view===null?null:Object.assign({},e.view);this.filmGauge=e.filmGauge;this.filmOffset=e.filmOffset;return this},setFocalLength:function(e){var t=.5*this.getFilmHeight()/e;this.fov=bt.RAD2DEG*2*Math.atan(t);this.updateProjectionMatrix()},getFocalLength:function(){var e=Math.tan(bt.DEG2RAD*.5*this.fov);return.5*this.getFilmHeight()/e},getEffectiveFOV:function(){return bt.RAD2DEG*2*Math.atan(Math.tan(bt.DEG2RAD*.5*this.fov)/this.zoom)},getFilmWidth:function(){return this.filmGauge*Math.min(this.aspect,1)},getFilmHeight:function(){return this.filmGauge/Math.max(this.aspect,1)},setViewOffset:function(e,t,i,n,r,a){this.aspect=e/t;this.view={fullWidth:e,fullHeight:t,offsetX:i,offsetY:n,width:r,height:a};this.updateProjectionMatrix()},clearViewOffset:function(){this.view=null;this.updateProjectionMatrix()},updateProjectionMatrix:function(){var e=this.near,t=e*Math.tan(bt.DEG2RAD*.5*this.fov)/this.zoom,i=2*t,n=this.aspect*i,r=-.5*n,a=this.view;if(a!==null){var s=a.fullWidth,o=a.fullHeight;r+=a.offsetX*n/s;t-=a.offsetY*i/o;n*=a.width/s;i*=a.height/o}var l=this.filmOffset;if(l!==0)r+=e*l/this.getFilmWidth();this.projectionMatrix.makePerspective(r,r+n,t,t-i,e,this.far)},toJSON:function(e){var t=Wr.prototype.toJSON.call(this,e);t.object.fov=this.fov;t.object.zoom=this.zoom;t.object.near=this.near;t.object.far=this.far;t.object.focus=this.focus;t.object.aspect=this.aspect;if(this.view!==null)t.object.view=Object.assign({},this.view);t.object.filmGauge=this.filmGauge;t.object.filmOffset=this.filmOffset;return t}});function Zr(e,t,i,n,r,a){this.a=e;this.b=t;this.c=i;this.normal=n&&n.isVector3?n:new At;this.vertexNormals=Array.isArray(n)?n:[];this.color=r&&r.isColor?r:new bi;this.vertexColors=Array.isArray(r)?r:[];this.materialIndex=a!==undefined?a:0}Object.assign(Zr.prototype,{clone:function(){return(new this.constructor).copy(this)},copy:function(e){this.a=e.a;this.b=e.b;this.c=e.c;this.normal.copy(e.normal);this.color.copy(e.color);this.materialIndex=e.materialIndex;for(var t=0,i=e.vertexNormals.length;t<i;t++){this.vertexNormals[t]=e.vertexNormals[t].clone()}for(var t=0,i=e.vertexColors.length;t<i;t++){this.vertexColors[t]=e.vertexColors[t].clone()}return this}});var Jr=0;function Kr(){return Jr++}function Qr(){Object.defineProperty(this,"id",{value:Kr()});this.uuid=bt.generateUUID();this.name="";this.type="Geometry";this.vertices=[];this.colors=[];this.faces=[];this.faceVertexUvs=[[]];this.morphTargets=[];this.morphNormals=[];this.skinWeights=[];this.skinIndices=[];this.lineDistances=[];this.boundingBox=null;this.boundingSphere=null;this.elementsNeedUpdate=false;this.verticesNeedUpdate=false;this.uvsNeedUpdate=false;this.normalsNeedUpdate=false;this.colorsNeedUpdate=false;this.lineDistancesNeedUpdate=false;this.groupsNeedUpdate=false}Object.assign(Qr.prototype,t.prototype,{isGeometry:true,applyMatrix:function(e){var t=(new Fr).getNormalMatrix(e);for(var i=0,n=this.vertices.length;i<n;i++){var r=this.vertices[i];r.applyMatrix4(e)}for(var i=0,n=this.faces.length;i<n;i++){var a=this.faces[i];a.normal.applyMatrix3(t).normalize();for(var s=0,o=a.vertexNormals.length;s<o;s++){a.vertexNormals[s].applyMatrix3(t).normalize()}}if(this.boundingBox!==null){this.computeBoundingBox()}if(this.boundingSphere!==null){this.computeBoundingSphere()}this.verticesNeedUpdate=true;this.normalsNeedUpdate=true;return this},rotateX:function(){var e=new Pt;return function t(i){e.makeRotationX(i);this.applyMatrix(e);return this}}(),rotateY:function(){var e=new Pt;return function t(i){e.makeRotationY(i);this.applyMatrix(e);return this}}(),rotateZ:function(){var e=new Pt;return function t(i){e.makeRotationZ(i);this.applyMatrix(e);return this}}(),translate:function(){var e=new Pt;return function t(i,n,r){e.makeTranslation(i,n,r);this.applyMatrix(e);return this}}(),scale:function(){var e=new Pt;return function t(i,n,r){e.makeScale(i,n,r);this.applyMatrix(e);return this}}(),lookAt:function(){var e=new Wr;return function t(i){e.lookAt(i);e.updateMatrix();this.applyMatrix(e.matrix)}}(),fromBufferGeometry:function(e){var t=this;var i=e.index!==null?e.index.array:undefined;var n=e.attributes;var r=n.position.array;var a=n.normal!==undefined?n.normal.array:undefined;var s=n.color!==undefined?n.color.array:undefined;var o=n.uv!==undefined?n.uv.array:undefined;var l=n.uv2!==undefined?n.uv2.array:undefined;if(l!==undefined)this.faceVertexUvs[1]=[];var u=[];var c=[];var h=[];for(var f=0,d=0;f<r.length;f+=3,d+=2){t.vertices.push(new At(r[f],r[f+1],r[f+2]));if(a!==undefined){u.push(new At(a[f],a[f+1],a[f+2]))}if(s!==undefined){t.colors.push(new bi(s[f],s[f+1],s[f+2]))}if(o!==undefined){c.push(new xt(o[d],o[d+1]))}if(l!==undefined){h.push(new xt(l[d],l[d+1]))}}function p(e,i,n,r){var f=a!==undefined?[u[e].clone(),u[i].clone(),u[n].clone()]:[];var d=s!==undefined?[t.colors[e].clone(),t.colors[i].clone(),t.colors[n].clone()]:[];var p=new Zr(e,i,n,f,d,r);t.faces.push(p);if(o!==undefined){t.faceVertexUvs[0].push([c[e].clone(),c[i].clone(),c[n].clone()])}if(l!==undefined){t.faceVertexUvs[1].push([h[e].clone(),h[i].clone(),h[n].clone()])}}var m=e.groups;if(m.length>0){for(var f=0;f<m.length;f++){var v=m[f];var g=v.start;var y=v.count;for(var d=g,b=g+y;d<b;d+=3){if(i!==undefined){p(i[d],i[d+1],i[d+2],v.materialIndex)}else{p(d,d+1,d+2,v.materialIndex)}}}}else{if(i!==undefined){for(var f=0;f<i.length;f+=3){p(i[f],i[f+1],i[f+2])}}else{for(var f=0;f<r.length/3;f+=3){p(f,f+1,f+2)}}}this.computeFaceNormals();if(e.boundingBox!==null){this.boundingBox=e.boundingBox.clone()}if(e.boundingSphere!==null){this.boundingSphere=e.boundingSphere.clone()}return this},center:function(){this.computeBoundingBox();var e=this.boundingBox.getCenter().negate();this.translate(e.x,e.y,e.z);return e},normalize:function(){this.computeBoundingSphere();var e=this.boundingSphere.center;var t=this.boundingSphere.radius;var i=t===0?1:1/t;var n=new Pt;n.set(i,0,0,-i*e.x,0,i,0,-i*e.y,0,0,i,-i*e.z,0,0,0,1);this.applyMatrix(n);return this},computeFaceNormals:function(){var e=new At,t=new At;for(var i=0,n=this.faces.length;i<n;i++){var r=this.faces[i];var a=this.vertices[r.a];var s=this.vertices[r.b];var o=this.vertices[r.c];e.subVectors(o,s);t.subVectors(a,s);e.cross(t);e.normalize();r.normal.copy(e)}},computeVertexNormals:function(e){if(e===undefined)e=true;var t,i,n,r,a,s;s=new Array(this.vertices.length);for(t=0,i=this.vertices.length;t<i;t++){s[t]=new At}if(e){var o,l,u;var c=new At,h=new At;for(n=0,r=this.faces.length;n<r;n++){a=this.faces[n];o=this.vertices[a.a];l=this.vertices[a.b];u=this.vertices[a.c];c.subVectors(u,l);h.subVectors(o,l);c.cross(h);s[a.a].add(c);s[a.b].add(c);s[a.c].add(c)}}else{this.computeFaceNormals();for(n=0,r=this.faces.length;n<r;n++){a=this.faces[n];s[a.a].add(a.normal);s[a.b].add(a.normal);s[a.c].add(a.normal)}}for(t=0,i=this.vertices.length;t<i;t++){s[t].normalize()}for(n=0,r=this.faces.length;n<r;n++){a=this.faces[n];var f=a.vertexNormals;if(f.length===3){f[0].copy(s[a.a]);f[1].copy(s[a.b]);f[2].copy(s[a.c])}else{f[0]=s[a.a].clone();f[1]=s[a.b].clone();f[2]=s[a.c].clone()}}if(this.faces.length>0){this.normalsNeedUpdate=true}},computeFlatVertexNormals:function(){var e,t,i;this.computeFaceNormals();for(e=0,t=this.faces.length;e<t;e++){i=this.faces[e];var n=i.vertexNormals;if(n.length===3){n[0].copy(i.normal);n[1].copy(i.normal);n[2].copy(i.normal)}else{n[0]=i.normal.clone();n[1]=i.normal.clone();n[2]=i.normal.clone()}}if(this.faces.length>0){this.normalsNeedUpdate=true}},computeMorphNormals:function(){var e,t,i,n,r;for(i=0,n=this.faces.length;i<n;i++){r=this.faces[i];if(!r.__originalFaceNormal){r.__originalFaceNormal=r.normal.clone()}else{r.__originalFaceNormal.copy(r.normal)}if(!r.__originalVertexNormals)r.__originalVertexNormals=[];for(e=0,t=r.vertexNormals.length;e<t;e++){if(!r.__originalVertexNormals[e]){r.__originalVertexNormals[e]=r.vertexNormals[e].clone()}else{r.__originalVertexNormals[e].copy(r.vertexNormals[e])}}}var a=new Qr;a.faces=this.faces;for(e=0,t=this.morphTargets.length;e<t;e++){if(!this.morphNormals[e]){this.morphNormals[e]={};this.morphNormals[e].faceNormals=[];this.morphNormals[e].vertexNormals=[];var s=this.morphNormals[e].faceNormals;var o=this.morphNormals[e].vertexNormals;var l,u;for(i=0,n=this.faces.length;i<n;i++){l=new At;u={a:new At,b:new At,c:new At};s.push(l);o.push(u)}}var c=this.morphNormals[e];a.vertices=this.morphTargets[e].vertices;a.computeFaceNormals();a.computeVertexNormals();var l,u;for(i=0,n=this.faces.length;i<n;i++){r=this.faces[i];l=c.faceNormals[i];u=c.vertexNormals[i];l.copy(r.normal);u.a.copy(r.vertexNormals[0]);u.b.copy(r.vertexNormals[1]);u.c.copy(r.vertexNormals[2])}}for(i=0,n=this.faces.length;i<n;i++){r=this.faces[i];r.normal=r.__originalFaceNormal;r.vertexNormals=r.__originalVertexNormals}},computeLineDistances:function(){var e=0;var t=this.vertices;for(var i=0,n=t.length;i<n;i++){if(i>0){e+=t[i].distanceTo(t[i-1])}this.lineDistances[i]=e}},computeBoundingBox:function(){if(this.boundingBox===null){this.boundingBox=new kr}this.boundingBox.setFromPoints(this.vertices)},computeBoundingSphere:function(){if(this.boundingSphere===null){this.boundingSphere=new Ur}this.boundingSphere.setFromPoints(this.vertices)},merge:function(e,t,i){if(!(e&&e.isGeometry)){console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",e);return}var n,r=this.vertices.length,a=this.vertices,s=e.vertices,o=this.faces,l=e.faces,u=this.faceVertexUvs[0],c=e.faceVertexUvs[0],h=this.colors,f=e.colors;if(i===undefined)i=0;if(t!==undefined){n=(new Fr).getNormalMatrix(t)}for(var d=0,p=s.length;d<p;d++){var m=s[d];var v=m.clone();if(t!==undefined)v.applyMatrix4(t);a.push(v)}for(var d=0,p=f.length;d<p;d++){h.push(f[d].clone())}for(d=0,p=l.length;d<p;d++){var g=l[d],y,b,x,_=g.vertexNormals,w=g.vertexColors;y=new Zr(g.a+r,g.b+r,g.c+r);y.normal.copy(g.normal);if(n!==undefined){y.normal.applyMatrix3(n).normalize()}for(var T=0,M=_.length;T<M;T++){b=_[T].clone();if(n!==undefined){b.applyMatrix3(n).normalize()}y.vertexNormals.push(b)}y.color.copy(g.color);for(var T=0,M=w.length;T<M;T++){x=w[T];y.vertexColors.push(x.clone())}y.materialIndex=g.materialIndex+i;o.push(y)}for(d=0,p=c.length;d<p;d++){var S=c[d],E=[];if(S===undefined){continue}for(var T=0,M=S.length;T<M;T++){E.push(S[T].clone())}u.push(E)}},mergeMesh:function(e){if(!(e&&e.isMesh)){console.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.",e);return}e.matrixAutoUpdate&&e.updateMatrix();this.merge(e.geometry,e.matrix)},mergeVertices:function(){var e={};var t=[],i=[];var n,r;var a=4;var s=Math.pow(10,a);var o,l,u;var c,h,f;for(o=0,l=this.vertices.length;o<l;o++){n=this.vertices[o];r=Math.round(n.x*s)+"_"+Math.round(n.y*s)+"_"+Math.round(n.z*s);if(e[r]===undefined){e[r]=o;t.push(this.vertices[o]);i[o]=t.length-1}else{i[o]=i[e[r]]}}var d=[];for(o=0,l=this.faces.length;o<l;o++){u=this.faces[o];u.a=i[u.a];u.b=i[u.b];u.c=i[u.c];c=[u.a,u.b,u.c];for(var p=0;p<3;p++){if(c[p]===c[(p+1)%3]){d.push(o);break}}}for(o=d.length-1;o>=0;o--){var m=d[o];this.faces.splice(m,1);for(h=0,f=this.faceVertexUvs.length;h<f;h++){this.faceVertexUvs[h].splice(m,1)}}var v=this.vertices.length-t.length;this.vertices=t;return v},sortFacesByMaterialIndex:function(){var e=this.faces;var t=e.length;for(var i=0;i<t;i++){e[i]._id=i}function n(e,t){return e.materialIndex-t.materialIndex}e.sort(n);var r=this.faceVertexUvs[0];var a=this.faceVertexUvs[1];var s,o;if(r&&r.length===t)s=[];if(a&&a.length===t)o=[];for(var i=0;i<t;i++){var l=e[i]._id;if(s)s.push(r[l]);if(o)o.push(a[l])}if(s)this.faceVertexUvs[0]=s;if(o)this.faceVertexUvs[1]=o},toJSON:function(){var e={metadata:{version:4.5,type:"Geometry",generator:"Geometry.toJSON"}};e.uuid=this.uuid;e.type=this.type;if(this.name!=="")e.name=this.name;if(this.parameters!==undefined){var t=this.parameters;for(var i in t){if(t[i]!==undefined)e[i]=t[i]}return e}var n=[];for(var r=0;r<this.vertices.length;r++){var a=this.vertices[r];n.push(a.x,a.y,a.z)}var s=[];var o=[];var l={};var u=[];var c={};var h=[];var f={};for(var r=0;r<this.faces.length;r++){var d=this.faces[r];var p=true;var m=false;var v=this.faceVertexUvs[0][r]!==undefined;var g=d.normal.length()>0;var y=d.vertexNormals.length>0;var b=d.color.r!==1||d.color.g!==1||d.color.b!==1;var x=d.vertexColors.length>0;var _=0;_=S(_,0,0);_=S(_,1,p);_=S(_,2,m);_=S(_,3,v);_=S(_,4,g);_=S(_,5,y);_=S(_,6,b);_=S(_,7,x);s.push(_);s.push(d.a,d.b,d.c);s.push(d.materialIndex);if(v){var w=this.faceVertexUvs[0][r];s.push(P(w[0]),P(w[1]),P(w[2]))}if(g){s.push(E(d.normal))}if(y){var T=d.vertexNormals;s.push(E(T[0]),E(T[1]),E(T[2]))}if(b){s.push(A(d.color))}if(x){var M=d.vertexColors;s.push(A(M[0]),A(M[1]),A(M[2]))}}function S(e,t,i){return i?e|1<<t:e&~(1<<t)}function E(e){var t=e.x.toString()+e.y.toString()+e.z.toString();if(l[t]!==undefined){return l[t]}l[t]=o.length/3;o.push(e.x,e.y,e.z);return l[t]}function A(e){var t=e.r.toString()+e.g.toString()+e.b.toString();if(c[t]!==undefined){return c[t]}c[t]=u.length;u.push(e.getHex());return c[t]}function P(e){var t=e.x.toString()+e.y.toString();if(f[t]!==undefined){return f[t]}f[t]=h.length/2;h.push(e.x,e.y);return f[t]}e.data={};e.data.vertices=n;e.data.normals=o;if(u.length>0)e.data.colors=u;if(h.length>0)e.data.uvs=[h];e.data.faces=s;return e},clone:function(){return(new Qr).copy(this)},copy:function(e){var t,i,n,r,a,s;this.vertices=[];this.colors=[];this.faces=[];this.faceVertexUvs=[[]];this.morphTargets=[];this.morphNormals=[];this.skinWeights=[];this.skinIndices=[];this.lineDistances=[];this.boundingBox=null;this.boundingSphere=null;this.name=e.name;var o=e.vertices;for(t=0,i=o.length;t<i;t++){this.vertices.push(o[t].clone())}var l=e.colors;for(t=0,i=l.length;t<i;t++){this.colors.push(l[t].clone())}var u=e.faces;for(t=0,i=u.length;t<i;t++){this.faces.push(u[t].clone())}for(t=0,i=e.faceVertexUvs.length;t<i;t++){var c=e.faceVertexUvs[t];if(this.faceVertexUvs[t]===undefined){this.faceVertexUvs[t]=[]}for(n=0,r=c.length;n<r;n++){var h=c[n],f=[];for(a=0,s=h.length;a<s;a++){var d=h[a];f.push(d.clone())}this.faceVertexUvs[t].push(f)}}var p=e.morphTargets;for(t=0,i=p.length;t<i;t++){var m={};m.name=p[t].name;if(p[t].vertices!==undefined){m.vertices=[];for(n=0,r=p[t].vertices.length;n<r;n++){m.vertices.push(p[t].vertices[n].clone())}}if(p[t].normals!==undefined){m.normals=[];for(n=0,r=p[t].normals.length;n<r;n++){m.normals.push(p[t].normals[n].clone())}}this.morphTargets.push(m)}var v=e.morphNormals;for(t=0,i=v.length;t<i;t++){var g={};if(v[t].vertexNormals!==undefined){g.vertexNormals=[];for(n=0,r=v[t].vertexNormals.length;n<r;n++){var y=v[t].vertexNormals[n];var b={};b.a=y.a.clone();b.b=y.b.clone();b.c=y.c.clone();g.vertexNormals.push(b)}}if(v[t].faceNormals!==undefined){g.faceNormals=[];for(n=0,r=v[t].faceNormals.length;n<r;n++){g.faceNormals.push(v[t].faceNormals[n].clone())}}this.morphNormals.push(g)}var x=e.skinWeights;for(t=0,i=x.length;t<i;t++){this.skinWeights.push(x[t].clone())}var _=e.skinIndices;for(t=0,i=_.length;t<i;t++){this.skinIndices.push(_[t].clone())}var w=e.lineDistances;for(t=0,i=w.length;t<i;t++){this.lineDistances.push(w[t])}var T=e.boundingBox;if(T!==null){this.boundingBox=T.clone()}var M=e.boundingSphere;if(M!==null){this.boundingSphere=M.clone()}this.elementsNeedUpdate=e.elementsNeedUpdate;this.verticesNeedUpdate=e.verticesNeedUpdate;this.uvsNeedUpdate=e.uvsNeedUpdate;this.normalsNeedUpdate=e.normalsNeedUpdate;this.colorsNeedUpdate=e.colorsNeedUpdate;this.lineDistancesNeedUpdate=e.lineDistancesNeedUpdate;this.groupsNeedUpdate=e.groupsNeedUpdate;return this},dispose:function(){this.dispatchEvent({type:"dispose"})}});function $r(e,t,i){if(Array.isArray(e)){throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.")}this.uuid=bt.generateUUID();this.name="";this.array=e;this.itemSize=t;this.count=e!==undefined?e.length/t:0;this.normalized=i===true;this.dynamic=false;this.updateRange={offset:0,count:-1};this.onUploadCallback=function(){};this.version=0}Object.defineProperty($r.prototype,"needsUpdate",{set:function(e){if(e===true)this.version++}});Object.assign($r.prototype,{isBufferAttribute:true,setArray:function(e){if(Array.isArray(e)){throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.")}this.count=e!==undefined?e.length/this.itemSize:0;this.array=e},setDynamic:function(e){this.dynamic=e;return this},copy:function(e){this.array=new e.array.constructor(e.array);this.itemSize=e.itemSize;this.count=e.count;this.normalized=e.normalized;this.dynamic=e.dynamic;return this},copyAt:function(e,t,i){e*=this.itemSize;i*=t.itemSize;for(var n=0,r=this.itemSize;n<r;n++){this.array[e+n]=t.array[i+n]}return this},copyArray:function(e){this.array.set(e);return this},copyColorsArray:function(e){var t=this.array,i=0;for(var n=0,r=e.length;n<r;n++){var a=e[n];if(a===undefined){console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",n);a=new bi}t[i++]=a.r;t[i++]=a.g;t[i++]=a.b}return this},copyIndicesArray:function(e){var t=this.array,i=0;for(var n=0,r=e.length;n<r;n++){var a=e[n];t[i++]=a.a;t[i++]=a.b;t[i++]=a.c}return this},copyVector2sArray:function(e){var t=this.array,i=0;for(var n=0,r=e.length;n<r;n++){var a=e[n];if(a===undefined){console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",n);a=new xt}t[i++]=a.x;t[i++]=a.y}return this},copyVector3sArray:function(e){var t=this.array,i=0;for(var n=0,r=e.length;n<r;n++){var a=e[n];if(a===undefined){console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",n);a=new At}t[i++]=a.x;t[i++]=a.y;t[i++]=a.z}return this},copyVector4sArray:function(e){var t=this.array,i=0;for(var n=0,r=e.length;n<r;n++){var a=e[n];if(a===undefined){console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",n);a=new Tt}t[i++]=a.x;t[i++]=a.y;t[i++]=a.z;t[i++]=a.w}return this},set:function(e,t){if(t===undefined)t=0;this.array.set(e,t);return this},getX:function(e){return this.array[e*this.itemSize]},setX:function(e,t){this.array[e*this.itemSize]=t;return this},getY:function(e){return this.array[e*this.itemSize+1]},setY:function(e,t){this.array[e*this.itemSize+1]=t;return this},getZ:function(e){return this.array[e*this.itemSize+2]},setZ:function(e,t){this.array[e*this.itemSize+2]=t;return this},getW:function(e){return this.array[e*this.itemSize+3]},setW:function(e,t){this.array[e*this.itemSize+3]=t;return this},setXY:function(e,t,i){e*=this.itemSize;this.array[e+0]=t;this.array[e+1]=i;return this},setXYZ:function(e,t,i,n){e*=this.itemSize;this.array[e+0]=t;this.array[e+1]=i;this.array[e+2]=n;return this},setXYZW:function(e,t,i,n,r){e*=this.itemSize;this.array[e+0]=t;this.array[e+1]=i;this.array[e+2]=n;this.array[e+3]=r;return this},onUpload:function(e){this.onUploadCallback=e;return this},clone:function(){return new this.constructor(this.array,this.itemSize).copy(this)}});function ea(e,t){$r.call(this,new Int8Array(e),t)}ea.prototype=Object.create($r.prototype);ea.prototype.constructor=ea;function ta(e,t){$r.call(this,new Uint8Array(e),t)}ta.prototype=Object.create($r.prototype);ta.prototype.constructor=ta;function ia(e,t){$r.call(this,new Uint8ClampedArray(e),t)}ia.prototype=Object.create($r.prototype);ia.prototype.constructor=ia;function na(e,t){$r.call(this,new Int16Array(e),t)}na.prototype=Object.create($r.prototype);na.prototype.constructor=na;function ra(e,t){$r.call(this,new Uint16Array(e),t)}ra.prototype=Object.create($r.prototype);ra.prototype.constructor=ra;function aa(e,t){$r.call(this,new Int32Array(e),t)}aa.prototype=Object.create($r.prototype);aa.prototype.constructor=aa;function sa(e,t){$r.call(this,new Uint32Array(e),t)}sa.prototype=Object.create($r.prototype);sa.prototype.constructor=sa;function oa(e,t){$r.call(this,new Float32Array(e),t)}oa.prototype=Object.create($r.prototype);oa.prototype.constructor=oa;function la(e,t){$r.call(this,new Float64Array(e),t)}la.prototype=Object.create($r.prototype);la.prototype.constructor=la;function ua(){this.indices=[];this.vertices=[];this.normals=[];this.colors=[];this.uvs=[];this.uvs2=[];this.groups=[];this.morphTargets={};this.skinWeights=[];this.skinIndices=[];this.boundingBox=null;this.boundingSphere=null;this.verticesNeedUpdate=false;this.normalsNeedUpdate=false;this.colorsNeedUpdate=false;this.uvsNeedUpdate=false;this.groupsNeedUpdate=false}Object.assign(ua.prototype,{computeGroups:function(e){var t;var i=[];var n=undefined;var r=e.faces;for(var a=0;a<r.length;a++){var s=r[a];if(s.materialIndex!==n){n=s.materialIndex;if(t!==undefined){t.count=a*3-t.start;i.push(t)}t={start:a*3,materialIndex:n}}}if(t!==undefined){t.count=a*3-t.start;i.push(t)}this.groups=i},fromGeometry:function(e){var t=e.faces;var i=e.vertices;var n=e.faceVertexUvs;var r=n[0]&&n[0].length>0;var a=n[1]&&n[1].length>0;var s=e.morphTargets;var o=s.length;var l;if(o>0){l=[];for(var u=0;u<o;u++){l[u]=[]}this.morphTargets.position=l}var c=e.morphNormals;var h=c.length;var f;if(h>0){f=[];for(var u=0;u<h;u++){f[u]=[]}this.morphTargets.normal=f}var d=e.skinIndices;var p=e.skinWeights;var m=d.length===i.length;var v=p.length===i.length;for(var u=0;u<t.length;u++){var g=t[u];this.vertices.push(i[g.a],i[g.b],i[g.c]);var y=g.vertexNormals;if(y.length===3){this.normals.push(y[0],y[1],y[2])}else{var b=g.normal;this.normals.push(b,b,b)}var x=g.vertexColors;if(x.length===3){this.colors.push(x[0],x[1],x[2])}else{var _=g.color;this.colors.push(_,_,_)}if(r===true){var w=n[0][u];if(w!==undefined){this.uvs.push(w[0],w[1],w[2])}else{console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ",u);this.uvs.push(new xt,new xt,new xt)}}
if(a===true){var w=n[1][u];if(w!==undefined){this.uvs2.push(w[0],w[1],w[2])}else{console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ",u);this.uvs2.push(new xt,new xt,new xt)}}for(var T=0;T<o;T++){var M=s[T].vertices;l[T].push(M[g.a],M[g.b],M[g.c])}for(var T=0;T<h;T++){var S=c[T].vertexNormals[u];f[T].push(S.a,S.b,S.c)}if(m){this.skinIndices.push(d[g.a],d[g.b],d[g.c])}if(v){this.skinWeights.push(p[g.a],p[g.b],p[g.c])}}this.computeGroups(e);this.verticesNeedUpdate=e.verticesNeedUpdate;this.normalsNeedUpdate=e.normalsNeedUpdate;this.colorsNeedUpdate=e.colorsNeedUpdate;this.uvsNeedUpdate=e.uvsNeedUpdate;this.groupsNeedUpdate=e.groupsNeedUpdate;return this}});function ca(e){if(e.length===0)return-Infinity;var t=e[0];for(var i=1,n=e.length;i<n;++i){if(e[i]>t)t=e[i]}return t}function ha(){Object.defineProperty(this,"id",{value:Kr()});this.uuid=bt.generateUUID();this.name="";this.type="BufferGeometry";this.index=null;this.attributes={};this.morphAttributes={};this.groups=[];this.boundingBox=null;this.boundingSphere=null;this.drawRange={start:0,count:Infinity}}ha.MaxIndex=65535;Object.assign(ha.prototype,t.prototype,{isBufferGeometry:true,getIndex:function(){return this.index},setIndex:function(e){if(Array.isArray(e)){this.index=new(ca(e)>65535?sa:ra)(e,1)}else{this.index=e}},addAttribute:function(e,t){if(!(t&&t.isBufferAttribute)&&!(t&&t.isInterleavedBufferAttribute)){console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute ).");this.addAttribute(e,new $r(arguments[1],arguments[2]));return}if(e==="index"){console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute.");this.setIndex(t);return}this.attributes[e]=t;return this},getAttribute:function(e){return this.attributes[e]},removeAttribute:function(e){delete this.attributes[e];return this},addGroup:function(e,t,i){this.groups.push({start:e,count:t,materialIndex:i!==undefined?i:0})},clearGroups:function(){this.groups=[]},setDrawRange:function(e,t){this.drawRange.start=e;this.drawRange.count=t},applyMatrix:function(e){var t=this.attributes.position;if(t!==undefined){e.applyToBufferAttribute(t);t.needsUpdate=true}var i=this.attributes.normal;if(i!==undefined){var n=(new Fr).getNormalMatrix(e);n.applyToBufferAttribute(i);i.needsUpdate=true}if(this.boundingBox!==null){this.computeBoundingBox()}if(this.boundingSphere!==null){this.computeBoundingSphere()}return this},rotateX:function(){var e=new Pt;return function t(i){e.makeRotationX(i);this.applyMatrix(e);return this}}(),rotateY:function(){var e=new Pt;return function t(i){e.makeRotationY(i);this.applyMatrix(e);return this}}(),rotateZ:function(){var e=new Pt;return function t(i){e.makeRotationZ(i);this.applyMatrix(e);return this}}(),translate:function(){var e=new Pt;return function t(i,n,r){e.makeTranslation(i,n,r);this.applyMatrix(e);return this}}(),scale:function(){var e=new Pt;return function t(i,n,r){e.makeScale(i,n,r);this.applyMatrix(e);return this}}(),lookAt:function(){var e=new Wr;return function t(i){e.lookAt(i);e.updateMatrix();this.applyMatrix(e.matrix)}}(),center:function(){this.computeBoundingBox();var e=this.boundingBox.getCenter().negate();this.translate(e.x,e.y,e.z);return e},setFromObject:function(e){var t=e.geometry;if(e.isPoints||e.isLine){var i=new oa(t.vertices.length*3,3);var n=new oa(t.colors.length*3,3);this.addAttribute("position",i.copyVector3sArray(t.vertices));this.addAttribute("color",n.copyColorsArray(t.colors));if(t.lineDistances&&t.lineDistances.length===t.vertices.length){var r=new oa(t.lineDistances.length,1);this.addAttribute("lineDistance",r.copyArray(t.lineDistances))}if(t.boundingSphere!==null){this.boundingSphere=t.boundingSphere.clone()}if(t.boundingBox!==null){this.boundingBox=t.boundingBox.clone()}}else if(e.isMesh){if(t&&t.isGeometry){this.fromGeometry(t)}}return this},updateFromObject:function(e){var t=e.geometry;if(e.isMesh){var i=t.__directGeometry;if(t.elementsNeedUpdate===true){i=undefined;t.elementsNeedUpdate=false}if(i===undefined){return this.fromGeometry(t)}i.verticesNeedUpdate=t.verticesNeedUpdate;i.normalsNeedUpdate=t.normalsNeedUpdate;i.colorsNeedUpdate=t.colorsNeedUpdate;i.uvsNeedUpdate=t.uvsNeedUpdate;i.groupsNeedUpdate=t.groupsNeedUpdate;t.verticesNeedUpdate=false;t.normalsNeedUpdate=false;t.colorsNeedUpdate=false;t.uvsNeedUpdate=false;t.groupsNeedUpdate=false;t=i}var n;if(t.verticesNeedUpdate===true){n=this.attributes.position;if(n!==undefined){n.copyVector3sArray(t.vertices);n.needsUpdate=true}t.verticesNeedUpdate=false}if(t.normalsNeedUpdate===true){n=this.attributes.normal;if(n!==undefined){n.copyVector3sArray(t.normals);n.needsUpdate=true}t.normalsNeedUpdate=false}if(t.colorsNeedUpdate===true){n=this.attributes.color;if(n!==undefined){n.copyColorsArray(t.colors);n.needsUpdate=true}t.colorsNeedUpdate=false}if(t.uvsNeedUpdate){n=this.attributes.uv;if(n!==undefined){n.copyVector2sArray(t.uvs);n.needsUpdate=true}t.uvsNeedUpdate=false}if(t.lineDistancesNeedUpdate){n=this.attributes.lineDistance;if(n!==undefined){n.copyArray(t.lineDistances);n.needsUpdate=true}t.lineDistancesNeedUpdate=false}if(t.groupsNeedUpdate){t.computeGroups(e.geometry);this.groups=t.groups;t.groupsNeedUpdate=false}return this},fromGeometry:function(e){e.__directGeometry=(new ua).fromGeometry(e);return this.fromDirectGeometry(e.__directGeometry)},fromDirectGeometry:function(e){var t=new Float32Array(e.vertices.length*3);this.addAttribute("position",new $r(t,3).copyVector3sArray(e.vertices));if(e.normals.length>0){var i=new Float32Array(e.normals.length*3);this.addAttribute("normal",new $r(i,3).copyVector3sArray(e.normals))}if(e.colors.length>0){var n=new Float32Array(e.colors.length*3);this.addAttribute("color",new $r(n,3).copyColorsArray(e.colors))}if(e.uvs.length>0){var r=new Float32Array(e.uvs.length*2);this.addAttribute("uv",new $r(r,2).copyVector2sArray(e.uvs))}if(e.uvs2.length>0){var a=new Float32Array(e.uvs2.length*2);this.addAttribute("uv2",new $r(a,2).copyVector2sArray(e.uvs2))}if(e.indices.length>0){var s=ca(e.indices)>65535?Uint32Array:Uint16Array;var o=new s(e.indices.length*3);this.setIndex(new $r(o,1).copyIndicesArray(e.indices))}this.groups=e.groups;for(var l in e.morphTargets){var u=[];var c=e.morphTargets[l];for(var h=0,f=c.length;h<f;h++){var d=c[h];var p=new oa(d.length*3,3);u.push(p.copyVector3sArray(d))}this.morphAttributes[l]=u}if(e.skinIndices.length>0){var m=new oa(e.skinIndices.length*4,4);this.addAttribute("skinIndex",m.copyVector4sArray(e.skinIndices))}if(e.skinWeights.length>0){var v=new oa(e.skinWeights.length*4,4);this.addAttribute("skinWeight",v.copyVector4sArray(e.skinWeights))}if(e.boundingSphere!==null){this.boundingSphere=e.boundingSphere.clone()}if(e.boundingBox!==null){this.boundingBox=e.boundingBox.clone()}return this},computeBoundingBox:function(){if(this.boundingBox===null){this.boundingBox=new kr}var e=this.attributes.position;if(e!==undefined){this.boundingBox.setFromBufferAttribute(e)}else{this.boundingBox.makeEmpty()}if(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z)){console.error('THREE.BufferGeometry.computeBoundingBox: Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}},computeBoundingSphere:function(){var e=new kr;var t=new At;return function i(){if(this.boundingSphere===null){this.boundingSphere=new Ur}var n=this.attributes.position;if(n){var r=this.boundingSphere.center;e.setFromBufferAttribute(n);e.getCenter(r);var a=0;for(var s=0,o=n.count;s<o;s++){t.x=n.getX(s);t.y=n.getY(s);t.z=n.getZ(s);a=Math.max(a,r.distanceToSquared(t))}this.boundingSphere.radius=Math.sqrt(a);if(isNaN(this.boundingSphere.radius)){console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}}}(),computeFaceNormals:function(){},computeVertexNormals:function(){var e=this.index;var t=this.attributes;var i=this.groups;if(t.position){var n=t.position.array;if(t.normal===undefined){this.addAttribute("normal",new $r(new Float32Array(n.length),3))}else{var r=t.normal.array;for(var a=0,s=r.length;a<s;a++){r[a]=0}}var o=t.normal.array;var l,u,c;var h=new At,f=new At,d=new At;var p=new At,m=new At;if(e){var v=e.array;if(i.length===0){this.addGroup(0,v.length)}for(var g=0,y=i.length;g<y;++g){var b=i[g];var x=b.start;var _=b.count;for(var a=x,s=x+_;a<s;a+=3){l=v[a+0]*3;u=v[a+1]*3;c=v[a+2]*3;h.fromArray(n,l);f.fromArray(n,u);d.fromArray(n,c);p.subVectors(d,f);m.subVectors(h,f);p.cross(m);o[l]+=p.x;o[l+1]+=p.y;o[l+2]+=p.z;o[u]+=p.x;o[u+1]+=p.y;o[u+2]+=p.z;o[c]+=p.x;o[c+1]+=p.y;o[c+2]+=p.z}}}else{for(var a=0,s=n.length;a<s;a+=9){h.fromArray(n,a);f.fromArray(n,a+3);d.fromArray(n,a+6);p.subVectors(d,f);m.subVectors(h,f);p.cross(m);o[a]=p.x;o[a+1]=p.y;o[a+2]=p.z;o[a+3]=p.x;o[a+4]=p.y;o[a+5]=p.z;o[a+6]=p.x;o[a+7]=p.y;o[a+8]=p.z}}this.normalizeNormals();t.normal.needsUpdate=true}},merge:function(e,t){if(!(e&&e.isBufferGeometry)){console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",e);return}if(t===undefined)t=0;var i=this.attributes;for(var n in i){if(e.attributes[n]===undefined)continue;var r=i[n];var a=r.array;var s=e.attributes[n];var o=s.array;var l=s.itemSize;for(var u=0,c=l*t;u<o.length;u++,c++){a[c]=o[u]}}return this},normalizeNormals:function(){var e=new At;return function t(){var i=this.attributes.normal;for(var n=0,r=i.count;n<r;n++){e.x=i.getX(n);e.y=i.getY(n);e.z=i.getZ(n);e.normalize();i.setXYZ(n,e.x,e.y,e.z)}}}(),toNonIndexed:function(){if(this.index===null){console.warn("THREE.BufferGeometry.toNonIndexed(): Geometry is already non-indexed.");return this}var e=new ha;var t=this.index.array;var i=this.attributes;for(var n in i){var r=i[n];var a=r.array;var s=r.itemSize;var o=new a.constructor(t.length*s);var l=0,u=0;for(var c=0,h=t.length;c<h;c++){l=t[c]*s;for(var f=0;f<s;f++){o[u++]=a[l++]}}e.addAttribute(n,new $r(o,s))}return e},toJSON:function(){var e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};e.uuid=this.uuid;e.type=this.type;if(this.name!=="")e.name=this.name;if(this.parameters!==undefined){var t=this.parameters;for(var i in t){if(t[i]!==undefined)e[i]=t[i]}return e}e.data={attributes:{}};var n=this.index;if(n!==null){var r=Array.prototype.slice.call(n.array);e.data.index={type:n.array.constructor.name,array:r}}var a=this.attributes;for(var i in a){var s=a[i];var r=Array.prototype.slice.call(s.array);e.data.attributes[i]={itemSize:s.itemSize,type:s.array.constructor.name,array:r,normalized:s.normalized}}var o=this.groups;if(o.length>0){e.data.groups=JSON.parse(JSON.stringify(o))}var l=this.boundingSphere;if(l!==null){e.data.boundingSphere={center:l.center.toArray(),radius:l.radius}}return e},clone:function(){return(new ha).copy(this)},copy:function(e){var t,i,n;this.index=null;this.attributes={};this.morphAttributes={};this.groups=[];this.boundingBox=null;this.boundingSphere=null;this.name=e.name;var r=e.index;if(r!==null){this.setIndex(r.clone())}var a=e.attributes;for(t in a){var s=a[t];this.addAttribute(t,s.clone())}var o=e.morphAttributes;for(t in o){var l=[];var u=o[t];for(i=0,n=u.length;i<n;i++){l.push(u[i].clone())}this.morphAttributes[t]=l}var c=e.groups;for(i=0,n=c.length;i<n;i++){var h=c[i];this.addGroup(h.start,h.count,h.materialIndex)}var f=e.boundingBox;if(f!==null){this.boundingBox=f.clone()}var d=e.boundingSphere;if(d!==null){this.boundingSphere=d.clone()}this.drawRange.start=e.drawRange.start;this.drawRange.count=e.drawRange.count;return this},dispose:function(){this.dispatchEvent({type:"dispose"})}});function fa(e,t,i,n,r,a){Qr.call(this);this.type="BoxGeometry";this.parameters={width:e,height:t,depth:i,widthSegments:n,heightSegments:r,depthSegments:a};this.fromBufferGeometry(new da(e,t,i,n,r,a));this.mergeVertices()}fa.prototype=Object.create(Qr.prototype);fa.prototype.constructor=fa;function da(e,t,i,n,r,a){ha.call(this);this.type="BoxBufferGeometry";this.parameters={width:e,height:t,depth:i,widthSegments:n,heightSegments:r,depthSegments:a};var s=this;n=Math.floor(n)||1;r=Math.floor(r)||1;a=Math.floor(a)||1;var o=[];var l=[];var u=[];var c=[];var h=0;var f=0;d("z","y","x",-1,-1,i,t,e,a,r,0);d("z","y","x",1,-1,i,t,-e,a,r,1);d("x","z","y",1,1,e,i,t,n,a,2);d("x","z","y",1,-1,e,i,-t,n,a,3);d("x","y","z",1,-1,e,t,i,n,r,4);d("x","y","z",-1,-1,e,t,-i,n,r,5);this.setIndex(o);this.addAttribute("position",new oa(l,3));this.addAttribute("normal",new oa(u,3));this.addAttribute("uv",new oa(c,2));function d(e,t,i,n,r,a,d,p,m,v,g){var y=a/m;var b=d/v;var x=a/2;var _=d/2;var w=p/2;var T=m+1;var M=v+1;var S=0;var E=0;var A,P;var L=new At;for(P=0;P<M;P++){var R=P*b-_;for(A=0;A<T;A++){var C=A*y-x;L[e]=C*n;L[t]=R*r;L[i]=w;l.push(L.x,L.y,L.z);L[e]=0;L[t]=0;L[i]=p>0?1:-1;u.push(L.x,L.y,L.z);c.push(A/m);c.push(1-P/v);S+=1}}for(P=0;P<v;P++){for(A=0;A<m;A++){var O=h+A+T*P;var D=h+A+T*(P+1);var I=h+(A+1)+T*(P+1);var k=h+(A+1)+T*P;o.push(O,D,k);o.push(D,I,k);E+=6}}s.addGroup(f,E,g);f+=E;h+=S}}da.prototype=Object.create(ha.prototype);da.prototype.constructor=da;function pa(e,t,i,n){Qr.call(this);this.type="PlaneGeometry";this.parameters={width:e,height:t,widthSegments:i,heightSegments:n};this.fromBufferGeometry(new ma(e,t,i,n));this.mergeVertices()}pa.prototype=Object.create(Qr.prototype);pa.prototype.constructor=pa;function ma(e,t,i,n){ha.call(this);this.type="PlaneBufferGeometry";this.parameters={width:e,height:t,widthSegments:i,heightSegments:n};var r=e/2;var a=t/2;var s=Math.floor(i)||1;var o=Math.floor(n)||1;var l=s+1;var u=o+1;var c=e/s;var h=t/o;var f,d;var p=[];var m=[];var v=[];var g=[];for(d=0;d<u;d++){var y=d*h-a;for(f=0;f<l;f++){var b=f*c-r;m.push(b,-y,0);v.push(0,0,1);g.push(f/s);g.push(1-d/o)}}for(d=0;d<o;d++){for(f=0;f<s;f++){var x=f+l*d;var _=f+l*(d+1);var w=f+1+l*(d+1);var T=f+1+l*d;p.push(x,_,T);p.push(_,w,T)}}this.setIndex(p);this.addAttribute("position",new oa(m,3));this.addAttribute("normal",new oa(v,3));this.addAttribute("uv",new oa(g,2))}ma.prototype=Object.create(ha.prototype);ma.prototype.constructor=ma;function va(e){Cr.call(this);this.type="MeshBasicMaterial";this.color=new bi(16777215);this.map=null;this.lightMap=null;this.lightMapIntensity=1;this.aoMap=null;this.aoMapIntensity=1;this.specularMap=null;this.alphaMap=null;this.envMap=null;this.combine=K;this.reflectivity=1;this.refractionRatio=.98;this.wireframe=false;this.wireframeLinewidth=1;this.wireframeLinecap="round";this.wireframeLinejoin="round";this.skinning=false;this.morphTargets=false;this.lights=false;this.setValues(e)}va.prototype=Object.create(Cr.prototype);va.prototype.constructor=va;va.prototype.isMeshBasicMaterial=true;va.prototype.copy=function(e){Cr.prototype.copy.call(this,e);this.color.copy(e.color);this.map=e.map;this.lightMap=e.lightMap;this.lightMapIntensity=e.lightMapIntensity;this.aoMap=e.aoMap;this.aoMapIntensity=e.aoMapIntensity;this.specularMap=e.specularMap;this.alphaMap=e.alphaMap;this.envMap=e.envMap;this.combine=e.combine;this.reflectivity=e.reflectivity;this.refractionRatio=e.refractionRatio;this.wireframe=e.wireframe;this.wireframeLinewidth=e.wireframeLinewidth;this.wireframeLinecap=e.wireframeLinecap;this.wireframeLinejoin=e.wireframeLinejoin;this.skinning=e.skinning;this.morphTargets=e.morphTargets;return this};function ga(e,t){this.origin=e!==undefined?e:new At;this.direction=t!==undefined?t:new At}Object.assign(ga.prototype,{set:function(e,t){this.origin.copy(e);this.direction.copy(t);return this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){this.origin.copy(e.origin);this.direction.copy(e.direction);return this},at:function(e,t){var i=t||new At;return i.copy(this.direction).multiplyScalar(e).add(this.origin)},lookAt:function(e){this.direction.copy(e).sub(this.origin).normalize();return this},recast:function(){var e=new At;return function t(i){this.origin.copy(this.at(i,e));return this}}(),closestPointToPoint:function(e,t){var i=t||new At;i.subVectors(e,this.origin);var n=i.dot(this.direction);if(n<0){return i.copy(this.origin)}return i.copy(this.direction).multiplyScalar(n).add(this.origin)},distanceToPoint:function(e){return Math.sqrt(this.distanceSqToPoint(e))},distanceSqToPoint:function(){var e=new At;return function t(i){var n=e.subVectors(i,this.origin).dot(this.direction);if(n<0){return this.origin.distanceToSquared(i)}e.copy(this.direction).multiplyScalar(n).add(this.origin);return e.distanceToSquared(i)}}(),distanceSqToSegment:function(){var e=new At;var t=new At;var i=new At;return function n(r,a,s,o){e.copy(r).add(a).multiplyScalar(.5);t.copy(a).sub(r).normalize();i.copy(this.origin).sub(e);var l=r.distanceTo(a)*.5;var u=-this.direction.dot(t);var c=i.dot(this.direction);var h=-i.dot(t);var f=i.lengthSq();var d=Math.abs(1-u*u);var p,m,v,g;if(d>0){p=u*h-c;m=u*c-h;g=l*d;if(p>=0){if(m>=-g){if(m<=g){var y=1/d;p*=y;m*=y;v=p*(p+u*m+2*c)+m*(u*p+m+2*h)+f}else{m=l;p=Math.max(0,-(u*m+c));v=-p*p+m*(m+2*h)+f}}else{m=-l;p=Math.max(0,-(u*m+c));v=-p*p+m*(m+2*h)+f}}else{if(m<=-g){p=Math.max(0,-(-u*l+c));m=p>0?-l:Math.min(Math.max(-l,-h),l);v=-p*p+m*(m+2*h)+f}else if(m<=g){p=0;m=Math.min(Math.max(-l,-h),l);v=m*(m+2*h)+f}else{p=Math.max(0,-(u*l+c));m=p>0?l:Math.min(Math.max(-l,-h),l);v=-p*p+m*(m+2*h)+f}}}else{m=u>0?-l:l;p=Math.max(0,-(u*m+c));v=-p*p+m*(m+2*h)+f}if(s){s.copy(this.direction).multiplyScalar(p).add(this.origin)}if(o){o.copy(t).multiplyScalar(m).add(e)}return v}}(),intersectSphere:function(){var e=new At;return function t(i,n){e.subVectors(i.center,this.origin);var r=e.dot(this.direction);var a=e.dot(e)-r*r;var s=i.radius*i.radius;if(a>s)return null;var o=Math.sqrt(s-a);var l=r-o;var u=r+o;if(l<0&&u<0)return null;if(l<0)return this.at(u,n);return this.at(l,n)}}(),intersectsSphere:function(e){return this.distanceToPoint(e.center)<=e.radius},distanceToPlane:function(e){var t=e.normal.dot(this.direction);if(t===0){if(e.distanceToPoint(this.origin)===0){return 0}return null}var i=-(this.origin.dot(e.normal)+e.constant)/t;return i>=0?i:null},intersectPlane:function(e,t){var i=this.distanceToPlane(e);if(i===null){return null}return this.at(i,t)},intersectsPlane:function(e){var t=e.distanceToPoint(this.origin);if(t===0){return true}var i=e.normal.dot(this.direction);if(i*t<0){return true}return false},intersectBox:function(e,t){var i,n,r,a,s,o;var l=1/this.direction.x,u=1/this.direction.y,c=1/this.direction.z;var h=this.origin;if(l>=0){i=(e.min.x-h.x)*l;n=(e.max.x-h.x)*l}else{i=(e.max.x-h.x)*l;n=(e.min.x-h.x)*l}if(u>=0){r=(e.min.y-h.y)*u;a=(e.max.y-h.y)*u}else{r=(e.max.y-h.y)*u;a=(e.min.y-h.y)*u}if(i>a||r>n)return null;if(r>i||i!==i)i=r;if(a<n||n!==n)n=a;if(c>=0){s=(e.min.z-h.z)*c;o=(e.max.z-h.z)*c}else{s=(e.max.z-h.z)*c;o=(e.min.z-h.z)*c}if(i>o||s>n)return null;if(s>i||i!==i)i=s;if(o<n||n!==n)n=o;if(n<0)return null;return this.at(i>=0?i:n,t)},intersectsBox:function(){var e=new At;return function t(i){return this.intersectBox(i,e)!==null}}(),intersectTriangle:function(){var e=new At;var t=new At;var i=new At;var n=new At;return function r(a,s,o,l,u){t.subVectors(s,a);i.subVectors(o,a);n.crossVectors(t,i);var c=this.direction.dot(n);var h;if(c>0){if(l)return null;h=1}else if(c<0){h=-1;c=-c}else{return null}e.subVectors(this.origin,a);var f=h*this.direction.dot(i.crossVectors(e,i));if(f<0){return null}var d=h*this.direction.dot(t.cross(e));if(d<0){return null}if(f+d>c){return null}var p=-h*e.dot(n);if(p<0){return null}return this.at(p/c,u)}}(),applyMatrix4:function(e){this.origin.applyMatrix4(e);this.direction.transformDirection(e);return this},equals:function(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}});function ya(e,t){this.start=e!==undefined?e:new At;this.end=t!==undefined?t:new At}Object.assign(ya.prototype,{set:function(e,t){this.start.copy(e);this.end.copy(t);return this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){this.start.copy(e.start);this.end.copy(e.end);return this},getCenter:function(e){var t=e||new At;return t.addVectors(this.start,this.end).multiplyScalar(.5)},delta:function(e){var t=e||new At;return t.subVectors(this.end,this.start)},distanceSq:function(){return this.start.distanceToSquared(this.end)},distance:function(){return this.start.distanceTo(this.end)},at:function(e,t){var i=t||new At;return this.delta(i).multiplyScalar(e).add(this.start)},closestPointToPointParameter:function(){var e=new At;var t=new At;return function i(n,r){e.subVectors(n,this.start);t.subVectors(this.end,this.start);var a=t.dot(t);var s=t.dot(e);var o=s/a;if(r){o=bt.clamp(o,0,1)}return o}}(),closestPointToPoint:function(e,t,i){var n=this.closestPointToPointParameter(e,t);var r=i||new At;return this.delta(r).multiplyScalar(n).add(this.start)},applyMatrix4:function(e){this.start.applyMatrix4(e);this.end.applyMatrix4(e);return this},equals:function(e){return e.start.equals(this.start)&&e.end.equals(this.end)}});function ba(e,t,i){this.a=e!==undefined?e:new At;this.b=t!==undefined?t:new At;this.c=i!==undefined?i:new At}Object.assign(ba,{normal:function(){var e=new At;return function t(i,n,r,a){var s=a||new At;s.subVectors(r,n);e.subVectors(i,n);s.cross(e);var o=s.lengthSq();if(o>0){return s.multiplyScalar(1/Math.sqrt(o))}return s.set(0,0,0)}}(),barycoordFromPoint:function(){var e=new At;var t=new At;var i=new At;return function n(r,a,s,o,l){e.subVectors(o,a);t.subVectors(s,a);i.subVectors(r,a);var u=e.dot(e);var c=e.dot(t);var h=e.dot(i);var f=t.dot(t);var d=t.dot(i);var p=u*f-c*c;var m=l||new At;if(p===0){return m.set(-2,-1,-1)}var v=1/p;var g=(f*h-c*d)*v;var y=(u*d-c*h)*v;return m.set(1-g-y,y,g)}}(),containsPoint:function(){var e=new At;return function t(i,n,r,a){var s=ba.barycoordFromPoint(i,n,r,a,e);return s.x>=0&&s.y>=0&&s.x+s.y<=1}}()});Object.assign(ba.prototype,{set:function(e,t,i){this.a.copy(e);this.b.copy(t);this.c.copy(i);return this},setFromPointsAndIndices:function(e,t,i,n){this.a.copy(e[t]);this.b.copy(e[i]);this.c.copy(e[n]);return this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){this.a.copy(e.a);this.b.copy(e.b);this.c.copy(e.c);return this},area:function(){var e=new At;var t=new At;return function i(){e.subVectors(this.c,this.b);t.subVectors(this.a,this.b);return e.cross(t).length()*.5}}(),midpoint:function(e){var t=e||new At;return t.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)},normal:function(e){return ba.normal(this.a,this.b,this.c,e)},plane:function(e){var t=e||new Nr;return t.setFromCoplanarPoints(this.a,this.b,this.c)},barycoordFromPoint:function(e,t){return ba.barycoordFromPoint(e,this.a,this.b,this.c,t)},containsPoint:function(e){return ba.containsPoint(e,this.a,this.b,this.c)},closestPointToPoint:function(){var e=new Nr;var t=[new ya,new ya,new ya];var i=new At;var n=new At;return function r(a,s){var o=s||new At;var l=Infinity;e.setFromCoplanarPoints(this.a,this.b,this.c);e.projectPoint(a,i);if(this.containsPoint(i)===true){o.copy(i)}else{t[0].set(this.a,this.b);t[1].set(this.b,this.c);t[2].set(this.c,this.a);for(var u=0;u<t.length;u++){t[u].closestPointToPoint(i,true,n);var c=i.distanceToSquared(n);if(c<l){l=c;o.copy(n)}}}return o}}(),equals:function(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}});function xa(e,t){Wr.call(this);this.type="Mesh";this.geometry=e!==undefined?e:new ha;this.material=t!==undefined?t:new va({color:Math.random()*16777215});this.drawMode=st;this.updateMorphTargets()}xa.prototype=Object.assign(Object.create(Wr.prototype),{constructor:xa,isMesh:true,setDrawMode:function(e){this.drawMode=e},copy:function(e){Wr.prototype.copy.call(this,e);this.drawMode=e.drawMode;return this},updateMorphTargets:function(){var e=this.geometry;var t,i,n;if(e.isBufferGeometry){var r=e.morphAttributes;var a=Object.keys(r);if(a.length>0){var s=r[a[0]];if(s!==undefined){this.morphTargetInfluences=[];this.morphTargetDictionary={};for(t=0,i=s.length;t<i;t++){n=s[t].name||String(t);this.morphTargetInfluences.push(0);this.morphTargetDictionary[n]=t}}}}else{var o=e.morphTargets;if(o!==undefined&&o.length>0){this.morphTargetInfluences=[];this.morphTargetDictionary={};for(t=0,i=o.length;t<i;t++){n=o[t].name||String(t);this.morphTargetInfluences.push(0);this.morphTargetDictionary[n]=t}}}},raycast:function(){var e=new Pt;var t=new ga;var i=new Ur;var n=new At;var r=new At;var a=new At;var s=new At;var o=new At;var l=new At;var u=new xt;var c=new xt;var h=new xt;var f=new At;var d=new At;var v=new At;function g(e,t,i,n,r,a,s){ba.barycoordFromPoint(e,t,i,n,f);r.multiplyScalar(f.x);a.multiplyScalar(f.y);s.multiplyScalar(f.z);r.add(a).add(s);return r.clone()}function y(e,t,i,n,r,a,s,o){var l;if(t.side===p){l=n.intersectTriangle(s,a,r,true,o)}else{l=n.intersectTriangle(r,a,s,t.side!==m,o)}if(l===null)return null;v.copy(o);v.applyMatrix4(e.matrixWorld);var u=i.ray.origin.distanceTo(v);if(u<i.near||u>i.far)return null;return{distance:u,point:v.clone(),object:e}}function b(e,t,i,s,o,l,f,p){n.fromBufferAttribute(s,l);r.fromBufferAttribute(s,f);a.fromBufferAttribute(s,p);var m=y(e,e.material,t,i,n,r,a,d);if(m){if(o){u.fromBufferAttribute(o,l);c.fromBufferAttribute(o,f);h.fromBufferAttribute(o,p);m.uv=g(d,n,r,a,u,c,h)}m.face=new Zr(l,f,p,ba.normal(n,r,a));m.faceIndex=l}return m}return function f(p,m){var v=this.geometry;var x=this.material;var _=this.matrixWorld;if(x===undefined)return;if(v.boundingSphere===null)v.computeBoundingSphere();i.copy(v.boundingSphere);i.applyMatrix4(_);if(p.ray.intersectsSphere(i)===false)return;e.getInverse(_);t.copy(p.ray).applyMatrix4(e);if(v.boundingBox!==null){if(t.intersectsBox(v.boundingBox)===false)return}var w;if(v.isBufferGeometry){var T,M,S;var E=v.index;var A=v.attributes.position;var P=v.attributes.uv;var L,R;if(E!==null){for(L=0,R=E.count;L<R;L+=3){T=E.getX(L);M=E.getX(L+1);S=E.getX(L+2);w=b(this,p,t,A,P,T,M,S);if(w){w.faceIndex=Math.floor(L/3);m.push(w)}}}else{for(L=0,R=A.count;L<R;L+=3){T=L;M=L+1;S=L+2;w=b(this,p,t,A,P,T,M,S);if(w){w.index=T;m.push(w)}}}}else if(v.isGeometry){var C,O,D;var I=Array.isArray(x);var k=v.vertices;var U=v.faces;var F;var N=v.faceVertexUvs[0];if(N.length>0)F=N;for(var B=0,z=U.length;B<z;B++){var j=U[B];var G=I?x[j.materialIndex]:x;if(G===undefined)continue;C=k[j.a];O=k[j.b];D=k[j.c];if(G.morphTargets===true){var H=v.morphTargets;var V=this.morphTargetInfluences;n.set(0,0,0);r.set(0,0,0);a.set(0,0,0);for(var W=0,X=H.length;W<X;W++){var Y=V[W];if(Y===0)continue;var q=H[W].vertices;n.addScaledVector(s.subVectors(q[j.a],C),Y);r.addScaledVector(o.subVectors(q[j.b],O),Y);a.addScaledVector(l.subVectors(q[j.c],D),Y)}n.add(C);r.add(O);a.add(D);C=n;O=r;D=a}w=y(this,G,p,t,C,O,D,d);if(w){if(F&&F[B]){var Z=F[B];u.copy(Z[0]);c.copy(Z[1]);h.copy(Z[2]);w.uv=g(d,C,O,D,u,c,h)}w.face=j;w.faceIndex=B;m.push(w)}}}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}});function _a(e,t,i,n){var r=new bi(0);var a=0;var s,o;var l;function u(t,n,u,h){var f=n.background;if(f===null){c(r,a)}else if(f&&f.isColor){c(f,1);h=true}if(e.autoClear||h){e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil)}if(f&&f.isCubeTexture){if(l===undefined){l=new xa(new da(1,1,1),new Or({uniforms:Sr.cube.uniforms,vertexShader:Sr.cube.vertexShader,fragmentShader:Sr.cube.fragmentShader,side:p,depthTest:true,depthWrite:false,polygonOffset:true,fog:false}));l.geometry.removeAttribute("normal");l.geometry.removeAttribute("uv");l.onBeforeRender=function(e,t,i){var n=i.far;this.matrixWorld.makeScale(n,n,n);this.matrixWorld.copyPosition(i.matrixWorld);this.material.polygonOffsetUnits=n*10};i.update(l.geometry)}l.material.uniforms.tCube.value=f;t.push(l,l.geometry,l.material,0,null)}else if(f&&f.isTexture){if(s===undefined){s=new Yr(-1,1,1,-1,0,1);o=new xa(new ma(2,2),new va({depthTest:false,depthWrite:false,fog:false}));i.update(o.geometry)}o.material.map=f;e.renderBufferDirect(s,null,o.geometry,o.material,o,null)}}function c(e,i){t.buffers.color.setClear(e.r,e.g,e.b,i,n)}return{getClearColor:function(){return r},setClearColor:function(e,t){r.set(e);a=t!==undefined?t:1;c(r,a)},getClearAlpha:function(){return a},setClearAlpha:function(e){a=e;c(r,a)},render:u}}function wa(e,t){if(e.renderOrder!==t.renderOrder){return e.renderOrder-t.renderOrder}else if(e.program&&t.program&&e.program!==t.program){return e.program.id-t.program.id}else if(e.material.id!==t.material.id){return e.material.id-t.material.id}else if(e.z!==t.z){return e.z-t.z}else{return e.id-t.id}}function Ta(e,t){if(e.renderOrder!==t.renderOrder){return e.renderOrder-t.renderOrder}if(e.z!==t.z){return t.z-e.z}else{return e.id-t.id}}function Ma(){var e=[];var t=0;var i=[];var n=[];function r(){t=0;i.length=0;n.length=0}function a(r,a,s,o,l){var u=e[t];if(u===undefined){u={id:r.id,object:r,geometry:a,material:s,program:s.program,renderOrder:r.renderOrder,z:o,group:l};e[t]=u}else{u.id=r.id;u.object=r;u.geometry=a;u.material=s;u.program=s.program;u.renderOrder=r.renderOrder;u.z=o;u.group=l}(s.transparent===true?n:i).push(u);t++}function s(){if(i.length>1)i.sort(wa);if(n.length>1)n.sort(Ta)}return{opaque:i,transparent:n,init:r,push:a,sort:s}}function Sa(){var e={};function t(t,i){var n=t.id+","+i.id;var r=e[n];if(r===undefined){r=new Ma;e[n]=r}return r}function i(){e={}}return{get:t,dispose:i}}function Ea(e,t){return Math.abs(t[1])-Math.abs(e[1])}function Aa(e){var t={};var i=new Float32Array(8);function n(n,r,a,s){var o=n.morphTargetInfluences;var l=o.length;var u=t[r.id];if(u===undefined){u=[];for(var c=0;c<l;c++){u[c]=[c,0]}t[r.id]=u}var h=a.morphTargets&&r.morphAttributes.position;var f=a.morphNormals&&r.morphAttributes.normal;for(var c=0;c<l;c++){var d=u[c];if(d[1]!==0){if(h)r.removeAttribute("morphTarget"+c);if(f)r.removeAttribute("morphNormal"+c)}}for(var c=0;c<l;c++){var d=u[c];d[0]=c;d[1]=o[c]}u.sort(Ea);for(var c=0;c<8;c++){var d=u[c];if(d){var p=d[0];var m=d[1];if(m){if(h)r.addAttribute("morphTarget"+c,h[p]);if(f)r.addAttribute("morphNormal"+c,f[p]);i[c]=m;continue}}i[c]=0}s.getUniforms().setValue(e,"morphTargetInfluences",i)}return{update:n}}function Pa(e,t,i){var n;function r(e){n=e}var a,s;function o(e){a=e.type;s=e.bytesPerElement}function l(t,r){e.drawElements(n,r,a,t*s);i.calls++;i.vertices+=r;if(n===e.TRIANGLES)i.faces+=r/3;else if(n===e.POINTS)i.points+=r}function u(r,o,l){var u=t.get("ANGLE_instanced_arrays");if(u===null){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}u.drawElementsInstancedANGLE(n,l,a,o*s,r.maxInstancedCount);i.calls++;i.vertices+=l*r.maxInstancedCount;if(n===e.TRIANGLES)i.faces+=r.maxInstancedCount*l/3;else if(n===e.POINTS)i.points+=r.maxInstancedCount*l}this.setMode=r;this.setIndex=o;this.render=l;this.renderInstances=u}function La(e,t,i){var n;function r(e){n=e}function a(t,r){e.drawArrays(n,t,r);i.calls++;i.vertices+=r;if(n===e.TRIANGLES)i.faces+=r/3;else if(n===e.POINTS)i.points+=r}function s(r,a,s){var o=t.get("ANGLE_instanced_arrays");if(o===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}var l=r.attributes.position;if(l.isInterleavedBufferAttribute){s=l.data.count;o.drawArraysInstancedANGLE(n,0,s,r.maxInstancedCount)}else{o.drawArraysInstancedANGLE(n,a,s,r.maxInstancedCount)}i.calls++;i.vertices+=s*r.maxInstancedCount;if(n===e.TRIANGLES)i.faces+=r.maxInstancedCount*s/3;else if(n===e.POINTS)i.points+=r.maxInstancedCount*s}this.setMode=r;this.render=a;this.renderInstances=s}function Ra(e,t,i){var n={};var r={};function a(e){var s=e.target;var o=n[s.id];if(o.index!==null){t.remove(o.index)}for(var l in o.attributes){t.remove(o.attributes[l])}s.removeEventListener("dispose",a);delete n[s.id];var u=r[s.id];if(u){t.remove(u);delete r[s.id]}u=r[o.id];if(u){t.remove(u);delete r[o.id]}i.geometries--}function s(e,t){var r=n[t.id];if(r)return r;t.addEventListener("dispose",a);if(t.isBufferGeometry){r=t}else if(t.isGeometry){if(t._bufferGeometry===undefined){
t._bufferGeometry=(new ha).setFromObject(e)}r=t._bufferGeometry}n[t.id]=r;i.geometries++;return r}function o(i){var n=i.index;var r=i.attributes;if(n!==null){t.update(n,e.ELEMENT_ARRAY_BUFFER)}for(var a in r){t.update(r[a],e.ARRAY_BUFFER)}var s=i.morphAttributes;for(var a in s){var o=s[a];for(var l=0,u=o.length;l<u;l++){t.update(o[l],e.ARRAY_BUFFER)}}}function l(i){var n=r[i.id];if(n)return n;var a=[];var s=i.index;var o=i.attributes;if(s!==null){var l=s.array;for(var u=0,c=l.length;u<c;u+=3){var h=l[u+0];var f=l[u+1];var d=l[u+2];a.push(h,f,f,d,d,h)}}else{var l=o.position.array;for(var u=0,c=l.length/3-1;u<c;u+=3){var h=u+0;var f=u+1;var d=u+2;a.push(h,f,f,d,d,h)}}n=new(ca(a)>65535?sa:ra)(a,1);t.update(n,e.ELEMENT_ARRAY_BUFFER);r[i.id]=n;return n}return{get:s,update:o,getWireframeAttribute:l}}function Ca(){var e={};return{get:function(t){if(e[t.id]!==undefined){return e[t.id]}var i;switch(t.type){case"DirectionalLight":i={direction:new At,color:new bi,shadow:false,shadowBias:0,shadowRadius:1,shadowMapSize:new xt};break;case"SpotLight":i={position:new At,direction:new At,color:new bi,distance:0,coneCos:0,penumbraCos:0,decay:0,shadow:false,shadowBias:0,shadowRadius:1,shadowMapSize:new xt};break;case"PointLight":i={position:new At,color:new bi,distance:0,decay:0,shadow:false,shadowBias:0,shadowRadius:1,shadowMapSize:new xt,shadowCameraNear:1,shadowCameraFar:1e3};break;case"HemisphereLight":i={direction:new At,skyColor:new bi,groundColor:new bi};break;case"RectAreaLight":i={color:new bi,position:new At,halfWidth:new At,halfHeight:new At};break}e[t.id]=i;return i}}}function Oa(){var e=new Ca;var t={hash:"",ambient:[0,0,0],directional:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],point:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]};var i=new At;var n=new Pt;var r=new Pt;function a(a,s,o){var l=0,u=0,c=0;var h=0;var f=0;var d=0;var p=0;var m=0;var v=o.matrixWorldInverse;for(var g=0,y=a.length;g<y;g++){var b=a[g];var x=b.color;var _=b.intensity;var w=b.distance;var T=b.shadow&&b.shadow.map?b.shadow.map.texture:null;if(b.isAmbientLight){l+=x.r*_;u+=x.g*_;c+=x.b*_}else if(b.isDirectionalLight){var M=e.get(b);M.color.copy(b.color).multiplyScalar(b.intensity);M.direction.setFromMatrixPosition(b.matrixWorld);i.setFromMatrixPosition(b.target.matrixWorld);M.direction.sub(i);M.direction.transformDirection(v);M.shadow=b.castShadow;if(b.castShadow){var S=b.shadow;M.shadowBias=S.bias;M.shadowRadius=S.radius;M.shadowMapSize=S.mapSize}t.directionalShadowMap[h]=T;t.directionalShadowMatrix[h]=b.shadow.matrix;t.directional[h]=M;h++}else if(b.isSpotLight){var M=e.get(b);M.position.setFromMatrixPosition(b.matrixWorld);M.position.applyMatrix4(v);M.color.copy(x).multiplyScalar(_);M.distance=w;M.direction.setFromMatrixPosition(b.matrixWorld);i.setFromMatrixPosition(b.target.matrixWorld);M.direction.sub(i);M.direction.transformDirection(v);M.coneCos=Math.cos(b.angle);M.penumbraCos=Math.cos(b.angle*(1-b.penumbra));M.decay=b.distance===0?0:b.decay;M.shadow=b.castShadow;if(b.castShadow){var S=b.shadow;M.shadowBias=S.bias;M.shadowRadius=S.radius;M.shadowMapSize=S.mapSize}t.spotShadowMap[d]=T;t.spotShadowMatrix[d]=b.shadow.matrix;t.spot[d]=M;d++}else if(b.isRectAreaLight){var M=e.get(b);M.color.copy(x).multiplyScalar(_/(b.width*b.height));M.position.setFromMatrixPosition(b.matrixWorld);M.position.applyMatrix4(v);r.identity();n.copy(b.matrixWorld);n.premultiply(v);r.extractRotation(n);M.halfWidth.set(b.width*.5,0,0);M.halfHeight.set(0,b.height*.5,0);M.halfWidth.applyMatrix4(r);M.halfHeight.applyMatrix4(r);t.rectArea[p]=M;p++}else if(b.isPointLight){var M=e.get(b);M.position.setFromMatrixPosition(b.matrixWorld);M.position.applyMatrix4(v);M.color.copy(b.color).multiplyScalar(b.intensity);M.distance=b.distance;M.decay=b.distance===0?0:b.decay;M.shadow=b.castShadow;if(b.castShadow){var S=b.shadow;M.shadowBias=S.bias;M.shadowRadius=S.radius;M.shadowMapSize=S.mapSize;M.shadowCameraNear=S.camera.near;M.shadowCameraFar=S.camera.far}t.pointShadowMap[f]=T;t.pointShadowMatrix[f]=b.shadow.matrix;t.point[f]=M;f++}else if(b.isHemisphereLight){var M=e.get(b);M.direction.setFromMatrixPosition(b.matrixWorld);M.direction.transformDirection(v);M.direction.normalize();M.skyColor.copy(b.color).multiplyScalar(_);M.groundColor.copy(b.groundColor).multiplyScalar(_);t.hemi[m]=M;m++}}t.ambient[0]=l;t.ambient[1]=u;t.ambient[2]=c;t.directional.length=h;t.spot.length=d;t.rectArea.length=p;t.point.length=f;t.hemi.length=m;t.hash=h+","+f+","+d+","+p+","+m+","+s.length}return{setup:a,state:t}}function Da(e,t){var i={};function n(n){var r=t.frame;var a=n.geometry;var s=e.get(n,a);if(i[s.id]!==r){if(a.isGeometry){s.updateFromObject(n)}e.update(s);i[s.id]=r}return s}function r(){i={}}return{update:n,clear:r}}function Ia(e){var t=e.split("\n");for(var i=0;i<t.length;i++){t[i]=i+1+": "+t[i]}return t.join("\n")}function ka(e,t,i){var n=e.createShader(t);e.shaderSource(n,i);e.compileShader(n);if(e.getShaderParameter(n,e.COMPILE_STATUS)===false){console.error("THREE.WebGLShader: Shader couldn't compile.")}if(e.getShaderInfoLog(n)!==""){console.warn("THREE.WebGLShader: gl.getShaderInfoLog()",t===e.VERTEX_SHADER?"vertex":"fragment",e.getShaderInfoLog(n),Ia(i))}return n}var Ua=0;function Fa(e){switch(e){case ut:return["Linear","( value )"];case ct:return["sRGB","( value )"];case ft:return["RGBE","( value )"];case pt:return["RGBM","( value, 7.0 )"];case mt:return["RGBM","( value, 16.0 )"];case vt:return["RGBD","( value, 256.0 )"];case ht:return["Gamma","( value, float( GAMMA_FACTOR ) )"];default:throw new Error("unsupported encoding: "+e)}}function Na(e,t){var i=Fa(t);return"vec4 "+e+"( vec4 value ) { return "+i[0]+"ToLinear"+i[1]+"; }"}function Ba(e,t){var i=Fa(t);return"vec4 "+e+"( vec4 value ) { return LinearTo"+i[0]+i[1]+"; }"}function za(e,t){var i;switch(t){case te:i="Linear";break;case ie:i="Reinhard";break;case ne:i="Uncharted2";break;case re:i="OptimizedCineon";break;default:throw new Error("unsupported toneMapping: "+t)}return"vec3 "+e+"( vec3 color ) { return "+i+"ToneMapping( color ); }"}function ja(e,t,i){e=e||{};var n=[e.derivatives||t.envMapCubeUV||t.bumpMap||t.normalMap||t.flatShading?"#extension GL_OES_standard_derivatives : enable":"",(e.fragDepth||t.logarithmicDepthBuffer)&&i.get("EXT_frag_depth")?"#extension GL_EXT_frag_depth : enable":"",e.drawBuffers&&i.get("WEBGL_draw_buffers")?"#extension GL_EXT_draw_buffers : require":"",(e.shaderTextureLOD||t.envMap)&&i.get("EXT_shader_texture_lod")?"#extension GL_EXT_shader_texture_lod : enable":""];return n.filter(Va).join("\n")}function Ga(e){var t=[];for(var i in e){var n=e[i];if(n===false)continue;t.push("#define "+i+" "+n)}return t.join("\n")}function Ha(e,t,i){var n={};var r=e.getProgramParameter(t,e.ACTIVE_ATTRIBUTES);for(var a=0;a<r;a++){var s=e.getActiveAttrib(t,a);var o=s.name;n[o]=e.getAttribLocation(t,o)}return n}function Va(e){return e!==""}function Wa(e,t){return e.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights)}function Xa(e){var t=/^[ \t]*#include +<([\w\d.]+)>/gm;function i(e,t){var i=Mr[t];if(i===undefined){throw new Error("Can not resolve #include <"+t+">")}return Xa(i)}return e.replace(t,i)}function Ya(e){var t=/for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g;function i(e,t,i,n){var r="";for(var a=parseInt(t);a<parseInt(i);a++){r+=n.replace(/\[ i \]/g,"[ "+a+" ]")}return r}return e.replace(t,i)}function qa(e,t,i,n,r,a){var s=e.context;var o=n.defines;var l=r.vertexShader;var u=r.fragmentShader;var c="SHADOWMAP_TYPE_BASIC";if(a.shadowMapType===h){c="SHADOWMAP_TYPE_PCF"}else if(a.shadowMapType===f){c="SHADOWMAP_TYPE_PCF_SOFT"}var d="ENVMAP_TYPE_CUBE";var p="ENVMAP_MODE_REFLECTION";var m="ENVMAP_BLENDING_MULTIPLY";if(a.envMap){switch(n.envMap.mapping){case se:case oe:d="ENVMAP_TYPE_CUBE";break;case he:case fe:d="ENVMAP_TYPE_CUBE_UV";break;case le:case ue:d="ENVMAP_TYPE_EQUIREC";break;case ce:d="ENVMAP_TYPE_SPHERE";break}switch(n.envMap.mapping){case oe:case ue:p="ENVMAP_MODE_REFRACTION";break}switch(n.combine){case K:m="ENVMAP_BLENDING_MULTIPLY";break;case Q:m="ENVMAP_BLENDING_MIX";break;case $:m="ENVMAP_BLENDING_ADD";break}}var v=e.gammaFactor>0?e.gammaFactor:1;var g=ja(n.extensions,a,t);var y=Ga(o);var b=s.createProgram();var x,_;if(n.isRawShaderMaterial){x=[y,"\n"].filter(Va).join("\n");_=[g,y,"\n"].filter(Va).join("\n")}else{x=["precision "+a.precision+" float;","precision "+a.precision+" int;","#define SHADER_NAME "+r.name,y,a.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+v,"#define MAX_BONES "+a.maxBones,a.useFog&&a.fog?"#define USE_FOG":"",a.useFog&&a.fogExp?"#define FOG_EXP2":"",a.map?"#define USE_MAP":"",a.envMap?"#define USE_ENVMAP":"",a.envMap?"#define "+p:"",a.lightMap?"#define USE_LIGHTMAP":"",a.aoMap?"#define USE_AOMAP":"",a.emissiveMap?"#define USE_EMISSIVEMAP":"",a.bumpMap?"#define USE_BUMPMAP":"",a.normalMap?"#define USE_NORMALMAP":"",a.displacementMap&&a.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",a.specularMap?"#define USE_SPECULARMAP":"",a.roughnessMap?"#define USE_ROUGHNESSMAP":"",a.metalnessMap?"#define USE_METALNESSMAP":"",a.alphaMap?"#define USE_ALPHAMAP":"",a.vertexColors?"#define USE_COLOR":"",a.flatShading?"#define FLAT_SHADED":"",a.skinning?"#define USE_SKINNING":"",a.useVertexTexture?"#define BONE_TEXTURE":"",a.morphTargets?"#define USE_MORPHTARGETS":"",a.morphNormals&&a.flatShading===false?"#define USE_MORPHNORMALS":"",a.doubleSided?"#define DOUBLE_SIDED":"",a.flipSided?"#define FLIP_SIDED":"","#define NUM_CLIPPING_PLANES "+a.numClippingPlanes,a.shadowMapEnabled?"#define USE_SHADOWMAP":"",a.shadowMapEnabled?"#define "+c:"",a.sizeAttenuation?"#define USE_SIZEATTENUATION":"",a.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",a.logarithmicDepthBuffer&&t.get("EXT_frag_depth")?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_COLOR","\tattribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(Va).join("\n");_=[g,"precision "+a.precision+" float;","precision "+a.precision+" int;","#define SHADER_NAME "+r.name,y,a.alphaTest?"#define ALPHATEST "+a.alphaTest:"","#define GAMMA_FACTOR "+v,a.useFog&&a.fog?"#define USE_FOG":"",a.useFog&&a.fogExp?"#define FOG_EXP2":"",a.map?"#define USE_MAP":"",a.envMap?"#define USE_ENVMAP":"",a.envMap?"#define "+d:"",a.envMap?"#define "+p:"",a.envMap?"#define "+m:"",a.lightMap?"#define USE_LIGHTMAP":"",a.aoMap?"#define USE_AOMAP":"",a.emissiveMap?"#define USE_EMISSIVEMAP":"",a.bumpMap?"#define USE_BUMPMAP":"",a.normalMap?"#define USE_NORMALMAP":"",a.specularMap?"#define USE_SPECULARMAP":"",a.roughnessMap?"#define USE_ROUGHNESSMAP":"",a.metalnessMap?"#define USE_METALNESSMAP":"",a.alphaMap?"#define USE_ALPHAMAP":"",a.vertexColors?"#define USE_COLOR":"",a.gradientMap?"#define USE_GRADIENTMAP":"",a.flatShading?"#define FLAT_SHADED":"",a.doubleSided?"#define DOUBLE_SIDED":"",a.flipSided?"#define FLIP_SIDED":"","#define NUM_CLIPPING_PLANES "+a.numClippingPlanes,"#define UNION_CLIPPING_PLANES "+(a.numClippingPlanes-a.numClipIntersection),a.shadowMapEnabled?"#define USE_SHADOWMAP":"",a.shadowMapEnabled?"#define "+c:"",a.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",a.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",a.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",a.logarithmicDepthBuffer&&t.get("EXT_frag_depth")?"#define USE_LOGDEPTHBUF_EXT":"",a.envMap&&t.get("EXT_shader_texture_lod")?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;",a.toneMapping!==ee?"#define TONE_MAPPING":"",a.toneMapping!==ee?Mr["tonemapping_pars_fragment"]:"",a.toneMapping!==ee?za("toneMapping",a.toneMapping):"",a.dithering?"#define DITHERING":"",a.outputEncoding||a.mapEncoding||a.envMapEncoding||a.emissiveMapEncoding?Mr["encodings_pars_fragment"]:"",a.mapEncoding?Na("mapTexelToLinear",a.mapEncoding):"",a.envMapEncoding?Na("envMapTexelToLinear",a.envMapEncoding):"",a.emissiveMapEncoding?Na("emissiveMapTexelToLinear",a.emissiveMapEncoding):"",a.outputEncoding?Ba("linearToOutputTexel",a.outputEncoding):"",a.depthPacking?"#define DEPTH_PACKING "+n.depthPacking:"","\n"].filter(Va).join("\n")}l=Xa(l);l=Wa(l,a);u=Xa(u);u=Wa(u,a);if(!n.isShaderMaterial){l=Ya(l);u=Ya(u)}var w=x+l;var T=_+u;var M=ka(s,s.VERTEX_SHADER,w);var S=ka(s,s.FRAGMENT_SHADER,T);s.attachShader(b,M);s.attachShader(b,S);if(n.index0AttributeName!==undefined){s.bindAttribLocation(b,0,n.index0AttributeName)}else if(a.morphTargets===true){s.bindAttribLocation(b,0,"position")}s.linkProgram(b);var E=s.getProgramInfoLog(b);var A=s.getShaderInfoLog(M);var P=s.getShaderInfoLog(S);var L=true;var R=true;if(s.getProgramParameter(b,s.LINK_STATUS)===false){L=false;console.error("THREE.WebGLProgram: shader error: ",s.getError(),"gl.VALIDATE_STATUS",s.getProgramParameter(b,s.VALIDATE_STATUS),"gl.getProgramInfoLog",E,A,P)}else if(E!==""){console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()",E)}else if(A===""||P===""){R=false}if(R){this.diagnostics={runnable:L,material:n,programLog:E,vertexShader:{log:A,prefix:x},fragmentShader:{log:P,prefix:_}}}s.deleteShader(M);s.deleteShader(S);var C;this.getUniforms=function(){if(C===undefined){C=new gi(s,b,e)}return C};var O;this.getAttributes=function(){if(O===undefined){O=Ha(s,b)}return O};this.destroy=function(){s.deleteProgram(b);this.program=undefined};Object.defineProperties(this,{uniforms:{get:function(){console.warn("THREE.WebGLProgram: .uniforms is now .getUniforms().");return this.getUniforms()}},attributes:{get:function(){console.warn("THREE.WebGLProgram: .attributes is now .getAttributes().");return this.getAttributes()}}});this.id=Ua++;this.code=i;this.usedTimes=1;this.program=b;this.vertexShader=M;this.fragmentShader=S;return this}function Za(e,t,i){var n=[];var r={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"phong",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow"};var a=["precision","supportsVertexTextures","map","mapEncoding","envMap","envMapMode","envMapEncoding","lightMap","aoMap","emissiveMap","emissiveMapEncoding","bumpMap","normalMap","displacementMap","specularMap","roughnessMap","metalnessMap","gradientMap","alphaMap","combine","vertexColors","fog","useFog","fogExp","flatShading","sizeAttenuation","logarithmicDepthBuffer","skinning","maxBones","useVertexTexture","morphTargets","morphNormals","maxMorphTargets","maxMorphNormals","premultipliedAlpha","numDirLights","numPointLights","numSpotLights","numHemiLights","numRectAreaLights","shadowMapEnabled","shadowMapType","toneMapping","physicallyCorrectLights","alphaTest","doubleSided","flipSided","numClippingPlanes","numClipIntersection","depthPacking","dithering"];function s(e){var t=e.skeleton;var n=t.bones;if(i.floatVertexTextures){return 1024}else{var r=i.maxVertexUniforms;var a=Math.floor((r-20)/4);var s=Math.min(a,n.length);if(s<n.length){console.warn("THREE.WebGLRenderer: Skeleton has "+n.length+" bones. This GPU supports "+s+".");return 0}return s}}function o(e,t){var i;if(!e){i=ut}else if(e.isTexture){i=e.encoding}else if(e.isWebGLRenderTarget){console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead.");i=e.texture.encoding}if(i===ut&&t){i=ht}return i}this.getParameters=function(t,n,a,l,u,c,h){var f=r[t.type];var d=h.isSkinnedMesh?s(h):0;var v=i.precision;if(t.precision!==null){v=i.getMaxPrecision(t.precision);if(v!==t.precision){console.warn("THREE.WebGLProgram.getParameters:",t.precision,"not supported, using",v,"instead.")}}var g=e.getRenderTarget();var y={shaderID:f,precision:v,supportsVertexTextures:i.vertexTextures,outputEncoding:o(!g?null:g.texture,e.gammaOutput),map:!!t.map,mapEncoding:o(t.map,e.gammaInput),envMap:!!t.envMap,envMapMode:t.envMap&&t.envMap.mapping,envMapEncoding:o(t.envMap,e.gammaInput),envMapCubeUV:!!t.envMap&&(t.envMap.mapping===he||t.envMap.mapping===fe),lightMap:!!t.lightMap,aoMap:!!t.aoMap,emissiveMap:!!t.emissiveMap,emissiveMapEncoding:o(t.emissiveMap,e.gammaInput),bumpMap:!!t.bumpMap,normalMap:!!t.normalMap,displacementMap:!!t.displacementMap,roughnessMap:!!t.roughnessMap,metalnessMap:!!t.metalnessMap,specularMap:!!t.specularMap,alphaMap:!!t.alphaMap,gradientMap:!!t.gradientMap,combine:t.combine,vertexColors:t.vertexColors,fog:!!l,useFog:t.fog,fogExp:l&&l.isFogExp2,flatShading:t.flatShading,sizeAttenuation:t.sizeAttenuation,logarithmicDepthBuffer:i.logarithmicDepthBuffer,skinning:t.skinning&&d>0,maxBones:d,useVertexTexture:i.floatVertexTextures,morphTargets:t.morphTargets,morphNormals:t.morphNormals,maxMorphTargets:e.maxMorphTargets,maxMorphNormals:e.maxMorphNormals,numDirLights:n.directional.length,numPointLights:n.point.length,numSpotLights:n.spot.length,numRectAreaLights:n.rectArea.length,numHemiLights:n.hemi.length,numClippingPlanes:u,numClipIntersection:c,dithering:t.dithering,shadowMapEnabled:e.shadowMap.enabled&&h.receiveShadow&&a.length>0,shadowMapType:e.shadowMap.type,toneMapping:e.toneMapping,physicallyCorrectLights:e.physicallyCorrectLights,premultipliedAlpha:t.premultipliedAlpha,alphaTest:t.alphaTest,doubleSided:t.side===m,flipSided:t.side===p,depthPacking:t.depthPacking!==undefined?t.depthPacking:false};return y};this.getProgramCode=function(t,i){var n=[];if(i.shaderID){n.push(i.shaderID)}else{n.push(t.fragmentShader);n.push(t.vertexShader)}if(t.defines!==undefined){for(var r in t.defines){n.push(r);n.push(t.defines[r])}}for(var s=0;s<a.length;s++){n.push(i[a[s]])}n.push(t.onBeforeCompile.toString());n.push(e.gammaOutput);return n.join()};this.acquireProgram=function(i,r,a,s){var o;for(var l=0,u=n.length;l<u;l++){var c=n[l];if(c.code===s){o=c;++o.usedTimes;break}}if(o===undefined){o=new qa(e,t,s,i,r,a);n.push(o)}return o};this.releaseProgram=function(e){if(--e.usedTimes===0){var t=n.indexOf(e);n[t]=n[n.length-1];n.pop();e.destroy()}};this.programs=n}function Ja(e,t,i,n,r,a,s){var o=typeof WebGL2RenderingContext!=="undefined"&&e instanceof WebGL2RenderingContext;function l(e,t){if(e.width>t||e.height>t){var i=t/Math.max(e.width,e.height);var n=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");n.width=Math.floor(e.width*i);n.height=Math.floor(e.height*i);var r=n.getContext("2d");r.drawImage(e,0,0,e.width,e.height,0,0,n.width,n.height);console.warn("THREE.WebGLRenderer: image is too big ("+e.width+"x"+e.height+"). Resized to "+n.width+"x"+n.height,e);return n}return e}function u(e){return bt.isPowerOfTwo(e.width)&&bt.isPowerOfTwo(e.height)}function c(e){if(e instanceof HTMLImageElement||e instanceof HTMLCanvasElement){var t=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");t.width=bt.nearestPowerOfTwo(e.width);t.height=bt.nearestPowerOfTwo(e.height);var i=t.getContext("2d");i.drawImage(e,0,0,t.width,t.height);console.warn("THREE.WebGLRenderer: image is not power of two ("+e.width+"x"+e.height+"). Resized to "+t.width+"x"+t.height,e);return t}return e}function h(e){return e.wrapS!==pe||e.wrapT!==pe||e.minFilter!==ve&&e.minFilter!==be}function f(e,t){return e.generateMipmaps&&t&&e.minFilter!==ve&&e.minFilter!==be}function d(t){if(t===ve||t===ge||t===ye){return e.NEAREST}return e.LINEAR}function p(e){var t=e.target;t.removeEventListener("dispose",p);v(t);s.textures--}function m(e){var t=e.target;t.removeEventListener("dispose",m);g(t);s.textures--}function v(t){var i=n.get(t);if(t.image&&i.__image__webglTextureCube){e.deleteTexture(i.__image__webglTextureCube)}else{if(i.__webglInit===undefined)return;e.deleteTexture(i.__webglTexture)}n.remove(t)}function g(t){var i=n.get(t);var r=n.get(t.texture);if(!t)return;if(r.__webglTexture!==undefined){e.deleteTexture(r.__webglTexture)}if(t.depthTexture){t.depthTexture.dispose()}if(t.isWebGLRenderTargetCube){for(var a=0;a<6;a++){e.deleteFramebuffer(i.__webglFramebuffer[a]);if(i.__webglDepthbuffer)e.deleteRenderbuffer(i.__webglDepthbuffer[a])}}else{e.deleteFramebuffer(i.__webglFramebuffer);if(i.__webglDepthbuffer)e.deleteRenderbuffer(i.__webglDepthbuffer)}n.remove(t.texture);n.remove(t)}function y(t,r){var a=n.get(t);if(t.version>0&&a.__version!==t.version){var s=t.image;if(s===undefined){console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined",t)}else if(s.complete===false){console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete",t)}else{w(a,t,r);return}}i.activeTexture(e.TEXTURE0+r);i.bindTexture(e.TEXTURE_2D,a.__webglTexture)}function b(t,o){var c=n.get(t);if(t.image.length===6){if(t.version>0&&c.__version!==t.version){if(!c.__image__webglTextureCube){t.addEventListener("dispose",p);c.__image__webglTextureCube=e.createTexture();s.textures++}i.activeTexture(e.TEXTURE0+o);i.bindTexture(e.TEXTURE_CUBE_MAP,c.__image__webglTextureCube);e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,t.flipY);var h=t&&t.isCompressedTexture;var d=t.image[0]&&t.image[0].isDataTexture;var m=[];for(var v=0;v<6;v++){if(!h&&!d){m[v]=l(t.image[v],r.maxCubemapSize)}else{m[v]=d?t.image[v].image:t.image[v]}}var g=m[0],y=u(g),b=a.convert(t.format),x=a.convert(t.type);_(e.TEXTURE_CUBE_MAP,t,y);for(var v=0;v<6;v++){if(!h){if(d){i.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+v,0,b,m[v].width,m[v].height,0,b,x,m[v].data)}else{i.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+v,0,b,b,x,m[v])}}else{var w,T=m[v].mipmaps;for(var M=0,S=T.length;M<S;M++){w=T[M];if(t.format!==Ue&&t.format!==ke){if(i.getCompressedTextureFormats().indexOf(b)>-1){i.compressedTexImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+v,M,b,w.width,w.height,0,w.data)}else{console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()")}}else{i.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+v,M,b,w.width,w.height,0,b,x,w.data)}}}}if(f(t,y)){e.generateMipmap(e.TEXTURE_CUBE_MAP)}c.__version=t.version;if(t.onUpdate)t.onUpdate(t)}else{i.activeTexture(e.TEXTURE0+o);i.bindTexture(e.TEXTURE_CUBE_MAP,c.__image__webglTextureCube)}}}function x(t,r){i.activeTexture(e.TEXTURE0+r);i.bindTexture(e.TEXTURE_CUBE_MAP,n.get(t).__webglTexture)}function _(i,s,o){var l;if(o){e.texParameteri(i,e.TEXTURE_WRAP_S,a.convert(s.wrapS));e.texParameteri(i,e.TEXTURE_WRAP_T,a.convert(s.wrapT));e.texParameteri(i,e.TEXTURE_MAG_FILTER,a.convert(s.magFilter));e.texParameteri(i,e.TEXTURE_MIN_FILTER,a.convert(s.minFilter))}else{e.texParameteri(i,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE);e.texParameteri(i,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE);if(s.wrapS!==pe||s.wrapT!==pe){console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping.",s)}e.texParameteri(i,e.TEXTURE_MAG_FILTER,d(s.magFilter));e.texParameteri(i,e.TEXTURE_MIN_FILTER,d(s.minFilter));if(s.minFilter!==ve&&s.minFilter!==be){console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.",s)}}l=t.get("EXT_texture_filter_anisotropic");if(l){if(s.type===Pe&&t.get("OES_texture_float_linear")===null)return;if(s.type===Le&&t.get("OES_texture_half_float_linear")===null)return;if(s.anisotropy>1||n.get(s).__currentAnisotropy){e.texParameterf(i,l.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(s.anisotropy,r.getMaxAnisotropy()));n.get(s).__currentAnisotropy=s.anisotropy}}}function w(t,n,d){if(t.__webglInit===undefined){t.__webglInit=true;n.addEventListener("dispose",p);t.__webglTexture=e.createTexture();s.textures++}i.activeTexture(e.TEXTURE0+d);i.bindTexture(e.TEXTURE_2D,t.__webglTexture);e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,n.flipY);e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,n.premultiplyAlpha);e.pixelStorei(e.UNPACK_ALIGNMENT,n.unpackAlignment);var m=l(n.image,r.maxTextureSize);if(h(n)&&u(m)===false){m=c(m)}var v=u(m),g=a.convert(n.format),y=a.convert(n.type);_(e.TEXTURE_2D,n,v);var b,x=n.mipmaps;if(n.isDepthTexture){var w=e.DEPTH_COMPONENT;if(n.type===Pe){if(!o)throw new Error("Float Depth Texture only supported in WebGL2.0");w=e.DEPTH_COMPONENT32F}else if(o){w=e.DEPTH_COMPONENT16}if(n.format===ze&&w===e.DEPTH_COMPONENT){if(n.type!==Se&&n.type!==Ae){console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture.");n.type=Se;y=a.convert(n.type)}}if(n.format===je){w=e.DEPTH_STENCIL;if(n.type!==De){console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture.");n.type=De;y=a.convert(n.type)}}i.texImage2D(e.TEXTURE_2D,0,w,m.width,m.height,0,g,y,null)}else if(n.isDataTexture){if(x.length>0&&v){for(var T=0,M=x.length;T<M;T++){b=x[T];i.texImage2D(e.TEXTURE_2D,T,g,b.width,b.height,0,g,y,b.data)}n.generateMipmaps=false}else{i.texImage2D(e.TEXTURE_2D,0,g,m.width,m.height,0,g,y,m.data)}}else if(n.isCompressedTexture){for(var T=0,M=x.length;T<M;T++){b=x[T];if(n.format!==Ue&&n.format!==ke){if(i.getCompressedTextureFormats().indexOf(g)>-1){i.compressedTexImage2D(e.TEXTURE_2D,T,g,b.width,b.height,0,b.data)}else{console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()")}}else{i.texImage2D(e.TEXTURE_2D,T,g,b.width,b.height,0,g,y,b.data)}}}else{if(x.length>0&&v){for(var T=0,M=x.length;T<M;T++){b=x[T];i.texImage2D(e.TEXTURE_2D,T,g,g,y,b)}n.generateMipmaps=false}else{i.texImage2D(e.TEXTURE_2D,0,g,g,y,m)}}if(f(n,v))e.generateMipmap(e.TEXTURE_2D);t.__version=n.version;if(n.onUpdate)n.onUpdate(n)}function T(t,r,s,o){var l=a.convert(r.texture.format);var u=a.convert(r.texture.type);i.texImage2D(o,0,l,r.width,r.height,0,l,u,null);e.bindFramebuffer(e.FRAMEBUFFER,t);e.framebufferTexture2D(e.FRAMEBUFFER,s,o,n.get(r.texture).__webglTexture,0);e.bindFramebuffer(e.FRAMEBUFFER,null)}function M(t,i){e.bindRenderbuffer(e.RENDERBUFFER,t);if(i.depthBuffer&&!i.stencilBuffer){e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_COMPONENT16,i.width,i.height);e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.RENDERBUFFER,t)}else if(i.depthBuffer&&i.stencilBuffer){e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_STENCIL,i.width,i.height);e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.RENDERBUFFER,t)}else{e.renderbufferStorage(e.RENDERBUFFER,e.RGBA4,i.width,i.height)}e.bindRenderbuffer(e.RENDERBUFFER,null)}function S(t,i){var r=i&&i.isWebGLRenderTargetCube;if(r)throw new Error("Depth Texture with cube render targets is not supported");e.bindFramebuffer(e.FRAMEBUFFER,t);if(!(i.depthTexture&&i.depthTexture.isDepthTexture)){throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture")}if(!n.get(i.depthTexture).__webglTexture||i.depthTexture.image.width!==i.width||i.depthTexture.image.height!==i.height){i.depthTexture.image.width=i.width;i.depthTexture.image.height=i.height;i.depthTexture.needsUpdate=true}y(i.depthTexture,0);var a=n.get(i.depthTexture).__webglTexture;if(i.depthTexture.format===ze){e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.TEXTURE_2D,a,0)}else if(i.depthTexture.format===je){e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.TEXTURE_2D,a,0)}else{throw new Error("Unknown depthTexture format")}}function E(t){var i=n.get(t);var r=t.isWebGLRenderTargetCube===true;if(t.depthTexture){if(r)throw new Error("target.depthTexture not supported in Cube render targets");S(i.__webglFramebuffer,t)}else{if(r){i.__webglDepthbuffer=[];for(var a=0;a<6;a++){e.bindFramebuffer(e.FRAMEBUFFER,i.__webglFramebuffer[a]);i.__webglDepthbuffer[a]=e.createRenderbuffer();M(i.__webglDepthbuffer[a],t)}}else{e.bindFramebuffer(e.FRAMEBUFFER,i.__webglFramebuffer);i.__webglDepthbuffer=e.createRenderbuffer();M(i.__webglDepthbuffer,t)}}e.bindFramebuffer(e.FRAMEBUFFER,null)}function A(t){var r=n.get(t);var a=n.get(t.texture);t.addEventListener("dispose",m);a.__webglTexture=e.createTexture();s.textures++;var o=t.isWebGLRenderTargetCube===true;var l=u(t);if(o){r.__webglFramebuffer=[];for(var c=0;c<6;c++){r.__webglFramebuffer[c]=e.createFramebuffer()}}else{r.__webglFramebuffer=e.createFramebuffer()}if(o){i.bindTexture(e.TEXTURE_CUBE_MAP,a.__webglTexture);_(e.TEXTURE_CUBE_MAP,t.texture,l);for(var c=0;c<6;c++){T(r.__webglFramebuffer[c],t,e.COLOR_ATTACHMENT0,e.TEXTURE_CUBE_MAP_POSITIVE_X+c)}if(f(t.texture,l))e.generateMipmap(e.TEXTURE_CUBE_MAP);i.bindTexture(e.TEXTURE_CUBE_MAP,null)}else{i.bindTexture(e.TEXTURE_2D,a.__webglTexture);_(e.TEXTURE_2D,t.texture,l);T(r.__webglFramebuffer,t,e.COLOR_ATTACHMENT0,e.TEXTURE_2D);if(f(t.texture,l))e.generateMipmap(e.TEXTURE_2D);i.bindTexture(e.TEXTURE_2D,null)}if(t.depthBuffer){E(t)}}function P(t){var r=t.texture;var a=u(t);if(f(r,a)){var s=t.isWebGLRenderTargetCube?e.TEXTURE_CUBE_MAP:e.TEXTURE_2D;var o=n.get(r).__webglTexture;i.bindTexture(s,o);e.generateMipmap(s);i.bindTexture(s,null)}}this.setTexture2D=y;this.setTextureCube=b;this.setTextureCubeDynamic=x;this.setupRenderTarget=A;this.updateRenderTargetMipmap=P}function Ka(){var e={};function t(t){var i=t.uuid;var n=e[i];if(n===undefined){n={};e[i]=n}return n}function i(t){delete e[t.uuid]}function n(){e={}}return{get:t,remove:i,clear:n}}function Qa(e,t,i){function n(){var t=false;var i=new Tt;var n=null;var r=new Tt(0,0,0,0);return{setMask:function(i){if(n!==i&&!t){e.colorMask(i,i,i,i);n=i}},setLocked:function(e){t=e},setClear:function(t,n,a,s,o){if(o===true){t*=s;n*=s;a*=s}i.set(t,n,a,s);if(r.equals(i)===false){e.clearColor(t,n,a,s);r.copy(i)}},reset:function(){t=false;n=null;r.set(-1,0,0,0)}}}function o(){var t=false;var i=null;var n=null;var r=null;return{setTest:function(t){if(t){oe(e.DEPTH_TEST)}else{le(e.DEPTH_TEST)}},setMask:function(n){if(i!==n&&!t){e.depthMask(n);i=n}},setFunc:function(t){if(n!==t){if(t){switch(t){case H:e.depthFunc(e.NEVER);break;case V:e.depthFunc(e.ALWAYS);break;case W:e.depthFunc(e.LESS);break;case X:e.depthFunc(e.LEQUAL);break;case Y:e.depthFunc(e.EQUAL);break;case q:e.depthFunc(e.GEQUAL);break;case Z:e.depthFunc(e.GREATER);break;case J:e.depthFunc(e.NOTEQUAL);break;default:e.depthFunc(e.LEQUAL)}}else{e.depthFunc(e.LEQUAL)}n=t}},setLocked:function(e){t=e},setClear:function(t){if(r!==t){e.clearDepth(t);r=t}},reset:function(){t=false;i=null;n=null;r=null}}}function l(){var t=false;var i=null;var n=null;var r=null;var a=null;var s=null;var o=null;var l=null;var u=null;return{setTest:function(t){if(t){oe(e.STENCIL_TEST)}else{le(e.STENCIL_TEST)}},setMask:function(n){if(i!==n&&!t){e.stencilMask(n);i=n}},setFunc:function(t,i,s){if(n!==t||r!==i||a!==s){e.stencilFunc(t,i,s);n=t;r=i;a=s}},setOp:function(t,i,n){if(s!==t||o!==i||l!==n){e.stencilOp(t,i,n);s=t;o=i;l=n}},setLocked:function(e){t=e},setClear:function(t){if(u!==t){e.clearStencil(t);u=t}},reset:function(){t=false;i=null;n=null;r=null;a=null;s=null;o=null;l=null;u=null}}}var u=new n;var c=new o;var h=new l;var f=e.getParameter(e.MAX_VERTEX_ATTRIBS);var d=new Uint8Array(f);var v=new Uint8Array(f);var g=new Uint8Array(f);var y={};var b=null;var x=null;var A=null;var P=null;var L=null;var R=null;var C=null;var O=null;var D=null;var I=false;var k=null
;var U=null;var F=null;var N=null;var B=null;var z=e.getParameter(e.MAX_COMBINED_TEXTURE_IMAGE_UNITS);var j=parseFloat(/^WebGL\ ([0-9])/.exec(e.getParameter(e.VERSION))[1]);var G=parseFloat(j)>=1;var K=null;var Q={};var $=new Tt;var ee=new Tt;function te(t,i,n){var r=new Uint8Array(4);var a=e.createTexture();e.bindTexture(t,a);e.texParameteri(t,e.TEXTURE_MIN_FILTER,e.NEAREST);e.texParameteri(t,e.TEXTURE_MAG_FILTER,e.NEAREST);for(var s=0;s<n;s++){e.texImage2D(i+s,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,r)}return a}var ie={};ie[e.TEXTURE_2D]=te(e.TEXTURE_2D,e.TEXTURE_2D,1);ie[e.TEXTURE_CUBE_MAP]=te(e.TEXTURE_CUBE_MAP,e.TEXTURE_CUBE_MAP_POSITIVE_X,6);u.setClear(0,0,0,1);c.setClear(1);h.setClear(0);oe(e.DEPTH_TEST);c.setFunc(X);de(false);pe(a);oe(e.CULL_FACE);oe(e.BLEND);he(w);function ne(){for(var e=0,t=d.length;e<t;e++){d[e]=0}}function re(i){d[i]=1;if(v[i]===0){e.enableVertexAttribArray(i);v[i]=1}if(g[i]!==0){var n=t.get("ANGLE_instanced_arrays");n.vertexAttribDivisorANGLE(i,0);g[i]=0}}function ae(i,n){d[i]=1;if(v[i]===0){e.enableVertexAttribArray(i);v[i]=1}if(g[i]!==n){var r=t.get("ANGLE_instanced_arrays");r.vertexAttribDivisorANGLE(i,n);g[i]=n}}function se(){for(var t=0,i=v.length;t!==i;++t){if(v[t]!==d[t]){e.disableVertexAttribArray(t);v[t]=0}}}function oe(t){if(y[t]!==true){e.enable(t);y[t]=true}}function le(t){if(y[t]!==false){e.disable(t);y[t]=false}}function ue(){if(b===null){b=[];if(t.get("WEBGL_compressed_texture_pvrtc")||t.get("WEBGL_compressed_texture_s3tc")||t.get("WEBGL_compressed_texture_etc1")){var i=e.getParameter(e.COMPRESSED_TEXTURE_FORMATS);for(var n=0;n<i.length;n++){b.push(i[n])}}}return b}function ce(t){if(x!==t){e.useProgram(t);x=t;return true}return false}function he(t,n,r,a,s,o,l,u){if(t!==_){oe(e.BLEND)}else{le(e.BLEND)}if(t!==E){if(t!==A||u!==I){switch(t){case T:if(u){e.blendEquationSeparate(e.FUNC_ADD,e.FUNC_ADD);e.blendFuncSeparate(e.ONE,e.ONE,e.ONE,e.ONE)}else{e.blendEquation(e.FUNC_ADD);e.blendFunc(e.SRC_ALPHA,e.ONE)}break;case M:if(u){e.blendEquationSeparate(e.FUNC_ADD,e.FUNC_ADD);e.blendFuncSeparate(e.ZERO,e.ZERO,e.ONE_MINUS_SRC_COLOR,e.ONE_MINUS_SRC_ALPHA)}else{e.blendEquation(e.FUNC_ADD);e.blendFunc(e.ZERO,e.ONE_MINUS_SRC_COLOR)}break;case S:if(u){e.blendEquationSeparate(e.FUNC_ADD,e.FUNC_ADD);e.blendFuncSeparate(e.ZERO,e.SRC_COLOR,e.ZERO,e.SRC_ALPHA)}else{e.blendEquation(e.FUNC_ADD);e.blendFunc(e.ZERO,e.SRC_COLOR)}break;default:if(u){e.blendEquationSeparate(e.FUNC_ADD,e.FUNC_ADD);e.blendFuncSeparate(e.ONE,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA)}else{e.blendEquationSeparate(e.FUNC_ADD,e.FUNC_ADD);e.blendFuncSeparate(e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA)}}}P=null;L=null;R=null;C=null;O=null;D=null}else{s=s||n;o=o||r;l=l||a;if(n!==P||s!==C){e.blendEquationSeparate(i.convert(n),i.convert(s));P=n;C=s}if(r!==L||a!==R||o!==O||l!==D){e.blendFuncSeparate(i.convert(r),i.convert(a),i.convert(o),i.convert(l));L=r;R=a;O=o;D=l}}A=t;I=u}function fe(t){t.side===m?le(e.CULL_FACE):oe(e.CULL_FACE);de(t.side===p);t.transparent===true?he(t.blending,t.blendEquation,t.blendSrc,t.blendDst,t.blendEquationAlpha,t.blendSrcAlpha,t.blendDstAlpha,t.premultipliedAlpha):he(_);c.setFunc(t.depthFunc);c.setTest(t.depthTest);c.setMask(t.depthWrite);u.setMask(t.colorWrite);ve(t.polygonOffset,t.polygonOffsetFactor,t.polygonOffsetUnits)}function de(t){if(k!==t){if(t){e.frontFace(e.CW)}else{e.frontFace(e.CCW)}k=t}}function pe(t){if(t!==r){oe(e.CULL_FACE);if(t!==U){if(t===a){e.cullFace(e.BACK)}else if(t===s){e.cullFace(e.FRONT)}else{e.cullFace(e.FRONT_AND_BACK)}}}else{le(e.CULL_FACE)}U=t}function me(t){if(t!==F){if(G)e.lineWidth(t);F=t}}function ve(t,i,n){if(t){oe(e.POLYGON_OFFSET_FILL);if(N!==i||B!==n){e.polygonOffset(i,n);N=i;B=n}}else{le(e.POLYGON_OFFSET_FILL)}}function ge(t){if(t){oe(e.SCISSOR_TEST)}else{le(e.SCISSOR_TEST)}}function ye(t){if(t===undefined)t=e.TEXTURE0+z-1;if(K!==t){e.activeTexture(t);K=t}}function be(t,i){if(K===null){ye()}var n=Q[K];if(n===undefined){n={type:undefined,texture:undefined};Q[K]=n}if(n.type!==t||n.texture!==i){e.bindTexture(t,i||ie[t]);n.type=t;n.texture=i}}function xe(){try{e.compressedTexImage2D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}}function _e(){try{e.texImage2D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}}function we(t){if($.equals(t)===false){e.scissor(t.x,t.y,t.z,t.w);$.copy(t)}}function Te(t){if(ee.equals(t)===false){e.viewport(t.x,t.y,t.z,t.w);ee.copy(t)}}function Me(){for(var t=0;t<v.length;t++){if(v[t]===1){e.disableVertexAttribArray(t);v[t]=0}}y={};b=null;K=null;Q={};x=null;A=null;k=null;U=null;u.reset();c.reset();h.reset()}return{buffers:{color:u,depth:c,stencil:h},initAttributes:ne,enableAttribute:re,enableAttributeAndDivisor:ae,disableUnusedAttributes:se,enable:oe,disable:le,getCompressedTextureFormats:ue,useProgram:ce,setBlending:he,setMaterial:fe,setFlipSided:de,setCullFace:pe,setLineWidth:me,setPolygonOffset:ve,setScissorTest:ge,activeTexture:ye,bindTexture:be,compressedTexImage2D:xe,texImage2D:_e,scissor:we,viewport:Te,reset:Me}}function $a(e,t,i){var n;function r(){if(n!==undefined)return n;var i=t.get("EXT_texture_filter_anisotropic");if(i!==null){n=e.getParameter(i.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else{n=0}return n}function a(t){if(t==="highp"){if(e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.HIGH_FLOAT).precision>0&&e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.HIGH_FLOAT).precision>0){return"highp"}t="mediump"}if(t==="mediump"){if(e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.MEDIUM_FLOAT).precision>0&&e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.MEDIUM_FLOAT).precision>0){return"mediump"}}return"lowp"}var s=i.precision!==undefined?i.precision:"highp";var o=a(s);if(o!==s){console.warn("THREE.WebGLRenderer:",s,"not supported, using",o,"instead.");s=o}var l=i.logarithmicDepthBuffer===true&&!!t.get("EXT_frag_depth");var u=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS);var c=e.getParameter(e.MAX_VERTEX_TEXTURE_IMAGE_UNITS);var h=e.getParameter(e.MAX_TEXTURE_SIZE);var f=e.getParameter(e.MAX_CUBE_MAP_TEXTURE_SIZE);var d=e.getParameter(e.MAX_VERTEX_ATTRIBS);var p=e.getParameter(e.MAX_VERTEX_UNIFORM_VECTORS);var m=e.getParameter(e.MAX_VARYING_VECTORS);var v=e.getParameter(e.MAX_FRAGMENT_UNIFORM_VECTORS);var g=c>0;var y=!!t.get("OES_texture_float");var b=g&&y;return{getMaxAnisotropy:r,getMaxPrecision:a,precision:s,logarithmicDepthBuffer:l,maxTextures:u,maxVertexTextures:c,maxTextureSize:h,maxCubemapSize:f,maxAttributes:d,maxVertexUniforms:p,maxVaryings:m,maxFragmentUniforms:v,vertexTextures:g,floatFragmentTextures:y,floatVertexTextures:b}}function es(e){qr.call(this);this.cameras=e||[]}es.prototype=Object.assign(Object.create(qr.prototype),{constructor:es,isArrayCamera:true});function ts(e){var t=this;var i=null;var n=null;if("VRFrameData"in window){n=new window.VRFrameData}var r=new Pt;var a=new Pt;var s=new Pt;var o=new qr;o.bounds=new Tt(0,0,.5,1);o.layers.enable(1);var l=new qr;l.bounds=new Tt(.5,0,.5,1);l.layers.enable(2);var u=new es([o,l]);u.layers.enable(1);u.layers.enable(2);var c,h;function f(){if(i!==null&&i.isPresenting){var n=i.getEyeParameters("left");var r=n.renderWidth;var a=n.renderHeight;h=e.getPixelRatio();c=e.getSize();e.setDrawingBufferSize(r*2,a,1)}else if(t.enabled){e.setDrawingBufferSize(c.width,c.height,h)}}window.addEventListener("vrdisplaypresentchange",f,false);this.enabled=false;this.standing=false;this.getDevice=function(){return i};this.setDevice=function(e){if(e!==undefined)i=e};this.getCamera=function(e){if(i===null)return e;i.depthNear=e.near;i.depthFar=e.far;i.getFrameData(n);var t=n.pose;if(t.position!==null){e.position.fromArray(t.position)}else{e.position.set(0,0,0)}if(t.orientation!==null){e.quaternion.fromArray(t.orientation)}e.updateMatrixWorld();var c=i.stageParameters;if(this.standing&&c){a.fromArray(c.sittingToStandingTransform);s.getInverse(a);e.matrixWorld.multiply(a);e.matrixWorldInverse.multiply(s)}if(i.isPresenting===false)return e;o.near=e.near;l.near=e.near;o.far=e.far;l.far=e.far;u.matrixWorld.copy(e.matrixWorld);u.matrixWorldInverse.copy(e.matrixWorldInverse);o.matrixWorldInverse.fromArray(n.leftViewMatrix);l.matrixWorldInverse.fromArray(n.rightViewMatrix);if(this.standing&&c){o.matrixWorldInverse.multiply(s);l.matrixWorldInverse.multiply(s)}var h=e.parent;if(h!==null){r.getInverse(h.matrixWorld);o.matrixWorldInverse.multiply(r);l.matrixWorldInverse.multiply(r)}o.matrixWorld.getInverse(o.matrixWorldInverse);l.matrixWorld.getInverse(l.matrixWorldInverse);o.projectionMatrix.fromArray(n.leftProjectionMatrix);l.projectionMatrix.fromArray(n.rightProjectionMatrix);u.projectionMatrix.copy(o.projectionMatrix);var f=i.getLayers();if(f.length){var d=f[0];if(d.leftBounds!==null&&d.leftBounds.length===4){o.bounds.fromArray(d.leftBounds)}if(d.rightBounds!==null&&d.rightBounds.length===4){l.bounds.fromArray(d.rightBounds)}}return u};this.getStandingMatrix=function(){return a};this.submitFrame=function(){if(i&&i.isPresenting)i.submitFrame()};this.dispose=function(){window.removeEventListener("vrdisplaypresentchange",f)}}function is(e){var t={};return{get:function(i){if(t[i]!==undefined){return t[i]}var n;switch(i){case"WEBGL_depth_texture":n=e.getExtension("WEBGL_depth_texture")||e.getExtension("MOZ_WEBGL_depth_texture")||e.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":n=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":n=e.getExtension("WEBGL_compressed_texture_s3tc")||e.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":n=e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;case"WEBGL_compressed_texture_etc1":n=e.getExtension("WEBGL_compressed_texture_etc1");break;default:n=e.getExtension(i)}if(n===null){console.warn("THREE.WebGLRenderer: "+i+" extension not supported.")}t[i]=n;return n}}}function ns(){var e=this,t=null,i=0,n=false,r=false,a=new Nr,s=new Fr,o={value:null,needsUpdate:false};this.uniform=o;this.numPlanes=0;this.numIntersection=0;this.init=function(e,r,a){var s=e.length!==0||r||i!==0||n;n=r;t=u(e,a,0);i=e.length;return s};this.beginShadows=function(){r=true;u(null)};this.endShadows=function(){r=false;l()};this.setState=function(e,a,s,c,h,f){if(!n||e===null||e.length===0||r&&!s){if(r){u(null)}else{l()}}else{var d=r?0:i,p=d*4,m=h.clippingState||null;o.value=m;m=u(e,c,p,f);for(var v=0;v!==p;++v){m[v]=t[v]}h.clippingState=m;this.numIntersection=a?this.numPlanes:0;this.numPlanes+=d}};function l(){if(o.value!==t){o.value=t;o.needsUpdate=i>0}e.numPlanes=i;e.numIntersection=0}function u(t,i,n,r){var l=t!==null?t.length:0,u=null;if(l!==0){u=o.value;if(r!==true||u===null){var c=n+l*4,h=i.matrixWorldInverse;s.getNormalMatrix(h);if(u===null||u.length<c){u=new Float32Array(c)}for(var f=0,d=n;f!==l;++f,d+=4){a.copy(t[f]).applyMatrix4(h,s);a.normal.toArray(u,d);u[d+3]=a.constant}}o.value=u;o.needsUpdate=true}e.numPlanes=l;return u}}function rs(e,t){function i(i){var n;if(i===de)return e.REPEAT;if(i===pe)return e.CLAMP_TO_EDGE;if(i===me)return e.MIRRORED_REPEAT;if(i===ve)return e.NEAREST;if(i===ge)return e.NEAREST_MIPMAP_NEAREST;if(i===ye)return e.NEAREST_MIPMAP_LINEAR;if(i===be)return e.LINEAR;if(i===xe)return e.LINEAR_MIPMAP_NEAREST;if(i===_e)return e.LINEAR_MIPMAP_LINEAR;if(i===we)return e.UNSIGNED_BYTE;if(i===Re)return e.UNSIGNED_SHORT_4_4_4_4;if(i===Ce)return e.UNSIGNED_SHORT_5_5_5_1;if(i===Oe)return e.UNSIGNED_SHORT_5_6_5;if(i===Te)return e.BYTE;if(i===Me)return e.SHORT;if(i===Se)return e.UNSIGNED_SHORT;if(i===Ee)return e.INT;if(i===Ae)return e.UNSIGNED_INT;if(i===Pe)return e.FLOAT;if(i===Le){n=t.get("OES_texture_half_float");if(n!==null)return n.HALF_FLOAT_OES}if(i===Ie)return e.ALPHA;if(i===ke)return e.RGB;if(i===Ue)return e.RGBA;if(i===Fe)return e.LUMINANCE;if(i===Ne)return e.LUMINANCE_ALPHA;if(i===ze)return e.DEPTH_COMPONENT;if(i===je)return e.DEPTH_STENCIL;if(i===A)return e.FUNC_ADD;if(i===P)return e.FUNC_SUBTRACT;if(i===L)return e.FUNC_REVERSE_SUBTRACT;if(i===O)return e.ZERO;if(i===D)return e.ONE;if(i===I)return e.SRC_COLOR;if(i===k)return e.ONE_MINUS_SRC_COLOR;if(i===U)return e.SRC_ALPHA;if(i===F)return e.ONE_MINUS_SRC_ALPHA;if(i===N)return e.DST_ALPHA;if(i===B)return e.ONE_MINUS_DST_ALPHA;if(i===z)return e.DST_COLOR;if(i===j)return e.ONE_MINUS_DST_COLOR;if(i===G)return e.SRC_ALPHA_SATURATE;if(i===Ge||i===He||i===Ve||i===We){n=t.get("WEBGL_compressed_texture_s3tc");if(n!==null){if(i===Ge)return n.COMPRESSED_RGB_S3TC_DXT1_EXT;if(i===He)return n.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(i===Ve)return n.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(i===We)return n.COMPRESSED_RGBA_S3TC_DXT5_EXT}}if(i===Xe||i===Ye||i===qe||i===Ze){n=t.get("WEBGL_compressed_texture_pvrtc");if(n!==null){if(i===Xe)return n.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(i===Ye)return n.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(i===qe)return n.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(i===Ze)return n.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}}if(i===Je){n=t.get("WEBGL_compressed_texture_etc1");if(n!==null)return n.COMPRESSED_RGB_ETC1_WEBGL}if(i===R||i===C){n=t.get("EXT_blend_minmax");if(n!==null){if(i===R)return n.MIN_EXT;if(i===C)return n.MAX_EXT}}if(i===De){n=t.get("WEBGL_depth_texture");if(n!==null)return n.UNSIGNED_INT_24_8_WEBGL}return 0}return{convert:i}}function as(e){console.log("THREE.WebGLRenderer",i);e=e||{};var t=e.canvas!==undefined?e.canvas:document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),n=e.context!==undefined?e.context:null,r=e.alpha!==undefined?e.alpha:false,a=e.depth!==undefined?e.depth:true,s=e.stencil!==undefined?e.stencil:true,o=e.antialias!==undefined?e.antialias:false,u=e.premultipliedAlpha!==undefined?e.premultipliedAlpha:true,c=e.preserveDrawingBuffer!==undefined?e.preserveDrawingBuffer:false;var h=[];var f=[];var d=null;var p=[];var m=[];this.domElement=t;this.context=null;this.autoClear=true;this.autoClearColor=true;this.autoClearDepth=true;this.autoClearStencil=true;this.sortObjects=true;this.clippingPlanes=[];this.localClippingEnabled=false;this.gammaFactor=2;this.gammaInput=false;this.gammaOutput=false;this.physicallyCorrectLights=false;this.toneMapping=te;this.toneMappingExposure=1;this.toneMappingWhitePoint=1;this.maxMorphTargets=8;this.maxMorphNormals=4;var v=this,g=false,b=null,x=null,_=-1,w="",T=null,M=null,S=new Tt,E=new Tt,A=null,P=0,L=t.width,R=t.height,C=1,O=new Tt(0,0,L,R),D=new Tt(0,0,L,R),I=false,k=new Br,U=new ns,F=false,N=false,B=new Pt,z=new At,j={geometries:0,textures:0},G={frame:0,calls:0,vertices:0,faces:0,points:0};this.info={render:G,memory:j,programs:null};function H(){return b===null?C:1}var V;try{var W={alpha:r,depth:a,stencil:s,antialias:o,premultipliedAlpha:u,preserveDrawingBuffer:c};V=n||t.getContext("webgl",W)||t.getContext("experimental-webgl",W);if(V===null){if(t.getContext("webgl")!==null){throw"Error creating WebGL context with your selected attributes."}else{throw"Error creating WebGL context."}}if(V.getShaderPrecisionFormat===undefined){V.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}}}t.addEventListener("webglcontextlost",pe,false);t.addEventListener("webglcontextrestored",me,false)}catch(e){console.error("THREE.WebGLRenderer: "+e)}var X,Y,q;var Z,J,K,Q,$,ee;var ie,ne;var re,ae,se,oe;var le,ue;var ce;function he(){X=new is(V);X.get("WEBGL_depth_texture");X.get("OES_texture_float");X.get("OES_texture_float_linear");X.get("OES_texture_half_float");X.get("OES_texture_half_float_linear");X.get("OES_standard_derivatives");X.get("ANGLE_instanced_arrays");if(X.get("OES_element_index_uint")){ha.MaxIndex=4294967296}ce=new rs(V,X);Y=new $a(V,X,e);q=new Qa(V,X,ce);q.scissor(E.copy(D).multiplyScalar(C));q.viewport(S.copy(O).multiplyScalar(C));Z=new Ka;J=new Ja(V,X,q,Z,Y,ce,j);K=new jr(V);Q=new Ra(V,K,j);$=new Da(Q,G);ae=new Aa(V);ie=new Za(v,X,Y);ee=new Oa;ne=new Sa;re=new _a(v,q,Q,u);se=new La(V,X,G);oe=new Pa(V,X,G);le=new Ar(v,V,q,J,Y);ue=new Lr(v,V,q,J,Y);v.info.programs=ie.programs;v.context=V;v.capabilities=Y;v.extensions=X;v.properties=Z;v.renderLists=ne;v.state=q}he();var fe=new ts(v);this.vr=fe;var de=new zr(v,$,Y.maxTextureSize);this.shadowMap=de;this.getContext=function(){return V};this.getContextAttributes=function(){return V.getContextAttributes()};this.forceContextLoss=function(){var e=X.get("WEBGL_lose_context");if(e)e.loseContext()};this.forceContextRestore=function(){var e=X.get("WEBGL_lose_context");if(e)e.restoreContext()};this.getPixelRatio=function(){return C};this.setPixelRatio=function(e){if(e===undefined)return;C=e;this.setSize(L,R,false)};this.getSize=function(){return{width:L,height:R}};this.setSize=function(e,i,n){var r=fe.getDevice();if(r&&r.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}L=e;R=i;t.width=e*C;t.height=i*C;if(n!==false){t.style.width=e+"px";t.style.height=i+"px"}this.setViewport(0,0,e,i)};this.getDrawingBufferSize=function(){return{width:L*C,height:R*C}};this.setDrawingBufferSize=function(e,i,n){L=e;R=i;C=n;t.width=e*n;t.height=i*n;this.setViewport(0,0,e,i)};this.setViewport=function(e,t,i,n){O.set(e,R-t-n,i,n);q.viewport(S.copy(O).multiplyScalar(C))};this.setScissor=function(e,t,i,n){D.set(e,R-t-n,i,n);q.scissor(E.copy(D).multiplyScalar(C))};this.setScissorTest=function(e){q.setScissorTest(I=e)};this.getClearColor=re.getClearColor;this.setClearColor=re.setClearColor;this.getClearAlpha=re.getClearAlpha;this.setClearAlpha=re.setClearAlpha;this.clear=function(e,t,i){var n=0;if(e===undefined||e)n|=V.COLOR_BUFFER_BIT;if(t===undefined||t)n|=V.DEPTH_BUFFER_BIT;if(i===undefined||i)n|=V.STENCIL_BUFFER_BIT;V.clear(n)};this.clearColor=function(){this.clear(true,false,false)};this.clearDepth=function(){this.clear(false,true,false)};this.clearStencil=function(){this.clear(false,false,true)};this.clearTarget=function(e,t,i,n){this.setRenderTarget(e);this.clear(t,i,n)};this.dispose=function(){t.removeEventListener("webglcontextlost",pe,false);t.removeEventListener("webglcontextrestored",me,false);ne.dispose();fe.dispose()};function pe(e){e.preventDefault();console.log("THREE.WebGLRenderer: Context Lost.");g=true}function me(e){console.log("THREE.WebGLRenderer: Context Restored.");g=false;he()}function ve(e){var t=e.target;t.removeEventListener("dispose",ve);ge(t)}function ge(e){ye(e);Z.remove(e)}function ye(e){var t=Z.get(e).program;e.program=undefined;if(t!==undefined){ie.releaseProgram(t)}}function be(e,t,i){e.render(function(e){v.renderBufferImmediate(e,t,i)})}this.renderBufferImmediate=function(e,t,i){q.initAttributes();var n=Z.get(e);if(e.hasPositions&&!n.position)n.position=V.createBuffer();if(e.hasNormals&&!n.normal)n.normal=V.createBuffer();if(e.hasUvs&&!n.uv)n.uv=V.createBuffer();if(e.hasColors&&!n.color)n.color=V.createBuffer();var r=t.getAttributes();if(e.hasPositions){V.bindBuffer(V.ARRAY_BUFFER,n.position);V.bufferData(V.ARRAY_BUFFER,e.positionArray,V.DYNAMIC_DRAW);q.enableAttribute(r.position);V.vertexAttribPointer(r.position,3,V.FLOAT,false,0,0)}if(e.hasNormals){V.bindBuffer(V.ARRAY_BUFFER,n.normal);if(!i.isMeshPhongMaterial&&!i.isMeshStandardMaterial&&!i.isMeshNormalMaterial&&i.flatShading===true){for(var a=0,s=e.count*3;a<s;a+=9){var o=e.normalArray;var l=(o[a+0]+o[a+3]+o[a+6])/3;var u=(o[a+1]+o[a+4]+o[a+7])/3;var c=(o[a+2]+o[a+5]+o[a+8])/3;o[a+0]=l;o[a+1]=u;o[a+2]=c;o[a+3]=l;o[a+4]=u;o[a+5]=c;o[a+6]=l;o[a+7]=u;o[a+8]=c}}V.bufferData(V.ARRAY_BUFFER,e.normalArray,V.DYNAMIC_DRAW);q.enableAttribute(r.normal);V.vertexAttribPointer(r.normal,3,V.FLOAT,false,0,0)}if(e.hasUvs&&i.map){V.bindBuffer(V.ARRAY_BUFFER,n.uv);V.bufferData(V.ARRAY_BUFFER,e.uvArray,V.DYNAMIC_DRAW);q.enableAttribute(r.uv);V.vertexAttribPointer(r.uv,2,V.FLOAT,false,0,0)}if(e.hasColors&&i.vertexColors!==y){V.bindBuffer(V.ARRAY_BUFFER,n.color);V.bufferData(V.ARRAY_BUFFER,e.colorArray,V.DYNAMIC_DRAW);q.enableAttribute(r.color);V.vertexAttribPointer(r.color,3,V.FLOAT,false,0,0)}q.disableUnusedAttributes();V.drawArrays(V.TRIANGLES,0,e.count);e.count=0};this.renderBufferDirect=function(e,t,i,n,r,a){q.setMaterial(n);var s=Oe(e,t,n,r);var o=i.id+"_"+s.id+"_"+(n.wireframe===true);var l=false;if(o!==w){w=o;l=true}if(r.morphTargetInfluences){ae.update(r,i,n,s);l=true}var u=i.index;var c=i.attributes.position;var h=1;if(n.wireframe===true){u=Q.getWireframeAttribute(i);h=2}var f;var d=se;if(u!==null){f=K.get(u);d=oe;d.setIndex(f)}if(l){xe(n,s,i);if(u!==null){V.bindBuffer(V.ELEMENT_ARRAY_BUFFER,f.buffer)}}var p=0;if(u!==null){p=u.count}else if(c!==undefined){p=c.count}var m=i.drawRange.start*h;var v=i.drawRange.count*h;var g=a!==null?a.start*h:0;var y=a!==null?a.count*h:Infinity;var b=Math.max(m,g);var x=Math.min(p,m+v,g+y)-1;var _=Math.max(0,x-b+1);if(_===0)return;if(r.isMesh){if(n.wireframe===true){q.setLineWidth(n.wireframeLinewidth*H());d.setMode(V.LINES)}else{switch(r.drawMode){case st:d.setMode(V.TRIANGLES);break;case ot:d.setMode(V.TRIANGLE_STRIP);break;case lt:d.setMode(V.TRIANGLE_FAN);break}}}else if(r.isLine){var T=n.linewidth;if(T===undefined)T=1;q.setLineWidth(T*H());if(r.isLineSegments){d.setMode(V.LINES)}else if(r.isLineLoop){d.setMode(V.LINE_LOOP)}else{d.setMode(V.LINE_STRIP)}}else if(r.isPoints){d.setMode(V.POINTS)}if(i&&i.isInstancedBufferGeometry){if(i.maxInstancedCount>0){d.renderInstances(i,b,_)}}else{d.render(b,_)}};function xe(e,t,i,n){if(i&&i.isInstancedBufferGeometry){if(X.get("ANGLE_instanced_arrays")===null){console.error("THREE.WebGLRenderer.setupVertexAttributes: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}}if(n===undefined)n=0;q.initAttributes();var r=i.attributes;var a=t.getAttributes();var s=e.defaultAttributeValues;for(var o in a){var l=a[o];if(l>=0){var u=r[o];if(u!==undefined){var c=u.normalized;var h=u.itemSize;var f=K.get(u);if(f===undefined)continue;var d=f.buffer;var p=f.type;var m=f.bytesPerElement;if(u.isInterleavedBufferAttribute){var v=u.data;var g=v.stride;var y=u.offset;if(v&&v.isInstancedInterleavedBuffer){q.enableAttributeAndDivisor(l,v.meshPerAttribute);if(i.maxInstancedCount===undefined){i.maxInstancedCount=v.meshPerAttribute*v.count}}else{q.enableAttribute(l)}V.bindBuffer(V.ARRAY_BUFFER,d);V.vertexAttribPointer(l,h,p,c,g*m,(n*g+y)*m)}else{if(u.isInstancedBufferAttribute){q.enableAttributeAndDivisor(l,u.meshPerAttribute);if(i.maxInstancedCount===undefined){i.maxInstancedCount=u.meshPerAttribute*u.count}}else{q.enableAttribute(l)}V.bindBuffer(V.ARRAY_BUFFER,d);V.vertexAttribPointer(l,h,p,c,0,n*h*m)}}else if(s!==undefined){var b=s[o];if(b!==undefined){switch(b.length){case 2:V.vertexAttrib2fv(l,b);break;case 3:V.vertexAttrib3fv(l,b);break;case 4:V.vertexAttrib4fv(l,b);break;default:V.vertexAttrib1fv(l,b)}}}}}q.disableUnusedAttributes()}this.compile=function(e,t){h.length=0;f.length=0;e.traverse(function(e){if(e.isLight){h.push(e);if(e.castShadow){f.push(e)}}});ee.setup(h,f,t);e.traverse(function(t){if(t.material){if(Array.isArray(t.material)){for(var i=0;i<t.material.length;i++){Ce(t.material[i],e.fog,t)}}else{Ce(t.material,e.fog,t)}}})};var _e=false;var Te=null;function Me(){if(_e)return;(fe.getDevice()||window).requestAnimationFrame(Se);_e=true}function Se(e){if(Te!==null)Te(e);(fe.getDevice()||window).requestAnimationFrame(Se)}this.animate=function(e){Te=e;Me()};this.render=function(e,t,i,n){if(!(t&&t.isCamera)){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(g)return;w="";_=-1;T=null;if(e.autoUpdate===true)e.updateMatrixWorld();if(t.parent===null)t.updateMatrixWorld();if(fe.enabled){t=fe.getCamera(t)}B.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse);k.setFromMatrix(B);h.length=0;f.length=0;p.length=0;m.length=0;N=this.localClippingEnabled;F=U.init(this.clippingPlanes,N,t);d=ne.get(e,t);d.init();Ee(e,t,v.sortObjects);if(v.sortObjects===true){d.sort()}if(F)U.beginShadows();de.render(f,e,t);ee.setup(h,f,t);if(F)U.endShadows();G.frame++;G.calls=0;G.vertices=0;G.faces=0;G.points=0;if(i===undefined){i=null}this.setRenderTarget(i);re.render(d,e,t,n);var r=d.opaque;var a=d.transparent;if(e.overrideMaterial){var s=e.overrideMaterial;if(r.length)Ae(r,e,t,s);if(a.length)Ae(a,e,t,s)}else{if(r.length)Ae(r,e,t);if(a.length)Ae(a,e,t)}ue.render(p,e,t);le.render(m,e,t,S);if(i){J.updateRenderTargetMipmap(i)}q.buffers.depth.setTest(true);q.buffers.depth.setMask(true);q.buffers.color.setMask(true);q.setPolygonOffset(false);if(fe.enabled){fe.submitFrame()}};function Ee(e,t,i){if(!e.visible)return;var n=e.layers.test(t.layers);if(n){if(e.isLight){h.push(e);if(e.castShadow){f.push(e)}}else if(e.isSprite){if(!e.frustumCulled||k.intersectsSprite(e)){p.push(e)}}else if(e.isLensFlare){m.push(e)}else if(e.isImmediateRenderObject){if(i){z.setFromMatrixPosition(e.matrixWorld).applyMatrix4(B)}d.push(e,null,e.material,z.z,null)}else if(e.isMesh||e.isLine||e.isPoints){if(e.isSkinnedMesh){e.skeleton.update()}if(!e.frustumCulled||k.intersectsObject(e)){if(i){z.setFromMatrixPosition(e.matrixWorld).applyMatrix4(B)}var r=$.update(e);var a=e.material;if(Array.isArray(a)){var s=r.groups;for(var o=0,l=s.length;o<l;o++){var u=s[o];var c=a[u.materialIndex];if(c&&c.visible){d.push(e,r,c,z.z,u)}}}else if(a.visible){d.push(e,r,a,z.z,null)}}}}var v=e.children;for(var o=0,l=v.length;o<l;o++){Ee(v[o],t,i)}}function Ae(e,t,i,n){for(var r=0,a=e.length;r<a;r++){var s=e[r];var o=s.object;var l=s.geometry;var u=n===undefined?s.material:n;var c=s.group;if(i.isArrayCamera){M=i;var h=i.cameras;for(var f=0,d=h.length;f<d;f++){var p=h[f];if(o.layers.test(p.layers)){var m=p.bounds;var v=m.x*L;var g=m.y*R;var y=m.z*L;var b=m.w*R;q.viewport(S.set(v,g,y,b).multiplyScalar(C));Re(o,t,p,l,u,c)}}}else{M=null;Re(o,t,i,l,u,c)}}}function Re(e,t,i,n,r,a){e.onBeforeRender(v,t,i,n,r,a);e.modelViewMatrix.multiplyMatrices(i.matrixWorldInverse,e.matrixWorld);e.normalMatrix.getNormalMatrix(e.modelViewMatrix);if(e.isImmediateRenderObject){q.setMaterial(r);var s=Oe(i,t.fog,r,e);w="";be(e,s,r)}else{v.renderBufferDirect(i,t.fog,n,r,e,a)}e.onAfterRender(v,t,i,n,r,a)}function Ce(e,t,i){var n=Z.get(e);var r=ie.getParameters(e,ee.state,f,t,U.numPlanes,U.numIntersection,i);var a=ie.getProgramCode(e,r);var s=n.program;var o=true;if(s===undefined){e.addEventListener("dispose",ve)}else if(s.code!==a){ye(e)}else if(r.shaderID!==undefined){return}else{o=false}if(o){if(r.shaderID){var l=Sr[r.shaderID];n.shader={name:e.type,uniforms:_i.clone(l.uniforms),vertexShader:l.vertexShader,fragmentShader:l.fragmentShader}}else{n.shader={name:e.type,uniforms:e.uniforms,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader}}e.onBeforeCompile(n.shader);s=ie.acquireProgram(e,n.shader,r,a);n.program=s;e.program=s}var u=s.getAttributes();if(e.morphTargets){e.numSupportedMorphTargets=0;for(var c=0;c<v.maxMorphTargets;c++){if(u["morphTarget"+c]>=0){e.numSupportedMorphTargets++}}}if(e.morphNormals){e.numSupportedMorphNormals=0;for(var c=0;c<v.maxMorphNormals;c++){if(u["morphNormal"+c]>=0){e.numSupportedMorphNormals++}}}var h=n.shader.uniforms;if(!e.isShaderMaterial&&!e.isRawShaderMaterial||e.clipping===true){n.numClippingPlanes=U.numPlanes;n.numIntersection=U.numIntersection;h.clippingPlanes=U.uniform}n.fog=t;n.lightsHash=ee.state.hash;if(e.lights){h.ambientLightColor.value=ee.state.ambient;h.directionalLights.value=ee.state.directional;h.spotLights.value=ee.state.spot;h.rectAreaLights.value=ee.state.rectArea;h.pointLights.value=ee.state.point;h.hemisphereLights.value=ee.state.hemi;h.directionalShadowMap.value=ee.state.directionalShadowMap;h.directionalShadowMatrix.value=ee.state.directionalShadowMatrix;h.spotShadowMap.value=ee.state.spotShadowMap;h.spotShadowMatrix.value=ee.state.spotShadowMatrix;h.pointShadowMap.value=ee.state.pointShadowMap;h.pointShadowMatrix.value=ee.state.pointShadowMatrix}var d=n.program.getUniforms(),p=gi.seqWithValue(d.seq,h);n.uniformsList=p}function Oe(e,t,i,n){P=0;var r=Z.get(i);if(F){if(N||e!==T){var a=e===T&&i.id===_;U.setState(i.clippingPlanes,i.clipIntersection,i.clipShadows,e,r,a)}}if(i.needsUpdate===false){if(r.program===undefined){i.needsUpdate=true}else if(i.fog&&r.fog!==t){i.needsUpdate=true}else if(i.lights&&r.lightsHash!==ee.state.hash){i.needsUpdate=true}else if(r.numClippingPlanes!==undefined&&(r.numClippingPlanes!==U.numPlanes||r.numIntersection!==U.numIntersection)){i.needsUpdate=true}}if(i.needsUpdate){Ce(i,t,n);i.needsUpdate=false}var s=false;var o=false;var l=false;var u=r.program,c=u.getUniforms(),h=r.shader.uniforms;if(q.useProgram(u.program)){s=true;o=true;l=true}if(i.id!==_){_=i.id;o=true}if(s||e!==T){c.setValue(V,"projectionMatrix",e.projectionMatrix);if(Y.logarithmicDepthBuffer){c.setValue(V,"logDepthBufFC",2/(Math.log(e.far+1)/Math.LN2))}if(T!==(M||e)){T=M||e;o=true;l=true}if(i.isShaderMaterial||i.isMeshPhongMaterial||i.isMeshStandardMaterial||i.envMap){var f=c.map.cameraPosition;if(f!==undefined){f.setValue(V,z.setFromMatrixPosition(e.matrixWorld))}}if(i.isMeshPhongMaterial||i.isMeshLambertMaterial||i.isMeshBasicMaterial||i.isMeshStandardMaterial||i.isShaderMaterial||i.skinning){c.setValue(V,"viewMatrix",e.matrixWorldInverse)}}if(i.skinning){c.setOptional(V,n,"bindMatrix");c.setOptional(V,n,"bindMatrixInverse");var d=n.skeleton;if(d){var p=d.bones;if(Y.floatVertexTextures){if(d.boneTexture===undefined){var m=Math.sqrt(p.length*4);m=bt.nextPowerOfTwo(Math.ceil(m));m=Math.max(m,4);var g=new Float32Array(m*m*4);g.set(d.boneMatrices);var y=new Lt(g,m,m,Ue,Pe);d.boneMatrices=g;d.boneTexture=y;d.boneTextureSize=m}c.setValue(V,"boneTexture",d.boneTexture);c.setValue(V,"boneTextureSize",d.boneTextureSize)}else{c.setOptional(V,d,"boneMatrices")}}}if(o){c.setValue(V,"toneMappingExposure",v.toneMappingExposure);c.setValue(V,"toneMappingWhitePoint",v.toneMappingWhitePoint);if(i.lights){Ye(h,l)}if(t&&i.fog){Ne(h,t)}if(i.isMeshBasicMaterial){De(h,i)}else if(i.isMeshLambertMaterial){De(h,i);Be(h,i)}else if(i.isMeshPhongMaterial){De(h,i);if(i.isMeshToonMaterial){je(h,i)}else{ze(h,i)}}else if(i.isMeshStandardMaterial){De(h,i);if(i.isMeshPhysicalMaterial){He(h,i)}else{Ge(h,i)}}else if(i.isMeshDepthMaterial){De(h,i);Ve(h,i)}else if(i.isMeshDistanceMaterial){De(h,i);We(h,i)}else if(i.isMeshNormalMaterial){De(h,i);Xe(h,i)}else if(i.isLineBasicMaterial){Ie(h,i);if(i.isLineDashedMaterial){ke(h,i)}}else if(i.isPointsMaterial){Fe(h,i)}else if(i.isShadowMaterial){h.color.value=i.color;h.opacity.value=i.opacity}if(h.ltcMat!==undefined)h.ltcMat.value=xi.LTC_MAT_TEXTURE;if(h.ltcMag!==undefined)h.ltcMag.value=xi.LTC_MAG_TEXTURE;gi.upload(V,r.uniformsList,h,v)}c.setValue(V,"modelViewMatrix",n.modelViewMatrix);c.setValue(V,"normalMatrix",n.normalMatrix);c.setValue(V,"modelMatrix",n.matrixWorld);return u}function De(e,t){e.opacity.value=t.opacity;if(t.color){e.diffuse.value=t.color}if(t.emissive){e.emissive.value.copy(t.emissive).multiplyScalar(t.emissiveIntensity)}if(t.map){e.map.value=t.map}if(t.alphaMap){e.alphaMap.value=t.alphaMap}if(t.specularMap){e.specularMap.value=t.specularMap}if(t.envMap){e.envMap.value=t.envMap;e.flipEnvMap.value=!(t.envMap&&t.envMap.isCubeTexture)?1:-1;e.reflectivity.value=t.reflectivity;e.refractionRatio.value=t.refractionRatio}if(t.lightMap){e.lightMap.value=t.lightMap;e.lightMapIntensity.value=t.lightMapIntensity}if(t.aoMap){e.aoMap.value=t.aoMap;e.aoMapIntensity.value=t.aoMapIntensity}var i;if(t.map){i=t.map}else if(t.specularMap){i=t.specularMap}else if(t.displacementMap){i=t.displacementMap}else if(t.normalMap){i=t.normalMap}else if(t.bumpMap){i=t.bumpMap}else if(t.roughnessMap){i=t.roughnessMap}else if(t.metalnessMap){i=t.metalnessMap}else if(t.alphaMap){i=t.alphaMap}else if(t.emissiveMap){i=t.emissiveMap}if(i!==undefined){if(i.isWebGLRenderTarget){i=i.texture}var n=i.offset;var r=i.repeat;e.offsetRepeat.value.set(n.x,n.y,r.x,r.y)}}function Ie(e,t){e.diffuse.value=t.color;e.opacity.value=t.opacity}function ke(e,t){e.dashSize.value=t.dashSize
;e.totalSize.value=t.dashSize+t.gapSize;e.scale.value=t.scale}function Fe(e,t){e.diffuse.value=t.color;e.opacity.value=t.opacity;e.size.value=t.size*C;e.scale.value=R*.5;e.map.value=t.map;if(t.map!==null){var i=t.map.offset;var n=t.map.repeat;e.offsetRepeat.value.set(i.x,i.y,n.x,n.y)}}function Ne(e,t){e.fogColor.value=t.color;if(t.isFog){e.fogNear.value=t.near;e.fogFar.value=t.far}else if(t.isFogExp2){e.fogDensity.value=t.density}}function Be(e,t){if(t.emissiveMap){e.emissiveMap.value=t.emissiveMap}}function ze(e,t){e.specular.value=t.specular;e.shininess.value=Math.max(t.shininess,1e-4);if(t.emissiveMap){e.emissiveMap.value=t.emissiveMap}if(t.bumpMap){e.bumpMap.value=t.bumpMap;e.bumpScale.value=t.bumpScale}if(t.normalMap){e.normalMap.value=t.normalMap;e.normalScale.value.copy(t.normalScale)}if(t.displacementMap){e.displacementMap.value=t.displacementMap;e.displacementScale.value=t.displacementScale;e.displacementBias.value=t.displacementBias}}function je(e,t){ze(e,t);if(t.gradientMap){e.gradientMap.value=t.gradientMap}}function Ge(e,t){e.roughness.value=t.roughness;e.metalness.value=t.metalness;if(t.roughnessMap){e.roughnessMap.value=t.roughnessMap}if(t.metalnessMap){e.metalnessMap.value=t.metalnessMap}if(t.emissiveMap){e.emissiveMap.value=t.emissiveMap}if(t.bumpMap){e.bumpMap.value=t.bumpMap;e.bumpScale.value=t.bumpScale}if(t.normalMap){e.normalMap.value=t.normalMap;e.normalScale.value.copy(t.normalScale)}if(t.displacementMap){e.displacementMap.value=t.displacementMap;e.displacementScale.value=t.displacementScale;e.displacementBias.value=t.displacementBias}if(t.envMap){e.envMapIntensity.value=t.envMapIntensity}}function He(e,t){e.clearCoat.value=t.clearCoat;e.clearCoatRoughness.value=t.clearCoatRoughness;Ge(e,t)}function Ve(e,t){if(t.displacementMap){e.displacementMap.value=t.displacementMap;e.displacementScale.value=t.displacementScale;e.displacementBias.value=t.displacementBias}}function We(e,t){if(t.displacementMap){e.displacementMap.value=t.displacementMap;e.displacementScale.value=t.displacementScale;e.displacementBias.value=t.displacementBias}e.referencePosition.value.copy(t.referencePosition);e.nearDistance.value=t.nearDistance;e.farDistance.value=t.farDistance}function Xe(e,t){if(t.bumpMap){e.bumpMap.value=t.bumpMap;e.bumpScale.value=t.bumpScale}if(t.normalMap){e.normalMap.value=t.normalMap;e.normalScale.value.copy(t.normalScale)}if(t.displacementMap){e.displacementMap.value=t.displacementMap;e.displacementScale.value=t.displacementScale;e.displacementBias.value=t.displacementBias}}function Ye(e,t){e.ambientLightColor.needsUpdate=t;e.directionalLights.needsUpdate=t;e.pointLights.needsUpdate=t;e.spotLights.needsUpdate=t;e.rectAreaLights.needsUpdate=t;e.hemisphereLights.needsUpdate=t}this.setFaceCulling=function(e,t){q.setCullFace(e);q.setFlipSided(t===l)};function qe(){var e=P;if(e>=Y.maxTextures){console.warn("THREE.WebGLRenderer: Trying to use "+e+" texture units while this GPU supports only "+Y.maxTextures)}P+=1;return e}this.allocTextureUnit=qe;this.setTexture2D=function(){var e=false;return function t(i,n){if(i&&i.isWebGLRenderTarget){if(!e){console.warn("THREE.WebGLRenderer.setTexture2D: don't use render targets as textures. Use their .texture property instead.");e=true}i=i.texture}J.setTexture2D(i,n)}}();this.setTexture=function(){var e=false;return function t(i,n){if(!e){console.warn("THREE.WebGLRenderer: .setTexture is deprecated, use setTexture2D instead.");e=true}J.setTexture2D(i,n)}}();this.setTextureCube=function(){var e=false;return function t(i,n){if(i&&i.isWebGLRenderTargetCube){if(!e){console.warn("THREE.WebGLRenderer.setTextureCube: don't use cube render targets as textures. Use their .texture property instead.");e=true}i=i.texture}if(i&&i.isCubeTexture||Array.isArray(i.image)&&i.image.length===6){J.setTextureCube(i,n)}else{J.setTextureCubeDynamic(i,n)}}}();this.getRenderTarget=function(){return b};this.setRenderTarget=function(e){b=e;if(e&&Z.get(e).__webglFramebuffer===undefined){J.setupRenderTarget(e)}var t=null;var i=false;if(e){var n=Z.get(e).__webglFramebuffer;if(e.isWebGLRenderTargetCube){t=n[e.activeCubeFace];i=true}else{t=n}S.copy(e.viewport);E.copy(e.scissor);A=e.scissorTest}else{S.copy(O).multiplyScalar(C);E.copy(D).multiplyScalar(C);A=I}if(x!==t){V.bindFramebuffer(V.FRAMEBUFFER,t);x=t}q.viewport(S);q.scissor(E);q.setScissorTest(A);if(i){var r=Z.get(e.texture);V.framebufferTexture2D(V.FRAMEBUFFER,V.COLOR_ATTACHMENT0,V.TEXTURE_CUBE_MAP_POSITIVE_X+e.activeCubeFace,r.__webglTexture,e.activeMipMapLevel)}};this.readRenderTargetPixels=function(e,t,i,n,r,a){if(!(e&&e.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}var s=Z.get(e).__webglFramebuffer;if(s){var o=false;if(s!==x){V.bindFramebuffer(V.FRAMEBUFFER,s);o=true}try{var l=e.texture;var u=l.format;var c=l.type;if(u!==Ue&&ce.convert(u)!==V.getParameter(V.IMPLEMENTATION_COLOR_READ_FORMAT)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(c!==we&&ce.convert(c)!==V.getParameter(V.IMPLEMENTATION_COLOR_READ_TYPE)&&!(c===Pe&&(X.get("OES_texture_float")||X.get("WEBGL_color_buffer_float")))&&!(c===Le&&X.get("EXT_color_buffer_half_float"))){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}if(V.checkFramebufferStatus(V.FRAMEBUFFER)===V.FRAMEBUFFER_COMPLETE){if(t>=0&&t<=e.width-n&&(i>=0&&i<=e.height-r)){V.readPixels(t,i,n,r,ce.convert(u),ce.convert(c),a)}}else{console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.")}}finally{if(o){V.bindFramebuffer(V.FRAMEBUFFER,x)}}}}}function ss(e,t){this.name="";this.color=new bi(e);this.density=t!==undefined?t:25e-5}ss.prototype.isFogExp2=true;ss.prototype.clone=function(){return new ss(this.color.getHex(),this.density)};ss.prototype.toJSON=function(e){return{type:"FogExp2",color:this.color.getHex(),density:this.density}};function os(e,t,i){this.name="";this.color=new bi(e);this.near=t!==undefined?t:1;this.far=i!==undefined?i:1e3}os.prototype.isFog=true;os.prototype.clone=function(){return new os(this.color.getHex(),this.near,this.far)};os.prototype.toJSON=function(e){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}};function ls(){Wr.call(this);this.type="Scene";this.background=null;this.fog=null;this.overrideMaterial=null;this.autoUpdate=true}ls.prototype=Object.assign(Object.create(Wr.prototype),{constructor:ls,copy:function(e,t){Wr.prototype.copy.call(this,e,t);if(e.background!==null)this.background=e.background.clone();if(e.fog!==null)this.fog=e.fog.clone();if(e.overrideMaterial!==null)this.overrideMaterial=e.overrideMaterial.clone();this.autoUpdate=e.autoUpdate;this.matrixAutoUpdate=e.matrixAutoUpdate;return this},toJSON:function(e){var t=Wr.prototype.toJSON.call(this,e);if(this.background!==null)t.object.background=this.background.toJSON(e);if(this.fog!==null)t.object.fog=this.fog.toJSON();return t}});function us(e,t,i,n,r){Wr.call(this);this.lensFlares=[];this.positionScreen=new At;this.customUpdateCallback=undefined;if(e!==undefined){this.add(e,t,i,n,r)}}us.prototype=Object.assign(Object.create(Wr.prototype),{constructor:us,isLensFlare:true,copy:function(e){Wr.prototype.copy.call(this,e);this.positionScreen.copy(e.positionScreen);this.customUpdateCallback=e.customUpdateCallback;for(var t=0,i=e.lensFlares.length;t<i;t++){this.lensFlares.push(e.lensFlares[t])}return this},add:function(e,t,i,n,r,a){if(t===undefined)t=-1;if(i===undefined)i=0;if(a===undefined)a=1;if(r===undefined)r=new bi(16777215);if(n===undefined)n=w;i=Math.min(i,Math.max(0,i));this.lensFlares.push({texture:e,size:t,distance:i,x:0,y:0,z:0,scale:1,rotation:0,opacity:a,color:r,blending:n})},updateLensFlares:function(){var e,t=this.lensFlares.length;var i;var n=-this.positionScreen.x*2;var r=-this.positionScreen.y*2;for(e=0;e<t;e++){i=this.lensFlares[e];i.x=this.positionScreen.x+n*i.distance;i.y=this.positionScreen.y+r*i.distance;i.wantedRotation=i.x*Math.PI*.25;i.rotation+=(i.wantedRotation-i.rotation)*.25}}});function cs(e){Cr.call(this);this.type="SpriteMaterial";this.color=new bi(16777215);this.map=null;this.rotation=0;this.fog=false;this.lights=false;this.setValues(e)}cs.prototype=Object.create(Cr.prototype);cs.prototype.constructor=cs;cs.prototype.isSpriteMaterial=true;cs.prototype.copy=function(e){Cr.prototype.copy.call(this,e);this.color.copy(e.color);this.map=e.map;this.rotation=e.rotation;return this};function hs(e){Wr.call(this);this.type="Sprite";this.material=e!==undefined?e:new cs}hs.prototype=Object.assign(Object.create(Wr.prototype),{constructor:hs,isSprite:true,raycast:function(){var e=new At;var t=new At;var i=new At;return function n(r,a){t.setFromMatrixPosition(this.matrixWorld);r.ray.closestPointToPoint(t,e);i.setFromMatrixScale(this.matrixWorld);var s=i.x*i.y/4;if(t.distanceToSquared(e)>s)return;var o=r.ray.origin.distanceTo(e);if(o<r.near||o>r.far)return;a.push({distance:o,point:e.clone(),face:null,object:this})}}(),clone:function(){return new this.constructor(this.material).copy(this)}});function fs(){Wr.call(this);this.type="LOD";Object.defineProperties(this,{levels:{enumerable:true,value:[]}})}fs.prototype=Object.assign(Object.create(Wr.prototype),{constructor:fs,copy:function(e){Wr.prototype.copy.call(this,e,false);var t=e.levels;for(var i=0,n=t.length;i<n;i++){var r=t[i];this.addLevel(r.object.clone(),r.distance)}return this},addLevel:function(e,t){if(t===undefined)t=0;t=Math.abs(t);var i=this.levels;for(var n=0;n<i.length;n++){if(t<i[n].distance){break}}i.splice(n,0,{distance:t,object:e});this.add(e)},getObjectForDistance:function(e){var t=this.levels;for(var i=1,n=t.length;i<n;i++){if(e<t[i].distance){break}}return t[i-1].object},raycast:function(){var e=new At;return function t(i,n){e.setFromMatrixPosition(this.matrixWorld);var r=i.ray.origin.distanceTo(e);this.getObjectForDistance(r).raycast(i,n)}}(),update:function(){var e=new At;var t=new At;return function i(n){var r=this.levels;if(r.length>1){e.setFromMatrixPosition(n.matrixWorld);t.setFromMatrixPosition(this.matrixWorld);var a=e.distanceTo(t);r[0].object.visible=true;for(var s=1,o=r.length;s<o;s++){if(a>=r[s].distance){r[s-1].object.visible=false;r[s].object.visible=true}else{break}}for(;s<o;s++){r[s].object.visible=false}}}}(),toJSON:function(e){var t=Wr.prototype.toJSON.call(this,e);t.object.levels=[];var i=this.levels;for(var n=0,r=i.length;n<r;n++){var a=i[n];t.object.levels.push({object:a.object.uuid,distance:a.distance})}return t}});function ds(e,t){e=e||[];this.bones=e.slice(0);this.boneMatrices=new Float32Array(this.bones.length*16);if(t===undefined){this.calculateInverses()}else{if(this.bones.length===t.length){this.boneInverses=t.slice(0)}else{console.warn("THREE.Skeleton boneInverses is the wrong length.");this.boneInverses=[];for(var i=0,n=this.bones.length;i<n;i++){this.boneInverses.push(new Pt)}}}}Object.assign(ds.prototype,{calculateInverses:function(){this.boneInverses=[];for(var e=0,t=this.bones.length;e<t;e++){var i=new Pt;if(this.bones[e]){i.getInverse(this.bones[e].matrixWorld)}this.boneInverses.push(i)}},pose:function(){var e,t,i;for(t=0,i=this.bones.length;t<i;t++){e=this.bones[t];if(e){e.matrixWorld.getInverse(this.boneInverses[t])}}for(t=0,i=this.bones.length;t<i;t++){e=this.bones[t];if(e){if(e.parent&&e.parent.isBone){e.matrix.getInverse(e.parent.matrixWorld);e.matrix.multiply(e.matrixWorld)}else{e.matrix.copy(e.matrixWorld)}e.matrix.decompose(e.position,e.quaternion,e.scale)}}},update:function(){var e=new Pt;var t=new Pt;return function i(){var n=this.bones;var r=this.boneInverses;var a=this.boneMatrices;var s=this.boneTexture;for(var o=0,l=n.length;o<l;o++){var u=n[o]?n[o].matrixWorld:t;e.multiplyMatrices(u,r[o]);e.toArray(a,o*16)}if(s!==undefined){s.needsUpdate=true}}}(),clone:function(){return new ds(this.bones,this.boneInverses)}});function ps(){Wr.call(this);this.type="Bone"}ps.prototype=Object.assign(Object.create(Wr.prototype),{constructor:ps,isBone:true});function ms(e,t){xa.call(this,e,t);this.type="SkinnedMesh";this.bindMode="attached";this.bindMatrix=new Pt;this.bindMatrixInverse=new Pt;var i=this.initBones();var n=new ds(i);this.bind(n,this.matrixWorld);this.normalizeSkinWeights()}ms.prototype=Object.assign(Object.create(xa.prototype),{constructor:ms,isSkinnedMesh:true,initBones:function(){var e=[],t,i;var n,r;if(this.geometry&&this.geometry.bones!==undefined){for(n=0,r=this.geometry.bones.length;n<r;n++){i=this.geometry.bones[n];t=new ps;e.push(t);t.name=i.name;t.position.fromArray(i.pos);t.quaternion.fromArray(i.rotq);if(i.scl!==undefined)t.scale.fromArray(i.scl)}for(n=0,r=this.geometry.bones.length;n<r;n++){i=this.geometry.bones[n];if(i.parent!==-1&&i.parent!==null&&e[i.parent]!==undefined){e[i.parent].add(e[n])}else{this.add(e[n])}}}this.updateMatrixWorld(true);return e},bind:function(e,t){this.skeleton=e;if(t===undefined){this.updateMatrixWorld(true);this.skeleton.calculateInverses();t=this.matrixWorld}this.bindMatrix.copy(t);this.bindMatrixInverse.getInverse(t)},pose:function(){this.skeleton.pose()},normalizeSkinWeights:function(){var e,t;if(this.geometry&&this.geometry.isGeometry){for(t=0;t<this.geometry.skinWeights.length;t++){var i=this.geometry.skinWeights[t];e=1/i.lengthManhattan();if(e!==Infinity){i.multiplyScalar(e)}else{i.set(1,0,0,0)}}}else if(this.geometry&&this.geometry.isBufferGeometry){var n=new Tt;var r=this.geometry.attributes.skinWeight;for(t=0;t<r.count;t++){n.x=r.getX(t);n.y=r.getY(t);n.z=r.getZ(t);n.w=r.getW(t);e=1/n.lengthManhattan();if(e!==Infinity){n.multiplyScalar(e)}else{n.set(1,0,0,0)}r.setXYZW(t,n.x,n.y,n.z,n.w)}}},updateMatrixWorld:function(e){xa.prototype.updateMatrixWorld.call(this,e);if(this.bindMode==="attached"){this.bindMatrixInverse.getInverse(this.matrixWorld)}else if(this.bindMode==="detached"){this.bindMatrixInverse.getInverse(this.bindMatrix)}else{console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}});function vs(e){Cr.call(this);this.type="LineBasicMaterial";this.color=new bi(16777215);this.linewidth=1;this.linecap="round";this.linejoin="round";this.lights=false;this.setValues(e)}vs.prototype=Object.create(Cr.prototype);vs.prototype.constructor=vs;vs.prototype.isLineBasicMaterial=true;vs.prototype.copy=function(e){Cr.prototype.copy.call(this,e);this.color.copy(e.color);this.linewidth=e.linewidth;this.linecap=e.linecap;this.linejoin=e.linejoin;return this};function gs(e,t,i){if(i===1){console.warn("THREE.Line: parameter THREE.LinePieces no longer supported. Created THREE.LineSegments instead.");return new ys(e,t)}Wr.call(this);this.type="Line";this.geometry=e!==undefined?e:new ha;this.material=t!==undefined?t:new vs({color:Math.random()*16777215})}gs.prototype=Object.assign(Object.create(Wr.prototype),{constructor:gs,isLine:true,raycast:function(){var e=new Pt;var t=new ga;var i=new Ur;return function n(r,a){var s=r.linePrecision;var o=s*s;var l=this.geometry;var u=this.matrixWorld;if(l.boundingSphere===null)l.computeBoundingSphere();i.copy(l.boundingSphere);i.applyMatrix4(u);if(r.ray.intersectsSphere(i)===false)return;e.getInverse(u);t.copy(r.ray).applyMatrix4(e);var c=new At;var h=new At;var f=new At;var d=new At;var p=this&&this.isLineSegments?2:1;if(l.isBufferGeometry){var m=l.index;var v=l.attributes;var g=v.position.array;if(m!==null){var y=m.array;for(var b=0,x=y.length-1;b<x;b+=p){var _=y[b];var w=y[b+1];c.fromArray(g,_*3);h.fromArray(g,w*3);var T=t.distanceSqToSegment(c,h,d,f);if(T>o)continue;d.applyMatrix4(this.matrixWorld);var M=r.ray.origin.distanceTo(d);if(M<r.near||M>r.far)continue;a.push({distance:M,point:f.clone().applyMatrix4(this.matrixWorld),index:b,face:null,faceIndex:null,object:this})}}else{for(var b=0,x=g.length/3-1;b<x;b+=p){c.fromArray(g,3*b);h.fromArray(g,3*b+3);var T=t.distanceSqToSegment(c,h,d,f);if(T>o)continue;d.applyMatrix4(this.matrixWorld);var M=r.ray.origin.distanceTo(d);if(M<r.near||M>r.far)continue;a.push({distance:M,point:f.clone().applyMatrix4(this.matrixWorld),index:b,face:null,faceIndex:null,object:this})}}}else if(l.isGeometry){var S=l.vertices;var E=S.length;for(var b=0;b<E-1;b+=p){var T=t.distanceSqToSegment(S[b],S[b+1],d,f);if(T>o)continue;d.applyMatrix4(this.matrixWorld);var M=r.ray.origin.distanceTo(d);if(M<r.near||M>r.far)continue;a.push({distance:M,point:f.clone().applyMatrix4(this.matrixWorld),index:b,face:null,faceIndex:null,object:this})}}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}});function ys(e,t){gs.call(this,e,t);this.type="LineSegments"}ys.prototype=Object.assign(Object.create(gs.prototype),{constructor:ys,isLineSegments:true});function bs(e,t){gs.call(this,e,t);this.type="LineLoop"}bs.prototype=Object.assign(Object.create(gs.prototype),{constructor:bs,isLineLoop:true});function xs(e){Cr.call(this);this.type="PointsMaterial";this.color=new bi(16777215);this.map=null;this.size=1;this.sizeAttenuation=true;this.lights=false;this.setValues(e)}xs.prototype=Object.create(Cr.prototype);xs.prototype.constructor=xs;xs.prototype.isPointsMaterial=true;xs.prototype.copy=function(e){Cr.prototype.copy.call(this,e);this.color.copy(e.color);this.map=e.map;this.size=e.size;this.sizeAttenuation=e.sizeAttenuation;return this};function _s(e,t){Wr.call(this);this.type="Points";this.geometry=e!==undefined?e:new ha;this.material=t!==undefined?t:new xs({color:Math.random()*16777215})}_s.prototype=Object.assign(Object.create(Wr.prototype),{constructor:_s,isPoints:true,raycast:function(){var e=new Pt;var t=new ga;var i=new Ur;return function n(r,a){var s=this;var o=this.geometry;var l=this.matrixWorld;var u=r.params.Points.threshold;if(o.boundingSphere===null)o.computeBoundingSphere();i.copy(o.boundingSphere);i.applyMatrix4(l);i.radius+=u;if(r.ray.intersectsSphere(i)===false)return;e.getInverse(l);t.copy(r.ray).applyMatrix4(e);var c=u/((this.scale.x+this.scale.y+this.scale.z)/3);var h=c*c;var f=new At;function d(e,i){var n=t.distanceSqToPoint(e);if(n<h){var o=t.closestPointToPoint(e);o.applyMatrix4(l);var u=r.ray.origin.distanceTo(o);if(u<r.near||u>r.far)return;a.push({distance:u,distanceToRay:Math.sqrt(n),point:o.clone(),index:i,face:null,object:s})}}if(o.isBufferGeometry){var p=o.index;var m=o.attributes;var v=m.position.array;if(p!==null){var g=p.array;for(var y=0,b=g.length;y<b;y++){var x=g[y];f.fromArray(v,x*3);d(f,x)}}else{for(var y=0,_=v.length/3;y<_;y++){f.fromArray(v,y*3);d(f,y)}}}else{var w=o.vertices;for(var y=0,_=w.length;y<_;y++){d(w[y],y)}}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}});function ws(){Wr.call(this);this.type="Group"}ws.prototype=Object.assign(Object.create(Wr.prototype),{constructor:ws});function Ts(e,t,i,n,r,a,s,o,l){wt.call(this,e,t,i,n,r,a,s,o,l);this.generateMipmaps=false;var u=this;function c(){requestAnimationFrame(c);if(e.readyState>=e.HAVE_CURRENT_DATA){u.needsUpdate=true}}c()}Ts.prototype=Object.create(wt.prototype);Ts.prototype.constructor=Ts;function Ms(e,t,i,n,r,a,s,o,l,u,c,h){wt.call(this,null,a,s,o,l,u,n,r,c,h);this.image={width:t,height:i};this.mipmaps=e;this.flipY=false;this.generateMipmaps=false}Ms.prototype=Object.create(wt.prototype);Ms.prototype.constructor=Ms;Ms.prototype.isCompressedTexture=true;function Ss(e,t,i,n,r,a,s,o,l,u){u=u!==undefined?u:ze;if(u!==ze&&u!==je){throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat")}if(i===undefined&&u===ze)i=Se;if(i===undefined&&u===je)i=De;wt.call(this,null,n,r,a,s,o,u,i,l);this.image={width:e,height:t};this.magFilter=s!==undefined?s:ve;this.minFilter=o!==undefined?o:ve;this.flipY=false;this.generateMipmaps=false}Ss.prototype=Object.create(wt.prototype);Ss.prototype.constructor=Ss;Ss.prototype.isDepthTexture=true;function Es(e){ha.call(this);this.type="WireframeGeometry";var t=[];var i,n,r,a,s;var o=[0,0],l={},u,c,h;var f,d=["a","b","c"];var p;if(e&&e.isGeometry){var m=e.faces;for(i=0,r=m.length;i<r;i++){var v=m[i];for(n=0;n<3;n++){c=v[d[n]];h=v[d[(n+1)%3]];o[0]=Math.min(c,h);o[1]=Math.max(c,h);f=o[0]+","+o[1];if(l[f]===undefined){l[f]={index1:o[0],index2:o[1]}}}}for(f in l){u=l[f];p=e.vertices[u.index1];t.push(p.x,p.y,p.z);p=e.vertices[u.index2];t.push(p.x,p.y,p.z)}}else if(e&&e.isBufferGeometry){var g,y,b;var x,_,w;var T,M;p=new At;if(e.index!==null){g=e.attributes.position;y=e.index;b=e.groups;if(b.length===0){b=[{start:0,count:y.count,materialIndex:0}]}for(a=0,s=b.length;a<s;++a){x=b[a];_=x.start;w=x.count;for(i=_,r=_+w;i<r;i+=3){for(n=0;n<3;n++){c=y.getX(i+n);h=y.getX(i+(n+1)%3);o[0]=Math.min(c,h);o[1]=Math.max(c,h);f=o[0]+","+o[1];if(l[f]===undefined){l[f]={index1:o[0],index2:o[1]}}}}}for(f in l){u=l[f];p.fromBufferAttribute(g,u.index1);t.push(p.x,p.y,p.z);p.fromBufferAttribute(g,u.index2);t.push(p.x,p.y,p.z)}}else{g=e.attributes.position;for(i=0,r=g.count/3;i<r;i++){for(n=0;n<3;n++){T=3*i+n;p.fromBufferAttribute(g,T);t.push(p.x,p.y,p.z);M=3*i+(n+1)%3;p.fromBufferAttribute(g,M);t.push(p.x,p.y,p.z)}}}}this.addAttribute("position",new oa(t,3))}Es.prototype=Object.create(ha.prototype);Es.prototype.constructor=Es;function As(e,t,i){Qr.call(this);this.type="ParametricGeometry";this.parameters={func:e,slices:t,stacks:i};this.fromBufferGeometry(new Ps(e,t,i));this.mergeVertices()}As.prototype=Object.create(Qr.prototype);As.prototype.constructor=As;function Ps(e,t,i){ha.call(this);this.type="ParametricBufferGeometry";this.parameters={func:e,slices:t,stacks:i};var n=[];var r=[];var a=[];var s=[];var o=1e-5;var l=new At;var u=new At,c=new At;var h=new At,f=new At;var d,p;var m=t+1;for(d=0;d<=i;d++){var v=d/i;for(p=0;p<=t;p++){var g=p/t;u=e(g,v,u);r.push(u.x,u.y,u.z);if(g-o>=0){c=e(g-o,v,c);h.subVectors(u,c)}else{c=e(g+o,v,c);h.subVectors(c,u)}if(v-o>=0){c=e(g,v-o,c);f.subVectors(u,c)}else{c=e(g,v+o,c);f.subVectors(c,u)}l.crossVectors(h,f).normalize();a.push(l.x,l.y,l.z);s.push(g,v)}}for(d=0;d<i;d++){for(p=0;p<t;p++){var y=d*m+p;var b=d*m+p+1;var x=(d+1)*m+p+1;var _=(d+1)*m+p;n.push(y,b,_);n.push(b,x,_)}}this.setIndex(n);this.addAttribute("position",new oa(r,3));this.addAttribute("normal",new oa(a,3));this.addAttribute("uv",new oa(s,2))}Ps.prototype=Object.create(ha.prototype);Ps.prototype.constructor=Ps;function Ls(e,t,i,n){Qr.call(this);this.type="PolyhedronGeometry";this.parameters={vertices:e,indices:t,radius:i,detail:n};this.fromBufferGeometry(new Rs(e,t,i,n));this.mergeVertices()}Ls.prototype=Object.create(Qr.prototype);Ls.prototype.constructor=Ls;function Rs(e,t,i,n){ha.call(this);this.type="PolyhedronBufferGeometry";this.parameters={vertices:e,indices:t,radius:i,detail:n};i=i||1;n=n||0;var r=[];var a=[];s(n);l(i);u();this.addAttribute("position",new oa(r,3));this.addAttribute("normal",new oa(r.slice(),3));this.addAttribute("uv",new oa(a,2));if(n===0){this.computeVertexNormals()}else{this.normalizeNormals()}function s(e){var i=new At;var n=new At;var r=new At;for(var a=0;a<t.length;a+=3){f(t[a+0],i);f(t[a+1],n);f(t[a+2],r);o(i,n,r,e)}}function o(e,t,i,n){var r=Math.pow(2,n);var a=[];var s,o;for(s=0;s<=r;s++){a[s]=[];var l=e.clone().lerp(i,s/r);var u=t.clone().lerp(i,s/r);var c=r-s;for(o=0;o<=c;o++){if(o===0&&s===r){a[s][o]=l}else{a[s][o]=l.clone().lerp(u,o/c)}}}for(s=0;s<r;s++){for(o=0;o<2*(r-s)-1;o++){var f=Math.floor(o/2);if(o%2===0){h(a[s][f+1]);h(a[s+1][f]);h(a[s][f])}else{h(a[s][f+1]);h(a[s+1][f+1]);h(a[s+1][f])}}}}function l(e){var t=new At;for(var i=0;i<r.length;i+=3){t.x=r[i+0];t.y=r[i+1];t.z=r[i+2];t.normalize().multiplyScalar(e);r[i+0]=t.x;r[i+1]=t.y;r[i+2]=t.z}}function u(){var e=new At;for(var t=0;t<r.length;t+=3){e.x=r[t+0];e.y=r[t+1];e.z=r[t+2];var i=m(e)/2/Math.PI+.5;var n=v(e)/Math.PI+.5;a.push(i,1-n)}d();c()}function c(){for(var e=0;e<a.length;e+=6){var t=a[e+0];var i=a[e+2];var n=a[e+4];var r=Math.max(t,i,n);var s=Math.min(t,i,n);if(r>.9&&s<.1){if(t<.2)a[e+0]+=1;if(i<.2)a[e+2]+=1;if(n<.2)a[e+4]+=1}}}function h(e){r.push(e.x,e.y,e.z)}function f(t,i){var n=t*3;i.x=e[n+0];i.y=e[n+1];i.z=e[n+2]}function d(){var e=new At;var t=new At;var i=new At;var n=new At;var s=new xt;var o=new xt;var l=new xt;for(var u=0,c=0;u<r.length;u+=9,c+=6){e.set(r[u+0],r[u+1],r[u+2]);t.set(r[u+3],r[u+4],r[u+5]);i.set(r[u+6],r[u+7],r[u+8]);s.set(a[c+0],a[c+1]);o.set(a[c+2],a[c+3]);l.set(a[c+4],a[c+5]);n.copy(e).add(t).add(i).divideScalar(3);var h=m(n);p(s,c+0,e,h);p(o,c+2,t,h);p(l,c+4,i,h)}}function p(e,t,i,n){if(n<0&&e.x===1){a[t]=e.x-1}if(i.x===0&&i.z===0){a[t]=n/2/Math.PI+.5}}function m(e){return Math.atan2(e.z,-e.x)}function v(e){return Math.atan2(-e.y,Math.sqrt(e.x*e.x+e.z*e.z))}}Rs.prototype=Object.create(ha.prototype);Rs.prototype.constructor=Rs;function Cs(e,t){Qr.call(this);this.type="TetrahedronGeometry";this.parameters={radius:e,detail:t};this.fromBufferGeometry(new Os(e,t));this.mergeVertices()}Cs.prototype=Object.create(Qr.prototype);Cs.prototype.constructor=Cs;function Os(e,t){var i=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1];var n=[2,1,0,0,3,2,1,3,0,2,3,1];Rs.call(this,i,n,e,t);this.type="TetrahedronBufferGeometry";this.parameters={radius:e,detail:t}}Os.prototype=Object.create(Rs.prototype);Os.prototype.constructor=Os;function Ds(e,t){Qr.call(this);this.type="OctahedronGeometry";this.parameters={radius:e,detail:t};this.fromBufferGeometry(new Is(e,t));this.mergeVertices()}Ds.prototype=Object.create(Qr.prototype);Ds.prototype.constructor=Ds;function Is(e,t){var i=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1];var n=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];Rs.call(this,i,n,e,t);this.type="OctahedronBufferGeometry";this.parameters={radius:e,detail:t}}Is.prototype=Object.create(Rs.prototype);Is.prototype.constructor=Is;function ks(e,t){Qr.call(this);this.type="IcosahedronGeometry";this.parameters={radius:e,detail:t};this.fromBufferGeometry(new Us(e,t));this.mergeVertices()}ks.prototype=Object.create(Qr.prototype);ks.prototype.constructor=ks;function Us(e,t){var i=(1+Math.sqrt(5))/2;var n=[-1,i,0,1,i,0,-1,-i,0,1,-i,0,0,-1,i,0,1,i,0,-1,-i,0,1,-i,i,0,-1,i,0,1,-i,0,-1,-i,0,1];var r=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];Rs.call(this,n,r,e,t);this.type="IcosahedronBufferGeometry";this.parameters={radius:e,detail:t}}Us.prototype=Object.create(Rs.prototype);Us.prototype.constructor=Us;function Fs(e,t){Qr.call(this);this.type="DodecahedronGeometry";this.parameters={radius:e,detail:t};this.fromBufferGeometry(new Ns(e,t));this.mergeVertices()}Fs.prototype=Object.create(Qr.prototype);Fs.prototype.constructor=Fs;function Ns(e,t){var i=(1+Math.sqrt(5))/2;var n=1/i;var r=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-n,-i,0,-n,i,0,n,-i,0,n,i,-n,-i,0,-n,i,0,n,-i,0,n,i,0,-i,0,-n,i,0,-n,-i,0,n,i,0,n];var a=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];Rs.call(this,r,a,e,t);this.type="DodecahedronBufferGeometry";this.parameters={radius:e,detail:t}}Ns.prototype=Object.create(Rs.prototype);Ns.prototype.constructor=Ns;function Bs(e,t,i,n,r,a){Qr.call(this);this.type="TubeGeometry";this.parameters={path:e,tubularSegments:t,radius:i,radialSegments:n,closed:r};if(a!==undefined)console.warn("THREE.TubeGeometry: taper has been removed.");var s=new zs(e,t,i,n,r);this.tangents=s.tangents;this.normals=s.normals;this.binormals=s.binormals;this.fromBufferGeometry(s);this.mergeVertices()}Bs.prototype=Object.create(Qr.prototype);Bs.prototype.constructor=Bs;function zs(e,t,i,n,r){ha.call(this);this.type="TubeBufferGeometry";this.parameters={path:e,tubularSegments:t,radius:i,radialSegments:n,closed:r};t=t||64;i=i||1;n=n||8;r=r||false;var a=e.computeFrenetFrames(t,r);this.tangents=a.tangents;this.normals=a.normals;this.binormals=a.binormals;var s=new At;var o=new At;var l=new xt;var u,c;var h=[];var f=[];var d=[];var p=[];m();this.setIndex(p);this.addAttribute("position",new oa(h,3));this.addAttribute("normal",new oa(f,3));this.addAttribute("uv",new oa(d,2));function m(){for(u=0;u<t;u++){v(u)}v(r===false?t:0);y();g()}function v(r){var l=e.getPointAt(r/t);var u=a.normals[r];var d=a.binormals[r];for(c=0;c<=n;c++){var p=c/n*Math.PI*2;var m=Math.sin(p);var v=-Math.cos(p);o.x=v*u.x+m*d.x;o.y=v*u.y+m*d.y;o.z=v*u.z+m*d.z;o.normalize();f.push(o.x,o.y,o.z);s.x=l.x+i*o.x;s.y=l.y+i*o.y;s.z=l.z+i*o.z;h.push(s.x,s.y,s.z)}}function g(){for(c=1;c<=t;c++){for(u=1;u<=n;u++){var e=(n+1)*(c-1)+(u-1);var i=(n+1)*c+(u-1);var r=(n+1)*c+u;var a=(n+1)*(c-1)+u;p.push(e,i,a);p.push(i,r,a)}}}function y(){for(u=0;u<=t;u++){for(c=0;c<=n;c++){l.x=u/t;l.y=c/n;d.push(l.x,l.y)}}}}zs.prototype=Object.create(ha.prototype);zs.prototype.constructor=zs;function js(e,t,i,n,r,a,s){Qr.call(this);this.type="TorusKnotGeometry";this.parameters={radius:e,tube:t,tubularSegments:i,radialSegments:n,p:r,q:a};if(s!==undefined)console.warn("THREE.TorusKnotGeometry: heightScale has been deprecated. Use .scale( x, y, z ) instead.");this.fromBufferGeometry(new Gs(e,t,i,n,r,a));this.mergeVertices()}js.prototype=Object.create(Qr.prototype);js.prototype.constructor=js;function Gs(e,t,i,n,r,a){ha.call(this);this.type="TorusKnotBufferGeometry";this.parameters={radius:e,tube:t,tubularSegments:i,radialSegments:n,p:r,q:a};e=e||100;t=t||40;i=Math.floor(i)||64;n=Math.floor(n)||8;r=r||2;a=a||3;var s=[];var o=[];var l=[];var u=[];var c,h;var f=new At;var d=new At;var p=new At;var m=new At;var v=new At;var g=new At;var y=new At;for(c=0;c<=i;++c){var b=c/i*r*Math.PI*2;A(b,r,a,e,p);A(b+.01,r,a,e,m);g.subVectors(m,p);y.addVectors(m,p);v.crossVectors(g,y);y.crossVectors(v,g);v.normalize();y.normalize();for(h=0;h<=n;++h){var x=h/n*Math.PI*2;var _=-t*Math.cos(x);var w=t*Math.sin(x);f.x=p.x+(_*y.x+w*v.x);f.y=p.y+(_*y.y+w*v.y);f.z=p.z+(_*y.z+w*v.z);o.push(f.x,f.y,f.z);d.subVectors(f,p).normalize();l.push(d.x,d.y,d.z);u.push(c/i);u.push(h/n)}}for(h=1;h<=i;h++){for(c=1;c<=n;c++){var T=(n+1)*(h-1)+(c-1);var M=(n+1)*h+(c-1);var S=(n+1)*h+c;var E=(n+1)*(h-1)+c;s.push(T,M,E);s.push(M,S,E)}}this.setIndex(s);this.addAttribute("position",new oa(o,3));this.addAttribute("normal",new oa(l,3));this.addAttribute("uv",new oa(u,2));function A(e,t,i,n,r){var a=Math.cos(e);var s=Math.sin(e);var o=i/t*e;var l=Math.cos(o);r.x=n*(2+l)*.5*a;r.y=n*(2+l)*s*.5;r.z=n*Math.sin(o)*.5}}Gs.prototype=Object.create(ha.prototype);Gs.prototype.constructor=Gs;function Hs(e,t,i,n,r){Qr.call(this);this.type="TorusGeometry";this.parameters={radius:e,tube:t,radialSegments:i,tubularSegments:n,arc:r};this.fromBufferGeometry(new Vs(e,t,i,n,r));this.mergeVertices()}Hs.prototype=Object.create(Qr.prototype);Hs.prototype.constructor=Hs;function Vs(e,t,i,n,r){ha.call(this);this.type="TorusBufferGeometry";this.parameters={radius:e,tube:t,radialSegments:i,tubularSegments:n,arc:r};e=e||100;t=t||40;i=Math.floor(i)||8;n=Math.floor(n)||6;r=r||Math.PI*2;var a=[];var s=[];var o=[];var l=[];var u=new At;var c=new At;var h=new At;var f,d;for(f=0;f<=i;f++){for(d=0;d<=n;d++){var p=d/n*r;var m=f/i*Math.PI*2;c.x=(e+t*Math.cos(m))*Math.cos(p);c.y=(e+t*Math.cos(m))*Math.sin(p);c.z=t*Math.sin(m);s.push(c.x,c.y,c.z);u.x=e*Math.cos(p);u.y=e*Math.sin(p);h.subVectors(c,u).normalize();o.push(h.x,h.y,h.z);l.push(d/n);l.push(f/i)}}for(f=1;f<=i;f++){for(d=1;d<=n;d++){var v=(n+1)*f+d-1;var g=(n+1)*(f-1)+d-1;var y=(n+1)*(f-1)+d;var b=(n+1)*f+d;a.push(v,g,b);a.push(g,y,b)}}this.setIndex(a);this.addAttribute("position",new oa(s,3));this.addAttribute("normal",new oa(o,3));this.addAttribute("uv",new oa(l,2))}Vs.prototype=Object.create(ha.prototype);Vs.prototype.constructor=Vs;var Ws={area:function(e){var t=e.length;var i=0;for(var n=t-1,r=0;r<t;n=r++){i+=e[n].x*e[r].y-e[r].x*e[n].y}return i*.5},triangulate:function(){function e(e,t,i,n,r,a){var s;var o,l,u,c;var h,f,d,p;o=e[a[t]].x;l=e[a[t]].y
;u=e[a[i]].x;c=e[a[i]].y;h=e[a[n]].x;f=e[a[n]].y;if((u-o)*(f-l)-(c-l)*(h-o)<=0)return false;var m,v,g,y,b,x;var _,w,T,M,S,E;var A,P,L;m=h-u;v=f-c;g=o-h;y=l-f;b=u-o;x=c-l;for(s=0;s<r;s++){d=e[a[s]].x;p=e[a[s]].y;if(d===o&&p===l||d===u&&p===c||d===h&&p===f)continue;_=d-o;w=p-l;T=d-u;M=p-c;S=d-h;E=p-f;L=m*M-v*T;A=b*w-x*_;P=g*E-y*S;if(L>=-Number.EPSILON&&P>=-Number.EPSILON&&A>=-Number.EPSILON)return false}return true}return function t(i,n){var r=i.length;if(r<3)return null;var a=[],s=[],o=[];var l,u,c;if(Ws.area(i)>0){for(u=0;u<r;u++)s[u]=u}else{for(u=0;u<r;u++)s[u]=r-1-u}var h=r;var f=2*h;for(u=h-1;h>2;){if(f--<=0){console.warn("THREE.ShapeUtils: Unable to triangulate polygon! in triangulate()");if(n)return o;return a}l=u;if(h<=l)l=0;u=l+1;if(h<=u)u=0;c=u+1;if(h<=c)c=0;if(e(i,l,u,c,h,s)){var d,p,m,v,g;d=s[l];p=s[u];m=s[c];a.push([i[d],i[p],i[m]]);o.push([s[l],s[u],s[c]]);for(v=u,g=u+1;g<h;v++,g++){s[v]=s[g]}h--;f=2*h}}if(n)return o;return a}}(),triangulateShape:function(e,t){function i(e){var t=e.length;if(t>2&&e[t-1].equals(e[0])){e.pop()}}i(e);t.forEach(i);function n(e,t,i){if(e.x!==t.x){if(e.x<t.x){return e.x<=i.x&&i.x<=t.x}else{return t.x<=i.x&&i.x<=e.x}}else{if(e.y<t.y){return e.y<=i.y&&i.y<=t.y}else{return t.y<=i.y&&i.y<=e.y}}}function r(e,t,i,r,a){var s=t.x-e.x,o=t.y-e.y;var l=r.x-i.x,u=r.y-i.y;var c=e.x-i.x;var h=e.y-i.y;var f=o*l-s*u;var d=o*c-s*h;if(Math.abs(f)>Number.EPSILON){var p;if(f>0){if(d<0||d>f)return[];p=u*c-l*h;if(p<0||p>f)return[]}else{if(d>0||d<f)return[];p=u*c-l*h;if(p>0||p<f)return[]}if(p===0){if(a&&(d===0||d===f))return[];return[e]}if(p===f){if(a&&(d===0||d===f))return[];return[t]}if(d===0)return[i];if(d===f)return[r];var m=p/f;return[{x:e.x+m*s,y:e.y+m*o}]}else{if(d!==0||u*c!==l*h)return[];var v=s===0&&o===0;var g=l===0&&u===0;if(v&&g){if(e.x!==i.x||e.y!==i.y)return[];return[e]}if(v){if(!n(i,r,e))return[];return[e]}if(g){if(!n(e,t,i))return[];return[i]}var y,b,x,_;var w,T,M,S;if(s!==0){if(e.x<t.x){y=e;x=e.x;b=t;_=t.x}else{y=t;x=t.x;b=e;_=e.x}if(i.x<r.x){w=i;M=i.x;T=r;S=r.x}else{w=r;M=r.x;T=i;S=i.x}}else{if(e.y<t.y){y=e;x=e.y;b=t;_=t.y}else{y=t;x=t.y;b=e;_=e.y}if(i.y<r.y){w=i;M=i.y;T=r;S=r.y}else{w=r;M=r.y;T=i;S=i.y}}if(x<=M){if(_<M)return[];if(_===M){if(a)return[];return[w]}if(_<=S)return[w,b];return[w,T]}else{if(x>S)return[];if(x===S){if(a)return[];return[y]}if(_<=S)return[y,b];return[y,T]}}}function a(e,t,i,n){var r=t.x-e.x,a=t.y-e.y;var s=i.x-e.x,o=i.y-e.y;var l=n.x-e.x,u=n.y-e.y;var c=r*o-a*s;var h=r*u-a*l;if(Math.abs(c)>Number.EPSILON){var f=l*o-u*s;if(c>0){return h>=0&&f>=0}else{return h>=0||f>=0}}else{return h>0}}function s(e,t){var i=e.concat();var n;function s(e,t){var r=i.length-1;var s=e-1;if(s<0)s=r;var o=e+1;if(o>r)o=0;var l=a(i[e],i[s],i[o],n[t]);if(!l){return false}var u=n.length-1;var c=t-1;if(c<0)c=u;var h=t+1;if(h>u)h=0;l=a(n[t],n[c],n[h],i[e]);if(!l){return false}return true}function o(e,t){var n,a,s;for(n=0;n<i.length;n++){a=n+1;a%=i.length;s=r(e,t,i[n],i[a],true);if(s.length>0)return true}return false}var l=[];function u(e,i){var n,a,s,o,u;for(n=0;n<l.length;n++){a=t[l[n]];for(s=0;s<a.length;s++){o=s+1;o%=a.length;u=r(e,i,a[s],a[o],true);if(u.length>0)return true}}return false}var c,h,f,d,p,m,v=[],g,y,b,x;for(var _=0,w=t.length;_<w;_++){l.push(_)}var T=0;var M=l.length*2;while(l.length>0){M--;if(M<0){console.log('THREE.ShapeUtils: Infinite Loop! Holes left:" + indepHoles.length + ", Probably Hole outside Shape!');break}for(h=T;h<i.length;h++){f=i[h];c=-1;for(var _=0;_<l.length;_++){p=l[_];m=f.x+":"+f.y+":"+p;if(v[m]!==undefined)continue;n=t[p];for(var S=0;S<n.length;S++){d=n[S];if(!s(h,S))continue;if(o(f,d))continue;if(u(f,d))continue;c=S;l.splice(_,1);g=i.slice(0,h+1);y=i.slice(h);b=n.slice(c);x=n.slice(0,c+1);i=g.concat(b).concat(x).concat(y);T=h;break}if(c>=0)break;v[m]=true}if(c>=0)break}}return i}var o,l,u,c,h,f,d={};var p=e.concat();for(var m=0,v=t.length;m<v;m++){Array.prototype.push.apply(p,t[m])}for(o=0,l=p.length;o<l;o++){h=p[o].x+":"+p[o].y;if(d[h]!==undefined){console.warn("THREE.ShapeUtils: Duplicate point",h,o)}d[h]=o}var g=s(e,t);var y=Ws.triangulate(g,false);for(o=0,l=y.length;o<l;o++){c=y[o];for(u=0;u<3;u++){h=c[u].x+":"+c[u].y;f=d[h];if(f!==undefined){c[u]=f}}}return y.concat()},isClockWise:function(e){return Ws.area(e)<0}};function Xs(e,t){Qr.call(this);this.type="ExtrudeGeometry";this.parameters={shapes:e,options:t};this.fromBufferGeometry(new Ys(e,t));this.mergeVertices()}Xs.prototype=Object.create(Qr.prototype);Xs.prototype.constructor=Xs;function Ys(e,t){if(typeof e==="undefined"){return}ha.call(this);this.type="ExtrudeBufferGeometry";e=Array.isArray(e)?e:[e];this.addShapeList(e,t);this.computeVertexNormals()}Ys.prototype=Object.create(ha.prototype);Ys.prototype.constructor=Ys;Ys.prototype.getArrays=function(){var e=this.getAttribute("position");var t=e?Array.prototype.slice.call(e.array):[];var i=this.getAttribute("uv");var n=i?Array.prototype.slice.call(i.array):[];var r=this.index;var a=r?Array.prototype.slice.call(r.array):[];return{position:t,uv:n,index:a}};Ys.prototype.addShapeList=function(e,t){var i=e.length;t.arrays=this.getArrays();for(var n=0;n<i;n++){var r=e[n];this.addShape(r,t)}this.setIndex(t.arrays.index);this.addAttribute("position",new oa(t.arrays.position,3));this.addAttribute("uv",new oa(t.arrays.uv,2))};Ys.prototype.addShape=function(e,t){var i=t.arrays?t.arrays:this.getArrays();var n=i.position;var r=i.index;var a=i.uv;var s=[];var o=t.amount!==undefined?t.amount:100;var l=t.bevelThickness!==undefined?t.bevelThickness:6;var u=t.bevelSize!==undefined?t.bevelSize:l-2;var c=t.bevelSegments!==undefined?t.bevelSegments:3;var h=t.bevelEnabled!==undefined?t.bevelEnabled:true;var f=t.curveSegments!==undefined?t.curveSegments:12;var d=t.steps!==undefined?t.steps:1;var p=t.extrudePath;var m,v=false;var g=t.UVGenerator!==undefined?t.UVGenerator:Xs.WorldUVGenerator;var y,b,x,_;if(p){m=p.getSpacedPoints(d);v=true;h=false;y=t.frames!==undefined?t.frames:p.computeFrenetFrames(d,false);b=new At;x=new At;_=new At}if(!h){c=0;l=0;u=0}var w,T,M;var S=this;var E=e.extractPoints(f);var A=E.shape;var P=E.holes;var L=!Ws.isClockWise(A);if(L){A=A.reverse();for(T=0,M=P.length;T<M;T++){w=P[T];if(Ws.isClockWise(w)){P[T]=w.reverse()}}}var R=Ws.triangulateShape(A,P);var C=A;for(T=0,M=P.length;T<M;T++){w=P[T];A=A.concat(w)}function O(e,t,i){if(!t)console.error("THREE.ExtrudeGeometry: vec does not exist");return t.clone().multiplyScalar(i).add(e)}var D,I,k,U,F,N=A.length,B,z=R.length;function j(e,t,i){var n,r,a;var s=e.x-t.x,o=e.y-t.y;var l=i.x-e.x,u=i.y-e.y;var c=s*s+o*o;var h=s*u-o*l;if(Math.abs(h)>Number.EPSILON){var f=Math.sqrt(c);var d=Math.sqrt(l*l+u*u);var p=t.x-o/f;var m=t.y+s/f;var v=i.x-u/d;var g=i.y+l/d;var y=((v-p)*u-(g-m)*l)/(s*u-o*l);n=p+s*y-e.x;r=m+o*y-e.y;var b=n*n+r*r;if(b<=2){return new xt(n,r)}else{a=Math.sqrt(b/2)}}else{var x=false;if(s>Number.EPSILON){if(l>Number.EPSILON){x=true}}else{if(s<-Number.EPSILON){if(l<-Number.EPSILON){x=true}}else{if(Math.sign(o)===Math.sign(u)){x=true}}}if(x){n=-o;r=s;a=Math.sqrt(c)}else{n=s;r=o;a=Math.sqrt(c/2)}}return new xt(n/a,r/a)}var G=[];for(var H=0,V=C.length,W=V-1,X=H+1;H<V;H++,W++,X++){if(W===V)W=0;if(X===V)X=0;G[H]=j(C[H],C[W],C[X])}var Y=[],q,Z=G.concat();for(T=0,M=P.length;T<M;T++){w=P[T];q=[];for(H=0,V=w.length,W=V-1,X=H+1;H<V;H++,W++,X++){if(W===V)W=0;if(X===V)X=0;q[H]=j(w[H],w[W],w[X])}Y.push(q);Z=Z.concat(q)}for(D=0;D<c;D++){k=D/c;U=l*Math.cos(k*Math.PI/2);I=u*Math.sin(k*Math.PI/2);for(H=0,V=C.length;H<V;H++){F=O(C[H],G[H],I);ee(F.x,F.y,-U)}for(T=0,M=P.length;T<M;T++){w=P[T];q=Y[T];for(H=0,V=w.length;H<V;H++){F=O(w[H],q[H],I);ee(F.x,F.y,-U)}}}I=u;for(H=0;H<N;H++){F=h?O(A[H],Z[H],I):A[H];if(!v){ee(F.x,F.y,0)}else{x.copy(y.normals[0]).multiplyScalar(F.x);b.copy(y.binormals[0]).multiplyScalar(F.y);_.copy(m[0]).add(x).add(b);ee(_.x,_.y,_.z)}}var J;for(J=1;J<=d;J++){for(H=0;H<N;H++){F=h?O(A[H],Z[H],I):A[H];if(!v){ee(F.x,F.y,o/d*J)}else{x.copy(y.normals[J]).multiplyScalar(F.x);b.copy(y.binormals[J]).multiplyScalar(F.y);_.copy(m[J]).add(x).add(b);ee(_.x,_.y,_.z)}}}for(D=c-1;D>=0;D--){k=D/c;U=l*Math.cos(k*Math.PI/2);I=u*Math.sin(k*Math.PI/2);for(H=0,V=C.length;H<V;H++){F=O(C[H],G[H],I);ee(F.x,F.y,o+U)}for(T=0,M=P.length;T<M;T++){w=P[T];q=Y[T];for(H=0,V=w.length;H<V;H++){F=O(w[H],q[H],I);if(!v){ee(F.x,F.y,o+U)}else{ee(F.x,F.y+m[d-1].y,m[d-1].x+U)}}}}K();Q();function K(){var e=n.length/3;if(h){var i=0;var r=N*i;for(H=0;H<z;H++){B=R[H];te(B[2]+r,B[1]+r,B[0]+r)}i=d+c*2;r=N*i;for(H=0;H<z;H++){B=R[H];te(B[0]+r,B[1]+r,B[2]+r)}}else{for(H=0;H<z;H++){B=R[H];te(B[2],B[1],B[0])}for(H=0;H<z;H++){B=R[H];te(B[0]+N*d,B[1]+N*d,B[2]+N*d)}}S.addGroup(e,n.length/3-e,t.material!==undefined?t.material:0)}function Q(){var e=n.length/3;var i=0;$(C,i);i+=C.length;for(T=0,M=P.length;T<M;T++){w=P[T];$(w,i);i+=w.length}S.addGroup(e,n.length/3-e,t.extrudeMaterial!==undefined?t.extrudeMaterial:1)}function $(e,t){var i,n;H=e.length;while(--H>=0){i=H;n=H-1;if(n<0)n=e.length-1;var r=0,a=d+c*2;for(r=0;r<a;r++){var s=N*r;var o=N*(r+1);var l=t+i+s,u=t+n+s,h=t+n+o,f=t+i+o;ie(l,u,h,f,e,r,a,i,n)}}}function ee(e,t,i){s.push(e);s.push(t);s.push(i)}function te(e,t,i){ne(e);ne(t);ne(i);var r=n.length/3;var a=g.generateTopUV(S,n,r-3,r-2,r-1);re(a[0]);re(a[1]);re(a[2])}function ie(e,t,i,r,a,s,o,l,u){ne(e);ne(t);ne(r);ne(t);ne(i);ne(r);var c=n.length/3;var h=g.generateSideWallUV(S,n,c-6,c-3,c-2,c-1);re(h[0]);re(h[1]);re(h[3]);re(h[1]);re(h[2]);re(h[3])}function ne(e){r.push(n.length/3);n.push(s[e*3+0]);n.push(s[e*3+1]);n.push(s[e*3+2])}function re(e){a.push(e.x);a.push(e.y)}if(!t.arrays){this.setIndex(r);this.addAttribute("position",new oa(n,3));this.addAttribute("uv",new oa(t.arrays.uv,2))}};Xs.WorldUVGenerator={generateTopUV:function(e,t,i,n,r){var a=t[i*3];var s=t[i*3+1];var o=t[n*3];var l=t[n*3+1];var u=t[r*3];var c=t[r*3+1];return[new xt(a,s),new xt(o,l),new xt(u,c)]},generateSideWallUV:function(e,t,i,n,r,a){var s=t[i*3];var o=t[i*3+1];var l=t[i*3+2];var u=t[n*3];var c=t[n*3+1];var h=t[n*3+2];var f=t[r*3];var d=t[r*3+1];var p=t[r*3+2];var m=t[a*3];var v=t[a*3+1];var g=t[a*3+2];if(Math.abs(o-c)<.01){return[new xt(s,1-l),new xt(u,1-h),new xt(f,1-p),new xt(m,1-g)]}else{return[new xt(o,1-l),new xt(c,1-h),new xt(d,1-p),new xt(v,1-g)]}}};function qs(e,t){Qr.call(this);this.type="TextGeometry";this.parameters={text:e,parameters:t};this.fromBufferGeometry(new Zs(e,t));this.mergeVertices()}qs.prototype=Object.create(Qr.prototype);qs.prototype.constructor=qs;function Zs(e,t){t=t||{};var i=t.font;if(!(i&&i.isFont)){console.error("THREE.TextGeometry: font parameter is not an instance of THREE.Font.");return new Qr}var n=i.generateShapes(e,t.size,t.curveSegments);t.amount=t.height!==undefined?t.height:50;if(t.bevelThickness===undefined)t.bevelThickness=10;if(t.bevelSize===undefined)t.bevelSize=8;if(t.bevelEnabled===undefined)t.bevelEnabled=false;Ys.call(this,n,t);this.type="TextBufferGeometry"}Zs.prototype=Object.create(Ys.prototype);Zs.prototype.constructor=Zs;function Js(e,t,i,n,r,a,s){Qr.call(this);this.type="SphereGeometry";this.parameters={radius:e,widthSegments:t,heightSegments:i,phiStart:n,phiLength:r,thetaStart:a,thetaLength:s};this.fromBufferGeometry(new Ks(e,t,i,n,r,a,s));this.mergeVertices()}Js.prototype=Object.create(Qr.prototype);Js.prototype.constructor=Js;function Ks(e,t,i,n,r,a,s){ha.call(this);this.type="SphereBufferGeometry";this.parameters={radius:e,widthSegments:t,heightSegments:i,phiStart:n,phiLength:r,thetaStart:a,thetaLength:s};e=e||50;t=Math.max(3,Math.floor(t)||8);i=Math.max(2,Math.floor(i)||6);n=n!==undefined?n:0;r=r!==undefined?r:Math.PI*2;a=a!==undefined?a:0;s=s!==undefined?s:Math.PI;var o=a+s;var l,u;var c=0;var h=[];var f=new At;var d=new At;var p=[];var m=[];var v=[];var g=[];for(u=0;u<=i;u++){var y=[];var b=u/i;for(l=0;l<=t;l++){var x=l/t;f.x=-e*Math.cos(n+x*r)*Math.sin(a+b*s);f.y=e*Math.cos(a+b*s);f.z=e*Math.sin(n+x*r)*Math.sin(a+b*s);m.push(f.x,f.y,f.z);d.set(f.x,f.y,f.z).normalize();v.push(d.x,d.y,d.z);g.push(x,1-b);y.push(c++)}h.push(y)}for(u=0;u<i;u++){for(l=0;l<t;l++){var _=h[u][l+1];var w=h[u][l];var T=h[u+1][l];var M=h[u+1][l+1];if(u!==0||a>0)p.push(_,w,M);if(u!==i-1||o<Math.PI)p.push(w,T,M)}}this.setIndex(p);this.addAttribute("position",new oa(m,3));this.addAttribute("normal",new oa(v,3));this.addAttribute("uv",new oa(g,2))}Ks.prototype=Object.create(ha.prototype);Ks.prototype.constructor=Ks;function Qs(e,t,i,n,r,a){Qr.call(this);this.type="RingGeometry";this.parameters={innerRadius:e,outerRadius:t,thetaSegments:i,phiSegments:n,thetaStart:r,thetaLength:a};this.fromBufferGeometry(new $s(e,t,i,n,r,a));this.mergeVertices()}Qs.prototype=Object.create(Qr.prototype);Qs.prototype.constructor=Qs;function $s(e,t,i,n,r,a){ha.call(this);this.type="RingBufferGeometry";this.parameters={innerRadius:e,outerRadius:t,thetaSegments:i,phiSegments:n,thetaStart:r,thetaLength:a};e=e||20;t=t||50;r=r!==undefined?r:0;a=a!==undefined?a:Math.PI*2;i=i!==undefined?Math.max(3,i):8;n=n!==undefined?Math.max(1,n):1;var s=[];var o=[];var l=[];var u=[];var c;var h=e;var f=(t-e)/n;var d=new At;var p=new xt;var m,v;for(m=0;m<=n;m++){for(v=0;v<=i;v++){c=r+v/i*a;d.x=h*Math.cos(c);d.y=h*Math.sin(c);o.push(d.x,d.y,d.z);l.push(0,0,1);p.x=(d.x/t+1)/2;p.y=(d.y/t+1)/2;u.push(p.x,p.y)}h+=f}for(m=0;m<n;m++){var g=m*(i+1);for(v=0;v<i;v++){c=v+g;var y=c;var b=c+i+1;var x=c+i+2;var _=c+1;s.push(y,b,_);s.push(b,x,_)}}this.setIndex(s);this.addAttribute("position",new oa(o,3));this.addAttribute("normal",new oa(l,3));this.addAttribute("uv",new oa(u,2))}$s.prototype=Object.create(ha.prototype);$s.prototype.constructor=$s;function eo(e,t,i,n){Qr.call(this);this.type="LatheGeometry";this.parameters={points:e,segments:t,phiStart:i,phiLength:n};this.fromBufferGeometry(new to(e,t,i,n));this.mergeVertices()}eo.prototype=Object.create(Qr.prototype);eo.prototype.constructor=eo;function to(e,t,i,n){ha.call(this);this.type="LatheBufferGeometry";this.parameters={points:e,segments:t,phiStart:i,phiLength:n};t=Math.floor(t)||12;i=i||0;n=n||Math.PI*2;n=bt.clamp(n,0,Math.PI*2);var r=[];var a=[];var s=[];var o;var l=1/t;var u=new At;var c=new xt;var h,f;for(h=0;h<=t;h++){var d=i+h*l*n;var p=Math.sin(d);var m=Math.cos(d);for(f=0;f<=e.length-1;f++){u.x=e[f].x*p;u.y=e[f].y;u.z=e[f].x*m;a.push(u.x,u.y,u.z);c.x=h/t;c.y=f/(e.length-1);s.push(c.x,c.y)}}for(h=0;h<t;h++){for(f=0;f<e.length-1;f++){o=f+h*e.length;var v=o;var g=o+e.length;var y=o+e.length+1;var b=o+1;r.push(v,g,b);r.push(g,y,b)}}this.setIndex(r);this.addAttribute("position",new oa(a,3));this.addAttribute("uv",new oa(s,2));this.computeVertexNormals();if(n===Math.PI*2){var x=this.attributes.normal.array;var _=new At;var w=new At;var T=new At;o=t*e.length*3;for(h=0,f=0;h<e.length;h++,f+=3){_.x=x[f+0];_.y=x[f+1];_.z=x[f+2];w.x=x[o+f+0];w.y=x[o+f+1];w.z=x[o+f+2];T.addVectors(_,w).normalize();x[f+0]=x[o+f+0]=T.x;x[f+1]=x[o+f+1]=T.y;x[f+2]=x[o+f+2]=T.z}}}to.prototype=Object.create(ha.prototype);to.prototype.constructor=to;function io(e,t){Qr.call(this);this.type="ShapeGeometry";if(typeof t==="object"){console.warn("THREE.ShapeGeometry: Options parameter has been removed.");t=t.curveSegments}this.parameters={shapes:e,curveSegments:t};this.fromBufferGeometry(new no(e,t));this.mergeVertices()}io.prototype=Object.create(Qr.prototype);io.prototype.constructor=io;function no(e,t){ha.call(this);this.type="ShapeBufferGeometry";this.parameters={shapes:e,curveSegments:t};t=t||12;var i=[];var n=[];var r=[];var a=[];var s=0;var o=0;if(Array.isArray(e)===false){u(e)}else{for(var l=0;l<e.length;l++){u(e[l]);this.addGroup(s,o,l);s+=o;o=0}}this.setIndex(i);this.addAttribute("position",new oa(n,3));this.addAttribute("normal",new oa(r,3));this.addAttribute("uv",new oa(a,2));function u(e){var s,l,u;var c=n.length/3;var h=e.extractPoints(t);var f=h.shape;var d=h.holes;if(Ws.isClockWise(f)===false){f=f.reverse();for(s=0,l=d.length;s<l;s++){u=d[s];if(Ws.isClockWise(u)===true){d[s]=u.reverse()}}}var p=Ws.triangulateShape(f,d);for(s=0,l=d.length;s<l;s++){u=d[s];f=f.concat(u)}for(s=0,l=f.length;s<l;s++){var m=f[s];n.push(m.x,m.y,0);r.push(0,0,1);a.push(m.x,m.y)}for(s=0,l=p.length;s<l;s++){var v=p[s];var g=v[0]+c;var y=v[1]+c;var b=v[2]+c;i.push(g,y,b);o+=3}}}no.prototype=Object.create(ha.prototype);no.prototype.constructor=no;function ro(e,t){ha.call(this);this.type="EdgesGeometry";this.parameters={thresholdAngle:t};t=t!==undefined?t:1;var i=[];var n=Math.cos(bt.DEG2RAD*t);var r=[0,0],a={},s,o;var l,u=["a","b","c"];var c;if(e.isBufferGeometry){c=new Qr;c.fromBufferGeometry(e)}else{c=e.clone()}c.mergeVertices();c.computeFaceNormals();var h=c.vertices;var f=c.faces;for(var d=0,p=f.length;d<p;d++){var m=f[d];for(var v=0;v<3;v++){s=m[u[v]];o=m[u[(v+1)%3]];r[0]=Math.min(s,o);r[1]=Math.max(s,o);l=r[0]+","+r[1];if(a[l]===undefined){a[l]={index1:r[0],index2:r[1],face1:d,face2:undefined}}else{a[l].face2=d}}}for(l in a){var g=a[l];if(g.face2===undefined||f[g.face1].normal.dot(f[g.face2].normal)<=n){var y=h[g.index1];i.push(y.x,y.y,y.z);y=h[g.index2];i.push(y.x,y.y,y.z)}}this.addAttribute("position",new oa(i,3))}ro.prototype=Object.create(ha.prototype);ro.prototype.constructor=ro;function ao(e,t,i,n,r,a,s,o){Qr.call(this);this.type="CylinderGeometry";this.parameters={radiusTop:e,radiusBottom:t,height:i,radialSegments:n,heightSegments:r,openEnded:a,thetaStart:s,thetaLength:o};this.fromBufferGeometry(new so(e,t,i,n,r,a,s,o));this.mergeVertices()}ao.prototype=Object.create(Qr.prototype);ao.prototype.constructor=ao;function so(e,t,i,n,r,a,s,o){ha.call(this);this.type="CylinderBufferGeometry";this.parameters={radiusTop:e,radiusBottom:t,height:i,radialSegments:n,heightSegments:r,openEnded:a,thetaStart:s,thetaLength:o};var l=this;e=e!==undefined?e:20;t=t!==undefined?t:20;i=i!==undefined?i:100;n=Math.floor(n)||8;r=Math.floor(r)||1;a=a!==undefined?a:false;s=s!==undefined?s:0;o=o!==undefined?o:2*Math.PI;var u=[];var c=[];var h=[];var f=[];var d=0;var p=[];var m=i/2;var v=0;g();if(a===false){if(e>0)y(true);if(t>0)y(false)}this.setIndex(u);this.addAttribute("position",new oa(c,3));this.addAttribute("normal",new oa(h,3));this.addAttribute("uv",new oa(f,2));function g(){var a,g;var y=new At;var b=new At;var x=0;var _=(t-e)/i;for(g=0;g<=r;g++){var w=[];var T=g/r;var M=T*(t-e)+e;for(a=0;a<=n;a++){var S=a/n;var E=S*o+s;var A=Math.sin(E);var P=Math.cos(E);b.x=M*A;b.y=-T*i+m;b.z=M*P;c.push(b.x,b.y,b.z);y.set(A,_,P).normalize();h.push(y.x,y.y,y.z);f.push(S,1-T);w.push(d++)}p.push(w)}for(a=0;a<n;a++){for(g=0;g<r;g++){var L=p[g][a];var R=p[g+1][a];var C=p[g+1][a+1];var O=p[g][a+1];u.push(L,R,O);u.push(R,C,O);x+=6}}l.addGroup(v,x,0);v+=x}function y(i){var r,a,p;var g=new xt;var y=new At;var b=0;var x=i===true?e:t;var _=i===true?1:-1;a=d;for(r=1;r<=n;r++){c.push(0,m*_,0);h.push(0,_,0);f.push(.5,.5);d++}p=d;for(r=0;r<=n;r++){var w=r/n;var T=w*o+s;var M=Math.cos(T);var S=Math.sin(T);y.x=x*S;y.y=m*_;y.z=x*M;c.push(y.x,y.y,y.z);h.push(0,_,0);g.x=M*.5+.5;g.y=S*.5*_+.5;f.push(g.x,g.y);d++}for(r=0;r<n;r++){var E=a+r;var A=p+r;if(i===true){u.push(A,A+1,E)}else{u.push(A+1,A,E)}b+=3}l.addGroup(v,b,i===true?1:2);v+=b}}so.prototype=Object.create(ha.prototype);so.prototype.constructor=so;function oo(e,t,i,n,r,a,s){ao.call(this,0,e,t,i,n,r,a,s);this.type="ConeGeometry";this.parameters={radius:e,height:t,radialSegments:i,heightSegments:n,openEnded:r,thetaStart:a,thetaLength:s}}oo.prototype=Object.create(ao.prototype);oo.prototype.constructor=oo;function lo(e,t,i,n,r,a,s){so.call(this,0,e,t,i,n,r,a,s);this.type="ConeBufferGeometry";this.parameters={radius:e,height:t,radialSegments:i,heightSegments:n,openEnded:r,thetaStart:a,thetaLength:s}}lo.prototype=Object.create(so.prototype);lo.prototype.constructor=lo;function uo(e,t,i,n){Qr.call(this);this.type="CircleGeometry";this.parameters={radius:e,segments:t,thetaStart:i,thetaLength:n};this.fromBufferGeometry(new co(e,t,i,n));this.mergeVertices()}uo.prototype=Object.create(Qr.prototype);uo.prototype.constructor=uo;function co(e,t,i,n){ha.call(this);this.type="CircleBufferGeometry";this.parameters={radius:e,segments:t,thetaStart:i,thetaLength:n};e=e||50;t=t!==undefined?Math.max(3,t):8;i=i!==undefined?i:0;n=n!==undefined?n:Math.PI*2;var r=[];var a=[];var s=[];var o=[];var l,u;var c=new At;var h=new xt;a.push(0,0,0);s.push(0,0,1);o.push(.5,.5);for(u=0,l=3;u<=t;u++,l+=3){var f=i+u/t*n;c.x=e*Math.cos(f);c.y=e*Math.sin(f);a.push(c.x,c.y,c.z);s.push(0,0,1);h.x=(a[l]/e+1)/2;h.y=(a[l+1]/e+1)/2;o.push(h.x,h.y)}for(l=1;l<=t;l++){r.push(l,l+1,0)}this.setIndex(r);this.addAttribute("position",new oa(a,3));this.addAttribute("normal",new oa(s,3));this.addAttribute("uv",new oa(o,2))}co.prototype=Object.create(ha.prototype);co.prototype.constructor=co;var ho=Object.freeze({WireframeGeometry:Es,ParametricGeometry:As,ParametricBufferGeometry:Ps,TetrahedronGeometry:Cs,TetrahedronBufferGeometry:Os,OctahedronGeometry:Ds,OctahedronBufferGeometry:Is,IcosahedronGeometry:ks,IcosahedronBufferGeometry:Us,DodecahedronGeometry:Fs,DodecahedronBufferGeometry:Ns,PolyhedronGeometry:Ls,PolyhedronBufferGeometry:Rs,TubeGeometry:Bs,TubeBufferGeometry:zs,TorusKnotGeometry:js,TorusKnotBufferGeometry:Gs,TorusGeometry:Hs,TorusBufferGeometry:Vs,TextGeometry:qs,TextBufferGeometry:Zs,SphereGeometry:Js,SphereBufferGeometry:Ks,RingGeometry:Qs,RingBufferGeometry:$s,PlaneGeometry:pa,PlaneBufferGeometry:ma,LatheGeometry:eo,LatheBufferGeometry:to,ShapeGeometry:io,ShapeBufferGeometry:no,ExtrudeGeometry:Xs,ExtrudeBufferGeometry:Ys,EdgesGeometry:ro,ConeGeometry:oo,ConeBufferGeometry:lo,CylinderGeometry:ao,CylinderBufferGeometry:so,CircleGeometry:uo,CircleBufferGeometry:co,BoxGeometry:fa,BoxBufferGeometry:da});function fo(e){Cr.call(this);this.type="ShadowMaterial";this.color=new bi(0);this.opacity=1;this.lights=true;this.transparent=true;this.setValues(e)}fo.prototype=Object.create(Cr.prototype);fo.prototype.constructor=fo;fo.prototype.isShadowMaterial=true;function po(e){Or.call(this,e);this.type="RawShaderMaterial"}po.prototype=Object.create(Or.prototype);po.prototype.constructor=po;po.prototype.isRawShaderMaterial=true;function mo(e){Cr.call(this);this.defines={STANDARD:""};this.type="MeshStandardMaterial";this.color=new bi(16777215);this.roughness=.5;this.metalness=.5;this.map=null;this.lightMap=null;this.lightMapIntensity=1;this.aoMap=null;this.aoMapIntensity=1;this.emissive=new bi(0);this.emissiveIntensity=1;this.emissiveMap=null;this.bumpMap=null;this.bumpScale=1;this.normalMap=null;this.normalScale=new xt(1,1);this.displacementMap=null;this.displacementScale=1;this.displacementBias=0;this.roughnessMap=null;this.metalnessMap=null;this.alphaMap=null;this.envMap=null;this.envMapIntensity=1;this.refractionRatio=.98;this.wireframe=false;this.wireframeLinewidth=1;this.wireframeLinecap="round";this.wireframeLinejoin="round";this.skinning=false;this.morphTargets=false;this.morphNormals=false;this.setValues(e)}mo.prototype=Object.create(Cr.prototype);mo.prototype.constructor=mo;mo.prototype.isMeshStandardMaterial=true;mo.prototype.copy=function(e){Cr.prototype.copy.call(this,e);this.defines={STANDARD:""};this.color.copy(e.color);this.roughness=e.roughness;this.metalness=e.metalness;this.map=e.map;this.lightMap=e.lightMap;this.lightMapIntensity=e.lightMapIntensity;this.aoMap=e.aoMap;this.aoMapIntensity=e.aoMapIntensity;this.emissive.copy(e.emissive);this.emissiveMap=e.emissiveMap;this.emissiveIntensity=e.emissiveIntensity;this.bumpMap=e.bumpMap;this.bumpScale=e.bumpScale;this.normalMap=e.normalMap;this.normalScale.copy(e.normalScale);this.displacementMap=e.displacementMap;this.displacementScale=e.displacementScale;this.displacementBias=e.displacementBias;this.roughnessMap=e.roughnessMap;this.metalnessMap=e.metalnessMap;this.alphaMap=e.alphaMap;this.envMap=e.envMap;this.envMapIntensity=e.envMapIntensity;this.refractionRatio=e.refractionRatio;this.wireframe=e.wireframe;this.wireframeLinewidth=e.wireframeLinewidth;this.wireframeLinecap=e.wireframeLinecap;this.wireframeLinejoin=e.wireframeLinejoin;this.skinning=e.skinning;this.morphTargets=e.morphTargets;this.morphNormals=e.morphNormals;return this};function vo(e){mo.call(this);this.defines={PHYSICAL:""};this.type="MeshPhysicalMaterial";this.reflectivity=.5;this.clearCoat=0;this.clearCoatRoughness=0;this.setValues(e)}vo.prototype=Object.create(mo.prototype);vo.prototype.constructor=vo;vo.prototype.isMeshPhysicalMaterial=true;vo.prototype.copy=function(e){mo.prototype.copy.call(this,e);this.defines={PHYSICAL:""};this.reflectivity=e.reflectivity;this.clearCoat=e.clearCoat;this.clearCoatRoughness=e.clearCoatRoughness;return this};function go(e){Cr.call(this);this.type="MeshPhongMaterial";this.color=new bi(16777215);this.specular=new bi(1118481);this.shininess=30;this.map=null;this.lightMap=null;this.lightMapIntensity=1;this.aoMap=null;this.aoMapIntensity=1;this.emissive=new bi(0);this.emissiveIntensity=1;this.emissiveMap=null;this.bumpMap=null;this.bumpScale=1;this.normalMap=null;this.normalScale=new xt(1,1);this.displacementMap=null;this.displacementScale=1;this.displacementBias=0;this.specularMap=null;this.alphaMap=null;this.envMap=null;this.combine=K;this.reflectivity=1;this.refractionRatio=.98;this.wireframe=false;this.wireframeLinewidth=1;this.wireframeLinecap="round";this.wireframeLinejoin="round";this.skinning=false;this.morphTargets=false;this.morphNormals=false;this.setValues(e)}go.prototype=Object.create(Cr.prototype);go.prototype.constructor=go;go.prototype.isMeshPhongMaterial=true;go.prototype.copy=function(e){Cr.prototype.copy.call(this,e);this.color.copy(e.color);this.specular.copy(e.specular);this.shininess=e.shininess;this.map=e.map;this.lightMap=e.lightMap;this.lightMapIntensity=e.lightMapIntensity;this.aoMap=e.aoMap;this.aoMapIntensity=e.aoMapIntensity;this.emissive.copy(e.emissive);this.emissiveMap=e.emissiveMap;this.emissiveIntensity=e.emissiveIntensity;this.bumpMap=e.bumpMap;this.bumpScale=e.bumpScale;this.normalMap=e.normalMap;this.normalScale.copy(e.normalScale);this.displacementMap=e.displacementMap;this.displacementScale=e.displacementScale;this.displacementBias=e.displacementBias;this.specularMap=e.specularMap;this.alphaMap=e.alphaMap;this.envMap=e.envMap;this.combine=e.combine;this.reflectivity=e.reflectivity;this.refractionRatio=e.refractionRatio;this.wireframe=e.wireframe;this.wireframeLinewidth=e.wireframeLinewidth;this.wireframeLinecap=e.wireframeLinecap;this.wireframeLinejoin=e.wireframeLinejoin;this.skinning=e.skinning;this.morphTargets=e.morphTargets;this.morphNormals=e.morphNormals;return this};function yo(e){go.call(this);this.defines={TOON:""};this.type="MeshToonMaterial";this.gradientMap=null;this.setValues(e)}yo.prototype=Object.create(go.prototype);yo.prototype.constructor=yo;yo.prototype.isMeshToonMaterial=true;yo.prototype.copy=function(e){go.prototype.copy.call(this,e);this.gradientMap=e.gradientMap;return this};function bo(e){Cr.call(this);this.type="MeshNormalMaterial";this.bumpMap=null;this.bumpScale=1;this.normalMap=null;this.normalScale=new xt(1,1);this.displacementMap=null;this.displacementScale=1;this.displacementBias=0;this.wireframe=false;this.wireframeLinewidth=1;this.fog=false;this.lights=false;this.skinning=false;this.morphTargets=false;this.morphNormals=false;this.setValues(e)}bo.prototype=Object.create(Cr.prototype);bo.prototype.constructor=bo;bo.prototype.isMeshNormalMaterial=true;bo.prototype.copy=function(e){Cr.prototype.copy.call(this,e);this.bumpMap=e.bumpMap;this.bumpScale=e.bumpScale;this.normalMap=e.normalMap;this.normalScale.copy(e.normalScale);this.displacementMap=e.displacementMap;this.displacementScale=e.displacementScale;this.displacementBias=e.displacementBias;this.wireframe=e.wireframe;this.wireframeLinewidth=e.wireframeLinewidth;this.skinning=e.skinning;this.morphTargets=e.morphTargets;this.morphNormals=e.morphNormals;return this};function xo(e){Cr.call(this);this.type="MeshLambertMaterial";this.color=new bi(16777215);this.map=null;this.lightMap=null;this.lightMapIntensity=1;this.aoMap=null;this.aoMapIntensity=1;this.emissive=new bi(0);this.emissiveIntensity=1;this.emissiveMap=null;this.specularMap=null;this.alphaMap=null;this.envMap=null;this.combine=K;this.reflectivity=1;this.refractionRatio=.98;this.wireframe=false;this.wireframeLinewidth=1;this.wireframeLinecap="round";this.wireframeLinejoin="round";this.skinning=false;this.morphTargets=false;this.morphNormals=false;this.setValues(e)}xo.prototype=Object.create(Cr.prototype);xo.prototype.constructor=xo;xo.prototype.isMeshLambertMaterial=true;xo.prototype.copy=function(e){Cr.prototype.copy.call(this,e);this.color.copy(e.color);this.map=e.map;this.lightMap=e.lightMap;this.lightMapIntensity=e.lightMapIntensity;this.aoMap=e.aoMap;this.aoMapIntensity=e.aoMapIntensity;this.emissive.copy(e.emissive);this.emissiveMap=e.emissiveMap;this.emissiveIntensity=e.emissiveIntensity;this.specularMap=e.specularMap;this.alphaMap=e.alphaMap;this.envMap=e.envMap;this.combine=e.combine;this.reflectivity=e.reflectivity;this.refractionRatio=e.refractionRatio;this.wireframe=e.wireframe;this.wireframeLinewidth=e.wireframeLinewidth;this.wireframeLinecap=e.wireframeLinecap;this.wireframeLinejoin=e.wireframeLinejoin;this.skinning=e.skinning;this.morphTargets=e.morphTargets;this.morphNormals=e.morphNormals;return this};function _o(e){vs.call(this);this.type="LineDashedMaterial";this.scale=1;this.dashSize=3;this.gapSize=1;this.setValues(e)}_o.prototype=Object.create(vs.prototype);_o.prototype.constructor=_o;_o.prototype.isLineDashedMaterial=true;_o.prototype.copy=function(e){vs.prototype.copy.call(this,e);this.scale=e.scale;this.dashSize=e.dashSize;this.gapSize=e.gapSize;return this};var wo=Object.freeze({ShadowMaterial:fo,SpriteMaterial:cs,RawShaderMaterial:po,ShaderMaterial:Or,PointsMaterial:xs,MeshPhysicalMaterial:vo,MeshStandardMaterial:mo,MeshPhongMaterial:go,MeshToonMaterial:yo,MeshNormalMaterial:bo,MeshLambertMaterial:xo,MeshDepthMaterial:Dr,MeshDistanceMaterial:Ir,MeshBasicMaterial:va,LineDashedMaterial:_o,LineBasicMaterial:vs,Material:Cr});var To={enabled:false,files:{},add:function(e,t){if(this.enabled===false)return;this.files[e]=t},get:function(e){if(this.enabled===false)return;return this.files[e]},remove:function(e){delete this.files[e]},clear:function(){this.files={}}};function Mo(e,t,i){var n=this;var r=false,a=0,s=0;this.onStart=undefined;this.onLoad=e;this.onProgress=t;this.onError=i;this.itemStart=function(e){s++;if(r===false){if(n.onStart!==undefined){n.onStart(e,a,s)}}r=true};this.itemEnd=function(e){a++;if(n.onProgress!==undefined){n.onProgress(e,a,s)}if(a===s){r=false;if(n.onLoad!==undefined){n.onLoad()}}};this.itemError=function(e){if(n.onError!==undefined){n.onError(e)}}}var So=new Mo;function Eo(e){this.manager=e!==undefined?e:So}Object.assign(Eo.prototype,{load:function(e,t,i,n){if(e===undefined)e="";if(this.path!==undefined)e=this.path+e;var r=this;var a=To.get(e);if(a!==undefined){r.manager.itemStart(e);setTimeout(function(){if(t)t(a);r.manager.itemEnd(e)},0);return a}var s=/^data:(.*?)(;base64)?,(.*)$/;var o=e.match(s);if(o){var l=o[1];var u=!!o[2];var c=o[3];c=window.decodeURIComponent(c);if(u)c=window.atob(c);try{var h;var f=(this.responseType||"").toLowerCase();switch(f){case"arraybuffer":case"blob":h=new ArrayBuffer(c.length);var d=new Uint8Array(h);for(var p=0;p<c.length;p++){d[p]=c.charCodeAt(p)}if(f==="blob"){h=new Blob([h],{type:l})}break;case"document":var m=new DOMParser;h=m.parseFromString(c,l);break;case"json":h=JSON.parse(c);break;default:h=c;break}window.setTimeout(function(){if(t)t(h);r.manager.itemEnd(e)},0)}catch(t){window.setTimeout(function(){if(n)n(t);r.manager.itemEnd(e);r.manager.itemError(e)},0)}}else{var v=new XMLHttpRequest;v.open("GET",e,true);v.addEventListener("load",function(i){var a=i.target.response;To.add(e,a);if(this.status===200){if(t)t(a);r.manager.itemEnd(e)}else if(this.status===0){console.warn("THREE.FileLoader: HTTP Status 0 received.");if(t)t(a);r.manager.itemEnd(e)}else{if(n)n(i);r.manager.itemEnd(e);r.manager.itemError(e)}},false);if(i!==undefined){v.addEventListener("progress",function(e){i(e)},false)}v.addEventListener("error",function(t){if(n)n(t);r.manager.itemEnd(e)
;r.manager.itemError(e)},false);if(this.responseType!==undefined)v.responseType=this.responseType;if(this.withCredentials!==undefined)v.withCredentials=this.withCredentials;if(v.overrideMimeType)v.overrideMimeType(this.mimeType!==undefined?this.mimeType:"text/plain");for(var g in this.requestHeader){v.setRequestHeader(g,this.requestHeader[g])}v.send(null)}r.manager.itemStart(e);return v},setPath:function(e){this.path=e;return this},setResponseType:function(e){this.responseType=e;return this},setWithCredentials:function(e){this.withCredentials=e;return this},setMimeType:function(e){this.mimeType=e;return this},setRequestHeader:function(e){this.requestHeader=e;return this}});function Ao(e){this.manager=e!==undefined?e:So;this._parser=null}Object.assign(Ao.prototype,{load:function(e,t,i,n){var r=this;var a=[];var s=new Ms;s.image=a;var o=new Eo(this.manager);o.setPath(this.path);o.setResponseType("arraybuffer");function l(l){o.load(e[l],function(e){var i=r._parser(e,true);a[l]={width:i.width,height:i.height,format:i.format,mipmaps:i.mipmaps};u+=1;if(u===6){if(i.mipmapCount===1)s.minFilter=be;s.format=i.format;s.needsUpdate=true;if(t)t(s)}},i,n)}if(Array.isArray(e)){var u=0;for(var c=0,h=e.length;c<h;++c){l(c)}}else{o.load(e,function(e){var i=r._parser(e,true);if(i.isCubemap){var n=i.mipmaps.length/i.mipmapCount;for(var o=0;o<n;o++){a[o]={mipmaps:[]};for(var l=0;l<i.mipmapCount;l++){a[o].mipmaps.push(i.mipmaps[o*i.mipmapCount+l]);a[o].format=i.format;a[o].width=i.width;a[o].height=i.height}}}else{s.image.width=i.width;s.image.height=i.height;s.mipmaps=i.mipmaps}if(i.mipmapCount===1){s.minFilter=be}s.format=i.format;s.needsUpdate=true;if(t)t(s)},i,n)}return s},setPath:function(e){this.path=e;return this}});function Po(e){this.manager=e!==undefined?e:So;this._parser=null}Object.assign(Po.prototype,{load:function(e,t,i,n){var r=this;var a=new Lt;var s=new Eo(this.manager);s.setResponseType("arraybuffer");s.load(e,function(e){var i=r._parser(e);if(!i)return;if(undefined!==i.image){a.image=i.image}else if(undefined!==i.data){a.image.width=i.width;a.image.height=i.height;a.image.data=i.data}a.wrapS=undefined!==i.wrapS?i.wrapS:pe;a.wrapT=undefined!==i.wrapT?i.wrapT:pe;a.magFilter=undefined!==i.magFilter?i.magFilter:be;a.minFilter=undefined!==i.minFilter?i.minFilter:_e;a.anisotropy=undefined!==i.anisotropy?i.anisotropy:1;if(undefined!==i.format){a.format=i.format}if(undefined!==i.type){a.type=i.type}if(undefined!==i.mipmaps){a.mipmaps=i.mipmaps}if(1===i.mipmapCount){a.minFilter=be}a.needsUpdate=true;if(t)t(a,i)},i,n);return a}});function Lo(e){this.manager=e!==undefined?e:So}Object.assign(Lo.prototype,{crossOrigin:"Anonymous",load:function(e,t,i,n){if(e===undefined)e="";if(this.path!==undefined)e=this.path+e;var r=this;var a=To.get(e);if(a!==undefined){r.manager.itemStart(e);setTimeout(function(){if(t)t(a);r.manager.itemEnd(e)},0);return a}var s=document.createElementNS("http://www.w3.org/1999/xhtml","img");s.addEventListener("load",function(){To.add(e,this);if(t)t(this);r.manager.itemEnd(e)},false);s.addEventListener("error",function(t){if(n)n(t);r.manager.itemEnd(e);r.manager.itemError(e)},false);if(e.substr(0,5)!=="data:"){if(this.crossOrigin!==undefined)s.crossOrigin=this.crossOrigin}r.manager.itemStart(e);s.src=e;return s},setCrossOrigin:function(e){this.crossOrigin=e;return this},setPath:function(e){this.path=e;return this}});function Ro(e){this.manager=e!==undefined?e:So}Object.assign(Ro.prototype,{crossOrigin:"Anonymous",load:function(e,t,i,n){var r=new Rt;var a=new Lo(this.manager);a.setCrossOrigin(this.crossOrigin);a.setPath(this.path);var s=0;function o(i){a.load(e[i],function(e){r.images[i]=e;s++;if(s===6){r.needsUpdate=true;if(t)t(r)}},undefined,n)}for(var l=0;l<e.length;++l){o(l)}return r},setCrossOrigin:function(e){this.crossOrigin=e;return this},setPath:function(e){this.path=e;return this}});function Co(e){this.manager=e!==undefined?e:So}Object.assign(Co.prototype,{crossOrigin:"Anonymous",load:function(e,t,i,n){var r=new Lo(this.manager);r.setCrossOrigin(this.crossOrigin);r.setPath(this.path);var a=new wt;a.image=r.load(e,function(){var i=e.search(/\.(jpg|jpeg)$/)>0||e.search(/^data\:image\/jpeg/)===0;a.format=i?ke:Ue;a.needsUpdate=true;if(t!==undefined){t(a)}},i,n);return a},setCrossOrigin:function(e){this.crossOrigin=e;return this},setPath:function(e){this.path=e;return this}});function Oo(e,t){Wr.call(this);this.type="Light";this.color=new bi(e);this.intensity=t!==undefined?t:1;this.receiveShadow=undefined}Oo.prototype=Object.assign(Object.create(Wr.prototype),{constructor:Oo,isLight:true,copy:function(e){Wr.prototype.copy.call(this,e);this.color.copy(e.color);this.intensity=e.intensity;return this},toJSON:function(e){var t=Wr.prototype.toJSON.call(this,e);t.object.color=this.color.getHex();t.object.intensity=this.intensity;if(this.groundColor!==undefined)t.object.groundColor=this.groundColor.getHex();if(this.distance!==undefined)t.object.distance=this.distance;if(this.angle!==undefined)t.object.angle=this.angle;if(this.decay!==undefined)t.object.decay=this.decay;if(this.penumbra!==undefined)t.object.penumbra=this.penumbra;if(this.shadow!==undefined)t.object.shadow=this.shadow.toJSON();return t}});function Do(e,t,i){Oo.call(this,e,i);this.type="HemisphereLight";this.castShadow=undefined;this.position.copy(Wr.DefaultUp);this.updateMatrix();this.groundColor=new bi(t)}Do.prototype=Object.assign(Object.create(Oo.prototype),{constructor:Do,isHemisphereLight:true,copy:function(e){Oo.prototype.copy.call(this,e);this.groundColor.copy(e.groundColor);return this}});function Io(e){this.camera=e;this.bias=0;this.radius=1;this.mapSize=new xt(512,512);this.map=null;this.matrix=new Pt}Object.assign(Io.prototype,{copy:function(e){this.camera=e.camera.clone();this.bias=e.bias;this.radius=e.radius;this.mapSize.copy(e.mapSize);return this},clone:function(){return(new this.constructor).copy(this)},toJSON:function(){var e={};if(this.bias!==0)e.bias=this.bias;if(this.radius!==1)e.radius=this.radius;if(this.mapSize.x!==512||this.mapSize.y!==512)e.mapSize=this.mapSize.toArray();e.camera=this.camera.toJSON(false).object;delete e.camera.matrix;return e}});function ko(){Io.call(this,new qr(50,1,.5,500))}ko.prototype=Object.assign(Object.create(Io.prototype),{constructor:ko,isSpotLightShadow:true,update:function(e){var t=this.camera;var i=bt.RAD2DEG*2*e.angle;var n=this.mapSize.width/this.mapSize.height;var r=e.distance||t.far;if(i!==t.fov||n!==t.aspect||r!==t.far){t.fov=i;t.aspect=n;t.far=r;t.updateProjectionMatrix()}}});function Uo(e,t,i,n,r,a){Oo.call(this,e,t);this.type="SpotLight";this.position.copy(Wr.DefaultUp);this.updateMatrix();this.target=new Wr;Object.defineProperty(this,"power",{get:function(){return this.intensity*Math.PI},set:function(e){this.intensity=e/Math.PI}});this.distance=i!==undefined?i:0;this.angle=n!==undefined?n:Math.PI/3;this.penumbra=r!==undefined?r:0;this.decay=a!==undefined?a:1;this.shadow=new ko}Uo.prototype=Object.assign(Object.create(Oo.prototype),{constructor:Uo,isSpotLight:true,copy:function(e){Oo.prototype.copy.call(this,e);this.distance=e.distance;this.angle=e.angle;this.penumbra=e.penumbra;this.decay=e.decay;this.target=e.target.clone();this.shadow=e.shadow.clone();return this}});function Fo(e,t,i,n){Oo.call(this,e,t);this.type="PointLight";Object.defineProperty(this,"power",{get:function(){return this.intensity*4*Math.PI},set:function(e){this.intensity=e/(4*Math.PI)}});this.distance=i!==undefined?i:0;this.decay=n!==undefined?n:1;this.shadow=new Io(new qr(90,1,.5,500))}Fo.prototype=Object.assign(Object.create(Oo.prototype),{constructor:Fo,isPointLight:true,copy:function(e){Oo.prototype.copy.call(this,e);this.distance=e.distance;this.decay=e.decay;this.shadow=e.shadow.clone();return this}});function No(){Io.call(this,new Yr(-5,5,5,-5,.5,500))}No.prototype=Object.assign(Object.create(Io.prototype),{constructor:No});function Bo(e,t){Oo.call(this,e,t);this.type="DirectionalLight";this.position.copy(Wr.DefaultUp);this.updateMatrix();this.target=new Wr;this.shadow=new No}Bo.prototype=Object.assign(Object.create(Oo.prototype),{constructor:Bo,isDirectionalLight:true,copy:function(e){Oo.prototype.copy.call(this,e);this.target=e.target.clone();this.shadow=e.shadow.clone();return this}});function zo(e,t){Oo.call(this,e,t);this.type="AmbientLight";this.castShadow=undefined}zo.prototype=Object.assign(Object.create(Oo.prototype),{constructor:zo,isAmbientLight:true});function jo(e,t,i,n){Oo.call(this,e,t);this.type="RectAreaLight";this.position.set(0,1,0);this.updateMatrix();this.width=i!==undefined?i:10;this.height=n!==undefined?n:10}jo.prototype=Object.assign(Object.create(Oo.prototype),{constructor:jo,isRectAreaLight:true,copy:function(e){Oo.prototype.copy.call(this,e);this.width=e.width;this.height=e.height;return this},toJSON:function(e){var t=Oo.prototype.toJSON.call(this,e);t.object.width=this.width;t.object.height=this.height;return t}});var Go={arraySlice:function(e,t,i){if(Go.isTypedArray(e)){return new e.constructor(e.subarray(t,i!==undefined?i:e.length))}return e.slice(t,i)},convertArray:function(e,t,i){if(!e||!i&&e.constructor===t)return e;if(typeof t.BYTES_PER_ELEMENT==="number"){return new t(e)}return Array.prototype.slice.call(e)},isTypedArray:function(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)},getKeyframeOrder:function(e){function t(t,i){return e[t]-e[i]}var i=e.length;var n=new Array(i);for(var r=0;r!==i;++r)n[r]=r;n.sort(t);return n},sortedArray:function(e,t,i){var n=e.length;var r=new e.constructor(n);for(var a=0,s=0;s!==n;++a){var o=i[a]*t;for(var l=0;l!==t;++l){r[s++]=e[o+l]}}return r},flattenJSON:function(e,t,i,n){var r=1,a=e[0];while(a!==undefined&&a[n]===undefined){a=e[r++]}if(a===undefined)return;var s=a[n];if(s===undefined)return;if(Array.isArray(s)){do{s=a[n];if(s!==undefined){t.push(a.time);i.push.apply(i,s)}a=e[r++]}while(a!==undefined)}else if(s.toArray!==undefined){do{s=a[n];if(s!==undefined){t.push(a.time);s.toArray(i,i.length)}a=e[r++]}while(a!==undefined)}else{do{s=a[n];if(s!==undefined){t.push(a.time);i.push(s)}a=e[r++]}while(a!==undefined)}}};function Ho(e,t,i,n){this.parameterPositions=e;this._cachedIndex=0;this.resultBuffer=n!==undefined?n:new t.constructor(i);this.sampleValues=t;this.valueSize=i}Object.assign(Ho.prototype,{evaluate:function(e){var t=this.parameterPositions,i=this._cachedIndex,n=t[i],r=t[i-1];e:{t:{var a;i:{n:if(!(e<n)){for(var s=i+2;;){if(n===undefined){if(e<r)break n;i=t.length;this._cachedIndex=i;return this.afterEnd_(i-1,e,r)}if(i===s)break;r=n;n=t[++i];if(e<n){break t}}a=t.length;break i}if(!(e>=r)){var o=t[1];if(e<o){i=2;r=o}for(var s=i-2;;){if(r===undefined){this._cachedIndex=0;return this.beforeStart_(0,e,n)}if(i===s)break;n=r;r=t[--i-1];if(e>=r){break t}}a=i;i=0;break i}break e}while(i<a){var l=i+a>>>1;if(e<t[l]){a=l}else{i=l+1}}n=t[i];r=t[i-1];if(r===undefined){this._cachedIndex=0;return this.beforeStart_(0,e,n)}if(n===undefined){i=t.length;this._cachedIndex=i;return this.afterEnd_(i-1,r,e)}}this._cachedIndex=i;this.intervalChanged_(i,r,n)}return this.interpolate_(i,r,e,n)},settings:null,DefaultSettings_:{},getSettings_:function(){return this.settings||this.DefaultSettings_},copySampleValue_:function(e){var t=this.resultBuffer,i=this.sampleValues,n=this.valueSize,r=e*n;for(var a=0;a!==n;++a){t[a]=i[r+a]}return t},interpolate_:function(e,t,i,n){throw new Error("call to abstract method")},intervalChanged_:function(e,t,i){}});Object.assign(Ho.prototype,{beforeStart_:Ho.prototype.copySampleValue_,afterEnd_:Ho.prototype.copySampleValue_});function Vo(e,t,i,n){Ho.call(this,e,t,i,n);this._weightPrev=-0;this._offsetPrev=-0;this._weightNext=-0;this._offsetNext=-0}Vo.prototype=Object.assign(Object.create(Ho.prototype),{constructor:Vo,DefaultSettings_:{endingStart:nt,endingEnd:nt},intervalChanged_:function(e,t,i){var n=this.parameterPositions,r=e-2,a=e+1,s=n[r],o=n[a];if(s===undefined){switch(this.getSettings_().endingStart){case rt:r=e;s=2*t-i;break;case at:r=n.length-2;s=t+n[r]-n[r+1];break;default:r=e;s=i}}if(o===undefined){switch(this.getSettings_().endingEnd){case rt:a=e;o=2*i-t;break;case at:a=1;o=i+n[1]-n[0];break;default:a=e-1;o=t}}var l=(i-t)*.5,u=this.valueSize;this._weightPrev=l/(t-s);this._weightNext=l/(o-i);this._offsetPrev=r*u;this._offsetNext=a*u},interpolate_:function(e,t,i,n){var r=this.resultBuffer,a=this.sampleValues,s=this.valueSize,o=e*s,l=o-s,u=this._offsetPrev,c=this._offsetNext,h=this._weightPrev,f=this._weightNext,d=(i-t)/(n-t),p=d*d,m=p*d;var v=-h*m+2*h*p-h*d;var g=(1+h)*m+(-1.5-2*h)*p+(-.5+h)*d+1;var y=(-1-f)*m+(1.5+f)*p+.5*d;var b=f*m-f*p;for(var x=0;x!==s;++x){r[x]=v*a[u+x]+g*a[l+x]+y*a[o+x]+b*a[c+x]}return r}});function Wo(e,t,i,n){Ho.call(this,e,t,i,n)}Wo.prototype=Object.assign(Object.create(Ho.prototype),{constructor:Wo,interpolate_:function(e,t,i,n){var r=this.resultBuffer,a=this.sampleValues,s=this.valueSize,o=e*s,l=o-s,u=(i-t)/(n-t),c=1-u;for(var h=0;h!==s;++h){r[h]=a[l+h]*c+a[o+h]*u}return r}});function Xo(e,t,i,n){Ho.call(this,e,t,i,n)}Xo.prototype=Object.assign(Object.create(Ho.prototype),{constructor:Xo,interpolate_:function(e,t,i,n){return this.copySampleValue_(e-1)}});var Yo;Yo={TimeBufferType:Float32Array,ValueBufferType:Float32Array,DefaultInterpolation:tt,InterpolantFactoryMethodDiscrete:function(e){return new Xo(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodLinear:function(e){return new Wo(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodSmooth:function(e){return new Vo(this.times,this.values,this.getValueSize(),e)},setInterpolation:function(e){var t;switch(e){case et:t=this.InterpolantFactoryMethodDiscrete;break;case tt:t=this.InterpolantFactoryMethodLinear;break;case it:t=this.InterpolantFactoryMethodSmooth;break}if(t===undefined){var i="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===undefined){if(e!==this.DefaultInterpolation){this.setInterpolation(this.DefaultInterpolation)}else{throw new Error(i)}}console.warn("THREE.KeyframeTrackPrototype:",i);return}this.createInterpolant=t},getInterpolation:function(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return et;case this.InterpolantFactoryMethodLinear:return tt;case this.InterpolantFactoryMethodSmooth:return it}},getValueSize:function(){return this.values.length/this.times.length},shift:function(e){if(e!==0){var t=this.times;for(var i=0,n=t.length;i!==n;++i){t[i]+=e}}return this},scale:function(e){if(e!==1){var t=this.times;for(var i=0,n=t.length;i!==n;++i){t[i]*=e}}return this},trim:function(e,t){var i=this.times,n=i.length,r=0,a=n-1;while(r!==n&&i[r]<e)++r;while(a!==-1&&i[a]>t)--a;++a;if(r!==0||a!==n){if(r>=a)a=Math.max(a,1),r=a-1;var s=this.getValueSize();this.times=Go.arraySlice(i,r,a);this.values=Go.arraySlice(this.values,r*s,a*s)}return this},validate:function(){var e=true;var t=this.getValueSize();if(t-Math.floor(t)!==0){console.error("THREE.KeyframeTrackPrototype: Invalid value size in track.",this);e=false}var i=this.times,n=this.values,r=i.length;if(r===0){console.error("THREE.KeyframeTrackPrototype: Track is empty.",this);e=false}var a=null;for(var s=0;s!==r;s++){var o=i[s];if(typeof o==="number"&&isNaN(o)){console.error("THREE.KeyframeTrackPrototype: Time is not a valid number.",this,s,o);e=false;break}if(a!==null&&a>o){console.error("THREE.KeyframeTrackPrototype: Out of order keys.",this,s,o,a);e=false;break}a=o}if(n!==undefined){if(Go.isTypedArray(n)){for(var s=0,l=n.length;s!==l;++s){var u=n[s];if(isNaN(u)){console.error("THREE.KeyframeTrackPrototype: Value is not a valid number.",this,s,u);e=false;break}}}}return e},optimize:function(){var e=this.times,t=this.values,i=this.getValueSize(),n=this.getInterpolation()===it,r=1,a=e.length-1;for(var s=1;s<a;++s){var o=false;var l=e[s];var u=e[s+1];if(l!==u&&(s!==1||l!==l[0])){if(!n){var c=s*i,h=c-i,f=c+i;for(var d=0;d!==i;++d){var p=t[c+d];if(p!==t[h+d]||p!==t[f+d]){o=true;break}}}else o=true}if(o){if(s!==r){e[r]=e[s];var m=s*i,v=r*i;for(var d=0;d!==i;++d)t[v+d]=t[m+d]}++r}}if(a>0){e[r]=e[a];for(var m=a*i,v=r*i,d=0;d!==i;++d)t[v+d]=t[m+d];++r}if(r!==e.length){this.times=Go.arraySlice(e,0,r);this.values=Go.arraySlice(t,0,r*i)}return this}};function qo(e,t,i,n){if(e===undefined)throw new Error("track name is undefined");if(t===undefined||t.length===0){throw new Error("no keyframes in track named "+e)}this.name=e;this.times=Go.convertArray(t,this.TimeBufferType);this.values=Go.convertArray(i,this.ValueBufferType);this.setInterpolation(n||this.DefaultInterpolation);this.validate();this.optimize()}function Zo(e,t,i,n){qo.call(this,e,t,i,n)}Zo.prototype=Object.assign(Object.create(Yo),{constructor:Zo,ValueTypeName:"vector"});function Jo(e,t,i,n){Ho.call(this,e,t,i,n)}Jo.prototype=Object.assign(Object.create(Ho.prototype),{constructor:Jo,interpolate_:function(e,t,i,n){var r=this.resultBuffer,a=this.sampleValues,s=this.valueSize,o=e*s,l=(i-t)/(n-t);for(var u=o+s;o!==u;o+=4){Et.slerpFlat(r,0,a,o-s,a,o,l)}return r}});function Ko(e,t,i,n){qo.call(this,e,t,i,n)}Ko.prototype=Object.assign(Object.create(Yo),{constructor:Ko,ValueTypeName:"quaternion",DefaultInterpolation:tt,InterpolantFactoryMethodLinear:function(e){return new Jo(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodSmooth:undefined});function Qo(e,t,i,n){qo.call(this,e,t,i,n)}Qo.prototype=Object.assign(Object.create(Yo),{constructor:Qo,ValueTypeName:"number"});function $o(e,t,i,n){qo.call(this,e,t,i,n)}$o.prototype=Object.assign(Object.create(Yo),{constructor:$o,ValueTypeName:"string",ValueBufferType:Array,DefaultInterpolation:et,InterpolantFactoryMethodLinear:undefined,InterpolantFactoryMethodSmooth:undefined});function el(e,t,i){qo.call(this,e,t,i)}el.prototype=Object.assign(Object.create(Yo),{constructor:el,ValueTypeName:"bool",ValueBufferType:Array,DefaultInterpolation:et,InterpolantFactoryMethodLinear:undefined,InterpolantFactoryMethodSmooth:undefined});function tl(e,t,i,n){qo.call(this,e,t,i,n)}tl.prototype=Object.assign(Object.create(Yo),{constructor:tl,ValueTypeName:"color"});function il(e,t,i,n){qo.apply(this,arguments)}il.prototype=Yo;Yo.constructor=il;Object.assign(il,{parse:function(e){if(e.type===undefined){throw new Error("track type undefined, can not parse")}var t=il._getTrackTypeForValueTypeName(e.type);if(e.times===undefined){var i=[],n=[];Go.flattenJSON(e.keys,i,n,"value");e.times=i;e.values=n}if(t.parse!==undefined){return t.parse(e)}else{return new t(e.name,e.times,e.values,e.interpolation)}},toJSON:function(e){var t=e.constructor;var i;if(t.toJSON!==undefined){i=t.toJSON(e)}else{i={name:e.name,times:Go.convertArray(e.times,Array),values:Go.convertArray(e.values,Array)};var n=e.getInterpolation();if(n!==e.DefaultInterpolation){i.interpolation=n}}i.type=e.ValueTypeName;return i},_getTrackTypeForValueTypeName:function(e){switch(e.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Qo;case"vector":case"vector2":case"vector3":case"vector4":return Zo;case"color":return tl;case"quaternion":return Ko;case"bool":case"boolean":return el;case"string":return $o}throw new Error("Unsupported typeName: "+e)}});function nl(e,t,i){this.name=e;this.tracks=i;this.duration=t!==undefined?t:-1;this.uuid=bt.generateUUID();if(this.duration<0){this.resetDuration()}this.optimize()}Object.assign(nl,{parse:function(e){var t=[],i=e.tracks,n=1/(e.fps||1);for(var r=0,a=i.length;r!==a;++r){t.push(il.parse(i[r]).scale(n))}return new nl(e.name,e.duration,t)},toJSON:function(e){var t=[],i=e.tracks;var n={name:e.name,duration:e.duration,tracks:t};for(var r=0,a=i.length;r!==a;++r){t.push(il.toJSON(i[r]))}return n},CreateFromMorphTargetSequence:function(e,t,i,n){var r=t.length;var a=[];for(var s=0;s<r;s++){var o=[];var l=[];o.push((s+r-1)%r,s,(s+1)%r);l.push(0,1,0);var u=Go.getKeyframeOrder(o);o=Go.sortedArray(o,1,u);l=Go.sortedArray(l,1,u);if(!n&&o[0]===0){o.push(r);l.push(l[0])}a.push(new Qo(".morphTargetInfluences["+t[s].name+"]",o,l).scale(1/i))}return new nl(e,-1,a)},findByName:function(e,t){var i=e;if(!Array.isArray(e)){var n=e;i=n.geometry&&n.geometry.animations||n.animations}for(var r=0;r<i.length;r++){if(i[r].name===t){return i[r]}}return null},CreateClipsFromMorphTargetSequences:function(e,t,i){var n={};var r=/^([\w-]*?)([\d]+)$/;for(var a=0,s=e.length;a<s;a++){var o=e[a];var l=o.name.match(r);if(l&&l.length>1){var u=l[1];var c=n[u];if(!c){n[u]=c=[]}c.push(o)}}var h=[];for(var u in n){h.push(nl.CreateFromMorphTargetSequence(u,n[u],t,i))}return h},parseAnimation:function(e,t){if(!e){console.error("THREE.AnimationClip: No animation in JSONLoader data.");return null}var i=function(e,t,i,n,r){if(i.length!==0){var a=[];var s=[];Go.flattenJSON(i,a,s,n);if(a.length!==0){r.push(new e(t,a,s))}}};var n=[];var r=e.name||"default";var a=e.length||-1;var s=e.fps||30;var o=e.hierarchy||[];for(var l=0;l<o.length;l++){var u=o[l].keys;if(!u||u.length===0)continue;if(u[0].morphTargets){var c={};for(var h=0;h<u.length;h++){if(u[h].morphTargets){for(var f=0;f<u[h].morphTargets.length;f++){c[u[h].morphTargets[f]]=-1}}}for(var d in c){var p=[];var m=[];for(var f=0;f!==u[h].morphTargets.length;++f){var v=u[h];p.push(v.time);m.push(v.morphTarget===d?1:0)}n.push(new Qo(".morphTargetInfluence["+d+"]",p,m))}a=c.length*(s||1)}else{var g=".bones["+t[l].name+"]";i(Zo,g+".position",u,"pos",n);i(Ko,g+".quaternion",u,"rot",n);i(Zo,g+".scale",u,"scl",n)}}if(n.length===0){return null}var y=new nl(r,a,n);return y}});Object.assign(nl.prototype,{resetDuration:function(){var e=this.tracks,t=0;for(var i=0,n=e.length;i!==n;++i){var r=this.tracks[i];t=Math.max(t,r.times[r.times.length-1])}this.duration=t},trim:function(){for(var e=0;e<this.tracks.length;e++){this.tracks[e].trim(0,this.duration)}return this},optimize:function(){for(var e=0;e<this.tracks.length;e++){this.tracks[e].optimize()}return this}});function rl(e){this.manager=e!==undefined?e:So;this.textures={}}Object.assign(rl.prototype,{load:function(e,t,i,n){var r=this;var a=new Eo(r.manager);a.load(e,function(e){t(r.parse(JSON.parse(e)))},i,n)},setTextures:function(e){this.textures=e},parse:function(e){var t=this.textures;function i(e){if(t[e]===undefined){console.warn("THREE.MaterialLoader: Undefined texture",e)}return t[e]}var n=new wo[e.type];if(e.uuid!==undefined)n.uuid=e.uuid;if(e.name!==undefined)n.name=e.name;if(e.color!==undefined)n.color.setHex(e.color);if(e.roughness!==undefined)n.roughness=e.roughness;if(e.metalness!==undefined)n.metalness=e.metalness;if(e.emissive!==undefined)n.emissive.setHex(e.emissive);if(e.specular!==undefined)n.specular.setHex(e.specular);if(e.shininess!==undefined)n.shininess=e.shininess;if(e.clearCoat!==undefined)n.clearCoat=e.clearCoat;if(e.clearCoatRoughness!==undefined)n.clearCoatRoughness=e.clearCoatRoughness;if(e.uniforms!==undefined)n.uniforms=e.uniforms;if(e.vertexShader!==undefined)n.vertexShader=e.vertexShader;if(e.fragmentShader!==undefined)n.fragmentShader=e.fragmentShader;if(e.vertexColors!==undefined)n.vertexColors=e.vertexColors;if(e.fog!==undefined)n.fog=e.fog;if(e.flatShading!==undefined)n.flatShading=e.flatShading;if(e.blending!==undefined)n.blending=e.blending;if(e.side!==undefined)n.side=e.side;if(e.opacity!==undefined)n.opacity=e.opacity;if(e.transparent!==undefined)n.transparent=e.transparent;if(e.alphaTest!==undefined)n.alphaTest=e.alphaTest;if(e.depthTest!==undefined)n.depthTest=e.depthTest;if(e.depthWrite!==undefined)n.depthWrite=e.depthWrite;if(e.colorWrite!==undefined)n.colorWrite=e.colorWrite;if(e.wireframe!==undefined)n.wireframe=e.wireframe;if(e.wireframeLinewidth!==undefined)n.wireframeLinewidth=e.wireframeLinewidth;if(e.wireframeLinecap!==undefined)n.wireframeLinecap=e.wireframeLinecap;if(e.wireframeLinejoin!==undefined)n.wireframeLinejoin=e.wireframeLinejoin;if(e.skinning!==undefined)n.skinning=e.skinning;if(e.morphTargets!==undefined)n.morphTargets=e.morphTargets;if(e.dithering!==undefined)n.dithering=e.dithering;if(e.visible!==undefined)n.visible=e.visible;if(e.userData!==undefined)n.userData=e.userData;if(e.shading!==undefined)n.flatShading=e.shading===1;if(e.size!==undefined)n.size=e.size;if(e.sizeAttenuation!==undefined)n.sizeAttenuation=e.sizeAttenuation;if(e.map!==undefined)n.map=i(e.map);if(e.alphaMap!==undefined){n.alphaMap=i(e.alphaMap);n.transparent=true}if(e.bumpMap!==undefined)n.bumpMap=i(e.bumpMap);if(e.bumpScale!==undefined)n.bumpScale=e.bumpScale;if(e.normalMap!==undefined)n.normalMap=i(e.normalMap);if(e.normalScale!==undefined){var r=e.normalScale;if(Array.isArray(r)===false){r=[r,r]}n.normalScale=(new xt).fromArray(r)}if(e.displacementMap!==undefined)n.displacementMap=i(e.displacementMap);if(e.displacementScale!==undefined)n.displacementScale=e.displacementScale;if(e.displacementBias!==undefined)n.displacementBias=e.displacementBias;if(e.roughnessMap!==undefined)n.roughnessMap=i(e.roughnessMap);if(e.metalnessMap!==undefined)n.metalnessMap=i(e.metalnessMap);if(e.emissiveMap!==undefined)n.emissiveMap=i(e.emissiveMap);if(e.emissiveIntensity!==undefined)n.emissiveIntensity=e.emissiveIntensity;if(e.specularMap!==undefined)n.specularMap=i(e.specularMap);if(e.envMap!==undefined)n.envMap=i(e.envMap);if(e.reflectivity!==undefined)n.reflectivity=e.reflectivity;if(e.lightMap!==undefined)n.lightMap=i(e.lightMap);if(e.lightMapIntensity!==undefined)n.lightMapIntensity=e.lightMapIntensity;if(e.aoMap!==undefined)n.aoMap=i(e.aoMap);if(e.aoMapIntensity!==undefined)n.aoMapIntensity=e.aoMapIntensity;if(e.gradientMap!==undefined)n.gradientMap=i(e.gradientMap);return n}});function al(e){this.manager=e!==undefined?e:So}Object.assign(al.prototype,{load:function(e,t,i,n){var r=this;var a=new Eo(r.manager);a.load(e,function(e){t(r.parse(JSON.parse(e)))},i,n)},parse:function(e){var t=new ha;var i=e.data.index;if(i!==undefined){var n=new sl[i.type](i.array);t.setIndex(new $r(n,1))}var r=e.data.attributes;for(var a in r){var s=r[a];var n=new sl[s.type](s.array);t.addAttribute(a,new $r(n,s.itemSize,s.normalized))}var o=e.data.groups||e.data.drawcalls||e.data.offsets;if(o!==undefined){for(var l=0,u=o.length;l!==u;++l){var c=o[l];t.addGroup(c.start,c.count,c.materialIndex)}}var h=e.data.boundingSphere;if(h!==undefined){var f=new At;if(h.center!==undefined){f.fromArray(h.center)}t.boundingSphere=new Ur(f,h.radius)}return t}});var sl={Int8Array:Int8Array,Uint8Array:Uint8Array,Uint8ClampedArray:typeof Uint8ClampedArray!=="undefined"?Uint8ClampedArray:Uint8Array,Int16Array:Int16Array,Uint16Array:Uint16Array,Int32Array:Int32Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array};function ol(){this.onLoadStart=function(){};this.onLoadProgress=function(){};this.onLoadComplete=function(){}}ol.Handlers={handlers:[],add:function(e,t){this.handlers.push(e,t)},get:function(e){var t=this.handlers;for(var i=0,n=t.length;i<n;i+=2){var r=t[i];var a=t[i+1];if(r.test(e)){return a}}return null}};Object.assign(ol.prototype,{crossOrigin:undefined,extractUrlBase:function(e){var t=e.split("/");if(t.length===1)return"./";t.pop();return t.join("/")+"/"},initMaterials:function(e,t,i){var n=[];for(var r=0;r<e.length;++r){n[r]=this.createMaterial(e[r],t,i)}return n},createMaterial:function(){var e={NoBlending:_,NormalBlending:w,AdditiveBlending:T,SubtractiveBlending:M,MultiplyBlending:S,CustomBlending:E};var t=new bi;var i=new Co;var n=new rl;return function r(a,s,o){var l={};function u(e,t,n,r,a){var u=s+e;var c=ol.Handlers.get(u);var h;if(c!==null){h=c.load(u)}else{i.setCrossOrigin(o);h=i.load(u)}if(t!==undefined){h.repeat.fromArray(t);if(t[0]!==1)h.wrapS=de;if(t[1]!==1)h.wrapT=de}if(n!==undefined){h.offset.fromArray(n)}if(r!==undefined){if(r[0]==="repeat")h.wrapS=de;if(r[0]==="mirror")h.wrapS=me;if(r[1]==="repeat")h.wrapT=de;if(r[1]==="mirror")h.wrapT=me}if(a!==undefined){h.anisotropy=a}var f=bt.generateUUID();l[f]=h;return f}var c={uuid:bt.generateUUID(),type:"MeshLambertMaterial"};for(var h in a){var f=a[h];switch(h){case"DbgColor":case"DbgIndex":case"opticalDensity":case"illumination":break;case"DbgName":c.name=f;break;case"blending":c.blending=e[f];break;case"colorAmbient":case"mapAmbient":console.warn("THREE.Loader.createMaterial:",h,"is no longer supported.");break;case"colorDiffuse":c.color=t.fromArray(f).getHex();break;case"colorSpecular":c.specular=t.fromArray(f).getHex();break;case"colorEmissive":c.emissive=t.fromArray(f).getHex();break;case"specularCoef":c.shininess=f;break;case"shading":if(f.toLowerCase()==="basic")c.type="MeshBasicMaterial";if(f.toLowerCase()==="phong")c.type="MeshPhongMaterial";if(f.toLowerCase()==="standard")c.type="MeshStandardMaterial";break;case"mapDiffuse":c.map=u(f,a.mapDiffuseRepeat,a.mapDiffuseOffset,a.mapDiffuseWrap,a.mapDiffuseAnisotropy);break;case"mapDiffuseRepeat":case"mapDiffuseOffset":case"mapDiffuseWrap":case"mapDiffuseAnisotropy":break;case"mapEmissive":c.emissiveMap=u(f,a.mapEmissiveRepeat,a.mapEmissiveOffset,a.mapEmissiveWrap,a.mapEmissiveAnisotropy);break;case"mapEmissiveRepeat":case"mapEmissiveOffset":case"mapEmissiveWrap":case"mapEmissiveAnisotropy":break;case"mapLight":c.lightMap=u(f,a.mapLightRepeat,a.mapLightOffset,a.mapLightWrap,a.mapLightAnisotropy);break;case"mapLightRepeat":case"mapLightOffset":case"mapLightWrap":case"mapLightAnisotropy":break;case"mapAO":c.aoMap=u(f,a.mapAORepeat,a.mapAOOffset,a.mapAOWrap,a.mapAOAnisotropy);break;case"mapAORepeat":case"mapAOOffset":case"mapAOWrap":case"mapAOAnisotropy":break;case"mapBump":c.bumpMap=u(f,a.mapBumpRepeat,a.mapBumpOffset,a.mapBumpWrap,a.mapBumpAnisotropy);break;case"mapBumpScale":c.bumpScale=f;break;case"mapBumpRepeat":case"mapBumpOffset":case"mapBumpWrap":case"mapBumpAnisotropy":break;case"mapNormal":c.normalMap=u(f,a.mapNormalRepeat,a.mapNormalOffset,a.mapNormalWrap,a.mapNormalAnisotropy);break;case"mapNormalFactor":c.normalScale=[f,f];break;case"mapNormalRepeat":case"mapNormalOffset":case"mapNormalWrap":case"mapNormalAnisotropy":break;case"mapSpecular":c.specularMap=u(f,a.mapSpecularRepeat,a.mapSpecularOffset,a.mapSpecularWrap,a.mapSpecularAnisotropy);break;case"mapSpecularRepeat":case"mapSpecularOffset":case"mapSpecularWrap":case"mapSpecularAnisotropy":break;case"mapMetalness":c.metalnessMap=u(f,a.mapMetalnessRepeat,a.mapMetalnessOffset,a.mapMetalnessWrap,a.mapMetalnessAnisotropy);break;case"mapMetalnessRepeat":case"mapMetalnessOffset":case"mapMetalnessWrap":case"mapMetalnessAnisotropy":break;case"mapRoughness":c.roughnessMap=u(f,a.mapRoughnessRepeat,a.mapRoughnessOffset,a.mapRoughnessWrap,a.mapRoughnessAnisotropy);break;case"mapRoughnessRepeat":case"mapRoughnessOffset":case"mapRoughnessWrap":case"mapRoughnessAnisotropy":break;case"mapAlpha":c.alphaMap=u(f,a.mapAlphaRepeat,a.mapAlphaOffset,a.mapAlphaWrap,a.mapAlphaAnisotropy);break;case"mapAlphaRepeat":case"mapAlphaOffset":case"mapAlphaWrap":case"mapAlphaAnisotropy":break;case"flipSided":c.side=p;break;case"doubleSided":c.side=m;break;case"transparency":console.warn("THREE.Loader.createMaterial: transparency has been renamed to opacity");c.opacity=f;break;case"depthTest":case"depthWrite":case"colorWrite":case"opacity":case"reflectivity":case"transparent":case"visible":case"wireframe":c[h]=f;break;case"vertexColors":if(f===true)c.vertexColors=x;if(f==="face")c.vertexColors=b;break;default:console.error("THREE.Loader.createMaterial: Unsupported",h,f);break}}if(c.type==="MeshBasicMaterial")delete c.emissive;if(c.type!=="MeshPhongMaterial")delete c.specular;if(c.opacity<1)c.transparent=true;n.setTextures(l);return n.parse(c)}}()});function ll(e){if(typeof e==="boolean"){console.warn("THREE.JSONLoader: showStatus parameter has been removed from constructor.");e=undefined}this.manager=e!==undefined?e:So;this.withCredentials=false}Object.assign(ll.prototype,{load:function(e,t,i,n){var r=this;var a=this.texturePath&&typeof this.texturePath==="string"?this.texturePath:ol.prototype.extractUrlBase(e);var s=new Eo(this.manager);s.setWithCredentials(this.withCredentials);s.load(e,function(i){var n=JSON.parse(i);var s=n.metadata;if(s!==undefined){var o=s.type;if(o!==undefined){
if(o.toLowerCase()==="object"){console.error("THREE.JSONLoader: "+e+" should be loaded with THREE.ObjectLoader instead.");return}if(o.toLowerCase()==="scene"){console.error("THREE.JSONLoader: "+e+" should be loaded with THREE.SceneLoader instead.");return}}}var l=r.parse(n,a);t(l.geometry,l.materials)},i,n)},setTexturePath:function(e){this.texturePath=e},parse:function(){function e(e,t){function i(e,t){return e&1<<t}var n,r,a,s,o,l,u,c,h,f,d,p,m,v,g,y,b,x,_,w,T,M,S,E,A,P,L,R=e.faces,C=e.vertices,O=e.normals,D=e.colors,I=e.scale,k=0;if(e.uvs!==undefined){for(n=0;n<e.uvs.length;n++){if(e.uvs[n].length)k++}for(n=0;n<k;n++){t.faceVertexUvs[n]=[]}}s=0;o=C.length;while(s<o){x=new At;x.x=C[s++]*I;x.y=C[s++]*I;x.z=C[s++]*I;t.vertices.push(x)}s=0;o=R.length;while(s<o){f=R[s++];d=i(f,0);p=i(f,1);m=i(f,3);v=i(f,4);g=i(f,5);y=i(f,6);b=i(f,7);if(d){w=new Zr;w.a=R[s];w.b=R[s+1];w.c=R[s+3];T=new Zr;T.a=R[s+1];T.b=R[s+2];T.c=R[s+3];s+=4;if(p){h=R[s++];w.materialIndex=h;T.materialIndex=h}a=t.faces.length;if(m){for(n=0;n<k;n++){E=e.uvs[n];t.faceVertexUvs[n][a]=[];t.faceVertexUvs[n][a+1]=[];for(r=0;r<4;r++){c=R[s++];P=E[c*2];L=E[c*2+1];A=new xt(P,L);if(r!==2)t.faceVertexUvs[n][a].push(A);if(r!==0)t.faceVertexUvs[n][a+1].push(A)}}}if(v){u=R[s++]*3;w.normal.set(O[u++],O[u++],O[u]);T.normal.copy(w.normal)}if(g){for(n=0;n<4;n++){u=R[s++]*3;S=new At(O[u++],O[u++],O[u]);if(n!==2)w.vertexNormals.push(S);if(n!==0)T.vertexNormals.push(S)}}if(y){l=R[s++];M=D[l];w.color.setHex(M);T.color.setHex(M)}if(b){for(n=0;n<4;n++){l=R[s++];M=D[l];if(n!==2)w.vertexColors.push(new bi(M));if(n!==0)T.vertexColors.push(new bi(M))}}t.faces.push(w);t.faces.push(T)}else{_=new Zr;_.a=R[s++];_.b=R[s++];_.c=R[s++];if(p){h=R[s++];_.materialIndex=h}a=t.faces.length;if(m){for(n=0;n<k;n++){E=e.uvs[n];t.faceVertexUvs[n][a]=[];for(r=0;r<3;r++){c=R[s++];P=E[c*2];L=E[c*2+1];A=new xt(P,L);t.faceVertexUvs[n][a].push(A)}}}if(v){u=R[s++]*3;_.normal.set(O[u++],O[u++],O[u])}if(g){for(n=0;n<3;n++){u=R[s++]*3;S=new At(O[u++],O[u++],O[u]);_.vertexNormals.push(S)}}if(y){l=R[s++];_.color.setHex(D[l])}if(b){for(n=0;n<3;n++){l=R[s++];_.vertexColors.push(new bi(D[l]))}}t.faces.push(_)}}}function t(e,t){var i=e.influencesPerVertex!==undefined?e.influencesPerVertex:2;if(e.skinWeights){for(var n=0,r=e.skinWeights.length;n<r;n+=i){var a=e.skinWeights[n];var s=i>1?e.skinWeights[n+1]:0;var o=i>2?e.skinWeights[n+2]:0;var l=i>3?e.skinWeights[n+3]:0;t.skinWeights.push(new Tt(a,s,o,l))}}if(e.skinIndices){for(var n=0,r=e.skinIndices.length;n<r;n+=i){var u=e.skinIndices[n];var c=i>1?e.skinIndices[n+1]:0;var h=i>2?e.skinIndices[n+2]:0;var f=i>3?e.skinIndices[n+3]:0;t.skinIndices.push(new Tt(u,c,h,f))}}t.bones=e.bones;if(t.bones&&t.bones.length>0&&(t.skinWeights.length!==t.skinIndices.length||t.skinIndices.length!==t.vertices.length)){console.warn("When skinning, number of vertices ("+t.vertices.length+"), skinIndices ("+t.skinIndices.length+"), and skinWeights ("+t.skinWeights.length+") should match.")}}function i(e,t){var i=e.scale;if(e.morphTargets!==undefined){for(var n=0,r=e.morphTargets.length;n<r;n++){t.morphTargets[n]={};t.morphTargets[n].name=e.morphTargets[n].name;t.morphTargets[n].vertices=[];var a=t.morphTargets[n].vertices;var s=e.morphTargets[n].vertices;for(var o=0,l=s.length;o<l;o+=3){var u=new At;u.x=s[o]*i;u.y=s[o+1]*i;u.z=s[o+2]*i;a.push(u)}}}if(e.morphColors!==undefined&&e.morphColors.length>0){console.warn('THREE.JSONLoader: "morphColors" no longer supported. Using them as face colors.');var c=t.faces;var h=e.morphColors[0].colors;for(var n=0,r=c.length;n<r;n++){c[n].color.fromArray(h,n*3)}}}function n(e,t){var i=[];var n=[];if(e.animation!==undefined){n.push(e.animation)}if(e.animations!==undefined){if(e.animations.length){n=n.concat(e.animations)}else{n.push(e.animations)}}for(var r=0;r<n.length;r++){var a=nl.parseAnimation(n[r],t.bones);if(a)i.push(a)}if(t.morphTargets){var s=nl.CreateClipsFromMorphTargetSequences(t.morphTargets,10);i=i.concat(s)}if(i.length>0)t.animations=i}return function(r,a){if(r.data!==undefined){r=r.data}if(r.scale!==undefined){r.scale=1/r.scale}else{r.scale=1}var s=new Qr;e(r,s);t(r,s);i(r,s);n(r,s);s.computeFaceNormals();s.computeBoundingSphere();if(r.materials===undefined||r.materials.length===0){return{geometry:s}}else{var o=ol.prototype.initMaterials(r.materials,a,this.crossOrigin);return{geometry:s,materials:o}}}}()});function ul(e){this.manager=e!==undefined?e:So;this.texturePath=""}Object.assign(ul.prototype,{load:function(e,t,i,n){if(this.texturePath===""){this.texturePath=e.substring(0,e.lastIndexOf("/")+1)}var r=this;var a=new Eo(r.manager);a.load(e,function(i){var a=null;try{a=JSON.parse(i)}catch(t){if(n!==undefined)n(t);console.error("THREE:ObjectLoader: Can't parse "+e+".",t.message);return}var s=a.metadata;if(s===undefined||s.type===undefined||s.type.toLowerCase()==="geometry"){console.error("THREE.ObjectLoader: Can't load "+e+". Use THREE.JSONLoader instead.");return}r.parse(a,t)},i,n)},setTexturePath:function(e){this.texturePath=e},setCrossOrigin:function(e){this.crossOrigin=e},parse:function(e,t){var i=this.parseGeometries(e.geometries);var n=this.parseImages(e.images,function(){if(t!==undefined)t(s)});var r=this.parseTextures(e.textures,n);var a=this.parseMaterials(e.materials,r);var s=this.parseObject(e.object,i,a);if(e.animations){s.animations=this.parseAnimations(e.animations)}if(e.images===undefined||e.images.length===0){if(t!==undefined)t(s)}return s},parseGeometries:function(e){var t={};if(e!==undefined){var i=new ll;var n=new al;for(var r=0,a=e.length;r<a;r++){var s;var o=e[r];switch(o.type){case"PlaneGeometry":case"PlaneBufferGeometry":s=new ho[o.type](o.width,o.height,o.widthSegments,o.heightSegments);break;case"BoxGeometry":case"BoxBufferGeometry":case"CubeGeometry":s=new ho[o.type](o.width,o.height,o.depth,o.widthSegments,o.heightSegments,o.depthSegments);break;case"CircleGeometry":case"CircleBufferGeometry":s=new ho[o.type](o.radius,o.segments,o.thetaStart,o.thetaLength);break;case"CylinderGeometry":case"CylinderBufferGeometry":s=new ho[o.type](o.radiusTop,o.radiusBottom,o.height,o.radialSegments,o.heightSegments,o.openEnded,o.thetaStart,o.thetaLength);break;case"ConeGeometry":case"ConeBufferGeometry":s=new ho[o.type](o.radius,o.height,o.radialSegments,o.heightSegments,o.openEnded,o.thetaStart,o.thetaLength);break;case"SphereGeometry":case"SphereBufferGeometry":s=new ho[o.type](o.radius,o.widthSegments,o.heightSegments,o.phiStart,o.phiLength,o.thetaStart,o.thetaLength);break;case"DodecahedronGeometry":case"IcosahedronGeometry":case"OctahedronGeometry":case"TetrahedronGeometry":s=new ho[o.type](o.radius,o.detail);break;case"RingGeometry":case"RingBufferGeometry":s=new ho[o.type](o.innerRadius,o.outerRadius,o.thetaSegments,o.phiSegments,o.thetaStart,o.thetaLength);break;case"TorusGeometry":case"TorusBufferGeometry":s=new ho[o.type](o.radius,o.tube,o.radialSegments,o.tubularSegments,o.arc);break;case"TorusKnotGeometry":case"TorusKnotBufferGeometry":s=new ho[o.type](o.radius,o.tube,o.tubularSegments,o.radialSegments,o.p,o.q);break;case"LatheGeometry":case"LatheBufferGeometry":s=new ho[o.type](o.points,o.segments,o.phiStart,o.phiLength);break;case"BufferGeometry":s=n.parse(o);break;case"Geometry":s=i.parse(o,this.texturePath).geometry;break;default:console.warn('THREE.ObjectLoader: Unsupported geometry type "'+o.type+'"');continue}s.uuid=o.uuid;if(o.name!==undefined)s.name=o.name;t[o.uuid]=s}}return t},parseMaterials:function(e,t){var i={};if(e!==undefined){var n=new rl;n.setTextures(t);for(var r=0,a=e.length;r<a;r++){var s=e[r];if(s.type==="MultiMaterial"){var o=[];for(var l=0;l<s.materials.length;l++){o.push(n.parse(s.materials[l]))}i[s.uuid]=o}else{i[s.uuid]=n.parse(s)}}}return i},parseAnimations:function(e){var t=[];for(var i=0;i<e.length;i++){var n=nl.parse(e[i]);t.push(n)}return t},parseImages:function(e,t){var i=this;var n={};function r(e){i.manager.itemStart(e);return s.load(e,function(){i.manager.itemEnd(e)},undefined,function(){i.manager.itemEnd(e);i.manager.itemError(e)})}if(e!==undefined&&e.length>0){var a=new Mo(t);var s=new Lo(a);s.setCrossOrigin(this.crossOrigin);for(var o=0,l=e.length;o<l;o++){var u=e[o];var c=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(u.url)?u.url:i.texturePath+u.url;n[u.uuid]=r(c)}}return n},parseTextures:function(e,t){function i(e,t){if(typeof e==="number")return e;console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",e);return t[e]}var n={};if(e!==undefined){for(var r=0,a=e.length;r<a;r++){var s=e[r];if(s.image===undefined){console.warn('THREE.ObjectLoader: No "image" specified for',s.uuid)}if(t[s.image]===undefined){console.warn("THREE.ObjectLoader: Undefined image",s.image)}var o=new wt(t[s.image]);o.needsUpdate=true;o.uuid=s.uuid;if(s.name!==undefined)o.name=s.name;if(s.mapping!==undefined)o.mapping=i(s.mapping,cl);if(s.offset!==undefined)o.offset.fromArray(s.offset);if(s.repeat!==undefined)o.repeat.fromArray(s.repeat);if(s.wrap!==undefined){o.wrapS=i(s.wrap[0],hl);o.wrapT=i(s.wrap[1],hl)}if(s.minFilter!==undefined)o.minFilter=i(s.minFilter,fl);if(s.magFilter!==undefined)o.magFilter=i(s.magFilter,fl);if(s.anisotropy!==undefined)o.anisotropy=s.anisotropy;if(s.flipY!==undefined)o.flipY=s.flipY;n[s.uuid]=o}}return n},parseObject:function(){var e=new Pt;return function t(i,n,r){var a;function s(e){if(n[e]===undefined){console.warn("THREE.ObjectLoader: Undefined geometry",e)}return n[e]}function o(e){if(e===undefined)return undefined;if(Array.isArray(e)){var t=[];for(var i=0,n=e.length;i<n;i++){var a=e[i];if(r[a]===undefined){console.warn("THREE.ObjectLoader: Undefined material",a)}t.push(r[a])}return t}if(r[e]===undefined){console.warn("THREE.ObjectLoader: Undefined material",e)}return r[e]}switch(i.type){case"Scene":a=new ls;if(i.background!==undefined){if(Number.isInteger(i.background)){a.background=new bi(i.background)}}if(i.fog!==undefined){if(i.fog.type==="Fog"){a.fog=new os(i.fog.color,i.fog.near,i.fog.far)}else if(i.fog.type==="FogExp2"){a.fog=new ss(i.fog.color,i.fog.density)}}break;case"PerspectiveCamera":a=new qr(i.fov,i.aspect,i.near,i.far);if(i.focus!==undefined)a.focus=i.focus;if(i.zoom!==undefined)a.zoom=i.zoom;if(i.filmGauge!==undefined)a.filmGauge=i.filmGauge;if(i.filmOffset!==undefined)a.filmOffset=i.filmOffset;if(i.view!==undefined)a.view=Object.assign({},i.view);break;case"OrthographicCamera":a=new Yr(i.left,i.right,i.top,i.bottom,i.near,i.far);break;case"AmbientLight":a=new zo(i.color,i.intensity);break;case"DirectionalLight":a=new Bo(i.color,i.intensity);break;case"PointLight":a=new Fo(i.color,i.intensity,i.distance,i.decay);break;case"RectAreaLight":a=new jo(i.color,i.intensity,i.width,i.height);break;case"SpotLight":a=new Uo(i.color,i.intensity,i.distance,i.angle,i.penumbra,i.decay);break;case"HemisphereLight":a=new Do(i.color,i.groundColor,i.intensity);break;case"SkinnedMesh":console.warn("THREE.ObjectLoader.parseObject() does not support SkinnedMesh yet.");case"Mesh":var l=s(i.geometry);var u=o(i.material);if(l.bones&&l.bones.length>0){a=new ms(l,u)}else{a=new xa(l,u)}break;case"LOD":a=new fs;break;case"Line":a=new gs(s(i.geometry),o(i.material),i.mode);break;case"LineLoop":a=new bs(s(i.geometry),o(i.material));break;case"LineSegments":a=new ys(s(i.geometry),o(i.material));break;case"PointCloud":case"Points":a=new _s(s(i.geometry),o(i.material));break;case"Sprite":a=new hs(o(i.material));break;case"Group":a=new ws;break;default:a=new Wr}a.uuid=i.uuid;if(i.name!==undefined)a.name=i.name;if(i.matrix!==undefined){e.fromArray(i.matrix);e.decompose(a.position,a.quaternion,a.scale)}else{if(i.position!==undefined)a.position.fromArray(i.position);if(i.rotation!==undefined)a.rotation.fromArray(i.rotation);if(i.quaternion!==undefined)a.quaternion.fromArray(i.quaternion);if(i.scale!==undefined)a.scale.fromArray(i.scale)}if(i.castShadow!==undefined)a.castShadow=i.castShadow;if(i.receiveShadow!==undefined)a.receiveShadow=i.receiveShadow;if(i.shadow){if(i.shadow.bias!==undefined)a.shadow.bias=i.shadow.bias;if(i.shadow.radius!==undefined)a.shadow.radius=i.shadow.radius;if(i.shadow.mapSize!==undefined)a.shadow.mapSize.fromArray(i.shadow.mapSize);if(i.shadow.camera!==undefined)a.shadow.camera=this.parseObject(i.shadow.camera)}if(i.visible!==undefined)a.visible=i.visible;if(i.userData!==undefined)a.userData=i.userData;if(i.children!==undefined){var c=i.children;for(var h=0;h<c.length;h++){a.add(this.parseObject(c[h],n,r))}}if(i.type==="LOD"){var f=i.levels;for(var d=0;d<f.length;d++){var p=f[d];var m=a.getObjectByProperty("uuid",p.object);if(m!==undefined){a.addLevel(m,p.distance)}}}return a}}()});var cl={UVMapping:ae,CubeReflectionMapping:se,CubeRefractionMapping:oe,EquirectangularReflectionMapping:le,EquirectangularRefractionMapping:ue,SphericalReflectionMapping:ce,CubeUVReflectionMapping:he,CubeUVRefractionMapping:fe};var hl={RepeatWrapping:de,ClampToEdgeWrapping:pe,MirroredRepeatWrapping:me};var fl={NearestFilter:ve,NearestMipMapNearestFilter:ge,NearestMipMapLinearFilter:ye,LinearFilter:be,LinearMipMapNearestFilter:xe,LinearMipMapLinearFilter:_e};function dl(e,t,i,n,r){var a=(n-t)*.5;var s=(r-i)*.5;var o=e*e;var l=e*o;return(2*i-2*n+a+s)*l+(-3*i+3*n-2*a-s)*o+a*e+i}function pl(e,t){var i=1-e;return i*i*t}function ml(e,t){return 2*(1-e)*e*t}function vl(e,t){return e*e*t}function gl(e,t,i,n){return pl(e,t)+ml(e,i)+vl(e,n)}function yl(e,t){var i=1-e;return i*i*i*t}function bl(e,t){var i=1-e;return 3*i*i*e*t}function xl(e,t){return 3*(1-e)*e*e*t}function _l(e,t){return e*e*e*t}function wl(e,t,i,n,r){return yl(e,t)+bl(e,i)+xl(e,n)+_l(e,r)}function Tl(){this.arcLengthDivisions=200}Object.assign(Tl.prototype,{getPoint:function(){console.warn("THREE.Curve: .getPoint() not implemented.");return null},getPointAt:function(e){var t=this.getUtoTmapping(e);return this.getPoint(t)},getPoints:function(e){if(e===undefined)e=5;var t=[];for(var i=0;i<=e;i++){t.push(this.getPoint(i/e))}return t},getSpacedPoints:function(e){if(e===undefined)e=5;var t=[];for(var i=0;i<=e;i++){t.push(this.getPointAt(i/e))}return t},getLength:function(){var e=this.getLengths();return e[e.length-1]},getLengths:function(e){if(e===undefined)e=this.arcLengthDivisions;if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate){return this.cacheArcLengths}this.needsUpdate=false;var t=[];var i,n=this.getPoint(0);var r,a=0;t.push(0);for(r=1;r<=e;r++){i=this.getPoint(r/e);a+=i.distanceTo(n);t.push(a);n=i}this.cacheArcLengths=t;return t},updateArcLengths:function(){this.needsUpdate=true;this.getLengths()},getUtoTmapping:function(e,t){var i=this.getLengths();var n=0,r=i.length;var a;if(t){a=t}else{a=e*i[r-1]}var s=0,o=r-1,l;while(s<=o){n=Math.floor(s+(o-s)/2);l=i[n]-a;if(l<0){s=n+1}else if(l>0){o=n-1}else{o=n;break}}n=o;if(i[n]===a){return n/(r-1)}var u=i[n];var c=i[n+1];var h=c-u;var f=(a-u)/h;var d=(n+f)/(r-1);return d},getTangent:function(e){var t=1e-4;var i=e-t;var n=e+t;if(i<0)i=0;if(n>1)n=1;var r=this.getPoint(i);var a=this.getPoint(n);var s=a.clone().sub(r);return s.normalize()},getTangentAt:function(e){var t=this.getUtoTmapping(e);return this.getTangent(t)},computeFrenetFrames:function(e,t){var i=new At;var n=[];var r=[];var a=[];var s=new At;var o=new Pt;var l,u,c;for(l=0;l<=e;l++){u=l/e;n[l]=this.getTangentAt(u);n[l].normalize()}r[0]=new At;a[0]=new At;var h=Number.MAX_VALUE;var f=Math.abs(n[0].x);var d=Math.abs(n[0].y);var p=Math.abs(n[0].z);if(f<=h){h=f;i.set(1,0,0)}if(d<=h){h=d;i.set(0,1,0)}if(p<=h){i.set(0,0,1)}s.crossVectors(n[0],i).normalize();r[0].crossVectors(n[0],s);a[0].crossVectors(n[0],r[0]);for(l=1;l<=e;l++){r[l]=r[l-1].clone();a[l]=a[l-1].clone();s.crossVectors(n[l-1],n[l]);if(s.length()>Number.EPSILON){s.normalize();c=Math.acos(bt.clamp(n[l-1].dot(n[l]),-1,1));r[l].applyMatrix4(o.makeRotationAxis(s,c))}a[l].crossVectors(n[l],r[l])}if(t===true){c=Math.acos(bt.clamp(r[0].dot(r[e]),-1,1));c/=e;if(n[0].dot(s.crossVectors(r[0],r[e]))>0){c=-c}for(l=1;l<=e;l++){r[l].applyMatrix4(o.makeRotationAxis(n[l],c*l));a[l].crossVectors(n[l],r[l])}}return{tangents:n,normals:r,binormals:a}}});function Ml(e,t){Tl.call(this);this.v1=e;this.v2=t}Ml.prototype=Object.create(Tl.prototype);Ml.prototype.constructor=Ml;Ml.prototype.isLineCurve=true;Ml.prototype.getPoint=function(e){if(e===1){return this.v2.clone()}var t=this.v2.clone().sub(this.v1);t.multiplyScalar(e).add(this.v1);return t};Ml.prototype.getPointAt=function(e){return this.getPoint(e)};Ml.prototype.getTangent=function(e){var t=this.v2.clone().sub(this.v1);return t.normalize()};function Sl(){Tl.call(this);this.curves=[];this.autoClose=false}Sl.prototype=Object.assign(Object.create(Tl.prototype),{constructor:Sl,add:function(e){this.curves.push(e)},closePath:function(){var e=this.curves[0].getPoint(0);var t=this.curves[this.curves.length-1].getPoint(1);if(!e.equals(t)){this.curves.push(new Ml(t,e))}},getPoint:function(e){var t=e*this.getLength();var i=this.getCurveLengths();var n=0;while(n<i.length){if(i[n]>=t){var r=i[n]-t;var a=this.curves[n];var s=a.getLength();var o=s===0?0:1-r/s;return a.getPointAt(o)}n++}return null},getLength:function(){var e=this.getCurveLengths();return e[e.length-1]},updateArcLengths:function(){this.needsUpdate=true;this.cacheLengths=null;this.getCurveLengths()},getCurveLengths:function(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length){return this.cacheLengths}var e=[],t=0;for(var i=0,n=this.curves.length;i<n;i++){t+=this.curves[i].getLength();e.push(t)}this.cacheLengths=e;return e},getSpacedPoints:function(e){if(e===undefined)e=40;var t=[];for(var i=0;i<=e;i++){t.push(this.getPoint(i/e))}if(this.autoClose){t.push(t[0])}return t},getPoints:function(e){e=e||12;var t=[],i;for(var n=0,r=this.curves;n<r.length;n++){var a=r[n];var s=a&&a.isEllipseCurve?e*2:a&&a.isLineCurve?1:a&&a.isSplineCurve?e*a.points.length:e;var o=a.getPoints(s);for(var l=0;l<o.length;l++){var u=o[l];if(i&&i.equals(u))continue;t.push(u);i=u}}if(this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])){t.push(t[0])}return t},createPointsGeometry:function(e){var t=this.getPoints(e);return this.createGeometry(t)},createSpacedPointsGeometry:function(e){var t=this.getSpacedPoints(e);return this.createGeometry(t)},createGeometry:function(e){var t=new Qr;for(var i=0,n=e.length;i<n;i++){var r=e[i];t.vertices.push(new At(r.x,r.y,r.z||0))}return t}});function El(e,t,i,n,r,a,s,o){Tl.call(this);this.aX=e;this.aY=t;this.xRadius=i;this.yRadius=n;this.aStartAngle=r;this.aEndAngle=a;this.aClockwise=s;this.aRotation=o||0}El.prototype=Object.create(Tl.prototype);El.prototype.constructor=El;El.prototype.isEllipseCurve=true;El.prototype.getPoint=function(e){var t=Math.PI*2;var i=this.aEndAngle-this.aStartAngle;var n=Math.abs(i)<Number.EPSILON;while(i<0)i+=t;while(i>t)i-=t;if(i<Number.EPSILON){if(n){i=0}else{i=t}}if(this.aClockwise===true&&!n){if(i===t){i=-t}else{i=i-t}}var r=this.aStartAngle+e*i;var a=this.aX+this.xRadius*Math.cos(r);var s=this.aY+this.yRadius*Math.sin(r);if(this.aRotation!==0){var o=Math.cos(this.aRotation);var l=Math.sin(this.aRotation);var u=a-this.aX;var c=s-this.aY;a=u*o-c*l+this.aX;s=u*l+c*o+this.aY}return new xt(a,s)};function Al(e){Tl.call(this);this.points=e===undefined?[]:e}Al.prototype=Object.create(Tl.prototype);Al.prototype.constructor=Al;Al.prototype.isSplineCurve=true;Al.prototype.getPoint=function(e){var t=this.points;var i=(t.length-1)*e;var n=Math.floor(i);var r=i-n;var a=t[n===0?n:n-1];var s=t[n];var o=t[n>t.length-2?t.length-1:n+1];var l=t[n>t.length-3?t.length-1:n+2];return new xt(dl(r,a.x,s.x,o.x,l.x),dl(r,a.y,s.y,o.y,l.y))};function Pl(e,t,i,n){Tl.call(this);this.v0=e;this.v1=t;this.v2=i;this.v3=n}Pl.prototype=Object.create(Tl.prototype);Pl.prototype.constructor=Pl;Pl.prototype.getPoint=function(e){var t=this.v0,i=this.v1,n=this.v2,r=this.v3;return new xt(wl(e,t.x,i.x,n.x,r.x),wl(e,t.y,i.y,n.y,r.y))};function Ll(e,t,i){Tl.call(this);this.v0=e;this.v1=t;this.v2=i}Ll.prototype=Object.create(Tl.prototype);Ll.prototype.constructor=Ll;Ll.prototype.getPoint=function(e){var t=this.v0,i=this.v1,n=this.v2;return new xt(gl(e,t.x,i.x,n.x),gl(e,t.y,i.y,n.y))};var Rl=Object.assign(Object.create(Sl.prototype),{fromPoints:function(e){this.moveTo(e[0].x,e[0].y);for(var t=1,i=e.length;t<i;t++){this.lineTo(e[t].x,e[t].y)}},moveTo:function(e,t){this.currentPoint.set(e,t)},lineTo:function(e,t){var i=new Ml(this.currentPoint.clone(),new xt(e,t));this.curves.push(i);this.currentPoint.set(e,t)},quadraticCurveTo:function(e,t,i,n){var r=new Ll(this.currentPoint.clone(),new xt(e,t),new xt(i,n));this.curves.push(r);this.currentPoint.set(i,n)},bezierCurveTo:function(e,t,i,n,r,a){var s=new Pl(this.currentPoint.clone(),new xt(e,t),new xt(i,n),new xt(r,a));this.curves.push(s);this.currentPoint.set(r,a)},splineThru:function(e){var t=[this.currentPoint.clone()].concat(e);var i=new Al(t);this.curves.push(i);this.currentPoint.copy(e[e.length-1])},arc:function(e,t,i,n,r,a){var s=this.currentPoint.x;var o=this.currentPoint.y;this.absarc(e+s,t+o,i,n,r,a)},absarc:function(e,t,i,n,r,a){this.absellipse(e,t,i,i,n,r,a)},ellipse:function(e,t,i,n,r,a,s,o){var l=this.currentPoint.x;var u=this.currentPoint.y;this.absellipse(e+l,t+u,i,n,r,a,s,o)},absellipse:function(e,t,i,n,r,a,s,o){var l=new El(e,t,i,n,r,a,s,o);if(this.curves.length>0){var u=l.getPoint(0);if(!u.equals(this.currentPoint)){this.lineTo(u.x,u.y)}}this.curves.push(l);var c=l.getPoint(1);this.currentPoint.copy(c)}});function Cl(e){Sl.call(this);this.currentPoint=new xt;if(e){this.fromPoints(e)}}Cl.prototype=Rl;Rl.constructor=Cl;function Ol(){Cl.apply(this,arguments);this.holes=[]}Ol.prototype=Object.assign(Object.create(Rl),{constructor:Ol,getPointsHoles:function(e){var t=[];for(var i=0,n=this.holes.length;i<n;i++){t[i]=this.holes[i].getPoints(e)}return t},extractAllPoints:function(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}},extractPoints:function(e){return this.extractAllPoints(e)}});function Dl(){this.subPaths=[];this.currentPath=null}Object.assign(Dl.prototype,{moveTo:function(e,t){this.currentPath=new Cl;this.subPaths.push(this.currentPath);this.currentPath.moveTo(e,t)},lineTo:function(e,t){this.currentPath.lineTo(e,t)},quadraticCurveTo:function(e,t,i,n){this.currentPath.quadraticCurveTo(e,t,i,n)},bezierCurveTo:function(e,t,i,n,r,a){this.currentPath.bezierCurveTo(e,t,i,n,r,a)},splineThru:function(e){this.currentPath.splineThru(e)},toShapes:function(e,t){function i(e){var t=[];for(var i=0,n=e.length;i<n;i++){var r=e[i];var a=new Ol;a.curves=r.curves;t.push(a)}return t}function n(e,t){var i=t.length;var n=false;for(var r=i-1,a=0;a<i;r=a++){var s=t[r];var o=t[a];var l=o.x-s.x;var u=o.y-s.y;if(Math.abs(u)>Number.EPSILON){if(u<0){s=t[a];l=-l;o=t[r];u=-u}if(e.y<s.y||e.y>o.y)continue;if(e.y===s.y){if(e.x===s.x)return true}else{var c=u*(e.x-s.x)-l*(e.y-s.y);if(c===0)return true;if(c<0)continue;n=!n}}else{if(e.y!==s.y)continue;if(o.x<=e.x&&e.x<=s.x||s.x<=e.x&&e.x<=o.x)return true}}return n}var r=Ws.isClockWise;var a=this.subPaths;if(a.length===0)return[];if(t===true)return i(a);var s,o,l,u=[];if(a.length===1){o=a[0];l=new Ol;l.curves=o.curves;u.push(l);return u}var c=!r(a[0].getPoints());c=e?!c:c;var h=[];var f=[];var d=[];var p=0;var m;f[p]=undefined;d[p]=[];for(var v=0,g=a.length;v<g;v++){o=a[v];m=o.getPoints();s=r(m);s=e?!s:s;if(s){if(!c&&f[p])p++;f[p]={s:new Ol,p:m};f[p].s.curves=o.curves;if(c)p++;d[p]=[]}else{d[p].push({h:o,p:m[0]})}}if(!f[0])return i(a);if(f.length>1){var y=false;var b=[];for(var x=0,_=f.length;x<_;x++){h[x]=[]}for(var x=0,_=f.length;x<_;x++){var w=d[x];for(var T=0;T<w.length;T++){var M=w[T];var S=true;for(var E=0;E<f.length;E++){if(n(M.p,f[E].p)){if(x!==E)b.push({froms:x,tos:E,hole:T});if(S){S=false;h[E].push(M)}else{y=true}}}if(S){h[x].push(M)}}}if(b.length>0){if(!y)d=h}}var A;for(var v=0,P=f.length;v<P;v++){l=f[v].s;u.push(l);A=d[v];for(var L=0,R=A.length;L<R;L++){l.holes.push(A[L].h)}}return u}});function Il(e){this.data=e}Object.assign(Il.prototype,{isFont:true,generateShapes:function(e,t,i){function n(e){var i=String(e).split("");var n=t/a.resolution;var s=(a.boundingBox.yMax-a.boundingBox.yMin+a.underlineThickness)*n;var o=0,l=0;var u=[];for(var c=0;c<i.length;c++){var h=i[c];if(h==="\n"){o=0;l-=s}else{var f=r(h,n,o,l);o+=f.offsetX;u.push(f.path)}}return u}function r(e,t,n,r){var s=a.glyphs[e]||a.glyphs["?"];if(!s)return;var o=new Dl;var l=[];var u,c,h,f,d,p,m,v,g,y,b;if(s.o){var x=s._cachedOutline||(s._cachedOutline=s.o.split(" "));for(var _=0,w=x.length;_<w;){var T=x[_++];switch(T){case"m":u=x[_++]*t+n;c=x[_++]*t+r;o.moveTo(u,c);break;case"l":u=x[_++]*t+n;c=x[_++]*t+r;o.lineTo(u,c);break;case"q":h=x[_++]*t+n;f=x[_++]*t+r;m=x[_++]*t+n;v=x[_++]*t+r;o.quadraticCurveTo(m,v,h,f);b=l[l.length-1];if(b){d=b.x;p=b.y;for(var M=1;M<=i;M++){var S=M/i;gl(S,d,m,h);gl(S,p,v,f)}}break;case"b":h=x[_++]*t+n;f=x[_++]*t+r;m=x[_++]*t+n;v=x[_++]*t+r;g=x[_++]*t+n;y=x[_++]*t+r;o.bezierCurveTo(m,v,g,y,h,f);b=l[l.length-1];if(b){d=b.x;p=b.y;for(var M=1;M<=i;M++){var S=M/i;wl(S,d,m,g,h);wl(S,p,v,y,f)}}break}}}return{offsetX:s.ha*t,path:o}}if(t===undefined)t=100;if(i===undefined)i=4;var a=this.data;var s=n(e);var o=[];for(var l=0,u=s.length;l<u;l++){Array.prototype.push.apply(o,s[l].toShapes())}return o}});function kl(e){this.manager=e!==undefined?e:So}Object.assign(kl.prototype,{load:function(e,t,i,n){var r=this;var a=new Eo(this.manager);a.load(e,function(e){var i;try{i=JSON.parse(e)}catch(t){console.warn("THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead.");i=JSON.parse(e.substring(65,e.length-2))}var n=r.parse(i);if(t)t(n)},i,n)},parse:function(e){return new Il(e)}});var Ul;var Fl={getContext:function(){if(Ul===undefined){Ul=new(window.AudioContext||window.webkitAudioContext)}return Ul},setContext:function(e){Ul=e}};function Nl(e){this.manager=e!==undefined?e:So}Object.assign(Nl.prototype,{load:function(e,t,i,n){var r=new Eo(this.manager);r.setResponseType("arraybuffer");r.load(e,function(e){var i=Fl.getContext();i.decodeAudioData(e,function(e){t(e)})},i,n)}});function Bl(){this.type="StereoCamera";this.aspect=1;this.eyeSep=.064;this.cameraL=new qr;this.cameraL.layers.enable(1);this.cameraL.matrixAutoUpdate=false;this.cameraR=new qr;this.cameraR.layers.enable(2);this.cameraR.matrixAutoUpdate=false}Object.assign(Bl.prototype,{update:function(){var e,t,i,n,r,a,s,o;var l=new Pt;var u=new Pt;return function c(h){var f=e!==this||t!==h.focus||i!==h.fov||n!==h.aspect*this.aspect||r!==h.near||a!==h.far||s!==h.zoom||o!==this.eyeSep;if(f){e=this;t=h.focus;i=h.fov;n=h.aspect*this.aspect;r=h.near;a=h.far;s=h.zoom;var d=h.projectionMatrix.clone();o=this.eyeSep/2;var p=o*r/t;var m=r*Math.tan(bt.DEG2RAD*i*.5)/s;var v,g;u.elements[12]=-o;l.elements[12]=o;v=-m*n+p;g=m*n+p;d.elements[0]=2*r/(g-v);d.elements[8]=(g+v)/(g-v);this.cameraL.projectionMatrix.copy(d);v=-m*n-p;g=m*n-p;d.elements[0]=2*r/(g-v);d.elements[8]=(g+v)/(g-v);this.cameraR.projectionMatrix.copy(d)}this.cameraL.matrixWorld.copy(h.matrixWorld).multiply(u);this.cameraR.matrixWorld.copy(h.matrixWorld).multiply(l)}}()});function zl(e,t,i){Wr.call(this);this.type="CubeCamera";var n=90,r=1;var a=new qr(n,r,e,t);a.up.set(0,-1,0);a.lookAt(new At(1,0,0));this.add(a);var s=new qr(n,r,e,t);s.up.set(0,-1,0);s.lookAt(new At(-1,0,0));this.add(s);var o=new qr(n,r,e,t);o.up.set(0,0,1);o.lookAt(new At(0,1,0));this.add(o);var l=new qr(n,r,e,t);l.up.set(0,0,-1);l.lookAt(new At(0,-1,0));this.add(l);var u=new qr(n,r,e,t);u.up.set(0,-1,0);u.lookAt(new At(0,0,1));this.add(u);var c=new qr(n,r,e,t);c.up.set(0,-1,0);c.lookAt(new At(0,0,-1));this.add(c);var h={format:ke,magFilter:be,minFilter:be};this.renderTarget=new St(i,i,h);this.renderTarget.texture.name="CubeCamera";this.update=function(e,t){if(this.parent===null)this.updateMatrixWorld();var i=this.renderTarget;var n=i.texture.generateMipmaps;i.texture.generateMipmaps=false;i.activeCubeFace=0;e.render(t,a,i);i.activeCubeFace=1;e.render(t,s,i);i.activeCubeFace=2;e.render(t,o,i);i.activeCubeFace=3;e.render(t,l,i);i.activeCubeFace=4;e.render(t,u,i);i.texture.generateMipmaps=n;i.activeCubeFace=5;e.render(t,c,i);e.setRenderTarget(null)};this.clear=function(e,t,i,n){var r=this.renderTarget;for(var a=0;a<6;a++){r.activeCubeFace=a;e.setRenderTarget(r);e.clear(t,i,n)}e.setRenderTarget(null)}}zl.prototype=Object.create(Wr.prototype);zl.prototype.constructor=zl;function jl(){Wr.call(this);this.type="AudioListener";this.context=Fl.getContext();this.gain=this.context.createGain();this.gain.connect(this.context.destination);this.filter=null}jl.prototype=Object.assign(Object.create(Wr.prototype),{constructor:jl,getInput:function(){return this.gain},removeFilter:function(){if(this.filter!==null){this.gain.disconnect(this.filter);this.filter.disconnect(this.context.destination);this.gain.connect(this.context.destination);this.filter=null}},getFilter:function(){return this.filter},setFilter:function(e){if(this.filter!==null){this.gain.disconnect(this.filter);this.filter.disconnect(this.context.destination)}else{this.gain.disconnect(this.context.destination)}this.filter=e;this.gain.connect(this.filter);this.filter.connect(this.context.destination)},getMasterVolume:function(){return this.gain.gain.value},setMasterVolume:function(e){this.gain.gain.value=e},updateMatrixWorld:function(){var e=new At;var t=new Et;var i=new At;var n=new At;return function r(a){Wr.prototype.updateMatrixWorld.call(this,a);var s=this.context.listener;var o=this.up;this.matrixWorld.decompose(e,t,i);n.set(0,0,-1).applyQuaternion(t);if(s.positionX){s.positionX.setValueAtTime(e.x,this.context.currentTime);s.positionY.setValueAtTime(e.y,this.context.currentTime);s.positionZ.setValueAtTime(e.z,this.context.currentTime);s.forwardX.setValueAtTime(n.x,this.context.currentTime);s.forwardY.setValueAtTime(n.y,this.context.currentTime);s.forwardZ.setValueAtTime(n.z,this.context.currentTime);s.upX.setValueAtTime(o.x,this.context.currentTime);s.upY.setValueAtTime(o.y,this.context.currentTime);s.upZ.setValueAtTime(o.z,this.context.currentTime)}else{s.setPosition(e.x,e.y,e.z);s.setOrientation(n.x,n.y,n.z,o.x,o.y,o.z)}}}()});function Gl(e){Wr.call(this);this.type="Audio";this.context=e.context;this.gain=this.context.createGain();this.gain.connect(e.getInput());this.autoplay=false;this.buffer=null;this.loop=false;this.startTime=0;this.playbackRate=1;this.isPlaying=false;this.hasPlaybackControl=true;this.sourceType="empty";this.filters=[]}Gl.prototype=Object.assign(Object.create(Wr.prototype),{constructor:Gl,getOutput:function(){return this.gain},setNodeSource:function(e){this.hasPlaybackControl=false;this.sourceType="audioNode";this.source=e;this.connect();return this},setBuffer:function(e){this.buffer=e;this.sourceType="buffer";if(this.autoplay)this.play();return this},play:function(){if(this.isPlaying===true){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===false){console.warn("THREE.Audio: this Audio has no playback control.");return}var e=this.context.createBufferSource();e.buffer=this.buffer;e.loop=this.loop;e.onended=this.onEnded.bind(this);e.playbackRate.setValueAtTime(this.playbackRate,this.startTime);e.start(0,this.startTime);this.isPlaying=true;this.source=e;return this.connect()},pause:function(){if(this.hasPlaybackControl===false){console.warn("THREE.Audio: this Audio has no playback control.");return}this.source.stop();this.startTime=this.context.currentTime;this.isPlaying=false;return this},stop:function(){if(this.hasPlaybackControl===false){console.warn("THREE.Audio: this Audio has no playback control.");return}this.source.stop();this.startTime=0;this.isPlaying=false;return this},connect:function(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(var e=1,t=this.filters.length;e<t;e++){this.filters[e-1].connect(this.filters[e])}this.filters[this.filters.length-1].connect(this.getOutput())}else{this.source.connect(this.getOutput())}return this},disconnect:function(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(var e=1,t=this.filters.length;e<t;e++){
this.filters[e-1].disconnect(this.filters[e])}this.filters[this.filters.length-1].disconnect(this.getOutput())}else{this.source.disconnect(this.getOutput())}return this},getFilters:function(){return this.filters},setFilters:function(e){if(!e)e=[];if(this.isPlaying===true){this.disconnect();this.filters=e;this.connect()}else{this.filters=e}return this},getFilter:function(){return this.getFilters()[0]},setFilter:function(e){return this.setFilters(e?[e]:[])},setPlaybackRate:function(e){if(this.hasPlaybackControl===false){console.warn("THREE.Audio: this Audio has no playback control.");return}this.playbackRate=e;if(this.isPlaying===true){this.source.playbackRate.setValueAtTime(this.playbackRate,this.context.currentTime)}return this},getPlaybackRate:function(){return this.playbackRate},onEnded:function(){this.isPlaying=false},getLoop:function(){if(this.hasPlaybackControl===false){console.warn("THREE.Audio: this Audio has no playback control.");return false}return this.loop},setLoop:function(e){if(this.hasPlaybackControl===false){console.warn("THREE.Audio: this Audio has no playback control.");return}this.loop=e;if(this.isPlaying===true){this.source.loop=this.loop}return this},getVolume:function(){return this.gain.gain.value},setVolume:function(e){this.gain.gain.value=e;return this}});function Hl(e){Gl.call(this,e);this.panner=this.context.createPanner();this.panner.connect(this.gain)}Hl.prototype=Object.assign(Object.create(Gl.prototype),{constructor:Hl,getOutput:function(){return this.panner},getRefDistance:function(){return this.panner.refDistance},setRefDistance:function(e){this.panner.refDistance=e},getRolloffFactor:function(){return this.panner.rolloffFactor},setRolloffFactor:function(e){this.panner.rolloffFactor=e},getDistanceModel:function(){return this.panner.distanceModel},setDistanceModel:function(e){this.panner.distanceModel=e},getMaxDistance:function(){return this.panner.maxDistance},setMaxDistance:function(e){this.panner.maxDistance=e},updateMatrixWorld:function(){var e=new At;return function t(i){Wr.prototype.updateMatrixWorld.call(this,i);e.setFromMatrixPosition(this.matrixWorld);this.panner.setPosition(e.x,e.y,e.z)}}()});function Vl(e,t){this.analyser=e.context.createAnalyser();this.analyser.fftSize=t!==undefined?t:2048;this.data=new Uint8Array(this.analyser.frequencyBinCount);e.getOutput().connect(this.analyser)}Object.assign(Vl.prototype,{getFrequencyData:function(){this.analyser.getByteFrequencyData(this.data);return this.data},getAverageFrequency:function(){var e=0,t=this.getFrequencyData();for(var i=0;i<t.length;i++){e+=t[i]}return e/t.length}});function Wl(e,t,i){this.binding=e;this.valueSize=i;var n=Float64Array,r;switch(t){case"quaternion":r=this._slerp;break;case"string":case"bool":n=Array;r=this._select;break;default:r=this._lerp}this.buffer=new n(i*4);this._mixBufferRegion=r;this.cumulativeWeight=0;this.useCount=0;this.referenceCount=0}Object.assign(Wl.prototype,{accumulate:function(e,t){var i=this.buffer,n=this.valueSize,r=e*n+n,a=this.cumulativeWeight;if(a===0){for(var s=0;s!==n;++s){i[r+s]=i[s]}a=t}else{a+=t;var o=t/a;this._mixBufferRegion(i,r,0,o,n)}this.cumulativeWeight=a},apply:function(e){var t=this.valueSize,i=this.buffer,n=e*t+t,r=this.cumulativeWeight,a=this.binding;this.cumulativeWeight=0;if(r<1){var s=t*3;this._mixBufferRegion(i,n,s,1-r,t)}for(var o=t,l=t+t;o!==l;++o){if(i[o]!==i[o+t]){a.setValue(i,n);break}}},saveOriginalState:function(){var e=this.binding;var t=this.buffer,i=this.valueSize,n=i*3;e.getValue(t,n);for(var r=i,a=n;r!==a;++r){t[r]=t[n+r%i]}this.cumulativeWeight=0},restoreOriginalState:function(){var e=this.valueSize*3;this.binding.setValue(this.buffer,e)},_select:function(e,t,i,n,r){if(n>=.5){for(var a=0;a!==r;++a){e[t+a]=e[i+a]}}},_slerp:function(e,t,i,n){Et.slerpFlat(e,t,e,t,e,i,n)},_lerp:function(e,t,i,n,r){var a=1-n;for(var s=0;s!==r;++s){var o=t+s;e[o]=e[o]*a+e[i+s]*n}}});function Xl(e,t,i){var n=i||Yl.parseTrackName(t);this._targetGroup=e;this._bindings=e.subscribe_(t,n)}Object.assign(Xl.prototype,{getValue:function(e,t){this.bind();var i=this._targetGroup.nCachedObjects_,n=this._bindings[i];if(n!==undefined)n.getValue(e,t)},setValue:function(e,t){var i=this._bindings;for(var n=this._targetGroup.nCachedObjects_,r=i.length;n!==r;++n){i[n].setValue(e,t)}},bind:function(){var e=this._bindings;for(var t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t){e[t].bind()}},unbind:function(){var e=this._bindings;for(var t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t){e[t].unbind()}}});function Yl(e,t,i){this.path=t;this.parsedPath=i||Yl.parseTrackName(t);this.node=Yl.findNode(e,this.parsedPath.nodeName)||e;this.rootNode=e}Object.assign(Yl,{Composite:Xl,create:function(e,t,i){if(!(e&&e.isAnimationObjectGroup)){return new Yl(e,t,i)}else{return new Yl.Composite(e,t,i)}},sanitizeNodeName:function(e){return e.replace(/\s/g,"_").replace(/[^\w-]/g,"")},parseTrackName:function(){var e=/((?:[\w-]+[\/:])*)/;var t=/([\w-\.]+)?/;var i=/(?:\.([\w-]+)(?:\[(.+)\])?)?/;var n=/\.([\w-]+)(?:\[(.+)\])?/;var r=new RegExp(""+"^"+e.source+t.source+i.source+n.source+"$");var a=["material","materials","bones"];return function(e){var t=r.exec(e);if(!t){throw new Error("PropertyBinding: Cannot parse trackName: "+e)}var i={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]};var n=i.nodeName&&i.nodeName.lastIndexOf(".");if(n!==undefined&&n!==-1){var s=i.nodeName.substring(n+1);if(a.indexOf(s)!==-1){i.nodeName=i.nodeName.substring(0,n);i.objectName=s}}if(i.propertyName===null||i.propertyName.length===0){throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e)}return i}}(),findNode:function(e,t){if(!t||t===""||t==="root"||t==="."||t===-1||t===e.name||t===e.uuid){return e}if(e.skeleton){var i=function(e){for(var i=0;i<e.bones.length;i++){var n=e.bones[i];if(n.name===t){return n}}return null};var n=i(e.skeleton);if(n){return n}}if(e.children){var r=function(e){for(var i=0;i<e.length;i++){var n=e[i];if(n.name===t||n.uuid===t){return n}var a=r(n.children);if(a)return a}return null};var a=r(e.children);if(a){return a}}return null}});Object.assign(Yl.prototype,{_getValue_unavailable:function(){},_setValue_unavailable:function(){},BindingType:{Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Versioning:{None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},GetterByBindingType:[function e(t,i){t[i]=this.node[this.propertyName]},function e(t,i){var n=this.resolvedProperty;for(var r=0,a=n.length;r!==a;++r){t[i++]=n[r]}},function e(t,i){t[i]=this.resolvedProperty[this.propertyIndex]},function e(t,i){this.resolvedProperty.toArray(t,i)}],SetterByBindingTypeAndVersioning:[[function e(t,i){this.node[this.propertyName]=t[i]},function e(t,i){this.node[this.propertyName]=t[i];this.targetObject.needsUpdate=true},function e(t,i){this.node[this.propertyName]=t[i];this.targetObject.matrixWorldNeedsUpdate=true}],[function e(t,i){var n=this.resolvedProperty;for(var r=0,a=n.length;r!==a;++r){n[r]=t[i++]}},function e(t,i){var n=this.resolvedProperty;for(var r=0,a=n.length;r!==a;++r){n[r]=t[i++]}this.targetObject.needsUpdate=true},function e(t,i){var n=this.resolvedProperty;for(var r=0,a=n.length;r!==a;++r){n[r]=t[i++]}this.targetObject.matrixWorldNeedsUpdate=true}],[function e(t,i){this.resolvedProperty[this.propertyIndex]=t[i]},function e(t,i){this.resolvedProperty[this.propertyIndex]=t[i];this.targetObject.needsUpdate=true},function e(t,i){this.resolvedProperty[this.propertyIndex]=t[i];this.targetObject.matrixWorldNeedsUpdate=true}],[function e(t,i){this.resolvedProperty.fromArray(t,i)},function e(t,i){this.resolvedProperty.fromArray(t,i);this.targetObject.needsUpdate=true},function e(t,i){this.resolvedProperty.fromArray(t,i);this.targetObject.matrixWorldNeedsUpdate=true}]],getValue:function e(t,i){this.bind();this.getValue(t,i)},setValue:function e(t,i){this.bind();this.setValue(t,i)},bind:function(){var e=this.node,t=this.parsedPath,i=t.objectName,n=t.propertyName,r=t.propertyIndex;if(!e){e=Yl.findNode(this.rootNode,t.nodeName)||this.rootNode;this.node=e}this.getValue=this._getValue_unavailable;this.setValue=this._setValue_unavailable;if(!e){console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");return}if(i){var a=t.objectIndex;switch(i){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(var s=0;s<e.length;s++){if(e[s].name===a){a=s;break}}break;default:if(e[i]===undefined){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[i]}if(a!==undefined){if(e[a]===undefined){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[a]}}var o=e[n];if(o===undefined){var l=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+l+"."+n+" but it wasn't found.",e);return}var u=this.Versioning.None;if(e.needsUpdate!==undefined){u=this.Versioning.NeedsUpdate;this.targetObject=e}else if(e.matrixWorldNeedsUpdate!==undefined){u=this.Versioning.MatrixWorldNeedsUpdate;this.targetObject=e}var c=this.BindingType.Direct;if(r!==undefined){if(n==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(e.geometry.isBufferGeometry){if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}for(var s=0;s<this.node.geometry.morphAttributes.position.length;s++){if(e.geometry.morphAttributes.position[s].name===r){r=s;break}}}else{if(!e.geometry.morphTargets){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphTargets.",this);return}for(var s=0;s<this.node.geometry.morphTargets.length;s++){if(e.geometry.morphTargets[s].name===r){r=s;break}}}}c=this.BindingType.ArrayElement;this.resolvedProperty=o;this.propertyIndex=r}else if(o.fromArray!==undefined&&o.toArray!==undefined){c=this.BindingType.HasFromToArray;this.resolvedProperty=o}else if(Array.isArray(o)){c=this.BindingType.EntireArray;this.resolvedProperty=o}else{this.propertyName=n}this.getValue=this.GetterByBindingType[c];this.setValue=this.SetterByBindingTypeAndVersioning[c][u]},unbind:function(){this.node=null;this.getValue=this._getValue_unbound;this.setValue=this._setValue_unbound}});Object.assign(Yl.prototype,{_getValue_unbound:Yl.prototype.getValue,_setValue_unbound:Yl.prototype.setValue});function ql(e){this.uuid=bt.generateUUID();this._objects=Array.prototype.slice.call(arguments);this.nCachedObjects_=0;var t={};this._indicesByUUID=t;for(var i=0,n=arguments.length;i!==n;++i){t[arguments[i].uuid]=i}this._paths=[];this._parsedPaths=[];this._bindings=[];this._bindingsIndicesByPath={};var r=this;this.stats={objects:{get total(){return r._objects.length},get inUse(){return this.total-r.nCachedObjects_}},get bindingsPerObject(){return r._bindings.length}}}Object.assign(ql.prototype,{isAnimationObjectGroup:true,add:function(e){var t=this._objects,i=t.length,n=this.nCachedObjects_,r=this._indicesByUUID,a=this._paths,s=this._parsedPaths,o=this._bindings,l=o.length;for(var u=0,c=arguments.length;u!==c;++u){var h=arguments[u],f=h.uuid,d=r[f],p=undefined;if(d===undefined){d=i++;r[f]=d;t.push(h);for(var m=0,v=l;m!==v;++m){o[m].push(new Yl(h,a[m],s[m]))}}else if(d<n){p=t[d];var g=--n,y=t[g];r[y.uuid]=d;t[d]=y;r[f]=g;t[g]=h;for(var m=0,v=l;m!==v;++m){var b=o[m],x=b[g],_=b[d];b[d]=x;if(_===undefined){_=new Yl(h,a[m],s[m])}b[g]=_}}else if(t[d]!==p){console.error("THREE.AnimationObjectGroup: Different objects with the same UUID "+"detected. Clean the caches or recreate your infrastructure when reloading scenes.")}}this.nCachedObjects_=n},remove:function(e){var t=this._objects,i=this.nCachedObjects_,n=this._indicesByUUID,r=this._bindings,a=r.length;for(var s=0,o=arguments.length;s!==o;++s){var l=arguments[s],u=l.uuid,c=n[u];if(c!==undefined&&c>=i){var h=i++,f=t[h];n[f.uuid]=c;t[c]=f;n[u]=h;t[h]=l;for(var d=0,p=a;d!==p;++d){var m=r[d],v=m[h],g=m[c];m[c]=v;m[h]=g}}}this.nCachedObjects_=i},uncache:function(e){var t=this._objects,i=t.length,n=this.nCachedObjects_,r=this._indicesByUUID,a=this._bindings,s=a.length;for(var o=0,l=arguments.length;o!==l;++o){var u=arguments[o],c=u.uuid,h=r[c];if(h!==undefined){delete r[c];if(h<n){var f=--n,d=t[f],p=--i,m=t[p];r[d.uuid]=h;t[h]=d;r[m.uuid]=f;t[f]=m;t.pop();for(var v=0,g=s;v!==g;++v){var y=a[v],b=y[f],x=y[p];y[h]=b;y[f]=x;y.pop()}}else{var p=--i,m=t[p];r[m.uuid]=h;t[h]=m;t.pop();for(var v=0,g=s;v!==g;++v){var y=a[v];y[h]=y[p];y.pop()}}}}this.nCachedObjects_=n},subscribe_:function(e,t){var i=this._bindingsIndicesByPath,n=i[e],r=this._bindings;if(n!==undefined)return r[n];var a=this._paths,s=this._parsedPaths,o=this._objects,l=o.length,u=this.nCachedObjects_,c=new Array(l);n=r.length;i[e]=n;a.push(e);s.push(t);r.push(c);for(var h=u,f=o.length;h!==f;++h){var d=o[h];c[h]=new Yl(d,e,t)}return c},unsubscribe_:function(e){var t=this._bindingsIndicesByPath,i=t[e];if(i!==undefined){var n=this._paths,r=this._parsedPaths,a=this._bindings,s=a.length-1,o=a[s],l=e[s];t[l]=i;a[i]=o;a.pop();r[i]=r[s];r.pop();n[i]=n[s];n.pop()}}});function Zl(e,t,i){this._mixer=e;this._clip=t;this._localRoot=i||null;var n=t.tracks,r=n.length,a=new Array(r);var s={endingStart:nt,endingEnd:nt};for(var o=0;o!==r;++o){var l=n[o].createInterpolant(null);a[o]=l;l.settings=s}this._interpolantSettings=s;this._interpolants=a;this._propertyBindings=new Array(r);this._cacheIndex=null;this._byClipCacheIndex=null;this._timeScaleInterpolant=null;this._weightInterpolant=null;this.loop=Qe;this._loopCount=-1;this._startTime=null;this.time=0;this.timeScale=1;this._effectiveTimeScale=1;this.weight=1;this._effectiveWeight=1;this.repetitions=Infinity;this.paused=false;this.enabled=true;this.clampWhenFinished=false;this.zeroSlopeAtStart=true;this.zeroSlopeAtEnd=true}Object.assign(Zl.prototype,{play:function(){this._mixer._activateAction(this);return this},stop:function(){this._mixer._deactivateAction(this);return this.reset()},reset:function(){this.paused=false;this.enabled=true;this.time=0;this._loopCount=-1;this._startTime=null;return this.stopFading().stopWarping()},isRunning:function(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)},isScheduled:function(){return this._mixer._isActiveAction(this)},startAt:function(e){this._startTime=e;return this},setLoop:function(e,t){this.loop=e;this.repetitions=t;return this},setEffectiveWeight:function(e){this.weight=e;this._effectiveWeight=this.enabled?e:0;return this.stopFading()},getEffectiveWeight:function(){return this._effectiveWeight},fadeIn:function(e){return this._scheduleFading(e,0,1)},fadeOut:function(e){return this._scheduleFading(e,1,0)},crossFadeFrom:function(e,t,i){e.fadeOut(t);this.fadeIn(t);if(i){var n=this._clip.duration,r=e._clip.duration,a=r/n,s=n/r;e.warp(1,a,t);this.warp(s,1,t)}return this},crossFadeTo:function(e,t,i){return e.crossFadeFrom(this,t,i)},stopFading:function(){var e=this._weightInterpolant;if(e!==null){this._weightInterpolant=null;this._mixer._takeBackControlInterpolant(e)}return this},setEffectiveTimeScale:function(e){this.timeScale=e;this._effectiveTimeScale=this.paused?0:e;return this.stopWarping()},getEffectiveTimeScale:function(){return this._effectiveTimeScale},setDuration:function(e){this.timeScale=this._clip.duration/e;return this.stopWarping()},syncWith:function(e){this.time=e.time;this.timeScale=e.timeScale;return this.stopWarping()},halt:function(e){return this.warp(this._effectiveTimeScale,0,e)},warp:function(e,t,i){var n=this._mixer,r=n.time,a=this._timeScaleInterpolant,s=this.timeScale;if(a===null){a=n._lendControlInterpolant();this._timeScaleInterpolant=a}var o=a.parameterPositions,l=a.sampleValues;o[0]=r;o[1]=r+i;l[0]=e/s;l[1]=t/s;return this},stopWarping:function(){var e=this._timeScaleInterpolant;if(e!==null){this._timeScaleInterpolant=null;this._mixer._takeBackControlInterpolant(e)}return this},getMixer:function(){return this._mixer},getClip:function(){return this._clip},getRoot:function(){return this._localRoot||this._mixer._root},_update:function(e,t,i,n){if(!this.enabled){this._updateWeight(e);return}var r=this._startTime;if(r!==null){var a=(e-r)*i;if(a<0||i===0){return}this._startTime=null;t=i*a}t*=this._updateTimeScale(e);var s=this._updateTime(t);var o=this._updateWeight(e);if(o>0){var l=this._interpolants;var u=this._propertyBindings;for(var c=0,h=l.length;c!==h;++c){l[c].evaluate(s);u[c].accumulate(n,o)}}},_updateWeight:function(e){var t=0;if(this.enabled){t=this.weight;var i=this._weightInterpolant;if(i!==null){var n=i.evaluate(e)[0];t*=n;if(e>i.parameterPositions[1]){this.stopFading();if(n===0){this.enabled=false}}}}this._effectiveWeight=t;return t},_updateTimeScale:function(e){var t=0;if(!this.paused){t=this.timeScale;var i=this._timeScaleInterpolant;if(i!==null){var n=i.evaluate(e)[0];t*=n;if(e>i.parameterPositions[1]){this.stopWarping();if(t===0){this.paused=true}else{this.timeScale=t}}}}this._effectiveTimeScale=t;return t},_updateTime:function(e){var t=this.time+e;if(e===0)return t;var i=this._clip.duration,n=this.loop,r=this._loopCount;if(n===Ke){if(r===-1){this._loopCount=0;this._setEndings(true,true,false)}e:{if(t>=i){t=i}else if(t<0){t=0}else break e;if(this.clampWhenFinished)this.paused=true;else this.enabled=false;this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{var a=n===$e;if(r===-1){if(e>=0){r=0;this._setEndings(true,this.repetitions===0,a)}else{this._setEndings(this.repetitions===0,true,a)}}if(t>=i||t<0){var s=Math.floor(t/i);t-=i*s;r+=Math.abs(s);var o=this.repetitions-r;if(o<0){if(this.clampWhenFinished)this.paused=true;else this.enabled=false;t=e>0?i:0;this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1})}else{if(o===0){var l=e<0;this._setEndings(l,!l,a)}else{this._setEndings(false,false,a)}this._loopCount=r;this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:s})}}if(a&&(r&1)===1){this.time=t;return i-t}}this.time=t;return t},_setEndings:function(e,t,i){var n=this._interpolantSettings;if(i){n.endingStart=rt;n.endingEnd=rt}else{if(e){n.endingStart=this.zeroSlopeAtStart?rt:nt}else{n.endingStart=at}if(t){n.endingEnd=this.zeroSlopeAtEnd?rt:nt}else{n.endingEnd=at}}},_scheduleFading:function(e,t,i){var n=this._mixer,r=n.time,a=this._weightInterpolant;if(a===null){a=n._lendControlInterpolant();this._weightInterpolant=a}var s=a.parameterPositions,o=a.sampleValues;s[0]=r;o[0]=t;s[1]=r+e;o[1]=i;return this}});function Jl(e){this._root=e;this._initMemoryManager();this._accuIndex=0;this.time=0;this.timeScale=1}Object.assign(Jl.prototype,t.prototype,{_bindAction:function(e,t){var i=e._localRoot||this._root,n=e._clip.tracks,r=n.length,a=e._propertyBindings,s=e._interpolants,o=i.uuid,l=this._bindingsByRootAndName,u=l[o];if(u===undefined){u={};l[o]=u}for(var c=0;c!==r;++c){var h=n[c],f=h.name,d=u[f];if(d!==undefined){a[c]=d}else{d=a[c];if(d!==undefined){if(d._cacheIndex===null){++d.referenceCount;this._addInactiveBinding(d,o,f)}continue}var p=t&&t._propertyBindings[c].binding.parsedPath;d=new Wl(Yl.create(i,f,p),h.ValueTypeName,h.getValueSize());++d.referenceCount;this._addInactiveBinding(d,o,f);a[c]=d}s[c].resultBuffer=d.buffer}},_activateAction:function(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){var t=(e._localRoot||this._root).uuid,i=e._clip.uuid,n=this._actionsByClip[i];this._bindAction(e,n&&n.knownActions[0]);this._addInactiveAction(e,i,t)}var r=e._propertyBindings;for(var a=0,s=r.length;a!==s;++a){var o=r[a];if(o.useCount++===0){this._lendBinding(o);o.saveOriginalState()}}this._lendAction(e)}},_deactivateAction:function(e){if(this._isActiveAction(e)){var t=e._propertyBindings;for(var i=0,n=t.length;i!==n;++i){var r=t[i];if(--r.useCount===0){r.restoreOriginalState();this._takeBackBinding(r)}}this._takeBackAction(e)}},_initMemoryManager:function(){this._actions=[];this._nActiveActions=0;this._actionsByClip={};this._bindings=[];this._nActiveBindings=0;this._bindingsByRootAndName={};this._controlInterpolants=[];this._nActiveControlInterpolants=0;var e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}},_isActiveAction:function(e){var t=e._cacheIndex;return t!==null&&t<this._nActiveActions},_addInactiveAction:function(e,t,i){var n=this._actions,r=this._actionsByClip,a=r[t];if(a===undefined){a={knownActions:[e],actionByRoot:{}};e._byClipCacheIndex=0;r[t]=a}else{var s=a.knownActions;e._byClipCacheIndex=s.length;s.push(e)}e._cacheIndex=n.length;n.push(e);a.actionByRoot[i]=e},_removeInactiveAction:function(e){var t=this._actions,i=t[t.length-1],n=e._cacheIndex;i._cacheIndex=n;t[n]=i;t.pop();e._cacheIndex=null;var r=e._clip.uuid,a=this._actionsByClip,s=a[r],o=s.knownActions,l=o[o.length-1],u=e._byClipCacheIndex;l._byClipCacheIndex=u;o[u]=l;o.pop();e._byClipCacheIndex=null;var c=s.actionByRoot,h=(e._localRoot||this._root).uuid;delete c[h];if(o.length===0){delete a[r]}this._removeInactiveBindingsForAction(e)},_removeInactiveBindingsForAction:function(e){var t=e._propertyBindings;for(var i=0,n=t.length;i!==n;++i){var r=t[i];if(--r.referenceCount===0){this._removeInactiveBinding(r)}}},_lendAction:function(e){var t=this._actions,i=e._cacheIndex,n=this._nActiveActions++,r=t[n];e._cacheIndex=n;t[n]=e;r._cacheIndex=i;t[i]=r},_takeBackAction:function(e){var t=this._actions,i=e._cacheIndex,n=--this._nActiveActions,r=t[n];e._cacheIndex=n;t[n]=e;r._cacheIndex=i;t[i]=r},_addInactiveBinding:function(e,t,i){var n=this._bindingsByRootAndName,r=n[t],a=this._bindings;if(r===undefined){r={};n[t]=r}r[i]=e;e._cacheIndex=a.length;a.push(e)},_removeInactiveBinding:function(e){var t=this._bindings,i=e.binding,n=i.rootNode.uuid,r=i.path,a=this._bindingsByRootAndName,s=a[n],o=t[t.length-1],l=e._cacheIndex;o._cacheIndex=l;t[l]=o;t.pop();delete s[r];e:{for(var u in s)break e;delete a[n]}},_lendBinding:function(e){var t=this._bindings,i=e._cacheIndex,n=this._nActiveBindings++,r=t[n];e._cacheIndex=n;t[n]=e;r._cacheIndex=i;t[i]=r},_takeBackBinding:function(e){var t=this._bindings,i=e._cacheIndex,n=--this._nActiveBindings,r=t[n];e._cacheIndex=n;t[n]=e;r._cacheIndex=i;t[i]=r},_lendControlInterpolant:function(){var e=this._controlInterpolants,t=this._nActiveControlInterpolants++,i=e[t];if(i===undefined){i=new Wo(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer);i.__cacheIndex=t;e[t]=i}return i},_takeBackControlInterpolant:function(e){var t=this._controlInterpolants,i=e.__cacheIndex,n=--this._nActiveControlInterpolants,r=t[n];e.__cacheIndex=n;t[n]=e;r.__cacheIndex=i;t[i]=r},_controlInterpolantsResultBuffer:new Float32Array(1),clipAction:function(e,t){var i=t||this._root,n=i.uuid,r=typeof e==="string"?nl.findByName(i,e):e,a=r!==null?r.uuid:e,s=this._actionsByClip[a],o=null;if(s!==undefined){var l=s.actionByRoot[n];if(l!==undefined){return l}o=s.knownActions[0];if(r===null)r=o._clip}if(r===null)return null;var u=new Zl(this,r,t);this._bindAction(u,o);this._addInactiveAction(u,a,n);return u},existingAction:function(e,t){var i=t||this._root,n=i.uuid,r=typeof e==="string"?nl.findByName(i,e):e,a=r?r.uuid:e,s=this._actionsByClip[a];if(s!==undefined){return s.actionByRoot[n]||null}return null},stopAllAction:function(){var e=this._actions,t=this._nActiveActions,i=this._bindings,n=this._nActiveBindings;this._nActiveActions=0;this._nActiveBindings=0;for(var r=0;r!==t;++r){e[r].reset()}for(var r=0;r!==n;++r){i[r].useCount=0}return this},update:function(e){e*=this.timeScale;var t=this._actions,i=this._nActiveActions,n=this.time+=e,r=Math.sign(e),a=this._accuIndex^=1;for(var s=0;s!==i;++s){var o=t[s];o._update(n,e,r,a)}var l=this._bindings,u=this._nActiveBindings;for(var s=0;s!==u;++s){l[s].apply(a)}return this},getRoot:function(){return this._root},uncacheClip:function(e){var t=this._actions,i=e.uuid,n=this._actionsByClip,r=n[i];if(r!==undefined){var a=r.knownActions;for(var s=0,o=a.length;s!==o;++s){var l=a[s];this._deactivateAction(l);var u=l._cacheIndex,c=t[t.length-1];l._cacheIndex=null;l._byClipCacheIndex=null;c._cacheIndex=u;t[u]=c;t.pop();this._removeInactiveBindingsForAction(l)}delete n[i]}},uncacheRoot:function(e){var t=e.uuid,i=this._actionsByClip;for(var n in i){var r=i[n].actionByRoot,a=r[t];if(a!==undefined){this._deactivateAction(a);this._removeInactiveAction(a)}}var s=this._bindingsByRootAndName,o=s[t];if(o!==undefined){for(var l in o){var u=o[l];u.restoreOriginalState();this._removeInactiveBinding(u)}}},uncacheAction:function(e,t){var i=this.existingAction(e,t);if(i!==null){this._deactivateAction(i);this._removeInactiveAction(i)}}});function Kl(e){if(typeof e==="string"){console.warn("THREE.Uniform: Type parameter is no longer needed.");e=arguments[1]}this.value=e}Kl.prototype.clone=function(){return new Kl(this.value.clone===undefined?this.value:this.value.clone())};function Ql(){ha.call(this);this.type="InstancedBufferGeometry";this.maxInstancedCount=undefined}Ql.prototype=Object.assign(Object.create(ha.prototype),{constructor:Ql,isInstancedBufferGeometry:true,addGroup:function(e,t,i){this.groups.push({start:e,count:t,materialIndex:i})},copy:function(e){var t=e.index;if(t!==null){this.setIndex(t.clone())}var i=e.attributes;for(var n in i){var r=i[n];this.addAttribute(n,r.clone())}var a=e.groups;for(var s=0,o=a.length;s<o;s++){var l=a[s];this.addGroup(l.start,l.count,l.materialIndex)}return this}});function $l(e,t,i,n){this.uuid=bt.generateUUID();this.data=e;this.itemSize=t;this.offset=i;this.normalized=n===true}Object.defineProperties($l.prototype,{count:{get:function(){return this.data.count}},array:{get:function(){return this.data.array}}});Object.assign($l.prototype,{isInterleavedBufferAttribute:true,setX:function(e,t){this.data.array[e*this.data.stride+this.offset]=t;return this},setY:function(e,t){this.data.array[e*this.data.stride+this.offset+1]=t;return this},setZ:function(e,t){this.data.array[e*this.data.stride+this.offset+2]=t;return this},setW:function(e,t){this.data.array[e*this.data.stride+this.offset+3]=t;return this},getX:function(e){return this.data.array[e*this.data.stride+this.offset]},getY:function(e){return this.data.array[e*this.data.stride+this.offset+1]},getZ:function(e){return this.data.array[e*this.data.stride+this.offset+2]},getW:function(e){return this.data.array[e*this.data.stride+this.offset+3]},setXY:function(e,t,i){e=e*this.data.stride+this.offset;this.data.array[e+0]=t;this.data.array[e+1]=i;return this},setXYZ:function(e,t,i,n){e=e*this.data.stride+this.offset;this.data.array[e+0]=t;this.data.array[e+1]=i;this.data.array[e+2]=n;return this},setXYZW:function(e,t,i,n,r){e=e*this.data.stride+this.offset;this.data.array[e+0]=t;this.data.array[e+1]=i;this.data.array[e+2]=n;this.data.array[e+3]=r;return this}});function eu(e,t){this.uuid=bt.generateUUID();this.array=e;this.stride=t;this.count=e!==undefined?e.length/t:0;this.dynamic=false;this.updateRange={offset:0,count:-1};this.onUploadCallback=function(){};this.version=0}Object.defineProperty(eu.prototype,"needsUpdate",{set:function(e){if(e===true)this.version++}});Object.assign(eu.prototype,{isInterleavedBuffer:true,setArray:function(e){if(Array.isArray(e)){throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.")}this.count=e!==undefined?e.length/this.stride:0;this.array=e},setDynamic:function(e){this.dynamic=e;return this},copy:function(e){this.array=new e.array.constructor(e.array);this.count=e.count;this.stride=e.stride;this.dynamic=e.dynamic;return this},copyAt:function(e,t,i){e*=this.stride;i*=t.stride;for(var n=0,r=this.stride;n<r;n++){this.array[e+n]=t.array[i+n]}return this},set:function(e,t){if(t===undefined)t=0;this.array.set(e,t);return this},clone:function(){return(new this.constructor).copy(this)},onUpload:function(e){this.onUploadCallback=e;return this}});function tu(e,t,i){eu.call(this,e,t);this.meshPerAttribute=i||1}tu.prototype=Object.assign(Object.create(eu.prototype),{constructor:tu,isInstancedInterleavedBuffer:true,copy:function(e){eu.prototype.copy.call(this,e);this.meshPerAttribute=e.meshPerAttribute;return this}});function iu(e,t,i){$r.call(this,e,t);this.meshPerAttribute=i||1}iu.prototype=Object.assign(Object.create($r.prototype),{constructor:iu,isInstancedBufferAttribute:true,copy:function(e){$r.prototype.copy.call(this,e);this.meshPerAttribute=e.meshPerAttribute;return this}});function nu(e,t,i,n){this.ray=new ga(e,t);this.near=i||0;this.far=n||Infinity;this.params={Mesh:{},Line:{},LOD:{},Points:{threshold:1},Sprite:{}};Object.defineProperties(this.params,{PointCloud:{get:function(){console.warn("THREE.Raycaster: params.PointCloud has been renamed to params.Points.");return this.Points}}})}function ru(e,t){return e.distance-t.distance}function au(e,t,i,n){if(e.visible===false)return;e.raycast(t,i);if(n===true){var r=e.children;for(var a=0,s=r.length;a<s;a++){au(r[a],t,i,true)}}}Object.assign(nu.prototype,{linePrecision:1,set:function(e,t){this.ray.set(e,t)},setFromCamera:function(e,t){if(t&&t.isPerspectiveCamera){this.ray.origin.setFromMatrixPosition(t.matrixWorld);this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize()}else if(t&&t.isOrthographicCamera){this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t);this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld)}else{console.error("THREE.Raycaster: Unsupported camera type.")}},intersectObject:function(e,t){var i=[];au(e,this,i,t);i.sort(ru);return i},intersectObjects:function(e,t){var i=[];if(Array.isArray(e)===false){console.warn("THREE.Raycaster.intersectObjects: objects is not an Array.");return i}for(var n=0,r=e.length;n<r;n++){au(e[n],this,i,t)}i.sort(ru);return i}});function su(e){this.autoStart=e!==undefined?e:true;this.startTime=0;this.oldTime=0;this.elapsedTime=0;this.running=false}Object.assign(su.prototype,{start:function(){this.startTime=(typeof performance==="undefined"?Date:performance).now();this.oldTime=this.startTime;this.elapsedTime=0;this.running=true},stop:function(){this.getElapsedTime();this.running=false;this.autoStart=false},getElapsedTime:function(){this.getDelta();return this.elapsedTime},getDelta:function(){var e=0;if(this.autoStart&&!this.running){this.start();return 0}if(this.running){var t=(typeof performance==="undefined"?Date:performance).now();e=(t-this.oldTime)/1e3;this.oldTime=t;this.elapsedTime+=e}return e}});function ou(e,t,i){this.radius=e!==undefined?e:1;this.phi=t!==undefined?t:0;this.theta=i!==undefined?i:0;return this}Object.assign(ou.prototype,{set:function(e,t,i){this.radius=e;this.phi=t;this.theta=i;return this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){this.radius=e.radius;this.phi=e.phi;this.theta=e.theta;return this},makeSafe:function(){var e=1e-6;this.phi=Math.max(e,Math.min(Math.PI-e,this.phi));return this},setFromVector3:function(e){this.radius=e.length();if(this.radius===0){this.theta=0;this.phi=0}else{this.theta=Math.atan2(e.x,e.z);this.phi=Math.acos(bt.clamp(e.y/this.radius,-1,1))}return this}});function lu(e,t,i){this.radius=e!==undefined?e:1;this.theta=t!==undefined?t:0;this.y=i!==undefined?i:0;return this}Object.assign(lu.prototype,{set:function(e,t,i){this.radius=e;this.theta=t
;this.y=i;return this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){this.radius=e.radius;this.theta=e.theta;this.y=e.y;return this},setFromVector3:function(e){this.radius=Math.sqrt(e.x*e.x+e.z*e.z);this.theta=Math.atan2(e.x,e.z);this.y=e.y;return this}});function uu(e){Wr.call(this);this.material=e;this.render=function(e){}}uu.prototype=Object.create(Wr.prototype);uu.prototype.constructor=uu;uu.prototype.isImmediateRenderObject=true;function cu(e,t,i,n){this.object=e;this.size=t!==undefined?t:1;var r=i!==undefined?i:16711680;var a=n!==undefined?n:1;var s=0;var o=this.object.geometry;if(o&&o.isGeometry){s=o.faces.length*3}else if(o&&o.isBufferGeometry){s=o.attributes.normal.count}var l=new ha;var u=new oa(s*2*3,3);l.addAttribute("position",u);ys.call(this,l,new vs({color:r,linewidth:a}));this.matrixAutoUpdate=false;this.update()}cu.prototype=Object.create(ys.prototype);cu.prototype.constructor=cu;cu.prototype.update=function(){var e=new At;var t=new At;var i=new Fr;return function n(){var r=["a","b","c"];this.object.updateMatrixWorld(true);i.getNormalMatrix(this.object.matrixWorld);var a=this.object.matrixWorld;var s=this.geometry.attributes.position;var o=this.object.geometry;if(o&&o.isGeometry){var l=o.vertices;var u=o.faces;var c=0;for(var h=0,f=u.length;h<f;h++){var d=u[h];for(var p=0,m=d.vertexNormals.length;p<m;p++){var v=l[d[r[p]]];var g=d.vertexNormals[p];e.copy(v).applyMatrix4(a);t.copy(g).applyMatrix3(i).normalize().multiplyScalar(this.size).add(e);s.setXYZ(c,e.x,e.y,e.z);c=c+1;s.setXYZ(c,t.x,t.y,t.z);c=c+1}}}else if(o&&o.isBufferGeometry){var y=o.attributes.position;var b=o.attributes.normal;var c=0;for(var p=0,m=y.count;p<m;p++){e.set(y.getX(p),y.getY(p),y.getZ(p)).applyMatrix4(a);t.set(b.getX(p),b.getY(p),b.getZ(p));t.applyMatrix3(i).normalize().multiplyScalar(this.size).add(e);s.setXYZ(c,e.x,e.y,e.z);c=c+1;s.setXYZ(c,t.x,t.y,t.z);c=c+1}}s.needsUpdate=true}}();function hu(e,t){Wr.call(this);this.light=e;this.light.updateMatrixWorld();this.matrix=e.matrixWorld;this.matrixAutoUpdate=false;this.color=t;var i=new ha;var n=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(var r=0,a=1,s=32;r<s;r++,a++){var o=r/s*Math.PI*2;var l=a/s*Math.PI*2;n.push(Math.cos(o),Math.sin(o),1,Math.cos(l),Math.sin(l),1)}i.addAttribute("position",new oa(n,3));var u=new vs({fog:false});this.cone=new ys(i,u);this.add(this.cone);this.update()}hu.prototype=Object.create(Wr.prototype);hu.prototype.constructor=hu;hu.prototype.dispose=function(){this.cone.geometry.dispose();this.cone.material.dispose()};hu.prototype.update=function(){var e=new At;var t=new At;return function i(){this.light.updateMatrixWorld();var n=this.light.distance?this.light.distance:1e3;var r=n*Math.tan(this.light.angle);this.cone.scale.set(r,r,n);e.setFromMatrixPosition(this.light.matrixWorld);t.setFromMatrixPosition(this.light.target.matrixWorld);this.cone.lookAt(t.sub(e));if(this.color!==undefined){this.cone.material.color.set(this.color)}else{this.cone.material.color.copy(this.light.color)}}}();function fu(e){var t=[];if(e&&e.isBone){t.push(e)}for(var i=0;i<e.children.length;i++){t.push.apply(t,fu(e.children[i]))}return t}function du(e){var t=fu(e);var i=new ha;var n=[];var r=[];var a=new bi(0,0,1);var s=new bi(0,1,0);for(var o=0;o<t.length;o++){var l=t[o];if(l.parent&&l.parent.isBone){n.push(0,0,0);n.push(0,0,0);r.push(a.r,a.g,a.b);r.push(s.r,s.g,s.b)}}i.addAttribute("position",new oa(n,3));i.addAttribute("color",new oa(r,3));var u=new vs({vertexColors:x,depthTest:false,depthWrite:false,transparent:true});ys.call(this,i,u);this.root=e;this.bones=t;this.matrix=e.matrixWorld;this.matrixAutoUpdate=false;this.onBeforeRender()}du.prototype=Object.create(ys.prototype);du.prototype.constructor=du;du.prototype.onBeforeRender=function(){var e=new At;var t=new Pt;var i=new Pt;return function n(){var r=this.bones;var a=this.geometry;var s=a.getAttribute("position");i.getInverse(this.root.matrixWorld);for(var o=0,l=0;o<r.length;o++){var u=r[o];if(u.parent&&u.parent.isBone){t.multiplyMatrices(i,u.matrixWorld);e.setFromMatrixPosition(t);s.setXYZ(l,e.x,e.y,e.z);t.multiplyMatrices(i,u.parent.matrixWorld);e.setFromMatrixPosition(t);s.setXYZ(l+1,e.x,e.y,e.z);l+=2}}a.getAttribute("position").needsUpdate=true}}();function pu(e,t,i){this.light=e;this.light.updateMatrixWorld();this.color=i;var n=new Ks(t,4,2);var r=new va({wireframe:true,fog:false});xa.call(this,n,r);this.matrix=this.light.matrixWorld;this.matrixAutoUpdate=false;this.update()}pu.prototype=Object.create(xa.prototype);pu.prototype.constructor=pu;pu.prototype.dispose=function(){this.geometry.dispose();this.material.dispose()};pu.prototype.update=function(){if(this.color!==undefined){this.material.color.set(this.color)}else{this.material.color.copy(this.light.color)}};function mu(e,t){Wr.call(this);this.light=e;this.light.updateMatrixWorld();this.matrix=e.matrixWorld;this.matrixAutoUpdate=false;this.color=t;var i=new vs({fog:false});var n=new ha;n.addAttribute("position",new $r(new Float32Array(5*3),3));this.line=new gs(n,i);this.add(this.line);this.update()}mu.prototype=Object.create(Wr.prototype);mu.prototype.constructor=mu;mu.prototype.dispose=function(){this.children[0].geometry.dispose();this.children[0].material.dispose()};mu.prototype.update=function(){var e=this.light.width*.5;var t=this.light.height*.5;var i=this.line.geometry.attributes.position;var n=i.array;n[0]=e;n[1]=-t;n[2]=0;n[3]=e;n[4]=t;n[5]=0;n[6]=-e;n[7]=t;n[8]=0;n[9]=-e;n[10]=-t;n[11]=0;n[12]=e;n[13]=-t;n[14]=0;i.needsUpdate=true;if(this.color!==undefined){this.line.material.color.set(this.color)}else{this.line.material.color.copy(this.light.color)}};function vu(e,t,i){Wr.call(this);this.light=e;this.light.updateMatrixWorld();this.matrix=e.matrixWorld;this.matrixAutoUpdate=false;this.color=i;var n=new Is(t);n.rotateY(Math.PI*.5);this.material=new va({wireframe:true,fog:false});if(this.color===undefined)this.material.vertexColors=x;var r=n.getAttribute("position");var a=new Float32Array(r.count*3);n.addAttribute("color",new $r(a,3));this.add(new xa(n,this.material));this.update()}vu.prototype=Object.create(Wr.prototype);vu.prototype.constructor=vu;vu.prototype.dispose=function(){this.children[0].geometry.dispose();this.children[0].material.dispose()};vu.prototype.update=function(){var e=new At;var t=new bi;var i=new bi;return function n(){var r=this.children[0];if(this.color!==undefined){this.material.color.set(this.color)}else{var a=r.geometry.getAttribute("color");t.copy(this.light.color);i.copy(this.light.groundColor);for(var s=0,o=a.count;s<o;s++){var l=s<o/2?t:i;a.setXYZ(s,l.r,l.g,l.b)}a.needsUpdate=true}r.lookAt(e.setFromMatrixPosition(this.light.matrixWorld).negate())}}();function gu(e,t,i,n){e=e||10;t=t||10;i=new bi(i!==undefined?i:4473924);n=new bi(n!==undefined?n:8947848);var r=t/2;var a=e/t;var s=e/2;var o=[],l=[];for(var u=0,c=0,h=-s;u<=t;u++,h+=a){o.push(-s,0,h,s,0,h);o.push(h,0,-s,h,0,s);var f=u===r?i:n;f.toArray(l,c);c+=3;f.toArray(l,c);c+=3;f.toArray(l,c);c+=3;f.toArray(l,c);c+=3}var d=new ha;d.addAttribute("position",new oa(o,3));d.addAttribute("color",new oa(l,3));var p=new vs({vertexColors:x});ys.call(this,d,p)}gu.prototype=Object.create(ys.prototype);gu.prototype.constructor=gu;function yu(e,t,i,n,r,a){e=e||10;t=t||16;i=i||8;n=n||64;r=new bi(r!==undefined?r:4473924);a=new bi(a!==undefined?a:8947848);var s=[];var o=[];var l,u;var c,h,f,d,p;for(h=0;h<=t;h++){c=h/t*(Math.PI*2);l=Math.sin(c)*e;u=Math.cos(c)*e;s.push(0,0,0);s.push(l,0,u);p=h&1?r:a;o.push(p.r,p.g,p.b);o.push(p.r,p.g,p.b)}for(h=0;h<=i;h++){p=h&1?r:a;d=e-e/i*h;for(f=0;f<n;f++){c=f/n*(Math.PI*2);l=Math.sin(c)*d;u=Math.cos(c)*d;s.push(l,0,u);o.push(p.r,p.g,p.b);c=(f+1)/n*(Math.PI*2);l=Math.sin(c)*d;u=Math.cos(c)*d;s.push(l,0,u);o.push(p.r,p.g,p.b)}}var m=new ha;m.addAttribute("position",new oa(s,3));m.addAttribute("color",new oa(o,3));var v=new vs({vertexColors:x});ys.call(this,m,v)}yu.prototype=Object.create(ys.prototype);yu.prototype.constructor=yu;function bu(e,t,i,n){this.object=e;this.size=t!==undefined?t:1;var r=i!==undefined?i:16776960;var a=n!==undefined?n:1;var s=0;var o=this.object.geometry;if(o&&o.isGeometry){s=o.faces.length}else{console.warn("THREE.FaceNormalsHelper: only THREE.Geometry is supported. Use THREE.VertexNormalsHelper, instead.")}var l=new ha;var u=new oa(s*2*3,3);l.addAttribute("position",u);ys.call(this,l,new vs({color:r,linewidth:a}));this.matrixAutoUpdate=false;this.update()}bu.prototype=Object.create(ys.prototype);bu.prototype.constructor=bu;bu.prototype.update=function(){var e=new At;var t=new At;var i=new Fr;return function n(){this.object.updateMatrixWorld(true);i.getNormalMatrix(this.object.matrixWorld);var r=this.object.matrixWorld;var a=this.geometry.attributes.position;var s=this.object.geometry;var o=s.vertices;var l=s.faces;var u=0;for(var c=0,h=l.length;c<h;c++){var f=l[c];var d=f.normal;e.copy(o[f.a]).add(o[f.b]).add(o[f.c]).divideScalar(3).applyMatrix4(r);t.copy(d).applyMatrix3(i).normalize().multiplyScalar(this.size).add(e);a.setXYZ(u,e.x,e.y,e.z);u=u+1;a.setXYZ(u,t.x,t.y,t.z);u=u+1}a.needsUpdate=true}}();function xu(e,t,i){Wr.call(this);this.light=e;this.light.updateMatrixWorld();this.matrix=e.matrixWorld;this.matrixAutoUpdate=false;this.color=i;if(t===undefined)t=1;var n=new ha;n.addAttribute("position",new oa([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));var r=new vs({fog:false});this.lightPlane=new gs(n,r);this.add(this.lightPlane);n=new ha;n.addAttribute("position",new oa([0,0,0,0,0,1],3));this.targetLine=new gs(n,r);this.add(this.targetLine);this.update()}xu.prototype=Object.create(Wr.prototype);xu.prototype.constructor=xu;xu.prototype.dispose=function(){this.lightPlane.geometry.dispose();this.lightPlane.material.dispose();this.targetLine.geometry.dispose();this.targetLine.material.dispose()};xu.prototype.update=function(){var e=new At;var t=new At;var i=new At;return function n(){e.setFromMatrixPosition(this.light.matrixWorld);t.setFromMatrixPosition(this.light.target.matrixWorld);i.subVectors(t,e);this.lightPlane.lookAt(i);if(this.color!==undefined){this.lightPlane.material.color.set(this.color);this.targetLine.material.color.set(this.color)}else{this.lightPlane.material.color.copy(this.light.color);this.targetLine.material.color.copy(this.light.color)}this.targetLine.lookAt(i);this.targetLine.scale.z=i.length()}}();function _u(e){var t=new ha;var i=new vs({color:16777215,vertexColors:b});var n=[];var r=[];var a={};var s=new bi(16755200);var o=new bi(16711680);var l=new bi(43775);var u=new bi(16777215);var c=new bi(3355443);h("n1","n2",s);h("n2","n4",s);h("n4","n3",s);h("n3","n1",s);h("f1","f2",s);h("f2","f4",s);h("f4","f3",s);h("f3","f1",s);h("n1","f1",s);h("n2","f2",s);h("n3","f3",s);h("n4","f4",s);h("p","n1",o);h("p","n2",o);h("p","n3",o);h("p","n4",o);h("u1","u2",l);h("u2","u3",l);h("u3","u1",l);h("c","t",u);h("p","c",c);h("cn1","cn2",c);h("cn3","cn4",c);h("cf1","cf2",c);h("cf3","cf4",c);function h(e,t,i){f(e,i);f(t,i)}function f(e,t){n.push(0,0,0);r.push(t.r,t.g,t.b);if(a[e]===undefined){a[e]=[]}a[e].push(n.length/3-1)}t.addAttribute("position",new oa(n,3));t.addAttribute("color",new oa(r,3));ys.call(this,t,i);this.camera=e;if(this.camera.updateProjectionMatrix)this.camera.updateProjectionMatrix();this.matrix=e.matrixWorld;this.matrixAutoUpdate=false;this.pointMap=a;this.update()}_u.prototype=Object.create(ys.prototype);_u.prototype.constructor=_u;_u.prototype.update=function(){var e,t;var i=new At;var n=new Xr;function r(r,a,s,o){i.set(a,s,o).unproject(n);var l=t[r];if(l!==undefined){var u=e.getAttribute("position");for(var c=0,h=l.length;c<h;c++){u.setXYZ(l[c],i.x,i.y,i.z)}}}return function i(){e=this.geometry;t=this.pointMap;var a=1,s=1;n.projectionMatrix.copy(this.camera.projectionMatrix);r("c",0,0,-1);r("t",0,0,1);r("n1",-a,-s,-1);r("n2",a,-s,-1);r("n3",-a,s,-1);r("n4",a,s,-1);r("f1",-a,-s,1);r("f2",a,-s,1);r("f3",-a,s,1);r("f4",a,s,1);r("u1",a*.7,s*1.1,-1);r("u2",-a*.7,s*1.1,-1);r("u3",0,s*2,-1);r("cf1",-a,0,1);r("cf2",a,0,1);r("cf3",0,-s,1);r("cf4",0,s,1);r("cn1",-a,0,-1);r("cn2",a,0,-1);r("cn3",0,-s,-1);r("cn4",0,s,-1);e.getAttribute("position").needsUpdate=true}}();function wu(e,t){this.object=e;if(t===undefined)t=16776960;var i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]);var n=new Float32Array(8*3);var r=new ha;r.setIndex(new $r(i,1));r.addAttribute("position",new $r(n,3));ys.call(this,r,new vs({color:t}));this.matrixAutoUpdate=false;this.update()}wu.prototype=Object.create(ys.prototype);wu.prototype.constructor=wu;wu.prototype.update=function(){var e=new kr;return function t(i){if(i!==undefined){console.warn("THREE.BoxHelper: .update() has no longer arguments.")}if(this.object!==undefined){e.setFromObject(this.object)}if(e.isEmpty())return;var n=e.min;var r=e.max;var a=this.geometry.attributes.position;var s=a.array;s[0]=r.x;s[1]=r.y;s[2]=r.z;s[3]=n.x;s[4]=r.y;s[5]=r.z;s[6]=n.x;s[7]=n.y;s[8]=r.z;s[9]=r.x;s[10]=n.y;s[11]=r.z;s[12]=r.x;s[13]=r.y;s[14]=n.z;s[15]=n.x;s[16]=r.y;s[17]=n.z;s[18]=n.x;s[19]=n.y;s[20]=n.z;s[21]=r.x;s[22]=n.y;s[23]=n.z;a.needsUpdate=true;this.geometry.computeBoundingSphere()}}();wu.prototype.setFromObject=function(e){this.object=e;this.update();return this};function Tu(e,t){this.type="Box3Helper";this.box=e;var i=t!==undefined?t:16776960;var n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]);var r=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1];var a=new ha;a.setIndex(new $r(n,1));a.addAttribute("position",new oa(r,3));ys.call(this,a,new vs({color:i}));this.geometry.computeBoundingSphere();this.onBeforeRender()}Tu.prototype=Object.create(ys.prototype);Tu.prototype.constructor=Tu;Tu.prototype.onBeforeRender=function(){var e=this.box;if(e.isEmpty())return;e.getCenter(this.position);e.getSize(this.scale);this.scale.multiplyScalar(.5)};function Mu(e,t,i){this.type="PlaneHelper";this.plane=e;this.size=t===undefined?1:t;var n=i!==undefined?i:16776960;var r=[1,-1,1,-1,1,1,-1,-1,1,1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,0,0,1,0,0,0];var a=new ha;a.addAttribute("position",new oa(r,3));a.computeBoundingSphere();gs.call(this,a,new vs({color:n}));var s=[1,1,1,-1,1,1,-1,-1,1,1,1,1,-1,-1,1,1,-1,1];var o=new ha;o.addAttribute("position",new oa(s,3));o.computeBoundingSphere();this.add(new xa(o,new va({color:n,opacity:.2,transparent:true,depthWrite:false})));this.onBeforeRender()}Mu.prototype=Object.create(gs.prototype);Mu.prototype.constructor=Mu;Mu.prototype.onBeforeRender=function(){var e=-this.plane.constant;if(Math.abs(e)<1e-8)e=1e-8;this.scale.set(.5*this.size,.5*this.size,e);this.lookAt(this.plane.normal);this.updateMatrixWorld()};var Su;var Eu;function Au(e,t,i,n,r,a){Wr.call(this);if(n===undefined)n=16776960;if(i===undefined)i=1;if(r===undefined)r=.2*i;if(a===undefined)a=.2*r;if(Su===undefined){Su=new ha;Su.addAttribute("position",new oa([0,0,0,0,1,0],3));Eu=new so(0,.5,1,5,1);Eu.translate(0,-.5,0)}this.position.copy(t);this.line=new gs(Su,new vs({color:n}));this.line.matrixAutoUpdate=false;this.add(this.line);this.cone=new xa(Eu,new va({color:n}));this.cone.matrixAutoUpdate=false;this.add(this.cone);this.setDirection(e);this.setLength(i,r,a)}Au.prototype=Object.create(Wr.prototype);Au.prototype.constructor=Au;Au.prototype.setDirection=function(){var e=new At;var t;return function i(n){if(n.y>.99999){this.quaternion.set(0,0,0,1)}else if(n.y<-.99999){this.quaternion.set(1,0,0,0)}else{e.set(n.z,0,-n.x).normalize();t=Math.acos(n.y);this.quaternion.setFromAxisAngle(e,t)}}}();Au.prototype.setLength=function(e,t,i){if(t===undefined)t=.2*e;if(i===undefined)i=.2*t;this.line.scale.set(1,Math.max(0,e-t),1);this.line.updateMatrix();this.cone.scale.set(i,t,i);this.cone.position.y=e;this.cone.updateMatrix()};Au.prototype.setColor=function(e){this.line.material.color.copy(e);this.cone.material.color.copy(e)};function Pu(e){e=e||1;var t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e];var i=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1];var n=new ha;n.addAttribute("position",new oa(t,3));n.addAttribute("color",new oa(i,3));var r=new vs({vertexColors:x});ys.call(this,n,r)}Pu.prototype=Object.create(ys.prototype);Pu.prototype.constructor=Pu;function Lu(){var e=0,t=0,i=0,n=0;function r(r,a,s,o){e=r;t=s;i=-3*r+3*a-2*s-o;n=2*r-2*a+s+o}return{initCatmullRom:function(e,t,i,n,a){r(t,i,a*(i-e),a*(n-t))},initNonuniformCatmullRom:function(e,t,i,n,a,s,o){var l=(t-e)/a-(i-e)/(a+s)+(i-t)/s;var u=(i-t)/s-(n-t)/(s+o)+(n-i)/o;l*=s;u*=s;r(t,i,l,u)},calc:function(r){var a=r*r;var s=a*r;return e+t*r+i*a+n*s}}}var Ru=new At;var Cu=new Lu;var Ou=new Lu;var Du=new Lu;function Iu(e){Tl.call(this);if(e.length<2)console.warn("THREE.CatmullRomCurve3: Points array needs at least two entries.");this.points=e||[];this.closed=false}Iu.prototype=Object.create(Tl.prototype);Iu.prototype.constructor=Iu;Iu.prototype.getPoint=function(e){var t=this.points;var i=t.length;var n=(i-(this.closed?0:1))*e;var r=Math.floor(n);var a=n-r;if(this.closed){r+=r>0?0:(Math.floor(Math.abs(r)/t.length)+1)*t.length}else if(a===0&&r===i-1){r=i-2;a=1}var s,o,l,u;if(this.closed||r>0){s=t[(r-1)%i]}else{Ru.subVectors(t[0],t[1]).add(t[0]);s=Ru}o=t[r%i];l=t[(r+1)%i];if(this.closed||r+2<i){u=t[(r+2)%i]}else{Ru.subVectors(t[i-1],t[i-2]).add(t[i-1]);u=Ru}if(this.type===undefined||this.type==="centripetal"||this.type==="chordal"){var c=this.type==="chordal"?.5:.25;var h=Math.pow(s.distanceToSquared(o),c);var f=Math.pow(o.distanceToSquared(l),c);var d=Math.pow(l.distanceToSquared(u),c);if(f<1e-4)f=1;if(h<1e-4)h=f;if(d<1e-4)d=f;Cu.initNonuniformCatmullRom(s.x,o.x,l.x,u.x,h,f,d);Ou.initNonuniformCatmullRom(s.y,o.y,l.y,u.y,h,f,d);Du.initNonuniformCatmullRom(s.z,o.z,l.z,u.z,h,f,d)}else if(this.type==="catmullrom"){var p=this.tension!==undefined?this.tension:.5;Cu.initCatmullRom(s.x,o.x,l.x,u.x,p);Ou.initCatmullRom(s.y,o.y,l.y,u.y,p);Du.initCatmullRom(s.z,o.z,l.z,u.z,p)}return new At(Cu.calc(a),Ou.calc(a),Du.calc(a))};function ku(e,t,i,n){Tl.call(this);this.v0=e;this.v1=t;this.v2=i;this.v3=n}ku.prototype=Object.create(Tl.prototype);ku.prototype.constructor=ku;ku.prototype.getPoint=function(e){var t=this.v0,i=this.v1,n=this.v2,r=this.v3;return new At(wl(e,t.x,i.x,n.x,r.x),wl(e,t.y,i.y,n.y,r.y),wl(e,t.z,i.z,n.z,r.z))};function Uu(e,t,i){Tl.call(this);this.v0=e;this.v1=t;this.v2=i}Uu.prototype=Object.create(Tl.prototype);Uu.prototype.constructor=Uu;Uu.prototype.getPoint=function(e){var t=this.v0,i=this.v1,n=this.v2;return new At(gl(e,t.x,i.x,n.x),gl(e,t.y,i.y,n.y),gl(e,t.z,i.z,n.z))};function Fu(e,t){Tl.call(this);this.v1=e;this.v2=t}Fu.prototype=Object.create(Tl.prototype);Fu.prototype.constructor=Fu;Fu.prototype.getPoint=function(e){if(e===1){return this.v2.clone()}var t=new At;t.subVectors(this.v2,this.v1);t.multiplyScalar(e);t.add(this.v1);return t};function Nu(e,t,i,n,r,a){El.call(this,e,t,i,i,n,r,a)}Nu.prototype=Object.create(El.prototype);Nu.prototype.constructor=Nu;var Bu={createMultiMaterialObject:function(e,t){var i=new ws;for(var n=0,r=t.length;n<r;n++){i.add(new xa(e,t[n]))}return i},detach:function(e,t,i){e.applyMatrix(t.matrixWorld);t.remove(e);i.add(e)},attach:function(e,t,i){e.applyMatrix((new Pt).getInverse(i.matrixWorld));t.remove(e);i.add(e)}};function zu(e,t,i,n,r,a,s){console.warn("THREE.Face4 has been removed. A THREE.Face3 will be created instead.");return new Zr(e,t,i,r,a,s)}var ju=0;var Gu=1;function Hu(e){console.warn("THREE.MeshFaceMaterial has been removed. Use an Array instead.");return e}function Vu(e){if(e===undefined)e=[];console.warn("THREE.MultiMaterial has been removed. Use an Array instead.");e.isMultiMaterial=true;e.materials=e;e.clone=function(){return e.slice()};return e}function Wu(e,t){console.warn("THREE.PointCloud has been renamed to THREE.Points.");return new _s(e,t)}function Xu(e){console.warn("THREE.Particle has been renamed to THREE.Sprite.");return new hs(e)}function Yu(e,t){console.warn("THREE.ParticleSystem has been renamed to THREE.Points.");return new _s(e,t)}function qu(e){console.warn("THREE.PointCloudMaterial has been renamed to THREE.PointsMaterial.");return new xs(e)}function Zu(e){console.warn("THREE.ParticleBasicMaterial has been renamed to THREE.PointsMaterial.");return new xs(e)}function Ju(e){console.warn("THREE.ParticleSystemMaterial has been renamed to THREE.PointsMaterial.");return new xs(e)}function Ku(e,t,i){console.warn("THREE.Vertex has been removed. Use THREE.Vector3 instead.");return new At(e,t,i)}function Qu(e,t){console.warn("THREE.DynamicBufferAttribute has been removed. Use new THREE.BufferAttribute().setDynamic( true ) instead.");return new $r(e,t).setDynamic(true)}function $u(e,t){console.warn("THREE.Int8Attribute has been removed. Use new THREE.Int8BufferAttribute() instead.");return new ea(e,t)}function ec(e,t){console.warn("THREE.Uint8Attribute has been removed. Use new THREE.Uint8BufferAttribute() instead.");return new ta(e,t)}function tc(e,t){console.warn("THREE.Uint8ClampedAttribute has been removed. Use new THREE.Uint8ClampedBufferAttribute() instead.");return new ia(e,t)}function ic(e,t){console.warn("THREE.Int16Attribute has been removed. Use new THREE.Int16BufferAttribute() instead.");return new na(e,t)}function nc(e,t){console.warn("THREE.Uint16Attribute has been removed. Use new THREE.Uint16BufferAttribute() instead.");return new ra(e,t)}function rc(e,t){console.warn("THREE.Int32Attribute has been removed. Use new THREE.Int32BufferAttribute() instead.");return new aa(e,t)}function ac(e,t){console.warn("THREE.Uint32Attribute has been removed. Use new THREE.Uint32BufferAttribute() instead.");return new sa(e,t)}function sc(e,t){console.warn("THREE.Float32Attribute has been removed. Use new THREE.Float32BufferAttribute() instead.");return new oa(e,t)}function oc(e,t){console.warn("THREE.Float64Attribute has been removed. Use new THREE.Float64BufferAttribute() instead.");return new la(e,t)}Tl.create=function(e,t){console.log("THREE.Curve.create() has been deprecated");e.prototype=Object.create(Tl.prototype);e.prototype.constructor=e;e.prototype.getPoint=t;return e};function lc(e){console.warn("THREE.ClosedSplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead.");Iu.call(this,e);this.type="catmullrom";this.closed=true}lc.prototype=Object.create(Iu.prototype);function uc(e){console.warn("THREE.SplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead.");Iu.call(this,e);this.type="catmullrom"}uc.prototype=Object.create(Iu.prototype);function cc(e){console.warn("THREE.Spline has been removed. Use THREE.CatmullRomCurve3 instead.");Iu.call(this,e);this.type="catmullrom"}cc.prototype=Object.create(Iu.prototype);Object.assign(cc.prototype,{initFromArray:function(e){console.error("THREE.Spline: .initFromArray() has been removed.")},getControlPointsArray:function(e){console.error("THREE.Spline: .getControlPointsArray() has been removed.")},reparametrizeByArcLength:function(e){console.error("THREE.Spline: .reparametrizeByArcLength() has been removed.")}});function hc(e,t){console.warn("THREE.BoundingBoxHelper has been deprecated. Creating a THREE.BoxHelper instead.");return new wu(e,t)}function fc(e,t){console.warn("THREE.EdgesHelper has been removed. Use THREE.EdgesGeometry instead.");return new ys(new ro(e.geometry),new vs({color:t!==undefined?t:16777215}))}gu.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")};du.prototype.update=function(){console.error("THREE.SkeletonHelper: update() no longer needs to be called.")};function dc(e,t){console.warn("THREE.WireframeHelper has been removed. Use THREE.WireframeGeometry instead.");return new ys(new Es(e.geometry),new vs({color:t!==undefined?t:16777215}))}function pc(e){console.warn("THREE.XHRLoader has been renamed to THREE.FileLoader.");return new Eo(e)}function mc(e){console.warn("THREE.BinaryTextureLoader has been renamed to THREE.DataTextureLoader.");return new Po(e)}Object.assign(Er.prototype,{center:function(e){console.warn("THREE.Box2: .center() has been renamed to .getCenter().");return this.getCenter(e)},empty:function(){console.warn("THREE.Box2: .empty() has been renamed to .isEmpty().");return this.isEmpty()},isIntersectionBox:function(e){console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox().");return this.intersectsBox(e)},size:function(e){console.warn("THREE.Box2: .size() has been renamed to .getSize().");return this.getSize(e)}});Object.assign(kr.prototype,{center:function(e){console.warn("THREE.Box3: .center() has been renamed to .getCenter().");return this.getCenter(e)},empty:function(){console.warn("THREE.Box3: .empty() has been renamed to .isEmpty().");return this.isEmpty()},isIntersectionBox:function(e){console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox().");return this.intersectsBox(e)},isIntersectionSphere:function(e){console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere().");return this.intersectsSphere(e)},size:function(e){console.warn("THREE.Box3: .size() has been renamed to .getSize().");return this.getSize(e)}});ya.prototype.center=function(e){console.warn("THREE.Line3: .center() has been renamed to .getCenter().");return this.getCenter(e)};bt.random16=function(){console.warn("THREE.Math.random16() has been deprecated. Use Math.random() instead.");return Math.random()};Object.assign(Fr.prototype,{flattenToArrayOffset:function(e,t){console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead.");return this.toArray(e,t)},multiplyVector3:function(e){console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead.");return e.applyMatrix3(this)},multiplyVector3Array:function(e){console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")},applyToBuffer:function(e,t,i){console.warn("THREE.Matrix3: .applyToBuffer() has been removed. Use matrix.applyToBufferAttribute( attribute ) instead.");return this.applyToBufferAttribute(e)},applyToVector3Array:function(e,t,i){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")}});Object.assign(Pt.prototype,{extractPosition:function(e){console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition().");return this.copyPosition(e)},flattenToArrayOffset:function(e,t){console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead.");return this.toArray(e,t)},getPosition:function(){var e;return function t(){if(e===undefined)e=new At;console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead.");return e.setFromMatrixColumn(this,3)}}(),setRotationFromQuaternion:function(e){console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion().");return this.makeRotationFromQuaternion(e)},multiplyToArray:function(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")},multiplyVector3:function(e){console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead.");return e.applyMatrix4(this)},multiplyVector4:function(e){console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead.");return e.applyMatrix4(this)},multiplyVector3Array:function(e){console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")},rotateAxis:function(e){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead.");e.transformDirection(this)},crossVector:function(e){console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead.");return e.applyMatrix4(this)},translate:function(){console.error("THREE.Matrix4: .translate() has been removed.")},rotateX:function(){console.error("THREE.Matrix4: .rotateX() has been removed.")},rotateY:function(){console.error("THREE.Matrix4: .rotateY() has been removed.")},rotateZ:function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")},rotateByAxis:function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")},applyToBuffer:function(e,t,i){console.warn("THREE.Matrix4: .applyToBuffer() has been removed. Use matrix.applyToBufferAttribute( attribute ) instead.");return this.applyToBufferAttribute(e)},applyToVector3Array:function(e,t,i){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")},makeFrustum:function(e,t,i,n,r,a){console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead.");return this.makePerspective(e,t,n,i,r,a)}});Nr.prototype.isIntersectionLine=function(e){console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine().");return this.intersectsLine(e)};Et.prototype.multiplyVector3=function(e){console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead.");return e.applyQuaternion(this)};Object.assign(ga.prototype,{isIntersectionBox:function(e){console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox().");return this.intersectsBox(e)},isIntersectionPlane:function(e){console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane().");return this.intersectsPlane(e)},isIntersectionSphere:function(e){console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere().");return this.intersectsSphere(e)}});Object.assign(Ol.prototype,{extrude:function(e){console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead.");return new Xs(this,e)},makeGeometry:function(e){console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead.");return new io(this,e)}});Object.assign(xt.prototype,{fromAttribute:function(e,t,i){console.error("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute().");return this.fromBufferAttribute(e,t,i)}});Object.assign(At.prototype,{setEulerFromRotationMatrix:function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},setEulerFromQuaternion:function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},getPositionFromMatrix:function(e){console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition().");return this.setFromMatrixPosition(e)},getScaleFromMatrix:function(e){console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale().");return this.setFromMatrixScale(e)},getColumnFromMatrix:function(e,t){console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn().");return this.setFromMatrixColumn(t,e)},applyProjection:function(e){console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead.");return this.applyMatrix4(e)},fromAttribute:function(e,t,i){console.error("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute().");return this.fromBufferAttribute(e,t,i)}});Object.assign(Tt.prototype,{fromAttribute:function(e,t,i){console.error("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute().");return this.fromBufferAttribute(e,t,i)}});Qr.prototype.computeTangents=function(){console.warn("THREE.Geometry: .computeTangents() has been removed.")};Object.assign(Wr.prototype,{getChildByName:function(e){console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName().");return this.getObjectByName(e)},renderDepth:function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},translate:function(e,t){console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead.");return this.translateOnAxis(t,e)}});Object.defineProperties(Wr.prototype,{eulerOrder:{get:function(){
console.warn("THREE.Object3D: .eulerOrder is now .rotation.order.");return this.rotation.order},set:function(e){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order.");this.rotation.order=e}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}});Object.defineProperties(fs.prototype,{objects:{get:function(){console.warn("THREE.LOD: .objects has been renamed to .levels.");return this.levels}}});Object.defineProperty(ds.prototype,"useVertexTexture",{get:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")},set:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")}});Object.defineProperty(Tl.prototype,"__arcLengthDivisions",{get:function(){console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions.");return this.arcLengthDivisions},set:function(e){console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions.");this.arcLengthDivisions=e}});qr.prototype.setLens=function(e,t){console.warn("THREE.PerspectiveCamera.setLens is deprecated. "+"Use .setFocalLength and .filmGauge for a photographic setup.");if(t!==undefined)this.filmGauge=t;this.setFocalLength(e)};Object.defineProperties(Oo.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(e){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov.");this.shadow.camera.fov=e}},shadowCameraLeft:{set:function(e){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left.");this.shadow.camera.left=e}},shadowCameraRight:{set:function(e){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right.");this.shadow.camera.right=e}},shadowCameraTop:{set:function(e){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top.");this.shadow.camera.top=e}},shadowCameraBottom:{set:function(e){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom.");this.shadow.camera.bottom=e}},shadowCameraNear:{set:function(e){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near.");this.shadow.camera.near=e}},shadowCameraFar:{set:function(e){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far.");this.shadow.camera.far=e}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(e){console.warn("THREE.Light: .shadowBias is now .shadow.bias.");this.shadow.bias=e}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(e){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width.");this.shadow.mapSize.width=e}},shadowMapHeight:{set:function(e){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height.");this.shadow.mapSize.height=e}}});Object.defineProperties($r.prototype,{length:{get:function(){console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead.");return this.array.length}}});Object.assign(ha.prototype,{addIndex:function(e){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex().");this.setIndex(e)},addDrawCall:function(e,t,i){if(i!==undefined){console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset.")}console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup().");this.addGroup(e,t)},clearDrawCalls:function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups().");this.clearGroups()},computeTangents:function(){console.warn("THREE.BufferGeometry: .computeTangents() has been removed.")},computeOffsets:function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")}});Object.defineProperties(ha.prototype,{drawcalls:{get:function(){console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups.");return this.groups}},offsets:{get:function(){console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups.");return this.groups}}});Object.defineProperties(Kl.prototype,{dynamic:{set:function(){console.warn("THREE.Uniform: .dynamic has been removed. Use object.onBeforeRender() instead.")}},onUpdate:{value:function(){console.warn("THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead.");return this}}});Object.defineProperties(Cr.prototype,{wrapAround:{get:function(){console.warn("THREE.Material: .wrapAround has been removed.")},set:function(){console.warn("THREE.Material: .wrapAround has been removed.")}},wrapRGB:{get:function(){console.warn("THREE.Material: .wrapRGB has been removed.");return new bi}},shading:{get:function(){console.error("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.")},set:function(e){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.");this.flatShading=e===v}}});Object.defineProperties(go.prototype,{metal:{get:function(){console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead.");return false},set:function(){console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead")}}});Object.defineProperties(Or.prototype,{derivatives:{get:function(){console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives.");return this.extensions.derivatives},set:function(e){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives.");this.extensions.derivatives=e}}});Object.assign(as.prototype,{getCurrentRenderTarget:function(){console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget().");return this.getRenderTarget()},getMaxAnisotropy:function(){console.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy().");return this.capabilities.getMaxAnisotropy()},getPrecision:function(){console.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision.");return this.capabilities.precision},supportsFloatTextures:function(){console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' ).");return this.extensions.get("OES_texture_float")},supportsHalfFloatTextures:function(){console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' ).");return this.extensions.get("OES_texture_half_float")},supportsStandardDerivatives:function(){console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' ).");return this.extensions.get("OES_standard_derivatives")},supportsCompressedTextureS3TC:function(){console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' ).");return this.extensions.get("WEBGL_compressed_texture_s3tc")},supportsCompressedTexturePVRTC:function(){console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' ).");return this.extensions.get("WEBGL_compressed_texture_pvrtc")},supportsBlendMinMax:function(){console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' ).");return this.extensions.get("EXT_blend_minmax")},supportsVertexTextures:function(){console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures.");return this.capabilities.vertexTextures},supportsInstancedArrays:function(){console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' ).");return this.extensions.get("ANGLE_instanced_arrays")},enableScissorTest:function(e){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest().");this.setScissorTest(e)},initMaterial:function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},addPrePlugin:function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},addPostPlugin:function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},updateShadowMap:function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")}});Object.defineProperties(as.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(e){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled.");this.shadowMap.enabled=e}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(e){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type.");this.shadowMap.type=e}},shadowMapCullFace:{get:function(){return this.shadowMap.cullFace},set:function(e){console.warn("THREE.WebGLRenderer: .shadowMapCullFace is now .shadowMap.cullFace.");this.shadowMap.cullFace=e}}});Object.defineProperties(zr.prototype,{cullFace:{get:function(){return this.renderReverseSided?s:a},set:function(e){var t=e!==a;console.warn("WebGLRenderer: .shadowMap.cullFace is deprecated. Set .shadowMap.renderReverseSided to "+t+".");this.renderReverseSided=t}}});Object.defineProperties(Mt.prototype,{wrapS:{get:function(){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS.");return this.texture.wrapS},set:function(e){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS.");this.texture.wrapS=e}},wrapT:{get:function(){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT.");return this.texture.wrapT},set:function(e){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT.");this.texture.wrapT=e}},magFilter:{get:function(){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter.");return this.texture.magFilter},set:function(e){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter.");this.texture.magFilter=e}},minFilter:{get:function(){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter.");return this.texture.minFilter},set:function(e){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter.");this.texture.minFilter=e}},anisotropy:{get:function(){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy.");return this.texture.anisotropy},set:function(e){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy.");this.texture.anisotropy=e}},offset:{get:function(){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset.");return this.texture.offset},set:function(e){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset.");this.texture.offset=e}},repeat:{get:function(){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat.");return this.texture.repeat},set:function(e){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat.");this.texture.repeat=e}},format:{get:function(){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format.");return this.texture.format},set:function(e){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format.");this.texture.format=e}},type:{get:function(){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type.");return this.texture.type},set:function(e){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type.");this.texture.type=e}},generateMipmaps:{get:function(){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps.");return this.texture.generateMipmaps},set:function(e){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps.");this.texture.generateMipmaps=e}}});Gl.prototype.load=function(e){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");var t=this;var i=new Nl;i.load(e,function(e){t.setBuffer(e)});return this};Vl.prototype.getData=function(){console.warn("THREE.AudioAnalyser: .getData() is now .getFrequencyData().");return this.getFrequencyData()};zl.prototype.updateCubeMap=function(e,t){console.warn("THREE.CubeCamera: .updateCubeMap() is now .update().");return this.update(e,t)};var vc={merge:function(e,t,i){console.warn("THREE.GeometryUtils: .merge() has been moved to Geometry. Use geometry.merge( geometry2, matrix, materialIndexOffset ) instead.");var n;if(t.isMesh){t.matrixAutoUpdate&&t.updateMatrix();n=t.matrix;t=t.geometry}e.merge(t,n,i)},center:function(e){console.warn("THREE.GeometryUtils: .center() has been moved to Geometry. Use geometry.center() instead.");return e.center()}};var gc={crossOrigin:undefined,loadTexture:function(e,t,i,n){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");var r=new Co;r.setCrossOrigin(this.crossOrigin);var a=r.load(e,i,undefined,n);if(t)a.mapping=t;return a},loadTextureCube:function(e,t,i,n){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");var r=new Ro;r.setCrossOrigin(this.crossOrigin);var a=r.load(e,i,undefined,n);if(t)a.mapping=t;return a},loadCompressedTexture:function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")},loadCompressedTextureCube:function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")}};function yc(){console.error("THREE.Projector has been moved to /examples/js/renderers/Projector.js.");this.projectVector=function(e,t){console.warn("THREE.Projector: .projectVector() is now vector.project().");e.project(t)};this.unprojectVector=function(e,t){console.warn("THREE.Projector: .unprojectVector() is now vector.unproject().");e.unproject(t)};this.pickingRay=function(){console.error("THREE.Projector: .pickingRay() is now raycaster.setFromCamera().")}}function bc(){console.error("THREE.CanvasRenderer has been moved to /examples/js/renderers/CanvasRenderer.js");this.domElement=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");this.clear=function(){};this.render=function(){};this.setClearColor=function(){};this.setSize=function(){}}e.WebGLRenderTargetCube=St;e.WebGLRenderTarget=Mt;e.WebGLRenderer=as;e.ShaderLib=Sr;e.UniformsLib=xi;e.UniformsUtils=_i;e.ShaderChunk=Mr;e.FogExp2=ss;e.Fog=os;e.Scene=ls;e.LensFlare=us;e.Sprite=hs;e.LOD=fs;e.SkinnedMesh=ms;e.Skeleton=ds;e.Bone=ps;e.Mesh=xa;e.LineSegments=ys;e.LineLoop=bs;e.Line=gs;e.Points=_s;e.Group=ws;e.VideoTexture=Ts;e.DataTexture=Lt;e.CompressedTexture=Ms;e.CubeTexture=Rt;e.CanvasTexture=Pr;e.DepthTexture=Ss;e.Texture=wt;e.CompressedTextureLoader=Ao;e.DataTextureLoader=Po;e.CubeTextureLoader=Ro;e.TextureLoader=Co;e.ObjectLoader=ul;e.MaterialLoader=rl;e.BufferGeometryLoader=al;e.DefaultLoadingManager=So;e.LoadingManager=Mo;e.JSONLoader=ll;e.ImageLoader=Lo;e.FontLoader=kl;e.FileLoader=Eo;e.Loader=ol;e.Cache=To;e.AudioLoader=Nl;e.SpotLightShadow=ko;e.SpotLight=Uo;e.PointLight=Fo;e.RectAreaLight=jo;e.HemisphereLight=Do;e.DirectionalLightShadow=No;e.DirectionalLight=Bo;e.AmbientLight=zo;e.LightShadow=Io;e.Light=Oo;e.StereoCamera=Bl;e.PerspectiveCamera=qr;e.OrthographicCamera=Yr;e.CubeCamera=zl;e.ArrayCamera=es;e.Camera=Xr;e.AudioListener=jl;e.PositionalAudio=Hl;e.AudioContext=Fl;e.AudioAnalyser=Vl;e.Audio=Gl;e.VectorKeyframeTrack=Zo;e.StringKeyframeTrack=$o;e.QuaternionKeyframeTrack=Ko;e.NumberKeyframeTrack=Qo;e.ColorKeyframeTrack=tl;e.BooleanKeyframeTrack=el;e.PropertyMixer=Wl;e.PropertyBinding=Yl;e.KeyframeTrack=il;e.AnimationUtils=Go;e.AnimationObjectGroup=ql;e.AnimationMixer=Jl;e.AnimationClip=nl;e.Uniform=Kl;e.InstancedBufferGeometry=Ql;e.BufferGeometry=ha;e.GeometryIdCount=Kr;e.Geometry=Qr;e.InterleavedBufferAttribute=$l;e.InstancedInterleavedBuffer=tu;e.InterleavedBuffer=eu;e.InstancedBufferAttribute=iu;e.Face3=Zr;e.Object3D=Wr;e.Raycaster=nu;e.Layers=Hr;e.EventDispatcher=t;e.Clock=su;e.QuaternionLinearInterpolant=Jo;e.LinearInterpolant=Wo;e.DiscreteInterpolant=Xo;e.CubicInterpolant=Vo;e.Interpolant=Ho;e.Triangle=ba;e.Math=bt;e.Spherical=ou;e.Cylindrical=lu;e.Plane=Nr;e.Frustum=Br;e.Sphere=Ur;e.Ray=ga;e.Matrix4=Pt;e.Matrix3=Fr;e.Box3=kr;e.Box2=Er;e.Line3=ya;e.Euler=Gr;e.Vector4=Tt;e.Vector3=At;e.Vector2=xt;e.Quaternion=Et;e.Color=bi;e.ImmediateRenderObject=uu;e.VertexNormalsHelper=cu;e.SpotLightHelper=hu;e.SkeletonHelper=du;e.PointLightHelper=pu;e.RectAreaLightHelper=mu;e.HemisphereLightHelper=vu;e.GridHelper=gu;e.PolarGridHelper=yu;e.FaceNormalsHelper=bu;e.DirectionalLightHelper=xu;e.CameraHelper=_u;e.BoxHelper=wu;e.Box3Helper=Tu;e.PlaneHelper=Mu;e.ArrowHelper=Au;e.AxisHelper=Pu;e.CatmullRomCurve3=Iu;e.CubicBezierCurve3=ku;e.QuadraticBezierCurve3=Uu;e.LineCurve3=Fu;e.ArcCurve=Nu;e.EllipseCurve=El;e.SplineCurve=Al;e.CubicBezierCurve=Pl;e.QuadraticBezierCurve=Ll;e.LineCurve=Ml;e.Shape=Ol;e.Path=Cl;e.ShapePath=Dl;e.Font=Il;e.CurvePath=Sl;e.Curve=Tl;e.ShapeUtils=Ws;e.SceneUtils=Bu;e.WebGLUtils=rs;e.WireframeGeometry=Es;e.ParametricGeometry=As;e.ParametricBufferGeometry=Ps;e.TetrahedronGeometry=Cs;e.TetrahedronBufferGeometry=Os;e.OctahedronGeometry=Ds;e.OctahedronBufferGeometry=Is;e.IcosahedronGeometry=ks;e.IcosahedronBufferGeometry=Us;e.DodecahedronGeometry=Fs;e.DodecahedronBufferGeometry=Ns;e.PolyhedronGeometry=Ls;e.PolyhedronBufferGeometry=Rs;e.TubeGeometry=Bs;e.TubeBufferGeometry=zs;e.TorusKnotGeometry=js;e.TorusKnotBufferGeometry=Gs;e.TorusGeometry=Hs;e.TorusBufferGeometry=Vs;e.TextGeometry=qs;e.TextBufferGeometry=Zs;e.SphereGeometry=Js;e.SphereBufferGeometry=Ks;e.RingGeometry=Qs;e.RingBufferGeometry=$s;e.PlaneGeometry=pa;e.PlaneBufferGeometry=ma;e.LatheGeometry=eo;e.LatheBufferGeometry=to;e.ShapeGeometry=io;e.ShapeBufferGeometry=no;e.ExtrudeGeometry=Xs;e.ExtrudeBufferGeometry=Ys;e.EdgesGeometry=ro;e.ConeGeometry=oo;e.ConeBufferGeometry=lo;e.CylinderGeometry=ao;e.CylinderBufferGeometry=so;e.CircleGeometry=uo;e.CircleBufferGeometry=co;e.BoxGeometry=fa;e.BoxBufferGeometry=da;e.ShadowMaterial=fo;e.SpriteMaterial=cs;e.RawShaderMaterial=po;e.ShaderMaterial=Or;e.PointsMaterial=xs;e.MeshPhysicalMaterial=vo;e.MeshStandardMaterial=mo;e.MeshPhongMaterial=go;e.MeshToonMaterial=yo;e.MeshNormalMaterial=bo;e.MeshLambertMaterial=xo;e.MeshDepthMaterial=Dr;e.MeshDistanceMaterial=Ir;e.MeshBasicMaterial=va;e.LineDashedMaterial=_o;e.LineBasicMaterial=vs;e.Material=Cr;e.Float64BufferAttribute=la;e.Float32BufferAttribute=oa;e.Uint32BufferAttribute=sa;e.Int32BufferAttribute=aa;e.Uint16BufferAttribute=ra;e.Int16BufferAttribute=na;e.Uint8ClampedBufferAttribute=ia;e.Uint8BufferAttribute=ta;e.Int8BufferAttribute=ea;e.BufferAttribute=$r;e.REVISION=i;e.MOUSE=n;e.CullFaceNone=r;e.CullFaceBack=a;e.CullFaceFront=s;e.CullFaceFrontBack=o;e.FrontFaceDirectionCW=l;e.FrontFaceDirectionCCW=u;e.BasicShadowMap=c;e.PCFShadowMap=h;e.PCFSoftShadowMap=f;e.FrontSide=d;e.BackSide=p;e.DoubleSide=m;e.FlatShading=v;e.SmoothShading=g;e.NoColors=y;e.FaceColors=b;e.VertexColors=x;e.NoBlending=_;e.NormalBlending=w;e.AdditiveBlending=T;e.SubtractiveBlending=M;e.MultiplyBlending=S;e.CustomBlending=E;e.AddEquation=A;e.SubtractEquation=P;e.ReverseSubtractEquation=L;e.MinEquation=R;e.MaxEquation=C;e.ZeroFactor=O;e.OneFactor=D;e.SrcColorFactor=I;e.OneMinusSrcColorFactor=k;e.SrcAlphaFactor=U;e.OneMinusSrcAlphaFactor=F;e.DstAlphaFactor=N;e.OneMinusDstAlphaFactor=B;e.DstColorFactor=z;e.OneMinusDstColorFactor=j;e.SrcAlphaSaturateFactor=G;e.NeverDepth=H;e.AlwaysDepth=V;e.LessDepth=W;e.LessEqualDepth=X;e.EqualDepth=Y;e.GreaterEqualDepth=q;e.GreaterDepth=Z;e.NotEqualDepth=J;e.MultiplyOperation=K;e.MixOperation=Q;e.AddOperation=$;e.NoToneMapping=ee;e.LinearToneMapping=te;e.ReinhardToneMapping=ie;e.Uncharted2ToneMapping=ne;e.CineonToneMapping=re;e.UVMapping=ae;e.CubeReflectionMapping=se;e.CubeRefractionMapping=oe;e.EquirectangularReflectionMapping=le;e.EquirectangularRefractionMapping=ue;e.SphericalReflectionMapping=ce;e.CubeUVReflectionMapping=he;e.CubeUVRefractionMapping=fe;e.RepeatWrapping=de;e.ClampToEdgeWrapping=pe;e.MirroredRepeatWrapping=me;e.NearestFilter=ve;e.NearestMipMapNearestFilter=ge;e.NearestMipMapLinearFilter=ye;e.LinearFilter=be;e.LinearMipMapNearestFilter=xe;e.LinearMipMapLinearFilter=_e;e.UnsignedByteType=we;e.ByteType=Te;e.ShortType=Me;e.UnsignedShortType=Se;e.IntType=Ee;e.UnsignedIntType=Ae;e.FloatType=Pe;e.HalfFloatType=Le;e.UnsignedShort4444Type=Re;e.UnsignedShort5551Type=Ce;e.UnsignedShort565Type=Oe;e.UnsignedInt248Type=De;e.AlphaFormat=Ie;e.RGBFormat=ke;e.RGBAFormat=Ue;e.LuminanceFormat=Fe;e.LuminanceAlphaFormat=Ne;e.RGBEFormat=Be;e.DepthFormat=ze;e.DepthStencilFormat=je;e.RGB_S3TC_DXT1_Format=Ge;e.RGBA_S3TC_DXT1_Format=He;e.RGBA_S3TC_DXT3_Format=Ve;e.RGBA_S3TC_DXT5_Format=We;e.RGB_PVRTC_4BPPV1_Format=Xe;e.RGB_PVRTC_2BPPV1_Format=Ye;e.RGBA_PVRTC_4BPPV1_Format=qe;e.RGBA_PVRTC_2BPPV1_Format=Ze;e.RGB_ETC1_Format=Je;e.LoopOnce=Ke;e.LoopRepeat=Qe;e.LoopPingPong=$e;e.InterpolateDiscrete=et;e.InterpolateLinear=tt;e.InterpolateSmooth=it;e.ZeroCurvatureEnding=nt;e.ZeroSlopeEnding=rt;e.WrapAroundEnding=at;e.TrianglesDrawMode=st;e.TriangleStripDrawMode=ot;e.TriangleFanDrawMode=lt;e.LinearEncoding=ut;e.sRGBEncoding=ct;e.GammaEncoding=ht;e.RGBEEncoding=ft;e.LogLuvEncoding=dt;e.RGBM7Encoding=pt;e.RGBM16Encoding=mt;e.RGBDEncoding=vt;e.BasicDepthPacking=gt;e.RGBADepthPacking=yt;e.CubeGeometry=fa;e.Face4=zu;e.LineStrip=ju;e.LinePieces=Gu;e.MeshFaceMaterial=Hu;e.MultiMaterial=Vu;e.PointCloud=Wu;e.Particle=Xu;e.ParticleSystem=Yu;e.PointCloudMaterial=qu;e.ParticleBasicMaterial=Zu;e.ParticleSystemMaterial=Ju;e.Vertex=Ku;e.DynamicBufferAttribute=Qu;e.Int8Attribute=$u;e.Uint8Attribute=ec;e.Uint8ClampedAttribute=tc;e.Int16Attribute=ic;e.Uint16Attribute=nc;e.Int32Attribute=rc;e.Uint32Attribute=ac;e.Float32Attribute=sc;e.Float64Attribute=oc;e.ClosedSplineCurve3=lc;e.SplineCurve3=uc;e.Spline=cc;e.BoundingBoxHelper=hc;e.EdgesHelper=fc;e.WireframeHelper=dc;e.XHRLoader=pc;e.BinaryTextureLoader=mc;e.GeometryUtils=vc;e.ImageUtils=gc;e.Projector=yc;e.CanvasRenderer=bc;Object.defineProperty(e,"__esModule",{value:true})})},{}],32:[function(e,t,i){"use strict";var n=e("parse-unit");t.exports=o;var r=96;function a(e,t){var i=n(getComputedStyle(e).getPropertyValue(t));return i[0]*o(i[1],e)}function s(e,t){var i=document.createElement("div");i.style["font-size"]="128"+e;t.appendChild(i);var n=a(i,"font-size")/128;t.removeChild(i);return n}function o(e,t){t=t||document.body;e=(e||"px").trim().toLowerCase();if(t===window||t===document){t=document.body}switch(e){case"%":return t.clientHeight/100;case"ch":case"ex":return s(e,t);case"em":return a(t,"font-size");case"rem":return a(document.body,"font-size");case"vw":return window.innerWidth/100;case"vh":return window.innerHeight/100;case"vmin":return Math.min(window.innerWidth,window.innerHeight)/100;case"vmax":return Math.max(window.innerWidth,window.innerHeight)/100;case"in":return r;case"cm":return r/2.54;case"mm":return r/25.4;case"pt":return r/72;case"pc":return r/6}return 1}},{"parse-unit":25}],33:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:true});var n=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}return function(t,i,n){if(i)e(t.prototype,i);if(n)e(t,n);return t}}();var r=e("./OrbitControls");var a=l(r);var s=e("brindille-resize");var o=l(s);function l(e){return e&&e.__esModule?e:{default:e}}function u(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var c=function(){function e(t,i){var n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;u(this,e);this.onMouseMove=this.onMouseMove.bind(this);this.debug=n;this.autoMode=false;this.enableManual=true;this.distance=320;if(this.debug){this.engine=new a.default(t,{element:i,distance:this.distance})}else{this.engine=new a.default(t,{element:i,parent:i,damping:.05,distance:this.distance,phi:Math.PI*.5,phiBounds:[Math.PI*.4,Math.PI*.6],thetaBounds:[-Math.PI*.1,Math.PI*.1],distanceBounds:[this.distance-20,this.distance+20],zoom:true})}this.engine.rotateTo(-.03665,1.9446);this.phi=this.engine.phi;this.theta=this.engine.phi;this.mouseY=.5;this.mouseX=.5;window.addEventListener("mousemove",this.onMouseMove)}n(e,[{key:"setAutoMode",value:function e(t){this.autoMode=t;if(t){this.theta=this.engine.theta}}},{key:"onMouseMove",value:function e(t){this.mouseY=t.clientY/o.default.height;this.mouseX=t.clientX/o.default.width}},{key:"update",value:function e(){if(this.enableManual){this.engine.update()}if(this.debug)return;if(this.enableManual){this.phi+=(this.mouseY*(this.engine.phiBounds[1]-this.engine.phiBounds[0])+this.engine.phiBounds[0]-this.phi)*.1;this.theta+=(this.mouseX*(this.engine.thetaBounds[1]-this.engine.thetaBounds[0])+this.engine.thetaBounds[0]-this.theta)*.1}this.engine.rotateTo(this.autoMode?this.theta:this.theta,this.phi)}}]);return e}();i.default=c},{"./OrbitControls":34,"brindille-resize":13}],34:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:true});var n=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}return function(t,i,n){if(i)e(t.prototype,i);if(n)e(t,n);return t}}();var r=e("three");var a=e("mouse-event-offset");var s=h(a);var o=e("mouse-wheel");var l=h(o);var u=e("clamp");var c=h(u);function h(e){return e&&e.__esModule?e:{default:e}}function f(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var d=new r.Vector3(0,1,0);var p=1e-10;var m=function(){function e(t){var i=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};f(this,e);this.onInputDown=this.onInputDown.bind(this);this.onInputMove=this.onInputMove.bind(this);this.onInputUp=this.onInputUp.bind(this);this.handleZoom=this.handleZoom.bind(this);this.preventDefault=this.preventDefault.bind(this);this.update=this.update.bind(this);this.object=t;this.inputDelta=new r.Vector3;this.offset=new r.Vector3;this.upQuat=new r.Quaternion;this.upQuatInverse=new r.Quaternion;this.enabled=true;this.target=i.target||new r.Vector3;this.distance=i.distance||1;this.damping=i.damping||.25;this.rotateSpeed=i.rotateSpeed||.28;this.zoomSpeed=i.zoomSpeed||.0075;this.rotate=i.rotate!==false;this.zoom=i.zoom!==false;this._theta=i.theta||0;this._phi=i.phi||Math.PI*.5;this.phiBounds=i.phiBounds||[0,Math.PI];this.thetaBounds=i.thetaBounds||[-Infinity,Infinity];this.distanceBounds=i.distanceBounds||[1,Infinity];this.parent=i.parent||window;this.element=i.element;this.pinchHandler;this.mouseStart=new r.Vector2;this.clientSize=new r.Vector2;this.tmp=[0,0];this.dragging=true;this.addEvents();this.rotateTo(this._theta,this._phi)}n(e,[{key:"dispose",value:function e(){this.removeEvents()}},{key:"reset",value:function e(){this.inputDelta=new r.Vector3;this.mouseStart=new r.Vector2;this.theta=0;this.phi=Math.PI*.5}},{key:"addEvents",value:function e(){if(this.rotate){this.parent.addEventListener("mousemove",this.onInputMove)}if(this.zoom){(0,l.default)(window,this.handleZoom,true)}}},{key:"removeEvents",value:function e(){this.parent.removeEventListener("mousedown",this.onInputDown);this.parent.removeEventListener("mousemove",this.onInputMove);this.parent.removeEventListener("mouseup",this.onInputUp)}},{key:"preventDefault",value:function e(t){t.preventDefault()}},{key:"onInputDown",value:function e(t){if(!this.enabled)return;var i=(0,s.default)(t,this.element);this.mouseStart.set(i[0],i[1]);if(this.insideBounds(this.mouseStart)){this.dragging=true}}},{key:"onInputUp",value:function e(){if(!this.enabled)return;this.dragging=false}},{key:"onInputMove",value:function e(t){if(!this.enabled)return;var i=(0,s.default)(t,this.element);if(!this.dragging)return;var n=this.getClientSize();var r=(i[0]-this.mouseStart.x)/n.x;var a=(i[1]-this.mouseStart.y)/n.y;this.handleRotate(r,a);this.mouseStart.set(i[0],i[1])}},{key:"insideBounds",value:function e(t){if(this.element===window||this.element===document||this.element===document.body){return true}else{var i=this.element.getBoundingClientRect();return t.x>=0&&t.y>=0&&t.x<i.width&&t.y<i.height}}},{key:"getClientSize",value:function e(){var t=this.element;if(t===window||t===document||t===document.body){t=document.documentElement}return this.clientSize.set(t.clientWidth,t.clientHeight)}},{key:"handleRotate",value:function e(t,i){var n=Math.PI*2;this.inputDelta.x-=n*t*this.rotateSpeed;this.inputDelta.y-=n*i*this.rotateSpeed}},{key:"handleZoom",value:function e(t,i){this.inputDelta.z+=i*this.zoomSpeed}},{key:"rotateTo",value:function e(t,i){this._prepareOffset();this.theta=t;this.phi=i;this._computeOffset();this._applyTransformation()}},{key:"_prepareOffset",value:function e(){this.upQuat.setFromUnitVectors(this.object.up,d);this.upQuatInverse.copy(this.upQuat).inverse();this.offset.subVectors(this.object.position,this.target);this.offset.applyQuaternion(this.upQuat)}},{key:"_computeOffset",value:function e(){var t=Math.abs(this.distance)<=p?p:this.distance;this.offset.x=t*Math.sin(this.phi)*Math.sin(this.theta);this.offset.y=t*Math.cos(this.phi);this.offset.z=t*Math.sin(this.phi)*Math.cos(this.theta)}},{key:"_applyTransformation",value:function e(){this.offset.applyQuaternion(this.upQuatInverse);this.object.position.addVectors(this.target,this.offset);this.object.lookAt(this.target)}},{key:"_applyDamping",value:function e(){var t=typeof this.damping==="number"?this.damping:1;this.inputDelta.x*=1-t;this.inputDelta.y*=1-t;this.inputDelta.z*=1-t}},{key:"update",value:function e(){this._prepareOffset();var t=Math.atan2(this.offset.x,this.offset.z);var i=Math.atan2(Math.sqrt(this.offset.x*this.offset.x+this.offset.z*this.offset.z),this.offset.y);t+=this.inputDelta.x;i+=this.inputDelta.y;this.theta=t;this.phi=i;this.distance+=this.inputDelta.z;this.distance=(0,c.default)(this.distance,this.distanceBounds[0],this.distanceBounds[1]);this._computeOffset();this._applyTransformation();this._applyDamping()}},{key:"theta",get:function e(){return this._theta},set:function e(t){this._theta=(0,c.default)(t,this.thetaBounds[0],this.thetaBounds[1])}},{key:"phi",get:function e(){return this._phi},set:function e(t){this._phi=(0,c.default)(t,this.phiBounds[0],this.phiBounds[1]);this._phi=(0,c.default)(this._phi,p,Math.PI-p)}}]);return e}();i.default=m},{clamp:14,"mouse-event-offset":23,"mouse-wheel":24,three:31}],35:[function(e,t,i){"use strict";var n=e("three");var r=e("raf-loop");var a=k(r);e("gsap");var s=e("./utils/debug");var o=e("brindille-resize");var l=k(o);var u=e("./utils/preloader");var c=k(u);var h=e("./utils/manifest");var f=k(h);var d=e("@superguigui/wagner");var p=k(d);var m=e("@superguigui/wagner/src/passes/bloom/MultiPassBloomPass");var v=k(m);var g=e("./postfx/general/GeneralPass2");var y=k(g);var b=e("./postfx/smaa/SMAAPass");var x=k(b);var _=e("./postfx/frozen/FrozenPass");var w=k(_);var T=e("./scenes/UIScene");var M=k(T);var S=e("./scenes/GameScene");var E=k(S);var A=e("./scenes/MainScene");var P=k(A);var L=e("./scenes/FusionScene");var R=k(L);var C=e("./ui/Tuto");var O=k(C);var D=e("dom-classes");var I=k(D);function k(e){return e&&e.__esModule?e:{default:e}}var U={useSMAA:true,useBloom:true,useFrozen:true,showTuto:false};var F=document.body.querySelector(".TutoBtn");var N={x:0,y:0};var B=document.body.querySelector(".Canvas");var z=new n.WebGLRenderer({antialias:true,alpha:true});z.setClearColor(3289650,0);B.style.overflow="hidden";B.style.margin=0;B.appendChild(z.domElement);var j=new p.default.Composer(z);var G=new y.default;G.params.gamma=U.useBloom?.32:.7;var H=new x.default(l.default.width,l.default.height);var V=new w.default;var W=new v.default({blurAmount:.15,applyZoomBlur:false,width:l.default.width,height:l.default.height});var X=new M.default(z.domElement);var Y=new E.default(z.domElement);var q=new P.default
;var Z=new R.default(z.domElement);c.default.load(f.default,K);var J=(0,a.default)(ie);function K(){Y.onLoadComplete(z.domElement);X.onLoadComplete(z.domElement);q.onLoadComplete(z.domElement);Z.onLoadComplete(z.domElement);var e=c.default.getTexture("FrozTexture");e.wrapS=e.wrapT=n.RepeatWrapping;e.offset.set(0,0);e.repeat.set(2,2);V.params.tMask=e;l.default.addListener(ee);window.addEventListener("keydown",te);F.addEventListener("click",$);J.start();setTimeout(function(){ee()},200);Q()}function Q(){s.gui.add(U,"showTuto").on("update",function(){$(U.showTuto)});var e=s.panelFX.addFolder("postfx");e.open();e.add(U,"useComposer");e.add(U,"useSMAA");e.add(U,"useFrozen");e.add(U,"useBloom").on("update",function(){G.params.gamma=U.useBloom?.32:.7});e.add(W.params,"blurAmount",{min:0,max:5,step:.01})}function $(){U.showTuto=!U.showTuto;if(U.showTuto){q.showTuto();O.default.show();I.default.add(F,"TutoBtn--open");TweenMax.fromTo(V.params,.6,{thresold:0},{thresold:1,ease:Expo.easeOut})}else{O.default.hide();q.hideTuto();I.default.remove(F,"TutoBtn--open");TweenMax.fromTo(V.params,.6,{thresold:1},{thresold:0,ease:Expo.easeOut})}}function ee(){X.resize(l.default.width,l.default.height);Y.resize(l.default.width,l.default.height);q.resize(l.default.width,l.default.height);Z.resize(l.default.width,l.default.height);z.setSize(l.default.width,l.default.height);j.setSize(l.default.width,l.default.height);H.setSize(l.default.width,l.default.height)}function te(e){var t=true;var i=undefined;switch(e.keyCode){case 0:case 32:Y.spawnComponent();i=0;break;case 49:Y.spawnComponent(0);i=1;break;case 50:Y.spawnComponent(1);i=2;break;case 51:Y.spawnComponent(2);i=3;break;case 52:Y.spawnComponent(3);i=4;break;case 53:Y.spawnComponent(4);i=5;break;case 54:Y.spawnComponent(5);i=6;break;case 55:Y.spawnComponent(6);i=7;break;default:t=false;break}if(U.showTuto)O.default.onKeyPress(i);if(t){}}function ie(e){if(X){X.update(e,N);Y.update(e)}Z.update(e);if(U.showTuto===false){if(Y.speed<.09){G.params.brightness+=(.6-G.params.brightness)*Y.speed;V.params.thresold+=(1-V.params.thresold)*Y.speed}else{V.params.thresold+=(1e-4-V.params.thresold)*.04;G.params.brightness+=(.06-G.params.brightness)*.02}}j.reset();z.render(Y,Y.camera,Z.rtTexture2,true);z.render(X,X.camera,Z.rtTexture,true);j.render(Z,Z.camera);j.pass(G);if(U.useFrozen)j.pass(V);if(U.useBloom)j.pass(W);if(U.useSMAA)j.pass(H);j.toScreen()}},{"./postfx/frozen/FrozenPass":51,"./postfx/general/GeneralPass2":52,"./postfx/smaa/SMAAPass":53,"./scenes/FusionScene":54,"./scenes/GameScene":55,"./scenes/MainScene":56,"./scenes/UIScene":57,"./ui/Tuto":58,"./utils/debug":59,"./utils/manifest":60,"./utils/preloader":61,"@superguigui/wagner":1,"@superguigui/wagner/src/passes/bloom/MultiPassBloomPass":6,"brindille-resize":13,"dom-classes":17,gsap:19,"raf-loop":27,three:31}],36:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:true});var n=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}return function(t,i,n){if(i)e(t.prototype,i);if(n)e(t,n);return t}}();var r=e("three");var a=e("../../utils/debug");function s(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function o(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function l(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}var u=function(e){l(t,e);function t(e){s(this,t);var i=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));i.uniforms=r.UniformsUtils.merge([r.ShaderLib.physical.uniforms,r.ShaderLib.standard.uniforms,{time:{value:1}}]);i.setFlags(i);i.setValues(e);i.isMeshStandardMaterial=true;i.lights=true;i.setGui();return i}n(t,[{key:"setFlags",value:function e(t){t.vertexShader="#define GLSLIFY 1\n#define LAMBERT\n\nvarying vec3 vLightFront;\n\n#ifdef DOUBLE_SIDED\n\n\tvarying vec3 vLightBack;\n\n#endif\nvarying vec2 vUv;\n\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n\nvoid main() {\n  vUv = uv;\n\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n\n}";t.fragmentShader="#define GLSLIFY 1\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n\nvarying vec3 vLightFront;\n\n#ifdef DOUBLE_SIDED\n\n\tvarying vec3 vLightBack;\n\n#endif\n\nvarying vec2 vUv;\n\nuniform float time;\n\n/*\n * This function will function like an array.\n */\nvec2 getWaveSource(int ws)\n{\n\tvec2 outp;\n\tif (ws == 0)\n\t{\n\t\toutp = vec2(-100,-100);\n\t}\n\telse if (ws == 1)\n\t{\n\t\toutp = vec2(-100,500);\n\t}\n\telse\n\t{\n\t\toutp = vec2(500,-500);\n\t}\n\treturn outp;\n}\n/*\n * Don't need an expensive square root operation.\n * This returns distance squared, not distance.\n */\nfloat distanceSq(vec2 a, vec2 b)\n{\n\tvec2 diff = a - b;\n\treturn dot(diff, diff);\n}\n\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <bsdfs>\n#include <lights_pars>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\n\nvoid main() {\n\n\t#include <clipping_planes_fragment>\n\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\n\tconst int wsCount = 3;\n\t\n\tvec2 uv = vUv;\n\t// vec2 uv = fragCoord.xy / iResolution.xy;\n\t\n\tfloat wavePower = 0.0;\n\tfor(int i=0; i<wsCount; i++)\n\t{\n\t\tvec2 src = getWaveSource(i);\n\t\tfloat dist = distanceSq(src, uv) / 300.0;\n\t\twavePower += sin((dist + time));\n\t\t\n\t}\n\n\tdiffuseColor  = vec4(\n\t\t0.9 + 0.2 * sin(wavePower),\n\t\t0.6 + 0.2 * cos(wavePower), \n\t\t0.9 + 0.3 * cos(time),\n\t\topacity\n\t);\n\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\n\t// accumulation\n\treflectedLight.indirectDiffuse = getAmbientLightIrradiance( ambientLightColor );\n\n\t#include <lightmap_fragment>\n\n\treflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );\n\n\t#ifdef DOUBLE_SIDED\n\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\n\t#else\n\n\t\treflectedLight.directDiffuse = vLightFront;\n\n\t#endif\n\n\treflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();\n\n\t// modulation\n\t#include <aomap_fragment>\n\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\n\t#include <envmap_fragment>\n\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n\n}";t.type="IceMaterial"}},{key:"setGui",value:function e(){var t=a.gui.addFolder("iceMaterial");t.addColorPicker(this,"color");t.addColorPicker(this,"emissive");t.add(this,"transparent");t.add(this,"opacity",{max:1,min:0,step:.01});t.add(this,"refractionRatio",{max:2,min:0,step:.01});t.add(this,"reflectivity",{max:2,min:0,step:.01})}}]);return t}(r.MeshLambertMaterial);i.default=u},{"../../utils/debug":59,three:31}],37:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:true});var n=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}return function(t,i,n){if(i)e(t.prototype,i);if(n)e(t,n);return t}}();var r=e("three");var a=e("../../utils/debug");function s(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function o(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function l(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}var u=function(e){l(t,e);function t(e){s(this,t);var i=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));i.uniforms=r.UniformsUtils.merge([r.ShaderLib.lambert.uniforms,r.ShaderLib.standard.uniforms,{thresold:{value:1}}]);i.setFlags(i);i.setValues(e);i.isMeshLambertMaterial=true;i.lights=true;i.setGui();return i}n(t,[{key:"setFlags",value:function e(t){t.vertexShader="#define GLSLIFY 1\n#define LAMBERT\n\nvarying vec3 vLightFront;\n\n#ifdef DOUBLE_SIDED\n\n\tvarying vec3 vLightBack;\n\n#endif\n\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n\nvoid main() {\n\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n\n}";t.fragmentShader="#define GLSLIFY 1\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nuniform float thresold;\n\nvarying vec3 vLightFront;\n\n#ifdef DOUBLE_SIDED\n\n\tvarying vec3 vLightBack;\n\n#endif\n\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <bsdfs>\n#include <lights_pars>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\n\nvoid main() {\n\n\t#include <clipping_planes_fragment>\n\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\n\t#include <logdepthbuf_fragment>\n\t// #include <map_fragment>\n\t#ifdef USE_MAP\n\t\tvec4 texelColor = texture2D( map, vUv );\n\n\t\ttexelColor = mapTexelToLinear( texelColor );\n\t\tfloat amount = thresold;\n\t\tif (texelColor.r > thresold) {\n\t\tamount = 0.0;\n\t\t}\n\t\tvec4 transparent = vec4(0.0, 0.0, 0.0, 0.0);\n\t\tdiffuseColor *= mix(transparent, diffuseColor, amount);\n  #endif\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\n\t// accumulation\n\treflectedLight.indirectDiffuse = getAmbientLightIrradiance( ambientLightColor );\n\n\t#include <lightmap_fragment>\n\n\treflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );\n\n\t#ifdef DOUBLE_SIDED\n\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\n\t#else\n\n\t\treflectedLight.directDiffuse = vLightFront;\n\n\t#endif\n\n\treflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();\n\n\t// modulation\n\t#include <aomap_fragment>\n\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\n\t#include <envmap_fragment>\n\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n\n}";t.type="TitleMaterial"}},{key:"setGui",value:function e(){var t=a.gui.addFolder("TitleMaterial");t.addColorPicker(this,"color");t.addColorPicker(this,"emissive");t.add(this,"transparent");t.add(this,"opacity",{max:1,min:0,step:.01});t.add(this.uniforms.thresold,"value",{max:1,min:0,step:.01})}}]);return t}(r.MeshLambertMaterial);i.default=u},{"../../utils/debug":59,three:31}],38:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:true});var n=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}return function(t,i,n){if(i)e(t.prototype,i);if(n)e(t,n);return t}}();var r=e("three");var a=e("../utils/debug");var s=e("../utils/preloader");var o=c(s);var l=e("../materials/title-material/TitleMaterial");var u=c(l);function c(e){return e&&e.__esModule?e:{default:e}}function h(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function f(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function d(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}var p=function(e){d(t,e);function t(){h(this,t);var e=f(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));var i=new r.PlaneGeometry(2e3,2e3,0);var n=o.default.getTexture("FrozTexture");n.minFilter=r.LinearFilter;n.magFilter=r.LinearFilter;n.wrapS=n.wrapT=r.RepeatWrapping;n.offset.set(0,0);n.repeat.set(2,2);var s=o.default.getTexture("ReflectionTexture");s.mapping=r.EquirectangularReflectionMapping;s.minFilter=r.LinearFilter;s.magFilter=r.LinearFilter;e.bgMaterial=new r.MeshBasicMaterial({color:16776960,reflectivity:0,transparent:false,opacity:1});e.bgMesh=new r.Mesh(i,e.bgMaterial);e.bgMesh.position.z=-10;e.bgMesh.castShadow=false;e.bgMesh.receiveShadow=true;e.bgMesh.shadowCameraVisible=false;e.add(e.bgMesh);e.aLight=new r.AmbientLight(16777215,.3);e.backLight=new r.SpotLight(16777215,.7);e.backLight.position.z=180;e.backLight.angle=3.14;var l=new r.DirectionalLight(16777215,.5);e.add(l);l.position.z=800;e.add(e.aLight);e.add(e.backLight);var c=o.default.getGeometry("merryxmasModel");e.material=new u.default({color:16777215,transparent:true,opacity:1,reflectivity:.2,side:r.DoubleSide,envMap:s,map:o.default.getTexture("TitleTexture")});a.gui.addColorPicker(e.material,"color");e.mesh=new r.Mesh(c,e.material);e.position.y=100;e.position.z=300;e.add(e.mesh);e.visible=false;return e}n(t,[{key:"show",value:function e(){this.visible=true;if(this.tlOut)this.tlOut.kill();this.tlIn=new TimelineMax;this.tlIn.fromTo(this.bgMaterial,.6,{opacity:0},{opacity:.55},0);this.tlIn.fromTo(this.material.uniforms.thresold,.8,{value:0},{value:1},.6)}},{key:"hide",value:function e(){var t=this;if(this.tlIn)this.tlIn.kill();this.tlOut=new TimelineMax({onComplete:function e(){t.visible=false}});this.tlOut.to(this.bgMaterial,.6,{opacity:0},0);this.tlOut.to(this.material.uniforms.thresold,.4,{value:0},.2)}}]);return t}(r.Object3D);i.default=p},{"../materials/title-material/TitleMaterial":37,"../utils/debug":59,"../utils/preloader":61,three:31}],39:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:true});var n=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}return function(t,i,n){if(i)e(t.prototype,i);if(n)e(t,n);return t}}();var r=e("three");var a=e("./SnowPhysic");var s=u(a);var o=e("../utils/preloader");var l=u(o);function u(e){return e&&e.__esModule?e:{default:e}}function c(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function h(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function f(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}var d=function(e){f(t,e);function t(){c(this,t);var e=h(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));e.particlesPhysics=[];e.nbParticles=800;e.initBuffer();return e}n(t,[{key:"initBuffer",value:function e(){this.snowMaterial=new r.PointsMaterial({color:16777215,map:l.default.getTexture("SnowTexture"),size:8,blending:r.AdditiveBlending,transparent:true,depthTest:false});this.particles=new r.BufferGeometry;this.particlePositions=new Float32Array(this.nbParticles*3);for(var t=0;t<this.nbParticles;t++){this.particlePositions[t*3+0]=Math.random()*2e3-1e3;this.particlePositions[t*3+1]=Math.random()*2e3-1e3;this.particlePositions[t*3+2]=1e3;var i=new s.default(this.particlePositions[t*3+0],this.particlePositions[t*3+1],this.particlePositions[t*3+2]);this.particlesPhysics.push(i)}this.particles.setDrawRange(0,this.nbParticles*3);this.particles.addAttribute("position",new r.BufferAttribute(this.particlePositions,3).setDynamic(true));this.pointCloud=new r.Points(this.particles,this.snowMaterial);this.add(this.pointCloud)}},{key:"evolveSnow",value:function e(){for(var t=0;t<this.nbParticles;t++){var i=this.particlesPhysics[t];i.updatePhysics();this.particlePositions[t*3+0]=i.position.x;this.particlePositions[t*3+1]=i.position.y;this.particlePositions[t*3+2]=i.position.z}this.pointCloud.geometry.attributes.position.needsUpdate=true}},{key:"update",value:function e(){this.evolveSnow()}}]);return t}(r.Object3D);i.default=d},{"../utils/preloader":61,"./SnowPhysic":40,three:31}],40:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:true});var n=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}return function(t,i,n){if(i)e(t.prototype,i);if(n)e(t,n);return t}}();var r=e("three");function a(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var s=Math.PI/180;var o=function(){function e(t,i,n){a(this,e);this.velocity=new r.Vector3(0,-4,0);this.vRotateX(l(-45,45));this.vRotateY(l(0,360));this.gravity=new r.Vector3(0,0,0);this.drag=1;this.position=new r.Vector3(t,i,n)}n(e,[{key:"updatePhysics",value:function e(){this.velocity.multiplyScalar(this.drag);this.velocity.add(this.gravity);this.position.add(this.velocity);if(this.position.y<-1e3)this.position.y+=2e3;if(this.position.x>1e3)this.position.x-=2e3;else if(this.position.x<-1e3)this.position.x+=2e3;if(this.position.z>1e3)this.position.z-=2e3;else if(this.position.z<-1e3)this.position.z+=2e3}},{key:"vRotateY",value:function e(t){var i=Math.cos(t*s);var n=Math.sin(t*s);var r=this.velocity.z;var a=this.velocity.x;this.velocity.x=a*i+r*n;this.velocity.z=a*-n+r*i}},{key:"vRotateX",value:function e(t){var i=Math.cos(t*s);var n=Math.sin(t*s);var r=this.velocity.z;var a=this.velocity.y;this.velocity.y=a*i+r*n;this.velocity.z=a*-n+r*i}},{key:"vRotateZ",value:function e(t){var i=Math.cos(t*s);var n=Math.sin(t*s);var r=this.velocity.x;var a=this.velocity.y;this.velocity.y=a*i+r*n;this.velocity.x=a*-n+r*i}}]);return e}();i.default=o;function l(e,t){return Math.random()*(t-e)+e}},{three:31}],41:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:true});var n=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}return function(t,i,n){if(i)e(t.prototype,i);if(n)e(t,n);return t}}();var r=e("three");function a(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function s(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function o(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}var l=function(e){o(t,e);function t(e){a(this,t);var i=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));i.geometry=new r.CylinderGeometry(6,6,10,6);i.material=e||new r.MeshStandardMaterial({color:16711920});var n=new r.MeshStandardMaterial({color:15728880,transparent:true,opacity:.5});var o=new r.Mesh(i.geometry,i.material);o.scale.set(.8,.8,.8);var l=new r.Mesh(i.geometry,n);i.add(o);i.rotation.z=Math.PI*.5;return i}n(t,[{key:"destroy",value:function e(){this.material.dispose();this.geometry.dispose()}},{key:"update",value:function e(){this.rotation.x+=.01}}]);return t}(r.Object3D);i.default=l},{three:31}],42:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:true});var n=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}return function(t,i,n){if(i)e(t.prototype,i);if(n)e(t,n);return t}}();var r=e("three");function a(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function s(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function o(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}var l=function(e){o(t,e);function t(e){a(this,t);var i=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));var n=Math.random()*15+5;i.gBig=new r.SphereGeometry(n,6,2);i.material=e||new r.MeshStandardMaterial({color:16711920});i.mesh=new r.Mesh(i.gBig,i.material);i.soundId="DoSound";i.add(i.mesh);var o=(new r.Box3).setFromObject(i.mesh);i.size=o.getSize().x;i.rotation.z=Math.PI*.5;return i}n(t,[{key:"destroy",value:function e(){this.material.dispose();this.gBig.dispose();this.remove(this.mesh)}}]);return t}(r.Object3D);i.default=l},{three:31}],43:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:true});var n=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}return function(t,i,n){if(i)e(t.prototype,i);if(n)e(t,n);return t}}();var r=e("three");var a=e("../../utils/preloader");var s=o(a);function o(e){return e&&e.__esModule?e:{default:e}}function l(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function u(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function c(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}var h=function(e){c(t,e);function t(e){l(this,t);var i=u(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));i.geometry=s.default.getGeometry("crystalModel");i.material=e||new r.MeshStandardMaterial({color:16711920});var n=Math.random()*1+.4;i.soundId="FaSound";var a=new r.Mesh(i.geometry,i.material);a.scale.set(n,n,n);i.add(a);var o=(new r.Box3).setFromObject(a);i.size=o.getSize().y;i.rotation.z=Math.PI*.5;return i}n(t,[{key:"destroy",value:function e(){this.material.dispose();this.geometry.dispose()}}]);return t}(r.Object3D);i.default=h},{"../../utils/preloader":61,three:31}],44:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:true});var n=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}return function(t,i,n){if(i)e(t.prototype,i);if(n)e(t,n);return t}}();var r=e("three");var a=e("../../utils/debug");function s(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function o(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function l(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}var u=function(e){l(t,e);function t(e){s(this,t);var i=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));i.geometry=new r.CylinderGeometry(6,6,10,6);i.branchGeometry=new r.CylinderGeometry(2,2,30,6);i.material=e||new r.MeshStandardMaterial({color:16711920});var n=new r.Mesh(i.geometry,i.material);var a=new r.Mesh(i.branchGeometry,i.material);var l=new r.Mesh(i.branchGeometry,i.material);n.scale.set(.8,.8,.8);l.position.set(4,0,0);l.rotation.set(0,0,Math.PI*.25);a.rotation.set(0,0,-Math.PI*.25);a.position.set(-4,0,0);i.add(a);i.add(l);i.rotation.z=Math.PI*.5;return i}n(t,[{key:"destroy",value:function e(){this.material.dispose();this.geometry.dispose()}},{key:"update",value:function e(){this.rotation.x+=.01}}]);return t}(r.Object3D);i.default=u},{"../../utils/debug":59,three:31}],45:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:true});var n=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}return function(t,i,n){if(i)e(t.prototype,i);if(n)e(t,n);return t}}();var r=e("three");var a=e("../../utils/preloader");var s=o(a);function o(e){return e&&e.__esModule?e:{default:e}}function l(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function u(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function c(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}var h=function(e){c(t,e);function t(e){l(this,t);var i=u(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));i.geometry=s.default.getGeometry("crystal3Model");i.material=e||new r.MeshStandardMaterial({color:16711920});i.soundId="LaSound";var n=new r.Mesh(i.geometry,i.material);i.add(n);var a=(new r.Box3).setFromObject(i);i.size=a.getSize().x;return i}n(t,[{key:"destroy",value:function e(){this.material.dispose();this.geometry.dispose()}}]);return t}(r.Object3D);i.default=h},{"../../utils/preloader":61,three:31}],46:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:true});var n=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}return function(t,i,n){if(i)e(t.prototype,i);if(n)e(t,n);return t}}();var r=e("three");var a=e("../../utils/debug");function s(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function o(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function l(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}var u=function(e){l(t,e);function t(e){s(this,t);var i=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));var n=Math.random()*40+10;i.branchGeometry=new r.CylinderGeometry(2,2,n,6);i.size=20;i.soundId="MiSound";i.material=e||new r.MeshStandardMaterial({color:16711920});i.mesh=new r.Mesh(i.branchGeometry,i.material);i.mesh.rotation.set(0,0,-Math.PI*.25);i.mesh.position.set(-5,0,0);i.add(i.mesh);i.rotation.z=Math.PI*.5;return i}n(t,[{key:"destroy",value:function e(){this.material.dispose();this.branchGeometry.dispose();this.remove(this.mesh)}}]);return t}(r.Object3D);i.default=u},{"../../utils/debug":59,three:31}],47:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:true});var n=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}return function(t,i,n){if(i)e(t.prototype,i);if(n)e(t,n);return t}}();var r=e("three");function a(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function s(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}
return t&&(typeof t==="object"||typeof t==="function")?t:e}function o(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}var l=function(e){o(t,e);function t(e){a(this,t);var i=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));var n=Math.random()*25+10;i.gBig=new r.CylinderGeometry(3,3,n,6);i.size=n;i.material=e||new r.MeshStandardMaterial({color:16711920});i.mesh=new r.Mesh(i.gBig,i.material);i.soundId="ReSound";i.add(i.mesh);i.rotation.z=Math.PI*.5;return i}n(t,[{key:"destroy",value:function e(){this.material.dispose();this.gBig.dispose();this.remove(this.mesh)}}]);return t}(r.Object3D);i.default=l},{three:31}],48:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:true});var n=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}return function(t,i,n){if(i)e(t.prototype,i);if(n)e(t,n);return t}}();var r=e("three");var a=e("../../utils/preloader");var s=o(a);function o(e){return e&&e.__esModule?e:{default:e}}function l(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function u(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function c(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}var h=function(e){c(t,e);function t(e){l(this,t);var i=u(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));i.gBranch=s.default.getGeometry("crystal3Model");i.material=e||new r.MeshStandardMaterial({color:16711920});var n=Math.random()*1.5+1;i.size=20*n;i.soundId="SiSound";var a=new r.Mesh(i.gBranch,i.material);a.scale.x=n;a.position.x=15*n;i.branch=new r.Object3D;i.branch.rotation.z=-Math.PI*.75;i.branch.add(a);i.add(i.branch);return i}n(t,[{key:"destroy",value:function e(){this.material.dispose();this.gBranch.dispose();this.remove(this.branch)}}]);return t}(r.Object3D);i.default=h},{"../../utils/preloader":61,three:31}],49:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:true});var n=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}return function(t,i,n){if(i)e(t.prototype,i);if(n)e(t,n);return t}}();var r=e("three");var a=e("../../utils/preloader");var s=o(a);function o(e){return e&&e.__esModule?e:{default:e}}function l(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function u(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function c(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}var h=function(e){c(t,e);function t(e){l(this,t);var i=u(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));i.geometry=s.default.getGeometry("crystalModel");i.material=e||new r.MeshStandardMaterial({color:16711920});var n=new r.Mesh(i.geometry,i.material);var a=new r.Mesh(i.geometry,i.material);i.add(n);i.add(a);n.position.set(-5,-5,0);n.scale.set(.7,.7,.7);n.rotation.z=Math.PI*.15;a.position.x=5;a.rotation.z=Math.PI*.5;i.soundId="SolSound";var o=(new r.Box3).setFromObject(i);i.size=o.getSize().x;return i}n(t,[{key:"destroy",value:function e(){this.material.dispose();this.geometry.dispose()}}]);return t}(r.Object3D);i.default=h},{"../../utils/preloader":61,three:31}],50:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:true});i.default=M;var n=e("./Cylo");var r=_(n);var a=e("./Fork");var s=_(a);var o=e("./Do");var l=_(o);var u=e("./Re");var c=_(u);var h=e("./Mi");var f=_(h);var d=e("./Fa");var p=_(d);var m=e("./Sol");var v=_(m);var g=e("./La");var y=_(g);var b=e("./Si");var x=_(b);function _(e){return e&&e.__esModule?e:{default:e}}var w={Do:l.default,Re:c.default,Mi:f.default,Fa:p.default,Sol:v.default,La:y.default,Si:x.default};var T=Object.keys(w).map(function(e){return w[e]});function M(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;var t=e!==null&&e<T.length?e:Math.floor(Math.random()*T.length);return T[t]}},{"./Cylo":41,"./Do":42,"./Fa":43,"./Fork":44,"./La":45,"./Mi":46,"./Re":47,"./Si":48,"./Sol":49}],51:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:true});var n=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}return function(t,i,n){if(i)e(t.prototype,i);if(n)e(t,n);return t}}();var r=e("../../utils/debug");function a(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function s(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function o(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}var l=e("@superguigui/wagner/src/Pass");var u="#define GLSLIFY 1\nvarying vec2 vUv;\n\nvoid main() {\n\n  vUv = uv;\n  gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n}";var c="#define GLSLIFY 1\nuniform sampler2D tInput;\nuniform sampler2D tMask;\nuniform float thresold;\n\nvarying vec2 vUv;\n//https://github.com/jamieowen/glsl-blend\nfloat blendLighten(float base, float blend) {\n\treturn max(blend,base);\n}\n\nvec3 blendLighten(vec3 base, vec3 blend) {\n\treturn vec3(blendLighten(base.r,blend.r),blendLighten(base.g,blend.g),blendLighten(base.b,blend.b));\n}\n\nvec3 blendLighten(vec3 base, vec3 blend, float opacity) {\n\treturn (blendLighten(base, blend) * opacity + base * (1.0 - opacity));\n}\n\nvec3 blendNormal(vec3 base, vec3 blend) {\n\treturn blend;\n}\n\nvec3 blendNormal(vec3 base, vec3 blend, float opacity) {\n\treturn (blendNormal(base, blend) * opacity + base * (1.0 - opacity));\n}\nfloat blendAdd(float base, float blend) {\n\treturn min(base+blend,1.0);\n}\n\nvec3 blendAdd(vec3 base, vec3 blend) {\n\treturn min(base+blend,vec3(1.0));\n}\n\nvec3 blendAdd(vec3 base, vec3 blend, float opacity) {\n\treturn (blendAdd(base, blend) * opacity + base * (1.0 - opacity));\n}\n\nvoid main()\n{\n  // color = texture2D(tInput, vUv);\n\n\tvec4 texelMask = texture2D(tMask, vUv);\n  float amount = thresold;\n  if (texelMask.r > thresold) {\n    amount = 0.0;\n  }\n  texelMask.a = amount;\n  vec4 transparent = vec4(0.0, 0.0, 0.0, 0.0);\n  texelMask *= mix(transparent, texelMask, amount);\n\n\tvec3 mask = texelMask.rgb/8.0;\n\tvec2 where = (vUv.xy - mask.xy);\n\tvec3 result  = texture2D(tInput, vec2(where.x, where.y)).rgb;\n\tvec4 newColor = vec4(result , 1.0);\n\n  // vec4 initialColor = texture2D(tInput, vUv);\n  // vec4 texelColor = texture2D(tMask, vUv);\n\n  // texelColor = mapTexelToLinear( texelColor );\n  // float amount = thresold;\n  // if (texelColor.r > thresold) {\n  //   amount = 0.0;\n  // }\n  // vec4 transparent = vec4(0.0, 0.0, 0.0, 0.0);\n  // newColor *= mix(transparent, newColor, amount);\n\n  // vec4 mergeColor = vec4(blendLighten(initialColor.rgb, newColor.rgb), 1.0);\n  gl_FragColor = newColor;\n  // gl_FragColor = initialColor;\n}";var h=function(e){o(t,e);function t(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};a(this,t);var i=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));i.setShader(u,c);i.params.thresold=0;i.params.tMask=e.mask;i.createGui(r.gui);return i}n(t,[{key:"createGui",value:function e(t){var i=t.addFolder("FrozenPass");i.add(this.params,"thresold",{min:0,max:1,step:.01,watch:true})}},{key:"run",value:function e(t){if(!this.shader){return}this.shader.uniforms.thresold.value=this.params.thresold;this.shader.uniforms.tMask.value=this.params.tMask;t.pass(this.shader)}}]);return t}(l);i.default=h},{"../../utils/debug":59,"@superguigui/wagner/src/Pass":3}],52:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:true});var n=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}return function(t,i,n){if(i)e(t.prototype,i);if(n)e(t,n);return t}}();var r=e("../../utils/debug");function a(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function s(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function o(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}var l=e("@superguigui/wagner/src/Pass");var u="#define GLSLIFY 1\nvarying vec2 vUv;\n\nvoid main() {\n\n  vUv = uv;\n  gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n}";var c="#define GLSLIFY 1\nuniform sampler2D tInput;\nuniform sampler2D tVignette;\n// uniform sampler2D tTorch;\nvarying vec2 vUv;\n\nuniform mediump float gamma;\nuniform float contrast;\nuniform mediump float brightness;\nuniform mediump float vignetteFallOff;\nuniform mediump float vignetteAmount;\nuniform mediump float time;\nuniform mediump float noiseStrength;\nuniform mediump float black;\nuniform float bw;\n\nvec3 blendNormal(vec3 base, vec3 blend) {\n\treturn blend;\n}\n\nvec3 blendNormal(vec3 base, vec3 blend, float opacity) {\n\treturn (blendNormal(base, blend) * opacity + base * (1.0 - opacity));\n}\n\nfloat blendScreen(float base, float blend) {\n\treturn 1.0-((1.0-base)*(1.0-blend));\n}\n\nvec3 blendScreen(vec3 base, vec3 blend) {\n\treturn vec3(blendScreen(base.r,blend.r),blendScreen(base.g,blend.g),blendScreen(base.b,blend.b));\n}\n\nvec3 blendScreen(vec3 base, vec3 blend, float opacity) {\n\treturn (blendScreen(base, blend) * opacity + base * (1.0 - opacity));\n}\n\nvec3 toGamma( vec3 rgb ) {\n  return pow( rgb, vec3( 1.0 / gamma ) );\n}\n\nvoid main() {\n\tlowp vec3 rgb = texture2D(tInput, vUv).rgb;\n\tlowp vec4 vignette = texture2D(tVignette, vUv);\n\t// lowp vec4 torch = texture2D(tTorch, vUv);\n\n\t//noise\n  lowp float x = (vUv.x + 4.0 ) * (vUv.y + 4.0 ) * (time * 10.0);\n\tlowp float grain = 1.-(mod((mod(x, 13.0) + 1.0) * (mod(x, 123.0) + 1.0), 0.01)-0.005) * noiseStrength;\n\trgb *= grain;\n\n\t//Color Correction\n\trgb = ((toGamma( rgb ) - .5) * contrast + .5 + vec3( brightness )) * black;\n\n\t//Vignette\n\tlowp float dist = distance(vUv, vec2(0.5, 0.5));\n\trgb /= smoothstep(0.8, vignetteFallOff * 0.799, dist * (vignetteAmount + vignetteFallOff));\n\n\t//BW\n\trgb = mix(rgb,vec3( dot( rgb, vec3( .299, 0.587, 0.114 ) ) ), bw);\n\n\tlowp vec4 color = vec4(blendNormal(rgb, vignette.rgb, vignette.a), 1.);\n\n\t// color = vec4(blendScreen(color.rgb, torch.rgb, 1.), 1.);\n\n\t// gl_FragColor = vec4(rgb, 1.);\n\tgl_FragColor = color;\n}\n";var h=function(e){o(t,e);function t(e){a(this,t);var i=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));i.setShader(u,c);e=e||{};i.params.time=1e-4;i.params.gamma=e.gamma||.7;i.params.contrast=e.contrast||1;i.params.brightness=e.brightness||.06;i.params.vignetteFallOff=e.vignetteFallOff||.2;i.params.vignetteAmount=e.vignetteAmount||.3;i.params.noiseStrength=e.noiseStrength||e.noise||.001;i.params.black=e.black||1;i.params.bw=e.bw||0;i.createGui(r.gui);return i}n(t,[{key:"createGui",value:function e(t){var i=t.addFolder("GeneralPass");i.add(this.params,"vignetteFallOff",{min:0,max:1,step:.1,watch:true});i.add(this.params,"vignetteAmount",{min:0,max:1,step:.1,watch:true});i.add(this.params,"contrast",{min:0,max:1,step:.01,watch:true});i.add(this.params,"gamma",{min:0,max:1,step:.01,watch:true});i.add(this.params,"brightness",{min:0,max:1,step:.01,watch:true});i.add(this.params,"noiseStrength",{min:0,max:30,step:.01,watch:true});i.add(this.params,"black",{min:0,max:1,step:.01,watch:true});i.add(this.params,"bw",{min:0,max:1,step:.001,watch:true})}},{key:"run",value:function e(t){if(!this.shader){return}this.shader.uniforms.time.value=this.params.time;this.shader.uniforms.black.value=this.params.black;this.shader.uniforms.noiseStrength.value=0;this.shader.uniforms.gamma.value=this.params.gamma;this.shader.uniforms.contrast.value=this.params.contrast;this.shader.uniforms.brightness.value=this.params.brightness;this.shader.uniforms.vignetteFallOff.value=this.params.vignetteFallOff;this.shader.uniforms.vignetteAmount.value=this.params.vignetteAmount;this.shader.uniforms.bw.value=this.params.bw;t.pass(this.shader)}}]);return t}(l);i.default=h},{"../../utils/debug":59,"@superguigui/wagner/src/Pass":3}],53:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:true});var n=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}return function(t,i,n){if(i)e(t.prototype,i);if(n)e(t,n);return t}}();var r=e("@superguigui/wagner/src/Pass");var a=o(r);var s=e("three");function o(e){return e&&e.__esModule?e:{default:e}}function l(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function u(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function c(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}var h={defines:{SMAA_THRESHOLD:"0.1"},uniforms:{tDiffuse:{value:null},resolution:{value:new s.Vector2(1/1024,1/512)}},vertexShader:"#define GLSLIFY 1\nuniform vec2 resolution;\n\nvarying vec2 vUv;\nvarying vec4 vOffset[ 3 ];\n\nvoid SMAAEdgeDetectionVS( vec2 texcoord ) {\n  vOffset[ 0 ] = texcoord.xyxy + resolution.xyxy * vec4( -1.0, 0.0, 0.0,  1.0 );\n  vOffset[ 1 ] = texcoord.xyxy + resolution.xyxy * vec4(  1.0, 0.0, 0.0, -1.0 );\n  vOffset[ 2 ] = texcoord.xyxy + resolution.xyxy * vec4( -2.0, 0.0, 0.0,  2.0 );\n}\n\nvoid main() {\n  vUv = uv;\n  SMAAEdgeDetectionVS( vUv );\n  gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}\n\n",fragmentShader:"#define GLSLIFY 1\nuniform sampler2D tDiffuse;\n\nvarying vec2 vUv;\nvarying vec4 vOffset[ 3 ];\n\nvec4 SMAAColorEdgeDetectionPS( vec2 texcoord, vec4 offset[3], sampler2D colorTex ) {\n  vec2 threshold = vec2( SMAA_THRESHOLD, SMAA_THRESHOLD );\n\n  // Calculate color deltas:\n  vec4 delta;\n  vec3 C = texture2D( colorTex, texcoord ).rgb;\n\n  vec3 Cleft = texture2D( colorTex, offset[0].xy ).rgb;\n  vec3 t = abs( C - Cleft );\n  delta.x = max( max( t.r, t.g ), t.b );\n\n  vec3 Ctop = texture2D( colorTex, offset[0].zw ).rgb;\n  t = abs( C - Ctop );\n  delta.y = max( max( t.r, t.g ), t.b );\n\n  // We do the usual threshold:\n  vec2 edges = step( threshold, delta.xy );\n\n  // Then discard if there is no edge:\n  if ( dot( edges, vec2( 1.0, 1.0 ) ) == 0.0 )\n    discard;\n\n  // Calculate right and bottom deltas:\n  vec3 Cright = texture2D( colorTex, offset[1].xy ).rgb;\n  t = abs( C - Cright );\n  delta.z = max( max( t.r, t.g ), t.b );\n\n  vec3 Cbottom  = texture2D( colorTex, offset[1].zw ).rgb;\n  t = abs( C - Cbottom );\n  delta.w = max( max( t.r, t.g ), t.b );\n\n  // Calculate the maximum delta in the direct neighborhood:\n  float maxDelta = max( max( max( delta.x, delta.y ), delta.z ), delta.w );\n\n  // Calculate left-left and top-top deltas:\n  vec3 Cleftleft  = texture2D( colorTex, offset[2].xy ).rgb;\n  t = abs( C - Cleftleft );\n  delta.z = max( max( t.r, t.g ), t.b );\n\n  vec3 Ctoptop = texture2D( colorTex, offset[2].zw ).rgb;\n  t = abs( C - Ctoptop );\n  delta.w = max( max( t.r, t.g ), t.b );\n\n  // Calculate the final maximum delta:\n  maxDelta = max( max( maxDelta, delta.z ), delta.w );\n\n  // Local contrast adaptation in action:\n  edges.xy *= step( 0.5 * maxDelta, delta.xy );\n\n  return vec4( edges, 0.0, 0.0 );\n}\n\nvoid main() {\n\n  gl_FragColor = SMAAColorEdgeDetectionPS( vUv, vOffset, tDiffuse );\n  // gl_FragColor = vec4(1.0, 0.0, 0.0, 1.0);\n\n}\n"};var f={defines:{SMAA_MAX_SEARCH_STEPS:"8",SMAA_AREATEX_MAX_DISTANCE:"16",SMAA_AREATEX_PIXEL_SIZE:"( 1.0 / vec2( 160.0, 560.0 ) )",SMAA_AREATEX_SUBTEX_SIZE:"( 1.0 / 7.0 )"},uniforms:{tDiffuse:{value:null},tArea:{value:null},tSearch:{value:null},resolution:{value:new s.Vector2(1/1024,1/512)}},vertexShader:"#define GLSLIFY 1\nuniform vec2 resolution;\n\nvarying vec2 vUv;\nvarying vec4 vOffset[ 3 ];\nvarying vec2 vPixcoord;\n\nvoid SMAABlendingWeightCalculationVS( vec2 texcoord ) {\n  vPixcoord = texcoord / resolution;\n\n  // We will use these offsets for the searches later on (see @PSEUDO_GATHER4):\n  vOffset[ 0 ] = texcoord.xyxy + resolution.xyxy * vec4( -0.25, 0.125, 1.25, 0.125 );\n  vOffset[ 1 ] = texcoord.xyxy + resolution.xyxy * vec4( -0.125, 0.25, -0.125, -1.25 );\n\n  // And these for the searches, they indicate the ends of the loops:\n  vOffset[ 2 ] = vec4( vOffset[ 0 ].xz, vOffset[ 1 ].yw ) + vec4( -2.0, 2.0, -2.0, 2.0 ) * resolution.xxyy * float( SMAA_MAX_SEARCH_STEPS );\n}\n\nvoid main() {\n  vUv = uv;\n  SMAABlendingWeightCalculationVS( vUv );\n  gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}\n",fragmentShader:"#define GLSLIFY 1\n#define SMAASampleLevelZeroOffset( tex, coord, offset ) texture2D( tex, coord + float( offset ) * resolution, 0.0 )\n\nuniform sampler2D tDiffuse;\nuniform sampler2D tArea;\nuniform sampler2D tSearch;\nuniform vec2 resolution;\n\nvarying vec2 vUv;\nvarying vec4 vOffset[3];\nvarying vec2 vPixcoord;\n\nvec2 round( vec2 x ) {\n  return sign( x ) * floor( abs( x ) + 0.5 );\n}\n\nfloat SMAASearchLength( sampler2D searchTex, vec2 e, float bias, float scale ) {\n  // Not required if searchTex accesses are set to point:\n  // float2 SEARCH_TEX_PIXEL_SIZE = 1.0 / float2(66.0, 33.0);\n  // e = float2(bias, 0.0) + 0.5 * SEARCH_TEX_PIXEL_SIZE +\n  //     e * float2(scale, 1.0) * float2(64.0, 32.0) * SEARCH_TEX_PIXEL_SIZE;\n  e.r = bias + e.r * scale;\n  return 255.0 * texture2D( searchTex, e, 0.0 ).r;\n}\n\nfloat SMAASearchXLeft( sampler2D edgesTex, sampler2D searchTex, vec2 texcoord, float end ) {\n  /**\n  * @PSEUDO_GATHER4\n  * This texcoord has been offset by (-0.25, -0.125) in the vertex shader to\n  * sample between edge, thus fetching four edges in a row.\n  * Sampling with different offsets in each direction allows to disambiguate\n  * which edges are active from the four fetched ones.\n  */\n  vec2 e = vec2( 0.0, 1.0 );\n\n  for ( int i = 0; i < SMAA_MAX_SEARCH_STEPS; i ++ ) {\n    e = texture2D( edgesTex, texcoord, 0.0 ).rg;\n    texcoord -= vec2( 2.0, 0.0 ) * resolution;\n    if ( ! ( texcoord.x > end && e.g > 0.8281 && e.r == 0.0 ) ) break;\n  }\n\n  // We correct the previous (-0.25, -0.125) offset we applied:\n  texcoord.x += 0.25 * resolution.x;\n\n  // The searches are bias by 1, so adjust the coords accordingly:\n  texcoord.x += resolution.x;\n\n  // Disambiguate the length added by the last step:\n  texcoord.x += 2.0 * resolution.x;\n  texcoord.x -= resolution.x * SMAASearchLength(searchTex, e, 0.0, 0.5);\n\n  return texcoord.x;\n}\n\nfloat SMAASearchXRight( sampler2D edgesTex, sampler2D searchTex, vec2 texcoord, float end ) {\n  vec2 e = vec2( 0.0, 1.0 );\n\n  for ( int i = 0; i < SMAA_MAX_SEARCH_STEPS; i ++ ) {\n    e = texture2D( edgesTex, texcoord, 0.0 ).rg;\n    texcoord += vec2( 2.0, 0.0 ) * resolution;\n    if ( ! ( texcoord.x < end && e.g > 0.8281 && e.r == 0.0 ) ) break;\n  }\n\n  texcoord.x -= 0.25 * resolution.x;\n  texcoord.x -= resolution.x;\n  texcoord.x -= 2.0 * resolution.x;\n  texcoord.x += resolution.x * SMAASearchLength( searchTex, e, 0.5, 0.5 );\n\n  return texcoord.x;\n}\n\nfloat SMAASearchYUp( sampler2D edgesTex, sampler2D searchTex, vec2 texcoord, float end ) {\n  vec2 e = vec2( 1.0, 0.0 );\n\n  for ( int i = 0; i < SMAA_MAX_SEARCH_STEPS; i ++ ) {\n    e = texture2D( edgesTex, texcoord, 0.0 ).rg;\n    texcoord += vec2( 0.0, 2.0 ) * resolution;\n    if ( ! ( texcoord.y > end && e.r > 0.8281 && e.g == 0.0 ) ) break;\n  }\n\n  texcoord.y -= 0.25 * resolution.y;\n  texcoord.y -= resolution.y;\n  texcoord.y -= 2.0 * resolution.y;\n  texcoord.y += resolution.y * SMAASearchLength( searchTex, e.gr, 0.0, 0.5 );\n\n  return texcoord.y;\n}\n\nfloat SMAASearchYDown( sampler2D edgesTex, sampler2D searchTex, vec2 texcoord, float end ) {\n  vec2 e = vec2( 1.0, 0.0 );\n\n  for ( int i = 0; i < SMAA_MAX_SEARCH_STEPS; i ++ ) {\n    e = texture2D( edgesTex, texcoord, 0.0 ).rg;\n    texcoord -= vec2( 0.0, 2.0 ) * resolution;\n    if ( ! ( texcoord.y < end && e.r > 0.8281 && e.g == 0.0 ) ) break;\n  }\n\n  texcoord.y += 0.25 * resolution.y;\n  texcoord.y += resolution.y;\n  texcoord.y += 2.0 * resolution.y;\n  texcoord.y -= resolution.y * SMAASearchLength( searchTex, e.gr, 0.5, 0.5 );\n\n  return texcoord.y;\n}\n\nvec2 SMAAArea( sampler2D areaTex, vec2 dist, float e1, float e2, float offset ) {\n  // Rounding prevents precision errors of bilinear filtering:\n  vec2 texcoord = float( SMAA_AREATEX_MAX_DISTANCE ) * round( 4.0 * vec2( e1, e2 ) ) + dist;\n\n  // We do a scale and bias for mapping to texel space:\n  texcoord = SMAA_AREATEX_PIXEL_SIZE * texcoord + ( 0.5 * SMAA_AREATEX_PIXEL_SIZE );\n\n  // Move to proper place, according to the subpixel offset:\n  texcoord.y += SMAA_AREATEX_SUBTEX_SIZE * offset;\n\n  return texture2D( areaTex, texcoord, 0.0 ).rg;\n}\n\nvec4 SMAABlendingWeightCalculationPS( vec2 texcoord, vec2 pixcoord, vec4 offset[ 3 ], sampler2D edgesTex, sampler2D areaTex, sampler2D searchTex, ivec4 subsampleIndices ) {\n  vec4 weights = vec4( 0.0, 0.0, 0.0, 0.0 );\n\n  vec2 e = texture2D( edgesTex, texcoord ).rg;\n\n  if ( e.g > 0.0 ) {\n    vec2 d;\n\n    // Find the distance to the left:\n    vec2 coords;\n    coords.x = SMAASearchXLeft( edgesTex, searchTex, offset[ 0 ].xy, offset[ 2 ].x );\n    coords.y = offset[ 1 ].y;\n    d.x = coords.x;\n\n    // Now fetch the left crossing edges, two at a time using bilinear\n    // filtering. Sampling at -0.25 (see @CROSSING_OFFSET) enables to\n    // discern what value each edge has:\n    float e1 = texture2D( edgesTex, coords, 0.0 ).r;\n\n    // Find the distance to the right:\n    coords.x = SMAASearchXRight( edgesTex, searchTex, offset[ 0 ].zw, offset[ 2 ].y );\n    d.y = coords.x;\n\n    // We want the distances to be in pixel units (doing this here allow to\n    // better interleave arithmetic and memory accesses):\n    d = d / resolution.x - pixcoord.x;\n\n    // SMAAArea below needs a sqrt, as the areas texture is compressed\n    // quadratically:\n    vec2 sqrt_d = sqrt( abs( d ) );\n\n    // Fetch the right crossing edges:\n    coords.y -= 1.0 * resolution.y;\n    float e2 = SMAASampleLevelZeroOffset( edgesTex, coords, ivec2( 1, 0 ) ).r;\n\n    // Ok, we know how this pattern looks like, now it is time for getting\n    // the actual area:\n    weights.rg = SMAAArea( areaTex, sqrt_d, e1, e2, float( subsampleIndices.y ) );\n  }\n\n  if ( e.r > 0.0 ) {\n    vec2 d;\n\n    // Find the distance to the top:\n    vec2 coords;\n\n    coords.y = SMAASearchYUp( edgesTex, searchTex, offset[ 1 ].xy, offset[ 2 ].z );\n    coords.x = offset[ 0 ].x;\n    d.x = coords.y;\n\n    // Fetch the top crossing edges:\n    float e1 = texture2D( edgesTex, coords, 0.0 ).g;\n\n    // Find the distance to the bottom:\n    coords.y = SMAASearchYDown( edgesTex, searchTex, offset[ 1 ].zw, offset[ 2 ].w );\n    d.y = coords.y;\n\n    // We want the distances to be in pixel units:\n    d = d / resolution.y - pixcoord.y;\n\n    // SMAAArea below needs a sqrt, as the areas texture is compressed\n    // quadratically:\n    vec2 sqrt_d = sqrt( abs( d ) );\n\n    // Fetch the bottom crossing edges:\n    coords.y -= 1.0 * resolution.y;\n    float e2 = SMAASampleLevelZeroOffset( edgesTex, coords, ivec2( 0, 1 ) ).g;\n\n    // Get the area for this direction:\n    weights.ba = SMAAArea( areaTex, sqrt_d, e1, e2, float( subsampleIndices.x ) );\n  }\n\n  return weights;\n}\n\nvoid main() {\n\n  gl_FragColor = SMAABlendingWeightCalculationPS( vUv, vPixcoord, vOffset, tDiffuse, tArea, tSearch, ivec4( 0.0 ) );\n\n}"};var d={vertexShader:"#define GLSLIFY 1\nuniform vec2 resolutionInv;\n\nvarying vec2 vUv;\nvarying vec4 vOffset[ 2 ];\n\nvoid SMAANeighborhoodBlendingVS( vec2 texcoord ) {\n  vOffset[ 0 ] = texcoord.xyxy + resolutionInv.xyxy * vec4( -1.0, 0.0, 0.0, 1.0 );\n  vOffset[ 1 ] = texcoord.xyxy + resolutionInv.xyxy * vec4( 1.0, 0.0, 0.0, -1.0 );\n}\n\nvoid main() {\n  vUv = uv;\n  SMAANeighborhoodBlendingVS( vUv );\n  gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",fragmentShader:"#define GLSLIFY 1\nuniform sampler2D tInput;\nuniform sampler2D tSMAA;\nuniform vec2 resolutionInv;\n\nvarying vec2 vUv;\nvarying vec4 vOffset[ 2 ];\n\nvec4 SMAANeighborhoodBlendingPS( vec2 texcoord, vec4 offset[ 2 ], sampler2D colorTex, sampler2D blendTex ) {\n  // Fetch the blending weights for current pixel:\n  vec4 a;\n  a.xz = texture2D( blendTex, texcoord ).xz;\n  a.y = texture2D( blendTex, offset[ 1 ].zw ).g;\n  a.w = texture2D( blendTex, offset[ 1 ].xy ).a;\n\n  // Is there any blending weight with a value greater than 0.0?\n  if ( dot(a, vec4( 1.0, 1.0, 1.0, 1.0 )) < 1e-5 ) {\n    return texture2D( colorTex, texcoord, 0.0 );\n  } else {\n    // Up to 4 lines can be crossing a pixel (one through each edge). We\n    // favor blending by choosing the line with the maximum weight for each\n    // direction:\n    vec2 offset;\n    offset.x = a.a > a.b ? a.a : -a.b; // left vs. right\n    offset.y = a.g > a.r ? -a.g : a.r; // top vs. bottom // WebGL port note: Changed signs\n\n    // Then we go in the direction that has the maximum weight:\n    if ( abs( offset.x ) > abs( offset.y )) { // horizontal vs. vertical\n      offset.y = 0.0;\n    } else {\n      offset.x = 0.0;\n    }\n\n    // Fetch the opposite color and lerp by hand:\n    vec4 C = texture2D( colorTex, texcoord, 0.0 );\n    texcoord += sign( offset ) * resolutionInv;\n    vec4 Cop = texture2D( colorTex, texcoord, 0.0 );\n    float s = abs( offset.x ) > abs( offset.y ) ? abs( offset.x ) : abs( offset.y );\n\n    // WebGL port note: Added gamma correction\n    C.xyz = pow(C.xyz, vec3(2.2));\n    Cop.xyz = pow(Cop.xyz, vec3(2.2));\n    vec4 mixed = mix(C, Cop, s);\n    mixed.xyz = pow(mixed.xyz, vec3(1.0 / 2.2));\n\n    return mixed;\n  }\n}\n\nvoid main() {\n  gl_FragColor = SMAANeighborhoodBlendingPS( vUv, vOffset, tInput, tSMAA );\n}"};var p=function(e){c(t,e);function t(e,i){l(this,t);var n=u(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));n.edgesRT=new s.WebGLRenderTarget(e,i,{depthBuffer:false,stencilBuffer:false,generateMipmaps:false,minFilter:s.LinearFilter,format:s.RGBFormat});n.edgesRT.texture.name="SMAAPass.edges";n.weightsRT=new s.WebGLRenderTarget(e,i,{depthBuffer:false,stencilBuffer:false,generateMipmaps:false,minFilter:s.LinearFilter,format:s.RGBAFormat});n.weightsRT.texture.name="SMAAPass.weights";var r=new Image;r.src=n.getAreaTexture();n.areaTexture=new s.Texture;n.areaTexture.name="SMAAPass.area";n.areaTexture.image=r;n.areaTexture.format=s.RGBFormat;n.areaTexture.minFilter=s.LinearFilter;n.areaTexture.generateMipmaps=false;n.areaTexture.needsUpdate=true;n.areaTexture.flipY=false;var a=new Image;a.src=n.getSearchTexture();n.searchTexture=new s.Texture;n.searchTexture.name="SMAAPass.search";n.searchTexture.image=a;n.searchTexture.magFilter=s.NearestFilter;n.searchTexture.minFilter=s.NearestFilter;n.searchTexture.generateMipmaps=false;n.searchTexture.needsUpdate=true;n.searchTexture.flipY=false;n.uniformsEdges=s.UniformsUtils.clone(h.uniforms);n.uniformsEdges.resolution.value.set(1/e,1/i);n.materialEdges=new s.ShaderMaterial({defines:h.defines,uniforms:n.uniformsEdges,vertexShader:h.vertexShader,fragmentShader:h.fragmentShader});n.uniformsWeights=s.UniformsUtils.clone(f.uniforms);n.uniformsWeights.resolution.value.set(1/e,1/i);n.uniformsWeights.tDiffuse.value=n.edgesRT.texture;n.uniformsWeights.tArea.value=n.areaTexture;n.uniformsWeights.tSearch.value=n.searchTexture;n.materialWeights=new s.ShaderMaterial({defines:f.defines,uniforms:n.uniformsWeights,vertexShader:f.vertexShader,fragmentShader:f.fragmentShader});n.setShader(d.vertexShader,d.fragmentShader);n.shader.uniforms.resolutionInv.value.set(1/e,1/i);n.shader.uniforms.tSMAA.value=n.weightsRT.texture;return n}n(t,[{key:"getAreaTexture",value:function e(){
return"data:image/png;base64,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"
}},{key:"getSearchTexture",value:function e(){return"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEIAAAAhCAAAAABIXyLAAAAAOElEQVRIx2NgGAWjYBSMglEwEICREYRgFBZBqDCSLA2MGPUIVQETE9iNUAqLR5gIeoQKRgwXjwAAGn4AtaFeYLEAAAAASUVORK5CYII="}},{key:"setSize",value:function e(t,i){this.edgesRT.setSize(t,i);this.weightsRT.setSize(t,i);this.uniformsEdges.resolution.value.set(1/t,1/i);this.uniformsWeights.resolution.value.set(1/t,1/i);this.shader.uniforms.resolutionInv.value.set(1/t,1/i)}},{key:"run",value:function e(t){this.uniformsEdges.tDiffuse.value=t.read.texture;t.quad.material=this.materialEdges;t.renderer.render(t.scene,t.camera,this.edgesRT,false);t.quad.material=this.materialWeights;t.renderer.render(t.scene,t.camera,this.weightsRT,false);t.pass(this.shader)}}]);return t}(a.default);i.default=p},{"@superguigui/wagner/src/Pass":3,three:31}],54:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:true});var n=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}return function(t,i,n){if(i)e(t.prototype,i);if(n)e(t,n);return t}}();var r=e("three");var a=e("brindille-resize");var s=f(a);var o=e("../utils/debug");var l=e("../utils/preloader");var u=f(l);var c=e("../objects/Snow");var h=f(c);function f(e){return e&&e.__esModule?e:{default:e}}function d(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function p(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function m(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}var v={useKaleido:true,useAlphaKaleido:true};var g=function(e){m(t,e);function t(e){d(this,t);var i=p(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));i.width=e.offsetWidth;i.height=e.offsetHeight;i.camera=new r.OrthographicCamera(i.width/-2,i.width/2,i.height/2,i.height/-2,-100,100);i.add(i.camera);return i}n(t,[{key:"onLoadComplete",value:function e(){this.setBGPlasma();this.setXPScene();this.setGameSceneToBg();this.setGui()}},{key:"setGui",value:function e(){var t=this;var i=o.gui.addFolder("Kaleido");i.open();i.add(v,"useKaleido").on("update",function(e){t.materialScreen.uniforms.kaleido.value=e===true?1:0});var n=o.gui.addFolder("Sky");var r={x:0,y:0};if(this.bgMaterial){n.addColorPicker(this.bgMaterial.uniforms.blueSky,"value").on("update",function(){t.isSkyDebug=true});n.addColorPicker(this.bgMaterial.uniforms.redSky,"value");n.add(r,"x",{min:-10,max:10,step:.01}).on("update",function(){t.bgMaterial.uniforms.mouse.value=r});n.add(r,"y",{min:-10,max:10,step:.01}).on("update",function(){t.bgMaterial.uniforms.mouse.value=r})}}},{key:"setBGPlasma",value:function e(){console.log("stbgplasma");var t=u.default.getTexture("NoiseTexture");t.wrapS=t.wrapT=r.RepeatWrapping;t.offset.set(0,0);t.repeat.set(2,2);this.bgMaterial=new r.ShaderMaterial({uniforms:{time:{value:1},tNoise:{value:t},resolution:{value:new r.Vector2(800,600)},mouse:{value:new r.Vector2(1.25,.65)},blueSky:{value:new r.Color(2722283)},redSky:{value:new r.Color(8535178)}},vertexShader:"#define GLSLIFY 1\nvarying vec2 vUv;\n\nvoid main() {\n  vUv = uv;\n  gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}\n",fragmentShader:"#define GLSLIFY 1\nuniform float time;\nuniform sampler2D tNoise;\nuniform vec2 resolution;\nuniform vec2 mouse;\nuniform vec3 blueSky;\nuniform vec3 redSky;\n\n// const vec2 mouse = vec2(-3600, -1000);\n\nvarying vec2 vUv;\n\nconst mat2 m2 = mat2(0.8, -0.6, 0.6, 0.8);\n\nfloat fbm( vec2 p )\n{\n    float f = 0.0;\n    f += 0.5000*texture2D( tNoise, p/256.0, -100. ).x; p = m2*p*2.02;\n    f += 0.2500*texture2D( tNoise, p/256.0, -100. ).x; p = m2*p*2.03;\n    f += 0.1250*texture2D( tNoise, p/256.0, -100. ).x; p = m2*p*2.01;\n    f += 0.0625*texture2D( tNoise, p/256.0, -100. ).x;\n    return f/0.9375;\n}\n\nvoid main()\n{\n\tvec2 q = vUv;\n  vec2 p = -1.0 + 2.0 * q;\n  p.x *= resolution.x/resolution.y;\n  // vec2 mo = mouse.xy/resolution.xy;\n  vec2 mo = mouse.xy;\n\t\n    // camera\n\tfloat an1 = mo.x;\n\tfloat an2 = mo.y;\n  vec3 ro = 10.0*normalize(vec3(sin(an2)*cos(an1), cos(an2)-0.5, sin(an2)*sin(an1) ));\n  vec3 ww = normalize(vec3(0.0,0.0,0.0) - ro);\n  vec3 uu = normalize(cross( vec3(0.0,1.0,0.0), ww ));\n  vec3 vv = normalize(cross(ww,uu));\n  vec3 rd = normalize( p.x*uu + p.y*vv - 1.4*ww );\n\n  // raymarch\n  vec3 col =  vec3(0.);//texture( iChannel0, rd ).xyz;\n  \n  vec3 light = normalize(vec3(0.9, 0.2, 0.9));\n  //vec3 ambient = 5. * vec3(0.1, 0.9, 0.2);\n  float sundot = clamp(dot(rd * 0.95,light),0.,1.);\n  vec3 pos = uu;\n    \n    \n// sky\n\n  // sky colour        \n  // vec3 blueSky = vec3(0.3,.55,0.8);\n  // vec3 redSky = vec3(0.7,0.7,0.6);\n  \n  vec3 sky = mix(blueSky, redSky, pow(sundot, 8.));\n  \n  col =  sky*(1.0-0.8*rd.y);\n  \n  // stars\n  float s = texture2D( tNoise, rd.xz * 1.25, -100. ).x;\n  s += texture2D( tNoise, rd.xz * 4., -100. ).x;\n  \n  s = pow(s, 18.0) * 0.00005 * max(rd.y, - 0.6) * pow((1. - max(sundot, 0.)), 1.); \n  if (s > .0)\n  {\n    vec3 backStars = vec3(s);\n    col += backStars;\n  }\n  \n  // sun\n  col += 0.1*vec3(0.9, 0.3, 0.9)*pow(sundot, 0.5);\n  col += 0.2*vec3(1., 0.7, 0.7)*pow(sundot, 1.);\n  col += 0.95*vec3(1.)*pow(sundot, 256.);\n\n  // clouds\n  float cloudSpeed = 0.01;\n  float cloudFlux = 0.4;\n\n  // layer 1\n  vec3 cloudColour = mix(vec3(1.0,0.95,1.0), 0.35*redSky, 0.);\n      \n  vec2 sc = cloudSpeed * 50.*time * ro.xz + rd.xz*(1000.0-ro.y)/rd.y;\n  col = mix( col, cloudColour, 0.5*smoothstep(0.5,0.8,fbm(0.0005*sc+fbm(0.0005*sc+time*cloudFlux))));\n      \n  // cloud layer 2\n  sc = cloudSpeed * 30.*time * ro.xz + rd.xz*(600.0-ro.y)/rd.y;\n  col = mix( col, cloudColour, 0.5*smoothstep(0.5,0.8,fbm(0.0002*sc+fbm(0.0005*sc+time*cloudFlux))));\n\n  // horizon        \n  //col = mix( col, 0.9*vec3(0.9,0.75,0.8), pow( 1.-max(rd.y+0.1,0.0), 5.0));\n      \n      \n  \n  // contrast\n  col = clamp(col, 0., 1.);\n  col = col*col*(3.0-2.0*col);\n  \n  \n  // saturation (amplify colour, subtract grayscale)\n  float sat = 0.2;\n  col = col * (1. + sat) - sat*dot(col, vec3(0.33));\n  \n  // vignette\n  //col = col * (1.0 - dot(p, p) * 0.1);\n    \n\tgl_FragColor = vec4(col, 1.0);\n}"});this.bgMaterial.needsUpdate=true;var i=new r.PlaneBufferGeometry(1,1,32);this.bgPlasma=new r.Mesh(i,this.bgMaterial);this.bgPlasma.position.set(0,0,0);this.add(this.bgPlasma)}},{key:"setGameSceneToBg",value:function e(){console.log("gscene");this.rtTexture2=new r.WebGLRenderTarget(s.default.width,s.default.height,{minFilter:r.LinearFilter,magFilter:r.LinearFilter,format:r.RGBAFormat});this.materialScreen=new r.ShaderMaterial({uniforms:{tDiffuse:{value:this.rtTexture2.texture},resolution:{value:new r.Vector2},sides:{value:6},angles:{value:90*Math.PI/180},alpha:{value:1},kaleido:{value:1}},transparent:true,vertexShader:"#define GLSLIFY 1\nvarying vec2 vUv;\n\nvoid main() {\n\n  vUv = uv;\n  gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n}\n",fragmentShader:"#define GLSLIFY 1\nuniform sampler2D tDiffuse;\nuniform vec2 resolution;\nvarying vec2 vUv;\n\nuniform float sides;\nuniform float angle;\n\nuniform float alpha;\nuniform float kaleido;\n\nvoid main() {\n  \n  // vec2 p (vUv-.5*resolution) * 7.2 / resolution.y;\n  vec2 R = resolution;\n  vec2 U = vUv;\n  // vec2 p = (U / R.y-vec2(0.5 * R.x / R.y, 0.5));\n\t// vec2 ratio = resolution.xy / min( resolution.x, resolution.y );\n\t// vec2 uv = ( vUv.xy * 2.0 - resolution.xy ) / min( resolution.x, resolution.y );\n  vec2 p = (vUv) - (0.5);\n  // vec2 p = vUv / resolution;\n\n  // vec2 p = (vUv / resolution.xy -.5) * 2.;\n  // p.x *= resolution.x/resolution.y;\n\t\n  float r = length(p);\n  float a = atan(p.y, p.x) + angle;\n  float tau = 2. * 3.1416;\n  a = mod(a, tau/sides);\n  a = abs(a - tau/sides/2.);\n  p = r * vec2(cos(a), sin(a));\n\n  vec4 color;\n  \n  if (kaleido == 1.0) {\n    color = texture2D(tDiffuse, p + 0.5);\n  } else {\n    color = texture2D(tDiffuse, vUv);\n  }\n  \n  // if (alpha == 1.0) {\n  //   float blackness = (color.r + color.g + color.b) / 3.0;\n    // gl_FragColor = vec4( color.r, color.g , color.b, blackness);\n  // } else {\n  // }\n    gl_FragColor = color;\n\n}",depthWrite:false,blending:1});var t=new r.PlaneBufferGeometry(1,1);this.snowflakeContainer=new r.Mesh(t,this.materialScreen);this.snowflakeContainer.position.set(0,0,0);this.add(this.snowflakeContainer)}},{key:"setXPScene",value:function e(){this.rtTexture=new r.WebGLRenderTarget(s.default.width,s.default.height,{minFilter:r.LinearFilter,magFilter:r.LinearFilter,format:r.RGBAFormat});this.materialScreen=new r.ShaderMaterial({uniforms:{tDiffuse:{value:this.rtTexture.texture}},transparent:true,vertexShader:"#define GLSLIFY 1\nvarying vec2 vUv;\n\nvoid main() {\n\tvUv = uv;\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n}\n",fragmentShader:"#define GLSLIFY 1\nvarying vec2 vUv;\nuniform sampler2D tDiffuse;\n\nvoid main() {\n\tgl_FragColor = texture2D(tDiffuse, vUv);\n}\n",depthWrite:false,blending:1});var t=new r.PlaneBufferGeometry(1,1);this.fullContainer=new r.Mesh(t,this.materialScreen);this.fullContainer.position.set(0,0,0);this.add(this.fullContainer)}},{key:"resize",value:function e(){this.width=s.default.width;this.height=s.default.height;this.camera.left=this.width/-2;this.camera.right=this.width/2;this.camera.top=this.height/2;this.camera.bottom=this.height/-2;this.camera.updateProjectionMatrix();this.rtTexture2.setSize(this.width,this.height);this.rtTexture.setSize(this.width,this.height);this.fullContainer.scale.set(this.width,this.height,1);this.snowflakeContainer.scale.set(this.height*1.3,this.height*1.3,1);this.bgPlasma.scale.set(this.width,this.height,1)}},{key:"update",value:function e(t){if(this.bgMaterial)this.bgMaterial.uniforms.time.value+=.01}}]);return t}(r.Scene);i.default=g},{"../objects/Snow":39,"../utils/debug":59,"../utils/preloader":61,"brindille-resize":13,three:31}],55:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:true});var n=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}return function(t,i,n){if(i)e(t.prototype,i);if(n)e(t,n);return t}}();var r=e("three");var a=e("brindille-resize");var s=v(a);var o=e("../controls/Controls");var l=v(o);var u=e("../utils/debug");var c=e("../objects/parts/partsFactory");var h=v(c);var f=e("../materials/ice-material/IceMaterial");var d=v(f);var p=e("../utils/preloader");var m=v(p);function v(e){return e&&e.__esModule?e:{default:e}}function g(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function y(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function b(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}var x=6;var _=0;var w=160;var T=function(e){b(t,e);function t(e){g(this,t);var i=y(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));i.onLoadComplete=i.onLoadComplete.bind(i);i.offset=0;i.currentBranchSize=0;i.maxDuration=.6;i.speed=i.maxDuration;i.camera=new r.PerspectiveCamera(50,s.default.width/s.default.height,.1,1e4);i.add(i.camera);i.controls=new l.default(i.camera,e,false);return i}n(t,[{key:"setGui",value:function e(){var t=u.gui.addFolder("Flights");t.add(this.frontLight.position,"x",{max:100,min:-100,step:.01});t.add(this.frontLight.position,"y",{max:100,min:-100,step:.01});t.add(this.frontLight.position,"z",{max:100,min:-100,step:.01});t.add(this.frontLight,"intensity",{max:1,min:0,step:.01});var i=u.gui.addFolder("Blights");i.add(this.backLight.position,"x",{max:100,min:-100,step:.01});i.add(this.backLight.position,"y",{max:100,min:-100,step:.01});i.add(this.backLight.position,"z",{max:100,min:-100,step:.01});i.add(this.backLight,"intensity",{max:1,min:0,step:.01})}},{key:"onLoadComplete",value:function e(t){var i=new r.AmbientLight(16777215,1);this.frontLight=new r.PointLight(16777215,.8);this.backLight=new r.PointLight(16777215,.5);this.frontLight.position.z=20;this.backLight.position.set(-34.27,9.09,17.48);this.add(this.frontLight);this.add(this.backLight);this.add(i);this.branch=new r.Object3D;this.add(this.branch);this.listener=new r.AudioListener;this.camera.add(this.listener);this.sound=new r.Audio(this.listener);var n=m.default.getTexture("ReflectionTexture");n.mapping=r.EquirectangularReflectionMapping;n.minFilter=r.LinearFilter;n.magFilter=r.LinearFilter;this.iceMaterial=new d.default({envMap:n,reflectivity:1.6,opacity:1});this.elements=[];this.offset=0;this.initTime=Date.now();this.deltaTime=0;var a=0;this.setGui();this.setIntro()}},{key:"setIntro",value:function e(){var t=this;while(this.currentBranchSize<w){this.generateFirst()}this.speed=this.maxDuration;this.tlIn=new TimelineMax({onComplete:function e(){t.isIntroFinished=true}});this.tlIn.fromTo(this.frontLight.position,.6,{x:0},{x:w*1.4});this.elements.forEach(function(e,i){var n=e.position.x;t.tlIn.fromTo(e.position,.6,{x:0},{x:n,ease:Linear.easeOut},i*.1);t.tlIn.fromTo(e.scale,.6,{x:.01,y:.01,z:.01},{x:1,y:1,z:1,ease:Expo.easeOut},i*.1+.6);t.tlIn.fromTo(e.rotation,.8,{x:0},{x:Math.PI,ease:Expo.easeNone},i*.1+.6)})}},{key:"generateFirst",value:function e(){var t=(0,h.default)();var i=new t(this.iceMaterial);if(this.elements.length>0){var n=this.elements[this.elements.length-1];i.position.x=n.position.x+n.size*.5+_+i.size*.5}this.elements.push(i);this.branch.add(i);this.cleanScene();this.currentBranchSize=i.position.x+i.size*.5}},{key:"spawnComponent",value:function e(){var t=this;var i=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;if(this.speedTimeout)clearTimeout(this.speedTimeout);var n=0;var r=(0,h.default)(i);var a=new r(this.iceMaterial);if(this.elements.length>0){var s=this.elements[this.elements.length-1];a.position.x=s.position.x+s.size*.5+_+a.size*.5}this.elements.push(a);this.branch.add(a);TweenMax.fromTo(a.scale,.6,{x:.1,y:.1,z:.1,delay:n},{x:1,y:1,z:1,ease:Expo.easeOut});TweenMax.fromTo(a.rotation,1.2,{x:0},{x:Math.PI,ease:Expo.easeOut},0);if(a.soundId){this.sound.setBuffer(m.default.getAudio(a.soundId));if(this.sound.isPlaying)this.sound.stop();this.sound.setVolume(.5);this.sound.play()}this.deltaTime=(Date.now()-this.initTime)*.001;this.initTime=Date.now();this.speed=this.deltaTime>this.maxDuration?this.maxDuration:this.deltaTime;this.cleanScene();this.currentBranchSize=a.position.x+a.size*.5;this.offset=this.currentBranchSize>w?this.currentBranchSize-w:a.size*.5;this.tl=new TimelineMax;this.tl.fromTo(this.frontLight.position,this.speed,{x:0},{x:w*1.4});this.elements.forEach(function(e){t.tl.to(e.position,t.speed,{x:"-="+t.offset,ease:Linear.easeNone},0)});this.speedTimeout=setTimeout(function(){t.speed=t.maxDuration},300)}},{key:"cleanScene",value:function e(){var t=this;this.elements.forEach(function(e){if(e.position.x<-e.size*.5){t.branch.remove(e);if(e.destroy)e.destroy();t.elements.splice(0,1)}})}},{key:"resize",value:function e(){this.camera.aspect=s.default.width/s.default.height;this.camera.updateProjectionMatrix()}},{key:"update",value:function e(t){if(this.controls)this.controls.update();if(this.iceMaterial)this.iceMaterial.uniforms.time.value+=.01}}]);return t}(r.Scene);i.default=T},{"../controls/Controls":33,"../materials/ice-material/IceMaterial":36,"../objects/parts/partsFactory":50,"../utils/debug":59,"../utils/preloader":61,"brindille-resize":13,three:31}],56:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:true});var n=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}return function(t,i,n){if(i)e(t.prototype,i);if(n)e(t,n);return t}}();var r=e("three");var a=e("brindille-resize");var s=f(a);var o=e("../utils/debug");var l=e("../objects/MerryTitle");var u=f(l);var c=e("../utils/preloader");var h=f(c);function f(e){return e&&e.__esModule?e:{default:e}}function d(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function p(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function m(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}var v=function(e){m(t,e);function t(){d(this,t);return p(this,(t.__proto__||Object.getPrototypeOf(t)).call(this))}n(t,[{key:"onLoadComplete",value:function e(t){this.camera=new r.PerspectiveCamera(70,s.default.width/s.default.height,.1,1e3);this.camera.position.z=620;this.add(this.camera);this.listener=new r.AudioListener;this.camera.add(this.listener);this.sound=new r.Audio(this.listener);this.sound.setBuffer(h.default.getAudio("AmbientSound"));this.sound.setLoop(true);this.sound.setVolume(.3);this.sound.play();this.setXPScene();var i=new r.PointLight(16777215,1);var n=new r.PointLight(16777215,.5);i.position.x=20;n.position.x=-20;i.position.z=20;n.position.z=-20;this.title=new u.default;this.add(this.title);this.setGui()}},{key:"setGui",value:function e(){var t=this;o.gui.add(this.camera,"fov",{min:0,max:1e3,step:.1}).on("update",function(){t.camera.updateProjectionMatrix()})}},{key:"setXPScene",value:function e(){this.rtTexture=new r.WebGLRenderTarget(s.default.width,s.default.height,{minFilter:r.LinearFilter,magFilter:r.LinearFilter,format:r.RGBAFormat});this.materialScreen=new r.ShaderMaterial({uniforms:{tDiffuse:{value:this.rtTexture.texture}},transparent:true,vertexShader:"#define GLSLIFY 1\nvarying vec2 vUv;\n\nvoid main() {\n\tvUv = uv;\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n}\n",fragmentShader:"#define GLSLIFY 1\nvarying vec2 vUv;\nuniform sampler2D tDiffuse;\n\nvoid main() {\n\tgl_FragColor = texture2D(tDiffuse, vUv);\n}\n",depthWrite:false,blending:1});var t=new r.PlaneGeometry(s.default.width,s.default.height);this.fullContainer=new r.Mesh(t,this.materialScreen);this.fullContainer.position.set(0,0,0);this.add(this.fullContainer)}},{key:"showTuto",value:function e(){this.title.show()}},{key:"hideTuto",value:function e(){this.title.hide()}},{key:"resize",value:function e(){this.rtTexture.setSize(s.default.width,s.default.height);console.log(this.camera.fov,360/Math.PI*Math.atan(this.tanFOV*(window.innerHeight/this.windowHeight)))}},{key:"update",value:function e(t){}}]);return t}(r.Scene);i.default=v},{"../objects/MerryTitle":38,"../utils/debug":59,"../utils/preloader":61,"brindille-resize":13,three:31}],57:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:true});var n=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}return function(t,i,n){if(i)e(t.prototype,i);if(n)e(t,n);return t}}();var r=e("three");var a=e("brindille-resize");var s=f(a);var o=e("../utils/debug");var l=e("../objects/Snow");var u=f(l);var c=e("../utils/preloader");var h=f(c);function f(e){return e&&e.__esModule?e:{default:e}}function d(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function p(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function m(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}var v=function(e){m(t,e);function t(){d(this,t);var e=p(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));e.isSkyDebug=false;return e}n(t,[{key:"onLoadComplete",value:function e(t){this.camera=new r.PerspectiveCamera(75,s.default.width/s.default.height,.1,1e3);this.add(this.camera);this.camera.position.z=800;var i=new r.PointLight(16777215,1);var n=new r.PointLight(16777215,.5);i.position.x=20;n.position.x=-20;i.position.z=20;n.position.z=-20;this.snow=new u.default;this.add(this.snow)}},{key:"resize",value:function e(){this.camera.aspect=s.default.width/s.default.height;this.camera.updateProjectionMatrix()}},{key:"update",value:function e(t,i){if(this.snow)this.snow.update()}}]);return t}(r.Scene);i.default=v},{"../objects/Snow":39,"../utils/debug":59,"../utils/preloader":61,"brindille-resize":13,three:31}],58:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:true});var n=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}return function(t,i,n){if(i)e(t.prototype,i);if(n)e(t,n);return t}}();var r=e("dom-classes");var a=s(r);function s(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var l=function(){function e(){o(this,e);this.onKeyUp=this.onKeyUp.bind(this);this.isVisible=false;this.$el=document.body.querySelector(".Tuto");this.$keys=[].slice.call(this.$el.querySelectorAll(".Tuto-keyboard"));window.addEventListener("keyup",this.onKeyUp)}n(e,[{key:"onKeyUp",value:function e(){this.$keys.forEach(function(e){if(a.default.has(e,"is-pressed")){a.default.remove(e,"is-pressed")}})}},{key:"onKeyPress",value:function e(t){if(!this.isVisible)return;this.$keys.forEach(function(e){if(parseInt(e.getAttribute("data-id"))===t){a.default.add(e,"is-pressed")}else{a.default.remove(e,"is-pressed")}})}},{key:"show",value:function e(){this.isVisible=true;this.$el.style.display="block";TweenMax.staggerFromTo(this.$keys,.6,{alpha:0,y:-10},{alpha:1,y:0,ease:Expo.easeOut},.1)}},{key:"hide",value:function e(){this.isVisible=false;TweenMax.staggerTo(this.$keys,.6,{alpha:0,y:-10,ease:Expo.easeOut},0)}}]);return e}();i.default=new l},{"dom-classes":17}],59:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:true});i.panelFX=i.gui=undefined;var n=e("guigui");var r=a(n);function a(e){return e&&e.__esModule?e:{default:e}}var s=i.gui=r.default.addPanel("Settings");var o=i.panelFX=r.default.addPanel("PostFX")},{guigui:20}],60:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:true});var n=[{type:"JsonModel",url:"./assets/models/merryxmas.js",id:"merryxmasModel"},{type:"JsonModel",url:"./assets/models/crystal.js",id:"crystalModel"},{type:"JsonModel",url:"./assets/models/crystal2.js",id:"crystal2Model"},{type:"JsonModel",url:"./assets/models/crystal3.js",id:"crystal3Model"},{type:"Audio",url:"./assets/sounds/ambient.mp3",id:"AmbientSound"},{type:"Audio",url:"./assets/sounds/Do.mp3",id:"DoSound"},{type:"Audio",url:"./assets/sounds/Re.mp3",id:"ReSound"},{type:"Audio",url:"./assets/sounds/Mi.mp3",id:"MiSound"},{type:"Audio",url:"./assets/sounds/Fa.mp3",id:"FaSound"},{type:"Audio",url:"./assets/sounds/Sol.mp3",id:"SolSound"},{type:"Audio",url:"./assets/sounds/La.mp3",id:"LaSound"},{type:"Audio",url:"./assets/sounds/Si.mp3",id:"SiSound"},{type:"Texture",url:"./assets/textures/titletexture.jpg",id:"TitleTexture"},{type:"Texture",url:"./assets/textures/cloud2.png",id:"CloudTexture"},{type:"Texture",url:"./assets/textures/snow.png",id:"SnowTexture"},{type:"Texture",url:"./assets/textures/ice-crystals.jpg",id:"FrozTexture"},{type:"Texture",url:"./assets/textures/noise.jpg",id:"NoiseTexture"},{type:"Texture",url:"./assets/textures/envmap2.jpg",id:"ReflectionTexture"}];i.default=n},{}],61:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:true});var n=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}return function(t,i,n){if(i)e(t.prototype,i);if(n)e(t,n);return t}}();var r=e("three");function a(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var s=function(){function e(){a(this,e);this.jsonLoader=new r.JSONLoader;this.textureLoader=new r.TextureLoader;this.audioLoader=new r.AudioLoader;this.isLoaded=false}n(e,[{key:"load",value:function e(t,i){if(!t||!t.length)return;this.manifest=t;this.start(i)}},{key:"start",value:function e(t){var i=this;this.getManifestByType("JsonModel").forEach(function(e){e.isLoaded=false;i.jsonLoader.load(e.url,function(n){e.isLoaded=true;e.geometry=n;if(i.checkManifestCompletion()){t()}})});this.getManifestByType("Audio").forEach(function(e){e.isLoaded=false;i.audioLoader.load(e.url,function(n){e.isLoaded=true;e.audio=n;if(i.checkManifestCompletion()){t()}})});this.getManifestByType("Texture").forEach(function(e){e.isLoaded=false;i.textureLoader.load(e.url,function(n){e.isLoaded=true;e.texture=n;if(i.checkManifestCompletion()){t()}})});this.getManifestByType("Image").forEach(function(e){e.isLoaded=false;var n=new Image;n.addEventListener("load",function(){e.isLoaded=true;e.image=n;console.log("k",e);if(i.checkManifestCompletion()){t()}});n.src=e.url})}},{key:"getManifestByType",value:function e(t){return this.manifest.filter(function(e){return e.type===t})}},{key:"checkManifestCompletion",value:function e(){for(var t=0,i=this.manifest.length;t<i;t++){if(!this.manifest[t].isLoaded)return false}return true}},{key:"getGeometry",value:function e(t){var i=this.manifest.filter(function(e){return e.id===t})[0];if(i&&i.geometry){return i.geometry}return null}},{key:"getTexture",value:function e(t){var i=this.manifest.filter(function(e){return e.id===t})[0];if(i&&i.texture){return i.texture}return null}},{key:"getImage",value:function e(t){var i=this.manifest.filter(function(e){return e.id===t})[0];if(i&&i.image){return i.image}return null}},{key:"getAudio",value:function e(t){var i=this.manifest.filter(function(e){return e.id===t})[0];if(i&&i.audio){return i.audio}return null}}]);return e}();i.default=new s},{three:31}]},{},[35]);
